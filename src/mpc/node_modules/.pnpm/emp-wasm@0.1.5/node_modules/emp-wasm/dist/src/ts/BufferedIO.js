import { EventEmitter } from "ee-typed";
import BufferQueue from "./BufferQueue";
export default class BufferedIO extends EventEmitter {
    send;
    closeOther;
    bq = new BufferQueue();
    constructor(send, closeOther) {
        super();
        this.send = send;
        this.closeOther = closeOther;
    }
    close() {
        if (this.bq.isClosed()) {
            return;
        }
        this.bq.close();
        this.closeOther?.();
    }
    async recv(len) {
        return await this.bq.pop(len);
    }
    accept(data) {
        this.bq.push(data);
    }
}
//# sourceMappingURL=BufferedIO.js.map