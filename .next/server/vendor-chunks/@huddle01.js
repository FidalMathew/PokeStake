"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@huddle01";
exports.ids = ["vendor-chunks/@huddle01"];
exports.modules = {

/***/ "(ssr)/./node_modules/@huddle01/react/dist/chunk-5MJAZUF3.js":
/*!*************************************************************!*\
  !*** ./node_modules/@huddle01/react/dist/chunk-5MJAZUF3.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useLocalVideo: () => (/* binding */ useLocalVideo)\n/* harmony export */ });\n/* harmony import */ var _chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-AOJVKUIS.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-AOJVKUIS.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\n// src/hooks/useLocalVideo.ts\n\nvar useLocalVideo = (props) => {\n  const { huddleClient } = (0,_chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__.useHuddle01_default)();\n  const localPeer = huddleClient.localPeer;\n  const [stream, setStream] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\n    localPeer.getStream({ label: \"video\" })\n  );\n  const [isVideoOn, setIsVideoOn] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\n    stream?.getVideoTracks()?.[0]?.enabled ?? false\n  );\n  const [isProducing, setIdProducing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const handleStreamFetched = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      if (data.mediaKind === \"cam\") {\n        setStream(data.stream);\n        const isEnabled = data.stream.getVideoTracks()?.[0]?.enabled ?? false;\n        setIsVideoOn(isEnabled);\n      }\n    },\n    []\n  );\n  const handleStreamClosed = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      if (data.label === \"video\") {\n        setStream(null);\n        setIsVideoOn(false);\n        setIdProducing(false);\n        if (props?.onProduceClose) props?.onProduceClose(data.reason);\n      }\n    },\n    [props?.onProduceClose]\n  );\n  const handleStreamPlayable = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      if (data.label === \"video\") {\n        setStream(localPeer.getStream({ label: \"video\" }));\n        setIsVideoOn(true);\n        setIdProducing(true);\n        if (props?.onProduceStart) props?.onProduceStart(data.producer);\n      }\n    },\n    [props?.onProduceStart]\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    localPeer.on(\"stream-fetched\", handleStreamFetched);\n    localPeer.on(\"stream-playable\", handleStreamPlayable);\n    localPeer.on(\"stream-closed\", handleStreamClosed);\n    return () => {\n      localPeer.off(\"stream-fetched\", handleStreamFetched);\n      localPeer.off(\"stream-playable\", handleStreamPlayable);\n      localPeer.off(\"stream-closed\", handleStreamClosed);\n    };\n  }, []);\n  const enableVideo = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => localPeer.enableVideo(data),\n    [localPeer]\n  );\n  const disableVideo = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => localPeer.disableVideo(), [localPeer]);\n  const track = stream?.getVideoTracks()[0] || null;\n  const replaceVideoStream = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (stream2) => localPeer.replaceVideoStream(stream2),\n    [localPeer]\n  );\n  const changeVideoSource = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (deviceId) => localPeer.changeVideoSource(deviceId),\n    [localPeer]\n  );\n  return {\n    stream,\n    track,\n    isVideoOn,\n    isProducing,\n    enableVideo,\n    disableVideo,\n    replaceVideoStream,\n    changeVideoSource\n  };\n};\n\n\n//# sourceMappingURL=chunk-5MJAZUF3.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstNU1KQVpVRjMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRTZCOztBQUU3QjtBQUN5RDtBQUN6RDtBQUNBLFVBQVUsZUFBZSxFQUFFLHVFQUFtQjtBQUM5QztBQUNBLDhCQUE4QiwrQ0FBUTtBQUN0QywwQkFBMEIsZ0JBQWdCO0FBQzFDO0FBQ0Esb0NBQW9DLCtDQUFRO0FBQzVDO0FBQ0E7QUFDQSx3Q0FBd0MsK0NBQVE7QUFDaEQsOEJBQThCLGtEQUFXO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsNkJBQTZCLGtEQUFXO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSwrQkFBK0Isa0RBQVc7QUFDMUM7QUFDQTtBQUNBLHdDQUF3QyxnQkFBZ0I7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILHNCQUFzQixrREFBVztBQUNqQztBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsa0RBQVc7QUFDbEM7QUFDQSw2QkFBNkIsa0RBQVc7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtEQUFXO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Bva2Vtb24tZ2FtZS1ldGhpbmRpYS0xLy4vbm9kZV9tb2R1bGVzL0BodWRkbGUwMS9yZWFjdC9kaXN0L2NodW5rLTVNSkFaVUYzLmpzP2NiMmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgdXNlSHVkZGxlMDFfZGVmYXVsdFxufSBmcm9tIFwiLi9jaHVuay1BT0pWS1VJUy5qc1wiO1xuXG4vLyBzcmMvaG9va3MvdXNlTG9jYWxWaWRlby50c1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbnZhciB1c2VMb2NhbFZpZGVvID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0IHsgaHVkZGxlQ2xpZW50IH0gPSB1c2VIdWRkbGUwMV9kZWZhdWx0KCk7XG4gIGNvbnN0IGxvY2FsUGVlciA9IGh1ZGRsZUNsaWVudC5sb2NhbFBlZXI7XG4gIGNvbnN0IFtzdHJlYW0sIHNldFN0cmVhbV0gPSB1c2VTdGF0ZShcbiAgICBsb2NhbFBlZXIuZ2V0U3RyZWFtKHsgbGFiZWw6IFwidmlkZW9cIiB9KVxuICApO1xuICBjb25zdCBbaXNWaWRlb09uLCBzZXRJc1ZpZGVvT25dID0gdXNlU3RhdGUoXG4gICAgc3RyZWFtPy5nZXRWaWRlb1RyYWNrcygpPy5bMF0/LmVuYWJsZWQgPz8gZmFsc2VcbiAgKTtcbiAgY29uc3QgW2lzUHJvZHVjaW5nLCBzZXRJZFByb2R1Y2luZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGhhbmRsZVN0cmVhbUZldGNoZWQgPSB1c2VDYWxsYmFjayhcbiAgICAoZGF0YSkgPT4ge1xuICAgICAgaWYgKGRhdGEubWVkaWFLaW5kID09PSBcImNhbVwiKSB7XG4gICAgICAgIHNldFN0cmVhbShkYXRhLnN0cmVhbSk7XG4gICAgICAgIGNvbnN0IGlzRW5hYmxlZCA9IGRhdGEuc3RyZWFtLmdldFZpZGVvVHJhY2tzKCk/LlswXT8uZW5hYmxlZCA/PyBmYWxzZTtcbiAgICAgICAgc2V0SXNWaWRlb09uKGlzRW5hYmxlZCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbXVxuICApO1xuICBjb25zdCBoYW5kbGVTdHJlYW1DbG9zZWQgPSB1c2VDYWxsYmFjayhcbiAgICAoZGF0YSkgPT4ge1xuICAgICAgaWYgKGRhdGEubGFiZWwgPT09IFwidmlkZW9cIikge1xuICAgICAgICBzZXRTdHJlYW0obnVsbCk7XG4gICAgICAgIHNldElzVmlkZW9PbihmYWxzZSk7XG4gICAgICAgIHNldElkUHJvZHVjaW5nKGZhbHNlKTtcbiAgICAgICAgaWYgKHByb3BzPy5vblByb2R1Y2VDbG9zZSkgcHJvcHM/Lm9uUHJvZHVjZUNsb3NlKGRhdGEucmVhc29uKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtwcm9wcz8ub25Qcm9kdWNlQ2xvc2VdXG4gICk7XG4gIGNvbnN0IGhhbmRsZVN0cmVhbVBsYXlhYmxlID0gdXNlQ2FsbGJhY2soXG4gICAgKGRhdGEpID0+IHtcbiAgICAgIGlmIChkYXRhLmxhYmVsID09PSBcInZpZGVvXCIpIHtcbiAgICAgICAgc2V0U3RyZWFtKGxvY2FsUGVlci5nZXRTdHJlYW0oeyBsYWJlbDogXCJ2aWRlb1wiIH0pKTtcbiAgICAgICAgc2V0SXNWaWRlb09uKHRydWUpO1xuICAgICAgICBzZXRJZFByb2R1Y2luZyh0cnVlKTtcbiAgICAgICAgaWYgKHByb3BzPy5vblByb2R1Y2VTdGFydCkgcHJvcHM/Lm9uUHJvZHVjZVN0YXJ0KGRhdGEucHJvZHVjZXIpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW3Byb3BzPy5vblByb2R1Y2VTdGFydF1cbiAgKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsb2NhbFBlZXIub24oXCJzdHJlYW0tZmV0Y2hlZFwiLCBoYW5kbGVTdHJlYW1GZXRjaGVkKTtcbiAgICBsb2NhbFBlZXIub24oXCJzdHJlYW0tcGxheWFibGVcIiwgaGFuZGxlU3RyZWFtUGxheWFibGUpO1xuICAgIGxvY2FsUGVlci5vbihcInN0cmVhbS1jbG9zZWRcIiwgaGFuZGxlU3RyZWFtQ2xvc2VkKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbG9jYWxQZWVyLm9mZihcInN0cmVhbS1mZXRjaGVkXCIsIGhhbmRsZVN0cmVhbUZldGNoZWQpO1xuICAgICAgbG9jYWxQZWVyLm9mZihcInN0cmVhbS1wbGF5YWJsZVwiLCBoYW5kbGVTdHJlYW1QbGF5YWJsZSk7XG4gICAgICBsb2NhbFBlZXIub2ZmKFwic3RyZWFtLWNsb3NlZFwiLCBoYW5kbGVTdHJlYW1DbG9zZWQpO1xuICAgIH07XG4gIH0sIFtdKTtcbiAgY29uc3QgZW5hYmxlVmlkZW8gPSB1c2VDYWxsYmFjayhcbiAgICAoZGF0YSkgPT4gbG9jYWxQZWVyLmVuYWJsZVZpZGVvKGRhdGEpLFxuICAgIFtsb2NhbFBlZXJdXG4gICk7XG4gIGNvbnN0IGRpc2FibGVWaWRlbyA9IHVzZUNhbGxiYWNrKCgpID0+IGxvY2FsUGVlci5kaXNhYmxlVmlkZW8oKSwgW2xvY2FsUGVlcl0pO1xuICBjb25zdCB0cmFjayA9IHN0cmVhbT8uZ2V0VmlkZW9UcmFja3MoKVswXSB8fCBudWxsO1xuICBjb25zdCByZXBsYWNlVmlkZW9TdHJlYW0gPSB1c2VDYWxsYmFjayhcbiAgICAoc3RyZWFtMikgPT4gbG9jYWxQZWVyLnJlcGxhY2VWaWRlb1N0cmVhbShzdHJlYW0yKSxcbiAgICBbbG9jYWxQZWVyXVxuICApO1xuICBjb25zdCBjaGFuZ2VWaWRlb1NvdXJjZSA9IHVzZUNhbGxiYWNrKFxuICAgIChkZXZpY2VJZCkgPT4gbG9jYWxQZWVyLmNoYW5nZVZpZGVvU291cmNlKGRldmljZUlkKSxcbiAgICBbbG9jYWxQZWVyXVxuICApO1xuICByZXR1cm4ge1xuICAgIHN0cmVhbSxcbiAgICB0cmFjayxcbiAgICBpc1ZpZGVvT24sXG4gICAgaXNQcm9kdWNpbmcsXG4gICAgZW5hYmxlVmlkZW8sXG4gICAgZGlzYWJsZVZpZGVvLFxuICAgIHJlcGxhY2VWaWRlb1N0cmVhbSxcbiAgICBjaGFuZ2VWaWRlb1NvdXJjZVxuICB9O1xufTtcblxuZXhwb3J0IHtcbiAgdXNlTG9jYWxWaWRlb1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLTVNSkFaVUYzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/react/dist/chunk-5MJAZUF3.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/react/dist/chunk-5NBDJ44S.js":
/*!*************************************************************!*\
  !*** ./node_modules/@huddle01/react/dist/chunk-5NBDJ44S.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useLobby: () => (/* binding */ useLobby)\n/* harmony export */ });\n/* harmony import */ var _chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-AOJVKUIS.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-AOJVKUIS.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\n// src/hooks/useLobby.ts\n\nvar useLobby = (props) => {\n  const { huddleClient } = (0,_chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__.useHuddle01_default)();\n  const [lobbyPeersIds, setLobbyPeersIds] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\n    huddleClient.room.lobbyPeerIds\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const room = huddleClient.room;\n    const handleNewLobbyPeers = (lobbyPeerIds) => {\n      setLobbyPeersIds(lobbyPeerIds);\n      if (props?.onLobbyPeersUpdated) {\n        props.onLobbyPeersUpdated(lobbyPeerIds);\n      }\n    };\n    const handleNewLobbyPeer = (peer) => {\n      if (props?.onNewLobbyPeer) {\n        props.onNewLobbyPeer(peer);\n      }\n    };\n    room.on(\"lobby-peers-updated\", handleNewLobbyPeers);\n    room.on(\"new-lobby-peer\", handleNewLobbyPeer);\n    return () => {\n      room.off(\"lobby-peers-updated\", handleNewLobbyPeers);\n      room.off(\"new-lobby-peer\", handleNewLobbyPeer);\n    };\n  }, []);\n  const admitPeer = huddleClient.room.admitPeer;\n  const denyPeer = huddleClient.room.denyPeer;\n  const getLobbyPeerMetadata = huddleClient.room.getLobbyPeerMetadata;\n  return { lobbyPeersIds, getLobbyPeerMetadata, admitPeer, denyPeer };\n};\n\n\n//# sourceMappingURL=chunk-5NBDJ44S.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstNU5CREo0NFMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRTZCOztBQUU3QjtBQUM0QztBQUM1QztBQUNBLFVBQVUsZUFBZSxFQUFFLHVFQUFtQjtBQUM5Qyw0Q0FBNEMsK0NBQVE7QUFDcEQ7QUFDQTtBQUNBLEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYOztBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2tlbW9uLWdhbWUtZXRoaW5kaWEtMS8uL25vZGVfbW9kdWxlcy9AaHVkZGxlMDEvcmVhY3QvZGlzdC9jaHVuay01TkJESjQ0Uy5qcz8zMjY3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHVzZUh1ZGRsZTAxX2RlZmF1bHRcbn0gZnJvbSBcIi4vY2h1bmstQU9KVktVSVMuanNcIjtcblxuLy8gc3JjL2hvb2tzL3VzZUxvYmJ5LnRzXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG52YXIgdXNlTG9iYnkgPSAocHJvcHMpID0+IHtcbiAgY29uc3QgeyBodWRkbGVDbGllbnQgfSA9IHVzZUh1ZGRsZTAxX2RlZmF1bHQoKTtcbiAgY29uc3QgW2xvYmJ5UGVlcnNJZHMsIHNldExvYmJ5UGVlcnNJZHNdID0gdXNlU3RhdGUoXG4gICAgaHVkZGxlQ2xpZW50LnJvb20ubG9iYnlQZWVySWRzXG4gICk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgcm9vbSA9IGh1ZGRsZUNsaWVudC5yb29tO1xuICAgIGNvbnN0IGhhbmRsZU5ld0xvYmJ5UGVlcnMgPSAobG9iYnlQZWVySWRzKSA9PiB7XG4gICAgICBzZXRMb2JieVBlZXJzSWRzKGxvYmJ5UGVlcklkcyk7XG4gICAgICBpZiAocHJvcHM/Lm9uTG9iYnlQZWVyc1VwZGF0ZWQpIHtcbiAgICAgICAgcHJvcHMub25Mb2JieVBlZXJzVXBkYXRlZChsb2JieVBlZXJJZHMpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaGFuZGxlTmV3TG9iYnlQZWVyID0gKHBlZXIpID0+IHtcbiAgICAgIGlmIChwcm9wcz8ub25OZXdMb2JieVBlZXIpIHtcbiAgICAgICAgcHJvcHMub25OZXdMb2JieVBlZXIocGVlcik7XG4gICAgICB9XG4gICAgfTtcbiAgICByb29tLm9uKFwibG9iYnktcGVlcnMtdXBkYXRlZFwiLCBoYW5kbGVOZXdMb2JieVBlZXJzKTtcbiAgICByb29tLm9uKFwibmV3LWxvYmJ5LXBlZXJcIiwgaGFuZGxlTmV3TG9iYnlQZWVyKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcm9vbS5vZmYoXCJsb2JieS1wZWVycy11cGRhdGVkXCIsIGhhbmRsZU5ld0xvYmJ5UGVlcnMpO1xuICAgICAgcm9vbS5vZmYoXCJuZXctbG9iYnktcGVlclwiLCBoYW5kbGVOZXdMb2JieVBlZXIpO1xuICAgIH07XG4gIH0sIFtdKTtcbiAgY29uc3QgYWRtaXRQZWVyID0gaHVkZGxlQ2xpZW50LnJvb20uYWRtaXRQZWVyO1xuICBjb25zdCBkZW55UGVlciA9IGh1ZGRsZUNsaWVudC5yb29tLmRlbnlQZWVyO1xuICBjb25zdCBnZXRMb2JieVBlZXJNZXRhZGF0YSA9IGh1ZGRsZUNsaWVudC5yb29tLmdldExvYmJ5UGVlck1ldGFkYXRhO1xuICByZXR1cm4geyBsb2JieVBlZXJzSWRzLCBnZXRMb2JieVBlZXJNZXRhZGF0YSwgYWRtaXRQZWVyLCBkZW55UGVlciB9O1xufTtcblxuZXhwb3J0IHtcbiAgdXNlTG9iYnlcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay01TkJESjQ0Uy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/react/dist/chunk-5NBDJ44S.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/react/dist/chunk-AOJVKUIS.js":
/*!*************************************************************!*\
  !*** ./node_modules/@huddle01/react/dist/chunk-AOJVKUIS.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HuddleProvider: () => (/* binding */ HuddleProvider),\n/* harmony export */   useHuddle01_default: () => (/* binding */ useHuddle01_default)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n// src/utils/createGenericContext.tsx\n\nvar createGenericContext = () => {\n  const genericContext = react__WEBPACK_IMPORTED_MODULE_0__.createContext(void 0);\n  const useGenericContext = () => {\n    const contextIsDefined = react__WEBPACK_IMPORTED_MODULE_0__.useContext(genericContext);\n    if (!contextIsDefined) {\n      throw new Error(\"\\u274C Nezuko client must be used within a NezukoProvider\");\n    }\n    return contextIsDefined;\n  };\n  return [useGenericContext, genericContext.Provider];\n};\n\n// src/HuddleContext.tsx\n\nvar [useHuddle01, HuddleContextProvider] = createGenericContext();\nvar HuddleProvider = ({ children, client }) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(HuddleContextProvider, { value: { huddleClient: client }, children });\n\n// src/hooks/useHuddle01.ts\nvar useHuddle01_default = useHuddle01;\n\n\n//# sourceMappingURL=chunk-AOJVKUIS.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstQU9KVktVSVMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQzBCO0FBQzFCO0FBQ0EseUJBQXlCLGdEQUFtQjtBQUM1QztBQUNBLDZCQUE2Qiw2Q0FBZ0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDd0M7QUFDeEM7QUFDQSx3QkFBd0Isa0JBQWtCLHFCQUFxQixzREFBRywwQkFBMEIsU0FBUyxzQkFBc0IsWUFBWTs7QUFFdkk7QUFDQTs7QUFLRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9rZW1vbi1nYW1lLWV0aGluZGlhLTEvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstQU9KVktVSVMuanM/OGZhMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvY3JlYXRlR2VuZXJpY0NvbnRleHQudHN4XG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG52YXIgY3JlYXRlR2VuZXJpY0NvbnRleHQgPSAoKSA9PiB7XG4gIGNvbnN0IGdlbmVyaWNDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dCh2b2lkIDApO1xuICBjb25zdCB1c2VHZW5lcmljQ29udGV4dCA9ICgpID0+IHtcbiAgICBjb25zdCBjb250ZXh0SXNEZWZpbmVkID0gUmVhY3QudXNlQ29udGV4dChnZW5lcmljQ29udGV4dCk7XG4gICAgaWYgKCFjb250ZXh0SXNEZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcXHUyNzRDIE5lenVrbyBjbGllbnQgbXVzdCBiZSB1c2VkIHdpdGhpbiBhIE5lenVrb1Byb3ZpZGVyXCIpO1xuICAgIH1cbiAgICByZXR1cm4gY29udGV4dElzRGVmaW5lZDtcbiAgfTtcbiAgcmV0dXJuIFt1c2VHZW5lcmljQ29udGV4dCwgZ2VuZXJpY0NvbnRleHQuUHJvdmlkZXJdO1xufTtcblxuLy8gc3JjL0h1ZGRsZUNvbnRleHQudHN4XG5pbXBvcnQgeyBqc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbnZhciBbdXNlSHVkZGxlMDEsIEh1ZGRsZUNvbnRleHRQcm92aWRlcl0gPSBjcmVhdGVHZW5lcmljQ29udGV4dCgpO1xudmFyIEh1ZGRsZVByb3ZpZGVyID0gKHsgY2hpbGRyZW4sIGNsaWVudCB9KSA9PiAvKiBAX19QVVJFX18gKi8ganN4KEh1ZGRsZUNvbnRleHRQcm92aWRlciwgeyB2YWx1ZTogeyBodWRkbGVDbGllbnQ6IGNsaWVudCB9LCBjaGlsZHJlbiB9KTtcblxuLy8gc3JjL2hvb2tzL3VzZUh1ZGRsZTAxLnRzXG52YXIgdXNlSHVkZGxlMDFfZGVmYXVsdCA9IHVzZUh1ZGRsZTAxO1xuXG5leHBvcnQge1xuICBIdWRkbGVQcm92aWRlcixcbiAgdXNlSHVkZGxlMDFfZGVmYXVsdFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLUFPSlZLVUlTLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/react/dist/chunk-AOJVKUIS.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/react/dist/chunk-CF7WL7FP.js":
/*!*************************************************************!*\
  !*** ./node_modules/@huddle01/react/dist/chunk-CF7WL7FP.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useLocalPeer: () => (/* binding */ useLocalPeer)\n/* harmony export */ });\n/* harmony import */ var _chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-AOJVKUIS.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-AOJVKUIS.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\n// src/hooks/useLocalPeer.ts\n\nvar useLocalPeer = (props) => {\n  const { huddleClient } = (0,_chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__.useHuddle01_default)();\n  const localPeer = huddleClient.localPeer;\n  const peerId = localPeer.peerId;\n  const [permissions, setPermissions] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\n    localPeer.permissions\n  );\n  const [role, setRole] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(localPeer.role);\n  const [metadata, setMetadata] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\n    localPeer.getMetadata() ?? null\n  );\n  const handleUpdateMetadata = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    const newMetadata = localPeer.getMetadata();\n    if (props?.onMetadataUpdated) props.onMetadataUpdated(newMetadata);\n    setMetadata(newMetadata);\n  }, [props?.onMetadataUpdated]);\n  const handlePermissionsUpdated = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      if (props?.onPermissionsUpdated) {\n        props.onPermissionsUpdated(data.permissions);\n      }\n      if (data.role) {\n        if (props?.onRoleUpdated) props.onRoleUpdated(data.role);\n        setRole(data.role);\n      }\n      setPermissions(data.permissions);\n    },\n    [props?.onPermissionsUpdated, props?.onRoleUpdated]\n  );\n  const handleRoleUpdated = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      if (props?.onRoleUpdated) props.onRoleUpdated(data.role);\n      setRole(data.role);\n    },\n    [props?.onRoleUpdated]\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    localPeer.on(\"metadata-updated\", handleUpdateMetadata);\n    localPeer.on(\"permissions-updated\", handlePermissionsUpdated);\n    localPeer.on(\"role-updated\", handleRoleUpdated);\n    return () => {\n      localPeer.off(\"metadata-updated\", handleUpdateMetadata);\n      localPeer.off(\"permissions-updated\", handlePermissionsUpdated);\n      localPeer.off(\"role-updated\", handleRoleUpdated);\n    };\n  }, []);\n  const updateMetadata = localPeer.updateMetadata;\n  const updateRole = localPeer.updateRole;\n  return {\n    peerId,\n    role,\n    permissions,\n    metadata,\n    updateMetadata,\n    updateRole\n  };\n};\n\n\n//# sourceMappingURL=chunk-CF7WL7FP.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstQ0Y3V0w3RlAuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRTZCOztBQUU3QjtBQUN5RDtBQUN6RDtBQUNBLFVBQVUsZUFBZSxFQUFFLHVFQUFtQjtBQUM5QztBQUNBO0FBQ0Esd0NBQXdDLCtDQUFRO0FBQ2hEO0FBQ0E7QUFDQSwwQkFBMEIsK0NBQVE7QUFDbEMsa0NBQWtDLCtDQUFRO0FBQzFDO0FBQ0E7QUFDQSwrQkFBK0Isa0RBQVc7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILG1DQUFtQyxrREFBVztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDRCQUE0QixrREFBVztBQUN2QztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Bva2Vtb24tZ2FtZS1ldGhpbmRpYS0xLy4vbm9kZV9tb2R1bGVzL0BodWRkbGUwMS9yZWFjdC9kaXN0L2NodW5rLUNGN1dMN0ZQLmpzPzU5MzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgdXNlSHVkZGxlMDFfZGVmYXVsdFxufSBmcm9tIFwiLi9jaHVuay1BT0pWS1VJUy5qc1wiO1xuXG4vLyBzcmMvaG9va3MvdXNlTG9jYWxQZWVyLnRzXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xudmFyIHVzZUxvY2FsUGVlciA9IChwcm9wcykgPT4ge1xuICBjb25zdCB7IGh1ZGRsZUNsaWVudCB9ID0gdXNlSHVkZGxlMDFfZGVmYXVsdCgpO1xuICBjb25zdCBsb2NhbFBlZXIgPSBodWRkbGVDbGllbnQubG9jYWxQZWVyO1xuICBjb25zdCBwZWVySWQgPSBsb2NhbFBlZXIucGVlcklkO1xuICBjb25zdCBbcGVybWlzc2lvbnMsIHNldFBlcm1pc3Npb25zXSA9IHVzZVN0YXRlKFxuICAgIGxvY2FsUGVlci5wZXJtaXNzaW9uc1xuICApO1xuICBjb25zdCBbcm9sZSwgc2V0Um9sZV0gPSB1c2VTdGF0ZShsb2NhbFBlZXIucm9sZSk7XG4gIGNvbnN0IFttZXRhZGF0YSwgc2V0TWV0YWRhdGFdID0gdXNlU3RhdGUoXG4gICAgbG9jYWxQZWVyLmdldE1ldGFkYXRhKCkgPz8gbnVsbFxuICApO1xuICBjb25zdCBoYW5kbGVVcGRhdGVNZXRhZGF0YSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBuZXdNZXRhZGF0YSA9IGxvY2FsUGVlci5nZXRNZXRhZGF0YSgpO1xuICAgIGlmIChwcm9wcz8ub25NZXRhZGF0YVVwZGF0ZWQpIHByb3BzLm9uTWV0YWRhdGFVcGRhdGVkKG5ld01ldGFkYXRhKTtcbiAgICBzZXRNZXRhZGF0YShuZXdNZXRhZGF0YSk7XG4gIH0sIFtwcm9wcz8ub25NZXRhZGF0YVVwZGF0ZWRdKTtcbiAgY29uc3QgaGFuZGxlUGVybWlzc2lvbnNVcGRhdGVkID0gdXNlQ2FsbGJhY2soXG4gICAgKGRhdGEpID0+IHtcbiAgICAgIGlmIChwcm9wcz8ub25QZXJtaXNzaW9uc1VwZGF0ZWQpIHtcbiAgICAgICAgcHJvcHMub25QZXJtaXNzaW9uc1VwZGF0ZWQoZGF0YS5wZXJtaXNzaW9ucyk7XG4gICAgICB9XG4gICAgICBpZiAoZGF0YS5yb2xlKSB7XG4gICAgICAgIGlmIChwcm9wcz8ub25Sb2xlVXBkYXRlZCkgcHJvcHMub25Sb2xlVXBkYXRlZChkYXRhLnJvbGUpO1xuICAgICAgICBzZXRSb2xlKGRhdGEucm9sZSk7XG4gICAgICB9XG4gICAgICBzZXRQZXJtaXNzaW9ucyhkYXRhLnBlcm1pc3Npb25zKTtcbiAgICB9LFxuICAgIFtwcm9wcz8ub25QZXJtaXNzaW9uc1VwZGF0ZWQsIHByb3BzPy5vblJvbGVVcGRhdGVkXVxuICApO1xuICBjb25zdCBoYW5kbGVSb2xlVXBkYXRlZCA9IHVzZUNhbGxiYWNrKFxuICAgIChkYXRhKSA9PiB7XG4gICAgICBpZiAocHJvcHM/Lm9uUm9sZVVwZGF0ZWQpIHByb3BzLm9uUm9sZVVwZGF0ZWQoZGF0YS5yb2xlKTtcbiAgICAgIHNldFJvbGUoZGF0YS5yb2xlKTtcbiAgICB9LFxuICAgIFtwcm9wcz8ub25Sb2xlVXBkYXRlZF1cbiAgKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsb2NhbFBlZXIub24oXCJtZXRhZGF0YS11cGRhdGVkXCIsIGhhbmRsZVVwZGF0ZU1ldGFkYXRhKTtcbiAgICBsb2NhbFBlZXIub24oXCJwZXJtaXNzaW9ucy11cGRhdGVkXCIsIGhhbmRsZVBlcm1pc3Npb25zVXBkYXRlZCk7XG4gICAgbG9jYWxQZWVyLm9uKFwicm9sZS11cGRhdGVkXCIsIGhhbmRsZVJvbGVVcGRhdGVkKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbG9jYWxQZWVyLm9mZihcIm1ldGFkYXRhLXVwZGF0ZWRcIiwgaGFuZGxlVXBkYXRlTWV0YWRhdGEpO1xuICAgICAgbG9jYWxQZWVyLm9mZihcInBlcm1pc3Npb25zLXVwZGF0ZWRcIiwgaGFuZGxlUGVybWlzc2lvbnNVcGRhdGVkKTtcbiAgICAgIGxvY2FsUGVlci5vZmYoXCJyb2xlLXVwZGF0ZWRcIiwgaGFuZGxlUm9sZVVwZGF0ZWQpO1xuICAgIH07XG4gIH0sIFtdKTtcbiAgY29uc3QgdXBkYXRlTWV0YWRhdGEgPSBsb2NhbFBlZXIudXBkYXRlTWV0YWRhdGE7XG4gIGNvbnN0IHVwZGF0ZVJvbGUgPSBsb2NhbFBlZXIudXBkYXRlUm9sZTtcbiAgcmV0dXJuIHtcbiAgICBwZWVySWQsXG4gICAgcm9sZSxcbiAgICBwZXJtaXNzaW9ucyxcbiAgICBtZXRhZGF0YSxcbiAgICB1cGRhdGVNZXRhZGF0YSxcbiAgICB1cGRhdGVSb2xlXG4gIH07XG59O1xuXG5leHBvcnQge1xuICB1c2VMb2NhbFBlZXJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1DRjdXTDdGUC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/react/dist/chunk-CF7WL7FP.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/react/dist/chunk-CKLHJDG3.js":
/*!*************************************************************!*\
  !*** ./node_modules/@huddle01/react/dist/chunk-CKLHJDG3.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useLocalAudio: () => (/* binding */ useLocalAudio)\n/* harmony export */ });\n/* harmony import */ var _chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-AOJVKUIS.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-AOJVKUIS.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\n// src/hooks/useLocalAudio.ts\n\nvar useLocalAudio = (props) => {\n  const { huddleClient } = (0,_chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__.useHuddle01_default)();\n  const localPeer = huddleClient.localPeer;\n  const [stream, setStream] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\n    localPeer.getStream({ label: \"audio\" })\n  );\n  const [isAudioOn, setIsAudioOn] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\n    stream?.getAudioTracks()?.[0]?.enabled ?? false\n  );\n  const [isProducing, setIdProducing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const handleStreamFetched = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      if (data.mediaKind === \"mic\") {\n        setStream(data.stream);\n        const isEnabled = data.stream.getAudioTracks()?.[0]?.enabled ?? false;\n        setIsAudioOn(isEnabled);\n      }\n    },\n    []\n  );\n  const handleStreamPlayable = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      if (data.label === \"audio\") {\n        setStream(localPeer.getStream({ label: \"audio\" }));\n        setIsAudioOn(true);\n        setIdProducing(true);\n        if (props?.onProduceStart) props?.onProduceStart(data.producer);\n      }\n    },\n    [props?.onProduceStart]\n  );\n  const handleStreamClosed = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      if (data.label === \"audio\") {\n        setStream(null);\n        setIsAudioOn(false);\n        setIdProducing(false);\n        if (props?.onProduceClose) props?.onProduceClose(data.label);\n      }\n    },\n    [props?.onProduceClose]\n  );\n  const handleStreamPaused = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      if (data.label === \"audio\") {\n        setIsAudioOn(false);\n        if (props?.onProducePaused) props?.onProducePaused();\n      }\n    },\n    []\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    localPeer.on(\"stream-fetched\", handleStreamFetched);\n    localPeer.on(\"stream-playable\", handleStreamPlayable);\n    localPeer.on(\"stream-closed\", handleStreamClosed);\n    localPeer.on(\"stream-paused\", handleStreamPaused);\n    return () => {\n      localPeer.off(\"stream-fetched\", handleStreamFetched);\n      localPeer.off(\"stream-playable\", handleStreamPlayable);\n      localPeer.off(\"stream-closed\", handleStreamClosed);\n      localPeer.off(\"stream-paused\", handleStreamPaused);\n    };\n  }, []);\n  const track = stream?.getAudioTracks()[0] || null;\n  const enableAudio = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      return localPeer.enableAudio(data);\n    },\n    [localPeer]\n  );\n  const disableAudio = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    return localPeer.disableAudio();\n  }, [localPeer]);\n  const pauseAudio = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    return localPeer.pauseAudio();\n  }, [localPeer]);\n  const resumeAudio = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    return localPeer.resumeAudio();\n  }, [localPeer]);\n  const replaceAudioStream = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (stream2) => {\n      return localPeer.replaceAudioStream(stream2);\n    },\n    [localPeer]\n  );\n  const changeAudioSource = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (deviceId) => {\n      return localPeer.changeAudioSource(deviceId);\n    },\n    [localPeer]\n  );\n  return {\n    stream,\n    track,\n    isAudioOn,\n    isProducing,\n    enableAudio,\n    disableAudio,\n    pauseAudio,\n    resumeAudio,\n    replaceAudioStream,\n    changeAudioSource\n  };\n};\n\n\n//# sourceMappingURL=chunk-CKLHJDG3.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstQ0tMSEpERzMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRTZCOztBQUU3QjtBQUN5RDtBQUN6RDtBQUNBLFVBQVUsZUFBZSxFQUFFLHVFQUFtQjtBQUM5QztBQUNBLDhCQUE4QiwrQ0FBUTtBQUN0QywwQkFBMEIsZ0JBQWdCO0FBQzFDO0FBQ0Esb0NBQW9DLCtDQUFRO0FBQzVDO0FBQ0E7QUFDQSx3Q0FBd0MsK0NBQVE7QUFDaEQsOEJBQThCLGtEQUFXO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsK0JBQStCLGtEQUFXO0FBQzFDO0FBQ0E7QUFDQSx3Q0FBd0MsZ0JBQWdCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSw2QkFBNkIsa0RBQVc7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDZCQUE2QixrREFBVztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxzQkFBc0Isa0RBQVc7QUFDakM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsdUJBQXVCLGtEQUFXO0FBQ2xDO0FBQ0EsR0FBRztBQUNILHFCQUFxQixrREFBVztBQUNoQztBQUNBLEdBQUc7QUFDSCxzQkFBc0Isa0RBQVc7QUFDakM7QUFDQSxHQUFHO0FBQ0gsNkJBQTZCLGtEQUFXO0FBQ3hDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDRCQUE0QixrREFBVztBQUN2QztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9rZW1vbi1nYW1lLWV0aGluZGlhLTEvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstQ0tMSEpERzMuanM/ODdmMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICB1c2VIdWRkbGUwMV9kZWZhdWx0XG59IGZyb20gXCIuL2NodW5rLUFPSlZLVUlTLmpzXCI7XG5cbi8vIHNyYy9ob29rcy91c2VMb2NhbEF1ZGlvLnRzXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xudmFyIHVzZUxvY2FsQXVkaW8gPSAocHJvcHMpID0+IHtcbiAgY29uc3QgeyBodWRkbGVDbGllbnQgfSA9IHVzZUh1ZGRsZTAxX2RlZmF1bHQoKTtcbiAgY29uc3QgbG9jYWxQZWVyID0gaHVkZGxlQ2xpZW50LmxvY2FsUGVlcjtcbiAgY29uc3QgW3N0cmVhbSwgc2V0U3RyZWFtXSA9IHVzZVN0YXRlKFxuICAgIGxvY2FsUGVlci5nZXRTdHJlYW0oeyBsYWJlbDogXCJhdWRpb1wiIH0pXG4gICk7XG4gIGNvbnN0IFtpc0F1ZGlvT24sIHNldElzQXVkaW9Pbl0gPSB1c2VTdGF0ZShcbiAgICBzdHJlYW0/LmdldEF1ZGlvVHJhY2tzKCk/LlswXT8uZW5hYmxlZCA/PyBmYWxzZVxuICApO1xuICBjb25zdCBbaXNQcm9kdWNpbmcsIHNldElkUHJvZHVjaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgaGFuZGxlU3RyZWFtRmV0Y2hlZCA9IHVzZUNhbGxiYWNrKFxuICAgIChkYXRhKSA9PiB7XG4gICAgICBpZiAoZGF0YS5tZWRpYUtpbmQgPT09IFwibWljXCIpIHtcbiAgICAgICAgc2V0U3RyZWFtKGRhdGEuc3RyZWFtKTtcbiAgICAgICAgY29uc3QgaXNFbmFibGVkID0gZGF0YS5zdHJlYW0uZ2V0QXVkaW9UcmFja3MoKT8uWzBdPy5lbmFibGVkID8/IGZhbHNlO1xuICAgICAgICBzZXRJc0F1ZGlvT24oaXNFbmFibGVkKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtdXG4gICk7XG4gIGNvbnN0IGhhbmRsZVN0cmVhbVBsYXlhYmxlID0gdXNlQ2FsbGJhY2soXG4gICAgKGRhdGEpID0+IHtcbiAgICAgIGlmIChkYXRhLmxhYmVsID09PSBcImF1ZGlvXCIpIHtcbiAgICAgICAgc2V0U3RyZWFtKGxvY2FsUGVlci5nZXRTdHJlYW0oeyBsYWJlbDogXCJhdWRpb1wiIH0pKTtcbiAgICAgICAgc2V0SXNBdWRpb09uKHRydWUpO1xuICAgICAgICBzZXRJZFByb2R1Y2luZyh0cnVlKTtcbiAgICAgICAgaWYgKHByb3BzPy5vblByb2R1Y2VTdGFydCkgcHJvcHM/Lm9uUHJvZHVjZVN0YXJ0KGRhdGEucHJvZHVjZXIpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW3Byb3BzPy5vblByb2R1Y2VTdGFydF1cbiAgKTtcbiAgY29uc3QgaGFuZGxlU3RyZWFtQ2xvc2VkID0gdXNlQ2FsbGJhY2soXG4gICAgKGRhdGEpID0+IHtcbiAgICAgIGlmIChkYXRhLmxhYmVsID09PSBcImF1ZGlvXCIpIHtcbiAgICAgICAgc2V0U3RyZWFtKG51bGwpO1xuICAgICAgICBzZXRJc0F1ZGlvT24oZmFsc2UpO1xuICAgICAgICBzZXRJZFByb2R1Y2luZyhmYWxzZSk7XG4gICAgICAgIGlmIChwcm9wcz8ub25Qcm9kdWNlQ2xvc2UpIHByb3BzPy5vblByb2R1Y2VDbG9zZShkYXRhLmxhYmVsKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtwcm9wcz8ub25Qcm9kdWNlQ2xvc2VdXG4gICk7XG4gIGNvbnN0IGhhbmRsZVN0cmVhbVBhdXNlZCA9IHVzZUNhbGxiYWNrKFxuICAgIChkYXRhKSA9PiB7XG4gICAgICBpZiAoZGF0YS5sYWJlbCA9PT0gXCJhdWRpb1wiKSB7XG4gICAgICAgIHNldElzQXVkaW9PbihmYWxzZSk7XG4gICAgICAgIGlmIChwcm9wcz8ub25Qcm9kdWNlUGF1c2VkKSBwcm9wcz8ub25Qcm9kdWNlUGF1c2VkKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbXVxuICApO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxvY2FsUGVlci5vbihcInN0cmVhbS1mZXRjaGVkXCIsIGhhbmRsZVN0cmVhbUZldGNoZWQpO1xuICAgIGxvY2FsUGVlci5vbihcInN0cmVhbS1wbGF5YWJsZVwiLCBoYW5kbGVTdHJlYW1QbGF5YWJsZSk7XG4gICAgbG9jYWxQZWVyLm9uKFwic3RyZWFtLWNsb3NlZFwiLCBoYW5kbGVTdHJlYW1DbG9zZWQpO1xuICAgIGxvY2FsUGVlci5vbihcInN0cmVhbS1wYXVzZWRcIiwgaGFuZGxlU3RyZWFtUGF1c2VkKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbG9jYWxQZWVyLm9mZihcInN0cmVhbS1mZXRjaGVkXCIsIGhhbmRsZVN0cmVhbUZldGNoZWQpO1xuICAgICAgbG9jYWxQZWVyLm9mZihcInN0cmVhbS1wbGF5YWJsZVwiLCBoYW5kbGVTdHJlYW1QbGF5YWJsZSk7XG4gICAgICBsb2NhbFBlZXIub2ZmKFwic3RyZWFtLWNsb3NlZFwiLCBoYW5kbGVTdHJlYW1DbG9zZWQpO1xuICAgICAgbG9jYWxQZWVyLm9mZihcInN0cmVhbS1wYXVzZWRcIiwgaGFuZGxlU3RyZWFtUGF1c2VkKTtcbiAgICB9O1xuICB9LCBbXSk7XG4gIGNvbnN0IHRyYWNrID0gc3RyZWFtPy5nZXRBdWRpb1RyYWNrcygpWzBdIHx8IG51bGw7XG4gIGNvbnN0IGVuYWJsZUF1ZGlvID0gdXNlQ2FsbGJhY2soXG4gICAgKGRhdGEpID0+IHtcbiAgICAgIHJldHVybiBsb2NhbFBlZXIuZW5hYmxlQXVkaW8oZGF0YSk7XG4gICAgfSxcbiAgICBbbG9jYWxQZWVyXVxuICApO1xuICBjb25zdCBkaXNhYmxlQXVkaW8gPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgcmV0dXJuIGxvY2FsUGVlci5kaXNhYmxlQXVkaW8oKTtcbiAgfSwgW2xvY2FsUGVlcl0pO1xuICBjb25zdCBwYXVzZUF1ZGlvID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHJldHVybiBsb2NhbFBlZXIucGF1c2VBdWRpbygpO1xuICB9LCBbbG9jYWxQZWVyXSk7XG4gIGNvbnN0IHJlc3VtZUF1ZGlvID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHJldHVybiBsb2NhbFBlZXIucmVzdW1lQXVkaW8oKTtcbiAgfSwgW2xvY2FsUGVlcl0pO1xuICBjb25zdCByZXBsYWNlQXVkaW9TdHJlYW0gPSB1c2VDYWxsYmFjayhcbiAgICAoc3RyZWFtMikgPT4ge1xuICAgICAgcmV0dXJuIGxvY2FsUGVlci5yZXBsYWNlQXVkaW9TdHJlYW0oc3RyZWFtMik7XG4gICAgfSxcbiAgICBbbG9jYWxQZWVyXVxuICApO1xuICBjb25zdCBjaGFuZ2VBdWRpb1NvdXJjZSA9IHVzZUNhbGxiYWNrKFxuICAgIChkZXZpY2VJZCkgPT4ge1xuICAgICAgcmV0dXJuIGxvY2FsUGVlci5jaGFuZ2VBdWRpb1NvdXJjZShkZXZpY2VJZCk7XG4gICAgfSxcbiAgICBbbG9jYWxQZWVyXVxuICApO1xuICByZXR1cm4ge1xuICAgIHN0cmVhbSxcbiAgICB0cmFjayxcbiAgICBpc0F1ZGlvT24sXG4gICAgaXNQcm9kdWNpbmcsXG4gICAgZW5hYmxlQXVkaW8sXG4gICAgZGlzYWJsZUF1ZGlvLFxuICAgIHBhdXNlQXVkaW8sXG4gICAgcmVzdW1lQXVkaW8sXG4gICAgcmVwbGFjZUF1ZGlvU3RyZWFtLFxuICAgIGNoYW5nZUF1ZGlvU291cmNlXG4gIH07XG59O1xuXG5leHBvcnQge1xuICB1c2VMb2NhbEF1ZGlvXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2h1bmstQ0tMSEpERzMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/react/dist/chunk-CKLHJDG3.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/react/dist/chunk-CW3UCU6Y.js":
/*!*************************************************************!*\
  !*** ./node_modules/@huddle01/react/dist/chunk-CW3UCU6Y.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useRemoteMedia: () => (/* binding */ useRemoteMedia)\n/* harmony export */ });\n/* harmony import */ var _chunk_PFZ5VHJP_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-PFZ5VHJP.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-PFZ5VHJP.js\");\n/* harmony import */ var _chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-AOJVKUIS.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-AOJVKUIS.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\n\n// src/hooks/useRemoteMedia.ts\n\nvar useRemoteMedia = (props) => {\n  const { label, peerId } = props;\n  const { room } = (0,_chunk_PFZ5VHJP_js__WEBPACK_IMPORTED_MODULE_0__.useRoom)();\n  const { huddleClient } = (0,_chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_1__.useHuddle01_default)();\n  const localPeer = huddleClient.localPeer;\n  const [remotePeer, setRemotePeer] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\n    room.remotePeers.get(peerId) || null\n  );\n  const labelData = remotePeer?.getLabelData(label);\n  const [consumer, setConsumer] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(remotePeer?.getConsumer(label));\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(() => {\n    if (consumer?.state) return consumer.state;\n    if (labelData) return \"available\";\n    return \"unavailable\";\n  });\n  const startConsuming = () => {\n    const startedConsuming = localPeer.consume({ label, peerId, appData: {} });\n    return startedConsuming;\n  };\n  const stopConsuming = () => {\n    const stoppedConsuming = localPeer.stopConsuming({\n      label,\n      peerId\n    });\n    return stoppedConsuming;\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    const handleNewPeerJoined = (data) => {\n      if (data.peer.peerId === peerId) {\n        setRemotePeer(data.peer);\n      }\n    };\n    const handleStreamAvailable = (data) => {\n      if (data.label === label) {\n        setState(\"available\");\n      }\n    };\n    const handleStreamPlayable = (data) => {\n      if (data.label === label) {\n        setState(\"playable\");\n        setConsumer(data.consumer);\n        if (props.onPlayable) {\n          const track2 = data.consumer.track;\n          if (track2) {\n            props.onPlayable({\n              track: track2,\n              label,\n              stream: new MediaStream([track2])\n            });\n          }\n        }\n      }\n    };\n    const handleStreamClosed = (data) => {\n      if (data.label === props.label) {\n        setState(\"unavailable\");\n        setConsumer(null);\n        if (props?.onClose) {\n          props?.onClose();\n        }\n      }\n    };\n    const handleStreamPaused = (data) => {\n      if (data.label === props.label) {\n        setState(\"paused\");\n        if (props?.onPaused) {\n          props?.onPaused();\n        }\n      }\n    };\n    room.on(\"new-peer-joined\", handleNewPeerJoined);\n    remotePeer?.on(\"stream-available\", handleStreamAvailable);\n    remotePeer?.on(\"stream-playable\", handleStreamPlayable);\n    remotePeer?.on(\"stream-closed\", handleStreamClosed);\n    remotePeer?.on(\"stream-paused\", handleStreamPaused);\n    return () => {\n      room.off(\"new-peer-joined\", handleNewPeerJoined);\n      remotePeer?.off(\"stream-available\", handleStreamAvailable);\n      remotePeer?.off(\"stream-playable\", handleStreamPlayable);\n      remotePeer?.off(\"stream-closed\", handleStreamClosed);\n      remotePeer?.off(\"stream-paused\", handleStreamPaused);\n    };\n  }, [remotePeer, consumer]);\n  const track = consumer?.track || null;\n  const stream = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(() => {\n    if (track === null) return null;\n    const mediaStream = new MediaStream([track]);\n    return mediaStream;\n  }, [track]);\n  return { state, track, stream, stopConsuming, startConsuming };\n};\n\n\n//# sourceMappingURL=chunk-CW3UCU6Y.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstQ1czVUNVNlkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUU2QjtBQUdBOztBQUU3QjtBQUNxRDtBQUNyRDtBQUNBLFVBQVUsZ0JBQWdCO0FBQzFCLFVBQVUsT0FBTyxFQUFFLDJEQUFPO0FBQzFCLFVBQVUsZUFBZSxFQUFFLHVFQUFtQjtBQUM5QztBQUNBLHNDQUFzQywrQ0FBUTtBQUM5QztBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsK0NBQVE7QUFDMUMsNEJBQTRCLCtDQUFRO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLGlEQUFpRCw0QkFBNEI7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLGlCQUFpQiw4Q0FBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsV0FBVztBQUNYOztBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2tlbW9uLWdhbWUtZXRoaW5kaWEtMS8uL25vZGVfbW9kdWxlcy9AaHVkZGxlMDEvcmVhY3QvZGlzdC9jaHVuay1DVzNVQ1U2WS5qcz8xZWZjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHVzZVJvb21cbn0gZnJvbSBcIi4vY2h1bmstUEZaNVZISlAuanNcIjtcbmltcG9ydCB7XG4gIHVzZUh1ZGRsZTAxX2RlZmF1bHRcbn0gZnJvbSBcIi4vY2h1bmstQU9KVktVSVMuanNcIjtcblxuLy8gc3JjL2hvb2tzL3VzZVJlbW90ZU1lZGlhLnRzXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG52YXIgdXNlUmVtb3RlTWVkaWEgPSAocHJvcHMpID0+IHtcbiAgY29uc3QgeyBsYWJlbCwgcGVlcklkIH0gPSBwcm9wcztcbiAgY29uc3QgeyByb29tIH0gPSB1c2VSb29tKCk7XG4gIGNvbnN0IHsgaHVkZGxlQ2xpZW50IH0gPSB1c2VIdWRkbGUwMV9kZWZhdWx0KCk7XG4gIGNvbnN0IGxvY2FsUGVlciA9IGh1ZGRsZUNsaWVudC5sb2NhbFBlZXI7XG4gIGNvbnN0IFtyZW1vdGVQZWVyLCBzZXRSZW1vdGVQZWVyXSA9IHVzZVN0YXRlKFxuICAgIHJvb20ucmVtb3RlUGVlcnMuZ2V0KHBlZXJJZCkgfHwgbnVsbFxuICApO1xuICBjb25zdCBsYWJlbERhdGEgPSByZW1vdGVQZWVyPy5nZXRMYWJlbERhdGEobGFiZWwpO1xuICBjb25zdCBbY29uc3VtZXIsIHNldENvbnN1bWVyXSA9IHVzZVN0YXRlKHJlbW90ZVBlZXI/LmdldENvbnN1bWVyKGxhYmVsKSk7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGUoKCkgPT4ge1xuICAgIGlmIChjb25zdW1lcj8uc3RhdGUpIHJldHVybiBjb25zdW1lci5zdGF0ZTtcbiAgICBpZiAobGFiZWxEYXRhKSByZXR1cm4gXCJhdmFpbGFibGVcIjtcbiAgICByZXR1cm4gXCJ1bmF2YWlsYWJsZVwiO1xuICB9KTtcbiAgY29uc3Qgc3RhcnRDb25zdW1pbmcgPSAoKSA9PiB7XG4gICAgY29uc3Qgc3RhcnRlZENvbnN1bWluZyA9IGxvY2FsUGVlci5jb25zdW1lKHsgbGFiZWwsIHBlZXJJZCwgYXBwRGF0YToge30gfSk7XG4gICAgcmV0dXJuIHN0YXJ0ZWRDb25zdW1pbmc7XG4gIH07XG4gIGNvbnN0IHN0b3BDb25zdW1pbmcgPSAoKSA9PiB7XG4gICAgY29uc3Qgc3RvcHBlZENvbnN1bWluZyA9IGxvY2FsUGVlci5zdG9wQ29uc3VtaW5nKHtcbiAgICAgIGxhYmVsLFxuICAgICAgcGVlcklkXG4gICAgfSk7XG4gICAgcmV0dXJuIHN0b3BwZWRDb25zdW1pbmc7XG4gIH07XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlTmV3UGVlckpvaW5lZCA9IChkYXRhKSA9PiB7XG4gICAgICBpZiAoZGF0YS5wZWVyLnBlZXJJZCA9PT0gcGVlcklkKSB7XG4gICAgICAgIHNldFJlbW90ZVBlZXIoZGF0YS5wZWVyKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGhhbmRsZVN0cmVhbUF2YWlsYWJsZSA9IChkYXRhKSA9PiB7XG4gICAgICBpZiAoZGF0YS5sYWJlbCA9PT0gbGFiZWwpIHtcbiAgICAgICAgc2V0U3RhdGUoXCJhdmFpbGFibGVcIik7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVTdHJlYW1QbGF5YWJsZSA9IChkYXRhKSA9PiB7XG4gICAgICBpZiAoZGF0YS5sYWJlbCA9PT0gbGFiZWwpIHtcbiAgICAgICAgc2V0U3RhdGUoXCJwbGF5YWJsZVwiKTtcbiAgICAgICAgc2V0Q29uc3VtZXIoZGF0YS5jb25zdW1lcik7XG4gICAgICAgIGlmIChwcm9wcy5vblBsYXlhYmxlKSB7XG4gICAgICAgICAgY29uc3QgdHJhY2syID0gZGF0YS5jb25zdW1lci50cmFjaztcbiAgICAgICAgICBpZiAodHJhY2syKSB7XG4gICAgICAgICAgICBwcm9wcy5vblBsYXlhYmxlKHtcbiAgICAgICAgICAgICAgdHJhY2s6IHRyYWNrMixcbiAgICAgICAgICAgICAgbGFiZWwsXG4gICAgICAgICAgICAgIHN0cmVhbTogbmV3IE1lZGlhU3RyZWFtKFt0cmFjazJdKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVTdHJlYW1DbG9zZWQgPSAoZGF0YSkgPT4ge1xuICAgICAgaWYgKGRhdGEubGFiZWwgPT09IHByb3BzLmxhYmVsKSB7XG4gICAgICAgIHNldFN0YXRlKFwidW5hdmFpbGFibGVcIik7XG4gICAgICAgIHNldENvbnN1bWVyKG51bGwpO1xuICAgICAgICBpZiAocHJvcHM/Lm9uQ2xvc2UpIHtcbiAgICAgICAgICBwcm9wcz8ub25DbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVTdHJlYW1QYXVzZWQgPSAoZGF0YSkgPT4ge1xuICAgICAgaWYgKGRhdGEubGFiZWwgPT09IHByb3BzLmxhYmVsKSB7XG4gICAgICAgIHNldFN0YXRlKFwicGF1c2VkXCIpO1xuICAgICAgICBpZiAocHJvcHM/Lm9uUGF1c2VkKSB7XG4gICAgICAgICAgcHJvcHM/Lm9uUGF1c2VkKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIHJvb20ub24oXCJuZXctcGVlci1qb2luZWRcIiwgaGFuZGxlTmV3UGVlckpvaW5lZCk7XG4gICAgcmVtb3RlUGVlcj8ub24oXCJzdHJlYW0tYXZhaWxhYmxlXCIsIGhhbmRsZVN0cmVhbUF2YWlsYWJsZSk7XG4gICAgcmVtb3RlUGVlcj8ub24oXCJzdHJlYW0tcGxheWFibGVcIiwgaGFuZGxlU3RyZWFtUGxheWFibGUpO1xuICAgIHJlbW90ZVBlZXI/Lm9uKFwic3RyZWFtLWNsb3NlZFwiLCBoYW5kbGVTdHJlYW1DbG9zZWQpO1xuICAgIHJlbW90ZVBlZXI/Lm9uKFwic3RyZWFtLXBhdXNlZFwiLCBoYW5kbGVTdHJlYW1QYXVzZWQpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByb29tLm9mZihcIm5ldy1wZWVyLWpvaW5lZFwiLCBoYW5kbGVOZXdQZWVySm9pbmVkKTtcbiAgICAgIHJlbW90ZVBlZXI/Lm9mZihcInN0cmVhbS1hdmFpbGFibGVcIiwgaGFuZGxlU3RyZWFtQXZhaWxhYmxlKTtcbiAgICAgIHJlbW90ZVBlZXI/Lm9mZihcInN0cmVhbS1wbGF5YWJsZVwiLCBoYW5kbGVTdHJlYW1QbGF5YWJsZSk7XG4gICAgICByZW1vdGVQZWVyPy5vZmYoXCJzdHJlYW0tY2xvc2VkXCIsIGhhbmRsZVN0cmVhbUNsb3NlZCk7XG4gICAgICByZW1vdGVQZWVyPy5vZmYoXCJzdHJlYW0tcGF1c2VkXCIsIGhhbmRsZVN0cmVhbVBhdXNlZCk7XG4gICAgfTtcbiAgfSwgW3JlbW90ZVBlZXIsIGNvbnN1bWVyXSk7XG4gIGNvbnN0IHRyYWNrID0gY29uc3VtZXI/LnRyYWNrIHx8IG51bGw7XG4gIGNvbnN0IHN0cmVhbSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICh0cmFjayA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgbWVkaWFTdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0oW3RyYWNrXSk7XG4gICAgcmV0dXJuIG1lZGlhU3RyZWFtO1xuICB9LCBbdHJhY2tdKTtcbiAgcmV0dXJuIHsgc3RhdGUsIHRyYWNrLCBzdHJlYW0sIHN0b3BDb25zdW1pbmcsIHN0YXJ0Q29uc3VtaW5nIH07XG59O1xuXG5leHBvcnQge1xuICB1c2VSZW1vdGVNZWRpYVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLUNXM1VDVTZZLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/react/dist/chunk-CW3UCU6Y.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/react/dist/chunk-DJIIIDCT.js":
/*!*************************************************************!*\
  !*** ./node_modules/@huddle01/react/dist/chunk-DJIIIDCT.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useDataMessage: () => (/* binding */ useDataMessage)\n/* harmony export */ });\n/* harmony import */ var _chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-AOJVKUIS.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-AOJVKUIS.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\n// src/hooks/useDataMessage.ts\n\nvar useDataMessage = (props) => {\n  const { huddleClient } = (0,_chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__.useHuddle01_default)();\n  const localPeer = huddleClient.localPeer;\n  const sendData = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      return localPeer.sendData(data);\n    },\n    []\n  );\n  const sendVolatileData = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      console.info(\"Sending Volatile Data\", data);\n      return huddleClient.localPeer.sendVolatileData(data);\n    },\n    []\n  );\n  const handleNewMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      if (props?.onMessage)\n        props.onMessage(data.payload, data.from, data.label);\n    },\n    [props?.onMessage]\n  );\n  const handleNewVolatileMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      if (props?.onVolatileMesssage) props.onVolatileMesssage(data);\n    },\n    [props?.onVolatileMesssage]\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    localPeer.on(\"receive-data\", handleNewMessage);\n    huddleClient.room.on(\"received-volatile-data\", handleNewVolatileMessage);\n    return () => {\n      localPeer.off(\"receive-data\", handleNewMessage);\n      huddleClient.room.off(\"received-volatile-data\", handleNewVolatileMessage);\n    };\n  }, [props?.onMessage, props?.onVolatileMesssage]);\n  return {\n    sendData,\n    sendVolatileData\n  };\n};\n\n\n//# sourceMappingURL=chunk-DJIIIDCT.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstREpJSUlEQ1QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRTZCOztBQUU3QjtBQUMrQztBQUMvQztBQUNBLFVBQVUsZUFBZSxFQUFFLHVFQUFtQjtBQUM5QztBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSwyQkFBMkIsa0RBQVc7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSwyQkFBMkIsa0RBQVc7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxtQ0FBbUMsa0RBQVc7QUFDOUM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsRUFBRSxnREFBUztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2tlbW9uLWdhbWUtZXRoaW5kaWEtMS8uL25vZGVfbW9kdWxlcy9AaHVkZGxlMDEvcmVhY3QvZGlzdC9jaHVuay1ESklJSURDVC5qcz83NGM4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHVzZUh1ZGRsZTAxX2RlZmF1bHRcbn0gZnJvbSBcIi4vY2h1bmstQU9KVktVSVMuanNcIjtcblxuLy8gc3JjL2hvb2tzL3VzZURhdGFNZXNzYWdlLnRzXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG52YXIgdXNlRGF0YU1lc3NhZ2UgPSAocHJvcHMpID0+IHtcbiAgY29uc3QgeyBodWRkbGVDbGllbnQgfSA9IHVzZUh1ZGRsZTAxX2RlZmF1bHQoKTtcbiAgY29uc3QgbG9jYWxQZWVyID0gaHVkZGxlQ2xpZW50LmxvY2FsUGVlcjtcbiAgY29uc3Qgc2VuZERhdGEgPSB1c2VDYWxsYmFjayhcbiAgICAoZGF0YSkgPT4ge1xuICAgICAgcmV0dXJuIGxvY2FsUGVlci5zZW5kRGF0YShkYXRhKTtcbiAgICB9LFxuICAgIFtdXG4gICk7XG4gIGNvbnN0IHNlbmRWb2xhdGlsZURhdGEgPSB1c2VDYWxsYmFjayhcbiAgICAoZGF0YSkgPT4ge1xuICAgICAgY29uc29sZS5pbmZvKFwiU2VuZGluZyBWb2xhdGlsZSBEYXRhXCIsIGRhdGEpO1xuICAgICAgcmV0dXJuIGh1ZGRsZUNsaWVudC5sb2NhbFBlZXIuc2VuZFZvbGF0aWxlRGF0YShkYXRhKTtcbiAgICB9LFxuICAgIFtdXG4gICk7XG4gIGNvbnN0IGhhbmRsZU5ld01lc3NhZ2UgPSB1c2VDYWxsYmFjayhcbiAgICAoZGF0YSkgPT4ge1xuICAgICAgaWYgKHByb3BzPy5vbk1lc3NhZ2UpXG4gICAgICAgIHByb3BzLm9uTWVzc2FnZShkYXRhLnBheWxvYWQsIGRhdGEuZnJvbSwgZGF0YS5sYWJlbCk7XG4gICAgfSxcbiAgICBbcHJvcHM/Lm9uTWVzc2FnZV1cbiAgKTtcbiAgY29uc3QgaGFuZGxlTmV3Vm9sYXRpbGVNZXNzYWdlID0gdXNlQ2FsbGJhY2soXG4gICAgKGRhdGEpID0+IHtcbiAgICAgIGlmIChwcm9wcz8ub25Wb2xhdGlsZU1lc3NzYWdlKSBwcm9wcy5vblZvbGF0aWxlTWVzc3NhZ2UoZGF0YSk7XG4gICAgfSxcbiAgICBbcHJvcHM/Lm9uVm9sYXRpbGVNZXNzc2FnZV1cbiAgKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsb2NhbFBlZXIub24oXCJyZWNlaXZlLWRhdGFcIiwgaGFuZGxlTmV3TWVzc2FnZSk7XG4gICAgaHVkZGxlQ2xpZW50LnJvb20ub24oXCJyZWNlaXZlZC12b2xhdGlsZS1kYXRhXCIsIGhhbmRsZU5ld1ZvbGF0aWxlTWVzc2FnZSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGxvY2FsUGVlci5vZmYoXCJyZWNlaXZlLWRhdGFcIiwgaGFuZGxlTmV3TWVzc2FnZSk7XG4gICAgICBodWRkbGVDbGllbnQucm9vbS5vZmYoXCJyZWNlaXZlZC12b2xhdGlsZS1kYXRhXCIsIGhhbmRsZU5ld1ZvbGF0aWxlTWVzc2FnZSk7XG4gICAgfTtcbiAgfSwgW3Byb3BzPy5vbk1lc3NhZ2UsIHByb3BzPy5vblZvbGF0aWxlTWVzc3NhZ2VdKTtcbiAgcmV0dXJuIHtcbiAgICBzZW5kRGF0YSxcbiAgICBzZW5kVm9sYXRpbGVEYXRhXG4gIH07XG59O1xuXG5leHBvcnQge1xuICB1c2VEYXRhTWVzc2FnZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLURKSUlJRENULmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/react/dist/chunk-DJIIIDCT.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/react/dist/chunk-FF7A243A.js":
/*!*************************************************************!*\
  !*** ./node_modules/@huddle01/react/dist/chunk-FF7A243A.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useRemoteAudio: () => (/* binding */ useRemoteAudio)\n/* harmony export */ });\n/* harmony import */ var _chunk_CW3UCU6Y_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-CW3UCU6Y.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-CW3UCU6Y.js\");\n\n\n// src/hooks/useRemoteAudio.ts\nvar useRemoteAudio = (props) => {\n  const { state, track, stream } = (0,_chunk_CW3UCU6Y_js__WEBPACK_IMPORTED_MODULE_0__.useRemoteMedia)({\n    label: \"audio\",\n    peerId: props.peerId,\n    onClose: props.onClose,\n    onPlayable: (data) => {\n      props.onPlayable?.({\n        label: \"audio\",\n        track: data.track,\n        stream: data.stream\n      });\n    },\n    onPaused: props?.onPaused\n  });\n  const isAudioOn = state === \"playable\";\n  return {\n    state,\n    isAudioOn,\n    track,\n    stream\n  };\n};\n\n\n//# sourceMappingURL=chunk-FF7A243A.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstRkY3QTI0M0EuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFFNkI7O0FBRTdCO0FBQ0E7QUFDQSxVQUFVLHVCQUF1QixFQUFFLGtFQUFjO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Bva2Vtb24tZ2FtZS1ldGhpbmRpYS0xLy4vbm9kZV9tb2R1bGVzL0BodWRkbGUwMS9yZWFjdC9kaXN0L2NodW5rLUZGN0EyNDNBLmpzPzk5ZmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgdXNlUmVtb3RlTWVkaWFcbn0gZnJvbSBcIi4vY2h1bmstQ1czVUNVNlkuanNcIjtcblxuLy8gc3JjL2hvb2tzL3VzZVJlbW90ZUF1ZGlvLnRzXG52YXIgdXNlUmVtb3RlQXVkaW8gPSAocHJvcHMpID0+IHtcbiAgY29uc3QgeyBzdGF0ZSwgdHJhY2ssIHN0cmVhbSB9ID0gdXNlUmVtb3RlTWVkaWEoe1xuICAgIGxhYmVsOiBcImF1ZGlvXCIsXG4gICAgcGVlcklkOiBwcm9wcy5wZWVySWQsXG4gICAgb25DbG9zZTogcHJvcHMub25DbG9zZSxcbiAgICBvblBsYXlhYmxlOiAoZGF0YSkgPT4ge1xuICAgICAgcHJvcHMub25QbGF5YWJsZT8uKHtcbiAgICAgICAgbGFiZWw6IFwiYXVkaW9cIixcbiAgICAgICAgdHJhY2s6IGRhdGEudHJhY2ssXG4gICAgICAgIHN0cmVhbTogZGF0YS5zdHJlYW1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgb25QYXVzZWQ6IHByb3BzPy5vblBhdXNlZFxuICB9KTtcbiAgY29uc3QgaXNBdWRpb09uID0gc3RhdGUgPT09IFwicGxheWFibGVcIjtcbiAgcmV0dXJuIHtcbiAgICBzdGF0ZSxcbiAgICBpc0F1ZGlvT24sXG4gICAgdHJhY2ssXG4gICAgc3RyZWFtXG4gIH07XG59O1xuXG5leHBvcnQge1xuICB1c2VSZW1vdGVBdWRpb1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLUZGN0EyNDNBLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/react/dist/chunk-FF7A243A.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/react/dist/chunk-KJEMWK6P.js":
/*!*************************************************************!*\
  !*** ./node_modules/@huddle01/react/dist/chunk-KJEMWK6P.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useRoomMetadata: () => (/* binding */ useRoomMetadata)\n/* harmony export */ });\n/* harmony import */ var _chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-AOJVKUIS.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-AOJVKUIS.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\n// src/hooks/useRoomMetadata.ts\n\nvar useRoomMetadata = (props) => {\n  const { huddleClient } = (0,_chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__.useHuddle01_default)();\n  const room = huddleClient.room;\n  const [roomData, setRoomData] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\n    room.getMetadata() ?? null\n  );\n  const handleUpdateMetadata = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    const metadata = room.getMetadata();\n    setRoomData(metadata);\n    if (props?.onMetadataUpdated) props.onMetadataUpdated(metadata);\n  }, [props?.onMetadataUpdated]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const handleRoomClose = (data) => {\n      setRoomData(null);\n      if (props?.onLeave) props.onLeave(data);\n    };\n    const handleRoomJoin = () => {\n      console.info(\"EVENT TRIGGERED, ROOM JOINED\");\n    };\n    room.once(\"room-joined\", handleRoomJoin);\n    room.once(\"room-closed\", handleRoomClose);\n    room.on(\"metadata-updated\", handleUpdateMetadata);\n    return () => {\n      room.off(\"room-joined\", handleRoomJoin);\n      room.off(\"room-closed\", handleRoomClose);\n      room.off(\"metadata-updated\", handleUpdateMetadata);\n    };\n  }, [handleUpdateMetadata]);\n  const updateMetadata = room.updateMetadata;\n  return {\n    roomData,\n    updateMetadata\n  };\n};\n\n\n//# sourceMappingURL=chunk-KJEMWK6P.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstS0pFTVdLNlAuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRTZCOztBQUU3QjtBQUN5RDtBQUN6RDtBQUNBLFVBQVUsZUFBZSxFQUFFLHVFQUFtQjtBQUM5QztBQUNBLGtDQUFrQywrQ0FBUTtBQUMxQztBQUNBO0FBQ0EsK0JBQStCLGtEQUFXO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9rZW1vbi1nYW1lLWV0aGluZGlhLTEvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstS0pFTVdLNlAuanM/NWFhNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICB1c2VIdWRkbGUwMV9kZWZhdWx0XG59IGZyb20gXCIuL2NodW5rLUFPSlZLVUlTLmpzXCI7XG5cbi8vIHNyYy9ob29rcy91c2VSb29tTWV0YWRhdGEudHNcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCI7XG52YXIgdXNlUm9vbU1ldGFkYXRhID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0IHsgaHVkZGxlQ2xpZW50IH0gPSB1c2VIdWRkbGUwMV9kZWZhdWx0KCk7XG4gIGNvbnN0IHJvb20gPSBodWRkbGVDbGllbnQucm9vbTtcbiAgY29uc3QgW3Jvb21EYXRhLCBzZXRSb29tRGF0YV0gPSB1c2VTdGF0ZShcbiAgICByb29tLmdldE1ldGFkYXRhKCkgPz8gbnVsbFxuICApO1xuICBjb25zdCBoYW5kbGVVcGRhdGVNZXRhZGF0YSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBtZXRhZGF0YSA9IHJvb20uZ2V0TWV0YWRhdGEoKTtcbiAgICBzZXRSb29tRGF0YShtZXRhZGF0YSk7XG4gICAgaWYgKHByb3BzPy5vbk1ldGFkYXRhVXBkYXRlZCkgcHJvcHMub25NZXRhZGF0YVVwZGF0ZWQobWV0YWRhdGEpO1xuICB9LCBbcHJvcHM/Lm9uTWV0YWRhdGFVcGRhdGVkXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlUm9vbUNsb3NlID0gKGRhdGEpID0+IHtcbiAgICAgIHNldFJvb21EYXRhKG51bGwpO1xuICAgICAgaWYgKHByb3BzPy5vbkxlYXZlKSBwcm9wcy5vbkxlYXZlKGRhdGEpO1xuICAgIH07XG4gICAgY29uc3QgaGFuZGxlUm9vbUpvaW4gPSAoKSA9PiB7XG4gICAgICBjb25zb2xlLmluZm8oXCJFVkVOVCBUUklHR0VSRUQsIFJPT00gSk9JTkVEXCIpO1xuICAgIH07XG4gICAgcm9vbS5vbmNlKFwicm9vbS1qb2luZWRcIiwgaGFuZGxlUm9vbUpvaW4pO1xuICAgIHJvb20ub25jZShcInJvb20tY2xvc2VkXCIsIGhhbmRsZVJvb21DbG9zZSk7XG4gICAgcm9vbS5vbihcIm1ldGFkYXRhLXVwZGF0ZWRcIiwgaGFuZGxlVXBkYXRlTWV0YWRhdGEpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByb29tLm9mZihcInJvb20tam9pbmVkXCIsIGhhbmRsZVJvb21Kb2luKTtcbiAgICAgIHJvb20ub2ZmKFwicm9vbS1jbG9zZWRcIiwgaGFuZGxlUm9vbUNsb3NlKTtcbiAgICAgIHJvb20ub2ZmKFwibWV0YWRhdGEtdXBkYXRlZFwiLCBoYW5kbGVVcGRhdGVNZXRhZGF0YSk7XG4gICAgfTtcbiAgfSwgW2hhbmRsZVVwZGF0ZU1ldGFkYXRhXSk7XG4gIGNvbnN0IHVwZGF0ZU1ldGFkYXRhID0gcm9vbS51cGRhdGVNZXRhZGF0YTtcbiAgcmV0dXJuIHtcbiAgICByb29tRGF0YSxcbiAgICB1cGRhdGVNZXRhZGF0YVxuICB9O1xufTtcblxuZXhwb3J0IHtcbiAgdXNlUm9vbU1ldGFkYXRhXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2h1bmstS0pFTVdLNlAuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/react/dist/chunk-KJEMWK6P.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/react/dist/chunk-N4XD3HMV.js":
/*!*************************************************************!*\
  !*** ./node_modules/@huddle01/react/dist/chunk-N4XD3HMV.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useRemotePeer: () => (/* binding */ useRemotePeer)\n/* harmony export */ });\n/* harmony import */ var _chunk_PFZ5VHJP_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-PFZ5VHJP.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-PFZ5VHJP.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\n// src/hooks/useRemotePeer.ts\n\nvar useRemotePeer = (props) => {\n  const { room } = (0,_chunk_PFZ5VHJP_js__WEBPACK_IMPORTED_MODULE_0__.useRoom)();\n  const [remotePeer, setRemotePeer] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\n    room.remotePeerExists(props.peerId) || null\n  );\n  const [metadata, setMetadata] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\n    remotePeer?.getMetadata() || null\n  );\n  const [role, setRole] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\n    remotePeer?.role || null\n  );\n  const handleRoleUpdate = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      if (data?.role && data.role.length > 0) {\n        setRole(data.role);\n      }\n    },\n    []\n  );\n  const handleNewPeerJoined = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((data) => {\n    if (data.peer.peerId === props.peerId) {\n      setRemotePeer(data.peer);\n    }\n  }, []);\n  const handlePeerLeft = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((data) => {\n    if (peerId === data.peerId) {\n      setRemotePeer(null);\n    }\n  }, []);\n  const handleUpdateMetadata = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    const metadata2 = remotePeer?.getMetadata();\n    if (props?.onMetadataUpdate && metadata2) {\n      props.onMetadataUpdate({ metadata: metadata2 });\n    }\n    if (metadata2) setMetadata(metadata2);\n    else setMetadata(null);\n  }, [props?.onMetadataUpdate]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    room.on(\"new-peer-joined\", handleNewPeerJoined);\n    room.on(\"peer-left\", handlePeerLeft);\n    if (remotePeer) {\n      remotePeer?.on(\"metadata-updated\", handleUpdateMetadata);\n      remotePeer?.on(\"role-updated\", handleRoleUpdate);\n    }\n    return () => {\n      room.off(\"new-peer-joined\", handleNewPeerJoined);\n      room.off(\"peer-left\", handlePeerLeft);\n      remotePeer?.off(\"metadata-updated\", handleUpdateMetadata);\n      remotePeer?.off(\"role-updated\", handleRoleUpdate);\n    };\n  }, [remotePeer, handleUpdateMetadata, handleRoleUpdate]);\n  const peerId = remotePeer?.peerId;\n  const updateRole = (role2, options) => {\n    if (remotePeer?.updateRole) {\n      remotePeer.updateRole({ role: role2, options });\n    } else {\n      console.warn(\"\\u274C RemotePeer does not Exist, cannot update role\");\n    }\n  };\n  return {\n    peerId,\n    role,\n    metadata,\n    updateRole\n  };\n};\n\n\n//# sourceMappingURL=chunk-N4XD3HMV.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstTjRYRDNITVYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRTZCOztBQUU3QjtBQUN5RDtBQUN6RDtBQUNBLFVBQVUsT0FBTyxFQUFFLDJEQUFPO0FBQzFCLHNDQUFzQywrQ0FBUTtBQUM5QztBQUNBO0FBQ0Esa0NBQWtDLCtDQUFRO0FBQzFDO0FBQ0E7QUFDQSwwQkFBMEIsK0NBQVE7QUFDbEM7QUFDQTtBQUNBLDJCQUEyQixrREFBVztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsOEJBQThCLGtEQUFXO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCx5QkFBeUIsa0RBQVc7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILCtCQUErQixrREFBVztBQUMxQztBQUNBO0FBQ0EsK0JBQStCLHFCQUFxQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSxnREFBUztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsc0JBQXNCO0FBQ3BELE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9rZW1vbi1nYW1lLWV0aGluZGlhLTEvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstTjRYRDNITVYuanM/OGQ5MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICB1c2VSb29tXG59IGZyb20gXCIuL2NodW5rLVBGWjVWSEpQLmpzXCI7XG5cbi8vIHNyYy9ob29rcy91c2VSZW1vdGVQZWVyLnRzXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xudmFyIHVzZVJlbW90ZVBlZXIgPSAocHJvcHMpID0+IHtcbiAgY29uc3QgeyByb29tIH0gPSB1c2VSb29tKCk7XG4gIGNvbnN0IFtyZW1vdGVQZWVyLCBzZXRSZW1vdGVQZWVyXSA9IHVzZVN0YXRlKFxuICAgIHJvb20ucmVtb3RlUGVlckV4aXN0cyhwcm9wcy5wZWVySWQpIHx8IG51bGxcbiAgKTtcbiAgY29uc3QgW21ldGFkYXRhLCBzZXRNZXRhZGF0YV0gPSB1c2VTdGF0ZShcbiAgICByZW1vdGVQZWVyPy5nZXRNZXRhZGF0YSgpIHx8IG51bGxcbiAgKTtcbiAgY29uc3QgW3JvbGUsIHNldFJvbGVdID0gdXNlU3RhdGUoXG4gICAgcmVtb3RlUGVlcj8ucm9sZSB8fCBudWxsXG4gICk7XG4gIGNvbnN0IGhhbmRsZVJvbGVVcGRhdGUgPSB1c2VDYWxsYmFjayhcbiAgICAoZGF0YSkgPT4ge1xuICAgICAgaWYgKGRhdGE/LnJvbGUgJiYgZGF0YS5yb2xlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc2V0Um9sZShkYXRhLnJvbGUpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW11cbiAgKTtcbiAgY29uc3QgaGFuZGxlTmV3UGVlckpvaW5lZCA9IHVzZUNhbGxiYWNrKChkYXRhKSA9PiB7XG4gICAgaWYgKGRhdGEucGVlci5wZWVySWQgPT09IHByb3BzLnBlZXJJZCkge1xuICAgICAgc2V0UmVtb3RlUGVlcihkYXRhLnBlZXIpO1xuICAgIH1cbiAgfSwgW10pO1xuICBjb25zdCBoYW5kbGVQZWVyTGVmdCA9IHVzZUNhbGxiYWNrKChkYXRhKSA9PiB7XG4gICAgaWYgKHBlZXJJZCA9PT0gZGF0YS5wZWVySWQpIHtcbiAgICAgIHNldFJlbW90ZVBlZXIobnVsbCk7XG4gICAgfVxuICB9LCBbXSk7XG4gIGNvbnN0IGhhbmRsZVVwZGF0ZU1ldGFkYXRhID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IG1ldGFkYXRhMiA9IHJlbW90ZVBlZXI/LmdldE1ldGFkYXRhKCk7XG4gICAgaWYgKHByb3BzPy5vbk1ldGFkYXRhVXBkYXRlICYmIG1ldGFkYXRhMikge1xuICAgICAgcHJvcHMub25NZXRhZGF0YVVwZGF0ZSh7IG1ldGFkYXRhOiBtZXRhZGF0YTIgfSk7XG4gICAgfVxuICAgIGlmIChtZXRhZGF0YTIpIHNldE1ldGFkYXRhKG1ldGFkYXRhMik7XG4gICAgZWxzZSBzZXRNZXRhZGF0YShudWxsKTtcbiAgfSwgW3Byb3BzPy5vbk1ldGFkYXRhVXBkYXRlXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcm9vbS5vbihcIm5ldy1wZWVyLWpvaW5lZFwiLCBoYW5kbGVOZXdQZWVySm9pbmVkKTtcbiAgICByb29tLm9uKFwicGVlci1sZWZ0XCIsIGhhbmRsZVBlZXJMZWZ0KTtcbiAgICBpZiAocmVtb3RlUGVlcikge1xuICAgICAgcmVtb3RlUGVlcj8ub24oXCJtZXRhZGF0YS11cGRhdGVkXCIsIGhhbmRsZVVwZGF0ZU1ldGFkYXRhKTtcbiAgICAgIHJlbW90ZVBlZXI/Lm9uKFwicm9sZS11cGRhdGVkXCIsIGhhbmRsZVJvbGVVcGRhdGUpO1xuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcm9vbS5vZmYoXCJuZXctcGVlci1qb2luZWRcIiwgaGFuZGxlTmV3UGVlckpvaW5lZCk7XG4gICAgICByb29tLm9mZihcInBlZXItbGVmdFwiLCBoYW5kbGVQZWVyTGVmdCk7XG4gICAgICByZW1vdGVQZWVyPy5vZmYoXCJtZXRhZGF0YS11cGRhdGVkXCIsIGhhbmRsZVVwZGF0ZU1ldGFkYXRhKTtcbiAgICAgIHJlbW90ZVBlZXI/Lm9mZihcInJvbGUtdXBkYXRlZFwiLCBoYW5kbGVSb2xlVXBkYXRlKTtcbiAgICB9O1xuICB9LCBbcmVtb3RlUGVlciwgaGFuZGxlVXBkYXRlTWV0YWRhdGEsIGhhbmRsZVJvbGVVcGRhdGVdKTtcbiAgY29uc3QgcGVlcklkID0gcmVtb3RlUGVlcj8ucGVlcklkO1xuICBjb25zdCB1cGRhdGVSb2xlID0gKHJvbGUyLCBvcHRpb25zKSA9PiB7XG4gICAgaWYgKHJlbW90ZVBlZXI/LnVwZGF0ZVJvbGUpIHtcbiAgICAgIHJlbW90ZVBlZXIudXBkYXRlUm9sZSh7IHJvbGU6IHJvbGUyLCBvcHRpb25zIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJcXHUyNzRDIFJlbW90ZVBlZXIgZG9lcyBub3QgRXhpc3QsIGNhbm5vdCB1cGRhdGUgcm9sZVwiKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiB7XG4gICAgcGVlcklkLFxuICAgIHJvbGUsXG4gICAgbWV0YWRhdGEsXG4gICAgdXBkYXRlUm9sZVxuICB9O1xufTtcblxuZXhwb3J0IHtcbiAgdXNlUmVtb3RlUGVlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLU40WEQzSE1WLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/react/dist/chunk-N4XD3HMV.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/react/dist/chunk-NDNPIV4Z.js":
/*!*************************************************************!*\
  !*** ./node_modules/@huddle01/react/dist/chunk-NDNPIV4Z.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useRoomControls: () => (/* binding */ useRoomControls)\n/* harmony export */ });\n/* harmony import */ var _chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-AOJVKUIS.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-AOJVKUIS.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\n// src/hooks/useRoomControls.ts\n\nvar useRoomControls = (props) => {\n  const { huddleClient } = (0,_chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__.useHuddle01_default)();\n  const room = huddleClient.room;\n  const [roomControls, setRoomControls] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(room.config);\n  const handleRoomClose = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      if (props?.onRoomLeave) props.onRoomLeave(data);\n    },\n    [props?.onRoomLeave]\n  );\n  const handleRoomControlsUpdate = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    if (props?.onRoomControlsUpdated) props.onRoomControlsUpdated(room.config);\n    setRoomControls(room.config);\n  }, [props?.onRoomControlsUpdated]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    room.once(\"room-closed\", handleRoomClose);\n    room.on(\"room-controls-updated\", handleRoomControlsUpdate);\n    return () => {\n      room.off(\"room-closed\", handleRoomClose);\n      room.off(\"room-controls-updated\", handleRoomControlsUpdate);\n    };\n  }, []);\n  const updateControls = room.updateRoomControls;\n  return {\n    roomControls,\n    updateControls\n  };\n};\n\n\n//# sourceMappingURL=chunk-NDNPIV4Z.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstTkROUElWNFouanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRTZCOztBQUU3QjtBQUN5RDtBQUN6RDtBQUNBLFVBQVUsZUFBZSxFQUFFLHVFQUFtQjtBQUM5QztBQUNBLDBDQUEwQywrQ0FBUTtBQUNsRCwwQkFBMEIsa0RBQVc7QUFDckM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsbUNBQW1DLGtEQUFXO0FBQzlDO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSxnREFBUztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Bva2Vtb24tZ2FtZS1ldGhpbmRpYS0xLy4vbm9kZV9tb2R1bGVzL0BodWRkbGUwMS9yZWFjdC9kaXN0L2NodW5rLU5ETlBJVjRaLmpzPzc0ZWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgdXNlSHVkZGxlMDFfZGVmYXVsdFxufSBmcm9tIFwiLi9jaHVuay1BT0pWS1VJUy5qc1wiO1xuXG4vLyBzcmMvaG9va3MvdXNlUm9vbUNvbnRyb2xzLnRzXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xudmFyIHVzZVJvb21Db250cm9scyA9IChwcm9wcykgPT4ge1xuICBjb25zdCB7IGh1ZGRsZUNsaWVudCB9ID0gdXNlSHVkZGxlMDFfZGVmYXVsdCgpO1xuICBjb25zdCByb29tID0gaHVkZGxlQ2xpZW50LnJvb207XG4gIGNvbnN0IFtyb29tQ29udHJvbHMsIHNldFJvb21Db250cm9sc10gPSB1c2VTdGF0ZShyb29tLmNvbmZpZyk7XG4gIGNvbnN0IGhhbmRsZVJvb21DbG9zZSA9IHVzZUNhbGxiYWNrKFxuICAgIChkYXRhKSA9PiB7XG4gICAgICBpZiAocHJvcHM/Lm9uUm9vbUxlYXZlKSBwcm9wcy5vblJvb21MZWF2ZShkYXRhKTtcbiAgICB9LFxuICAgIFtwcm9wcz8ub25Sb29tTGVhdmVdXG4gICk7XG4gIGNvbnN0IGhhbmRsZVJvb21Db250cm9sc1VwZGF0ZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAocHJvcHM/Lm9uUm9vbUNvbnRyb2xzVXBkYXRlZCkgcHJvcHMub25Sb29tQ29udHJvbHNVcGRhdGVkKHJvb20uY29uZmlnKTtcbiAgICBzZXRSb29tQ29udHJvbHMocm9vbS5jb25maWcpO1xuICB9LCBbcHJvcHM/Lm9uUm9vbUNvbnRyb2xzVXBkYXRlZF0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJvb20ub25jZShcInJvb20tY2xvc2VkXCIsIGhhbmRsZVJvb21DbG9zZSk7XG4gICAgcm9vbS5vbihcInJvb20tY29udHJvbHMtdXBkYXRlZFwiLCBoYW5kbGVSb29tQ29udHJvbHNVcGRhdGUpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByb29tLm9mZihcInJvb20tY2xvc2VkXCIsIGhhbmRsZVJvb21DbG9zZSk7XG4gICAgICByb29tLm9mZihcInJvb20tY29udHJvbHMtdXBkYXRlZFwiLCBoYW5kbGVSb29tQ29udHJvbHNVcGRhdGUpO1xuICAgIH07XG4gIH0sIFtdKTtcbiAgY29uc3QgdXBkYXRlQ29udHJvbHMgPSByb29tLnVwZGF0ZVJvb21Db250cm9scztcbiAgcmV0dXJuIHtcbiAgICByb29tQ29udHJvbHMsXG4gICAgdXBkYXRlQ29udHJvbHNcbiAgfTtcbn07XG5cbmV4cG9ydCB7XG4gIHVzZVJvb21Db250cm9sc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLU5ETlBJVjRaLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/react/dist/chunk-NDNPIV4Z.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/react/dist/chunk-OIBQWHQD.js":
/*!*************************************************************!*\
  !*** ./node_modules/@huddle01/react/dist/chunk-OIBQWHQD.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useLocalMedia: () => (/* binding */ useLocalMedia)\n/* harmony export */ });\n/* harmony import */ var _chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-AOJVKUIS.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-AOJVKUIS.js\");\n\n\n// src/hooks/useLocalMedia.ts\nvar useLocalMedia = () => {\n  const { huddleClient } = (0,_chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__.useHuddle01_default)();\n  const localPeer = huddleClient.localPeer;\n  const fetchStream = async (data) => {\n    const fetchedStream = await localPeer.deviceHandler.fetchStream({\n      mediaDeviceKind: data.mediaDeviceKind\n    });\n    return fetchedStream;\n  };\n  const fetchStreamByGroupId = async (data) => {\n    const fetchedStream = await localPeer.deviceHandler.fetchStreamByGroupId({\n      groupId: data.groupId,\n      mediaDeviceKind: data.mediaDeviceKind\n    });\n    return fetchedStream;\n  };\n  const produceStream = (data) => {\n    const producing = localPeer.produce({\n      label: data.label,\n      stream: data.stream,\n      appData: data.appData\n    });\n    return producing;\n  };\n  const stopProducing = (label) => {\n    const stoppedProducing = localPeer.stopProducing({ label });\n    return stoppedProducing;\n  };\n  const replaceStream = async (label, newStream) => {\n    return await localPeer.replaceStream({ label, newStream });\n  };\n  return {\n    fetchStream,\n    fetchStreamByGroupId,\n    replaceStream,\n    produceStream,\n    stopProducing\n  };\n};\n\n\n//# sourceMappingURL=chunk-OIBQWHQD.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstT0lCUVdIUUQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFFNkI7O0FBRTdCO0FBQ0E7QUFDQSxVQUFVLGVBQWUsRUFBRSx1RUFBbUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxPQUFPO0FBQzlEO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxrQkFBa0I7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2tlbW9uLWdhbWUtZXRoaW5kaWEtMS8uL25vZGVfbW9kdWxlcy9AaHVkZGxlMDEvcmVhY3QvZGlzdC9jaHVuay1PSUJRV0hRRC5qcz8yNmEwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHVzZUh1ZGRsZTAxX2RlZmF1bHRcbn0gZnJvbSBcIi4vY2h1bmstQU9KVktVSVMuanNcIjtcblxuLy8gc3JjL2hvb2tzL3VzZUxvY2FsTWVkaWEudHNcbnZhciB1c2VMb2NhbE1lZGlhID0gKCkgPT4ge1xuICBjb25zdCB7IGh1ZGRsZUNsaWVudCB9ID0gdXNlSHVkZGxlMDFfZGVmYXVsdCgpO1xuICBjb25zdCBsb2NhbFBlZXIgPSBodWRkbGVDbGllbnQubG9jYWxQZWVyO1xuICBjb25zdCBmZXRjaFN0cmVhbSA9IGFzeW5jIChkYXRhKSA9PiB7XG4gICAgY29uc3QgZmV0Y2hlZFN0cmVhbSA9IGF3YWl0IGxvY2FsUGVlci5kZXZpY2VIYW5kbGVyLmZldGNoU3RyZWFtKHtcbiAgICAgIG1lZGlhRGV2aWNlS2luZDogZGF0YS5tZWRpYURldmljZUtpbmRcbiAgICB9KTtcbiAgICByZXR1cm4gZmV0Y2hlZFN0cmVhbTtcbiAgfTtcbiAgY29uc3QgZmV0Y2hTdHJlYW1CeUdyb3VwSWQgPSBhc3luYyAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IGZldGNoZWRTdHJlYW0gPSBhd2FpdCBsb2NhbFBlZXIuZGV2aWNlSGFuZGxlci5mZXRjaFN0cmVhbUJ5R3JvdXBJZCh7XG4gICAgICBncm91cElkOiBkYXRhLmdyb3VwSWQsXG4gICAgICBtZWRpYURldmljZUtpbmQ6IGRhdGEubWVkaWFEZXZpY2VLaW5kXG4gICAgfSk7XG4gICAgcmV0dXJuIGZldGNoZWRTdHJlYW07XG4gIH07XG4gIGNvbnN0IHByb2R1Y2VTdHJlYW0gPSAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHByb2R1Y2luZyA9IGxvY2FsUGVlci5wcm9kdWNlKHtcbiAgICAgIGxhYmVsOiBkYXRhLmxhYmVsLFxuICAgICAgc3RyZWFtOiBkYXRhLnN0cmVhbSxcbiAgICAgIGFwcERhdGE6IGRhdGEuYXBwRGF0YVxuICAgIH0pO1xuICAgIHJldHVybiBwcm9kdWNpbmc7XG4gIH07XG4gIGNvbnN0IHN0b3BQcm9kdWNpbmcgPSAobGFiZWwpID0+IHtcbiAgICBjb25zdCBzdG9wcGVkUHJvZHVjaW5nID0gbG9jYWxQZWVyLnN0b3BQcm9kdWNpbmcoeyBsYWJlbCB9KTtcbiAgICByZXR1cm4gc3RvcHBlZFByb2R1Y2luZztcbiAgfTtcbiAgY29uc3QgcmVwbGFjZVN0cmVhbSA9IGFzeW5jIChsYWJlbCwgbmV3U3RyZWFtKSA9PiB7XG4gICAgcmV0dXJuIGF3YWl0IGxvY2FsUGVlci5yZXBsYWNlU3RyZWFtKHsgbGFiZWwsIG5ld1N0cmVhbSB9KTtcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBmZXRjaFN0cmVhbSxcbiAgICBmZXRjaFN0cmVhbUJ5R3JvdXBJZCxcbiAgICByZXBsYWNlU3RyZWFtLFxuICAgIHByb2R1Y2VTdHJlYW0sXG4gICAgc3RvcFByb2R1Y2luZ1xuICB9O1xufTtcblxuZXhwb3J0IHtcbiAgdXNlTG9jYWxNZWRpYVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLU9JQlFXSFFELmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/react/dist/chunk-OIBQWHQD.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/react/dist/chunk-P3AULUFQ.js":
/*!*************************************************************!*\
  !*** ./node_modules/@huddle01/react/dist/chunk-P3AULUFQ.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n//# sourceMappingURL=chunk-P3AULUFQ.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstUDNBVUxVRlEuanMiLCJtYXBwaW5ncyI6IjtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9rZW1vbi1nYW1lLWV0aGluZGlhLTEvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstUDNBVUxVRlEuanM/YTNiNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1QM0FVTFVGUS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/react/dist/chunk-P3AULUFQ.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/react/dist/chunk-PFZ5VHJP.js":
/*!*************************************************************!*\
  !*** ./node_modules/@huddle01/react/dist/chunk-PFZ5VHJP.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useRoom: () => (/* binding */ useRoom)\n/* harmony export */ });\n/* harmony import */ var _chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-AOJVKUIS.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-AOJVKUIS.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\n// src/hooks/useRoom.ts\n\nvar useRoom = (props) => {\n  const { huddleClient } = (0,_chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__.useHuddle01_default)();\n  const room = huddleClient.room;\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(room.state);\n  const handleRoomClose = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      if (props?.onLeave) props.onLeave(data);\n      if (data.reason === \"CLOSED\") setState(\"closed\");\n      else setState(\"left\");\n    },\n    [props?.onLeave]\n  );\n  const handleRoomJoin = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    if (props?.onJoin) props.onJoin({ room: huddleClient.room });\n    setState(\"connected\");\n  }, [props?.onJoin]);\n  const handleRoomJoinFailed = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      if (props?.onFailed) props.onFailed(data);\n      if (data.status === \"ROOM_ERRORED\" || data.status === \"ROOM_NOT_FOUND\") {\n        setState(\"failed\");\n      }\n    },\n    [props?.onFailed]\n  );\n  const handlePeerJoin = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    ({ peer }) => {\n      if (props?.onPeerJoin) {\n        props.onPeerJoin({ peer });\n      }\n    },\n    [props?.onPeerJoin]\n  );\n  const handlePeerLeft = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      if (props?.onPeerLeft) props.onPeerLeft(data);\n    },\n    [props?.onPeerLeft]\n  );\n  const handleRoomConnecting = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    setState(\"connecting\");\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    room.on(\"room-joined\", handleRoomJoin);\n    room.on(\"room-closed\", handleRoomClose);\n    room.on(\"room-joined-failed\", handleRoomJoinFailed);\n    room.on(\"room-connecting\", handleRoomConnecting);\n    props?.onPeerJoin && room.on(\"new-peer-joined\", handlePeerJoin);\n    props?.onPeerLeft && room.on(\"peer-left\", handlePeerLeft);\n    props?.onWaiting && room.on(\"room-waiting\", props.onWaiting);\n    return () => {\n      props?.onPeerJoin && room.off(\"new-peer-joined\", handlePeerJoin);\n      props?.onPeerLeft && room.off(\"peer-left\", handlePeerLeft);\n      props?.onWaiting && room.off(\"room-waiting\", props.onWaiting);\n      room.off(\"room-joined\", handleRoomJoin);\n      room.off(\"room-closed\", handleRoomClose);\n      room.off(\"room-joined-failed\", handleRoomJoinFailed);\n      room.off(\"room-connecting\", handleRoomConnecting);\n    };\n  }, [\n    handleRoomJoin,\n    handleRoomClose,\n    handlePeerJoin,\n    handlePeerLeft,\n    handleRoomJoinFailed\n  ]);\n  const closeStreamOfLabel = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(room.closeStreamOfLabel, []);\n  const muteEveryone = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(room.muteEveryone, []);\n  const joinRoom = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      setState(\"connecting\");\n      return huddleClient.joinRoom(data);\n    },\n    []\n  );\n  const leaveRoom = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(huddleClient.leaveRoom, []);\n  const closeRoom = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(huddleClient.closeRoom, []);\n  const kickPeer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(room.kickPeer, []);\n  return {\n    room,\n    state,\n    joinRoom,\n    leaveRoom,\n    closeRoom,\n    kickPeer,\n    muteEveryone,\n    closeStreamOfLabel\n  };\n};\n\n\n//# sourceMappingURL=chunk-PFZ5VHJP.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstUEZaNVZISlAuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRTZCOztBQUU3QjtBQUN5RDtBQUN6RDtBQUNBLFVBQVUsZUFBZSxFQUFFLHVFQUFtQjtBQUM5QztBQUNBLDRCQUE0QiwrQ0FBUTtBQUNwQywwQkFBMEIsa0RBQVc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHlCQUF5QixrREFBVztBQUNwQyxzQ0FBc0MseUJBQXlCO0FBQy9EO0FBQ0EsR0FBRztBQUNILCtCQUErQixrREFBVztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSx5QkFBeUIsa0RBQVc7QUFDcEMsT0FBTyxNQUFNO0FBQ2I7QUFDQSwyQkFBMkIsTUFBTTtBQUNqQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EseUJBQXlCLGtEQUFXO0FBQ3BDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLCtCQUErQixrREFBVztBQUMxQztBQUNBLEdBQUc7QUFDSCxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGtEQUFXO0FBQ3hDLHVCQUF1QixrREFBVztBQUNsQyxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxvQkFBb0Isa0RBQVc7QUFDL0Isb0JBQW9CLGtEQUFXO0FBQy9CLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2tlbW9uLWdhbWUtZXRoaW5kaWEtMS8uL25vZGVfbW9kdWxlcy9AaHVkZGxlMDEvcmVhY3QvZGlzdC9jaHVuay1QRlo1VkhKUC5qcz9mMDA1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHVzZUh1ZGRsZTAxX2RlZmF1bHRcbn0gZnJvbSBcIi4vY2h1bmstQU9KVktVSVMuanNcIjtcblxuLy8gc3JjL2hvb2tzL3VzZVJvb20udHNcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG52YXIgdXNlUm9vbSA9IChwcm9wcykgPT4ge1xuICBjb25zdCB7IGh1ZGRsZUNsaWVudCB9ID0gdXNlSHVkZGxlMDFfZGVmYXVsdCgpO1xuICBjb25zdCByb29tID0gaHVkZGxlQ2xpZW50LnJvb207XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGUocm9vbS5zdGF0ZSk7XG4gIGNvbnN0IGhhbmRsZVJvb21DbG9zZSA9IHVzZUNhbGxiYWNrKFxuICAgIChkYXRhKSA9PiB7XG4gICAgICBpZiAocHJvcHM/Lm9uTGVhdmUpIHByb3BzLm9uTGVhdmUoZGF0YSk7XG4gICAgICBpZiAoZGF0YS5yZWFzb24gPT09IFwiQ0xPU0VEXCIpIHNldFN0YXRlKFwiY2xvc2VkXCIpO1xuICAgICAgZWxzZSBzZXRTdGF0ZShcImxlZnRcIik7XG4gICAgfSxcbiAgICBbcHJvcHM/Lm9uTGVhdmVdXG4gICk7XG4gIGNvbnN0IGhhbmRsZVJvb21Kb2luID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChwcm9wcz8ub25Kb2luKSBwcm9wcy5vbkpvaW4oeyByb29tOiBodWRkbGVDbGllbnQucm9vbSB9KTtcbiAgICBzZXRTdGF0ZShcImNvbm5lY3RlZFwiKTtcbiAgfSwgW3Byb3BzPy5vbkpvaW5dKTtcbiAgY29uc3QgaGFuZGxlUm9vbUpvaW5GYWlsZWQgPSB1c2VDYWxsYmFjayhcbiAgICAoZGF0YSkgPT4ge1xuICAgICAgaWYgKHByb3BzPy5vbkZhaWxlZCkgcHJvcHMub25GYWlsZWQoZGF0YSk7XG4gICAgICBpZiAoZGF0YS5zdGF0dXMgPT09IFwiUk9PTV9FUlJPUkVEXCIgfHwgZGF0YS5zdGF0dXMgPT09IFwiUk9PTV9OT1RfRk9VTkRcIikge1xuICAgICAgICBzZXRTdGF0ZShcImZhaWxlZFwiKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtwcm9wcz8ub25GYWlsZWRdXG4gICk7XG4gIGNvbnN0IGhhbmRsZVBlZXJKb2luID0gdXNlQ2FsbGJhY2soXG4gICAgKHsgcGVlciB9KSA9PiB7XG4gICAgICBpZiAocHJvcHM/Lm9uUGVlckpvaW4pIHtcbiAgICAgICAgcHJvcHMub25QZWVySm9pbih7IHBlZXIgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbcHJvcHM/Lm9uUGVlckpvaW5dXG4gICk7XG4gIGNvbnN0IGhhbmRsZVBlZXJMZWZ0ID0gdXNlQ2FsbGJhY2soXG4gICAgKGRhdGEpID0+IHtcbiAgICAgIGlmIChwcm9wcz8ub25QZWVyTGVmdCkgcHJvcHMub25QZWVyTGVmdChkYXRhKTtcbiAgICB9LFxuICAgIFtwcm9wcz8ub25QZWVyTGVmdF1cbiAgKTtcbiAgY29uc3QgaGFuZGxlUm9vbUNvbm5lY3RpbmcgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0U3RhdGUoXCJjb25uZWN0aW5nXCIpO1xuICB9LCBbXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcm9vbS5vbihcInJvb20tam9pbmVkXCIsIGhhbmRsZVJvb21Kb2luKTtcbiAgICByb29tLm9uKFwicm9vbS1jbG9zZWRcIiwgaGFuZGxlUm9vbUNsb3NlKTtcbiAgICByb29tLm9uKFwicm9vbS1qb2luZWQtZmFpbGVkXCIsIGhhbmRsZVJvb21Kb2luRmFpbGVkKTtcbiAgICByb29tLm9uKFwicm9vbS1jb25uZWN0aW5nXCIsIGhhbmRsZVJvb21Db25uZWN0aW5nKTtcbiAgICBwcm9wcz8ub25QZWVySm9pbiAmJiByb29tLm9uKFwibmV3LXBlZXItam9pbmVkXCIsIGhhbmRsZVBlZXJKb2luKTtcbiAgICBwcm9wcz8ub25QZWVyTGVmdCAmJiByb29tLm9uKFwicGVlci1sZWZ0XCIsIGhhbmRsZVBlZXJMZWZ0KTtcbiAgICBwcm9wcz8ub25XYWl0aW5nICYmIHJvb20ub24oXCJyb29tLXdhaXRpbmdcIiwgcHJvcHMub25XYWl0aW5nKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcHJvcHM/Lm9uUGVlckpvaW4gJiYgcm9vbS5vZmYoXCJuZXctcGVlci1qb2luZWRcIiwgaGFuZGxlUGVlckpvaW4pO1xuICAgICAgcHJvcHM/Lm9uUGVlckxlZnQgJiYgcm9vbS5vZmYoXCJwZWVyLWxlZnRcIiwgaGFuZGxlUGVlckxlZnQpO1xuICAgICAgcHJvcHM/Lm9uV2FpdGluZyAmJiByb29tLm9mZihcInJvb20td2FpdGluZ1wiLCBwcm9wcy5vbldhaXRpbmcpO1xuICAgICAgcm9vbS5vZmYoXCJyb29tLWpvaW5lZFwiLCBoYW5kbGVSb29tSm9pbik7XG4gICAgICByb29tLm9mZihcInJvb20tY2xvc2VkXCIsIGhhbmRsZVJvb21DbG9zZSk7XG4gICAgICByb29tLm9mZihcInJvb20tam9pbmVkLWZhaWxlZFwiLCBoYW5kbGVSb29tSm9pbkZhaWxlZCk7XG4gICAgICByb29tLm9mZihcInJvb20tY29ubmVjdGluZ1wiLCBoYW5kbGVSb29tQ29ubmVjdGluZyk7XG4gICAgfTtcbiAgfSwgW1xuICAgIGhhbmRsZVJvb21Kb2luLFxuICAgIGhhbmRsZVJvb21DbG9zZSxcbiAgICBoYW5kbGVQZWVySm9pbixcbiAgICBoYW5kbGVQZWVyTGVmdCxcbiAgICBoYW5kbGVSb29tSm9pbkZhaWxlZFxuICBdKTtcbiAgY29uc3QgY2xvc2VTdHJlYW1PZkxhYmVsID0gdXNlQ2FsbGJhY2socm9vbS5jbG9zZVN0cmVhbU9mTGFiZWwsIFtdKTtcbiAgY29uc3QgbXV0ZUV2ZXJ5b25lID0gdXNlQ2FsbGJhY2socm9vbS5tdXRlRXZlcnlvbmUsIFtdKTtcbiAgY29uc3Qgam9pblJvb20gPSB1c2VDYWxsYmFjayhcbiAgICAoZGF0YSkgPT4ge1xuICAgICAgc2V0U3RhdGUoXCJjb25uZWN0aW5nXCIpO1xuICAgICAgcmV0dXJuIGh1ZGRsZUNsaWVudC5qb2luUm9vbShkYXRhKTtcbiAgICB9LFxuICAgIFtdXG4gICk7XG4gIGNvbnN0IGxlYXZlUm9vbSA9IHVzZUNhbGxiYWNrKGh1ZGRsZUNsaWVudC5sZWF2ZVJvb20sIFtdKTtcbiAgY29uc3QgY2xvc2VSb29tID0gdXNlQ2FsbGJhY2soaHVkZGxlQ2xpZW50LmNsb3NlUm9vbSwgW10pO1xuICBjb25zdCBraWNrUGVlciA9IHVzZUNhbGxiYWNrKHJvb20ua2lja1BlZXIsIFtdKTtcbiAgcmV0dXJuIHtcbiAgICByb29tLFxuICAgIHN0YXRlLFxuICAgIGpvaW5Sb29tLFxuICAgIGxlYXZlUm9vbSxcbiAgICBjbG9zZVJvb20sXG4gICAga2lja1BlZXIsXG4gICAgbXV0ZUV2ZXJ5b25lLFxuICAgIGNsb3NlU3RyZWFtT2ZMYWJlbFxuICB9O1xufTtcblxuZXhwb3J0IHtcbiAgdXNlUm9vbVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLVBGWjVWSEpQLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/react/dist/chunk-PFZ5VHJP.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/react/dist/chunk-Q43I2MTJ.js":
/*!*************************************************************!*\
  !*** ./node_modules/@huddle01/react/dist/chunk-Q43I2MTJ.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   usePeerIds: () => (/* binding */ usePeerIds)\n/* harmony export */ });\n/* harmony import */ var _chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-AOJVKUIS.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-AOJVKUIS.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\n// src/hooks/usePeerIds.ts\n\nvar usePeerIds = (props) => {\n  const { huddleClient } = (0,_chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__.useHuddle01_default)();\n  const room = huddleClient.room;\n  const [peerIds, setPeerIds] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n  const isValidPeer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      if (props?.labels) {\n        for (const label of data.labels) {\n          if (data.searchLabelSet.has(label)) {\n            return true;\n          }\n        }\n        return false;\n      }\n      if (props?.roles && data.role && !data.validRoles.has(data.role)) {\n        return false;\n      }\n      return true;\n    },\n    []\n  );\n  const handleSearch = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (peerIds2) => {\n      const validPeers = [];\n      const searchLabelSet = new Set(props?.labels);\n      const validRoles = new Set(props?.roles);\n      for (const peerId of peerIds2) {\n        const remotePeer = room.remotePeerExists(peerId);\n        const remotePeerLabels = remotePeer?.labels || [];\n        const role = remotePeer?.role || null;\n        if (isValidPeer({\n          searchLabelSet,\n          validRoles,\n          labels: remotePeerLabels,\n          role\n        })) {\n          validPeers.push(peerId);\n        }\n      }\n      return validPeers;\n    },\n    [props?.labels]\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    setPeerIds(handleSearch(room.peerIds));\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const handlePeerChange = () => {\n      const newPeerIds = handleSearch(room.peerIds);\n      setPeerIds(newPeerIds);\n    };\n    const handleStreamAdded = (data) => {\n      if (props?.labels?.includes(data.label)) {\n        setPeerIds(handleSearch(room.peerIds));\n      }\n    };\n    const handleRoleUpdate = (data) => {\n      if (props?.onPeerRoleUpdate) {\n        props.onPeerRoleUpdate(data);\n      }\n      if (props?.roles?.includes(data?.prevRole)) {\n        setPeerIds(handleSearch(room.peerIds));\n      } else if (props?.roles?.includes(data.newRole)) {\n        setPeerIds(handleSearch(room.peerIds));\n      }\n    };\n    if (room.state !== \"connected\") {\n      room.on(\"room-joined\", handlePeerChange);\n    }\n    room.on(\"new-peer-joined\", handlePeerChange);\n    room.on(\"peer-left\", handlePeerChange);\n    if (props?.labels) {\n      room.on(\"stream-added\", handleStreamAdded);\n      room.on(\"stream-closed\", handleStreamAdded);\n    }\n    if (props?.roles) {\n      room.on(\"room-role-updated\", handleRoleUpdate);\n    }\n    return () => {\n      room.off(\"new-peer-joined\", handlePeerChange);\n      room.off(\"peer-left\", handlePeerChange);\n      room.off(\"room-joined\", handlePeerChange);\n      if (props?.labels) {\n        room.off(\"stream-added\", handleStreamAdded);\n        room.off(\"stream-closed\", handleStreamAdded);\n      }\n      if (props?.roles) {\n        room.off(\"room-role-updated\", handleRoleUpdate);\n      }\n    };\n  }, [props?.labels]);\n  return {\n    peerIds\n  };\n};\n\n\n//# sourceMappingURL=chunk-Q43I2MTJ.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstUTQzSTJNVEouanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRTZCOztBQUU3QjtBQUN5RDtBQUN6RDtBQUNBLFVBQVUsZUFBZSxFQUFFLHVFQUFtQjtBQUM5QztBQUNBLGdDQUFnQywrQ0FBUTtBQUN4QyxzQkFBc0Isa0RBQVc7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHVCQUF1QixrREFBVztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsRUFBRSxnREFBUztBQUNYO0FBQ0EsR0FBRztBQUNILEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2tlbW9uLWdhbWUtZXRoaW5kaWEtMS8uL25vZGVfbW9kdWxlcy9AaHVkZGxlMDEvcmVhY3QvZGlzdC9jaHVuay1RNDNJMk1USi5qcz9lODA2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHVzZUh1ZGRsZTAxX2RlZmF1bHRcbn0gZnJvbSBcIi4vY2h1bmstQU9KVktVSVMuanNcIjtcblxuLy8gc3JjL2hvb2tzL3VzZVBlZXJJZHMudHNcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG52YXIgdXNlUGVlcklkcyA9IChwcm9wcykgPT4ge1xuICBjb25zdCB7IGh1ZGRsZUNsaWVudCB9ID0gdXNlSHVkZGxlMDFfZGVmYXVsdCgpO1xuICBjb25zdCByb29tID0gaHVkZGxlQ2xpZW50LnJvb207XG4gIGNvbnN0IFtwZWVySWRzLCBzZXRQZWVySWRzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgaXNWYWxpZFBlZXIgPSB1c2VDYWxsYmFjayhcbiAgICAoZGF0YSkgPT4ge1xuICAgICAgaWYgKHByb3BzPy5sYWJlbHMpIHtcbiAgICAgICAgZm9yIChjb25zdCBsYWJlbCBvZiBkYXRhLmxhYmVscykge1xuICAgICAgICAgIGlmIChkYXRhLnNlYXJjaExhYmVsU2V0LmhhcyhsYWJlbCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAocHJvcHM/LnJvbGVzICYmIGRhdGEucm9sZSAmJiAhZGF0YS52YWxpZFJvbGVzLmhhcyhkYXRhLnJvbGUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgW11cbiAgKTtcbiAgY29uc3QgaGFuZGxlU2VhcmNoID0gdXNlQ2FsbGJhY2soXG4gICAgKHBlZXJJZHMyKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZFBlZXJzID0gW107XG4gICAgICBjb25zdCBzZWFyY2hMYWJlbFNldCA9IG5ldyBTZXQocHJvcHM/LmxhYmVscyk7XG4gICAgICBjb25zdCB2YWxpZFJvbGVzID0gbmV3IFNldChwcm9wcz8ucm9sZXMpO1xuICAgICAgZm9yIChjb25zdCBwZWVySWQgb2YgcGVlcklkczIpIHtcbiAgICAgICAgY29uc3QgcmVtb3RlUGVlciA9IHJvb20ucmVtb3RlUGVlckV4aXN0cyhwZWVySWQpO1xuICAgICAgICBjb25zdCByZW1vdGVQZWVyTGFiZWxzID0gcmVtb3RlUGVlcj8ubGFiZWxzIHx8IFtdO1xuICAgICAgICBjb25zdCByb2xlID0gcmVtb3RlUGVlcj8ucm9sZSB8fCBudWxsO1xuICAgICAgICBpZiAoaXNWYWxpZFBlZXIoe1xuICAgICAgICAgIHNlYXJjaExhYmVsU2V0LFxuICAgICAgICAgIHZhbGlkUm9sZXMsXG4gICAgICAgICAgbGFiZWxzOiByZW1vdGVQZWVyTGFiZWxzLFxuICAgICAgICAgIHJvbGVcbiAgICAgICAgfSkpIHtcbiAgICAgICAgICB2YWxpZFBlZXJzLnB1c2gocGVlcklkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbGlkUGVlcnM7XG4gICAgfSxcbiAgICBbcHJvcHM/LmxhYmVsc11cbiAgKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRQZWVySWRzKGhhbmRsZVNlYXJjaChyb29tLnBlZXJJZHMpKTtcbiAgfSwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZVBlZXJDaGFuZ2UgPSAoKSA9PiB7XG4gICAgICBjb25zdCBuZXdQZWVySWRzID0gaGFuZGxlU2VhcmNoKHJvb20ucGVlcklkcyk7XG4gICAgICBzZXRQZWVySWRzKG5ld1BlZXJJZHMpO1xuICAgIH07XG4gICAgY29uc3QgaGFuZGxlU3RyZWFtQWRkZWQgPSAoZGF0YSkgPT4ge1xuICAgICAgaWYgKHByb3BzPy5sYWJlbHM/LmluY2x1ZGVzKGRhdGEubGFiZWwpKSB7XG4gICAgICAgIHNldFBlZXJJZHMoaGFuZGxlU2VhcmNoKHJvb20ucGVlcklkcykpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaGFuZGxlUm9sZVVwZGF0ZSA9IChkYXRhKSA9PiB7XG4gICAgICBpZiAocHJvcHM/Lm9uUGVlclJvbGVVcGRhdGUpIHtcbiAgICAgICAgcHJvcHMub25QZWVyUm9sZVVwZGF0ZShkYXRhKTtcbiAgICAgIH1cbiAgICAgIGlmIChwcm9wcz8ucm9sZXM/LmluY2x1ZGVzKGRhdGE/LnByZXZSb2xlKSkge1xuICAgICAgICBzZXRQZWVySWRzKGhhbmRsZVNlYXJjaChyb29tLnBlZXJJZHMpKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcHM/LnJvbGVzPy5pbmNsdWRlcyhkYXRhLm5ld1JvbGUpKSB7XG4gICAgICAgIHNldFBlZXJJZHMoaGFuZGxlU2VhcmNoKHJvb20ucGVlcklkcykpO1xuICAgICAgfVxuICAgIH07XG4gICAgaWYgKHJvb20uc3RhdGUgIT09IFwiY29ubmVjdGVkXCIpIHtcbiAgICAgIHJvb20ub24oXCJyb29tLWpvaW5lZFwiLCBoYW5kbGVQZWVyQ2hhbmdlKTtcbiAgICB9XG4gICAgcm9vbS5vbihcIm5ldy1wZWVyLWpvaW5lZFwiLCBoYW5kbGVQZWVyQ2hhbmdlKTtcbiAgICByb29tLm9uKFwicGVlci1sZWZ0XCIsIGhhbmRsZVBlZXJDaGFuZ2UpO1xuICAgIGlmIChwcm9wcz8ubGFiZWxzKSB7XG4gICAgICByb29tLm9uKFwic3RyZWFtLWFkZGVkXCIsIGhhbmRsZVN0cmVhbUFkZGVkKTtcbiAgICAgIHJvb20ub24oXCJzdHJlYW0tY2xvc2VkXCIsIGhhbmRsZVN0cmVhbUFkZGVkKTtcbiAgICB9XG4gICAgaWYgKHByb3BzPy5yb2xlcykge1xuICAgICAgcm9vbS5vbihcInJvb20tcm9sZS11cGRhdGVkXCIsIGhhbmRsZVJvbGVVcGRhdGUpO1xuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcm9vbS5vZmYoXCJuZXctcGVlci1qb2luZWRcIiwgaGFuZGxlUGVlckNoYW5nZSk7XG4gICAgICByb29tLm9mZihcInBlZXItbGVmdFwiLCBoYW5kbGVQZWVyQ2hhbmdlKTtcbiAgICAgIHJvb20ub2ZmKFwicm9vbS1qb2luZWRcIiwgaGFuZGxlUGVlckNoYW5nZSk7XG4gICAgICBpZiAocHJvcHM/LmxhYmVscykge1xuICAgICAgICByb29tLm9mZihcInN0cmVhbS1hZGRlZFwiLCBoYW5kbGVTdHJlYW1BZGRlZCk7XG4gICAgICAgIHJvb20ub2ZmKFwic3RyZWFtLWNsb3NlZFwiLCBoYW5kbGVTdHJlYW1BZGRlZCk7XG4gICAgICB9XG4gICAgICBpZiAocHJvcHM/LnJvbGVzKSB7XG4gICAgICAgIHJvb20ub2ZmKFwicm9vbS1yb2xlLXVwZGF0ZWRcIiwgaGFuZGxlUm9sZVVwZGF0ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW3Byb3BzPy5sYWJlbHNdKTtcbiAgcmV0dXJuIHtcbiAgICBwZWVySWRzXG4gIH07XG59O1xuXG5leHBvcnQge1xuICB1c2VQZWVySWRzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2h1bmstUTQzSTJNVEouanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/react/dist/chunk-Q43I2MTJ.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/react/dist/chunk-QFSKFQPJ.js":
/*!*************************************************************!*\
  !*** ./node_modules/@huddle01/react/dist/chunk-QFSKFQPJ.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useLocalScreenShare: () => (/* binding */ useLocalScreenShare)\n/* harmony export */ });\n/* harmony import */ var _chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-AOJVKUIS.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-AOJVKUIS.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\n// src/hooks/useLocalScreenShare.ts\n\nvar useLocalScreenShare = (props) => {\n  const { huddleClient } = (0,_chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__.useHuddle01_default)();\n  const localPeer = huddleClient.localPeer;\n  const [shareStream, setShareStream] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\n    localPeer.getStream({ label: \"screen-share\" })\n  );\n  const handleStreamFetched = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      if (data.mediaKind === \"screen\") {\n        setShareStream(data.stream);\n      }\n    },\n    []\n  );\n  const handleStreamPlayable = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      if (data.label === \"screen-share-video\") {\n        if (props?.onProduceStart) props?.onProduceStart(data.producer);\n      }\n      if (data.label === \"screen-share-audio\") {\n        if (props?.onProduceStart) props?.onProduceStart(data.producer);\n      }\n    },\n    [props?.onProduceStart]\n  );\n  const handleCloseStream = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      if (data.label === \"screen-share-video\") {\n        setShareStream(null);\n        if (props?.onProduceClose) props?.onProduceClose(data.label);\n      }\n      if (data.label === \"screen-share-audio\") {\n        setShareStream(null);\n        if (props?.onProduceClose) props?.onProduceClose(data.label);\n      }\n    },\n    [props?.onProduceClose]\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    localPeer.on(\"stream-fetched\", handleStreamFetched);\n    localPeer.on(\"stream-playable\", handleStreamPlayable);\n    localPeer.on(\"stream-closed\", handleCloseStream);\n    return () => {\n      localPeer.off(\"stream-fetched\", handleStreamFetched);\n      localPeer.off(\"stream-playable\", handleStreamPlayable);\n      localPeer.off(\"stream-closed\", handleCloseStream);\n    };\n  }, []);\n  const startScreenShare = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      return localPeer.startScreenShare(data);\n    },\n    [localPeer]\n  );\n  const stopScreenShare = localPeer.stopScreenShare;\n  const audioTrack = shareStream?.getAudioTracks()[0] || null;\n  const videoTrack = shareStream?.getVideoTracks()[0] || null;\n  return {\n    shareStream,\n    startScreenShare,\n    stopScreenShare,\n    audioTrack,\n    videoTrack\n  };\n};\n\n\n//# sourceMappingURL=chunk-QFSKFQPJ.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstUUZTS0ZRUEouanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRTZCOztBQUU3QjtBQUN5RDtBQUN6RDtBQUNBLFVBQVUsZUFBZSxFQUFFLHVFQUFtQjtBQUM5QztBQUNBLHdDQUF3QywrQ0FBUTtBQUNoRCwwQkFBMEIsdUJBQXVCO0FBQ2pEO0FBQ0EsOEJBQThCLGtEQUFXO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSwrQkFBK0Isa0RBQVc7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDRCQUE0QixrREFBVztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILDJCQUEyQixrREFBVztBQUN0QztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2tlbW9uLWdhbWUtZXRoaW5kaWEtMS8uL25vZGVfbW9kdWxlcy9AaHVkZGxlMDEvcmVhY3QvZGlzdC9jaHVuay1RRlNLRlFQSi5qcz81MWJmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHVzZUh1ZGRsZTAxX2RlZmF1bHRcbn0gZnJvbSBcIi4vY2h1bmstQU9KVktVSVMuanNcIjtcblxuLy8gc3JjL2hvb2tzL3VzZUxvY2FsU2NyZWVuU2hhcmUudHNcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG52YXIgdXNlTG9jYWxTY3JlZW5TaGFyZSA9IChwcm9wcykgPT4ge1xuICBjb25zdCB7IGh1ZGRsZUNsaWVudCB9ID0gdXNlSHVkZGxlMDFfZGVmYXVsdCgpO1xuICBjb25zdCBsb2NhbFBlZXIgPSBodWRkbGVDbGllbnQubG9jYWxQZWVyO1xuICBjb25zdCBbc2hhcmVTdHJlYW0sIHNldFNoYXJlU3RyZWFtXSA9IHVzZVN0YXRlKFxuICAgIGxvY2FsUGVlci5nZXRTdHJlYW0oeyBsYWJlbDogXCJzY3JlZW4tc2hhcmVcIiB9KVxuICApO1xuICBjb25zdCBoYW5kbGVTdHJlYW1GZXRjaGVkID0gdXNlQ2FsbGJhY2soXG4gICAgKGRhdGEpID0+IHtcbiAgICAgIGlmIChkYXRhLm1lZGlhS2luZCA9PT0gXCJzY3JlZW5cIikge1xuICAgICAgICBzZXRTaGFyZVN0cmVhbShkYXRhLnN0cmVhbSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbXVxuICApO1xuICBjb25zdCBoYW5kbGVTdHJlYW1QbGF5YWJsZSA9IHVzZUNhbGxiYWNrKFxuICAgIChkYXRhKSA9PiB7XG4gICAgICBpZiAoZGF0YS5sYWJlbCA9PT0gXCJzY3JlZW4tc2hhcmUtdmlkZW9cIikge1xuICAgICAgICBpZiAocHJvcHM/Lm9uUHJvZHVjZVN0YXJ0KSBwcm9wcz8ub25Qcm9kdWNlU3RhcnQoZGF0YS5wcm9kdWNlcik7XG4gICAgICB9XG4gICAgICBpZiAoZGF0YS5sYWJlbCA9PT0gXCJzY3JlZW4tc2hhcmUtYXVkaW9cIikge1xuICAgICAgICBpZiAocHJvcHM/Lm9uUHJvZHVjZVN0YXJ0KSBwcm9wcz8ub25Qcm9kdWNlU3RhcnQoZGF0YS5wcm9kdWNlcik7XG4gICAgICB9XG4gICAgfSxcbiAgICBbcHJvcHM/Lm9uUHJvZHVjZVN0YXJ0XVxuICApO1xuICBjb25zdCBoYW5kbGVDbG9zZVN0cmVhbSA9IHVzZUNhbGxiYWNrKFxuICAgIChkYXRhKSA9PiB7XG4gICAgICBpZiAoZGF0YS5sYWJlbCA9PT0gXCJzY3JlZW4tc2hhcmUtdmlkZW9cIikge1xuICAgICAgICBzZXRTaGFyZVN0cmVhbShudWxsKTtcbiAgICAgICAgaWYgKHByb3BzPy5vblByb2R1Y2VDbG9zZSkgcHJvcHM/Lm9uUHJvZHVjZUNsb3NlKGRhdGEubGFiZWwpO1xuICAgICAgfVxuICAgICAgaWYgKGRhdGEubGFiZWwgPT09IFwic2NyZWVuLXNoYXJlLWF1ZGlvXCIpIHtcbiAgICAgICAgc2V0U2hhcmVTdHJlYW0obnVsbCk7XG4gICAgICAgIGlmIChwcm9wcz8ub25Qcm9kdWNlQ2xvc2UpIHByb3BzPy5vblByb2R1Y2VDbG9zZShkYXRhLmxhYmVsKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtwcm9wcz8ub25Qcm9kdWNlQ2xvc2VdXG4gICk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbG9jYWxQZWVyLm9uKFwic3RyZWFtLWZldGNoZWRcIiwgaGFuZGxlU3RyZWFtRmV0Y2hlZCk7XG4gICAgbG9jYWxQZWVyLm9uKFwic3RyZWFtLXBsYXlhYmxlXCIsIGhhbmRsZVN0cmVhbVBsYXlhYmxlKTtcbiAgICBsb2NhbFBlZXIub24oXCJzdHJlYW0tY2xvc2VkXCIsIGhhbmRsZUNsb3NlU3RyZWFtKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbG9jYWxQZWVyLm9mZihcInN0cmVhbS1mZXRjaGVkXCIsIGhhbmRsZVN0cmVhbUZldGNoZWQpO1xuICAgICAgbG9jYWxQZWVyLm9mZihcInN0cmVhbS1wbGF5YWJsZVwiLCBoYW5kbGVTdHJlYW1QbGF5YWJsZSk7XG4gICAgICBsb2NhbFBlZXIub2ZmKFwic3RyZWFtLWNsb3NlZFwiLCBoYW5kbGVDbG9zZVN0cmVhbSk7XG4gICAgfTtcbiAgfSwgW10pO1xuICBjb25zdCBzdGFydFNjcmVlblNoYXJlID0gdXNlQ2FsbGJhY2soXG4gICAgKGRhdGEpID0+IHtcbiAgICAgIHJldHVybiBsb2NhbFBlZXIuc3RhcnRTY3JlZW5TaGFyZShkYXRhKTtcbiAgICB9LFxuICAgIFtsb2NhbFBlZXJdXG4gICk7XG4gIGNvbnN0IHN0b3BTY3JlZW5TaGFyZSA9IGxvY2FsUGVlci5zdG9wU2NyZWVuU2hhcmU7XG4gIGNvbnN0IGF1ZGlvVHJhY2sgPSBzaGFyZVN0cmVhbT8uZ2V0QXVkaW9UcmFja3MoKVswXSB8fCBudWxsO1xuICBjb25zdCB2aWRlb1RyYWNrID0gc2hhcmVTdHJlYW0/LmdldFZpZGVvVHJhY2tzKClbMF0gfHwgbnVsbDtcbiAgcmV0dXJuIHtcbiAgICBzaGFyZVN0cmVhbSxcbiAgICBzdGFydFNjcmVlblNoYXJlLFxuICAgIHN0b3BTY3JlZW5TaGFyZSxcbiAgICBhdWRpb1RyYWNrLFxuICAgIHZpZGVvVHJhY2tcbiAgfTtcbn07XG5cbmV4cG9ydCB7XG4gIHVzZUxvY2FsU2NyZWVuU2hhcmVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1RRlNLRlFQSi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/react/dist/chunk-QFSKFQPJ.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/react/dist/chunk-RK73FBGP.js":
/*!*************************************************************!*\
  !*** ./node_modules/@huddle01/react/dist/chunk-RK73FBGP.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useDevices: () => (/* binding */ useDevices)\n/* harmony export */ });\n/* harmony import */ var _chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-AOJVKUIS.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-AOJVKUIS.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\n// src/hooks/useDevices.ts\n\nvar useDevices = (props) => {\n  const { type } = props;\n  const { huddleClient } = (0,_chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_0__.useHuddle01_default)();\n  const localPeer = huddleClient.localPeer;\n  const deviceHandler = localPeer.deviceHandler;\n  const [devices, setDevices] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n  const [preferredDeviceId, setPreferredDeviceId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\n    deviceHandler.preferredDevices.get(type) || null\n  );\n  const fetchDevices = () => {\n    return deviceHandler.getMediaDevices(type);\n  };\n  const handlePermissionGranted = (data) => {\n    if (data.deviceKind === type) {\n      props.onPermissionGranted?.();\n    }\n  };\n  const handlePermissionDenied = (data) => {\n    if (data.deviceKind === type) {\n      props.onPermissionDenied?.();\n    }\n  };\n  const handleDeviceChange = () => {\n    fetchDevices().then((devices2) => {\n      setDevices(devices2);\n    });\n  };\n  const handlePrefferedDeviceChange = (data) => {\n    if (data.deviceKind === type) {\n      setPreferredDeviceId(data.deviceId);\n    }\n    if (data.deviceId && props?.onDeviceChanged) {\n      props.onDeviceChanged(data.deviceId);\n    }\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    deviceHandler.once(\"permission-granted\", handlePermissionGranted);\n    deviceHandler.once(\"permission-denied\", handlePermissionDenied);\n    deviceHandler.on(\"device-change\", handleDeviceChange);\n    deviceHandler.on(\"preferred-device-change\", handlePrefferedDeviceChange);\n    if (devices.length === 0) {\n      fetchDevices().then((devices2) => {\n        setDevices(devices2);\n      });\n    }\n    return () => {\n      deviceHandler.off(\"permission-granted\", handlePermissionGranted);\n      deviceHandler.off(\"permission-denied\", handlePermissionDenied);\n      deviceHandler.off(\"device-change\", handleDeviceChange);\n      deviceHandler.off(\"preferred-device-change\", handlePrefferedDeviceChange);\n    };\n  }, []);\n  const getPermission = async () => {\n    if (typeof navigator !== \"undefined\" && navigator.mediaDevices) {\n      return {\n        permission: \"denied\",\n        error: {\n          message: \"getUserMedia is not supported in this browser\",\n          blocked: {\n            byDeviceInUse: false,\n            byDeviceMissing: false,\n            byPermissions: true\n          }\n        }\n      };\n    }\n    const stream = await navigator.mediaDevices.getUserMedia({\n      audio: type === \"mic\",\n      video: type === \"cam\"\n    });\n    for (const track of stream.getTracks()) {\n      track.stop();\n    }\n    return deviceHandler.getMediaPermission({ mediaDeviceKind: type });\n  };\n  const fetchStream = deviceHandler.fetchStream;\n  const setPreferredDevice = (deviceId) => {\n    return deviceHandler.setPreferredDevice({\n      deviceKind: type,\n      deviceId\n    });\n  };\n  const preferredDevice = devices.find((device) => device.deviceId === preferredDeviceId) || null;\n  return {\n    devices,\n    preferredDeviceId,\n    preferredDevice,\n    fetchStream,\n    getPermission,\n    setPreferredDevice\n  };\n};\n\n\n//# sourceMappingURL=chunk-RK73FBGP.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstUks3M0ZCR1AuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRTZCOztBQUU3QjtBQUM0QztBQUM1QztBQUNBLFVBQVUsT0FBTztBQUNqQixVQUFVLGVBQWUsRUFBRSx1RUFBbUI7QUFDOUM7QUFDQTtBQUNBLGdDQUFnQywrQ0FBUTtBQUN4QyxvREFBb0QsK0NBQVE7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLDhDQUE4Qyx1QkFBdUI7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Bva2Vtb24tZ2FtZS1ldGhpbmRpYS0xLy4vbm9kZV9tb2R1bGVzL0BodWRkbGUwMS9yZWFjdC9kaXN0L2NodW5rLVJLNzNGQkdQLmpzPzI3M2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgdXNlSHVkZGxlMDFfZGVmYXVsdFxufSBmcm9tIFwiLi9jaHVuay1BT0pWS1VJUy5qc1wiO1xuXG4vLyBzcmMvaG9va3MvdXNlRGV2aWNlcy50c1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xudmFyIHVzZURldmljZXMgPSAocHJvcHMpID0+IHtcbiAgY29uc3QgeyB0eXBlIH0gPSBwcm9wcztcbiAgY29uc3QgeyBodWRkbGVDbGllbnQgfSA9IHVzZUh1ZGRsZTAxX2RlZmF1bHQoKTtcbiAgY29uc3QgbG9jYWxQZWVyID0gaHVkZGxlQ2xpZW50LmxvY2FsUGVlcjtcbiAgY29uc3QgZGV2aWNlSGFuZGxlciA9IGxvY2FsUGVlci5kZXZpY2VIYW5kbGVyO1xuICBjb25zdCBbZGV2aWNlcywgc2V0RGV2aWNlc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtwcmVmZXJyZWREZXZpY2VJZCwgc2V0UHJlZmVycmVkRGV2aWNlSWRdID0gdXNlU3RhdGUoXG4gICAgZGV2aWNlSGFuZGxlci5wcmVmZXJyZWREZXZpY2VzLmdldCh0eXBlKSB8fCBudWxsXG4gICk7XG4gIGNvbnN0IGZldGNoRGV2aWNlcyA9ICgpID0+IHtcbiAgICByZXR1cm4gZGV2aWNlSGFuZGxlci5nZXRNZWRpYURldmljZXModHlwZSk7XG4gIH07XG4gIGNvbnN0IGhhbmRsZVBlcm1pc3Npb25HcmFudGVkID0gKGRhdGEpID0+IHtcbiAgICBpZiAoZGF0YS5kZXZpY2VLaW5kID09PSB0eXBlKSB7XG4gICAgICBwcm9wcy5vblBlcm1pc3Npb25HcmFudGVkPy4oKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGhhbmRsZVBlcm1pc3Npb25EZW5pZWQgPSAoZGF0YSkgPT4ge1xuICAgIGlmIChkYXRhLmRldmljZUtpbmQgPT09IHR5cGUpIHtcbiAgICAgIHByb3BzLm9uUGVybWlzc2lvbkRlbmllZD8uKCk7XG4gICAgfVxuICB9O1xuICBjb25zdCBoYW5kbGVEZXZpY2VDaGFuZ2UgPSAoKSA9PiB7XG4gICAgZmV0Y2hEZXZpY2VzKCkudGhlbigoZGV2aWNlczIpID0+IHtcbiAgICAgIHNldERldmljZXMoZGV2aWNlczIpO1xuICAgIH0pO1xuICB9O1xuICBjb25zdCBoYW5kbGVQcmVmZmVyZWREZXZpY2VDaGFuZ2UgPSAoZGF0YSkgPT4ge1xuICAgIGlmIChkYXRhLmRldmljZUtpbmQgPT09IHR5cGUpIHtcbiAgICAgIHNldFByZWZlcnJlZERldmljZUlkKGRhdGEuZGV2aWNlSWQpO1xuICAgIH1cbiAgICBpZiAoZGF0YS5kZXZpY2VJZCAmJiBwcm9wcz8ub25EZXZpY2VDaGFuZ2VkKSB7XG4gICAgICBwcm9wcy5vbkRldmljZUNoYW5nZWQoZGF0YS5kZXZpY2VJZCk7XG4gICAgfVxuICB9O1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRldmljZUhhbmRsZXIub25jZShcInBlcm1pc3Npb24tZ3JhbnRlZFwiLCBoYW5kbGVQZXJtaXNzaW9uR3JhbnRlZCk7XG4gICAgZGV2aWNlSGFuZGxlci5vbmNlKFwicGVybWlzc2lvbi1kZW5pZWRcIiwgaGFuZGxlUGVybWlzc2lvbkRlbmllZCk7XG4gICAgZGV2aWNlSGFuZGxlci5vbihcImRldmljZS1jaGFuZ2VcIiwgaGFuZGxlRGV2aWNlQ2hhbmdlKTtcbiAgICBkZXZpY2VIYW5kbGVyLm9uKFwicHJlZmVycmVkLWRldmljZS1jaGFuZ2VcIiwgaGFuZGxlUHJlZmZlcmVkRGV2aWNlQ2hhbmdlKTtcbiAgICBpZiAoZGV2aWNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGZldGNoRGV2aWNlcygpLnRoZW4oKGRldmljZXMyKSA9PiB7XG4gICAgICAgIHNldERldmljZXMoZGV2aWNlczIpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkZXZpY2VIYW5kbGVyLm9mZihcInBlcm1pc3Npb24tZ3JhbnRlZFwiLCBoYW5kbGVQZXJtaXNzaW9uR3JhbnRlZCk7XG4gICAgICBkZXZpY2VIYW5kbGVyLm9mZihcInBlcm1pc3Npb24tZGVuaWVkXCIsIGhhbmRsZVBlcm1pc3Npb25EZW5pZWQpO1xuICAgICAgZGV2aWNlSGFuZGxlci5vZmYoXCJkZXZpY2UtY2hhbmdlXCIsIGhhbmRsZURldmljZUNoYW5nZSk7XG4gICAgICBkZXZpY2VIYW5kbGVyLm9mZihcInByZWZlcnJlZC1kZXZpY2UtY2hhbmdlXCIsIGhhbmRsZVByZWZmZXJlZERldmljZUNoYW5nZSk7XG4gICAgfTtcbiAgfSwgW10pO1xuICBjb25zdCBnZXRQZXJtaXNzaW9uID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiICYmIG5hdmlnYXRvci5tZWRpYURldmljZXMpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBlcm1pc3Npb246IFwiZGVuaWVkXCIsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgbWVzc2FnZTogXCJnZXRVc2VyTWVkaWEgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIixcbiAgICAgICAgICBibG9ja2VkOiB7XG4gICAgICAgICAgICBieURldmljZUluVXNlOiBmYWxzZSxcbiAgICAgICAgICAgIGJ5RGV2aWNlTWlzc2luZzogZmFsc2UsXG4gICAgICAgICAgICBieVBlcm1pc3Npb25zOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7XG4gICAgICBhdWRpbzogdHlwZSA9PT0gXCJtaWNcIixcbiAgICAgIHZpZGVvOiB0eXBlID09PSBcImNhbVwiXG4gICAgfSk7XG4gICAgZm9yIChjb25zdCB0cmFjayBvZiBzdHJlYW0uZ2V0VHJhY2tzKCkpIHtcbiAgICAgIHRyYWNrLnN0b3AoKTtcbiAgICB9XG4gICAgcmV0dXJuIGRldmljZUhhbmRsZXIuZ2V0TWVkaWFQZXJtaXNzaW9uKHsgbWVkaWFEZXZpY2VLaW5kOiB0eXBlIH0pO1xuICB9O1xuICBjb25zdCBmZXRjaFN0cmVhbSA9IGRldmljZUhhbmRsZXIuZmV0Y2hTdHJlYW07XG4gIGNvbnN0IHNldFByZWZlcnJlZERldmljZSA9IChkZXZpY2VJZCkgPT4ge1xuICAgIHJldHVybiBkZXZpY2VIYW5kbGVyLnNldFByZWZlcnJlZERldmljZSh7XG4gICAgICBkZXZpY2VLaW5kOiB0eXBlLFxuICAgICAgZGV2aWNlSWRcbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgcHJlZmVycmVkRGV2aWNlID0gZGV2aWNlcy5maW5kKChkZXZpY2UpID0+IGRldmljZS5kZXZpY2VJZCA9PT0gcHJlZmVycmVkRGV2aWNlSWQpIHx8IG51bGw7XG4gIHJldHVybiB7XG4gICAgZGV2aWNlcyxcbiAgICBwcmVmZXJyZWREZXZpY2VJZCxcbiAgICBwcmVmZXJyZWREZXZpY2UsXG4gICAgZmV0Y2hTdHJlYW0sXG4gICAgZ2V0UGVybWlzc2lvbixcbiAgICBzZXRQcmVmZXJyZWREZXZpY2VcbiAgfTtcbn07XG5cbmV4cG9ydCB7XG4gIHVzZURldmljZXNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1SSzczRkJHUC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/react/dist/chunk-RK73FBGP.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/react/dist/chunk-TMQB7U6H.js":
/*!*************************************************************!*\
  !*** ./node_modules/@huddle01/react/dist/chunk-TMQB7U6H.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useRemoteVideo: () => (/* binding */ useRemoteVideo)\n/* harmony export */ });\n/* harmony import */ var _chunk_CW3UCU6Y_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-CW3UCU6Y.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-CW3UCU6Y.js\");\n\n\n// src/hooks/useRemoteVideo.ts\nvar useRemoteVideo = (props) => {\n  const { state, track, stream } = (0,_chunk_CW3UCU6Y_js__WEBPACK_IMPORTED_MODULE_0__.useRemoteMedia)({\n    label: \"video\",\n    peerId: props.peerId,\n    onClose: props.onClose,\n    onPlayable: (data) => {\n      props.onPlayable?.({\n        label: \"video\",\n        track: data.track,\n        stream: data.stream\n      });\n    }\n  });\n  const isVideoOn = !!stream;\n  return {\n    state,\n    track,\n    stream,\n    isVideoOn\n  };\n};\n\n\n//# sourceMappingURL=chunk-TMQB7U6H.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstVE1RQjdVNkguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFFNkI7O0FBRTdCO0FBQ0E7QUFDQSxVQUFVLHVCQUF1QixFQUFFLGtFQUFjO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFJRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9rZW1vbi1nYW1lLWV0aGluZGlhLTEvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstVE1RQjdVNkguanM/MmQ3NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICB1c2VSZW1vdGVNZWRpYVxufSBmcm9tIFwiLi9jaHVuay1DVzNVQ1U2WS5qc1wiO1xuXG4vLyBzcmMvaG9va3MvdXNlUmVtb3RlVmlkZW8udHNcbnZhciB1c2VSZW1vdGVWaWRlbyA9IChwcm9wcykgPT4ge1xuICBjb25zdCB7IHN0YXRlLCB0cmFjaywgc3RyZWFtIH0gPSB1c2VSZW1vdGVNZWRpYSh7XG4gICAgbGFiZWw6IFwidmlkZW9cIixcbiAgICBwZWVySWQ6IHByb3BzLnBlZXJJZCxcbiAgICBvbkNsb3NlOiBwcm9wcy5vbkNsb3NlLFxuICAgIG9uUGxheWFibGU6IChkYXRhKSA9PiB7XG4gICAgICBwcm9wcy5vblBsYXlhYmxlPy4oe1xuICAgICAgICBsYWJlbDogXCJ2aWRlb1wiLFxuICAgICAgICB0cmFjazogZGF0YS50cmFjayxcbiAgICAgICAgc3RyZWFtOiBkYXRhLnN0cmVhbVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgY29uc3QgaXNWaWRlb09uID0gISFzdHJlYW07XG4gIHJldHVybiB7XG4gICAgc3RhdGUsXG4gICAgdHJhY2ssXG4gICAgc3RyZWFtLFxuICAgIGlzVmlkZW9PblxuICB9O1xufTtcblxuZXhwb3J0IHtcbiAgdXNlUmVtb3RlVmlkZW9cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1UTVFCN1U2SC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/react/dist/chunk-TMQB7U6H.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/react/dist/chunk-YYO56XV4.js":
/*!*************************************************************!*\
  !*** ./node_modules/@huddle01/react/dist/chunk-YYO56XV4.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useActivePeers: () => (/* binding */ useActivePeers)\n/* harmony export */ });\n/* harmony import */ var _chunk_PFZ5VHJP_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-PFZ5VHJP.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-PFZ5VHJP.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\n// src/hooks/useActivePeers.ts\n\n\n// ../../node_modules/zod/lib/index.mjs\nvar util;\n(function(util2) {\n  util2.assertEqual = (val) => val;\n  function assertIs(_arg) {\n  }\n  util2.assertIs = assertIs;\n  function assertNever(_x) {\n    throw new Error();\n  }\n  util2.assertNever = assertNever;\n  util2.arrayToEnum = (items) => {\n    const obj = {};\n    for (const item of items) {\n      obj[item] = item;\n    }\n    return obj;\n  };\n  util2.getValidEnumValues = (obj) => {\n    const validKeys = util2.objectKeys(obj).filter((k) => typeof obj[obj[k]] !== \"number\");\n    const filtered = {};\n    for (const k of validKeys) {\n      filtered[k] = obj[k];\n    }\n    return util2.objectValues(filtered);\n  };\n  util2.objectValues = (obj) => {\n    return util2.objectKeys(obj).map(function(e) {\n      return obj[e];\n    });\n  };\n  util2.objectKeys = typeof Object.keys === \"function\" ? (obj) => Object.keys(obj) : (object) => {\n    const keys = [];\n    for (const key in object) {\n      if (Object.prototype.hasOwnProperty.call(object, key)) {\n        keys.push(key);\n      }\n    }\n    return keys;\n  };\n  util2.find = (arr, checker) => {\n    for (const item of arr) {\n      if (checker(item))\n        return item;\n    }\n    return void 0;\n  };\n  util2.isInteger = typeof Number.isInteger === \"function\" ? (val) => Number.isInteger(val) : (val) => typeof val === \"number\" && isFinite(val) && Math.floor(val) === val;\n  function joinValues(array, separator = \" | \") {\n    return array.map((val) => typeof val === \"string\" ? `'${val}'` : val).join(separator);\n  }\n  util2.joinValues = joinValues;\n  util2.jsonStringifyReplacer = (_, value) => {\n    if (typeof value === \"bigint\") {\n      return value.toString();\n    }\n    return value;\n  };\n})(util || (util = {}));\nvar objectUtil;\n(function(objectUtil2) {\n  objectUtil2.mergeShapes = (first, second) => {\n    return {\n      ...first,\n      ...second\n      // second overwrites first\n    };\n  };\n})(objectUtil || (objectUtil = {}));\nvar ZodParsedType = util.arrayToEnum([\n  \"string\",\n  \"nan\",\n  \"number\",\n  \"integer\",\n  \"float\",\n  \"boolean\",\n  \"date\",\n  \"bigint\",\n  \"symbol\",\n  \"function\",\n  \"undefined\",\n  \"null\",\n  \"array\",\n  \"object\",\n  \"unknown\",\n  \"promise\",\n  \"void\",\n  \"never\",\n  \"map\",\n  \"set\"\n]);\nvar getParsedType = (data) => {\n  const t = typeof data;\n  switch (t) {\n    case \"undefined\":\n      return ZodParsedType.undefined;\n    case \"string\":\n      return ZodParsedType.string;\n    case \"number\":\n      return isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;\n    case \"boolean\":\n      return ZodParsedType.boolean;\n    case \"function\":\n      return ZodParsedType.function;\n    case \"bigint\":\n      return ZodParsedType.bigint;\n    case \"symbol\":\n      return ZodParsedType.symbol;\n    case \"object\":\n      if (Array.isArray(data)) {\n        return ZodParsedType.array;\n      }\n      if (data === null) {\n        return ZodParsedType.null;\n      }\n      if (data.then && typeof data.then === \"function\" && data.catch && typeof data.catch === \"function\") {\n        return ZodParsedType.promise;\n      }\n      if (typeof Map !== \"undefined\" && data instanceof Map) {\n        return ZodParsedType.map;\n      }\n      if (typeof Set !== \"undefined\" && data instanceof Set) {\n        return ZodParsedType.set;\n      }\n      if (typeof Date !== \"undefined\" && data instanceof Date) {\n        return ZodParsedType.date;\n      }\n      return ZodParsedType.object;\n    default:\n      return ZodParsedType.unknown;\n  }\n};\nvar ZodIssueCode = util.arrayToEnum([\n  \"invalid_type\",\n  \"invalid_literal\",\n  \"custom\",\n  \"invalid_union\",\n  \"invalid_union_discriminator\",\n  \"invalid_enum_value\",\n  \"unrecognized_keys\",\n  \"invalid_arguments\",\n  \"invalid_return_type\",\n  \"invalid_date\",\n  \"invalid_string\",\n  \"too_small\",\n  \"too_big\",\n  \"invalid_intersection_types\",\n  \"not_multiple_of\",\n  \"not_finite\"\n]);\nvar quotelessJson = (obj) => {\n  const json = JSON.stringify(obj, null, 2);\n  return json.replace(/\"([^\"]+)\":/g, \"$1:\");\n};\nvar ZodError = class _ZodError extends Error {\n  constructor(issues) {\n    super();\n    this.issues = [];\n    this.addIssue = (sub) => {\n      this.issues = [...this.issues, sub];\n    };\n    this.addIssues = (subs = []) => {\n      this.issues = [...this.issues, ...subs];\n    };\n    const actualProto = new.target.prototype;\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(this, actualProto);\n    } else {\n      this.__proto__ = actualProto;\n    }\n    this.name = \"ZodError\";\n    this.issues = issues;\n  }\n  get errors() {\n    return this.issues;\n  }\n  format(_mapper) {\n    const mapper = _mapper || function(issue) {\n      return issue.message;\n    };\n    const fieldErrors = { _errors: [] };\n    const processError = (error) => {\n      for (const issue of error.issues) {\n        if (issue.code === \"invalid_union\") {\n          issue.unionErrors.map(processError);\n        } else if (issue.code === \"invalid_return_type\") {\n          processError(issue.returnTypeError);\n        } else if (issue.code === \"invalid_arguments\") {\n          processError(issue.argumentsError);\n        } else if (issue.path.length === 0) {\n          fieldErrors._errors.push(mapper(issue));\n        } else {\n          let curr = fieldErrors;\n          let i = 0;\n          while (i < issue.path.length) {\n            const el = issue.path[i];\n            const terminal = i === issue.path.length - 1;\n            if (!terminal) {\n              curr[el] = curr[el] || { _errors: [] };\n            } else {\n              curr[el] = curr[el] || { _errors: [] };\n              curr[el]._errors.push(mapper(issue));\n            }\n            curr = curr[el];\n            i++;\n          }\n        }\n      }\n    };\n    processError(this);\n    return fieldErrors;\n  }\n  static assert(value) {\n    if (!(value instanceof _ZodError)) {\n      throw new Error(`Not a ZodError: ${value}`);\n    }\n  }\n  toString() {\n    return this.message;\n  }\n  get message() {\n    return JSON.stringify(this.issues, util.jsonStringifyReplacer, 2);\n  }\n  get isEmpty() {\n    return this.issues.length === 0;\n  }\n  flatten(mapper = (issue) => issue.message) {\n    const fieldErrors = {};\n    const formErrors = [];\n    for (const sub of this.issues) {\n      if (sub.path.length > 0) {\n        fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];\n        fieldErrors[sub.path[0]].push(mapper(sub));\n      } else {\n        formErrors.push(mapper(sub));\n      }\n    }\n    return { formErrors, fieldErrors };\n  }\n  get formErrors() {\n    return this.flatten();\n  }\n};\nZodError.create = (issues) => {\n  const error = new ZodError(issues);\n  return error;\n};\nvar errorMap = (issue, _ctx) => {\n  let message;\n  switch (issue.code) {\n    case ZodIssueCode.invalid_type:\n      if (issue.received === ZodParsedType.undefined) {\n        message = \"Required\";\n      } else {\n        message = `Expected ${issue.expected}, received ${issue.received}`;\n      }\n      break;\n    case ZodIssueCode.invalid_literal:\n      message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util.jsonStringifyReplacer)}`;\n      break;\n    case ZodIssueCode.unrecognized_keys:\n      message = `Unrecognized key(s) in object: ${util.joinValues(issue.keys, \", \")}`;\n      break;\n    case ZodIssueCode.invalid_union:\n      message = `Invalid input`;\n      break;\n    case ZodIssueCode.invalid_union_discriminator:\n      message = `Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;\n      break;\n    case ZodIssueCode.invalid_enum_value:\n      message = `Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;\n      break;\n    case ZodIssueCode.invalid_arguments:\n      message = `Invalid function arguments`;\n      break;\n    case ZodIssueCode.invalid_return_type:\n      message = `Invalid function return type`;\n      break;\n    case ZodIssueCode.invalid_date:\n      message = `Invalid date`;\n      break;\n    case ZodIssueCode.invalid_string:\n      if (typeof issue.validation === \"object\") {\n        if (\"includes\" in issue.validation) {\n          message = `Invalid input: must include \"${issue.validation.includes}\"`;\n          if (typeof issue.validation.position === \"number\") {\n            message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;\n          }\n        } else if (\"startsWith\" in issue.validation) {\n          message = `Invalid input: must start with \"${issue.validation.startsWith}\"`;\n        } else if (\"endsWith\" in issue.validation) {\n          message = `Invalid input: must end with \"${issue.validation.endsWith}\"`;\n        } else {\n          util.assertNever(issue.validation);\n        }\n      } else if (issue.validation !== \"regex\") {\n        message = `Invalid ${issue.validation}`;\n      } else {\n        message = \"Invalid\";\n      }\n      break;\n    case ZodIssueCode.too_small:\n      if (issue.type === \"array\")\n        message = `Array must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;\n      else if (issue.type === \"string\")\n        message = `String must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;\n      else if (issue.type === \"number\")\n        message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;\n      else if (issue.type === \"date\")\n        message = `Date must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${new Date(Number(issue.minimum))}`;\n      else\n        message = \"Invalid input\";\n      break;\n    case ZodIssueCode.too_big:\n      if (issue.type === \"array\")\n        message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;\n      else if (issue.type === \"string\")\n        message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;\n      else if (issue.type === \"number\")\n        message = `Number must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n      else if (issue.type === \"bigint\")\n        message = `BigInt must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n      else if (issue.type === \"date\")\n        message = `Date must be ${issue.exact ? `exactly` : issue.inclusive ? `smaller than or equal to` : `smaller than`} ${new Date(Number(issue.maximum))}`;\n      else\n        message = \"Invalid input\";\n      break;\n    case ZodIssueCode.custom:\n      message = `Invalid input`;\n      break;\n    case ZodIssueCode.invalid_intersection_types:\n      message = `Intersection results could not be merged`;\n      break;\n    case ZodIssueCode.not_multiple_of:\n      message = `Number must be a multiple of ${issue.multipleOf}`;\n      break;\n    case ZodIssueCode.not_finite:\n      message = \"Number must be finite\";\n      break;\n    default:\n      message = _ctx.defaultError;\n      util.assertNever(issue);\n  }\n  return { message };\n};\nvar overrideErrorMap = errorMap;\nfunction setErrorMap(map) {\n  overrideErrorMap = map;\n}\nfunction getErrorMap() {\n  return overrideErrorMap;\n}\nvar makeIssue = (params) => {\n  const { data, path, errorMaps, issueData } = params;\n  const fullPath = [...path, ...issueData.path || []];\n  const fullIssue = {\n    ...issueData,\n    path: fullPath\n  };\n  if (issueData.message !== void 0) {\n    return {\n      ...issueData,\n      path: fullPath,\n      message: issueData.message\n    };\n  }\n  let errorMessage = \"\";\n  const maps = errorMaps.filter((m) => !!m).slice().reverse();\n  for (const map of maps) {\n    errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;\n  }\n  return {\n    ...issueData,\n    path: fullPath,\n    message: errorMessage\n  };\n};\nvar EMPTY_PATH = [];\nfunction addIssueToContext(ctx, issueData) {\n  const overrideMap = getErrorMap();\n  const issue = makeIssue({\n    issueData,\n    data: ctx.data,\n    path: ctx.path,\n    errorMaps: [\n      ctx.common.contextualErrorMap,\n      ctx.schemaErrorMap,\n      overrideMap,\n      overrideMap === errorMap ? void 0 : errorMap\n      // then global default map\n    ].filter((x) => !!x)\n  });\n  ctx.common.issues.push(issue);\n}\nvar ParseStatus = class _ParseStatus {\n  constructor() {\n    this.value = \"valid\";\n  }\n  dirty() {\n    if (this.value === \"valid\")\n      this.value = \"dirty\";\n  }\n  abort() {\n    if (this.value !== \"aborted\")\n      this.value = \"aborted\";\n  }\n  static mergeArray(status, results) {\n    const arrayValue = [];\n    for (const s of results) {\n      if (s.status === \"aborted\")\n        return INVALID;\n      if (s.status === \"dirty\")\n        status.dirty();\n      arrayValue.push(s.value);\n    }\n    return { status: status.value, value: arrayValue };\n  }\n  static async mergeObjectAsync(status, pairs) {\n    const syncPairs = [];\n    for (const pair of pairs) {\n      const key = await pair.key;\n      const value = await pair.value;\n      syncPairs.push({\n        key,\n        value\n      });\n    }\n    return _ParseStatus.mergeObjectSync(status, syncPairs);\n  }\n  static mergeObjectSync(status, pairs) {\n    const finalObject = {};\n    for (const pair of pairs) {\n      const { key, value } = pair;\n      if (key.status === \"aborted\")\n        return INVALID;\n      if (value.status === \"aborted\")\n        return INVALID;\n      if (key.status === \"dirty\")\n        status.dirty();\n      if (value.status === \"dirty\")\n        status.dirty();\n      if (key.value !== \"__proto__\" && (typeof value.value !== \"undefined\" || pair.alwaysSet)) {\n        finalObject[key.value] = value.value;\n      }\n    }\n    return { status: status.value, value: finalObject };\n  }\n};\nvar INVALID = Object.freeze({\n  status: \"aborted\"\n});\nvar DIRTY = (value) => ({ status: \"dirty\", value });\nvar OK = (value) => ({ status: \"valid\", value });\nvar isAborted = (x) => x.status === \"aborted\";\nvar isDirty = (x) => x.status === \"dirty\";\nvar isValid = (x) => x.status === \"valid\";\nvar isAsync = (x) => typeof Promise !== \"undefined\" && x instanceof Promise;\nfunction __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\nfunction __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n}\nvar errorUtil;\n(function(errorUtil2) {\n  errorUtil2.errToObj = (message) => typeof message === \"string\" ? { message } : message || {};\n  errorUtil2.toString = (message) => typeof message === \"string\" ? message : message === null || message === void 0 ? void 0 : message.message;\n})(errorUtil || (errorUtil = {}));\nvar _ZodEnum_cache;\nvar _ZodNativeEnum_cache;\nvar ParseInputLazyPath = class {\n  constructor(parent, value, path, key) {\n    this._cachedPath = [];\n    this.parent = parent;\n    this.data = value;\n    this._path = path;\n    this._key = key;\n  }\n  get path() {\n    if (!this._cachedPath.length) {\n      if (this._key instanceof Array) {\n        this._cachedPath.push(...this._path, ...this._key);\n      } else {\n        this._cachedPath.push(...this._path, this._key);\n      }\n    }\n    return this._cachedPath;\n  }\n};\nvar handleResult = (ctx, result) => {\n  if (isValid(result)) {\n    return { success: true, data: result.value };\n  } else {\n    if (!ctx.common.issues.length) {\n      throw new Error(\"Validation failed but no issues detected.\");\n    }\n    return {\n      success: false,\n      get error() {\n        if (this._error)\n          return this._error;\n        const error = new ZodError(ctx.common.issues);\n        this._error = error;\n        return this._error;\n      }\n    };\n  }\n};\nfunction processCreateParams(params) {\n  if (!params)\n    return {};\n  const { errorMap: errorMap2, invalid_type_error, required_error, description } = params;\n  if (errorMap2 && (invalid_type_error || required_error)) {\n    throw new Error(`Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.`);\n  }\n  if (errorMap2)\n    return { errorMap: errorMap2, description };\n  const customMap = (iss, ctx) => {\n    var _a, _b;\n    const { message } = params;\n    if (iss.code === \"invalid_enum_value\") {\n      return { message: message !== null && message !== void 0 ? message : ctx.defaultError };\n    }\n    if (typeof ctx.data === \"undefined\") {\n      return { message: (_a = message !== null && message !== void 0 ? message : required_error) !== null && _a !== void 0 ? _a : ctx.defaultError };\n    }\n    if (iss.code !== \"invalid_type\")\n      return { message: ctx.defaultError };\n    return { message: (_b = message !== null && message !== void 0 ? message : invalid_type_error) !== null && _b !== void 0 ? _b : ctx.defaultError };\n  };\n  return { errorMap: customMap, description };\n}\nvar ZodType = class {\n  constructor(def) {\n    this.spa = this.safeParseAsync;\n    this._def = def;\n    this.parse = this.parse.bind(this);\n    this.safeParse = this.safeParse.bind(this);\n    this.parseAsync = this.parseAsync.bind(this);\n    this.safeParseAsync = this.safeParseAsync.bind(this);\n    this.spa = this.spa.bind(this);\n    this.refine = this.refine.bind(this);\n    this.refinement = this.refinement.bind(this);\n    this.superRefine = this.superRefine.bind(this);\n    this.optional = this.optional.bind(this);\n    this.nullable = this.nullable.bind(this);\n    this.nullish = this.nullish.bind(this);\n    this.array = this.array.bind(this);\n    this.promise = this.promise.bind(this);\n    this.or = this.or.bind(this);\n    this.and = this.and.bind(this);\n    this.transform = this.transform.bind(this);\n    this.brand = this.brand.bind(this);\n    this.default = this.default.bind(this);\n    this.catch = this.catch.bind(this);\n    this.describe = this.describe.bind(this);\n    this.pipe = this.pipe.bind(this);\n    this.readonly = this.readonly.bind(this);\n    this.isNullable = this.isNullable.bind(this);\n    this.isOptional = this.isOptional.bind(this);\n  }\n  get description() {\n    return this._def.description;\n  }\n  _getType(input) {\n    return getParsedType(input.data);\n  }\n  _getOrReturnCtx(input, ctx) {\n    return ctx || {\n      common: input.parent.common,\n      data: input.data,\n      parsedType: getParsedType(input.data),\n      schemaErrorMap: this._def.errorMap,\n      path: input.path,\n      parent: input.parent\n    };\n  }\n  _processInputParams(input) {\n    return {\n      status: new ParseStatus(),\n      ctx: {\n        common: input.parent.common,\n        data: input.data,\n        parsedType: getParsedType(input.data),\n        schemaErrorMap: this._def.errorMap,\n        path: input.path,\n        parent: input.parent\n      }\n    };\n  }\n  _parseSync(input) {\n    const result = this._parse(input);\n    if (isAsync(result)) {\n      throw new Error(\"Synchronous parse encountered promise.\");\n    }\n    return result;\n  }\n  _parseAsync(input) {\n    const result = this._parse(input);\n    return Promise.resolve(result);\n  }\n  parse(data, params) {\n    const result = this.safeParse(data, params);\n    if (result.success)\n      return result.data;\n    throw result.error;\n  }\n  safeParse(data, params) {\n    var _a;\n    const ctx = {\n      common: {\n        issues: [],\n        async: (_a = params === null || params === void 0 ? void 0 : params.async) !== null && _a !== void 0 ? _a : false,\n        contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap\n      },\n      path: (params === null || params === void 0 ? void 0 : params.path) || [],\n      schemaErrorMap: this._def.errorMap,\n      parent: null,\n      data,\n      parsedType: getParsedType(data)\n    };\n    const result = this._parseSync({ data, path: ctx.path, parent: ctx });\n    return handleResult(ctx, result);\n  }\n  async parseAsync(data, params) {\n    const result = await this.safeParseAsync(data, params);\n    if (result.success)\n      return result.data;\n    throw result.error;\n  }\n  async safeParseAsync(data, params) {\n    const ctx = {\n      common: {\n        issues: [],\n        contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap,\n        async: true\n      },\n      path: (params === null || params === void 0 ? void 0 : params.path) || [],\n      schemaErrorMap: this._def.errorMap,\n      parent: null,\n      data,\n      parsedType: getParsedType(data)\n    };\n    const maybeAsyncResult = this._parse({ data, path: ctx.path, parent: ctx });\n    const result = await (isAsync(maybeAsyncResult) ? maybeAsyncResult : Promise.resolve(maybeAsyncResult));\n    return handleResult(ctx, result);\n  }\n  refine(check, message) {\n    const getIssueProperties = (val) => {\n      if (typeof message === \"string\" || typeof message === \"undefined\") {\n        return { message };\n      } else if (typeof message === \"function\") {\n        return message(val);\n      } else {\n        return message;\n      }\n    };\n    return this._refinement((val, ctx) => {\n      const result = check(val);\n      const setError = () => ctx.addIssue({\n        code: ZodIssueCode.custom,\n        ...getIssueProperties(val)\n      });\n      if (typeof Promise !== \"undefined\" && result instanceof Promise) {\n        return result.then((data) => {\n          if (!data) {\n            setError();\n            return false;\n          } else {\n            return true;\n          }\n        });\n      }\n      if (!result) {\n        setError();\n        return false;\n      } else {\n        return true;\n      }\n    });\n  }\n  refinement(check, refinementData) {\n    return this._refinement((val, ctx) => {\n      if (!check(val)) {\n        ctx.addIssue(typeof refinementData === \"function\" ? refinementData(val, ctx) : refinementData);\n        return false;\n      } else {\n        return true;\n      }\n    });\n  }\n  _refinement(refinement) {\n    return new ZodEffects({\n      schema: this,\n      typeName: ZodFirstPartyTypeKind.ZodEffects,\n      effect: { type: \"refinement\", refinement }\n    });\n  }\n  superRefine(refinement) {\n    return this._refinement(refinement);\n  }\n  optional() {\n    return ZodOptional.create(this, this._def);\n  }\n  nullable() {\n    return ZodNullable.create(this, this._def);\n  }\n  nullish() {\n    return this.nullable().optional();\n  }\n  array() {\n    return ZodArray.create(this, this._def);\n  }\n  promise() {\n    return ZodPromise.create(this, this._def);\n  }\n  or(option) {\n    return ZodUnion.create([this, option], this._def);\n  }\n  and(incoming) {\n    return ZodIntersection.create(this, incoming, this._def);\n  }\n  transform(transform) {\n    return new ZodEffects({\n      ...processCreateParams(this._def),\n      schema: this,\n      typeName: ZodFirstPartyTypeKind.ZodEffects,\n      effect: { type: \"transform\", transform }\n    });\n  }\n  default(def) {\n    const defaultValueFunc = typeof def === \"function\" ? def : () => def;\n    return new ZodDefault({\n      ...processCreateParams(this._def),\n      innerType: this,\n      defaultValue: defaultValueFunc,\n      typeName: ZodFirstPartyTypeKind.ZodDefault\n    });\n  }\n  brand() {\n    return new ZodBranded({\n      typeName: ZodFirstPartyTypeKind.ZodBranded,\n      type: this,\n      ...processCreateParams(this._def)\n    });\n  }\n  catch(def) {\n    const catchValueFunc = typeof def === \"function\" ? def : () => def;\n    return new ZodCatch({\n      ...processCreateParams(this._def),\n      innerType: this,\n      catchValue: catchValueFunc,\n      typeName: ZodFirstPartyTypeKind.ZodCatch\n    });\n  }\n  describe(description) {\n    const This = this.constructor;\n    return new This({\n      ...this._def,\n      description\n    });\n  }\n  pipe(target) {\n    return ZodPipeline.create(this, target);\n  }\n  readonly() {\n    return ZodReadonly.create(this);\n  }\n  isOptional() {\n    return this.safeParse(void 0).success;\n  }\n  isNullable() {\n    return this.safeParse(null).success;\n  }\n};\nvar cuidRegex = /^c[^\\s-]{8,}$/i;\nvar cuid2Regex = /^[0-9a-z]+$/;\nvar ulidRegex = /^[0-9A-HJKMNP-TV-Z]{26}$/;\nvar uuidRegex = /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i;\nvar nanoidRegex = /^[a-z0-9_-]{21}$/i;\nvar durationRegex = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\nvar emailRegex = /^(?!\\.)(?!.*\\.\\.)([A-Z0-9_'+\\-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;\nvar _emojiRegex = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nvar emojiRegex;\nvar ipv4Regex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nvar ipv6Regex = /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;\nvar base64Regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;\nvar dateRegexSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nvar dateRegex = new RegExp(`^${dateRegexSource}$`);\nfunction timeRegexSource(args) {\n  let regex = `([01]\\\\d|2[0-3]):[0-5]\\\\d:[0-5]\\\\d`;\n  if (args.precision) {\n    regex = `${regex}\\\\.\\\\d{${args.precision}}`;\n  } else if (args.precision == null) {\n    regex = `${regex}(\\\\.\\\\d+)?`;\n  }\n  return regex;\n}\nfunction timeRegex(args) {\n  return new RegExp(`^${timeRegexSource(args)}$`);\n}\nfunction datetimeRegex(args) {\n  let regex = `${dateRegexSource}T${timeRegexSource(args)}`;\n  const opts = [];\n  opts.push(args.local ? `Z?` : `Z`);\n  if (args.offset)\n    opts.push(`([+-]\\\\d{2}:?\\\\d{2})`);\n  regex = `${regex}(${opts.join(\"|\")})`;\n  return new RegExp(`^${regex}$`);\n}\nfunction isValidIP(ip, version) {\n  if ((version === \"v4\" || !version) && ipv4Regex.test(ip)) {\n    return true;\n  }\n  if ((version === \"v6\" || !version) && ipv6Regex.test(ip)) {\n    return true;\n  }\n  return false;\n}\nvar ZodString = class _ZodString extends ZodType {\n  _parse(input) {\n    if (this._def.coerce) {\n      input.data = String(input.data);\n    }\n    const parsedType = this._getType(input);\n    if (parsedType !== ZodParsedType.string) {\n      const ctx2 = this._getOrReturnCtx(input);\n      addIssueToContext(ctx2, {\n        code: ZodIssueCode.invalid_type,\n        expected: ZodParsedType.string,\n        received: ctx2.parsedType\n      });\n      return INVALID;\n    }\n    const status = new ParseStatus();\n    let ctx = void 0;\n    for (const check of this._def.checks) {\n      if (check.kind === \"min\") {\n        if (input.data.length < check.value) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            code: ZodIssueCode.too_small,\n            minimum: check.value,\n            type: \"string\",\n            inclusive: true,\n            exact: false,\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"max\") {\n        if (input.data.length > check.value) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            code: ZodIssueCode.too_big,\n            maximum: check.value,\n            type: \"string\",\n            inclusive: true,\n            exact: false,\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"length\") {\n        const tooBig = input.data.length > check.value;\n        const tooSmall = input.data.length < check.value;\n        if (tooBig || tooSmall) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          if (tooBig) {\n            addIssueToContext(ctx, {\n              code: ZodIssueCode.too_big,\n              maximum: check.value,\n              type: \"string\",\n              inclusive: true,\n              exact: true,\n              message: check.message\n            });\n          } else if (tooSmall) {\n            addIssueToContext(ctx, {\n              code: ZodIssueCode.too_small,\n              minimum: check.value,\n              type: \"string\",\n              inclusive: true,\n              exact: true,\n              message: check.message\n            });\n          }\n          status.dirty();\n        }\n      } else if (check.kind === \"email\") {\n        if (!emailRegex.test(input.data)) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            validation: \"email\",\n            code: ZodIssueCode.invalid_string,\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"emoji\") {\n        if (!emojiRegex) {\n          emojiRegex = new RegExp(_emojiRegex, \"u\");\n        }\n        if (!emojiRegex.test(input.data)) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            validation: \"emoji\",\n            code: ZodIssueCode.invalid_string,\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"uuid\") {\n        if (!uuidRegex.test(input.data)) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            validation: \"uuid\",\n            code: ZodIssueCode.invalid_string,\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"nanoid\") {\n        if (!nanoidRegex.test(input.data)) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            validation: \"nanoid\",\n            code: ZodIssueCode.invalid_string,\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"cuid\") {\n        if (!cuidRegex.test(input.data)) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            validation: \"cuid\",\n            code: ZodIssueCode.invalid_string,\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"cuid2\") {\n        if (!cuid2Regex.test(input.data)) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            validation: \"cuid2\",\n            code: ZodIssueCode.invalid_string,\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"ulid\") {\n        if (!ulidRegex.test(input.data)) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            validation: \"ulid\",\n            code: ZodIssueCode.invalid_string,\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"url\") {\n        try {\n          new URL(input.data);\n        } catch (_a) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            validation: \"url\",\n            code: ZodIssueCode.invalid_string,\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"regex\") {\n        check.regex.lastIndex = 0;\n        const testResult = check.regex.test(input.data);\n        if (!testResult) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            validation: \"regex\",\n            code: ZodIssueCode.invalid_string,\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"trim\") {\n        input.data = input.data.trim();\n      } else if (check.kind === \"includes\") {\n        if (!input.data.includes(check.value, check.position)) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_string,\n            validation: { includes: check.value, position: check.position },\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"toLowerCase\") {\n        input.data = input.data.toLowerCase();\n      } else if (check.kind === \"toUpperCase\") {\n        input.data = input.data.toUpperCase();\n      } else if (check.kind === \"startsWith\") {\n        if (!input.data.startsWith(check.value)) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_string,\n            validation: { startsWith: check.value },\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"endsWith\") {\n        if (!input.data.endsWith(check.value)) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_string,\n            validation: { endsWith: check.value },\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"datetime\") {\n        const regex = datetimeRegex(check);\n        if (!regex.test(input.data)) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_string,\n            validation: \"datetime\",\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"date\") {\n        const regex = dateRegex;\n        if (!regex.test(input.data)) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_string,\n            validation: \"date\",\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"time\") {\n        const regex = timeRegex(check);\n        if (!regex.test(input.data)) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_string,\n            validation: \"time\",\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"duration\") {\n        if (!durationRegex.test(input.data)) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            validation: \"duration\",\n            code: ZodIssueCode.invalid_string,\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"ip\") {\n        if (!isValidIP(input.data, check.version)) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            validation: \"ip\",\n            code: ZodIssueCode.invalid_string,\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"base64\") {\n        if (!base64Regex.test(input.data)) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            validation: \"base64\",\n            code: ZodIssueCode.invalid_string,\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else {\n        util.assertNever(check);\n      }\n    }\n    return { status: status.value, value: input.data };\n  }\n  _regex(regex, validation, message) {\n    return this.refinement((data) => regex.test(data), {\n      validation,\n      code: ZodIssueCode.invalid_string,\n      ...errorUtil.errToObj(message)\n    });\n  }\n  _addCheck(check) {\n    return new _ZodString({\n      ...this._def,\n      checks: [...this._def.checks, check]\n    });\n  }\n  email(message) {\n    return this._addCheck({ kind: \"email\", ...errorUtil.errToObj(message) });\n  }\n  url(message) {\n    return this._addCheck({ kind: \"url\", ...errorUtil.errToObj(message) });\n  }\n  emoji(message) {\n    return this._addCheck({ kind: \"emoji\", ...errorUtil.errToObj(message) });\n  }\n  uuid(message) {\n    return this._addCheck({ kind: \"uuid\", ...errorUtil.errToObj(message) });\n  }\n  nanoid(message) {\n    return this._addCheck({ kind: \"nanoid\", ...errorUtil.errToObj(message) });\n  }\n  cuid(message) {\n    return this._addCheck({ kind: \"cuid\", ...errorUtil.errToObj(message) });\n  }\n  cuid2(message) {\n    return this._addCheck({ kind: \"cuid2\", ...errorUtil.errToObj(message) });\n  }\n  ulid(message) {\n    return this._addCheck({ kind: \"ulid\", ...errorUtil.errToObj(message) });\n  }\n  base64(message) {\n    return this._addCheck({ kind: \"base64\", ...errorUtil.errToObj(message) });\n  }\n  ip(options) {\n    return this._addCheck({ kind: \"ip\", ...errorUtil.errToObj(options) });\n  }\n  datetime(options) {\n    var _a, _b;\n    if (typeof options === \"string\") {\n      return this._addCheck({\n        kind: \"datetime\",\n        precision: null,\n        offset: false,\n        local: false,\n        message: options\n      });\n    }\n    return this._addCheck({\n      kind: \"datetime\",\n      precision: typeof (options === null || options === void 0 ? void 0 : options.precision) === \"undefined\" ? null : options === null || options === void 0 ? void 0 : options.precision,\n      offset: (_a = options === null || options === void 0 ? void 0 : options.offset) !== null && _a !== void 0 ? _a : false,\n      local: (_b = options === null || options === void 0 ? void 0 : options.local) !== null && _b !== void 0 ? _b : false,\n      ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message)\n    });\n  }\n  date(message) {\n    return this._addCheck({ kind: \"date\", message });\n  }\n  time(options) {\n    if (typeof options === \"string\") {\n      return this._addCheck({\n        kind: \"time\",\n        precision: null,\n        message: options\n      });\n    }\n    return this._addCheck({\n      kind: \"time\",\n      precision: typeof (options === null || options === void 0 ? void 0 : options.precision) === \"undefined\" ? null : options === null || options === void 0 ? void 0 : options.precision,\n      ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message)\n    });\n  }\n  duration(message) {\n    return this._addCheck({ kind: \"duration\", ...errorUtil.errToObj(message) });\n  }\n  regex(regex, message) {\n    return this._addCheck({\n      kind: \"regex\",\n      regex,\n      ...errorUtil.errToObj(message)\n    });\n  }\n  includes(value, options) {\n    return this._addCheck({\n      kind: \"includes\",\n      value,\n      position: options === null || options === void 0 ? void 0 : options.position,\n      ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message)\n    });\n  }\n  startsWith(value, message) {\n    return this._addCheck({\n      kind: \"startsWith\",\n      value,\n      ...errorUtil.errToObj(message)\n    });\n  }\n  endsWith(value, message) {\n    return this._addCheck({\n      kind: \"endsWith\",\n      value,\n      ...errorUtil.errToObj(message)\n    });\n  }\n  min(minLength, message) {\n    return this._addCheck({\n      kind: \"min\",\n      value: minLength,\n      ...errorUtil.errToObj(message)\n    });\n  }\n  max(maxLength, message) {\n    return this._addCheck({\n      kind: \"max\",\n      value: maxLength,\n      ...errorUtil.errToObj(message)\n    });\n  }\n  length(len, message) {\n    return this._addCheck({\n      kind: \"length\",\n      value: len,\n      ...errorUtil.errToObj(message)\n    });\n  }\n  /**\n   * @deprecated Use z.string().min(1) instead.\n   * @see {@link ZodString.min}\n   */\n  nonempty(message) {\n    return this.min(1, errorUtil.errToObj(message));\n  }\n  trim() {\n    return new _ZodString({\n      ...this._def,\n      checks: [...this._def.checks, { kind: \"trim\" }]\n    });\n  }\n  toLowerCase() {\n    return new _ZodString({\n      ...this._def,\n      checks: [...this._def.checks, { kind: \"toLowerCase\" }]\n    });\n  }\n  toUpperCase() {\n    return new _ZodString({\n      ...this._def,\n      checks: [...this._def.checks, { kind: \"toUpperCase\" }]\n    });\n  }\n  get isDatetime() {\n    return !!this._def.checks.find((ch) => ch.kind === \"datetime\");\n  }\n  get isDate() {\n    return !!this._def.checks.find((ch) => ch.kind === \"date\");\n  }\n  get isTime() {\n    return !!this._def.checks.find((ch) => ch.kind === \"time\");\n  }\n  get isDuration() {\n    return !!this._def.checks.find((ch) => ch.kind === \"duration\");\n  }\n  get isEmail() {\n    return !!this._def.checks.find((ch) => ch.kind === \"email\");\n  }\n  get isURL() {\n    return !!this._def.checks.find((ch) => ch.kind === \"url\");\n  }\n  get isEmoji() {\n    return !!this._def.checks.find((ch) => ch.kind === \"emoji\");\n  }\n  get isUUID() {\n    return !!this._def.checks.find((ch) => ch.kind === \"uuid\");\n  }\n  get isNANOID() {\n    return !!this._def.checks.find((ch) => ch.kind === \"nanoid\");\n  }\n  get isCUID() {\n    return !!this._def.checks.find((ch) => ch.kind === \"cuid\");\n  }\n  get isCUID2() {\n    return !!this._def.checks.find((ch) => ch.kind === \"cuid2\");\n  }\n  get isULID() {\n    return !!this._def.checks.find((ch) => ch.kind === \"ulid\");\n  }\n  get isIP() {\n    return !!this._def.checks.find((ch) => ch.kind === \"ip\");\n  }\n  get isBase64() {\n    return !!this._def.checks.find((ch) => ch.kind === \"base64\");\n  }\n  get minLength() {\n    let min = null;\n    for (const ch of this._def.checks) {\n      if (ch.kind === \"min\") {\n        if (min === null || ch.value > min)\n          min = ch.value;\n      }\n    }\n    return min;\n  }\n  get maxLength() {\n    let max = null;\n    for (const ch of this._def.checks) {\n      if (ch.kind === \"max\") {\n        if (max === null || ch.value < max)\n          max = ch.value;\n      }\n    }\n    return max;\n  }\n};\nZodString.create = (params) => {\n  var _a;\n  return new ZodString({\n    checks: [],\n    typeName: ZodFirstPartyTypeKind.ZodString,\n    coerce: (_a = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a !== void 0 ? _a : false,\n    ...processCreateParams(params)\n  });\n};\nfunction floatSafeRemainder(val, step) {\n  const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n  const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n  const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n  const valInt = parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n  const stepInt = parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n  return valInt % stepInt / Math.pow(10, decCount);\n}\nvar ZodNumber = class _ZodNumber extends ZodType {\n  constructor() {\n    super(...arguments);\n    this.min = this.gte;\n    this.max = this.lte;\n    this.step = this.multipleOf;\n  }\n  _parse(input) {\n    if (this._def.coerce) {\n      input.data = Number(input.data);\n    }\n    const parsedType = this._getType(input);\n    if (parsedType !== ZodParsedType.number) {\n      const ctx2 = this._getOrReturnCtx(input);\n      addIssueToContext(ctx2, {\n        code: ZodIssueCode.invalid_type,\n        expected: ZodParsedType.number,\n        received: ctx2.parsedType\n      });\n      return INVALID;\n    }\n    let ctx = void 0;\n    const status = new ParseStatus();\n    for (const check of this._def.checks) {\n      if (check.kind === \"int\") {\n        if (!util.isInteger(input.data)) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: \"integer\",\n            received: \"float\",\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"min\") {\n        const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n        if (tooSmall) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            code: ZodIssueCode.too_small,\n            minimum: check.value,\n            type: \"number\",\n            inclusive: check.inclusive,\n            exact: false,\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"max\") {\n        const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n        if (tooBig) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            code: ZodIssueCode.too_big,\n            maximum: check.value,\n            type: \"number\",\n            inclusive: check.inclusive,\n            exact: false,\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"multipleOf\") {\n        if (floatSafeRemainder(input.data, check.value) !== 0) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            code: ZodIssueCode.not_multiple_of,\n            multipleOf: check.value,\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"finite\") {\n        if (!Number.isFinite(input.data)) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            code: ZodIssueCode.not_finite,\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else {\n        util.assertNever(check);\n      }\n    }\n    return { status: status.value, value: input.data };\n  }\n  gte(value, message) {\n    return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n  }\n  gt(value, message) {\n    return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n  }\n  lte(value, message) {\n    return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n  }\n  lt(value, message) {\n    return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n  }\n  setLimit(kind, value, inclusive, message) {\n    return new _ZodNumber({\n      ...this._def,\n      checks: [\n        ...this._def.checks,\n        {\n          kind,\n          value,\n          inclusive,\n          message: errorUtil.toString(message)\n        }\n      ]\n    });\n  }\n  _addCheck(check) {\n    return new _ZodNumber({\n      ...this._def,\n      checks: [...this._def.checks, check]\n    });\n  }\n  int(message) {\n    return this._addCheck({\n      kind: \"int\",\n      message: errorUtil.toString(message)\n    });\n  }\n  positive(message) {\n    return this._addCheck({\n      kind: \"min\",\n      value: 0,\n      inclusive: false,\n      message: errorUtil.toString(message)\n    });\n  }\n  negative(message) {\n    return this._addCheck({\n      kind: \"max\",\n      value: 0,\n      inclusive: false,\n      message: errorUtil.toString(message)\n    });\n  }\n  nonpositive(message) {\n    return this._addCheck({\n      kind: \"max\",\n      value: 0,\n      inclusive: true,\n      message: errorUtil.toString(message)\n    });\n  }\n  nonnegative(message) {\n    return this._addCheck({\n      kind: \"min\",\n      value: 0,\n      inclusive: true,\n      message: errorUtil.toString(message)\n    });\n  }\n  multipleOf(value, message) {\n    return this._addCheck({\n      kind: \"multipleOf\",\n      value,\n      message: errorUtil.toString(message)\n    });\n  }\n  finite(message) {\n    return this._addCheck({\n      kind: \"finite\",\n      message: errorUtil.toString(message)\n    });\n  }\n  safe(message) {\n    return this._addCheck({\n      kind: \"min\",\n      inclusive: true,\n      value: Number.MIN_SAFE_INTEGER,\n      message: errorUtil.toString(message)\n    })._addCheck({\n      kind: \"max\",\n      inclusive: true,\n      value: Number.MAX_SAFE_INTEGER,\n      message: errorUtil.toString(message)\n    });\n  }\n  get minValue() {\n    let min = null;\n    for (const ch of this._def.checks) {\n      if (ch.kind === \"min\") {\n        if (min === null || ch.value > min)\n          min = ch.value;\n      }\n    }\n    return min;\n  }\n  get maxValue() {\n    let max = null;\n    for (const ch of this._def.checks) {\n      if (ch.kind === \"max\") {\n        if (max === null || ch.value < max)\n          max = ch.value;\n      }\n    }\n    return max;\n  }\n  get isInt() {\n    return !!this._def.checks.find((ch) => ch.kind === \"int\" || ch.kind === \"multipleOf\" && util.isInteger(ch.value));\n  }\n  get isFinite() {\n    let max = null, min = null;\n    for (const ch of this._def.checks) {\n      if (ch.kind === \"finite\" || ch.kind === \"int\" || ch.kind === \"multipleOf\") {\n        return true;\n      } else if (ch.kind === \"min\") {\n        if (min === null || ch.value > min)\n          min = ch.value;\n      } else if (ch.kind === \"max\") {\n        if (max === null || ch.value < max)\n          max = ch.value;\n      }\n    }\n    return Number.isFinite(min) && Number.isFinite(max);\n  }\n};\nZodNumber.create = (params) => {\n  return new ZodNumber({\n    checks: [],\n    typeName: ZodFirstPartyTypeKind.ZodNumber,\n    coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n    ...processCreateParams(params)\n  });\n};\nvar ZodBigInt = class _ZodBigInt extends ZodType {\n  constructor() {\n    super(...arguments);\n    this.min = this.gte;\n    this.max = this.lte;\n  }\n  _parse(input) {\n    if (this._def.coerce) {\n      input.data = BigInt(input.data);\n    }\n    const parsedType = this._getType(input);\n    if (parsedType !== ZodParsedType.bigint) {\n      const ctx2 = this._getOrReturnCtx(input);\n      addIssueToContext(ctx2, {\n        code: ZodIssueCode.invalid_type,\n        expected: ZodParsedType.bigint,\n        received: ctx2.parsedType\n      });\n      return INVALID;\n    }\n    let ctx = void 0;\n    const status = new ParseStatus();\n    for (const check of this._def.checks) {\n      if (check.kind === \"min\") {\n        const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n        if (tooSmall) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            code: ZodIssueCode.too_small,\n            type: \"bigint\",\n            minimum: check.value,\n            inclusive: check.inclusive,\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"max\") {\n        const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n        if (tooBig) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            code: ZodIssueCode.too_big,\n            type: \"bigint\",\n            maximum: check.value,\n            inclusive: check.inclusive,\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"multipleOf\") {\n        if (input.data % check.value !== BigInt(0)) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            code: ZodIssueCode.not_multiple_of,\n            multipleOf: check.value,\n            message: check.message\n          });\n          status.dirty();\n        }\n      } else {\n        util.assertNever(check);\n      }\n    }\n    return { status: status.value, value: input.data };\n  }\n  gte(value, message) {\n    return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n  }\n  gt(value, message) {\n    return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n  }\n  lte(value, message) {\n    return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n  }\n  lt(value, message) {\n    return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n  }\n  setLimit(kind, value, inclusive, message) {\n    return new _ZodBigInt({\n      ...this._def,\n      checks: [\n        ...this._def.checks,\n        {\n          kind,\n          value,\n          inclusive,\n          message: errorUtil.toString(message)\n        }\n      ]\n    });\n  }\n  _addCheck(check) {\n    return new _ZodBigInt({\n      ...this._def,\n      checks: [...this._def.checks, check]\n    });\n  }\n  positive(message) {\n    return this._addCheck({\n      kind: \"min\",\n      value: BigInt(0),\n      inclusive: false,\n      message: errorUtil.toString(message)\n    });\n  }\n  negative(message) {\n    return this._addCheck({\n      kind: \"max\",\n      value: BigInt(0),\n      inclusive: false,\n      message: errorUtil.toString(message)\n    });\n  }\n  nonpositive(message) {\n    return this._addCheck({\n      kind: \"max\",\n      value: BigInt(0),\n      inclusive: true,\n      message: errorUtil.toString(message)\n    });\n  }\n  nonnegative(message) {\n    return this._addCheck({\n      kind: \"min\",\n      value: BigInt(0),\n      inclusive: true,\n      message: errorUtil.toString(message)\n    });\n  }\n  multipleOf(value, message) {\n    return this._addCheck({\n      kind: \"multipleOf\",\n      value,\n      message: errorUtil.toString(message)\n    });\n  }\n  get minValue() {\n    let min = null;\n    for (const ch of this._def.checks) {\n      if (ch.kind === \"min\") {\n        if (min === null || ch.value > min)\n          min = ch.value;\n      }\n    }\n    return min;\n  }\n  get maxValue() {\n    let max = null;\n    for (const ch of this._def.checks) {\n      if (ch.kind === \"max\") {\n        if (max === null || ch.value < max)\n          max = ch.value;\n      }\n    }\n    return max;\n  }\n};\nZodBigInt.create = (params) => {\n  var _a;\n  return new ZodBigInt({\n    checks: [],\n    typeName: ZodFirstPartyTypeKind.ZodBigInt,\n    coerce: (_a = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a !== void 0 ? _a : false,\n    ...processCreateParams(params)\n  });\n};\nvar ZodBoolean = class extends ZodType {\n  _parse(input) {\n    if (this._def.coerce) {\n      input.data = Boolean(input.data);\n    }\n    const parsedType = this._getType(input);\n    if (parsedType !== ZodParsedType.boolean) {\n      const ctx = this._getOrReturnCtx(input);\n      addIssueToContext(ctx, {\n        code: ZodIssueCode.invalid_type,\n        expected: ZodParsedType.boolean,\n        received: ctx.parsedType\n      });\n      return INVALID;\n    }\n    return OK(input.data);\n  }\n};\nZodBoolean.create = (params) => {\n  return new ZodBoolean({\n    typeName: ZodFirstPartyTypeKind.ZodBoolean,\n    coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n    ...processCreateParams(params)\n  });\n};\nvar ZodDate = class _ZodDate extends ZodType {\n  _parse(input) {\n    if (this._def.coerce) {\n      input.data = new Date(input.data);\n    }\n    const parsedType = this._getType(input);\n    if (parsedType !== ZodParsedType.date) {\n      const ctx2 = this._getOrReturnCtx(input);\n      addIssueToContext(ctx2, {\n        code: ZodIssueCode.invalid_type,\n        expected: ZodParsedType.date,\n        received: ctx2.parsedType\n      });\n      return INVALID;\n    }\n    if (isNaN(input.data.getTime())) {\n      const ctx2 = this._getOrReturnCtx(input);\n      addIssueToContext(ctx2, {\n        code: ZodIssueCode.invalid_date\n      });\n      return INVALID;\n    }\n    const status = new ParseStatus();\n    let ctx = void 0;\n    for (const check of this._def.checks) {\n      if (check.kind === \"min\") {\n        if (input.data.getTime() < check.value) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            code: ZodIssueCode.too_small,\n            message: check.message,\n            inclusive: true,\n            exact: false,\n            minimum: check.value,\n            type: \"date\"\n          });\n          status.dirty();\n        }\n      } else if (check.kind === \"max\") {\n        if (input.data.getTime() > check.value) {\n          ctx = this._getOrReturnCtx(input, ctx);\n          addIssueToContext(ctx, {\n            code: ZodIssueCode.too_big,\n            message: check.message,\n            inclusive: true,\n            exact: false,\n            maximum: check.value,\n            type: \"date\"\n          });\n          status.dirty();\n        }\n      } else {\n        util.assertNever(check);\n      }\n    }\n    return {\n      status: status.value,\n      value: new Date(input.data.getTime())\n    };\n  }\n  _addCheck(check) {\n    return new _ZodDate({\n      ...this._def,\n      checks: [...this._def.checks, check]\n    });\n  }\n  min(minDate, message) {\n    return this._addCheck({\n      kind: \"min\",\n      value: minDate.getTime(),\n      message: errorUtil.toString(message)\n    });\n  }\n  max(maxDate, message) {\n    return this._addCheck({\n      kind: \"max\",\n      value: maxDate.getTime(),\n      message: errorUtil.toString(message)\n    });\n  }\n  get minDate() {\n    let min = null;\n    for (const ch of this._def.checks) {\n      if (ch.kind === \"min\") {\n        if (min === null || ch.value > min)\n          min = ch.value;\n      }\n    }\n    return min != null ? new Date(min) : null;\n  }\n  get maxDate() {\n    let max = null;\n    for (const ch of this._def.checks) {\n      if (ch.kind === \"max\") {\n        if (max === null || ch.value < max)\n          max = ch.value;\n      }\n    }\n    return max != null ? new Date(max) : null;\n  }\n};\nZodDate.create = (params) => {\n  return new ZodDate({\n    checks: [],\n    coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n    typeName: ZodFirstPartyTypeKind.ZodDate,\n    ...processCreateParams(params)\n  });\n};\nvar ZodSymbol = class extends ZodType {\n  _parse(input) {\n    const parsedType = this._getType(input);\n    if (parsedType !== ZodParsedType.symbol) {\n      const ctx = this._getOrReturnCtx(input);\n      addIssueToContext(ctx, {\n        code: ZodIssueCode.invalid_type,\n        expected: ZodParsedType.symbol,\n        received: ctx.parsedType\n      });\n      return INVALID;\n    }\n    return OK(input.data);\n  }\n};\nZodSymbol.create = (params) => {\n  return new ZodSymbol({\n    typeName: ZodFirstPartyTypeKind.ZodSymbol,\n    ...processCreateParams(params)\n  });\n};\nvar ZodUndefined = class extends ZodType {\n  _parse(input) {\n    const parsedType = this._getType(input);\n    if (parsedType !== ZodParsedType.undefined) {\n      const ctx = this._getOrReturnCtx(input);\n      addIssueToContext(ctx, {\n        code: ZodIssueCode.invalid_type,\n        expected: ZodParsedType.undefined,\n        received: ctx.parsedType\n      });\n      return INVALID;\n    }\n    return OK(input.data);\n  }\n};\nZodUndefined.create = (params) => {\n  return new ZodUndefined({\n    typeName: ZodFirstPartyTypeKind.ZodUndefined,\n    ...processCreateParams(params)\n  });\n};\nvar ZodNull = class extends ZodType {\n  _parse(input) {\n    const parsedType = this._getType(input);\n    if (parsedType !== ZodParsedType.null) {\n      const ctx = this._getOrReturnCtx(input);\n      addIssueToContext(ctx, {\n        code: ZodIssueCode.invalid_type,\n        expected: ZodParsedType.null,\n        received: ctx.parsedType\n      });\n      return INVALID;\n    }\n    return OK(input.data);\n  }\n};\nZodNull.create = (params) => {\n  return new ZodNull({\n    typeName: ZodFirstPartyTypeKind.ZodNull,\n    ...processCreateParams(params)\n  });\n};\nvar ZodAny = class extends ZodType {\n  constructor() {\n    super(...arguments);\n    this._any = true;\n  }\n  _parse(input) {\n    return OK(input.data);\n  }\n};\nZodAny.create = (params) => {\n  return new ZodAny({\n    typeName: ZodFirstPartyTypeKind.ZodAny,\n    ...processCreateParams(params)\n  });\n};\nvar ZodUnknown = class extends ZodType {\n  constructor() {\n    super(...arguments);\n    this._unknown = true;\n  }\n  _parse(input) {\n    return OK(input.data);\n  }\n};\nZodUnknown.create = (params) => {\n  return new ZodUnknown({\n    typeName: ZodFirstPartyTypeKind.ZodUnknown,\n    ...processCreateParams(params)\n  });\n};\nvar ZodNever = class extends ZodType {\n  _parse(input) {\n    const ctx = this._getOrReturnCtx(input);\n    addIssueToContext(ctx, {\n      code: ZodIssueCode.invalid_type,\n      expected: ZodParsedType.never,\n      received: ctx.parsedType\n    });\n    return INVALID;\n  }\n};\nZodNever.create = (params) => {\n  return new ZodNever({\n    typeName: ZodFirstPartyTypeKind.ZodNever,\n    ...processCreateParams(params)\n  });\n};\nvar ZodVoid = class extends ZodType {\n  _parse(input) {\n    const parsedType = this._getType(input);\n    if (parsedType !== ZodParsedType.undefined) {\n      const ctx = this._getOrReturnCtx(input);\n      addIssueToContext(ctx, {\n        code: ZodIssueCode.invalid_type,\n        expected: ZodParsedType.void,\n        received: ctx.parsedType\n      });\n      return INVALID;\n    }\n    return OK(input.data);\n  }\n};\nZodVoid.create = (params) => {\n  return new ZodVoid({\n    typeName: ZodFirstPartyTypeKind.ZodVoid,\n    ...processCreateParams(params)\n  });\n};\nvar ZodArray = class _ZodArray extends ZodType {\n  _parse(input) {\n    const { ctx, status } = this._processInputParams(input);\n    const def = this._def;\n    if (ctx.parsedType !== ZodParsedType.array) {\n      addIssueToContext(ctx, {\n        code: ZodIssueCode.invalid_type,\n        expected: ZodParsedType.array,\n        received: ctx.parsedType\n      });\n      return INVALID;\n    }\n    if (def.exactLength !== null) {\n      const tooBig = ctx.data.length > def.exactLength.value;\n      const tooSmall = ctx.data.length < def.exactLength.value;\n      if (tooBig || tooSmall) {\n        addIssueToContext(ctx, {\n          code: tooBig ? ZodIssueCode.too_big : ZodIssueCode.too_small,\n          minimum: tooSmall ? def.exactLength.value : void 0,\n          maximum: tooBig ? def.exactLength.value : void 0,\n          type: \"array\",\n          inclusive: true,\n          exact: true,\n          message: def.exactLength.message\n        });\n        status.dirty();\n      }\n    }\n    if (def.minLength !== null) {\n      if (ctx.data.length < def.minLength.value) {\n        addIssueToContext(ctx, {\n          code: ZodIssueCode.too_small,\n          minimum: def.minLength.value,\n          type: \"array\",\n          inclusive: true,\n          exact: false,\n          message: def.minLength.message\n        });\n        status.dirty();\n      }\n    }\n    if (def.maxLength !== null) {\n      if (ctx.data.length > def.maxLength.value) {\n        addIssueToContext(ctx, {\n          code: ZodIssueCode.too_big,\n          maximum: def.maxLength.value,\n          type: \"array\",\n          inclusive: true,\n          exact: false,\n          message: def.maxLength.message\n        });\n        status.dirty();\n      }\n    }\n    if (ctx.common.async) {\n      return Promise.all([...ctx.data].map((item, i) => {\n        return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n      })).then((result2) => {\n        return ParseStatus.mergeArray(status, result2);\n      });\n    }\n    const result = [...ctx.data].map((item, i) => {\n      return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n    });\n    return ParseStatus.mergeArray(status, result);\n  }\n  get element() {\n    return this._def.type;\n  }\n  min(minLength, message) {\n    return new _ZodArray({\n      ...this._def,\n      minLength: { value: minLength, message: errorUtil.toString(message) }\n    });\n  }\n  max(maxLength, message) {\n    return new _ZodArray({\n      ...this._def,\n      maxLength: { value: maxLength, message: errorUtil.toString(message) }\n    });\n  }\n  length(len, message) {\n    return new _ZodArray({\n      ...this._def,\n      exactLength: { value: len, message: errorUtil.toString(message) }\n    });\n  }\n  nonempty(message) {\n    return this.min(1, message);\n  }\n};\nZodArray.create = (schema, params) => {\n  return new ZodArray({\n    type: schema,\n    minLength: null,\n    maxLength: null,\n    exactLength: null,\n    typeName: ZodFirstPartyTypeKind.ZodArray,\n    ...processCreateParams(params)\n  });\n};\nfunction deepPartialify(schema) {\n  if (schema instanceof ZodObject) {\n    const newShape = {};\n    for (const key in schema.shape) {\n      const fieldSchema = schema.shape[key];\n      newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));\n    }\n    return new ZodObject({\n      ...schema._def,\n      shape: () => newShape\n    });\n  } else if (schema instanceof ZodArray) {\n    return new ZodArray({\n      ...schema._def,\n      type: deepPartialify(schema.element)\n    });\n  } else if (schema instanceof ZodOptional) {\n    return ZodOptional.create(deepPartialify(schema.unwrap()));\n  } else if (schema instanceof ZodNullable) {\n    return ZodNullable.create(deepPartialify(schema.unwrap()));\n  } else if (schema instanceof ZodTuple) {\n    return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));\n  } else {\n    return schema;\n  }\n}\nvar ZodObject = class _ZodObject extends ZodType {\n  constructor() {\n    super(...arguments);\n    this._cached = null;\n    this.nonstrict = this.passthrough;\n    this.augment = this.extend;\n  }\n  _getCached() {\n    if (this._cached !== null)\n      return this._cached;\n    const shape = this._def.shape();\n    const keys = util.objectKeys(shape);\n    return this._cached = { shape, keys };\n  }\n  _parse(input) {\n    const parsedType = this._getType(input);\n    if (parsedType !== ZodParsedType.object) {\n      const ctx2 = this._getOrReturnCtx(input);\n      addIssueToContext(ctx2, {\n        code: ZodIssueCode.invalid_type,\n        expected: ZodParsedType.object,\n        received: ctx2.parsedType\n      });\n      return INVALID;\n    }\n    const { status, ctx } = this._processInputParams(input);\n    const { shape, keys: shapeKeys } = this._getCached();\n    const extraKeys = [];\n    if (!(this._def.catchall instanceof ZodNever && this._def.unknownKeys === \"strip\")) {\n      for (const key in ctx.data) {\n        if (!shapeKeys.includes(key)) {\n          extraKeys.push(key);\n        }\n      }\n    }\n    const pairs = [];\n    for (const key of shapeKeys) {\n      const keyValidator = shape[key];\n      const value = ctx.data[key];\n      pairs.push({\n        key: { status: \"valid\", value: key },\n        value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),\n        alwaysSet: key in ctx.data\n      });\n    }\n    if (this._def.catchall instanceof ZodNever) {\n      const unknownKeys = this._def.unknownKeys;\n      if (unknownKeys === \"passthrough\") {\n        for (const key of extraKeys) {\n          pairs.push({\n            key: { status: \"valid\", value: key },\n            value: { status: \"valid\", value: ctx.data[key] }\n          });\n        }\n      } else if (unknownKeys === \"strict\") {\n        if (extraKeys.length > 0) {\n          addIssueToContext(ctx, {\n            code: ZodIssueCode.unrecognized_keys,\n            keys: extraKeys\n          });\n          status.dirty();\n        }\n      } else if (unknownKeys === \"strip\") ;\n      else {\n        throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);\n      }\n    } else {\n      const catchall = this._def.catchall;\n      for (const key of extraKeys) {\n        const value = ctx.data[key];\n        pairs.push({\n          key: { status: \"valid\", value: key },\n          value: catchall._parse(\n            new ParseInputLazyPath(ctx, value, ctx.path, key)\n            //, ctx.child(key), value, getParsedType(value)\n          ),\n          alwaysSet: key in ctx.data\n        });\n      }\n    }\n    if (ctx.common.async) {\n      return Promise.resolve().then(async () => {\n        const syncPairs = [];\n        for (const pair of pairs) {\n          const key = await pair.key;\n          const value = await pair.value;\n          syncPairs.push({\n            key,\n            value,\n            alwaysSet: pair.alwaysSet\n          });\n        }\n        return syncPairs;\n      }).then((syncPairs) => {\n        return ParseStatus.mergeObjectSync(status, syncPairs);\n      });\n    } else {\n      return ParseStatus.mergeObjectSync(status, pairs);\n    }\n  }\n  get shape() {\n    return this._def.shape();\n  }\n  strict(message) {\n    errorUtil.errToObj;\n    return new _ZodObject({\n      ...this._def,\n      unknownKeys: \"strict\",\n      ...message !== void 0 ? {\n        errorMap: (issue, ctx) => {\n          var _a, _b, _c, _d;\n          const defaultError = (_c = (_b = (_a = this._def).errorMap) === null || _b === void 0 ? void 0 : _b.call(_a, issue, ctx).message) !== null && _c !== void 0 ? _c : ctx.defaultError;\n          if (issue.code === \"unrecognized_keys\")\n            return {\n              message: (_d = errorUtil.errToObj(message).message) !== null && _d !== void 0 ? _d : defaultError\n            };\n          return {\n            message: defaultError\n          };\n        }\n      } : {}\n    });\n  }\n  strip() {\n    return new _ZodObject({\n      ...this._def,\n      unknownKeys: \"strip\"\n    });\n  }\n  passthrough() {\n    return new _ZodObject({\n      ...this._def,\n      unknownKeys: \"passthrough\"\n    });\n  }\n  // const AugmentFactory =\n  //   <Def extends ZodObjectDef>(def: Def) =>\n  //   <Augmentation extends ZodRawShape>(\n  //     augmentation: Augmentation\n  //   ): ZodObject<\n  //     extendShape<ReturnType<Def[\"shape\"]>, Augmentation>,\n  //     Def[\"unknownKeys\"],\n  //     Def[\"catchall\"]\n  //   > => {\n  //     return new ZodObject({\n  //       ...def,\n  //       shape: () => ({\n  //         ...def.shape(),\n  //         ...augmentation,\n  //       }),\n  //     }) as any;\n  //   };\n  extend(augmentation) {\n    return new _ZodObject({\n      ...this._def,\n      shape: () => ({\n        ...this._def.shape(),\n        ...augmentation\n      })\n    });\n  }\n  /**\n   * Prior to zod@1.0.12 there was a bug in the\n   * inferred type of merged objects. Please\n   * upgrade if you are experiencing issues.\n   */\n  merge(merging) {\n    const merged = new _ZodObject({\n      unknownKeys: merging._def.unknownKeys,\n      catchall: merging._def.catchall,\n      shape: () => ({\n        ...this._def.shape(),\n        ...merging._def.shape()\n      }),\n      typeName: ZodFirstPartyTypeKind.ZodObject\n    });\n    return merged;\n  }\n  // merge<\n  //   Incoming extends AnyZodObject,\n  //   Augmentation extends Incoming[\"shape\"],\n  //   NewOutput extends {\n  //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n  //       ? Augmentation[k][\"_output\"]\n  //       : k extends keyof Output\n  //       ? Output[k]\n  //       : never;\n  //   },\n  //   NewInput extends {\n  //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n  //       ? Augmentation[k][\"_input\"]\n  //       : k extends keyof Input\n  //       ? Input[k]\n  //       : never;\n  //   }\n  // >(\n  //   merging: Incoming\n  // ): ZodObject<\n  //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n  //   Incoming[\"_def\"][\"unknownKeys\"],\n  //   Incoming[\"_def\"][\"catchall\"],\n  //   NewOutput,\n  //   NewInput\n  // > {\n  //   const merged: any = new ZodObject({\n  //     unknownKeys: merging._def.unknownKeys,\n  //     catchall: merging._def.catchall,\n  //     shape: () =>\n  //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n  //     typeName: ZodFirstPartyTypeKind.ZodObject,\n  //   }) as any;\n  //   return merged;\n  // }\n  setKey(key, schema) {\n    return this.augment({ [key]: schema });\n  }\n  // merge<Incoming extends AnyZodObject>(\n  //   merging: Incoming\n  // ): //ZodObject<T & Incoming[\"_shape\"], UnknownKeys, Catchall> = (merging) => {\n  // ZodObject<\n  //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n  //   Incoming[\"_def\"][\"unknownKeys\"],\n  //   Incoming[\"_def\"][\"catchall\"]\n  // > {\n  //   // const mergedShape = objectUtil.mergeShapes(\n  //   //   this._def.shape(),\n  //   //   merging._def.shape()\n  //   // );\n  //   const merged: any = new ZodObject({\n  //     unknownKeys: merging._def.unknownKeys,\n  //     catchall: merging._def.catchall,\n  //     shape: () =>\n  //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n  //     typeName: ZodFirstPartyTypeKind.ZodObject,\n  //   }) as any;\n  //   return merged;\n  // }\n  catchall(index) {\n    return new _ZodObject({\n      ...this._def,\n      catchall: index\n    });\n  }\n  pick(mask) {\n    const shape = {};\n    util.objectKeys(mask).forEach((key) => {\n      if (mask[key] && this.shape[key]) {\n        shape[key] = this.shape[key];\n      }\n    });\n    return new _ZodObject({\n      ...this._def,\n      shape: () => shape\n    });\n  }\n  omit(mask) {\n    const shape = {};\n    util.objectKeys(this.shape).forEach((key) => {\n      if (!mask[key]) {\n        shape[key] = this.shape[key];\n      }\n    });\n    return new _ZodObject({\n      ...this._def,\n      shape: () => shape\n    });\n  }\n  /**\n   * @deprecated\n   */\n  deepPartial() {\n    return deepPartialify(this);\n  }\n  partial(mask) {\n    const newShape = {};\n    util.objectKeys(this.shape).forEach((key) => {\n      const fieldSchema = this.shape[key];\n      if (mask && !mask[key]) {\n        newShape[key] = fieldSchema;\n      } else {\n        newShape[key] = fieldSchema.optional();\n      }\n    });\n    return new _ZodObject({\n      ...this._def,\n      shape: () => newShape\n    });\n  }\n  required(mask) {\n    const newShape = {};\n    util.objectKeys(this.shape).forEach((key) => {\n      if (mask && !mask[key]) {\n        newShape[key] = this.shape[key];\n      } else {\n        const fieldSchema = this.shape[key];\n        let newField = fieldSchema;\n        while (newField instanceof ZodOptional) {\n          newField = newField._def.innerType;\n        }\n        newShape[key] = newField;\n      }\n    });\n    return new _ZodObject({\n      ...this._def,\n      shape: () => newShape\n    });\n  }\n  keyof() {\n    return createZodEnum(util.objectKeys(this.shape));\n  }\n};\nZodObject.create = (shape, params) => {\n  return new ZodObject({\n    shape: () => shape,\n    unknownKeys: \"strip\",\n    catchall: ZodNever.create(),\n    typeName: ZodFirstPartyTypeKind.ZodObject,\n    ...processCreateParams(params)\n  });\n};\nZodObject.strictCreate = (shape, params) => {\n  return new ZodObject({\n    shape: () => shape,\n    unknownKeys: \"strict\",\n    catchall: ZodNever.create(),\n    typeName: ZodFirstPartyTypeKind.ZodObject,\n    ...processCreateParams(params)\n  });\n};\nZodObject.lazycreate = (shape, params) => {\n  return new ZodObject({\n    shape,\n    unknownKeys: \"strip\",\n    catchall: ZodNever.create(),\n    typeName: ZodFirstPartyTypeKind.ZodObject,\n    ...processCreateParams(params)\n  });\n};\nvar ZodUnion = class extends ZodType {\n  _parse(input) {\n    const { ctx } = this._processInputParams(input);\n    const options = this._def.options;\n    function handleResults(results) {\n      for (const result of results) {\n        if (result.result.status === \"valid\") {\n          return result.result;\n        }\n      }\n      for (const result of results) {\n        if (result.result.status === \"dirty\") {\n          ctx.common.issues.push(...result.ctx.common.issues);\n          return result.result;\n        }\n      }\n      const unionErrors = results.map((result) => new ZodError(result.ctx.common.issues));\n      addIssueToContext(ctx, {\n        code: ZodIssueCode.invalid_union,\n        unionErrors\n      });\n      return INVALID;\n    }\n    if (ctx.common.async) {\n      return Promise.all(options.map(async (option) => {\n        const childCtx = {\n          ...ctx,\n          common: {\n            ...ctx.common,\n            issues: []\n          },\n          parent: null\n        };\n        return {\n          result: await option._parseAsync({\n            data: ctx.data,\n            path: ctx.path,\n            parent: childCtx\n          }),\n          ctx: childCtx\n        };\n      })).then(handleResults);\n    } else {\n      let dirty = void 0;\n      const issues = [];\n      for (const option of options) {\n        const childCtx = {\n          ...ctx,\n          common: {\n            ...ctx.common,\n            issues: []\n          },\n          parent: null\n        };\n        const result = option._parseSync({\n          data: ctx.data,\n          path: ctx.path,\n          parent: childCtx\n        });\n        if (result.status === \"valid\") {\n          return result;\n        } else if (result.status === \"dirty\" && !dirty) {\n          dirty = { result, ctx: childCtx };\n        }\n        if (childCtx.common.issues.length) {\n          issues.push(childCtx.common.issues);\n        }\n      }\n      if (dirty) {\n        ctx.common.issues.push(...dirty.ctx.common.issues);\n        return dirty.result;\n      }\n      const unionErrors = issues.map((issues2) => new ZodError(issues2));\n      addIssueToContext(ctx, {\n        code: ZodIssueCode.invalid_union,\n        unionErrors\n      });\n      return INVALID;\n    }\n  }\n  get options() {\n    return this._def.options;\n  }\n};\nZodUnion.create = (types, params) => {\n  return new ZodUnion({\n    options: types,\n    typeName: ZodFirstPartyTypeKind.ZodUnion,\n    ...processCreateParams(params)\n  });\n};\nvar getDiscriminator = (type) => {\n  if (type instanceof ZodLazy) {\n    return getDiscriminator(type.schema);\n  } else if (type instanceof ZodEffects) {\n    return getDiscriminator(type.innerType());\n  } else if (type instanceof ZodLiteral) {\n    return [type.value];\n  } else if (type instanceof ZodEnum) {\n    return type.options;\n  } else if (type instanceof ZodNativeEnum) {\n    return util.objectValues(type.enum);\n  } else if (type instanceof ZodDefault) {\n    return getDiscriminator(type._def.innerType);\n  } else if (type instanceof ZodUndefined) {\n    return [void 0];\n  } else if (type instanceof ZodNull) {\n    return [null];\n  } else if (type instanceof ZodOptional) {\n    return [void 0, ...getDiscriminator(type.unwrap())];\n  } else if (type instanceof ZodNullable) {\n    return [null, ...getDiscriminator(type.unwrap())];\n  } else if (type instanceof ZodBranded) {\n    return getDiscriminator(type.unwrap());\n  } else if (type instanceof ZodReadonly) {\n    return getDiscriminator(type.unwrap());\n  } else if (type instanceof ZodCatch) {\n    return getDiscriminator(type._def.innerType);\n  } else {\n    return [];\n  }\n};\nvar ZodDiscriminatedUnion = class _ZodDiscriminatedUnion extends ZodType {\n  _parse(input) {\n    const { ctx } = this._processInputParams(input);\n    if (ctx.parsedType !== ZodParsedType.object) {\n      addIssueToContext(ctx, {\n        code: ZodIssueCode.invalid_type,\n        expected: ZodParsedType.object,\n        received: ctx.parsedType\n      });\n      return INVALID;\n    }\n    const discriminator = this.discriminator;\n    const discriminatorValue = ctx.data[discriminator];\n    const option = this.optionsMap.get(discriminatorValue);\n    if (!option) {\n      addIssueToContext(ctx, {\n        code: ZodIssueCode.invalid_union_discriminator,\n        options: Array.from(this.optionsMap.keys()),\n        path: [discriminator]\n      });\n      return INVALID;\n    }\n    if (ctx.common.async) {\n      return option._parseAsync({\n        data: ctx.data,\n        path: ctx.path,\n        parent: ctx\n      });\n    } else {\n      return option._parseSync({\n        data: ctx.data,\n        path: ctx.path,\n        parent: ctx\n      });\n    }\n  }\n  get discriminator() {\n    return this._def.discriminator;\n  }\n  get options() {\n    return this._def.options;\n  }\n  get optionsMap() {\n    return this._def.optionsMap;\n  }\n  /**\n   * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.\n   * However, it only allows a union of objects, all of which need to share a discriminator property. This property must\n   * have a different value for each object in the union.\n   * @param discriminator the name of the discriminator property\n   * @param types an array of object schemas\n   * @param params\n   */\n  static create(discriminator, options, params) {\n    const optionsMap = /* @__PURE__ */ new Map();\n    for (const type of options) {\n      const discriminatorValues = getDiscriminator(type.shape[discriminator]);\n      if (!discriminatorValues.length) {\n        throw new Error(`A discriminator value for key \\`${discriminator}\\` could not be extracted from all schema options`);\n      }\n      for (const value of discriminatorValues) {\n        if (optionsMap.has(value)) {\n          throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);\n        }\n        optionsMap.set(value, type);\n      }\n    }\n    return new _ZodDiscriminatedUnion({\n      typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,\n      discriminator,\n      options,\n      optionsMap,\n      ...processCreateParams(params)\n    });\n  }\n};\nfunction mergeValues(a, b) {\n  const aType = getParsedType(a);\n  const bType = getParsedType(b);\n  if (a === b) {\n    return { valid: true, data: a };\n  } else if (aType === ZodParsedType.object && bType === ZodParsedType.object) {\n    const bKeys = util.objectKeys(b);\n    const sharedKeys = util.objectKeys(a).filter((key) => bKeys.indexOf(key) !== -1);\n    const newObj = { ...a, ...b };\n    for (const key of sharedKeys) {\n      const sharedValue = mergeValues(a[key], b[key]);\n      if (!sharedValue.valid) {\n        return { valid: false };\n      }\n      newObj[key] = sharedValue.data;\n    }\n    return { valid: true, data: newObj };\n  } else if (aType === ZodParsedType.array && bType === ZodParsedType.array) {\n    if (a.length !== b.length) {\n      return { valid: false };\n    }\n    const newArray = [];\n    for (let index = 0; index < a.length; index++) {\n      const itemA = a[index];\n      const itemB = b[index];\n      const sharedValue = mergeValues(itemA, itemB);\n      if (!sharedValue.valid) {\n        return { valid: false };\n      }\n      newArray.push(sharedValue.data);\n    }\n    return { valid: true, data: newArray };\n  } else if (aType === ZodParsedType.date && bType === ZodParsedType.date && +a === +b) {\n    return { valid: true, data: a };\n  } else {\n    return { valid: false };\n  }\n}\nvar ZodIntersection = class extends ZodType {\n  _parse(input) {\n    const { status, ctx } = this._processInputParams(input);\n    const handleParsed = (parsedLeft, parsedRight) => {\n      if (isAborted(parsedLeft) || isAborted(parsedRight)) {\n        return INVALID;\n      }\n      const merged = mergeValues(parsedLeft.value, parsedRight.value);\n      if (!merged.valid) {\n        addIssueToContext(ctx, {\n          code: ZodIssueCode.invalid_intersection_types\n        });\n        return INVALID;\n      }\n      if (isDirty(parsedLeft) || isDirty(parsedRight)) {\n        status.dirty();\n      }\n      return { status: status.value, value: merged.data };\n    };\n    if (ctx.common.async) {\n      return Promise.all([\n        this._def.left._parseAsync({\n          data: ctx.data,\n          path: ctx.path,\n          parent: ctx\n        }),\n        this._def.right._parseAsync({\n          data: ctx.data,\n          path: ctx.path,\n          parent: ctx\n        })\n      ]).then(([left, right]) => handleParsed(left, right));\n    } else {\n      return handleParsed(this._def.left._parseSync({\n        data: ctx.data,\n        path: ctx.path,\n        parent: ctx\n      }), this._def.right._parseSync({\n        data: ctx.data,\n        path: ctx.path,\n        parent: ctx\n      }));\n    }\n  }\n};\nZodIntersection.create = (left, right, params) => {\n  return new ZodIntersection({\n    left,\n    right,\n    typeName: ZodFirstPartyTypeKind.ZodIntersection,\n    ...processCreateParams(params)\n  });\n};\nvar ZodTuple = class _ZodTuple extends ZodType {\n  _parse(input) {\n    const { status, ctx } = this._processInputParams(input);\n    if (ctx.parsedType !== ZodParsedType.array) {\n      addIssueToContext(ctx, {\n        code: ZodIssueCode.invalid_type,\n        expected: ZodParsedType.array,\n        received: ctx.parsedType\n      });\n      return INVALID;\n    }\n    if (ctx.data.length < this._def.items.length) {\n      addIssueToContext(ctx, {\n        code: ZodIssueCode.too_small,\n        minimum: this._def.items.length,\n        inclusive: true,\n        exact: false,\n        type: \"array\"\n      });\n      return INVALID;\n    }\n    const rest = this._def.rest;\n    if (!rest && ctx.data.length > this._def.items.length) {\n      addIssueToContext(ctx, {\n        code: ZodIssueCode.too_big,\n        maximum: this._def.items.length,\n        inclusive: true,\n        exact: false,\n        type: \"array\"\n      });\n      status.dirty();\n    }\n    const items = [...ctx.data].map((item, itemIndex) => {\n      const schema = this._def.items[itemIndex] || this._def.rest;\n      if (!schema)\n        return null;\n      return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));\n    }).filter((x) => !!x);\n    if (ctx.common.async) {\n      return Promise.all(items).then((results) => {\n        return ParseStatus.mergeArray(status, results);\n      });\n    } else {\n      return ParseStatus.mergeArray(status, items);\n    }\n  }\n  get items() {\n    return this._def.items;\n  }\n  rest(rest) {\n    return new _ZodTuple({\n      ...this._def,\n      rest\n    });\n  }\n};\nZodTuple.create = (schemas, params) => {\n  if (!Array.isArray(schemas)) {\n    throw new Error(\"You must pass an array of schemas to z.tuple([ ... ])\");\n  }\n  return new ZodTuple({\n    items: schemas,\n    typeName: ZodFirstPartyTypeKind.ZodTuple,\n    rest: null,\n    ...processCreateParams(params)\n  });\n};\nvar ZodRecord = class _ZodRecord extends ZodType {\n  get keySchema() {\n    return this._def.keyType;\n  }\n  get valueSchema() {\n    return this._def.valueType;\n  }\n  _parse(input) {\n    const { status, ctx } = this._processInputParams(input);\n    if (ctx.parsedType !== ZodParsedType.object) {\n      addIssueToContext(ctx, {\n        code: ZodIssueCode.invalid_type,\n        expected: ZodParsedType.object,\n        received: ctx.parsedType\n      });\n      return INVALID;\n    }\n    const pairs = [];\n    const keyType = this._def.keyType;\n    const valueType = this._def.valueType;\n    for (const key in ctx.data) {\n      pairs.push({\n        key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),\n        value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key)),\n        alwaysSet: key in ctx.data\n      });\n    }\n    if (ctx.common.async) {\n      return ParseStatus.mergeObjectAsync(status, pairs);\n    } else {\n      return ParseStatus.mergeObjectSync(status, pairs);\n    }\n  }\n  get element() {\n    return this._def.valueType;\n  }\n  static create(first, second, third) {\n    if (second instanceof ZodType) {\n      return new _ZodRecord({\n        keyType: first,\n        valueType: second,\n        typeName: ZodFirstPartyTypeKind.ZodRecord,\n        ...processCreateParams(third)\n      });\n    }\n    return new _ZodRecord({\n      keyType: ZodString.create(),\n      valueType: first,\n      typeName: ZodFirstPartyTypeKind.ZodRecord,\n      ...processCreateParams(second)\n    });\n  }\n};\nvar ZodMap = class extends ZodType {\n  get keySchema() {\n    return this._def.keyType;\n  }\n  get valueSchema() {\n    return this._def.valueType;\n  }\n  _parse(input) {\n    const { status, ctx } = this._processInputParams(input);\n    if (ctx.parsedType !== ZodParsedType.map) {\n      addIssueToContext(ctx, {\n        code: ZodIssueCode.invalid_type,\n        expected: ZodParsedType.map,\n        received: ctx.parsedType\n      });\n      return INVALID;\n    }\n    const keyType = this._def.keyType;\n    const valueType = this._def.valueType;\n    const pairs = [...ctx.data.entries()].map(([key, value], index) => {\n      return {\n        key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index, \"key\"])),\n        value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index, \"value\"]))\n      };\n    });\n    if (ctx.common.async) {\n      const finalMap = /* @__PURE__ */ new Map();\n      return Promise.resolve().then(async () => {\n        for (const pair of pairs) {\n          const key = await pair.key;\n          const value = await pair.value;\n          if (key.status === \"aborted\" || value.status === \"aborted\") {\n            return INVALID;\n          }\n          if (key.status === \"dirty\" || value.status === \"dirty\") {\n            status.dirty();\n          }\n          finalMap.set(key.value, value.value);\n        }\n        return { status: status.value, value: finalMap };\n      });\n    } else {\n      const finalMap = /* @__PURE__ */ new Map();\n      for (const pair of pairs) {\n        const key = pair.key;\n        const value = pair.value;\n        if (key.status === \"aborted\" || value.status === \"aborted\") {\n          return INVALID;\n        }\n        if (key.status === \"dirty\" || value.status === \"dirty\") {\n          status.dirty();\n        }\n        finalMap.set(key.value, value.value);\n      }\n      return { status: status.value, value: finalMap };\n    }\n  }\n};\nZodMap.create = (keyType, valueType, params) => {\n  return new ZodMap({\n    valueType,\n    keyType,\n    typeName: ZodFirstPartyTypeKind.ZodMap,\n    ...processCreateParams(params)\n  });\n};\nvar ZodSet = class _ZodSet extends ZodType {\n  _parse(input) {\n    const { status, ctx } = this._processInputParams(input);\n    if (ctx.parsedType !== ZodParsedType.set) {\n      addIssueToContext(ctx, {\n        code: ZodIssueCode.invalid_type,\n        expected: ZodParsedType.set,\n        received: ctx.parsedType\n      });\n      return INVALID;\n    }\n    const def = this._def;\n    if (def.minSize !== null) {\n      if (ctx.data.size < def.minSize.value) {\n        addIssueToContext(ctx, {\n          code: ZodIssueCode.too_small,\n          minimum: def.minSize.value,\n          type: \"set\",\n          inclusive: true,\n          exact: false,\n          message: def.minSize.message\n        });\n        status.dirty();\n      }\n    }\n    if (def.maxSize !== null) {\n      if (ctx.data.size > def.maxSize.value) {\n        addIssueToContext(ctx, {\n          code: ZodIssueCode.too_big,\n          maximum: def.maxSize.value,\n          type: \"set\",\n          inclusive: true,\n          exact: false,\n          message: def.maxSize.message\n        });\n        status.dirty();\n      }\n    }\n    const valueType = this._def.valueType;\n    function finalizeSet(elements2) {\n      const parsedSet = /* @__PURE__ */ new Set();\n      for (const element of elements2) {\n        if (element.status === \"aborted\")\n          return INVALID;\n        if (element.status === \"dirty\")\n          status.dirty();\n        parsedSet.add(element.value);\n      }\n      return { status: status.value, value: parsedSet };\n    }\n    const elements = [...ctx.data.values()].map((item, i) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i)));\n    if (ctx.common.async) {\n      return Promise.all(elements).then((elements2) => finalizeSet(elements2));\n    } else {\n      return finalizeSet(elements);\n    }\n  }\n  min(minSize, message) {\n    return new _ZodSet({\n      ...this._def,\n      minSize: { value: minSize, message: errorUtil.toString(message) }\n    });\n  }\n  max(maxSize, message) {\n    return new _ZodSet({\n      ...this._def,\n      maxSize: { value: maxSize, message: errorUtil.toString(message) }\n    });\n  }\n  size(size, message) {\n    return this.min(size, message).max(size, message);\n  }\n  nonempty(message) {\n    return this.min(1, message);\n  }\n};\nZodSet.create = (valueType, params) => {\n  return new ZodSet({\n    valueType,\n    minSize: null,\n    maxSize: null,\n    typeName: ZodFirstPartyTypeKind.ZodSet,\n    ...processCreateParams(params)\n  });\n};\nvar ZodFunction = class _ZodFunction extends ZodType {\n  constructor() {\n    super(...arguments);\n    this.validate = this.implement;\n  }\n  _parse(input) {\n    const { ctx } = this._processInputParams(input);\n    if (ctx.parsedType !== ZodParsedType.function) {\n      addIssueToContext(ctx, {\n        code: ZodIssueCode.invalid_type,\n        expected: ZodParsedType.function,\n        received: ctx.parsedType\n      });\n      return INVALID;\n    }\n    function makeArgsIssue(args, error) {\n      return makeIssue({\n        data: args,\n        path: ctx.path,\n        errorMaps: [\n          ctx.common.contextualErrorMap,\n          ctx.schemaErrorMap,\n          getErrorMap(),\n          errorMap\n        ].filter((x) => !!x),\n        issueData: {\n          code: ZodIssueCode.invalid_arguments,\n          argumentsError: error\n        }\n      });\n    }\n    function makeReturnsIssue(returns, error) {\n      return makeIssue({\n        data: returns,\n        path: ctx.path,\n        errorMaps: [\n          ctx.common.contextualErrorMap,\n          ctx.schemaErrorMap,\n          getErrorMap(),\n          errorMap\n        ].filter((x) => !!x),\n        issueData: {\n          code: ZodIssueCode.invalid_return_type,\n          returnTypeError: error\n        }\n      });\n    }\n    const params = { errorMap: ctx.common.contextualErrorMap };\n    const fn = ctx.data;\n    if (this._def.returns instanceof ZodPromise) {\n      const me = this;\n      return OK(async function(...args) {\n        const error = new ZodError([]);\n        const parsedArgs = await me._def.args.parseAsync(args, params).catch((e) => {\n          error.addIssue(makeArgsIssue(args, e));\n          throw error;\n        });\n        const result = await Reflect.apply(fn, this, parsedArgs);\n        const parsedReturns = await me._def.returns._def.type.parseAsync(result, params).catch((e) => {\n          error.addIssue(makeReturnsIssue(result, e));\n          throw error;\n        });\n        return parsedReturns;\n      });\n    } else {\n      const me = this;\n      return OK(function(...args) {\n        const parsedArgs = me._def.args.safeParse(args, params);\n        if (!parsedArgs.success) {\n          throw new ZodError([makeArgsIssue(args, parsedArgs.error)]);\n        }\n        const result = Reflect.apply(fn, this, parsedArgs.data);\n        const parsedReturns = me._def.returns.safeParse(result, params);\n        if (!parsedReturns.success) {\n          throw new ZodError([makeReturnsIssue(result, parsedReturns.error)]);\n        }\n        return parsedReturns.data;\n      });\n    }\n  }\n  parameters() {\n    return this._def.args;\n  }\n  returnType() {\n    return this._def.returns;\n  }\n  args(...items) {\n    return new _ZodFunction({\n      ...this._def,\n      args: ZodTuple.create(items).rest(ZodUnknown.create())\n    });\n  }\n  returns(returnType) {\n    return new _ZodFunction({\n      ...this._def,\n      returns: returnType\n    });\n  }\n  implement(func) {\n    const validatedFunc = this.parse(func);\n    return validatedFunc;\n  }\n  strictImplement(func) {\n    const validatedFunc = this.parse(func);\n    return validatedFunc;\n  }\n  static create(args, returns, params) {\n    return new _ZodFunction({\n      args: args ? args : ZodTuple.create([]).rest(ZodUnknown.create()),\n      returns: returns || ZodUnknown.create(),\n      typeName: ZodFirstPartyTypeKind.ZodFunction,\n      ...processCreateParams(params)\n    });\n  }\n};\nvar ZodLazy = class extends ZodType {\n  get schema() {\n    return this._def.getter();\n  }\n  _parse(input) {\n    const { ctx } = this._processInputParams(input);\n    const lazySchema = this._def.getter();\n    return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });\n  }\n};\nZodLazy.create = (getter, params) => {\n  return new ZodLazy({\n    getter,\n    typeName: ZodFirstPartyTypeKind.ZodLazy,\n    ...processCreateParams(params)\n  });\n};\nvar ZodLiteral = class extends ZodType {\n  _parse(input) {\n    if (input.data !== this._def.value) {\n      const ctx = this._getOrReturnCtx(input);\n      addIssueToContext(ctx, {\n        received: ctx.data,\n        code: ZodIssueCode.invalid_literal,\n        expected: this._def.value\n      });\n      return INVALID;\n    }\n    return { status: \"valid\", value: input.data };\n  }\n  get value() {\n    return this._def.value;\n  }\n};\nZodLiteral.create = (value, params) => {\n  return new ZodLiteral({\n    value,\n    typeName: ZodFirstPartyTypeKind.ZodLiteral,\n    ...processCreateParams(params)\n  });\n};\nfunction createZodEnum(values, params) {\n  return new ZodEnum({\n    values,\n    typeName: ZodFirstPartyTypeKind.ZodEnum,\n    ...processCreateParams(params)\n  });\n}\nvar ZodEnum = class _ZodEnum extends ZodType {\n  constructor() {\n    super(...arguments);\n    _ZodEnum_cache.set(this, void 0);\n  }\n  _parse(input) {\n    if (typeof input.data !== \"string\") {\n      const ctx = this._getOrReturnCtx(input);\n      const expectedValues = this._def.values;\n      addIssueToContext(ctx, {\n        expected: util.joinValues(expectedValues),\n        received: ctx.parsedType,\n        code: ZodIssueCode.invalid_type\n      });\n      return INVALID;\n    }\n    if (!__classPrivateFieldGet(this, _ZodEnum_cache, \"f\")) {\n      __classPrivateFieldSet(this, _ZodEnum_cache, new Set(this._def.values), \"f\");\n    }\n    if (!__classPrivateFieldGet(this, _ZodEnum_cache, \"f\").has(input.data)) {\n      const ctx = this._getOrReturnCtx(input);\n      const expectedValues = this._def.values;\n      addIssueToContext(ctx, {\n        received: ctx.data,\n        code: ZodIssueCode.invalid_enum_value,\n        options: expectedValues\n      });\n      return INVALID;\n    }\n    return OK(input.data);\n  }\n  get options() {\n    return this._def.values;\n  }\n  get enum() {\n    const enumValues = {};\n    for (const val of this._def.values) {\n      enumValues[val] = val;\n    }\n    return enumValues;\n  }\n  get Values() {\n    const enumValues = {};\n    for (const val of this._def.values) {\n      enumValues[val] = val;\n    }\n    return enumValues;\n  }\n  get Enum() {\n    const enumValues = {};\n    for (const val of this._def.values) {\n      enumValues[val] = val;\n    }\n    return enumValues;\n  }\n  extract(values, newDef = this._def) {\n    return _ZodEnum.create(values, {\n      ...this._def,\n      ...newDef\n    });\n  }\n  exclude(values, newDef = this._def) {\n    return _ZodEnum.create(this.options.filter((opt) => !values.includes(opt)), {\n      ...this._def,\n      ...newDef\n    });\n  }\n};\n_ZodEnum_cache = /* @__PURE__ */ new WeakMap();\nZodEnum.create = createZodEnum;\nvar ZodNativeEnum = class extends ZodType {\n  constructor() {\n    super(...arguments);\n    _ZodNativeEnum_cache.set(this, void 0);\n  }\n  _parse(input) {\n    const nativeEnumValues = util.getValidEnumValues(this._def.values);\n    const ctx = this._getOrReturnCtx(input);\n    if (ctx.parsedType !== ZodParsedType.string && ctx.parsedType !== ZodParsedType.number) {\n      const expectedValues = util.objectValues(nativeEnumValues);\n      addIssueToContext(ctx, {\n        expected: util.joinValues(expectedValues),\n        received: ctx.parsedType,\n        code: ZodIssueCode.invalid_type\n      });\n      return INVALID;\n    }\n    if (!__classPrivateFieldGet(this, _ZodNativeEnum_cache, \"f\")) {\n      __classPrivateFieldSet(this, _ZodNativeEnum_cache, new Set(util.getValidEnumValues(this._def.values)), \"f\");\n    }\n    if (!__classPrivateFieldGet(this, _ZodNativeEnum_cache, \"f\").has(input.data)) {\n      const expectedValues = util.objectValues(nativeEnumValues);\n      addIssueToContext(ctx, {\n        received: ctx.data,\n        code: ZodIssueCode.invalid_enum_value,\n        options: expectedValues\n      });\n      return INVALID;\n    }\n    return OK(input.data);\n  }\n  get enum() {\n    return this._def.values;\n  }\n};\n_ZodNativeEnum_cache = /* @__PURE__ */ new WeakMap();\nZodNativeEnum.create = (values, params) => {\n  return new ZodNativeEnum({\n    values,\n    typeName: ZodFirstPartyTypeKind.ZodNativeEnum,\n    ...processCreateParams(params)\n  });\n};\nvar ZodPromise = class extends ZodType {\n  unwrap() {\n    return this._def.type;\n  }\n  _parse(input) {\n    const { ctx } = this._processInputParams(input);\n    if (ctx.parsedType !== ZodParsedType.promise && ctx.common.async === false) {\n      addIssueToContext(ctx, {\n        code: ZodIssueCode.invalid_type,\n        expected: ZodParsedType.promise,\n        received: ctx.parsedType\n      });\n      return INVALID;\n    }\n    const promisified = ctx.parsedType === ZodParsedType.promise ? ctx.data : Promise.resolve(ctx.data);\n    return OK(promisified.then((data) => {\n      return this._def.type.parseAsync(data, {\n        path: ctx.path,\n        errorMap: ctx.common.contextualErrorMap\n      });\n    }));\n  }\n};\nZodPromise.create = (schema, params) => {\n  return new ZodPromise({\n    type: schema,\n    typeName: ZodFirstPartyTypeKind.ZodPromise,\n    ...processCreateParams(params)\n  });\n};\nvar ZodEffects = class extends ZodType {\n  innerType() {\n    return this._def.schema;\n  }\n  sourceType() {\n    return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects ? this._def.schema.sourceType() : this._def.schema;\n  }\n  _parse(input) {\n    const { status, ctx } = this._processInputParams(input);\n    const effect = this._def.effect || null;\n    const checkCtx = {\n      addIssue: (arg) => {\n        addIssueToContext(ctx, arg);\n        if (arg.fatal) {\n          status.abort();\n        } else {\n          status.dirty();\n        }\n      },\n      get path() {\n        return ctx.path;\n      }\n    };\n    checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);\n    if (effect.type === \"preprocess\") {\n      const processed = effect.transform(ctx.data, checkCtx);\n      if (ctx.common.async) {\n        return Promise.resolve(processed).then(async (processed2) => {\n          if (status.value === \"aborted\")\n            return INVALID;\n          const result = await this._def.schema._parseAsync({\n            data: processed2,\n            path: ctx.path,\n            parent: ctx\n          });\n          if (result.status === \"aborted\")\n            return INVALID;\n          if (result.status === \"dirty\")\n            return DIRTY(result.value);\n          if (status.value === \"dirty\")\n            return DIRTY(result.value);\n          return result;\n        });\n      } else {\n        if (status.value === \"aborted\")\n          return INVALID;\n        const result = this._def.schema._parseSync({\n          data: processed,\n          path: ctx.path,\n          parent: ctx\n        });\n        if (result.status === \"aborted\")\n          return INVALID;\n        if (result.status === \"dirty\")\n          return DIRTY(result.value);\n        if (status.value === \"dirty\")\n          return DIRTY(result.value);\n        return result;\n      }\n    }\n    if (effect.type === \"refinement\") {\n      const executeRefinement = (acc) => {\n        const result = effect.refinement(acc, checkCtx);\n        if (ctx.common.async) {\n          return Promise.resolve(result);\n        }\n        if (result instanceof Promise) {\n          throw new Error(\"Async refinement encountered during synchronous parse operation. Use .parseAsync instead.\");\n        }\n        return acc;\n      };\n      if (ctx.common.async === false) {\n        const inner = this._def.schema._parseSync({\n          data: ctx.data,\n          path: ctx.path,\n          parent: ctx\n        });\n        if (inner.status === \"aborted\")\n          return INVALID;\n        if (inner.status === \"dirty\")\n          status.dirty();\n        executeRefinement(inner.value);\n        return { status: status.value, value: inner.value };\n      } else {\n        return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((inner) => {\n          if (inner.status === \"aborted\")\n            return INVALID;\n          if (inner.status === \"dirty\")\n            status.dirty();\n          return executeRefinement(inner.value).then(() => {\n            return { status: status.value, value: inner.value };\n          });\n        });\n      }\n    }\n    if (effect.type === \"transform\") {\n      if (ctx.common.async === false) {\n        const base = this._def.schema._parseSync({\n          data: ctx.data,\n          path: ctx.path,\n          parent: ctx\n        });\n        if (!isValid(base))\n          return base;\n        const result = effect.transform(base.value, checkCtx);\n        if (result instanceof Promise) {\n          throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);\n        }\n        return { status: status.value, value: result };\n      } else {\n        return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((base) => {\n          if (!isValid(base))\n            return base;\n          return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({ status: status.value, value: result }));\n        });\n      }\n    }\n    util.assertNever(effect);\n  }\n};\nZodEffects.create = (schema, effect, params) => {\n  return new ZodEffects({\n    schema,\n    typeName: ZodFirstPartyTypeKind.ZodEffects,\n    effect,\n    ...processCreateParams(params)\n  });\n};\nZodEffects.createWithPreprocess = (preprocess, schema, params) => {\n  return new ZodEffects({\n    schema,\n    effect: { type: \"preprocess\", transform: preprocess },\n    typeName: ZodFirstPartyTypeKind.ZodEffects,\n    ...processCreateParams(params)\n  });\n};\nvar ZodOptional = class extends ZodType {\n  _parse(input) {\n    const parsedType = this._getType(input);\n    if (parsedType === ZodParsedType.undefined) {\n      return OK(void 0);\n    }\n    return this._def.innerType._parse(input);\n  }\n  unwrap() {\n    return this._def.innerType;\n  }\n};\nZodOptional.create = (type, params) => {\n  return new ZodOptional({\n    innerType: type,\n    typeName: ZodFirstPartyTypeKind.ZodOptional,\n    ...processCreateParams(params)\n  });\n};\nvar ZodNullable = class extends ZodType {\n  _parse(input) {\n    const parsedType = this._getType(input);\n    if (parsedType === ZodParsedType.null) {\n      return OK(null);\n    }\n    return this._def.innerType._parse(input);\n  }\n  unwrap() {\n    return this._def.innerType;\n  }\n};\nZodNullable.create = (type, params) => {\n  return new ZodNullable({\n    innerType: type,\n    typeName: ZodFirstPartyTypeKind.ZodNullable,\n    ...processCreateParams(params)\n  });\n};\nvar ZodDefault = class extends ZodType {\n  _parse(input) {\n    const { ctx } = this._processInputParams(input);\n    let data = ctx.data;\n    if (ctx.parsedType === ZodParsedType.undefined) {\n      data = this._def.defaultValue();\n    }\n    return this._def.innerType._parse({\n      data,\n      path: ctx.path,\n      parent: ctx\n    });\n  }\n  removeDefault() {\n    return this._def.innerType;\n  }\n};\nZodDefault.create = (type, params) => {\n  return new ZodDefault({\n    innerType: type,\n    typeName: ZodFirstPartyTypeKind.ZodDefault,\n    defaultValue: typeof params.default === \"function\" ? params.default : () => params.default,\n    ...processCreateParams(params)\n  });\n};\nvar ZodCatch = class extends ZodType {\n  _parse(input) {\n    const { ctx } = this._processInputParams(input);\n    const newCtx = {\n      ...ctx,\n      common: {\n        ...ctx.common,\n        issues: []\n      }\n    };\n    const result = this._def.innerType._parse({\n      data: newCtx.data,\n      path: newCtx.path,\n      parent: {\n        ...newCtx\n      }\n    });\n    if (isAsync(result)) {\n      return result.then((result2) => {\n        return {\n          status: \"valid\",\n          value: result2.status === \"valid\" ? result2.value : this._def.catchValue({\n            get error() {\n              return new ZodError(newCtx.common.issues);\n            },\n            input: newCtx.data\n          })\n        };\n      });\n    } else {\n      return {\n        status: \"valid\",\n        value: result.status === \"valid\" ? result.value : this._def.catchValue({\n          get error() {\n            return new ZodError(newCtx.common.issues);\n          },\n          input: newCtx.data\n        })\n      };\n    }\n  }\n  removeCatch() {\n    return this._def.innerType;\n  }\n};\nZodCatch.create = (type, params) => {\n  return new ZodCatch({\n    innerType: type,\n    typeName: ZodFirstPartyTypeKind.ZodCatch,\n    catchValue: typeof params.catch === \"function\" ? params.catch : () => params.catch,\n    ...processCreateParams(params)\n  });\n};\nvar ZodNaN = class extends ZodType {\n  _parse(input) {\n    const parsedType = this._getType(input);\n    if (parsedType !== ZodParsedType.nan) {\n      const ctx = this._getOrReturnCtx(input);\n      addIssueToContext(ctx, {\n        code: ZodIssueCode.invalid_type,\n        expected: ZodParsedType.nan,\n        received: ctx.parsedType\n      });\n      return INVALID;\n    }\n    return { status: \"valid\", value: input.data };\n  }\n};\nZodNaN.create = (params) => {\n  return new ZodNaN({\n    typeName: ZodFirstPartyTypeKind.ZodNaN,\n    ...processCreateParams(params)\n  });\n};\nvar BRAND = Symbol(\"zod_brand\");\nvar ZodBranded = class extends ZodType {\n  _parse(input) {\n    const { ctx } = this._processInputParams(input);\n    const data = ctx.data;\n    return this._def.type._parse({\n      data,\n      path: ctx.path,\n      parent: ctx\n    });\n  }\n  unwrap() {\n    return this._def.type;\n  }\n};\nvar ZodPipeline = class _ZodPipeline extends ZodType {\n  _parse(input) {\n    const { status, ctx } = this._processInputParams(input);\n    if (ctx.common.async) {\n      const handleAsync = async () => {\n        const inResult = await this._def.in._parseAsync({\n          data: ctx.data,\n          path: ctx.path,\n          parent: ctx\n        });\n        if (inResult.status === \"aborted\")\n          return INVALID;\n        if (inResult.status === \"dirty\") {\n          status.dirty();\n          return DIRTY(inResult.value);\n        } else {\n          return this._def.out._parseAsync({\n            data: inResult.value,\n            path: ctx.path,\n            parent: ctx\n          });\n        }\n      };\n      return handleAsync();\n    } else {\n      const inResult = this._def.in._parseSync({\n        data: ctx.data,\n        path: ctx.path,\n        parent: ctx\n      });\n      if (inResult.status === \"aborted\")\n        return INVALID;\n      if (inResult.status === \"dirty\") {\n        status.dirty();\n        return {\n          status: \"dirty\",\n          value: inResult.value\n        };\n      } else {\n        return this._def.out._parseSync({\n          data: inResult.value,\n          path: ctx.path,\n          parent: ctx\n        });\n      }\n    }\n  }\n  static create(a, b) {\n    return new _ZodPipeline({\n      in: a,\n      out: b,\n      typeName: ZodFirstPartyTypeKind.ZodPipeline\n    });\n  }\n};\nvar ZodReadonly = class extends ZodType {\n  _parse(input) {\n    const result = this._def.innerType._parse(input);\n    const freeze = (data) => {\n      if (isValid(data)) {\n        data.value = Object.freeze(data.value);\n      }\n      return data;\n    };\n    return isAsync(result) ? result.then((data) => freeze(data)) : freeze(result);\n  }\n  unwrap() {\n    return this._def.innerType;\n  }\n};\nZodReadonly.create = (type, params) => {\n  return new ZodReadonly({\n    innerType: type,\n    typeName: ZodFirstPartyTypeKind.ZodReadonly,\n    ...processCreateParams(params)\n  });\n};\nfunction custom(check, params = {}, fatal) {\n  if (check)\n    return ZodAny.create().superRefine((data, ctx) => {\n      var _a, _b;\n      if (!check(data)) {\n        const p = typeof params === \"function\" ? params(data) : typeof params === \"string\" ? { message: params } : params;\n        const _fatal = (_b = (_a = p.fatal) !== null && _a !== void 0 ? _a : fatal) !== null && _b !== void 0 ? _b : true;\n        const p2 = typeof p === \"string\" ? { message: p } : p;\n        ctx.addIssue({ code: \"custom\", ...p2, fatal: _fatal });\n      }\n    });\n  return ZodAny.create();\n}\nvar late = {\n  object: ZodObject.lazycreate\n};\nvar ZodFirstPartyTypeKind;\n(function(ZodFirstPartyTypeKind2) {\n  ZodFirstPartyTypeKind2[\"ZodString\"] = \"ZodString\";\n  ZodFirstPartyTypeKind2[\"ZodNumber\"] = \"ZodNumber\";\n  ZodFirstPartyTypeKind2[\"ZodNaN\"] = \"ZodNaN\";\n  ZodFirstPartyTypeKind2[\"ZodBigInt\"] = \"ZodBigInt\";\n  ZodFirstPartyTypeKind2[\"ZodBoolean\"] = \"ZodBoolean\";\n  ZodFirstPartyTypeKind2[\"ZodDate\"] = \"ZodDate\";\n  ZodFirstPartyTypeKind2[\"ZodSymbol\"] = \"ZodSymbol\";\n  ZodFirstPartyTypeKind2[\"ZodUndefined\"] = \"ZodUndefined\";\n  ZodFirstPartyTypeKind2[\"ZodNull\"] = \"ZodNull\";\n  ZodFirstPartyTypeKind2[\"ZodAny\"] = \"ZodAny\";\n  ZodFirstPartyTypeKind2[\"ZodUnknown\"] = \"ZodUnknown\";\n  ZodFirstPartyTypeKind2[\"ZodNever\"] = \"ZodNever\";\n  ZodFirstPartyTypeKind2[\"ZodVoid\"] = \"ZodVoid\";\n  ZodFirstPartyTypeKind2[\"ZodArray\"] = \"ZodArray\";\n  ZodFirstPartyTypeKind2[\"ZodObject\"] = \"ZodObject\";\n  ZodFirstPartyTypeKind2[\"ZodUnion\"] = \"ZodUnion\";\n  ZodFirstPartyTypeKind2[\"ZodDiscriminatedUnion\"] = \"ZodDiscriminatedUnion\";\n  ZodFirstPartyTypeKind2[\"ZodIntersection\"] = \"ZodIntersection\";\n  ZodFirstPartyTypeKind2[\"ZodTuple\"] = \"ZodTuple\";\n  ZodFirstPartyTypeKind2[\"ZodRecord\"] = \"ZodRecord\";\n  ZodFirstPartyTypeKind2[\"ZodMap\"] = \"ZodMap\";\n  ZodFirstPartyTypeKind2[\"ZodSet\"] = \"ZodSet\";\n  ZodFirstPartyTypeKind2[\"ZodFunction\"] = \"ZodFunction\";\n  ZodFirstPartyTypeKind2[\"ZodLazy\"] = \"ZodLazy\";\n  ZodFirstPartyTypeKind2[\"ZodLiteral\"] = \"ZodLiteral\";\n  ZodFirstPartyTypeKind2[\"ZodEnum\"] = \"ZodEnum\";\n  ZodFirstPartyTypeKind2[\"ZodEffects\"] = \"ZodEffects\";\n  ZodFirstPartyTypeKind2[\"ZodNativeEnum\"] = \"ZodNativeEnum\";\n  ZodFirstPartyTypeKind2[\"ZodOptional\"] = \"ZodOptional\";\n  ZodFirstPartyTypeKind2[\"ZodNullable\"] = \"ZodNullable\";\n  ZodFirstPartyTypeKind2[\"ZodDefault\"] = \"ZodDefault\";\n  ZodFirstPartyTypeKind2[\"ZodCatch\"] = \"ZodCatch\";\n  ZodFirstPartyTypeKind2[\"ZodPromise\"] = \"ZodPromise\";\n  ZodFirstPartyTypeKind2[\"ZodBranded\"] = \"ZodBranded\";\n  ZodFirstPartyTypeKind2[\"ZodPipeline\"] = \"ZodPipeline\";\n  ZodFirstPartyTypeKind2[\"ZodReadonly\"] = \"ZodReadonly\";\n})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));\nvar instanceOfType = (cls, params = {\n  message: `Input not instance of ${cls.name}`\n}) => custom((data) => data instanceof cls, params);\nvar stringType = ZodString.create;\nvar numberType = ZodNumber.create;\nvar nanType = ZodNaN.create;\nvar bigIntType = ZodBigInt.create;\nvar booleanType = ZodBoolean.create;\nvar dateType = ZodDate.create;\nvar symbolType = ZodSymbol.create;\nvar undefinedType = ZodUndefined.create;\nvar nullType = ZodNull.create;\nvar anyType = ZodAny.create;\nvar unknownType = ZodUnknown.create;\nvar neverType = ZodNever.create;\nvar voidType = ZodVoid.create;\nvar arrayType = ZodArray.create;\nvar objectType = ZodObject.create;\nvar strictObjectType = ZodObject.strictCreate;\nvar unionType = ZodUnion.create;\nvar discriminatedUnionType = ZodDiscriminatedUnion.create;\nvar intersectionType = ZodIntersection.create;\nvar tupleType = ZodTuple.create;\nvar recordType = ZodRecord.create;\nvar mapType = ZodMap.create;\nvar setType = ZodSet.create;\nvar functionType = ZodFunction.create;\nvar lazyType = ZodLazy.create;\nvar literalType = ZodLiteral.create;\nvar enumType = ZodEnum.create;\nvar nativeEnumType = ZodNativeEnum.create;\nvar promiseType = ZodPromise.create;\nvar effectsType = ZodEffects.create;\nvar optionalType = ZodOptional.create;\nvar nullableType = ZodNullable.create;\nvar preprocessType = ZodEffects.createWithPreprocess;\nvar pipelineType = ZodPipeline.create;\nvar ostring = () => stringType().optional();\nvar onumber = () => numberType().optional();\nvar oboolean = () => booleanType().optional();\nvar coerce = {\n  string: (arg) => ZodString.create({ ...arg, coerce: true }),\n  number: (arg) => ZodNumber.create({ ...arg, coerce: true }),\n  boolean: (arg) => ZodBoolean.create({\n    ...arg,\n    coerce: true\n  }),\n  bigint: (arg) => ZodBigInt.create({ ...arg, coerce: true }),\n  date: (arg) => ZodDate.create({ ...arg, coerce: true })\n};\nvar NEVER = INVALID;\nvar z = /* @__PURE__ */ Object.freeze({\n  __proto__: null,\n  defaultErrorMap: errorMap,\n  setErrorMap,\n  getErrorMap,\n  makeIssue,\n  EMPTY_PATH,\n  addIssueToContext,\n  ParseStatus,\n  INVALID,\n  DIRTY,\n  OK,\n  isAborted,\n  isDirty,\n  isValid,\n  isAsync,\n  get util() {\n    return util;\n  },\n  get objectUtil() {\n    return objectUtil;\n  },\n  ZodParsedType,\n  getParsedType,\n  ZodType,\n  datetimeRegex,\n  ZodString,\n  ZodNumber,\n  ZodBigInt,\n  ZodBoolean,\n  ZodDate,\n  ZodSymbol,\n  ZodUndefined,\n  ZodNull,\n  ZodAny,\n  ZodUnknown,\n  ZodNever,\n  ZodVoid,\n  ZodArray,\n  ZodObject,\n  ZodUnion,\n  ZodDiscriminatedUnion,\n  ZodIntersection,\n  ZodTuple,\n  ZodRecord,\n  ZodMap,\n  ZodSet,\n  ZodFunction,\n  ZodLazy,\n  ZodLiteral,\n  ZodEnum,\n  ZodNativeEnum,\n  ZodPromise,\n  ZodEffects,\n  ZodTransformer: ZodEffects,\n  ZodOptional,\n  ZodNullable,\n  ZodDefault,\n  ZodCatch,\n  ZodNaN,\n  BRAND,\n  ZodBranded,\n  ZodPipeline,\n  ZodReadonly,\n  custom,\n  Schema: ZodType,\n  ZodSchema: ZodType,\n  late,\n  get ZodFirstPartyTypeKind() {\n    return ZodFirstPartyTypeKind;\n  },\n  coerce,\n  any: anyType,\n  array: arrayType,\n  bigint: bigIntType,\n  boolean: booleanType,\n  date: dateType,\n  discriminatedUnion: discriminatedUnionType,\n  effect: effectsType,\n  \"enum\": enumType,\n  \"function\": functionType,\n  \"instanceof\": instanceOfType,\n  intersection: intersectionType,\n  lazy: lazyType,\n  literal: literalType,\n  map: mapType,\n  nan: nanType,\n  nativeEnum: nativeEnumType,\n  never: neverType,\n  \"null\": nullType,\n  nullable: nullableType,\n  number: numberType,\n  object: objectType,\n  oboolean,\n  onumber,\n  optional: optionalType,\n  ostring,\n  pipeline: pipelineType,\n  preprocess: preprocessType,\n  promise: promiseType,\n  record: recordType,\n  set: setType,\n  strictObject: strictObjectType,\n  string: stringType,\n  symbol: symbolType,\n  transformer: effectsType,\n  tuple: tupleType,\n  \"undefined\": undefinedType,\n  union: unionType,\n  unknown: unknownType,\n  \"void\": voidType,\n  NEVER,\n  ZodIssueCode,\n  quotelessJson,\n  ZodError\n});\n\n// ../types/dist/validators/common.validators.js\nvar ActivePeersSchema = z.object({\n  peerIds: z.array(z.string()),\n  dominantSpeaker: z.string()\n});\nvar RoomControlsSchema = z.object({\n  roomLocked: z.boolean(),\n  allowProduce: z.boolean(),\n  allowProduceSources: z.object({\n    cam: z.boolean().default(true),\n    mic: z.boolean().default(true),\n    screen: z.boolean().default(true)\n  }),\n  allowConsume: z.boolean(),\n  allowSendData: z.boolean()\n});\nvar produceSourcesSchema = z.object({\n  cam: z.boolean(),\n  mic: z.boolean(),\n  screen: z.boolean()\n});\nvar PermissionSchema = z.object({\n  admin: z.boolean(),\n  canConsume: z.boolean(),\n  canProduce: z.boolean(),\n  canProduceSources: produceSourcesSchema,\n  canSendData: z.boolean(),\n  canRecvData: z.boolean(),\n  canUpdateMetadata: z.boolean()\n});\nvar VolatileDataMessageSchema = z.object({\n  from: z.string(),\n  payload: z.unknown(),\n  label: z.string().optional(),\n  to: z.union([z.literal(\"*\"), z.array(z.string())]).optional()\n});\nvar RecordingTypeSchema = z.enum([\"recording\", \"livestream\"]);\nvar ApiKeyRecordingStatusSchema = z.object({\n  status: z.enum([\"ongoing\", \"stopped\"]),\n  startTime: z.number().optional(),\n  type: RecordingTypeSchema.optional()\n});\n\n// src/hooks/useActivePeers.ts\nvar useActivePeers = () => {\n  const { room } = (0,_chunk_PFZ5VHJP_js__WEBPACK_IMPORTED_MODULE_0__.useRoom)();\n  const [activePeerIds, setActivePeerIds] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n  const [dominantSpeakerId, setDominantSpeakerId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n  const handleSpeakerChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (data) => {\n      const result = ActivePeersSchema.safeParse(data);\n      if (result.success) {\n        setActivePeerIds(result.data.peerIds);\n        setDominantSpeakerId(result.data.dominantSpeaker);\n      }\n    },\n    []\n  );\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    room.on(\"active-speakers-change\", handleSpeakerChange);\n    return () => {\n      room.off(\"active-speakers-change\", handleSpeakerChange);\n    };\n  }, []);\n  const updateSize = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((size) => {\n    if (!room?.activeSpeakers) {\n      console.warn(\n        \"activeSpeakers is not initialized, use localPeer.activateSpeakerNotification\"\n      );\n      return;\n    }\n    room?.activeSpeakers?.updateSize(size);\n  }, []);\n  return {\n    activePeerIds,\n    dominantSpeakerId,\n    updateSize\n  };\n};\n\n\n//# sourceMappingURL=chunk-YYO56XV4.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstWVlPNTZYVjQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRTZCOztBQUU3QjtBQUN5RDs7QUFFekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxJQUFJO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLG9CQUFvQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdDQUFnQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkMsY0FBYztBQUNkLHVDQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxNQUFNO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLDhCQUE4QixlQUFlLGFBQWEsZUFBZTtBQUN6RTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsMkRBQTJEO0FBQzlHO0FBQ0E7QUFDQSxrREFBa0Qsa0NBQWtDO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsK0JBQStCO0FBQ3hGO0FBQ0E7QUFDQSxnREFBZ0QsK0JBQStCLGNBQWMsZUFBZTtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCwwQkFBMEI7QUFDOUU7QUFDQSx5QkFBeUIsU0FBUyxvREFBb0QsMEJBQTBCO0FBQ2hIO0FBQ0EsVUFBVTtBQUNWLHVEQUF1RCw0QkFBNEI7QUFDbkYsVUFBVTtBQUNWLHFEQUFxRCwwQkFBMEI7QUFDL0UsVUFBVTtBQUNWO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsNkJBQTZCLGlCQUFpQjtBQUM5QyxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxzRUFBc0UsRUFBRSxlQUFlO0FBQy9IO0FBQ0EseUNBQXlDLGlFQUFpRSxFQUFFLGVBQWU7QUFDM0g7QUFDQSxvQ0FBb0Msb0dBQW9HLEVBQUUsY0FBYztBQUN4SjtBQUNBLGtDQUFrQyxvR0FBb0csRUFBRSxnQ0FBZ0M7QUFDeEs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxxRUFBcUUsRUFBRSxlQUFlO0FBQzlIO0FBQ0EseUNBQXlDLGlFQUFpRSxFQUFFLGVBQWU7QUFDM0g7QUFDQSxvQ0FBb0MsbUZBQW1GLEVBQUUsY0FBYztBQUN2STtBQUNBLG9DQUFvQyxtRkFBbUYsRUFBRSxjQUFjO0FBQ3ZJO0FBQ0Esa0NBQWtDLHlGQUF5RixFQUFFLGdDQUFnQztBQUM3SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxpQkFBaUI7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLG1DQUFtQztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0Msa0NBQWtDO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGFBQWE7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELDBCQUEwQix3QkFBd0I7QUFDbEQsdUJBQXVCLHdCQUF3QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFLFVBQVU7QUFDL0U7QUFDQSxDQUFDLDhCQUE4QjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsdUVBQXVFO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxZQUFZLFVBQVU7QUFDdEI7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0EsZUFBZTtBQUNmLGFBQWE7QUFDYjtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxtQ0FBbUM7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsbUNBQW1DO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsR0FBRztBQUM3QjtBQUNBLHFDQUFxQyxHQUFHO0FBQ3hDLDhCQUE4QixFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQUUsZUFBZSxFQUFFLGVBQWUsR0FBRztBQUNyRywrQkFBK0IsR0FBRztBQUNsQztBQUNBLCtGQUErRixHQUFHO0FBQ2xHLHlCQUF5QixzQkFBc0IsS0FBSyxnQkFBZ0I7QUFDcEU7QUFDQSw2RUFBNkUsRUFBRTtBQUMvRSw2QkFBNkIsSUFBSSxHQUFHLEVBQUUsYUFBYSxJQUFJLEdBQUcsSUFBSSxXQUFXLElBQUksR0FBRyxFQUFFLFdBQVcsSUFBSSxHQUFHLElBQUksV0FBVyxJQUFJLEdBQUcsRUFBRSxXQUFXLElBQUksR0FBRyxJQUFJLFdBQVcsSUFBSSxHQUFHLEVBQUUsV0FBVyxJQUFJLEdBQUcsSUFBSSxXQUFXLElBQUksR0FBRyxFQUFFLFdBQVcsSUFBSSxHQUFHLElBQUksV0FBVyxJQUFJLEdBQUcsRUFBRSxXQUFXLElBQUksR0FBRyxJQUFJLFdBQVcsSUFBSSxtQ0FBbUMsRUFBRSxTQUFTLElBQUksTUFBTSxFQUFFLGlDQUFpQyxFQUFFLFNBQVMsSUFBSTtBQUN6WSxtQ0FBbUMsRUFBRSxrQkFBa0IsRUFBRSxtQkFBbUIsRUFBRTtBQUM5RSxpSEFBaUgsRUFBRTtBQUNuSCwrQkFBK0IsZ0JBQWdCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLGVBQWUsTUFBTSxPQUFPLEVBQUUsZ0JBQWdCO0FBQzlDLElBQUk7QUFDSixlQUFlLE1BQU07QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isc0JBQXNCO0FBQzlDO0FBQ0E7QUFDQSxpQkFBaUIsZ0JBQWdCLEdBQUcsc0JBQXNCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixFQUFFLE1BQU0sRUFBRTtBQUNsQyxhQUFhLE1BQU0sR0FBRyxlQUFlO0FBQ3JDLHdCQUF3QixNQUFNO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixpREFBaUQ7QUFDM0U7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix5QkFBeUI7QUFDbkQ7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix1QkFBdUI7QUFDakQ7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDRCQUE0QiwrQ0FBK0M7QUFDM0U7QUFDQTtBQUNBLDRCQUE0Qiw2Q0FBNkM7QUFDekU7QUFDQTtBQUNBLDRCQUE0QiwrQ0FBK0M7QUFDM0U7QUFDQTtBQUNBLDRCQUE0Qiw4Q0FBOEM7QUFDMUU7QUFDQTtBQUNBLDRCQUE0QixnREFBZ0Q7QUFDNUU7QUFDQTtBQUNBLDRCQUE0Qiw4Q0FBOEM7QUFDMUU7QUFDQTtBQUNBLDRCQUE0QiwrQ0FBK0M7QUFDM0U7QUFDQTtBQUNBLDRCQUE0Qiw4Q0FBOEM7QUFDMUU7QUFDQTtBQUNBLDRCQUE0QixnREFBZ0Q7QUFDNUU7QUFDQTtBQUNBLDRCQUE0Qiw0Q0FBNEM7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDRCQUE0Qix1QkFBdUI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsNEJBQTRCLGtEQUFrRDtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsY0FBYztBQUNwRCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MscUJBQXFCO0FBQzNELEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxxQkFBcUI7QUFDM0QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFD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QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGVBQWU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLFlBQVksTUFBTTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsVUFBVTtBQUNWLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksTUFBTTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsY0FBYztBQUN6RTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsdUJBQXVCLHNCQUFzQixjQUFjO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixJQUFJO0FBQ0o7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLElBQUk7QUFDSjtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0Esd0JBQXdCLGtCQUFrQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsSUFBSTtBQUNKLGFBQWE7QUFDYixJQUFJO0FBQ0osYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxjQUFjO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLFlBQVksY0FBYztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxjQUFjO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksY0FBYztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxZQUFZLGNBQWM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksTUFBTTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxNQUFNO0FBQ2xCO0FBQ0EsK0JBQStCLDZDQUE2QztBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxNQUFNO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksY0FBYztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLFFBQVE7QUFDUiw4Q0FBOEMsNkNBQTZDO0FBQzNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsV0FBVztBQUNYLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixRQUFRO0FBQ1IsOENBQThDLDZDQUE2QztBQUMzRjtBQUNBO0FBQ0EsNkZBQTZGLHFDQUFxQztBQUNsSSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMkNBQTJDO0FBQ3pEO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxZQUFZLE1BQU07QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLFlBQVksTUFBTTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFdBQVc7QUFDWDtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksTUFBTTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxjQUFjO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRkFBK0Ysa0JBQWtCO0FBQ2pIO0FBQ0EsNkNBQTZDLGFBQWE7QUFDMUQsdUJBQXVCLHNDQUFzQztBQUM3RDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsc0RBQXNEO0FBQ3ZEO0FBQ0Esb0NBQW9DLFNBQVM7QUFDN0MsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msc0JBQXNCO0FBQzVELHNDQUFzQyxzQkFBc0I7QUFDNUQ7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILHNDQUFzQyxzQkFBc0I7QUFDNUQsa0NBQWtDLHNCQUFzQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQSxVQUFVLE9BQU8sRUFBRSwyREFBTztBQUMxQiw0Q0FBNEMsK0NBQVE7QUFDcEQsb0RBQW9ELCtDQUFRO0FBQzVELDhCQUE4QixrREFBVztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxxQkFBcUIsa0RBQVc7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2tlbW9uLWdhbWUtZXRoaW5kaWEtMS8uL25vZGVfbW9kdWxlcy9AaHVkZGxlMDEvcmVhY3QvZGlzdC9jaHVuay1ZWU81NlhWNC5qcz8zOTAxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHVzZVJvb21cbn0gZnJvbSBcIi4vY2h1bmstUEZaNVZISlAuanNcIjtcblxuLy8gc3JjL2hvb2tzL3VzZUFjdGl2ZVBlZXJzLnRzXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvem9kL2xpYi9pbmRleC5tanNcbnZhciB1dGlsO1xuKGZ1bmN0aW9uKHV0aWwyKSB7XG4gIHV0aWwyLmFzc2VydEVxdWFsID0gKHZhbCkgPT4gdmFsO1xuICBmdW5jdGlvbiBhc3NlcnRJcyhfYXJnKSB7XG4gIH1cbiAgdXRpbDIuYXNzZXJ0SXMgPSBhc3NlcnRJcztcbiAgZnVuY3Rpb24gYXNzZXJ0TmV2ZXIoX3gpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgfVxuICB1dGlsMi5hc3NlcnROZXZlciA9IGFzc2VydE5ldmVyO1xuICB1dGlsMi5hcnJheVRvRW51bSA9IChpdGVtcykgPT4ge1xuICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgb2JqW2l0ZW1dID0gaXRlbTtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfTtcbiAgdXRpbDIuZ2V0VmFsaWRFbnVtVmFsdWVzID0gKG9iaikgPT4ge1xuICAgIGNvbnN0IHZhbGlkS2V5cyA9IHV0aWwyLm9iamVjdEtleXMob2JqKS5maWx0ZXIoKGspID0+IHR5cGVvZiBvYmpbb2JqW2tdXSAhPT0gXCJudW1iZXJcIik7XG4gICAgY29uc3QgZmlsdGVyZWQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGsgb2YgdmFsaWRLZXlzKSB7XG4gICAgICBmaWx0ZXJlZFtrXSA9IG9ialtrXTtcbiAgICB9XG4gICAgcmV0dXJuIHV0aWwyLm9iamVjdFZhbHVlcyhmaWx0ZXJlZCk7XG4gIH07XG4gIHV0aWwyLm9iamVjdFZhbHVlcyA9IChvYmopID0+IHtcbiAgICByZXR1cm4gdXRpbDIub2JqZWN0S2V5cyhvYmopLm1hcChmdW5jdGlvbihlKSB7XG4gICAgICByZXR1cm4gb2JqW2VdO1xuICAgIH0pO1xuICB9O1xuICB1dGlsMi5vYmplY3RLZXlzID0gdHlwZW9mIE9iamVjdC5rZXlzID09PSBcImZ1bmN0aW9uXCIgPyAob2JqKSA9PiBPYmplY3Qua2V5cyhvYmopIDogKG9iamVjdCkgPT4ge1xuICAgIGNvbnN0IGtleXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmplY3QpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSB7XG4gICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ga2V5cztcbiAgfTtcbiAgdXRpbDIuZmluZCA9IChhcnIsIGNoZWNrZXIpID0+IHtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXJyKSB7XG4gICAgICBpZiAoY2hlY2tlcihpdGVtKSlcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuICAgIHJldHVybiB2b2lkIDA7XG4gIH07XG4gIHV0aWwyLmlzSW50ZWdlciA9IHR5cGVvZiBOdW1iZXIuaXNJbnRlZ2VyID09PSBcImZ1bmN0aW9uXCIgPyAodmFsKSA9PiBOdW1iZXIuaXNJbnRlZ2VyKHZhbCkgOiAodmFsKSA9PiB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICYmIGlzRmluaXRlKHZhbCkgJiYgTWF0aC5mbG9vcih2YWwpID09PSB2YWw7XG4gIGZ1bmN0aW9uIGpvaW5WYWx1ZXMoYXJyYXksIHNlcGFyYXRvciA9IFwiIHwgXCIpIHtcbiAgICByZXR1cm4gYXJyYXkubWFwKCh2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIgPyBgJyR7dmFsfSdgIDogdmFsKS5qb2luKHNlcGFyYXRvcik7XG4gIH1cbiAgdXRpbDIuam9pblZhbHVlcyA9IGpvaW5WYWx1ZXM7XG4gIHV0aWwyLmpzb25TdHJpbmdpZnlSZXBsYWNlciA9IChfLCB2YWx1ZSkgPT4ge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYmlnaW50XCIpIHtcbiAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG59KSh1dGlsIHx8ICh1dGlsID0ge30pKTtcbnZhciBvYmplY3RVdGlsO1xuKGZ1bmN0aW9uKG9iamVjdFV0aWwyKSB7XG4gIG9iamVjdFV0aWwyLm1lcmdlU2hhcGVzID0gKGZpcnN0LCBzZWNvbmQpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uZmlyc3QsXG4gICAgICAuLi5zZWNvbmRcbiAgICAgIC8vIHNlY29uZCBvdmVyd3JpdGVzIGZpcnN0XG4gICAgfTtcbiAgfTtcbn0pKG9iamVjdFV0aWwgfHwgKG9iamVjdFV0aWwgPSB7fSkpO1xudmFyIFpvZFBhcnNlZFR5cGUgPSB1dGlsLmFycmF5VG9FbnVtKFtcbiAgXCJzdHJpbmdcIixcbiAgXCJuYW5cIixcbiAgXCJudW1iZXJcIixcbiAgXCJpbnRlZ2VyXCIsXG4gIFwiZmxvYXRcIixcbiAgXCJib29sZWFuXCIsXG4gIFwiZGF0ZVwiLFxuICBcImJpZ2ludFwiLFxuICBcInN5bWJvbFwiLFxuICBcImZ1bmN0aW9uXCIsXG4gIFwidW5kZWZpbmVkXCIsXG4gIFwibnVsbFwiLFxuICBcImFycmF5XCIsXG4gIFwib2JqZWN0XCIsXG4gIFwidW5rbm93blwiLFxuICBcInByb21pc2VcIixcbiAgXCJ2b2lkXCIsXG4gIFwibmV2ZXJcIixcbiAgXCJtYXBcIixcbiAgXCJzZXRcIlxuXSk7XG52YXIgZ2V0UGFyc2VkVHlwZSA9IChkYXRhKSA9PiB7XG4gIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTtcbiAgc3dpdGNoICh0KSB7XG4gICAgY2FzZSBcInVuZGVmaW5lZFwiOlxuICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkO1xuICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnN0cmluZztcbiAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICByZXR1cm4gaXNOYU4oZGF0YSkgPyBab2RQYXJzZWRUeXBlLm5hbiA6IFpvZFBhcnNlZFR5cGUubnVtYmVyO1xuICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5ib29sZWFuO1xuICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuZnVuY3Rpb247XG4gICAgY2FzZSBcImJpZ2ludFwiOlxuICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuYmlnaW50O1xuICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnN5bWJvbDtcbiAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5hcnJheTtcbiAgICAgIH1cbiAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLm51bGw7XG4gICAgICB9XG4gICAgICBpZiAoZGF0YS50aGVuICYmIHR5cGVvZiBkYXRhLnRoZW4gPT09IFwiZnVuY3Rpb25cIiAmJiBkYXRhLmNhdGNoICYmIHR5cGVvZiBkYXRhLmNhdGNoID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUucHJvbWlzZTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgTWFwICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUubWFwO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBTZXQgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5zZXQ7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIERhdGUgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuZGF0ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLm9iamVjdDtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUudW5rbm93bjtcbiAgfVxufTtcbnZhciBab2RJc3N1ZUNvZGUgPSB1dGlsLmFycmF5VG9FbnVtKFtcbiAgXCJpbnZhbGlkX3R5cGVcIixcbiAgXCJpbnZhbGlkX2xpdGVyYWxcIixcbiAgXCJjdXN0b21cIixcbiAgXCJpbnZhbGlkX3VuaW9uXCIsXG4gIFwiaW52YWxpZF91bmlvbl9kaXNjcmltaW5hdG9yXCIsXG4gIFwiaW52YWxpZF9lbnVtX3ZhbHVlXCIsXG4gIFwidW5yZWNvZ25pemVkX2tleXNcIixcbiAgXCJpbnZhbGlkX2FyZ3VtZW50c1wiLFxuICBcImludmFsaWRfcmV0dXJuX3R5cGVcIixcbiAgXCJpbnZhbGlkX2RhdGVcIixcbiAgXCJpbnZhbGlkX3N0cmluZ1wiLFxuICBcInRvb19zbWFsbFwiLFxuICBcInRvb19iaWdcIixcbiAgXCJpbnZhbGlkX2ludGVyc2VjdGlvbl90eXBlc1wiLFxuICBcIm5vdF9tdWx0aXBsZV9vZlwiLFxuICBcIm5vdF9maW5pdGVcIlxuXSk7XG52YXIgcXVvdGVsZXNzSnNvbiA9IChvYmopID0+IHtcbiAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgMik7XG4gIHJldHVybiBqc29uLnJlcGxhY2UoL1wiKFteXCJdKylcIjovZywgXCIkMTpcIik7XG59O1xudmFyIFpvZEVycm9yID0gY2xhc3MgX1pvZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3Rvcihpc3N1ZXMpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuaXNzdWVzID0gW107XG4gICAgdGhpcy5hZGRJc3N1ZSA9IChzdWIpID0+IHtcbiAgICAgIHRoaXMuaXNzdWVzID0gWy4uLnRoaXMuaXNzdWVzLCBzdWJdO1xuICAgIH07XG4gICAgdGhpcy5hZGRJc3N1ZXMgPSAoc3VicyA9IFtdKSA9PiB7XG4gICAgICB0aGlzLmlzc3VlcyA9IFsuLi50aGlzLmlzc3VlcywgLi4uc3Vic107XG4gICAgfTtcbiAgICBjb25zdCBhY3R1YWxQcm90byA9IG5ldy50YXJnZXQucHJvdG90eXBlO1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBhY3R1YWxQcm90byk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX19wcm90b19fID0gYWN0dWFsUHJvdG87XG4gICAgfVxuICAgIHRoaXMubmFtZSA9IFwiWm9kRXJyb3JcIjtcbiAgICB0aGlzLmlzc3VlcyA9IGlzc3VlcztcbiAgfVxuICBnZXQgZXJyb3JzKCkge1xuICAgIHJldHVybiB0aGlzLmlzc3VlcztcbiAgfVxuICBmb3JtYXQoX21hcHBlcikge1xuICAgIGNvbnN0IG1hcHBlciA9IF9tYXBwZXIgfHwgZnVuY3Rpb24oaXNzdWUpIHtcbiAgICAgIHJldHVybiBpc3N1ZS5tZXNzYWdlO1xuICAgIH07XG4gICAgY29uc3QgZmllbGRFcnJvcnMgPSB7IF9lcnJvcnM6IFtdIH07XG4gICAgY29uc3QgcHJvY2Vzc0Vycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICBmb3IgKGNvbnN0IGlzc3VlIG9mIGVycm9yLmlzc3Vlcykge1xuICAgICAgICBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX3VuaW9uXCIpIHtcbiAgICAgICAgICBpc3N1ZS51bmlvbkVycm9ycy5tYXAocHJvY2Vzc0Vycm9yKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfcmV0dXJuX3R5cGVcIikge1xuICAgICAgICAgIHByb2Nlc3NFcnJvcihpc3N1ZS5yZXR1cm5UeXBlRXJyb3IpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF9hcmd1bWVudHNcIikge1xuICAgICAgICAgIHByb2Nlc3NFcnJvcihpc3N1ZS5hcmd1bWVudHNFcnJvcik7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNzdWUucGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBmaWVsZEVycm9ycy5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGV0IGN1cnIgPSBmaWVsZEVycm9ycztcbiAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgd2hpbGUgKGkgPCBpc3N1ZS5wYXRoLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgZWwgPSBpc3N1ZS5wYXRoW2ldO1xuICAgICAgICAgICAgY29uc3QgdGVybWluYWwgPSBpID09PSBpc3N1ZS5wYXRoLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICBpZiAoIXRlcm1pbmFsKSB7XG4gICAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgICAgICAgIGN1cnJbZWxdLl9lcnJvcnMucHVzaChtYXBwZXIoaXNzdWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnIgPSBjdXJyW2VsXTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIHByb2Nlc3NFcnJvcih0aGlzKTtcbiAgICByZXR1cm4gZmllbGRFcnJvcnM7XG4gIH1cbiAgc3RhdGljIGFzc2VydCh2YWx1ZSkge1xuICAgIGlmICghKHZhbHVlIGluc3RhbmNlb2YgX1pvZEVycm9yKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBOb3QgYSBab2RFcnJvcjogJHt2YWx1ZX1gKTtcbiAgICB9XG4gIH1cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVzc2FnZTtcbiAgfVxuICBnZXQgbWVzc2FnZSgpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy5pc3N1ZXMsIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyLCAyKTtcbiAgfVxuICBnZXQgaXNFbXB0eSgpIHtcbiAgICByZXR1cm4gdGhpcy5pc3N1ZXMubGVuZ3RoID09PSAwO1xuICB9XG4gIGZsYXR0ZW4obWFwcGVyID0gKGlzc3VlKSA9PiBpc3N1ZS5tZXNzYWdlKSB7XG4gICAgY29uc3QgZmllbGRFcnJvcnMgPSB7fTtcbiAgICBjb25zdCBmb3JtRXJyb3JzID0gW107XG4gICAgZm9yIChjb25zdCBzdWIgb2YgdGhpcy5pc3N1ZXMpIHtcbiAgICAgIGlmIChzdWIucGF0aC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZpZWxkRXJyb3JzW3N1Yi5wYXRoWzBdXSA9IGZpZWxkRXJyb3JzW3N1Yi5wYXRoWzBdXSB8fCBbXTtcbiAgICAgICAgZmllbGRFcnJvcnNbc3ViLnBhdGhbMF1dLnB1c2gobWFwcGVyKHN1YikpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9ybUVycm9ycy5wdXNoKG1hcHBlcihzdWIpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgZm9ybUVycm9ycywgZmllbGRFcnJvcnMgfTtcbiAgfVxuICBnZXQgZm9ybUVycm9ycygpIHtcbiAgICByZXR1cm4gdGhpcy5mbGF0dGVuKCk7XG4gIH1cbn07XG5ab2RFcnJvci5jcmVhdGUgPSAoaXNzdWVzKSA9PiB7XG4gIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGlzc3Vlcyk7XG4gIHJldHVybiBlcnJvcjtcbn07XG52YXIgZXJyb3JNYXAgPSAoaXNzdWUsIF9jdHgpID0+IHtcbiAgbGV0IG1lc3NhZ2U7XG4gIHN3aXRjaCAoaXNzdWUuY29kZSkge1xuICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZTpcbiAgICAgIGlmIChpc3N1ZS5yZWNlaXZlZCA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgbWVzc2FnZSA9IFwiUmVxdWlyZWRcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1lc3NhZ2UgPSBgRXhwZWN0ZWQgJHtpc3N1ZS5leHBlY3RlZH0sIHJlY2VpdmVkICR7aXNzdWUucmVjZWl2ZWR9YDtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfbGl0ZXJhbDpcbiAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBsaXRlcmFsIHZhbHVlLCBleHBlY3RlZCAke0pTT04uc3RyaW5naWZ5KGlzc3VlLmV4cGVjdGVkLCB1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlcil9YDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgWm9kSXNzdWVDb2RlLnVucmVjb2duaXplZF9rZXlzOlxuICAgICAgbWVzc2FnZSA9IGBVbnJlY29nbml6ZWQga2V5KHMpIGluIG9iamVjdDogJHt1dGlsLmpvaW5WYWx1ZXMoaXNzdWUua2V5cywgXCIsIFwiKX1gO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbjpcbiAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dGA7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uX2Rpc2NyaW1pbmF0b3I6XG4gICAgICBtZXNzYWdlID0gYEludmFsaWQgZGlzY3JpbWluYXRvciB2YWx1ZS4gRXhwZWN0ZWQgJHt1dGlsLmpvaW5WYWx1ZXMoaXNzdWUub3B0aW9ucyl9YDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfZW51bV92YWx1ZTpcbiAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBlbnVtIHZhbHVlLiBFeHBlY3RlZCAke3V0aWwuam9pblZhbHVlcyhpc3N1ZS5vcHRpb25zKX0sIHJlY2VpdmVkICcke2lzc3VlLnJlY2VpdmVkfSdgO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9hcmd1bWVudHM6XG4gICAgICBtZXNzYWdlID0gYEludmFsaWQgZnVuY3Rpb24gYXJndW1lbnRzYDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfcmV0dXJuX3R5cGU6XG4gICAgICBtZXNzYWdlID0gYEludmFsaWQgZnVuY3Rpb24gcmV0dXJuIHR5cGVgO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9kYXRlOlxuICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGRhdGVgO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmc6XG4gICAgICBpZiAodHlwZW9mIGlzc3VlLnZhbGlkYXRpb24gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaWYgKFwiaW5jbHVkZXNcIiBpbiBpc3N1ZS52YWxpZGF0aW9uKSB7XG4gICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0OiBtdXN0IGluY2x1ZGUgXCIke2lzc3VlLnZhbGlkYXRpb24uaW5jbHVkZXN9XCJgO1xuICAgICAgICAgIGlmICh0eXBlb2YgaXNzdWUudmFsaWRhdGlvbi5wb3NpdGlvbiA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgbWVzc2FnZSA9IGAke21lc3NhZ2V9IGF0IG9uZSBvciBtb3JlIHBvc2l0aW9ucyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJHtpc3N1ZS52YWxpZGF0aW9uLnBvc2l0aW9ufWA7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKFwic3RhcnRzV2l0aFwiIGluIGlzc3VlLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgaW5wdXQ6IG11c3Qgc3RhcnQgd2l0aCBcIiR7aXNzdWUudmFsaWRhdGlvbi5zdGFydHNXaXRofVwiYDtcbiAgICAgICAgfSBlbHNlIGlmIChcImVuZHNXaXRoXCIgaW4gaXNzdWUudmFsaWRhdGlvbikge1xuICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dDogbXVzdCBlbmQgd2l0aCBcIiR7aXNzdWUudmFsaWRhdGlvbi5lbmRzV2l0aH1cImA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihpc3N1ZS52YWxpZGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpc3N1ZS52YWxpZGF0aW9uICE9PSBcInJlZ2V4XCIpIHtcbiAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkICR7aXNzdWUudmFsaWRhdGlvbn1gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSA9IFwiSW52YWxpZFwiO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBab2RJc3N1ZUNvZGUudG9vX3NtYWxsOlxuICAgICAgaWYgKGlzc3VlLnR5cGUgPT09IFwiYXJyYXlcIilcbiAgICAgICAgbWVzc2FnZSA9IGBBcnJheSBtdXN0IGNvbnRhaW4gJHtpc3N1ZS5leGFjdCA/IFwiZXhhY3RseVwiIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IGxlYXN0YCA6IGBtb3JlIHRoYW5gfSAke2lzc3VlLm1pbmltdW19IGVsZW1lbnQocylgO1xuICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgbWVzc2FnZSA9IGBTdHJpbmcgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBcImV4YWN0bHlcIiA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBsZWFzdGAgOiBgb3ZlcmB9ICR7aXNzdWUubWluaW11bX0gY2hhcmFjdGVyKHMpYDtcbiAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwibnVtYmVyXCIpXG4gICAgICAgIG1lc3NhZ2UgPSBgTnVtYmVyIG11c3QgYmUgJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5IGVxdWFsIHRvIGAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIGAgOiBgZ3JlYXRlciB0aGFuIGB9JHtpc3N1ZS5taW5pbXVtfWA7XG4gICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcImRhdGVcIilcbiAgICAgICAgbWVzc2FnZSA9IGBEYXRlIG11c3QgYmUgJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5IGVxdWFsIHRvIGAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIGAgOiBgZ3JlYXRlciB0aGFuIGB9JHtuZXcgRGF0ZShOdW1iZXIoaXNzdWUubWluaW11bSkpfWA7XG4gICAgICBlbHNlXG4gICAgICAgIG1lc3NhZ2UgPSBcIkludmFsaWQgaW5wdXRcIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgWm9kSXNzdWVDb2RlLnRvb19iaWc6XG4gICAgICBpZiAoaXNzdWUudHlwZSA9PT0gXCJhcnJheVwiKVxuICAgICAgICBtZXNzYWdlID0gYEFycmF5IG11c3QgY29udGFpbiAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IG1vc3RgIDogYGxlc3MgdGhhbmB9ICR7aXNzdWUubWF4aW11bX0gZWxlbWVudChzKWA7XG4gICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcInN0cmluZ1wiKVxuICAgICAgICBtZXNzYWdlID0gYFN0cmluZyBtdXN0IGNvbnRhaW4gJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5YCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBtb3N0YCA6IGB1bmRlcmB9ICR7aXNzdWUubWF4aW11bX0gY2hhcmFjdGVyKHMpYDtcbiAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwibnVtYmVyXCIpXG4gICAgICAgIG1lc3NhZ2UgPSBgTnVtYmVyIG11c3QgYmUgJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5YCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBsZXNzIHRoYW4gb3IgZXF1YWwgdG9gIDogYGxlc3MgdGhhbmB9ICR7aXNzdWUubWF4aW11bX1gO1xuICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJiaWdpbnRcIilcbiAgICAgICAgbWVzc2FnZSA9IGBCaWdJbnQgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGxlc3MgdGhhbiBvciBlcXVhbCB0b2AgOiBgbGVzcyB0aGFuYH0gJHtpc3N1ZS5tYXhpbXVtfWA7XG4gICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcImRhdGVcIilcbiAgICAgICAgbWVzc2FnZSA9IGBEYXRlIG11c3QgYmUgJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5YCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBzbWFsbGVyIHRoYW4gb3IgZXF1YWwgdG9gIDogYHNtYWxsZXIgdGhhbmB9ICR7bmV3IERhdGUoTnVtYmVyKGlzc3VlLm1heGltdW0pKX1gO1xuICAgICAgZWxzZVxuICAgICAgICBtZXNzYWdlID0gXCJJbnZhbGlkIGlucHV0XCI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFpvZElzc3VlQ29kZS5jdXN0b206XG4gICAgICBtZXNzYWdlID0gYEludmFsaWQgaW5wdXRgO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9pbnRlcnNlY3Rpb25fdHlwZXM6XG4gICAgICBtZXNzYWdlID0gYEludGVyc2VjdGlvbiByZXN1bHRzIGNvdWxkIG5vdCBiZSBtZXJnZWRgO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mOlxuICAgICAgbWVzc2FnZSA9IGBOdW1iZXIgbXVzdCBiZSBhIG11bHRpcGxlIG9mICR7aXNzdWUubXVsdGlwbGVPZn1gO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBab2RJc3N1ZUNvZGUubm90X2Zpbml0ZTpcbiAgICAgIG1lc3NhZ2UgPSBcIk51bWJlciBtdXN0IGJlIGZpbml0ZVwiO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIG1lc3NhZ2UgPSBfY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoaXNzdWUpO1xuICB9XG4gIHJldHVybiB7IG1lc3NhZ2UgfTtcbn07XG52YXIgb3ZlcnJpZGVFcnJvck1hcCA9IGVycm9yTWFwO1xuZnVuY3Rpb24gc2V0RXJyb3JNYXAobWFwKSB7XG4gIG92ZXJyaWRlRXJyb3JNYXAgPSBtYXA7XG59XG5mdW5jdGlvbiBnZXRFcnJvck1hcCgpIHtcbiAgcmV0dXJuIG92ZXJyaWRlRXJyb3JNYXA7XG59XG52YXIgbWFrZUlzc3VlID0gKHBhcmFtcykgPT4ge1xuICBjb25zdCB7IGRhdGEsIHBhdGgsIGVycm9yTWFwcywgaXNzdWVEYXRhIH0gPSBwYXJhbXM7XG4gIGNvbnN0IGZ1bGxQYXRoID0gWy4uLnBhdGgsIC4uLmlzc3VlRGF0YS5wYXRoIHx8IFtdXTtcbiAgY29uc3QgZnVsbElzc3VlID0ge1xuICAgIC4uLmlzc3VlRGF0YSxcbiAgICBwYXRoOiBmdWxsUGF0aFxuICB9O1xuICBpZiAoaXNzdWVEYXRhLm1lc3NhZ2UgIT09IHZvaWQgMCkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5pc3N1ZURhdGEsXG4gICAgICBwYXRoOiBmdWxsUGF0aCxcbiAgICAgIG1lc3NhZ2U6IGlzc3VlRGF0YS5tZXNzYWdlXG4gICAgfTtcbiAgfVxuICBsZXQgZXJyb3JNZXNzYWdlID0gXCJcIjtcbiAgY29uc3QgbWFwcyA9IGVycm9yTWFwcy5maWx0ZXIoKG0pID0+ICEhbSkuc2xpY2UoKS5yZXZlcnNlKCk7XG4gIGZvciAoY29uc3QgbWFwIG9mIG1hcHMpIHtcbiAgICBlcnJvck1lc3NhZ2UgPSBtYXAoZnVsbElzc3VlLCB7IGRhdGEsIGRlZmF1bHRFcnJvcjogZXJyb3JNZXNzYWdlIH0pLm1lc3NhZ2U7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICAuLi5pc3N1ZURhdGEsXG4gICAgcGF0aDogZnVsbFBhdGgsXG4gICAgbWVzc2FnZTogZXJyb3JNZXNzYWdlXG4gIH07XG59O1xudmFyIEVNUFRZX1BBVEggPSBbXTtcbmZ1bmN0aW9uIGFkZElzc3VlVG9Db250ZXh0KGN0eCwgaXNzdWVEYXRhKSB7XG4gIGNvbnN0IG92ZXJyaWRlTWFwID0gZ2V0RXJyb3JNYXAoKTtcbiAgY29uc3QgaXNzdWUgPSBtYWtlSXNzdWUoe1xuICAgIGlzc3VlRGF0YSxcbiAgICBkYXRhOiBjdHguZGF0YSxcbiAgICBwYXRoOiBjdHgucGF0aCxcbiAgICBlcnJvck1hcHM6IFtcbiAgICAgIGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLFxuICAgICAgY3R4LnNjaGVtYUVycm9yTWFwLFxuICAgICAgb3ZlcnJpZGVNYXAsXG4gICAgICBvdmVycmlkZU1hcCA9PT0gZXJyb3JNYXAgPyB2b2lkIDAgOiBlcnJvck1hcFxuICAgICAgLy8gdGhlbiBnbG9iYWwgZGVmYXVsdCBtYXBcbiAgICBdLmZpbHRlcigoeCkgPT4gISF4KVxuICB9KTtcbiAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaChpc3N1ZSk7XG59XG52YXIgUGFyc2VTdGF0dXMgPSBjbGFzcyBfUGFyc2VTdGF0dXMge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnZhbHVlID0gXCJ2YWxpZFwiO1xuICB9XG4gIGRpcnR5KCkge1xuICAgIGlmICh0aGlzLnZhbHVlID09PSBcInZhbGlkXCIpXG4gICAgICB0aGlzLnZhbHVlID0gXCJkaXJ0eVwiO1xuICB9XG4gIGFib3J0KCkge1xuICAgIGlmICh0aGlzLnZhbHVlICE9PSBcImFib3J0ZWRcIilcbiAgICAgIHRoaXMudmFsdWUgPSBcImFib3J0ZWRcIjtcbiAgfVxuICBzdGF0aWMgbWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdHMpIHtcbiAgICBjb25zdCBhcnJheVZhbHVlID0gW107XG4gICAgZm9yIChjb25zdCBzIG9mIHJlc3VsdHMpIHtcbiAgICAgIGlmIChzLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgaWYgKHMuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgYXJyYXlWYWx1ZS5wdXNoKHMudmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGFycmF5VmFsdWUgfTtcbiAgfVxuICBzdGF0aWMgYXN5bmMgbWVyZ2VPYmplY3RBc3luYyhzdGF0dXMsIHBhaXJzKSB7XG4gICAgY29uc3Qgc3luY1BhaXJzID0gW107XG4gICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICBjb25zdCBrZXkgPSBhd2FpdCBwYWlyLmtleTtcbiAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgIHN5bmNQYWlycy5wdXNoKHtcbiAgICAgICAga2V5LFxuICAgICAgICB2YWx1ZVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBfUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgc3luY1BhaXJzKTtcbiAgfVxuICBzdGF0aWMgbWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpIHtcbiAgICBjb25zdCBmaW5hbE9iamVjdCA9IHt9O1xuICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuICAgICAgY29uc3QgeyBrZXksIHZhbHVlIH0gPSBwYWlyO1xuICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgIGlmICh2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgaWYgKHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgIGlmIChrZXkudmFsdWUgIT09IFwiX19wcm90b19fXCIgJiYgKHR5cGVvZiB2YWx1ZS52YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIiB8fCBwYWlyLmFsd2F5c1NldCkpIHtcbiAgICAgICAgZmluYWxPYmplY3Rba2V5LnZhbHVlXSA9IHZhbHVlLnZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGZpbmFsT2JqZWN0IH07XG4gIH1cbn07XG52YXIgSU5WQUxJRCA9IE9iamVjdC5mcmVlemUoe1xuICBzdGF0dXM6IFwiYWJvcnRlZFwiXG59KTtcbnZhciBESVJUWSA9ICh2YWx1ZSkgPT4gKHsgc3RhdHVzOiBcImRpcnR5XCIsIHZhbHVlIH0pO1xudmFyIE9LID0gKHZhbHVlKSA9PiAoeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWUgfSk7XG52YXIgaXNBYm9ydGVkID0gKHgpID0+IHguc3RhdHVzID09PSBcImFib3J0ZWRcIjtcbnZhciBpc0RpcnR5ID0gKHgpID0+IHguc3RhdHVzID09PSBcImRpcnR5XCI7XG52YXIgaXNWYWxpZCA9ICh4KSA9PiB4LnN0YXR1cyA9PT0gXCJ2YWxpZFwiO1xudmFyIGlzQXN5bmMgPSAoeCkgPT4gdHlwZW9mIFByb21pc2UgIT09IFwidW5kZWZpbmVkXCIgJiYgeCBpbnN0YW5jZW9mIFByb21pc2U7XG5mdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xuICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7XG4gIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xuICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xufVxuZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XG4gIGlmIChraW5kID09PSBcIm1cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtcbiAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xuICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xuICByZXR1cm4ga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSwgdmFsdWU7XG59XG52YXIgZXJyb3JVdGlsO1xuKGZ1bmN0aW9uKGVycm9yVXRpbDIpIHtcbiAgZXJyb3JVdGlsMi5lcnJUb09iaiA9IChtZXNzYWdlKSA9PiB0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiA/IHsgbWVzc2FnZSB9IDogbWVzc2FnZSB8fCB7fTtcbiAgZXJyb3JVdGlsMi50b1N0cmluZyA9IChtZXNzYWdlKSA9PiB0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiA/IG1lc3NhZ2UgOiBtZXNzYWdlID09PSBudWxsIHx8IG1lc3NhZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1lc3NhZ2UubWVzc2FnZTtcbn0pKGVycm9yVXRpbCB8fCAoZXJyb3JVdGlsID0ge30pKTtcbnZhciBfWm9kRW51bV9jYWNoZTtcbnZhciBfWm9kTmF0aXZlRW51bV9jYWNoZTtcbnZhciBQYXJzZUlucHV0TGF6eVBhdGggPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHBhcmVudCwgdmFsdWUsIHBhdGgsIGtleSkge1xuICAgIHRoaXMuX2NhY2hlZFBhdGggPSBbXTtcbiAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICB0aGlzLmRhdGEgPSB2YWx1ZTtcbiAgICB0aGlzLl9wYXRoID0gcGF0aDtcbiAgICB0aGlzLl9rZXkgPSBrZXk7XG4gIH1cbiAgZ2V0IHBhdGgoKSB7XG4gICAgaWYgKCF0aGlzLl9jYWNoZWRQYXRoLmxlbmd0aCkge1xuICAgICAgaWYgKHRoaXMuX2tleSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIHRoaXMuX2NhY2hlZFBhdGgucHVzaCguLi50aGlzLl9wYXRoLCAuLi50aGlzLl9rZXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fY2FjaGVkUGF0aC5wdXNoKC4uLnRoaXMuX3BhdGgsIHRoaXMuX2tleSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jYWNoZWRQYXRoO1xuICB9XG59O1xudmFyIGhhbmRsZVJlc3VsdCA9IChjdHgsIHJlc3VsdCkgPT4ge1xuICBpZiAoaXNWYWxpZChyZXN1bHQpKSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0LnZhbHVlIH07XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFjdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlZhbGlkYXRpb24gZmFpbGVkIGJ1dCBubyBpc3N1ZXMgZGV0ZWN0ZWQuXCIpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgIGlmICh0aGlzLl9lcnJvcilcbiAgICAgICAgICByZXR1cm4gdGhpcy5fZXJyb3I7XG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgdGhpcy5fZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn07XG5mdW5jdGlvbiBwcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcykge1xuICBpZiAoIXBhcmFtcylcbiAgICByZXR1cm4ge307XG4gIGNvbnN0IHsgZXJyb3JNYXA6IGVycm9yTWFwMiwgaW52YWxpZF90eXBlX2Vycm9yLCByZXF1aXJlZF9lcnJvciwgZGVzY3JpcHRpb24gfSA9IHBhcmFtcztcbiAgaWYgKGVycm9yTWFwMiAmJiAoaW52YWxpZF90eXBlX2Vycm9yIHx8IHJlcXVpcmVkX2Vycm9yKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgdXNlIFwiaW52YWxpZF90eXBlX2Vycm9yXCIgb3IgXCJyZXF1aXJlZF9lcnJvclwiIGluIGNvbmp1bmN0aW9uIHdpdGggY3VzdG9tIGVycm9yIG1hcC5gKTtcbiAgfVxuICBpZiAoZXJyb3JNYXAyKVxuICAgIHJldHVybiB7IGVycm9yTWFwOiBlcnJvck1hcDIsIGRlc2NyaXB0aW9uIH07XG4gIGNvbnN0IGN1c3RvbU1hcCA9IChpc3MsIGN0eCkgPT4ge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgeyBtZXNzYWdlIH0gPSBwYXJhbXM7XG4gICAgaWYgKGlzcy5jb2RlID09PSBcImludmFsaWRfZW51bV92YWx1ZVwiKSB7XG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlICE9PSBudWxsICYmIG1lc3NhZ2UgIT09IHZvaWQgMCA/IG1lc3NhZ2UgOiBjdHguZGVmYXVsdEVycm9yIH07XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY3R4LmRhdGEgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IChfYSA9IG1lc3NhZ2UgIT09IG51bGwgJiYgbWVzc2FnZSAhPT0gdm9pZCAwID8gbWVzc2FnZSA6IHJlcXVpcmVkX2Vycm9yKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBjdHguZGVmYXVsdEVycm9yIH07XG4gICAgfVxuICAgIGlmIChpc3MuY29kZSAhPT0gXCJpbnZhbGlkX3R5cGVcIilcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICByZXR1cm4geyBtZXNzYWdlOiAoX2IgPSBtZXNzYWdlICE9PSBudWxsICYmIG1lc3NhZ2UgIT09IHZvaWQgMCA/IG1lc3NhZ2UgOiBpbnZhbGlkX3R5cGVfZXJyb3IpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgfTtcbiAgcmV0dXJuIHsgZXJyb3JNYXA6IGN1c3RvbU1hcCwgZGVzY3JpcHRpb24gfTtcbn1cbnZhciBab2RUeXBlID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihkZWYpIHtcbiAgICB0aGlzLnNwYSA9IHRoaXMuc2FmZVBhcnNlQXN5bmM7XG4gICAgdGhpcy5fZGVmID0gZGVmO1xuICAgIHRoaXMucGFyc2UgPSB0aGlzLnBhcnNlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zYWZlUGFyc2UgPSB0aGlzLnNhZmVQYXJzZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMucGFyc2VBc3luYyA9IHRoaXMucGFyc2VBc3luYy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2FmZVBhcnNlQXN5bmMgPSB0aGlzLnNhZmVQYXJzZUFzeW5jLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zcGEgPSB0aGlzLnNwYS5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVmaW5lID0gdGhpcy5yZWZpbmUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnJlZmluZW1lbnQgPSB0aGlzLnJlZmluZW1lbnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLnN1cGVyUmVmaW5lID0gdGhpcy5zdXBlclJlZmluZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMub3B0aW9uYWwgPSB0aGlzLm9wdGlvbmFsLmJpbmQodGhpcyk7XG4gICAgdGhpcy5udWxsYWJsZSA9IHRoaXMubnVsbGFibGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLm51bGxpc2ggPSB0aGlzLm51bGxpc2guYmluZCh0aGlzKTtcbiAgICB0aGlzLmFycmF5ID0gdGhpcy5hcnJheS5iaW5kKHRoaXMpO1xuICAgIHRoaXMucHJvbWlzZSA9IHRoaXMucHJvbWlzZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMub3IgPSB0aGlzLm9yLmJpbmQodGhpcyk7XG4gICAgdGhpcy5hbmQgPSB0aGlzLmFuZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMudHJhbnNmb3JtID0gdGhpcy50cmFuc2Zvcm0uYmluZCh0aGlzKTtcbiAgICB0aGlzLmJyYW5kID0gdGhpcy5icmFuZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZGVmYXVsdCA9IHRoaXMuZGVmYXVsdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY2F0Y2ggPSB0aGlzLmNhdGNoLmJpbmQodGhpcyk7XG4gICAgdGhpcy5kZXNjcmliZSA9IHRoaXMuZGVzY3JpYmUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnBpcGUgPSB0aGlzLnBpcGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLnJlYWRvbmx5ID0gdGhpcy5yZWFkb25seS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaXNOdWxsYWJsZSA9IHRoaXMuaXNOdWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaXNPcHRpb25hbCA9IHRoaXMuaXNPcHRpb25hbC5iaW5kKHRoaXMpO1xuICB9XG4gIGdldCBkZXNjcmlwdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fZGVmLmRlc2NyaXB0aW9uO1xuICB9XG4gIF9nZXRUeXBlKGlucHV0KSB7XG4gICAgcmV0dXJuIGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSk7XG4gIH1cbiAgX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpIHtcbiAgICByZXR1cm4gY3R4IHx8IHtcbiAgICAgIGNvbW1vbjogaW5wdXQucGFyZW50LmNvbW1vbixcbiAgICAgIGRhdGE6IGlucHV0LmRhdGEsXG4gICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGlucHV0LmRhdGEpLFxuICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgIHBhdGg6IGlucHV0LnBhdGgsXG4gICAgICBwYXJlbnQ6IGlucHV0LnBhcmVudFxuICAgIH07XG4gIH1cbiAgX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IG5ldyBQYXJzZVN0YXR1cygpLFxuICAgICAgY3R4OiB7XG4gICAgICAgIGNvbW1vbjogaW5wdXQucGFyZW50LmNvbW1vbixcbiAgICAgICAgZGF0YTogaW5wdXQuZGF0YSxcbiAgICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKSxcbiAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgcGF0aDogaW5wdXQucGF0aCxcbiAgICAgICAgcGFyZW50OiBpbnB1dC5wYXJlbnRcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIF9wYXJzZVN5bmMoaW5wdXQpIHtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZShpbnB1dCk7XG4gICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3luY2hyb25vdXMgcGFyc2UgZW5jb3VudGVyZWQgcHJvbWlzZS5cIik7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgX3BhcnNlQXN5bmMoaW5wdXQpIHtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZShpbnB1dCk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICB9XG4gIHBhcnNlKGRhdGEsIHBhcmFtcykge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuc2FmZVBhcnNlKGRhdGEsIHBhcmFtcyk7XG4gICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgIHRocm93IHJlc3VsdC5lcnJvcjtcbiAgfVxuICBzYWZlUGFyc2UoZGF0YSwgcGFyYW1zKSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IGN0eCA9IHtcbiAgICAgIGNvbW1vbjoge1xuICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICBhc3luYzogKF9hID0gcGFyYW1zID09PSBudWxsIHx8IHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zLmFzeW5jKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZSxcbiAgICAgICAgY29udGV4dHVhbEVycm9yTWFwOiBwYXJhbXMgPT09IG51bGwgfHwgcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbXMuZXJyb3JNYXBcbiAgICAgIH0sXG4gICAgICBwYXRoOiAocGFyYW1zID09PSBudWxsIHx8IHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zLnBhdGgpIHx8IFtdLFxuICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgIGRhdGEsXG4gICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpXG4gICAgfTtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZVN5bmMoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgcmV0dXJuIGhhbmRsZVJlc3VsdChjdHgsIHJlc3VsdCk7XG4gIH1cbiAgYXN5bmMgcGFyc2VBc3luYyhkYXRhLCBwYXJhbXMpIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNhZmVQYXJzZUFzeW5jKGRhdGEsIHBhcmFtcyk7XG4gICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgIHRocm93IHJlc3VsdC5lcnJvcjtcbiAgfVxuICBhc3luYyBzYWZlUGFyc2VBc3luYyhkYXRhLCBwYXJhbXMpIHtcbiAgICBjb25zdCBjdHggPSB7XG4gICAgICBjb21tb246IHtcbiAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgY29udGV4dHVhbEVycm9yTWFwOiBwYXJhbXMgPT09IG51bGwgfHwgcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbXMuZXJyb3JNYXAsXG4gICAgICAgIGFzeW5jOiB0cnVlXG4gICAgICB9LFxuICAgICAgcGF0aDogKHBhcmFtcyA9PT0gbnVsbCB8fCBwYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmFtcy5wYXRoKSB8fCBbXSxcbiAgICAgIHNjaGVtYUVycm9yTWFwOiB0aGlzLl9kZWYuZXJyb3JNYXAsXG4gICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICBkYXRhLFxuICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShkYXRhKVxuICAgIH07XG4gICAgY29uc3QgbWF5YmVBc3luY1Jlc3VsdCA9IHRoaXMuX3BhcnNlKHsgZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IChpc0FzeW5jKG1heWJlQXN5bmNSZXN1bHQpID8gbWF5YmVBc3luY1Jlc3VsdCA6IFByb21pc2UucmVzb2x2ZShtYXliZUFzeW5jUmVzdWx0KSk7XG4gICAgcmV0dXJuIGhhbmRsZVJlc3VsdChjdHgsIHJlc3VsdCk7XG4gIH1cbiAgcmVmaW5lKGNoZWNrLCBtZXNzYWdlKSB7XG4gICAgY29uc3QgZ2V0SXNzdWVQcm9wZXJ0aWVzID0gKHZhbCkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBtZXNzYWdlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiB7IG1lc3NhZ2UgfTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gbWVzc2FnZSh2YWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudCgodmFsLCBjdHgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGNoZWNrKHZhbCk7XG4gICAgICBjb25zdCBzZXRFcnJvciA9ICgpID0+IGN0eC5hZGRJc3N1ZSh7XG4gICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5jdXN0b20sXG4gICAgICAgIC4uLmdldElzc3VlUHJvcGVydGllcyh2YWwpXG4gICAgICB9KTtcbiAgICAgIGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiByZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgc2V0RXJyb3IoKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgIHNldEVycm9yKCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIHJlZmluZW1lbnQoY2hlY2ssIHJlZmluZW1lbnREYXRhKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlZmluZW1lbnQoKHZhbCwgY3R4KSA9PiB7XG4gICAgICBpZiAoIWNoZWNrKHZhbCkpIHtcbiAgICAgICAgY3R4LmFkZElzc3VlKHR5cGVvZiByZWZpbmVtZW50RGF0YSA9PT0gXCJmdW5jdGlvblwiID8gcmVmaW5lbWVudERhdGEodmFsLCBjdHgpIDogcmVmaW5lbWVudERhdGEpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBfcmVmaW5lbWVudChyZWZpbmVtZW50KSB7XG4gICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgIHNjaGVtYTogdGhpcyxcbiAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgIGVmZmVjdDogeyB0eXBlOiBcInJlZmluZW1lbnRcIiwgcmVmaW5lbWVudCB9XG4gICAgfSk7XG4gIH1cbiAgc3VwZXJSZWZpbmUocmVmaW5lbWVudCkge1xuICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KHJlZmluZW1lbnQpO1xuICB9XG4gIG9wdGlvbmFsKCkge1xuICAgIHJldHVybiBab2RPcHRpb25hbC5jcmVhdGUodGhpcywgdGhpcy5fZGVmKTtcbiAgfVxuICBudWxsYWJsZSgpIHtcbiAgICByZXR1cm4gWm9kTnVsbGFibGUuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gIH1cbiAgbnVsbGlzaCgpIHtcbiAgICByZXR1cm4gdGhpcy5udWxsYWJsZSgpLm9wdGlvbmFsKCk7XG4gIH1cbiAgYXJyYXkoKSB7XG4gICAgcmV0dXJuIFpvZEFycmF5LmNyZWF0ZSh0aGlzLCB0aGlzLl9kZWYpO1xuICB9XG4gIHByb21pc2UoKSB7XG4gICAgcmV0dXJuIFpvZFByb21pc2UuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gIH1cbiAgb3Iob3B0aW9uKSB7XG4gICAgcmV0dXJuIFpvZFVuaW9uLmNyZWF0ZShbdGhpcywgb3B0aW9uXSwgdGhpcy5fZGVmKTtcbiAgfVxuICBhbmQoaW5jb21pbmcpIHtcbiAgICByZXR1cm4gWm9kSW50ZXJzZWN0aW9uLmNyZWF0ZSh0aGlzLCBpbmNvbWluZywgdGhpcy5fZGVmKTtcbiAgfVxuICB0cmFuc2Zvcm0odHJhbnNmb3JtKSB7XG4gICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgIHNjaGVtYTogdGhpcyxcbiAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgIGVmZmVjdDogeyB0eXBlOiBcInRyYW5zZm9ybVwiLCB0cmFuc2Zvcm0gfVxuICAgIH0pO1xuICB9XG4gIGRlZmF1bHQoZGVmKSB7XG4gICAgY29uc3QgZGVmYXVsdFZhbHVlRnVuYyA9IHR5cGVvZiBkZWYgPT09IFwiZnVuY3Rpb25cIiA/IGRlZiA6ICgpID0+IGRlZjtcbiAgICByZXR1cm4gbmV3IFpvZERlZmF1bHQoe1xuICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgaW5uZXJUeXBlOiB0aGlzLFxuICAgICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWVGdW5jLFxuICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0XG4gICAgfSk7XG4gIH1cbiAgYnJhbmQoKSB7XG4gICAgcmV0dXJuIG5ldyBab2RCcmFuZGVkKHtcbiAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQnJhbmRlZCxcbiAgICAgIHR5cGU6IHRoaXMsXG4gICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZilcbiAgICB9KTtcbiAgfVxuICBjYXRjaChkZWYpIHtcbiAgICBjb25zdCBjYXRjaFZhbHVlRnVuYyA9IHR5cGVvZiBkZWYgPT09IFwiZnVuY3Rpb25cIiA/IGRlZiA6ICgpID0+IGRlZjtcbiAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgIGlubmVyVHlwZTogdGhpcyxcbiAgICAgIGNhdGNoVmFsdWU6IGNhdGNoVmFsdWVGdW5jLFxuICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaFxuICAgIH0pO1xuICB9XG4gIGRlc2NyaWJlKGRlc2NyaXB0aW9uKSB7XG4gICAgY29uc3QgVGhpcyA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgcmV0dXJuIG5ldyBUaGlzKHtcbiAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgIGRlc2NyaXB0aW9uXG4gICAgfSk7XG4gIH1cbiAgcGlwZSh0YXJnZXQpIHtcbiAgICByZXR1cm4gWm9kUGlwZWxpbmUuY3JlYXRlKHRoaXMsIHRhcmdldCk7XG4gIH1cbiAgcmVhZG9ubHkoKSB7XG4gICAgcmV0dXJuIFpvZFJlYWRvbmx5LmNyZWF0ZSh0aGlzKTtcbiAgfVxuICBpc09wdGlvbmFsKCkge1xuICAgIHJldHVybiB0aGlzLnNhZmVQYXJzZSh2b2lkIDApLnN1Y2Nlc3M7XG4gIH1cbiAgaXNOdWxsYWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UobnVsbCkuc3VjY2VzcztcbiAgfVxufTtcbnZhciBjdWlkUmVnZXggPSAvXmNbXlxccy1dezgsfSQvaTtcbnZhciBjdWlkMlJlZ2V4ID0gL15bMC05YS16XSskLztcbnZhciB1bGlkUmVnZXggPSAvXlswLTlBLUhKS01OUC1UVi1aXXsyNn0kLztcbnZhciB1dWlkUmVnZXggPSAvXlswLTlhLWZBLUZdezh9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezEyfSQvaTtcbnZhciBuYW5vaWRSZWdleCA9IC9eW2EtejAtOV8tXXsyMX0kL2k7XG52YXIgZHVyYXRpb25SZWdleCA9IC9eWy0rXT9QKD8hJCkoPzooPzpbLStdP1xcZCtZKXwoPzpbLStdP1xcZCtbLixdXFxkK1kkKSk/KD86KD86Wy0rXT9cXGQrTSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtNJCkpPyg/Oig/OlstK10/XFxkK1cpfCg/OlstK10/XFxkK1suLF1cXGQrVyQpKT8oPzooPzpbLStdP1xcZCtEKXwoPzpbLStdP1xcZCtbLixdXFxkK0QkKSk/KD86VCg/PVtcXGQrLV0pKD86KD86Wy0rXT9cXGQrSCl8KD86Wy0rXT9cXGQrWy4sXVxcZCtIJCkpPyg/Oig/OlstK10/XFxkK00pfCg/OlstK10/XFxkK1suLF1cXGQrTSQpKT8oPzpbLStdP1xcZCsoPzpbLixdXFxkKyk/Uyk/KT8/JC87XG52YXIgZW1haWxSZWdleCA9IC9eKD8hXFwuKSg/IS4qXFwuXFwuKShbQS1aMC05XycrXFwtXFwuXSopW0EtWjAtOV8rLV1AKFtBLVowLTldW0EtWjAtOVxcLV0qXFwuKStbQS1aXXsyLH0kL2k7XG52YXIgX2Vtb2ppUmVnZXggPSBgXihcXFxccHtFeHRlbmRlZF9QaWN0b2dyYXBoaWN9fFxcXFxwe0Vtb2ppX0NvbXBvbmVudH0pKyRgO1xudmFyIGVtb2ppUmVnZXg7XG52YXIgaXB2NFJlZ2V4ID0gL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSkkLztcbnZhciBpcHY2UmVnZXggPSAvXigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSkkLztcbnZhciBiYXNlNjRSZWdleCA9IC9eKFswLTlhLXpBLVorL117NH0pKigoWzAtOWEtekEtWisvXXsyfT09KXwoWzAtOWEtekEtWisvXXszfT0pKT8kLztcbnZhciBkYXRlUmVnZXhTb3VyY2UgPSBgKChcXFxcZFxcXFxkWzI0NjhdWzA0OF18XFxcXGRcXFxcZFsxMzU3OV1bMjZdfFxcXFxkXFxcXGQwWzQ4XXxbMDI0NjhdWzA0OF0wMHxbMTM1NzldWzI2XTAwKS0wMi0yOXxcXFxcZHs0fS0oKDBbMTM1NzhdfDFbMDJdKS0oMFsxLTldfFsxMl1cXFxcZHwzWzAxXSl8KDBbNDY5XXwxMSktKDBbMS05XXxbMTJdXFxcXGR8MzApfCgwMiktKDBbMS05XXwxXFxcXGR8MlswLThdKSkpYDtcbnZhciBkYXRlUmVnZXggPSBuZXcgUmVnRXhwKGBeJHtkYXRlUmVnZXhTb3VyY2V9JGApO1xuZnVuY3Rpb24gdGltZVJlZ2V4U291cmNlKGFyZ3MpIHtcbiAgbGV0IHJlZ2V4ID0gYChbMDFdXFxcXGR8MlswLTNdKTpbMC01XVxcXFxkOlswLTVdXFxcXGRgO1xuICBpZiAoYXJncy5wcmVjaXNpb24pIHtcbiAgICByZWdleCA9IGAke3JlZ2V4fVxcXFwuXFxcXGR7JHthcmdzLnByZWNpc2lvbn19YDtcbiAgfSBlbHNlIGlmIChhcmdzLnByZWNpc2lvbiA9PSBudWxsKSB7XG4gICAgcmVnZXggPSBgJHtyZWdleH0oXFxcXC5cXFxcZCspP2A7XG4gIH1cbiAgcmV0dXJuIHJlZ2V4O1xufVxuZnVuY3Rpb24gdGltZVJlZ2V4KGFyZ3MpIHtcbiAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3RpbWVSZWdleFNvdXJjZShhcmdzKX0kYCk7XG59XG5mdW5jdGlvbiBkYXRldGltZVJlZ2V4KGFyZ3MpIHtcbiAgbGV0IHJlZ2V4ID0gYCR7ZGF0ZVJlZ2V4U291cmNlfVQke3RpbWVSZWdleFNvdXJjZShhcmdzKX1gO1xuICBjb25zdCBvcHRzID0gW107XG4gIG9wdHMucHVzaChhcmdzLmxvY2FsID8gYFo/YCA6IGBaYCk7XG4gIGlmIChhcmdzLm9mZnNldClcbiAgICBvcHRzLnB1c2goYChbKy1dXFxcXGR7Mn06P1xcXFxkezJ9KWApO1xuICByZWdleCA9IGAke3JlZ2V4fSgke29wdHMuam9pbihcInxcIil9KWA7XG4gIHJldHVybiBuZXcgUmVnRXhwKGBeJHtyZWdleH0kYCk7XG59XG5mdW5jdGlvbiBpc1ZhbGlkSVAoaXAsIHZlcnNpb24pIHtcbiAgaWYgKCh2ZXJzaW9uID09PSBcInY0XCIgfHwgIXZlcnNpb24pICYmIGlwdjRSZWdleC50ZXN0KGlwKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmICgodmVyc2lvbiA9PT0gXCJ2NlwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY2UmVnZXgudGVzdChpcCkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG52YXIgWm9kU3RyaW5nID0gY2xhc3MgX1pvZFN0cmluZyBleHRlbmRzIFpvZFR5cGUge1xuICBfcGFyc2UoaW5wdXQpIHtcbiAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgaW5wdXQuZGF0YSA9IFN0cmluZyhpbnB1dC5kYXRhKTtcbiAgICB9XG4gICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZykge1xuICAgICAgY29uc3QgY3R4MiA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eDIsIHtcbiAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc3RyaW5nLFxuICAgICAgICByZWNlaXZlZDogY3R4Mi5wYXJzZWRUeXBlXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBJTlZBTElEO1xuICAgIH1cbiAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICBsZXQgY3R4ID0gdm9pZCAwO1xuICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgaWYgKGlucHV0LmRhdGEubGVuZ3RoIDwgY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICBpZiAoaW5wdXQuZGF0YS5sZW5ndGggPiBjaGVjay52YWx1ZSkge1xuICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJsZW5ndGhcIikge1xuICAgICAgICBjb25zdCB0b29CaWcgPSBpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlO1xuICAgICAgICBjb25zdCB0b29TbWFsbCA9IGlucHV0LmRhdGEubGVuZ3RoIDwgY2hlY2sudmFsdWU7XG4gICAgICAgIGlmICh0b29CaWcgfHwgdG9vU21hbGwpIHtcbiAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgIG1heGltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgIGV4YWN0OiB0cnVlLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHRvb1NtYWxsKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtYWlsXCIpIHtcbiAgICAgICAgaWYgKCFlbWFpbFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1haWxcIixcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtb2ppXCIpIHtcbiAgICAgICAgaWYgKCFlbW9qaVJlZ2V4KSB7XG4gICAgICAgICAgZW1vamlSZWdleCA9IG5ldyBSZWdFeHAoX2Vtb2ppUmVnZXgsIFwidVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWVtb2ppUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJlbW9qaVwiLFxuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXVpZFwiKSB7XG4gICAgICAgIGlmICghdXVpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb246IFwidXVpZFwiLFxuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibmFub2lkXCIpIHtcbiAgICAgICAgaWYgKCFuYW5vaWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICB2YWxpZGF0aW9uOiBcIm5hbm9pZFwiLFxuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZFwiKSB7XG4gICAgICAgIGlmICghY3VpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZFwiLFxuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZDJcIikge1xuICAgICAgICBpZiAoIWN1aWQyUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJjdWlkMlwiLFxuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidWxpZFwiKSB7XG4gICAgICAgIGlmICghdWxpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb246IFwidWxpZFwiLFxuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXJsXCIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBuZXcgVVJMKGlucHV0LmRhdGEpO1xuICAgICAgICB9IGNhdGNoIChfYSkge1xuICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1cmxcIixcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInJlZ2V4XCIpIHtcbiAgICAgICAgY2hlY2sucmVnZXgubGFzdEluZGV4ID0gMDtcbiAgICAgICAgY29uc3QgdGVzdFJlc3VsdCA9IGNoZWNrLnJlZ2V4LnRlc3QoaW5wdXQuZGF0YSk7XG4gICAgICAgIGlmICghdGVzdFJlc3VsdCkge1xuICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJyZWdleFwiLFxuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidHJpbVwiKSB7XG4gICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRyaW0oKTtcbiAgICAgIH0gZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJpbmNsdWRlc1wiKSB7XG4gICAgICAgIGlmICghaW5wdXQuZGF0YS5pbmNsdWRlcyhjaGVjay52YWx1ZSwgY2hlY2sucG9zaXRpb24pKSB7XG4gICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGluY2x1ZGVzOiBjaGVjay52YWx1ZSwgcG9zaXRpb246IGNoZWNrLnBvc2l0aW9uIH0sXG4gICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0b0xvd2VyQ2FzZVwiKSB7XG4gICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvTG93ZXJDYXNlKCk7XG4gICAgICB9IGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9VcHBlckNhc2VcIikge1xuICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50b1VwcGVyQ2FzZSgpO1xuICAgICAgfSBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInN0YXJ0c1dpdGhcIikge1xuICAgICAgICBpZiAoIWlucHV0LmRhdGEuc3RhcnRzV2l0aChjaGVjay52YWx1ZSkpIHtcbiAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgIHZhbGlkYXRpb246IHsgc3RhcnRzV2l0aDogY2hlY2sudmFsdWUgfSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVuZHNXaXRoXCIpIHtcbiAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmVuZHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgdmFsaWRhdGlvbjogeyBlbmRzV2l0aDogY2hlY2sudmFsdWUgfSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGV0aW1lXCIpIHtcbiAgICAgICAgY29uc3QgcmVnZXggPSBkYXRldGltZVJlZ2V4KGNoZWNrKTtcbiAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkYXRlXCIpIHtcbiAgICAgICAgY29uc3QgcmVnZXggPSBkYXRlUmVnZXg7XG4gICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkYXRlXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0aW1lXCIpIHtcbiAgICAgICAgY29uc3QgcmVnZXggPSB0aW1lUmVnZXgoY2hlY2spO1xuICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgIHZhbGlkYXRpb246IFwidGltZVwiLFxuICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZHVyYXRpb25cIikge1xuICAgICAgICBpZiAoIWR1cmF0aW9uUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkdXJhdGlvblwiLFxuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiaXBcIikge1xuICAgICAgICBpZiAoIWlzVmFsaWRJUChpbnB1dC5kYXRhLCBjaGVjay52ZXJzaW9uKSkge1xuICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJpcFwiLFxuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiYmFzZTY0XCIpIHtcbiAgICAgICAgaWYgKCFiYXNlNjRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICB2YWxpZGF0aW9uOiBcImJhc2U2NFwiLFxuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gIH1cbiAgX3JlZ2V4KHJlZ2V4LCB2YWxpZGF0aW9uLCBtZXNzYWdlKSB7XG4gICAgcmV0dXJuIHRoaXMucmVmaW5lbWVudCgoZGF0YSkgPT4gcmVnZXgudGVzdChkYXRhKSwge1xuICAgICAgdmFsaWRhdGlvbixcbiAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKVxuICAgIH0pO1xuICB9XG4gIF9hZGRDaGVjayhjaGVjaykge1xuICAgIHJldHVybiBuZXcgX1pvZFN0cmluZyh7XG4gICAgICAuLi50aGlzLl9kZWYsXG4gICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCBjaGVja11cbiAgICB9KTtcbiAgfVxuICBlbWFpbChtZXNzYWdlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJlbWFpbFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gIH1cbiAgdXJsKG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcInVybFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gIH1cbiAgZW1vamkobWVzc2FnZSkge1xuICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZW1vamlcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICB9XG4gIHV1aWQobWVzc2FnZSkge1xuICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidXVpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gIH1cbiAgbmFub2lkKG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcIm5hbm9pZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gIH1cbiAgY3VpZChtZXNzYWdlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgfVxuICBjdWlkMihtZXNzYWdlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkMlwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gIH1cbiAgdWxpZChtZXNzYWdlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1bGlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgfVxuICBiYXNlNjQobWVzc2FnZSkge1xuICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiYmFzZTY0XCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgfVxuICBpcChvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJpcFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gIH1cbiAgZGF0ZXRpbWUob3B0aW9ucykge1xuICAgIHZhciBfYSwgX2I7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICBraW5kOiBcImRhdGV0aW1lXCIsXG4gICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgb2Zmc2V0OiBmYWxzZSxcbiAgICAgICAgbG9jYWw6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiBvcHRpb25zXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgIGtpbmQ6IFwiZGF0ZXRpbWVcIixcbiAgICAgIHByZWNpc2lvbjogdHlwZW9mIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMucHJlY2lzaW9uKSA9PT0gXCJ1bmRlZmluZWRcIiA/IG51bGwgOiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMucHJlY2lzaW9uLFxuICAgICAgb2Zmc2V0OiAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMub2Zmc2V0KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZSxcbiAgICAgIGxvY2FsOiAoX2IgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMubG9jYWwpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGZhbHNlLFxuICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5tZXNzYWdlKVxuICAgIH0pO1xuICB9XG4gIGRhdGUobWVzc2FnZSkge1xuICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZGF0ZVwiLCBtZXNzYWdlIH0pO1xuICB9XG4gIHRpbWUob3B0aW9ucykge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAga2luZDogXCJ0aW1lXCIsXG4gICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgbWVzc2FnZTogb3B0aW9uc1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICBraW5kOiBcInRpbWVcIixcbiAgICAgIHByZWNpc2lvbjogdHlwZW9mIChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMucHJlY2lzaW9uKSA9PT0gXCJ1bmRlZmluZWRcIiA/IG51bGwgOiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMucHJlY2lzaW9uLFxuICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5tZXNzYWdlKVxuICAgIH0pO1xuICB9XG4gIGR1cmF0aW9uKG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImR1cmF0aW9uXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgfVxuICByZWdleChyZWdleCwgbWVzc2FnZSkge1xuICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICBraW5kOiBcInJlZ2V4XCIsXG4gICAgICByZWdleCxcbiAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKVxuICAgIH0pO1xuICB9XG4gIGluY2x1ZGVzKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgIGtpbmQ6IFwiaW5jbHVkZXNcIixcbiAgICAgIHZhbHVlLFxuICAgICAgcG9zaXRpb246IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5wb3NpdGlvbixcbiAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMubWVzc2FnZSlcbiAgICB9KTtcbiAgfVxuICBzdGFydHNXaXRoKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgIGtpbmQ6IFwic3RhcnRzV2l0aFwiLFxuICAgICAgdmFsdWUsXG4gICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSlcbiAgICB9KTtcbiAgfVxuICBlbmRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICBraW5kOiBcImVuZHNXaXRoXCIsXG4gICAgICB2YWx1ZSxcbiAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKVxuICAgIH0pO1xuICB9XG4gIG1pbihtaW5MZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAga2luZDogXCJtaW5cIixcbiAgICAgIHZhbHVlOiBtaW5MZW5ndGgsXG4gICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSlcbiAgICB9KTtcbiAgfVxuICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICB2YWx1ZTogbWF4TGVuZ3RoLFxuICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpXG4gICAgfSk7XG4gIH1cbiAgbGVuZ3RoKGxlbiwgbWVzc2FnZSkge1xuICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICBraW5kOiBcImxlbmd0aFwiLFxuICAgICAgdmFsdWU6IGxlbixcbiAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCBVc2Ugei5zdHJpbmcoKS5taW4oMSkgaW5zdGVhZC5cbiAgICogQHNlZSB7QGxpbmsgWm9kU3RyaW5nLm1pbn1cbiAgICovXG4gIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gdGhpcy5taW4oMSwgZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpKTtcbiAgfVxuICB0cmltKCkge1xuICAgIHJldHVybiBuZXcgX1pvZFN0cmluZyh7XG4gICAgICAuLi50aGlzLl9kZWYsXG4gICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidHJpbVwiIH1dXG4gICAgfSk7XG4gIH1cbiAgdG9Mb3dlckNhc2UoKSB7XG4gICAgcmV0dXJuIG5ldyBfWm9kU3RyaW5nKHtcbiAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b0xvd2VyQ2FzZVwiIH1dXG4gICAgfSk7XG4gIH1cbiAgdG9VcHBlckNhc2UoKSB7XG4gICAgcmV0dXJuIG5ldyBfWm9kU3RyaW5nKHtcbiAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b1VwcGVyQ2FzZVwiIH1dXG4gICAgfSk7XG4gIH1cbiAgZ2V0IGlzRGF0ZXRpbWUoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJkYXRldGltZVwiKTtcbiAgfVxuICBnZXQgaXNEYXRlKCkge1xuICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZVwiKTtcbiAgfVxuICBnZXQgaXNUaW1lKCkge1xuICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidGltZVwiKTtcbiAgfVxuICBnZXQgaXNEdXJhdGlvbigpIHtcbiAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImR1cmF0aW9uXCIpO1xuICB9XG4gIGdldCBpc0VtYWlsKCkge1xuICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZW1haWxcIik7XG4gIH1cbiAgZ2V0IGlzVVJMKCkge1xuICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidXJsXCIpO1xuICB9XG4gIGdldCBpc0Vtb2ppKCkge1xuICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZW1vamlcIik7XG4gIH1cbiAgZ2V0IGlzVVVJRCgpIHtcbiAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInV1aWRcIik7XG4gIH1cbiAgZ2V0IGlzTkFOT0lEKCkge1xuICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwibmFub2lkXCIpO1xuICB9XG4gIGdldCBpc0NVSUQoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJjdWlkXCIpO1xuICB9XG4gIGdldCBpc0NVSUQyKCkge1xuICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZDJcIik7XG4gIH1cbiAgZ2V0IGlzVUxJRCgpIHtcbiAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInVsaWRcIik7XG4gIH1cbiAgZ2V0IGlzSVAoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJpcFwiKTtcbiAgfVxuICBnZXQgaXNCYXNlNjQoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJiYXNlNjRcIik7XG4gIH1cbiAgZ2V0IG1pbkxlbmd0aCgpIHtcbiAgICBsZXQgbWluID0gbnVsbDtcbiAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtaW47XG4gIH1cbiAgZ2V0IG1heExlbmd0aCgpIHtcbiAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtYXg7XG4gIH1cbn07XG5ab2RTdHJpbmcuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICB2YXIgX2E7XG4gIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICBjaGVja3M6IFtdLFxuICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nLFxuICAgIGNvZXJjZTogKF9hID0gcGFyYW1zID09PSBudWxsIHx8IHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zLmNvZXJjZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2UsXG4gICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpXG4gIH0pO1xufTtcbmZ1bmN0aW9uIGZsb2F0U2FmZVJlbWFpbmRlcih2YWwsIHN0ZXApIHtcbiAgY29uc3QgdmFsRGVjQ291bnQgPSAodmFsLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aDtcbiAgY29uc3Qgc3RlcERlY0NvdW50ID0gKHN0ZXAudG9TdHJpbmcoKS5zcGxpdChcIi5cIilbMV0gfHwgXCJcIikubGVuZ3RoO1xuICBjb25zdCBkZWNDb3VudCA9IHZhbERlY0NvdW50ID4gc3RlcERlY0NvdW50ID8gdmFsRGVjQ291bnQgOiBzdGVwRGVjQ291bnQ7XG4gIGNvbnN0IHZhbEludCA9IHBhcnNlSW50KHZhbC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gIGNvbnN0IHN0ZXBJbnQgPSBwYXJzZUludChzdGVwLnRvRml4ZWQoZGVjQ291bnQpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbiAgcmV0dXJuIHZhbEludCAlIHN0ZXBJbnQgLyBNYXRoLnBvdygxMCwgZGVjQ291bnQpO1xufVxudmFyIFpvZE51bWJlciA9IGNsYXNzIF9ab2ROdW1iZXIgZXh0ZW5kcyBab2RUeXBlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgIHRoaXMubWF4ID0gdGhpcy5sdGU7XG4gICAgdGhpcy5zdGVwID0gdGhpcy5tdWx0aXBsZU9mO1xuICB9XG4gIF9wYXJzZShpbnB1dCkge1xuICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICBpbnB1dC5kYXRhID0gTnVtYmVyKGlucHV0LmRhdGEpO1xuICAgIH1cbiAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubnVtYmVyKSB7XG4gICAgICBjb25zdCBjdHgyID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4Miwge1xuICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5udW1iZXIsXG4gICAgICAgIHJlY2VpdmVkOiBjdHgyLnBhcnNlZFR5cGVcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxuICAgIGxldCBjdHggPSB2b2lkIDA7XG4gICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJpbnRcIikge1xuICAgICAgICBpZiAoIXV0aWwuaXNJbnRlZ2VyKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFwiaW50ZWdlclwiLFxuICAgICAgICAgICAgcmVjZWl2ZWQ6IFwiZmxvYXRcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgaWYgKHRvb1NtYWxsKSB7XG4gICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBjaGVjay5pbmNsdXNpdmUsXG4gICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgIG1heGltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibXVsdGlwbGVPZlwiKSB7XG4gICAgICAgIGlmIChmbG9hdFNhZmVSZW1haW5kZXIoaW5wdXQuZGF0YSwgY2hlY2sudmFsdWUpICE9PSAwKSB7XG4gICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJmaW5pdGVcIikge1xuICAgICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShpbnB1dC5kYXRhKSkge1xuICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9maW5pdGUsXG4gICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgfVxuICBndGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgfVxuICBndCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgfVxuICBsdGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgfVxuICBsdCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgfVxuICBzZXRMaW1pdChraW5kLCB2YWx1ZSwgaW5jbHVzaXZlLCBtZXNzYWdlKSB7XG4gICAgcmV0dXJuIG5ldyBfWm9kTnVtYmVyKHtcbiAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgIGNoZWNrczogW1xuICAgICAgICAuLi50aGlzLl9kZWYuY2hlY2tzLFxuICAgICAgICB7XG4gICAgICAgICAga2luZCxcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICBpbmNsdXNpdmUsXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KTtcbiAgfVxuICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICByZXR1cm4gbmV3IF9ab2ROdW1iZXIoe1xuICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdXG4gICAgfSk7XG4gIH1cbiAgaW50KG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAga2luZDogXCJpbnRcIixcbiAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKVxuICAgIH0pO1xuICB9XG4gIHBvc2l0aXZlKG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAga2luZDogXCJtaW5cIixcbiAgICAgIHZhbHVlOiAwLFxuICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKVxuICAgIH0pO1xuICB9XG4gIG5lZ2F0aXZlKG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAga2luZDogXCJtYXhcIixcbiAgICAgIHZhbHVlOiAwLFxuICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKVxuICAgIH0pO1xuICB9XG4gIG5vbnBvc2l0aXZlKG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAga2luZDogXCJtYXhcIixcbiAgICAgIHZhbHVlOiAwLFxuICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpXG4gICAgfSk7XG4gIH1cbiAgbm9ubmVnYXRpdmUobWVzc2FnZSkge1xuICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgdmFsdWU6IDAsXG4gICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSlcbiAgICB9KTtcbiAgfVxuICBtdWx0aXBsZU9mKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgIGtpbmQ6IFwibXVsdGlwbGVPZlwiLFxuICAgICAgdmFsdWUsXG4gICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSlcbiAgICB9KTtcbiAgfVxuICBmaW5pdGUobWVzc2FnZSkge1xuICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICBraW5kOiBcImZpbml0ZVwiLFxuICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpXG4gICAgfSk7XG4gIH1cbiAgc2FmZShtZXNzYWdlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICB2YWx1ZTogTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIsXG4gICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSlcbiAgICB9KS5fYWRkQ2hlY2soe1xuICAgICAga2luZDogXCJtYXhcIixcbiAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcbiAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKVxuICAgIH0pO1xuICB9XG4gIGdldCBtaW5WYWx1ZSgpIHtcbiAgICBsZXQgbWluID0gbnVsbDtcbiAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtaW47XG4gIH1cbiAgZ2V0IG1heFZhbHVlKCkge1xuICAgIGxldCBtYXggPSBudWxsO1xuICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1heDtcbiAgfVxuICBnZXQgaXNJbnQoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJpbnRcIiB8fCBjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIiAmJiB1dGlsLmlzSW50ZWdlcihjaC52YWx1ZSkpO1xuICB9XG4gIGdldCBpc0Zpbml0ZSgpIHtcbiAgICBsZXQgbWF4ID0gbnVsbCwgbWluID0gbnVsbDtcbiAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgIGlmIChjaC5raW5kID09PSBcImZpbml0ZVwiIHx8IGNoLmtpbmQgPT09IFwiaW50XCIgfHwgY2gua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2UgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgIH0gZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG1pbikgJiYgTnVtYmVyLmlzRmluaXRlKG1heCk7XG4gIH1cbn07XG5ab2ROdW1iZXIuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgY2hlY2tzOiBbXSxcbiAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bWJlcixcbiAgICBjb2VyY2U6IChwYXJhbXMgPT09IG51bGwgfHwgcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbXMuY29lcmNlKSB8fCBmYWxzZSxcbiAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcylcbiAgfSk7XG59O1xudmFyIFpvZEJpZ0ludCA9IGNsYXNzIF9ab2RCaWdJbnQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgIHRoaXMubWF4ID0gdGhpcy5sdGU7XG4gIH1cbiAgX3BhcnNlKGlucHV0KSB7XG4gICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgIGlucHV0LmRhdGEgPSBCaWdJbnQoaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5iaWdpbnQpIHtcbiAgICAgIGNvbnN0IGN0eDIgPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgyLCB7XG4gICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmJpZ2ludCxcbiAgICAgICAgcmVjZWl2ZWQ6IGN0eDIucGFyc2VkVHlwZVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgbGV0IGN0eCA9IHZvaWQgMDtcbiAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgIGlmIChjaGVjay5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgaWYgKHRvb1NtYWxsKSB7XG4gICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgdHlwZTogXCJiaWdpbnRcIixcbiAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBjaGVjay5pbmNsdXNpdmUsXG4gICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibXVsdGlwbGVPZlwiKSB7XG4gICAgICAgIGlmIChpbnB1dC5kYXRhICUgY2hlY2sudmFsdWUgIT09IEJpZ0ludCgwKSkge1xuICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9tdWx0aXBsZV9vZixcbiAgICAgICAgICAgIG11bHRpcGxlT2Y6IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gIH1cbiAgZ3RlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gIH1cbiAgZ3QodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gIH1cbiAgbHRlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gIH1cbiAgbHQodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gIH1cbiAgc2V0TGltaXQoa2luZCwgdmFsdWUsIGluY2x1c2l2ZSwgbWVzc2FnZSkge1xuICAgIHJldHVybiBuZXcgX1pvZEJpZ0ludCh7XG4gICAgICAuLi50aGlzLl9kZWYsXG4gICAgICBjaGVja3M6IFtcbiAgICAgICAgLi4udGhpcy5fZGVmLmNoZWNrcyxcbiAgICAgICAge1xuICAgICAgICAgIGtpbmQsXG4gICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgaW5jbHVzaXZlLFxuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKVxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSk7XG4gIH1cbiAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgcmV0dXJuIG5ldyBfWm9kQmlnSW50KHtcbiAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXVxuICAgIH0pO1xuICB9XG4gIHBvc2l0aXZlKG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAga2luZDogXCJtaW5cIixcbiAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpXG4gICAgfSk7XG4gIH1cbiAgbmVnYXRpdmUobWVzc2FnZSkge1xuICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgdmFsdWU6IEJpZ0ludCgwKSxcbiAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSlcbiAgICB9KTtcbiAgfVxuICBub25wb3NpdGl2ZShtZXNzYWdlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICB2YWx1ZTogQmlnSW50KDApLFxuICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpXG4gICAgfSk7XG4gIH1cbiAgbm9ubmVnYXRpdmUobWVzc2FnZSkge1xuICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgdmFsdWU6IEJpZ0ludCgwKSxcbiAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKVxuICAgIH0pO1xuICB9XG4gIG11bHRpcGxlT2YodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAga2luZDogXCJtdWx0aXBsZU9mXCIsXG4gICAgICB2YWx1ZSxcbiAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKVxuICAgIH0pO1xuICB9XG4gIGdldCBtaW5WYWx1ZSgpIHtcbiAgICBsZXQgbWluID0gbnVsbDtcbiAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtaW47XG4gIH1cbiAgZ2V0IG1heFZhbHVlKCkge1xuICAgIGxldCBtYXggPSBudWxsO1xuICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1heDtcbiAgfVxufTtcblpvZEJpZ0ludC5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gIHZhciBfYTtcbiAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgIGNoZWNrczogW10sXG4gICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCaWdJbnQsXG4gICAgY29lcmNlOiAoX2EgPSBwYXJhbXMgPT09IG51bGwgfHwgcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbXMuY29lcmNlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZSxcbiAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcylcbiAgfSk7XG59O1xudmFyIFpvZEJvb2xlYW4gPSBjbGFzcyBleHRlbmRzIFpvZFR5cGUge1xuICBfcGFyc2UoaW5wdXQpIHtcbiAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgaW5wdXQuZGF0YSA9IEJvb2xlYW4oaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5ib29sZWFuKSB7XG4gICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYm9vbGVhbixcbiAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBJTlZBTElEO1xuICAgIH1cbiAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gIH1cbn07XG5ab2RCb29sZWFuLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgcmV0dXJuIG5ldyBab2RCb29sZWFuKHtcbiAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJvb2xlYW4sXG4gICAgY29lcmNlOiAocGFyYW1zID09PSBudWxsIHx8IHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zLmNvZXJjZSkgfHwgZmFsc2UsXG4gICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpXG4gIH0pO1xufTtcbnZhciBab2REYXRlID0gY2xhc3MgX1pvZERhdGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgX3BhcnNlKGlucHV0KSB7XG4gICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgIGlucHV0LmRhdGEgPSBuZXcgRGF0ZShpbnB1dC5kYXRhKTtcbiAgICB9XG4gICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmRhdGUpIHtcbiAgICAgIGNvbnN0IGN0eDIgPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgyLCB7XG4gICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmRhdGUsXG4gICAgICAgIHJlY2VpdmVkOiBjdHgyLnBhcnNlZFR5cGVcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxuICAgIGlmIChpc05hTihpbnB1dC5kYXRhLmdldFRpbWUoKSkpIHtcbiAgICAgIGNvbnN0IGN0eDIgPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgyLCB7XG4gICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2RhdGVcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxuICAgIGNvbnN0IHN0YXR1cyA9IG5ldyBQYXJzZVN0YXR1cygpO1xuICAgIGxldCBjdHggPSB2b2lkIDA7XG4gICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICBpZiAoaW5wdXQuZGF0YS5nZXRUaW1lKCkgPCBjaGVjay52YWx1ZSkge1xuICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgIHR5cGU6IFwiZGF0ZVwiXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICBpZiAoaW5wdXQuZGF0YS5nZXRUaW1lKCkgPiBjaGVjay52YWx1ZSkge1xuICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICB0eXBlOiBcImRhdGVcIlxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogc3RhdHVzLnZhbHVlLFxuICAgICAgdmFsdWU6IG5ldyBEYXRlKGlucHV0LmRhdGEuZ2V0VGltZSgpKVxuICAgIH07XG4gIH1cbiAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgcmV0dXJuIG5ldyBfWm9kRGF0ZSh7XG4gICAgICAuLi50aGlzLl9kZWYsXG4gICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCBjaGVja11cbiAgICB9KTtcbiAgfVxuICBtaW4obWluRGF0ZSwgbWVzc2FnZSkge1xuICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgdmFsdWU6IG1pbkRhdGUuZ2V0VGltZSgpLFxuICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpXG4gICAgfSk7XG4gIH1cbiAgbWF4KG1heERhdGUsIG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAga2luZDogXCJtYXhcIixcbiAgICAgIHZhbHVlOiBtYXhEYXRlLmdldFRpbWUoKSxcbiAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKVxuICAgIH0pO1xuICB9XG4gIGdldCBtaW5EYXRlKCkge1xuICAgIGxldCBtaW4gPSBudWxsO1xuICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1pbiAhPSBudWxsID8gbmV3IERhdGUobWluKSA6IG51bGw7XG4gIH1cbiAgZ2V0IG1heERhdGUoKSB7XG4gICAgbGV0IG1heCA9IG51bGw7XG4gICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWF4ICE9IG51bGwgPyBuZXcgRGF0ZShtYXgpIDogbnVsbDtcbiAgfVxufTtcblpvZERhdGUuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgIGNoZWNrczogW10sXG4gICAgY29lcmNlOiAocGFyYW1zID09PSBudWxsIHx8IHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zLmNvZXJjZSkgfHwgZmFsc2UsXG4gICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REYXRlLFxuICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKVxuICB9KTtcbn07XG52YXIgWm9kU3ltYm9sID0gY2xhc3MgZXh0ZW5kcyBab2RUeXBlIHtcbiAgX3BhcnNlKGlucHV0KSB7XG4gICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN5bWJvbCkge1xuICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnN5bWJvbCxcbiAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBJTlZBTElEO1xuICAgIH1cbiAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gIH1cbn07XG5ab2RTeW1ib2wuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICByZXR1cm4gbmV3IFpvZFN5bWJvbCh7XG4gICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTeW1ib2wsXG4gICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpXG4gIH0pO1xufTtcbnZhciBab2RVbmRlZmluZWQgPSBjbGFzcyBleHRlbmRzIFpvZFR5cGUge1xuICBfcGFyc2UoaW5wdXQpIHtcbiAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkLFxuICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGVcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxuICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgfVxufTtcblpvZFVuZGVmaW5lZC5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gIHJldHVybiBuZXcgWm9kVW5kZWZpbmVkKHtcbiAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFVuZGVmaW5lZCxcbiAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcylcbiAgfSk7XG59O1xudmFyIFpvZE51bGwgPSBjbGFzcyBleHRlbmRzIFpvZFR5cGUge1xuICBfcGFyc2UoaW5wdXQpIHtcbiAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubnVsbCkge1xuICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm51bGwsXG4gICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICB9XG59O1xuWm9kTnVsbC5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gIHJldHVybiBuZXcgWm9kTnVsbCh7XG4gICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsLFxuICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKVxuICB9KTtcbn07XG52YXIgWm9kQW55ID0gY2xhc3MgZXh0ZW5kcyBab2RUeXBlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICB0aGlzLl9hbnkgPSB0cnVlO1xuICB9XG4gIF9wYXJzZShpbnB1dCkge1xuICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgfVxufTtcblpvZEFueS5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gIHJldHVybiBuZXcgWm9kQW55KHtcbiAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueSxcbiAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcylcbiAgfSk7XG59O1xudmFyIFpvZFVua25vd24gPSBjbGFzcyBleHRlbmRzIFpvZFR5cGUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMuX3Vua25vd24gPSB0cnVlO1xuICB9XG4gIF9wYXJzZShpbnB1dCkge1xuICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgfVxufTtcblpvZFVua25vd24uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICByZXR1cm4gbmV3IFpvZFVua25vd24oe1xuICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5rbm93bixcbiAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcylcbiAgfSk7XG59O1xudmFyIFpvZE5ldmVyID0gY2xhc3MgZXh0ZW5kcyBab2RUeXBlIHtcbiAgX3BhcnNlKGlucHV0KSB7XG4gICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm5ldmVyLFxuICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlXG4gICAgfSk7XG4gICAgcmV0dXJuIElOVkFMSUQ7XG4gIH1cbn07XG5ab2ROZXZlci5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gIHJldHVybiBuZXcgWm9kTmV2ZXIoe1xuICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXIsXG4gICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpXG4gIH0pO1xufTtcbnZhciBab2RWb2lkID0gY2xhc3MgZXh0ZW5kcyBab2RUeXBlIHtcbiAgX3BhcnNlKGlucHV0KSB7XG4gICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnZvaWQsXG4gICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICB9XG59O1xuWm9kVm9pZC5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gIHJldHVybiBuZXcgWm9kVm9pZCh7XG4gICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RWb2lkLFxuICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKVxuICB9KTtcbn07XG52YXIgWm9kQXJyYXkgPSBjbGFzcyBfWm9kQXJyYXkgZXh0ZW5kcyBab2RUeXBlIHtcbiAgX3BhcnNlKGlucHV0KSB7XG4gICAgY29uc3QgeyBjdHgsIHN0YXR1cyB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICBjb25zdCBkZWYgPSB0aGlzLl9kZWY7XG4gICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmFycmF5KSB7XG4gICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYXJyYXksXG4gICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgaWYgKGRlZi5leGFjdExlbmd0aCAhPT0gbnVsbCkge1xuICAgICAgY29uc3QgdG9vQmlnID0gY3R4LmRhdGEubGVuZ3RoID4gZGVmLmV4YWN0TGVuZ3RoLnZhbHVlO1xuICAgICAgY29uc3QgdG9vU21hbGwgPSBjdHguZGF0YS5sZW5ndGggPCBkZWYuZXhhY3RMZW5ndGgudmFsdWU7XG4gICAgICBpZiAodG9vQmlnIHx8IHRvb1NtYWxsKSB7XG4gICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgIGNvZGU6IHRvb0JpZyA/IFpvZElzc3VlQ29kZS50b29fYmlnIDogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICBtaW5pbXVtOiB0b29TbWFsbCA/IGRlZi5leGFjdExlbmd0aC52YWx1ZSA6IHZvaWQgMCxcbiAgICAgICAgICBtYXhpbXVtOiB0b29CaWcgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB2b2lkIDAsXG4gICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICBleGFjdDogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiBkZWYuZXhhY3RMZW5ndGgubWVzc2FnZVxuICAgICAgICB9KTtcbiAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChkZWYubWluTGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoIDwgZGVmLm1pbkxlbmd0aC52YWx1ZSkge1xuICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgIG1pbmltdW06IGRlZi5taW5MZW5ndGgudmFsdWUsXG4gICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogZGVmLm1pbkxlbmd0aC5tZXNzYWdlXG4gICAgICAgIH0pO1xuICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRlZi5tYXhMZW5ndGggIT09IG51bGwpIHtcbiAgICAgIGlmIChjdHguZGF0YS5sZW5ndGggPiBkZWYubWF4TGVuZ3RoLnZhbHVlKSB7XG4gICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgIG1heGltdW06IGRlZi5tYXhMZW5ndGgudmFsdWUsXG4gICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogZGVmLm1heExlbmd0aC5tZXNzYWdlXG4gICAgICAgIH0pO1xuICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLmFsbChbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICByZXR1cm4gZGVmLnR5cGUuX3BhcnNlQXN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICB9KSkudGhlbigocmVzdWx0MikgPT4ge1xuICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdDIpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IFsuLi5jdHguZGF0YV0ubWFwKChpdGVtLCBpKSA9PiB7XG4gICAgICByZXR1cm4gZGVmLnR5cGUuX3BhcnNlU3luYyhuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKTtcbiAgICB9KTtcbiAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gIH1cbiAgZ2V0IGVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICB9XG4gIG1pbihtaW5MZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gbmV3IF9ab2RBcnJheSh7XG4gICAgICAuLi50aGlzLl9kZWYsXG4gICAgICBtaW5MZW5ndGg6IHsgdmFsdWU6IG1pbkxlbmd0aCwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH1cbiAgICB9KTtcbiAgfVxuICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgcmV0dXJuIG5ldyBfWm9kQXJyYXkoe1xuICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgbWF4TGVuZ3RoOiB7IHZhbHVlOiBtYXhMZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9XG4gICAgfSk7XG4gIH1cbiAgbGVuZ3RoKGxlbiwgbWVzc2FnZSkge1xuICAgIHJldHVybiBuZXcgX1pvZEFycmF5KHtcbiAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgIGV4YWN0TGVuZ3RoOiB7IHZhbHVlOiBsZW4sIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9XG4gICAgfSk7XG4gIH1cbiAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgIHJldHVybiB0aGlzLm1pbigxLCBtZXNzYWdlKTtcbiAgfVxufTtcblpvZEFycmF5LmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICB0eXBlOiBzY2hlbWEsXG4gICAgbWluTGVuZ3RoOiBudWxsLFxuICAgIG1heExlbmd0aDogbnVsbCxcbiAgICBleGFjdExlbmd0aDogbnVsbCxcbiAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFycmF5LFxuICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKVxuICB9KTtcbn07XG5mdW5jdGlvbiBkZWVwUGFydGlhbGlmeShzY2hlbWEpIHtcbiAgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9iamVjdCkge1xuICAgIGNvbnN0IG5ld1NoYXBlID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hLnNoYXBlKSB7XG4gICAgICBjb25zdCBmaWVsZFNjaGVtYSA9IHNjaGVtYS5zaGFwZVtrZXldO1xuICAgICAgbmV3U2hhcGVba2V5XSA9IFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShmaWVsZFNjaGVtYSkpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAuLi5zY2hlbWEuX2RlZixcbiAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZVxuICAgIH0pO1xuICB9IGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZEFycmF5KSB7XG4gICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAuLi5zY2hlbWEuX2RlZixcbiAgICAgIHR5cGU6IGRlZXBQYXJ0aWFsaWZ5KHNjaGVtYS5lbGVtZW50KVxuICAgIH0pO1xuICB9IGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgcmV0dXJuIFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgfSBlbHNlIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2ROdWxsYWJsZSkge1xuICAgIHJldHVybiBab2ROdWxsYWJsZS5jcmVhdGUoZGVlcFBhcnRpYWxpZnkoc2NoZW1hLnVud3JhcCgpKSk7XG4gIH0gZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kVHVwbGUpIHtcbiAgICByZXR1cm4gWm9kVHVwbGUuY3JlYXRlKHNjaGVtYS5pdGVtcy5tYXAoKGl0ZW0pID0+IGRlZXBQYXJ0aWFsaWZ5KGl0ZW0pKSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHNjaGVtYTtcbiAgfVxufVxudmFyIFpvZE9iamVjdCA9IGNsYXNzIF9ab2RPYmplY3QgZXh0ZW5kcyBab2RUeXBlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICB0aGlzLl9jYWNoZWQgPSBudWxsO1xuICAgIHRoaXMubm9uc3RyaWN0ID0gdGhpcy5wYXNzdGhyb3VnaDtcbiAgICB0aGlzLmF1Z21lbnQgPSB0aGlzLmV4dGVuZDtcbiAgfVxuICBfZ2V0Q2FjaGVkKCkge1xuICAgIGlmICh0aGlzLl9jYWNoZWQgIT09IG51bGwpXG4gICAgICByZXR1cm4gdGhpcy5fY2FjaGVkO1xuICAgIGNvbnN0IHNoYXBlID0gdGhpcy5fZGVmLnNoYXBlKCk7XG4gICAgY29uc3Qga2V5cyA9IHV0aWwub2JqZWN0S2V5cyhzaGFwZSk7XG4gICAgcmV0dXJuIHRoaXMuX2NhY2hlZCA9IHsgc2hhcGUsIGtleXMgfTtcbiAgfVxuICBfcGFyc2UoaW5wdXQpIHtcbiAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICBjb25zdCBjdHgyID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4Miwge1xuICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgIHJlY2VpdmVkOiBjdHgyLnBhcnNlZFR5cGVcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxuICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgY29uc3QgeyBzaGFwZSwga2V5czogc2hhcGVLZXlzIH0gPSB0aGlzLl9nZXRDYWNoZWQoKTtcbiAgICBjb25zdCBleHRyYUtleXMgPSBbXTtcbiAgICBpZiAoISh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlciAmJiB0aGlzLl9kZWYudW5rbm93bktleXMgPT09IFwic3RyaXBcIikpIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgIGlmICghc2hhcGVLZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICBleHRyYUtleXMucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHBhaXJzID0gW107XG4gICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcGVLZXlzKSB7XG4gICAgICBjb25zdCBrZXlWYWxpZGF0b3IgPSBzaGFwZVtrZXldO1xuICAgICAgY29uc3QgdmFsdWUgPSBjdHguZGF0YVtrZXldO1xuICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICB2YWx1ZToga2V5VmFsaWRhdG9yLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGFcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodGhpcy5fZGVmLmNhdGNoYWxsIGluc3RhbmNlb2YgWm9kTmV2ZXIpIHtcbiAgICAgIGNvbnN0IHVua25vd25LZXlzID0gdGhpcy5fZGVmLnVua25vd25LZXlzO1xuICAgICAgaWYgKHVua25vd25LZXlzID09PSBcInBhc3N0aHJvdWdoXCIpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgZXh0cmFLZXlzKSB7XG4gICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgIHZhbHVlOiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogY3R4LmRhdGFba2V5XSB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodW5rbm93bktleXMgPT09IFwic3RyaWN0XCIpIHtcbiAgICAgICAgaWYgKGV4dHJhS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudW5yZWNvZ25pemVkX2tleXMsXG4gICAgICAgICAgICBrZXlzOiBleHRyYUtleXNcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh1bmtub3duS2V5cyA9PT0gXCJzdHJpcFwiKSA7XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnRlcm5hbCBab2RPYmplY3QgZXJyb3I6IGludmFsaWQgdW5rbm93bktleXMgdmFsdWUuYCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNhdGNoYWxsID0gdGhpcy5fZGVmLmNhdGNoYWxsO1xuICAgICAgZm9yIChjb25zdCBrZXkgb2YgZXh0cmFLZXlzKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gY3R4LmRhdGFba2V5XTtcbiAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAga2V5OiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZToga2V5IH0sXG4gICAgICAgICAgdmFsdWU6IGNhdGNoYWxsLl9wYXJzZShcbiAgICAgICAgICAgIG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCB2YWx1ZSwgY3R4LnBhdGgsIGtleSlcbiAgICAgICAgICAgIC8vLCBjdHguY2hpbGQoa2V5KSwgdmFsdWUsIGdldFBhcnNlZFR5cGUodmFsdWUpXG4gICAgICAgICAgKSxcbiAgICAgICAgICBhbHdheXNTZXQ6IGtleSBpbiBjdHguZGF0YVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3Qgc3luY1BhaXJzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgICAgICBzeW5jUGFpcnMucHVzaCh7XG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIGFsd2F5c1NldDogcGFpci5hbHdheXNTZXRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3luY1BhaXJzO1xuICAgICAgfSkudGhlbigoc3luY1BhaXJzKSA9PiB7XG4gICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBzeW5jUGFpcnMpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBwYWlycyk7XG4gICAgfVxuICB9XG4gIGdldCBzaGFwZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGVmLnNoYXBlKCk7XG4gIH1cbiAgc3RyaWN0KG1lc3NhZ2UpIHtcbiAgICBlcnJvclV0aWwuZXJyVG9PYmo7XG4gICAgcmV0dXJuIG5ldyBfWm9kT2JqZWN0KHtcbiAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgLi4ubWVzc2FnZSAhPT0gdm9pZCAwID8ge1xuICAgICAgICBlcnJvck1hcDogKGlzc3VlLCBjdHgpID0+IHtcbiAgICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgICAgICAgY29uc3QgZGVmYXVsdEVycm9yID0gKF9jID0gKF9iID0gKF9hID0gdGhpcy5fZGVmKS5lcnJvck1hcCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EsIGlzc3VlLCBjdHgpLm1lc3NhZ2UpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IGN0eC5kZWZhdWx0RXJyb3I7XG4gICAgICAgICAgaWYgKGlzc3VlLmNvZGUgPT09IFwidW5yZWNvZ25pemVkX2tleXNcIilcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIG1lc3NhZ2U6IChfZCA9IGVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKS5tZXNzYWdlKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBkZWZhdWx0RXJyb3JcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGRlZmF1bHRFcnJvclxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0gOiB7fVxuICAgIH0pO1xuICB9XG4gIHN0cmlwKCkge1xuICAgIHJldHVybiBuZXcgX1pvZE9iamVjdCh7XG4gICAgICAuLi50aGlzLl9kZWYsXG4gICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiXG4gICAgfSk7XG4gIH1cbiAgcGFzc3Rocm91Z2goKSB7XG4gICAgcmV0dXJuIG5ldyBfWm9kT2JqZWN0KHtcbiAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgIHVua25vd25LZXlzOiBcInBhc3N0aHJvdWdoXCJcbiAgICB9KTtcbiAgfVxuICAvLyBjb25zdCBBdWdtZW50RmFjdG9yeSA9XG4gIC8vICAgPERlZiBleHRlbmRzIFpvZE9iamVjdERlZj4oZGVmOiBEZWYpID0+XG4gIC8vICAgPEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlPihcbiAgLy8gICAgIGF1Z21lbnRhdGlvbjogQXVnbWVudGF0aW9uXG4gIC8vICAgKTogWm9kT2JqZWN0PFxuICAvLyAgICAgZXh0ZW5kU2hhcGU8UmV0dXJuVHlwZTxEZWZbXCJzaGFwZVwiXT4sIEF1Z21lbnRhdGlvbj4sXG4gIC8vICAgICBEZWZbXCJ1bmtub3duS2V5c1wiXSxcbiAgLy8gICAgIERlZltcImNhdGNoYWxsXCJdXG4gIC8vICAgPiA9PiB7XG4gIC8vICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gIC8vICAgICAgIC4uLmRlZixcbiAgLy8gICAgICAgc2hhcGU6ICgpID0+ICh7XG4gIC8vICAgICAgICAgLi4uZGVmLnNoYXBlKCksXG4gIC8vICAgICAgICAgLi4uYXVnbWVudGF0aW9uLFxuICAvLyAgICAgICB9KSxcbiAgLy8gICAgIH0pIGFzIGFueTtcbiAgLy8gICB9O1xuICBleHRlbmQoYXVnbWVudGF0aW9uKSB7XG4gICAgcmV0dXJuIG5ldyBfWm9kT2JqZWN0KHtcbiAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgLi4uYXVnbWVudGF0aW9uXG4gICAgICB9KVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBQcmlvciB0byB6b2RAMS4wLjEyIHRoZXJlIHdhcyBhIGJ1ZyBpbiB0aGVcbiAgICogaW5mZXJyZWQgdHlwZSBvZiBtZXJnZWQgb2JqZWN0cy4gUGxlYXNlXG4gICAqIHVwZ3JhZGUgaWYgeW91IGFyZSBleHBlcmllbmNpbmcgaXNzdWVzLlxuICAgKi9cbiAgbWVyZ2UobWVyZ2luZykge1xuICAgIGNvbnN0IG1lcmdlZCA9IG5ldyBfWm9kT2JqZWN0KHtcbiAgICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAuLi5tZXJnaW5nLl9kZWYuc2hhcGUoKVxuICAgICAgfSksXG4gICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdFxuICAgIH0pO1xuICAgIHJldHVybiBtZXJnZWQ7XG4gIH1cbiAgLy8gbWVyZ2U8XG4gIC8vICAgSW5jb21pbmcgZXh0ZW5kcyBBbnlab2RPYmplY3QsXG4gIC8vICAgQXVnbWVudGF0aW9uIGV4dGVuZHMgSW5jb21pbmdbXCJzaGFwZVwiXSxcbiAgLy8gICBOZXdPdXRwdXQgZXh0ZW5kcyB7XG4gIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX291dHB1dFwiXVxuICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgLy8gICAgICAgOiBuZXZlcjtcbiAgLy8gICB9LFxuICAvLyAgIE5ld0lucHV0IGV4dGVuZHMge1xuICAvLyAgICAgW2sgaW4ga2V5b2YgQXVnbWVudGF0aW9uIHwga2V5b2YgSW5wdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX2lucHV0XCJdXG4gIC8vICAgICAgIDogayBleHRlbmRzIGtleW9mIElucHV0XG4gIC8vICAgICAgID8gSW5wdXRba11cbiAgLy8gICAgICAgOiBuZXZlcjtcbiAgLy8gICB9XG4gIC8vID4oXG4gIC8vICAgbWVyZ2luZzogSW5jb21pbmdcbiAgLy8gKTogWm9kT2JqZWN0PFxuICAvLyAgIGV4dGVuZFNoYXBlPFQsIFJldHVyblR5cGU8SW5jb21pbmdbXCJfZGVmXCJdW1wic2hhcGVcIl0+PixcbiAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJjYXRjaGFsbFwiXSxcbiAgLy8gICBOZXdPdXRwdXQsXG4gIC8vICAgTmV3SW5wdXRcbiAgLy8gPiB7XG4gIC8vICAgY29uc3QgbWVyZ2VkOiBhbnkgPSBuZXcgWm9kT2JqZWN0KHtcbiAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gIC8vICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAvLyAgICAgc2hhcGU6ICgpID0+XG4gIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgLy8gICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAvLyAgIH0pIGFzIGFueTtcbiAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAvLyB9XG4gIHNldEtleShrZXksIHNjaGVtYSkge1xuICAgIHJldHVybiB0aGlzLmF1Z21lbnQoeyBba2V5XTogc2NoZW1hIH0pO1xuICB9XG4gIC8vIG1lcmdlPEluY29taW5nIGV4dGVuZHMgQW55Wm9kT2JqZWN0PihcbiAgLy8gICBtZXJnaW5nOiBJbmNvbWluZ1xuICAvLyApOiAvL1pvZE9iamVjdDxUICYgSW5jb21pbmdbXCJfc2hhcGVcIl0sIFVua25vd25LZXlzLCBDYXRjaGFsbD4gPSAobWVyZ2luZykgPT4ge1xuICAvLyBab2RPYmplY3Q8XG4gIC8vICAgZXh0ZW5kU2hhcGU8VCwgUmV0dXJuVHlwZTxJbmNvbWluZ1tcIl9kZWZcIl1bXCJzaGFwZVwiXT4+LFxuICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcInVua25vd25LZXlzXCJdLFxuICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdXG4gIC8vID4ge1xuICAvLyAgIC8vIGNvbnN0IG1lcmdlZFNoYXBlID0gb2JqZWN0VXRpbC5tZXJnZVNoYXBlcyhcbiAgLy8gICAvLyAgIHRoaXMuX2RlZi5zaGFwZSgpLFxuICAvLyAgIC8vICAgbWVyZ2luZy5fZGVmLnNoYXBlKClcbiAgLy8gICAvLyApO1xuICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gIC8vICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAvLyAgICAgY2F0Y2hhbGw6IG1lcmdpbmcuX2RlZi5jYXRjaGFsbCxcbiAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAvLyAgICAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKHRoaXMuX2RlZi5zaGFwZSgpLCBtZXJnaW5nLl9kZWYuc2hhcGUoKSksXG4gIC8vICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgLy8gICB9KSBhcyBhbnk7XG4gIC8vICAgcmV0dXJuIG1lcmdlZDtcbiAgLy8gfVxuICBjYXRjaGFsbChpbmRleCkge1xuICAgIHJldHVybiBuZXcgX1pvZE9iamVjdCh7XG4gICAgICAuLi50aGlzLl9kZWYsXG4gICAgICBjYXRjaGFsbDogaW5kZXhcbiAgICB9KTtcbiAgfVxuICBwaWNrKG1hc2spIHtcbiAgICBjb25zdCBzaGFwZSA9IHt9O1xuICAgIHV0aWwub2JqZWN0S2V5cyhtYXNrKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGlmIChtYXNrW2tleV0gJiYgdGhpcy5zaGFwZVtrZXldKSB7XG4gICAgICAgIHNoYXBlW2tleV0gPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG5ldyBfWm9kT2JqZWN0KHtcbiAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZVxuICAgIH0pO1xuICB9XG4gIG9taXQobWFzaykge1xuICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgdXRpbC5vYmplY3RLZXlzKHRoaXMuc2hhcGUpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgaWYgKCFtYXNrW2tleV0pIHtcbiAgICAgICAgc2hhcGVba2V5XSA9IHRoaXMuc2hhcGVba2V5XTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbmV3IF9ab2RPYmplY3Qoe1xuICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgc2hhcGU6ICgpID0+IHNoYXBlXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkXG4gICAqL1xuICBkZWVwUGFydGlhbCgpIHtcbiAgICByZXR1cm4gZGVlcFBhcnRpYWxpZnkodGhpcyk7XG4gIH1cbiAgcGFydGlhbChtYXNrKSB7XG4gICAgY29uc3QgbmV3U2hhcGUgPSB7fTtcbiAgICB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBjb25zdCBmaWVsZFNjaGVtYSA9IHRoaXMuc2hhcGVba2V5XTtcbiAgICAgIGlmIChtYXNrICYmICFtYXNrW2tleV0pIHtcbiAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hLm9wdGlvbmFsKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG5ldyBfWm9kT2JqZWN0KHtcbiAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZVxuICAgIH0pO1xuICB9XG4gIHJlcXVpcmVkKG1hc2spIHtcbiAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGlmIChtYXNrICYmICFtYXNrW2tleV0pIHtcbiAgICAgICAgbmV3U2hhcGVba2V5XSA9IHRoaXMuc2hhcGVba2V5XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICBsZXQgbmV3RmllbGQgPSBmaWVsZFNjaGVtYTtcbiAgICAgICAgd2hpbGUgKG5ld0ZpZWxkIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgICBuZXdGaWVsZCA9IG5ld0ZpZWxkLl9kZWYuaW5uZXJUeXBlO1xuICAgICAgICB9XG4gICAgICAgIG5ld1NoYXBlW2tleV0gPSBuZXdGaWVsZDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbmV3IF9ab2RPYmplY3Qoe1xuICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlXG4gICAgfSk7XG4gIH1cbiAga2V5b2YoKSB7XG4gICAgcmV0dXJuIGNyZWF0ZVpvZEVudW0odXRpbC5vYmplY3RLZXlzKHRoaXMuc2hhcGUpKTtcbiAgfVxufTtcblpvZE9iamVjdC5jcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgY2F0Y2hhbGw6IFpvZE5ldmVyLmNyZWF0ZSgpLFxuICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKVxuICB9KTtcbn07XG5ab2RPYmplY3Quc3RyaWN0Q3JlYXRlID0gKHNoYXBlLCBwYXJhbXMpID0+IHtcbiAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICB1bmtub3duS2V5czogXCJzdHJpY3RcIixcbiAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpXG4gIH0pO1xufTtcblpvZE9iamVjdC5sYXp5Y3JlYXRlID0gKHNoYXBlLCBwYXJhbXMpID0+IHtcbiAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgIHNoYXBlLFxuICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgY2F0Y2hhbGw6IFpvZE5ldmVyLmNyZWF0ZSgpLFxuICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKVxuICB9KTtcbn07XG52YXIgWm9kVW5pb24gPSBjbGFzcyBleHRlbmRzIFpvZFR5cGUge1xuICBfcGFyc2UoaW5wdXQpIHtcbiAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICBjb25zdCBvcHRpb25zID0gdGhpcy5fZGVmLm9wdGlvbnM7XG4gICAgZnVuY3Rpb24gaGFuZGxlUmVzdWx0cyhyZXN1bHRzKSB7XG4gICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgIGlmIChyZXN1bHQucmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgaWYgKHJlc3VsdC5yZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICBjdHguY29tbW9uLmlzc3Vlcy5wdXNoKC4uLnJlc3VsdC5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gbmV3IFpvZEVycm9yKHJlc3VsdC5jdHguY29tbW9uLmlzc3VlcykpO1xuICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uLFxuICAgICAgICB1bmlvbkVycm9yc1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLmFsbChvcHRpb25zLm1hcChhc3luYyAob3B0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IGNoaWxkQ3R4ID0ge1xuICAgICAgICAgIC4uLmN0eCxcbiAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICBpc3N1ZXM6IFtdXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwYXJlbnQ6IG51bGxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICByZXN1bHQ6IGF3YWl0IG9wdGlvbi5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGN0eDogY2hpbGRDdHhcbiAgICAgICAgfTtcbiAgICAgIH0pKS50aGVuKGhhbmRsZVJlc3VsdHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgZGlydHkgPSB2b2lkIDA7XG4gICAgICBjb25zdCBpc3N1ZXMgPSBbXTtcbiAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY2hpbGRDdHggPSB7XG4gICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgLi4uY3R4LmNvbW1vbixcbiAgICAgICAgICAgIGlzc3VlczogW11cbiAgICAgICAgICB9LFxuICAgICAgICAgIHBhcmVudDogbnVsbFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSBvcHRpb24uX3BhcnNlU3luYyh7XG4gICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgcGFyZW50OiBjaGlsZEN0eFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIikge1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiICYmICFkaXJ0eSkge1xuICAgICAgICAgIGRpcnR5ID0geyByZXN1bHQsIGN0eDogY2hpbGRDdHggfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hpbGRDdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICBpc3N1ZXMucHVzaChjaGlsZEN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGRpcnR5KSB7XG4gICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4uZGlydHkuY3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICByZXR1cm4gZGlydHkucmVzdWx0O1xuICAgICAgfVxuICAgICAgY29uc3QgdW5pb25FcnJvcnMgPSBpc3N1ZXMubWFwKChpc3N1ZXMyKSA9PiBuZXcgWm9kRXJyb3IoaXNzdWVzMikpO1xuICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uLFxuICAgICAgICB1bmlvbkVycm9yc1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gIH1cbiAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RlZi5vcHRpb25zO1xuICB9XG59O1xuWm9kVW5pb24uY3JlYXRlID0gKHR5cGVzLCBwYXJhbXMpID0+IHtcbiAgcmV0dXJuIG5ldyBab2RVbmlvbih7XG4gICAgb3B0aW9uczogdHlwZXMsXG4gICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbixcbiAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcylcbiAgfSk7XG59O1xudmFyIGdldERpc2NyaW1pbmF0b3IgPSAodHlwZSkgPT4ge1xuICBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExhenkpIHtcbiAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLnNjaGVtYSk7XG4gIH0gZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVmZmVjdHMpIHtcbiAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLmlubmVyVHlwZSgpKTtcbiAgfSBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kTGl0ZXJhbCkge1xuICAgIHJldHVybiBbdHlwZS52YWx1ZV07XG4gIH0gZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVudW0pIHtcbiAgICByZXR1cm4gdHlwZS5vcHRpb25zO1xuICB9IGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2ROYXRpdmVFbnVtKSB7XG4gICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKHR5cGUuZW51bSk7XG4gIH0gZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZERlZmF1bHQpIHtcbiAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgfSBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kVW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIFt2b2lkIDBdO1xuICB9IGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2ROdWxsKSB7XG4gICAgcmV0dXJuIFtudWxsXTtcbiAgfSBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICByZXR1cm4gW3ZvaWQgMCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gIH0gZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgcmV0dXJuIFtudWxsLCAuLi5nZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpXTtcbiAgfSBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kQnJhbmRlZCkge1xuICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICB9IGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RSZWFkb25seSkge1xuICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICB9IGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RDYXRjaCkge1xuICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuX2RlZi5pbm5lclR5cGUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBbXTtcbiAgfVxufTtcbnZhciBab2REaXNjcmltaW5hdGVkVW5pb24gPSBjbGFzcyBfWm9kRGlzY3JpbWluYXRlZFVuaW9uIGV4dGVuZHMgWm9kVHlwZSB7XG4gIF9wYXJzZShpbnB1dCkge1xuICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5vYmplY3QpIHtcbiAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgY29uc3QgZGlzY3JpbWluYXRvciA9IHRoaXMuZGlzY3JpbWluYXRvcjtcbiAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWUgPSBjdHguZGF0YVtkaXNjcmltaW5hdG9yXTtcbiAgICBjb25zdCBvcHRpb24gPSB0aGlzLm9wdGlvbnNNYXAuZ2V0KGRpc2NyaW1pbmF0b3JWYWx1ZSk7XG4gICAgaWYgKCFvcHRpb24pIHtcbiAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbl9kaXNjcmltaW5hdG9yLFxuICAgICAgICBvcHRpb25zOiBBcnJheS5mcm9tKHRoaXMub3B0aW9uc01hcC5rZXlzKCkpLFxuICAgICAgICBwYXRoOiBbZGlzY3JpbWluYXRvcl1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxuICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICByZXR1cm4gb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICBwYXJlbnQ6IGN0eFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvcHRpb24uX3BhcnNlU3luYyh7XG4gICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgcGFyZW50OiBjdHhcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBnZXQgZGlzY3JpbWluYXRvcigpIHtcbiAgICByZXR1cm4gdGhpcy5fZGVmLmRpc2NyaW1pbmF0b3I7XG4gIH1cbiAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RlZi5vcHRpb25zO1xuICB9XG4gIGdldCBvcHRpb25zTWFwKCkge1xuICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9uc01hcDtcbiAgfVxuICAvKipcbiAgICogVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBkaXNjcmltaW5hdGVkIHVuaW9uIHNjaGVtYS4gSXRzIGJlaGF2aW91ciBpcyB2ZXJ5IHNpbWlsYXIgdG8gdGhhdCBvZiB0aGUgbm9ybWFsIHoudW5pb24oKSBjb25zdHJ1Y3Rvci5cbiAgICogSG93ZXZlciwgaXQgb25seSBhbGxvd3MgYSB1bmlvbiBvZiBvYmplY3RzLCBhbGwgb2Ygd2hpY2ggbmVlZCB0byBzaGFyZSBhIGRpc2NyaW1pbmF0b3IgcHJvcGVydHkuIFRoaXMgcHJvcGVydHkgbXVzdFxuICAgKiBoYXZlIGEgZGlmZmVyZW50IHZhbHVlIGZvciBlYWNoIG9iamVjdCBpbiB0aGUgdW5pb24uXG4gICAqIEBwYXJhbSBkaXNjcmltaW5hdG9yIHRoZSBuYW1lIG9mIHRoZSBkaXNjcmltaW5hdG9yIHByb3BlcnR5XG4gICAqIEBwYXJhbSB0eXBlcyBhbiBhcnJheSBvZiBvYmplY3Qgc2NoZW1hc1xuICAgKiBAcGFyYW0gcGFyYW1zXG4gICAqL1xuICBzdGF0aWMgY3JlYXRlKGRpc2NyaW1pbmF0b3IsIG9wdGlvbnMsIHBhcmFtcykge1xuICAgIGNvbnN0IG9wdGlvbnNNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgIGZvciAoY29uc3QgdHlwZSBvZiBvcHRpb25zKSB7XG4gICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWVzID0gZ2V0RGlzY3JpbWluYXRvcih0eXBlLnNoYXBlW2Rpc2NyaW1pbmF0b3JdKTtcbiAgICAgIGlmICghZGlzY3JpbWluYXRvclZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBIGRpc2NyaW1pbmF0b3IgdmFsdWUgZm9yIGtleSBcXGAke2Rpc2NyaW1pbmF0b3J9XFxgIGNvdWxkIG5vdCBiZSBleHRyYWN0ZWQgZnJvbSBhbGwgc2NoZW1hIG9wdGlvbnNgKTtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgZGlzY3JpbWluYXRvclZhbHVlcykge1xuICAgICAgICBpZiAob3B0aW9uc01hcC5oYXModmFsdWUpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEaXNjcmltaW5hdG9yIHByb3BlcnR5ICR7U3RyaW5nKGRpc2NyaW1pbmF0b3IpfSBoYXMgZHVwbGljYXRlIHZhbHVlICR7U3RyaW5nKHZhbHVlKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zTWFwLnNldCh2YWx1ZSwgdHlwZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgX1pvZERpc2NyaW1pbmF0ZWRVbmlvbih7XG4gICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERpc2NyaW1pbmF0ZWRVbmlvbixcbiAgICAgIGRpc2NyaW1pbmF0b3IsXG4gICAgICBvcHRpb25zLFxuICAgICAgb3B0aW9uc01hcCxcbiAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKVxuICAgIH0pO1xuICB9XG59O1xuZnVuY3Rpb24gbWVyZ2VWYWx1ZXMoYSwgYikge1xuICBjb25zdCBhVHlwZSA9IGdldFBhcnNlZFR5cGUoYSk7XG4gIGNvbnN0IGJUeXBlID0gZ2V0UGFyc2VkVHlwZShiKTtcbiAgaWYgKGEgPT09IGIpIHtcbiAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICB9IGVsc2UgaWYgKGFUeXBlID09PSBab2RQYXJzZWRUeXBlLm9iamVjdCAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5vYmplY3QpIHtcbiAgICBjb25zdCBiS2V5cyA9IHV0aWwub2JqZWN0S2V5cyhiKTtcbiAgICBjb25zdCBzaGFyZWRLZXlzID0gdXRpbC5vYmplY3RLZXlzKGEpLmZpbHRlcigoa2V5KSA9PiBiS2V5cy5pbmRleE9mKGtleSkgIT09IC0xKTtcbiAgICBjb25zdCBuZXdPYmogPSB7IC4uLmEsIC4uLmIgfTtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBzaGFyZWRLZXlzKSB7XG4gICAgICBjb25zdCBzaGFyZWRWYWx1ZSA9IG1lcmdlVmFsdWVzKGFba2V5XSwgYltrZXldKTtcbiAgICAgIGlmICghc2hhcmVkVmFsdWUudmFsaWQpIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICB9XG4gICAgICBuZXdPYmpba2V5XSA9IHNoYXJlZFZhbHVlLmRhdGE7XG4gICAgfVxuICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBuZXdPYmogfTtcbiAgfSBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgIH1cbiAgICBjb25zdCBuZXdBcnJheSA9IFtdO1xuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBhLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgY29uc3QgaXRlbUEgPSBhW2luZGV4XTtcbiAgICAgIGNvbnN0IGl0ZW1CID0gYltpbmRleF07XG4gICAgICBjb25zdCBzaGFyZWRWYWx1ZSA9IG1lcmdlVmFsdWVzKGl0ZW1BLCBpdGVtQik7XG4gICAgICBpZiAoIXNoYXJlZFZhbHVlLnZhbGlkKSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgfVxuICAgICAgbmV3QXJyYXkucHVzaChzaGFyZWRWYWx1ZS5kYXRhKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld0FycmF5IH07XG4gIH0gZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5kYXRlICYmICthID09PSArYikge1xuICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBhIH07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gIH1cbn1cbnZhciBab2RJbnRlcnNlY3Rpb24gPSBjbGFzcyBleHRlbmRzIFpvZFR5cGUge1xuICBfcGFyc2UoaW5wdXQpIHtcbiAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgIGNvbnN0IGhhbmRsZVBhcnNlZCA9IChwYXJzZWRMZWZ0LCBwYXJzZWRSaWdodCkgPT4ge1xuICAgICAgaWYgKGlzQWJvcnRlZChwYXJzZWRMZWZ0KSB8fCBpc0Fib3J0ZWQocGFyc2VkUmlnaHQpKSB7XG4gICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgfVxuICAgICAgY29uc3QgbWVyZ2VkID0gbWVyZ2VWYWx1ZXMocGFyc2VkTGVmdC52YWx1ZSwgcGFyc2VkUmlnaHQudmFsdWUpO1xuICAgICAgaWYgKCFtZXJnZWQudmFsaWQpIHtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgIH1cbiAgICAgIGlmIChpc0RpcnR5KHBhcnNlZExlZnQpIHx8IGlzRGlydHkocGFyc2VkUmlnaHQpKSB7XG4gICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBtZXJnZWQuZGF0YSB9O1xuICAgIH07XG4gICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgIHRoaXMuX2RlZi5sZWZ0Ll9wYXJzZUFzeW5jKHtcbiAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICBwYXJlbnQ6IGN0eFxuICAgICAgICB9KSxcbiAgICAgICAgdGhpcy5fZGVmLnJpZ2h0Ll9wYXJzZUFzeW5jKHtcbiAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICBwYXJlbnQ6IGN0eFxuICAgICAgICB9KVxuICAgICAgXSkudGhlbigoW2xlZnQsIHJpZ2h0XSkgPT4gaGFuZGxlUGFyc2VkKGxlZnQsIHJpZ2h0KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBoYW5kbGVQYXJzZWQodGhpcy5fZGVmLmxlZnQuX3BhcnNlU3luYyh7XG4gICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgcGFyZW50OiBjdHhcbiAgICAgIH0pLCB0aGlzLl9kZWYucmlnaHQuX3BhcnNlU3luYyh7XG4gICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgcGFyZW50OiBjdHhcbiAgICAgIH0pKTtcbiAgICB9XG4gIH1cbn07XG5ab2RJbnRlcnNlY3Rpb24uY3JlYXRlID0gKGxlZnQsIHJpZ2h0LCBwYXJhbXMpID0+IHtcbiAgcmV0dXJuIG5ldyBab2RJbnRlcnNlY3Rpb24oe1xuICAgIGxlZnQsXG4gICAgcmlnaHQsXG4gICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RJbnRlcnNlY3Rpb24sXG4gICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpXG4gIH0pO1xufTtcbnZhciBab2RUdXBsZSA9IGNsYXNzIF9ab2RUdXBsZSBleHRlbmRzIFpvZFR5cGUge1xuICBfcGFyc2UoaW5wdXQpIHtcbiAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmFycmF5LFxuICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGVcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxuICAgIGlmIChjdHguZGF0YS5sZW5ndGggPCB0aGlzLl9kZWYuaXRlbXMubGVuZ3RoKSB7XG4gICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgbWluaW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgIHR5cGU6IFwiYXJyYXlcIlxuICAgICAgfSk7XG4gICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgY29uc3QgcmVzdCA9IHRoaXMuX2RlZi5yZXN0O1xuICAgIGlmICghcmVzdCAmJiBjdHguZGF0YS5sZW5ndGggPiB0aGlzLl9kZWYuaXRlbXMubGVuZ3RoKSB7XG4gICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgIG1heGltdW06IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICB0eXBlOiBcImFycmF5XCJcbiAgICAgIH0pO1xuICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgfVxuICAgIGNvbnN0IGl0ZW1zID0gWy4uLmN0eC5kYXRhXS5tYXAoKGl0ZW0sIGl0ZW1JbmRleCkgPT4ge1xuICAgICAgY29uc3Qgc2NoZW1hID0gdGhpcy5fZGVmLml0ZW1zW2l0ZW1JbmRleF0gfHwgdGhpcy5fZGVmLnJlc3Q7XG4gICAgICBpZiAoIXNjaGVtYSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICByZXR1cm4gc2NoZW1hLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGl0ZW1JbmRleCkpO1xuICAgIH0pLmZpbHRlcigoeCkgPT4gISF4KTtcbiAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGl0ZW1zKS50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZUFycmF5KHN0YXR1cywgcmVzdWx0cyk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCBpdGVtcyk7XG4gICAgfVxuICB9XG4gIGdldCBpdGVtcygpIHtcbiAgICByZXR1cm4gdGhpcy5fZGVmLml0ZW1zO1xuICB9XG4gIHJlc3QocmVzdCkge1xuICAgIHJldHVybiBuZXcgX1pvZFR1cGxlKHtcbiAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgIHJlc3RcbiAgICB9KTtcbiAgfVxufTtcblpvZFR1cGxlLmNyZWF0ZSA9IChzY2hlbWFzLCBwYXJhbXMpID0+IHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHNjaGVtYXMpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IG11c3QgcGFzcyBhbiBhcnJheSBvZiBzY2hlbWFzIHRvIHoudHVwbGUoWyAuLi4gXSlcIik7XG4gIH1cbiAgcmV0dXJuIG5ldyBab2RUdXBsZSh7XG4gICAgaXRlbXM6IHNjaGVtYXMsXG4gICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RUdXBsZSxcbiAgICByZXN0OiBudWxsLFxuICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKVxuICB9KTtcbn07XG52YXIgWm9kUmVjb3JkID0gY2xhc3MgX1pvZFJlY29yZCBleHRlbmRzIFpvZFR5cGUge1xuICBnZXQga2V5U2NoZW1hKCkge1xuICAgIHJldHVybiB0aGlzLl9kZWYua2V5VHlwZTtcbiAgfVxuICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gIH1cbiAgX3BhcnNlKGlucHV0KSB7XG4gICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUub2JqZWN0LFxuICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGVcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxuICAgIGNvbnN0IHBhaXJzID0gW107XG4gICAgY29uc3Qga2V5VHlwZSA9IHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gY3R4LmRhdGEpIHtcbiAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICBrZXk6IGtleVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBrZXksIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgdmFsdWU6IHZhbHVlVHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGN0eC5kYXRhW2tleV0sIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGFcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0QXN5bmMoc3RhdHVzLCBwYWlycyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBwYWlycyk7XG4gICAgfVxuICB9XG4gIGdldCBlbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICB9XG4gIHN0YXRpYyBjcmVhdGUoZmlyc3QsIHNlY29uZCwgdGhpcmQpIHtcbiAgICBpZiAoc2Vjb25kIGluc3RhbmNlb2YgWm9kVHlwZSkge1xuICAgICAgcmV0dXJuIG5ldyBfWm9kUmVjb3JkKHtcbiAgICAgICAga2V5VHlwZTogZmlyc3QsXG4gICAgICAgIHZhbHVlVHlwZTogc2Vjb25kLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlY29yZCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlyZClcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IF9ab2RSZWNvcmQoe1xuICAgICAga2V5VHlwZTogWm9kU3RyaW5nLmNyZWF0ZSgpLFxuICAgICAgdmFsdWVUeXBlOiBmaXJzdCxcbiAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhzZWNvbmQpXG4gICAgfSk7XG4gIH1cbn07XG52YXIgWm9kTWFwID0gY2xhc3MgZXh0ZW5kcyBab2RUeXBlIHtcbiAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGVmLmtleVR5cGU7XG4gIH1cbiAgZ2V0IHZhbHVlU2NoZW1hKCkge1xuICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICB9XG4gIF9wYXJzZShpbnB1dCkge1xuICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm1hcCkge1xuICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm1hcCxcbiAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBJTlZBTElEO1xuICAgIH1cbiAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgY29uc3QgdmFsdWVUeXBlID0gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICBjb25zdCBwYWlycyA9IFsuLi5jdHguZGF0YS5lbnRyaWVzKCldLm1hcCgoW2tleSwgdmFsdWVdLCBpbmRleCkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAga2V5OiBrZXlUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwga2V5LCBjdHgucGF0aCwgW2luZGV4LCBcImtleVwiXSkpLFxuICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBbaW5kZXgsIFwidmFsdWVcIl0pKVxuICAgICAgfTtcbiAgICB9KTtcbiAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgY29uc3QgZmluYWxNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oYXN5bmMgKCkgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICBjb25zdCBrZXkgPSBhd2FpdCBwYWlyLmtleTtcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZmluYWxNYXAuc2V0KGtleS52YWx1ZSwgdmFsdWUudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBmaW5hbE1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gcGFpci5rZXk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcGFpci52YWx1ZTtcbiAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpIHtcbiAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxNYXAuc2V0KGtleS52YWx1ZSwgdmFsdWUudmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBmaW5hbE1hcCB9O1xuICAgIH1cbiAgfVxufTtcblpvZE1hcC5jcmVhdGUgPSAoa2V5VHlwZSwgdmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgcmV0dXJuIG5ldyBab2RNYXAoe1xuICAgIHZhbHVlVHlwZSxcbiAgICBrZXlUeXBlLFxuICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTWFwLFxuICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKVxuICB9KTtcbn07XG52YXIgWm9kU2V0ID0gY2xhc3MgX1pvZFNldCBleHRlbmRzIFpvZFR5cGUge1xuICBfcGFyc2UoaW5wdXQpIHtcbiAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zZXQpIHtcbiAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zZXQsXG4gICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgIGlmIChkZWYubWluU2l6ZSAhPT0gbnVsbCkge1xuICAgICAgaWYgKGN0eC5kYXRhLnNpemUgPCBkZWYubWluU2l6ZS52YWx1ZSkge1xuICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgIG1pbmltdW06IGRlZi5taW5TaXplLnZhbHVlLFxuICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBkZWYubWluU2l6ZS5tZXNzYWdlXG4gICAgICAgIH0pO1xuICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRlZi5tYXhTaXplICE9PSBudWxsKSB7XG4gICAgICBpZiAoY3R4LmRhdGEuc2l6ZSA+IGRlZi5tYXhTaXplLnZhbHVlKSB7XG4gICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgIG1heGltdW06IGRlZi5tYXhTaXplLnZhbHVlLFxuICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4U2l6ZS5tZXNzYWdlXG4gICAgICAgIH0pO1xuICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgdmFsdWVUeXBlID0gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICBmdW5jdGlvbiBmaW5hbGl6ZVNldChlbGVtZW50czIpIHtcbiAgICAgIGNvbnN0IHBhcnNlZFNldCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMyKSB7XG4gICAgICAgIGlmIChlbGVtZW50LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIGlmIChlbGVtZW50LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICBwYXJzZWRTZXQuYWRkKGVsZW1lbnQudmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBwYXJzZWRTZXQgfTtcbiAgICB9XG4gICAgY29uc3QgZWxlbWVudHMgPSBbLi4uY3R4LmRhdGEudmFsdWVzKCldLm1hcCgoaXRlbSwgaSkgPT4gdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKSk7XG4gICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLmFsbChlbGVtZW50cykudGhlbigoZWxlbWVudHMyKSA9PiBmaW5hbGl6ZVNldChlbGVtZW50czIpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZpbmFsaXplU2V0KGVsZW1lbnRzKTtcbiAgICB9XG4gIH1cbiAgbWluKG1pblNpemUsIG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gbmV3IF9ab2RTZXQoe1xuICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgbWluU2l6ZTogeyB2YWx1ZTogbWluU2l6ZSwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH1cbiAgICB9KTtcbiAgfVxuICBtYXgobWF4U2l6ZSwgbWVzc2FnZSkge1xuICAgIHJldHVybiBuZXcgX1pvZFNldCh7XG4gICAgICAuLi50aGlzLl9kZWYsXG4gICAgICBtYXhTaXplOiB7IHZhbHVlOiBtYXhTaXplLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfVxuICAgIH0pO1xuICB9XG4gIHNpemUoc2l6ZSwgbWVzc2FnZSkge1xuICAgIHJldHVybiB0aGlzLm1pbihzaXplLCBtZXNzYWdlKS5tYXgoc2l6ZSwgbWVzc2FnZSk7XG4gIH1cbiAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgIHJldHVybiB0aGlzLm1pbigxLCBtZXNzYWdlKTtcbiAgfVxufTtcblpvZFNldC5jcmVhdGUgPSAodmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgcmV0dXJuIG5ldyBab2RTZXQoe1xuICAgIHZhbHVlVHlwZSxcbiAgICBtaW5TaXplOiBudWxsLFxuICAgIG1heFNpemU6IG51bGwsXG4gICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQsXG4gICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpXG4gIH0pO1xufTtcbnZhciBab2RGdW5jdGlvbiA9IGNsYXNzIF9ab2RGdW5jdGlvbiBleHRlbmRzIFpvZFR5cGUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMudmFsaWRhdGUgPSB0aGlzLmltcGxlbWVudDtcbiAgfVxuICBfcGFyc2UoaW5wdXQpIHtcbiAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuZnVuY3Rpb24pIHtcbiAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5mdW5jdGlvbixcbiAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBJTlZBTElEO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtYWtlQXJnc0lzc3VlKGFyZ3MsIGVycm9yKSB7XG4gICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgZGF0YTogYXJncyxcbiAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgIGVycm9yTWFwczogW1xuICAgICAgICAgIGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLFxuICAgICAgICAgIGN0eC5zY2hlbWFFcnJvck1hcCxcbiAgICAgICAgICBnZXRFcnJvck1hcCgpLFxuICAgICAgICAgIGVycm9yTWFwXG4gICAgICAgIF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICBpc3N1ZURhdGE6IHtcbiAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9hcmd1bWVudHMsXG4gICAgICAgICAgYXJndW1lbnRzRXJyb3I6IGVycm9yXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtYWtlUmV0dXJuc0lzc3VlKHJldHVybnMsIGVycm9yKSB7XG4gICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgZGF0YTogcmV0dXJucyxcbiAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgIGVycm9yTWFwczogW1xuICAgICAgICAgIGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLFxuICAgICAgICAgIGN0eC5zY2hlbWFFcnJvck1hcCxcbiAgICAgICAgICBnZXRFcnJvck1hcCgpLFxuICAgICAgICAgIGVycm9yTWFwXG4gICAgICAgIF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICBpc3N1ZURhdGE6IHtcbiAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9yZXR1cm5fdHlwZSxcbiAgICAgICAgICByZXR1cm5UeXBlRXJyb3I6IGVycm9yXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBwYXJhbXMgPSB7IGVycm9yTWFwOiBjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCB9O1xuICAgIGNvbnN0IGZuID0gY3R4LmRhdGE7XG4gICAgaWYgKHRoaXMuX2RlZi5yZXR1cm5zIGluc3RhbmNlb2YgWm9kUHJvbWlzZSkge1xuICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgcmV0dXJuIE9LKGFzeW5jIGZ1bmN0aW9uKC4uLmFyZ3MpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoW10pO1xuICAgICAgICBjb25zdCBwYXJzZWRBcmdzID0gYXdhaXQgbWUuX2RlZi5hcmdzLnBhcnNlQXN5bmMoYXJncywgcGFyYW1zKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VBcmdzSXNzdWUoYXJncywgZSkpO1xuICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUmVmbGVjdC5hcHBseShmbiwgdGhpcywgcGFyc2VkQXJncyk7XG4gICAgICAgIGNvbnN0IHBhcnNlZFJldHVybnMgPSBhd2FpdCBtZS5fZGVmLnJldHVybnMuX2RlZi50eXBlLnBhcnNlQXN5bmMocmVzdWx0LCBwYXJhbXMpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgZXJyb3IuYWRkSXNzdWUobWFrZVJldHVybnNJc3N1ZShyZXN1bHQsIGUpKTtcbiAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwYXJzZWRSZXR1cm5zO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG1lID0gdGhpcztcbiAgICAgIHJldHVybiBPSyhmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBtZS5fZGVmLmFyZ3Muc2FmZVBhcnNlKGFyZ3MsIHBhcmFtcyk7XG4gICAgICAgIGlmICghcGFyc2VkQXJncy5zdWNjZXNzKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFpvZEVycm9yKFttYWtlQXJnc0lzc3VlKGFyZ3MsIHBhcnNlZEFyZ3MuZXJyb3IpXSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5hcHBseShmbiwgdGhpcywgcGFyc2VkQXJncy5kYXRhKTtcbiAgICAgICAgY29uc3QgcGFyc2VkUmV0dXJucyA9IG1lLl9kZWYucmV0dXJucy5zYWZlUGFyc2UocmVzdWx0LCBwYXJhbXMpO1xuICAgICAgICBpZiAoIXBhcnNlZFJldHVybnMuc3VjY2Vzcykge1xuICAgICAgICAgIHRocm93IG5ldyBab2RFcnJvcihbbWFrZVJldHVybnNJc3N1ZShyZXN1bHQsIHBhcnNlZFJldHVybnMuZXJyb3IpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnNlZFJldHVybnMuZGF0YTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBwYXJhbWV0ZXJzKCkge1xuICAgIHJldHVybiB0aGlzLl9kZWYuYXJncztcbiAgfVxuICByZXR1cm5UeXBlKCkge1xuICAgIHJldHVybiB0aGlzLl9kZWYucmV0dXJucztcbiAgfVxuICBhcmdzKC4uLml0ZW1zKSB7XG4gICAgcmV0dXJuIG5ldyBfWm9kRnVuY3Rpb24oe1xuICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgYXJnczogWm9kVHVwbGUuY3JlYXRlKGl0ZW1zKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJucyhyZXR1cm5UeXBlKSB7XG4gICAgcmV0dXJuIG5ldyBfWm9kRnVuY3Rpb24oe1xuICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgcmV0dXJuczogcmV0dXJuVHlwZVxuICAgIH0pO1xuICB9XG4gIGltcGxlbWVudChmdW5jKSB7XG4gICAgY29uc3QgdmFsaWRhdGVkRnVuYyA9IHRoaXMucGFyc2UoZnVuYyk7XG4gICAgcmV0dXJuIHZhbGlkYXRlZEZ1bmM7XG4gIH1cbiAgc3RyaWN0SW1wbGVtZW50KGZ1bmMpIHtcbiAgICBjb25zdCB2YWxpZGF0ZWRGdW5jID0gdGhpcy5wYXJzZShmdW5jKTtcbiAgICByZXR1cm4gdmFsaWRhdGVkRnVuYztcbiAgfVxuICBzdGF0aWMgY3JlYXRlKGFyZ3MsIHJldHVybnMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgX1pvZEZ1bmN0aW9uKHtcbiAgICAgIGFyZ3M6IGFyZ3MgPyBhcmdzIDogWm9kVHVwbGUuY3JlYXRlKFtdKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpLFxuICAgICAgcmV0dXJuczogcmV0dXJucyB8fCBab2RVbmtub3duLmNyZWF0ZSgpLFxuICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RGdW5jdGlvbixcbiAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKVxuICAgIH0pO1xuICB9XG59O1xudmFyIFpvZExhenkgPSBjbGFzcyBleHRlbmRzIFpvZFR5cGUge1xuICBnZXQgc2NoZW1hKCkge1xuICAgIHJldHVybiB0aGlzLl9kZWYuZ2V0dGVyKCk7XG4gIH1cbiAgX3BhcnNlKGlucHV0KSB7XG4gICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgY29uc3QgbGF6eVNjaGVtYSA9IHRoaXMuX2RlZi5nZXR0ZXIoKTtcbiAgICByZXR1cm4gbGF6eVNjaGVtYS5fcGFyc2UoeyBkYXRhOiBjdHguZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pO1xuICB9XG59O1xuWm9kTGF6eS5jcmVhdGUgPSAoZ2V0dGVyLCBwYXJhbXMpID0+IHtcbiAgcmV0dXJuIG5ldyBab2RMYXp5KHtcbiAgICBnZXR0ZXIsXG4gICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RMYXp5LFxuICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKVxuICB9KTtcbn07XG52YXIgWm9kTGl0ZXJhbCA9IGNsYXNzIGV4dGVuZHMgWm9kVHlwZSB7XG4gIF9wYXJzZShpbnB1dCkge1xuICAgIGlmIChpbnB1dC5kYXRhICE9PSB0aGlzLl9kZWYudmFsdWUpIHtcbiAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICByZWNlaXZlZDogY3R4LmRhdGEsXG4gICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2xpdGVyYWwsXG4gICAgICAgIGV4cGVjdGVkOiB0aGlzLl9kZWYudmFsdWVcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxuICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICB9XG4gIGdldCB2YWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlO1xuICB9XG59O1xuWm9kTGl0ZXJhbC5jcmVhdGUgPSAodmFsdWUsIHBhcmFtcykgPT4ge1xuICByZXR1cm4gbmV3IFpvZExpdGVyYWwoe1xuICAgIHZhbHVlLFxuICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGl0ZXJhbCxcbiAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcylcbiAgfSk7XG59O1xuZnVuY3Rpb24gY3JlYXRlWm9kRW51bSh2YWx1ZXMsIHBhcmFtcykge1xuICByZXR1cm4gbmV3IFpvZEVudW0oe1xuICAgIHZhbHVlcyxcbiAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVudW0sXG4gICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpXG4gIH0pO1xufVxudmFyIFpvZEVudW0gPSBjbGFzcyBfWm9kRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIF9ab2RFbnVtX2NhY2hlLnNldCh0aGlzLCB2b2lkIDApO1xuICB9XG4gIF9wYXJzZShpbnB1dCkge1xuICAgIGlmICh0eXBlb2YgaW5wdXQuZGF0YSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB0aGlzLl9kZWYudmFsdWVzO1xuICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgIGV4cGVjdGVkOiB1dGlsLmpvaW5WYWx1ZXMoZXhwZWN0ZWRWYWx1ZXMpLFxuICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGVcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxuICAgIGlmICghX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfWm9kRW51bV9jYWNoZSwgXCJmXCIpKSB7XG4gICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9ab2RFbnVtX2NhY2hlLCBuZXcgU2V0KHRoaXMuX2RlZi52YWx1ZXMpLCBcImZcIik7XG4gICAgfVxuICAgIGlmICghX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfWm9kRW51bV9jYWNoZSwgXCJmXCIpLmhhcyhpbnB1dC5kYXRhKSkge1xuICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB0aGlzLl9kZWYudmFsdWVzO1xuICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZW51bV92YWx1ZSxcbiAgICAgICAgb3B0aW9uczogZXhwZWN0ZWRWYWx1ZXNcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxuICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgfVxuICBnZXQgb3B0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgfVxuICBnZXQgZW51bSgpIHtcbiAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgIH1cbiAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgfVxuICBnZXQgVmFsdWVzKCkge1xuICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IHZhbCBvZiB0aGlzLl9kZWYudmFsdWVzKSB7XG4gICAgICBlbnVtVmFsdWVzW3ZhbF0gPSB2YWw7XG4gICAgfVxuICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICB9XG4gIGdldCBFbnVtKCkge1xuICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IHZhbCBvZiB0aGlzLl9kZWYudmFsdWVzKSB7XG4gICAgICBlbnVtVmFsdWVzW3ZhbF0gPSB2YWw7XG4gICAgfVxuICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICB9XG4gIGV4dHJhY3QodmFsdWVzLCBuZXdEZWYgPSB0aGlzLl9kZWYpIHtcbiAgICByZXR1cm4gX1pvZEVudW0uY3JlYXRlKHZhbHVlcywge1xuICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgLi4ubmV3RGVmXG4gICAgfSk7XG4gIH1cbiAgZXhjbHVkZSh2YWx1ZXMsIG5ld0RlZiA9IHRoaXMuX2RlZikge1xuICAgIHJldHVybiBfWm9kRW51bS5jcmVhdGUodGhpcy5vcHRpb25zLmZpbHRlcigob3B0KSA9PiAhdmFsdWVzLmluY2x1ZGVzKG9wdCkpLCB7XG4gICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAuLi5uZXdEZWZcbiAgICB9KTtcbiAgfVxufTtcbl9ab2RFbnVtX2NhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5ab2RFbnVtLmNyZWF0ZSA9IGNyZWF0ZVpvZEVudW07XG52YXIgWm9kTmF0aXZlRW51bSA9IGNsYXNzIGV4dGVuZHMgWm9kVHlwZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgX1pvZE5hdGl2ZUVudW1fY2FjaGUuc2V0KHRoaXMsIHZvaWQgMCk7XG4gIH1cbiAgX3BhcnNlKGlucHV0KSB7XG4gICAgY29uc3QgbmF0aXZlRW51bVZhbHVlcyA9IHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzKHRoaXMuX2RlZi52YWx1ZXMpO1xuICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc3RyaW5nICYmIGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bWJlcikge1xuICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB1dGlsLm9iamVjdFZhbHVlcyhuYXRpdmVFbnVtVmFsdWVzKTtcbiAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBJTlZBTElEO1xuICAgIH1cbiAgICBpZiAoIV9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX1pvZE5hdGl2ZUVudW1fY2FjaGUsIFwiZlwiKSkge1xuICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfWm9kTmF0aXZlRW51bV9jYWNoZSwgbmV3IFNldCh1dGlsLmdldFZhbGlkRW51bVZhbHVlcyh0aGlzLl9kZWYudmFsdWVzKSksIFwiZlwiKTtcbiAgICB9XG4gICAgaWYgKCFfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9ab2ROYXRpdmVFbnVtX2NhY2hlLCBcImZcIikuaGFzKGlucHV0LmRhdGEpKSB7XG4gICAgICBjb25zdCBleHBlY3RlZFZhbHVlcyA9IHV0aWwub2JqZWN0VmFsdWVzKG5hdGl2ZUVudW1WYWx1ZXMpO1xuICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZW51bV92YWx1ZSxcbiAgICAgICAgb3B0aW9uczogZXhwZWN0ZWRWYWx1ZXNcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxuICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgfVxuICBnZXQgZW51bSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgfVxufTtcbl9ab2ROYXRpdmVFbnVtX2NhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5ab2ROYXRpdmVFbnVtLmNyZWF0ZSA9ICh2YWx1ZXMsIHBhcmFtcykgPT4ge1xuICByZXR1cm4gbmV3IFpvZE5hdGl2ZUVudW0oe1xuICAgIHZhbHVlcyxcbiAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hdGl2ZUVudW0sXG4gICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpXG4gIH0pO1xufTtcbnZhciBab2RQcm9taXNlID0gY2xhc3MgZXh0ZW5kcyBab2RUeXBlIHtcbiAgdW53cmFwKCkge1xuICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgfVxuICBfcGFyc2UoaW5wdXQpIHtcbiAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUucHJvbWlzZSAmJiBjdHguY29tbW9uLmFzeW5jID09PSBmYWxzZSkge1xuICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnByb21pc2UsXG4gICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgY29uc3QgcHJvbWlzaWZpZWQgPSBjdHgucGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5wcm9taXNlID8gY3R4LmRhdGEgOiBQcm9taXNlLnJlc29sdmUoY3R4LmRhdGEpO1xuICAgIHJldHVybiBPSyhwcm9taXNpZmllZC50aGVuKChkYXRhKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGUucGFyc2VBc3luYyhkYXRhLCB7XG4gICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICBlcnJvck1hcDogY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXBcbiAgICAgIH0pO1xuICAgIH0pKTtcbiAgfVxufTtcblpvZFByb21pc2UuY3JlYXRlID0gKHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gIHJldHVybiBuZXcgWm9kUHJvbWlzZSh7XG4gICAgdHlwZTogc2NoZW1hLFxuICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUHJvbWlzZSxcbiAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcylcbiAgfSk7XG59O1xudmFyIFpvZEVmZmVjdHMgPSBjbGFzcyBleHRlbmRzIFpvZFR5cGUge1xuICBpbm5lclR5cGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RlZi5zY2hlbWE7XG4gIH1cbiAgc291cmNlVHlwZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyA/IHRoaXMuX2RlZi5zY2hlbWEuc291cmNlVHlwZSgpIDogdGhpcy5fZGVmLnNjaGVtYTtcbiAgfVxuICBfcGFyc2UoaW5wdXQpIHtcbiAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgIGNvbnN0IGVmZmVjdCA9IHRoaXMuX2RlZi5lZmZlY3QgfHwgbnVsbDtcbiAgICBjb25zdCBjaGVja0N0eCA9IHtcbiAgICAgIGFkZElzc3VlOiAoYXJnKSA9PiB7XG4gICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwgYXJnKTtcbiAgICAgICAgaWYgKGFyZy5mYXRhbCkge1xuICAgICAgICAgIHN0YXR1cy5hYm9ydCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiBjdHgucGF0aDtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNoZWNrQ3R4LmFkZElzc3VlID0gY2hlY2tDdHguYWRkSXNzdWUuYmluZChjaGVja0N0eCk7XG4gICAgaWYgKGVmZmVjdC50eXBlID09PSBcInByZXByb2Nlc3NcIikge1xuICAgICAgY29uc3QgcHJvY2Vzc2VkID0gZWZmZWN0LnRyYW5zZm9ybShjdHguZGF0YSwgY2hlY2tDdHgpO1xuICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwcm9jZXNzZWQpLnRoZW4oYXN5bmMgKHByb2Nlc3NlZDIpID0+IHtcbiAgICAgICAgICBpZiAoc3RhdHVzLnZhbHVlID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgZGF0YTogcHJvY2Vzc2VkMixcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHhcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoc3RhdHVzLnZhbHVlID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VTeW5jKHtcbiAgICAgICAgICBkYXRhOiBwcm9jZXNzZWQsXG4gICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgcGFyZW50OiBjdHhcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZWZmZWN0LnR5cGUgPT09IFwicmVmaW5lbWVudFwiKSB7XG4gICAgICBjb25zdCBleGVjdXRlUmVmaW5lbWVudCA9IChhY2MpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gZWZmZWN0LnJlZmluZW1lbnQoYWNjLCBjaGVja0N0eCk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXN5bmMgcmVmaW5lbWVudCBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH07XG4gICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgaW5uZXIgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgIHBhcmVudDogY3R4XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgaWYgKGlubmVyLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICBleGVjdXRlUmVmaW5lbWVudChpbm5lci52YWx1ZSk7XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChpbm5lcikgPT4ge1xuICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgaWYgKGlubmVyLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgcmV0dXJuIGV4ZWN1dGVSZWZpbmVtZW50KGlubmVyLnZhbHVlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJ0cmFuc2Zvcm1cIikge1xuICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IGJhc2UgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgIHBhcmVudDogY3R4XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgcmV0dXJuIGJhc2U7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpO1xuICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXN5bmNocm9ub3VzIHRyYW5zZm9ybSBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IHJlc3VsdCB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlQXN5bmMoeyBkYXRhOiBjdHguZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pLnRoZW4oKGJhc2UpID0+IHtcbiAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICByZXR1cm4gYmFzZTtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpKS50aGVuKChyZXN1bHQpID0+ICh7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcmVzdWx0IH0pKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHV0aWwuYXNzZXJ0TmV2ZXIoZWZmZWN0KTtcbiAgfVxufTtcblpvZEVmZmVjdHMuY3JlYXRlID0gKHNjaGVtYSwgZWZmZWN0LCBwYXJhbXMpID0+IHtcbiAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICBzY2hlbWEsXG4gICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgIGVmZmVjdCxcbiAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcylcbiAgfSk7XG59O1xuWm9kRWZmZWN0cy5jcmVhdGVXaXRoUHJlcHJvY2VzcyA9IChwcmVwcm9jZXNzLCBzY2hlbWEsIHBhcmFtcykgPT4ge1xuICByZXR1cm4gbmV3IFpvZEVmZmVjdHMoe1xuICAgIHNjaGVtYSxcbiAgICBlZmZlY3Q6IHsgdHlwZTogXCJwcmVwcm9jZXNzXCIsIHRyYW5zZm9ybTogcHJlcHJvY2VzcyB9LFxuICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcylcbiAgfSk7XG59O1xudmFyIFpvZE9wdGlvbmFsID0gY2xhc3MgZXh0ZW5kcyBab2RUeXBlIHtcbiAgX3BhcnNlKGlucHV0KSB7XG4gICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgIGlmIChwYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIE9LKHZvaWQgMCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gIH1cbiAgdW53cmFwKCkge1xuICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICB9XG59O1xuWm9kT3B0aW9uYWwuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICByZXR1cm4gbmV3IFpvZE9wdGlvbmFsKHtcbiAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPcHRpb25hbCxcbiAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcylcbiAgfSk7XG59O1xudmFyIFpvZE51bGxhYmxlID0gY2xhc3MgZXh0ZW5kcyBab2RUeXBlIHtcbiAgX3BhcnNlKGlucHV0KSB7XG4gICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgIGlmIChwYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLm51bGwpIHtcbiAgICAgIHJldHVybiBPSyhudWxsKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKGlucHV0KTtcbiAgfVxuICB1bndyYXAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gIH1cbn07XG5ab2ROdWxsYWJsZS5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gIHJldHVybiBuZXcgWm9kTnVsbGFibGUoe1xuICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGxhYmxlLFxuICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKVxuICB9KTtcbn07XG52YXIgWm9kRGVmYXVsdCA9IGNsYXNzIGV4dGVuZHMgWm9kVHlwZSB7XG4gIF9wYXJzZShpbnB1dCkge1xuICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgIGxldCBkYXRhID0gY3R4LmRhdGE7XG4gICAgaWYgKGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgZGF0YSA9IHRoaXMuX2RlZi5kZWZhdWx0VmFsdWUoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKHtcbiAgICAgIGRhdGEsXG4gICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgIHBhcmVudDogY3R4XG4gICAgfSk7XG4gIH1cbiAgcmVtb3ZlRGVmYXVsdCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgfVxufTtcblpvZERlZmF1bHQuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICByZXR1cm4gbmV3IFpvZERlZmF1bHQoe1xuICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERlZmF1bHQsXG4gICAgZGVmYXVsdFZhbHVlOiB0eXBlb2YgcGFyYW1zLmRlZmF1bHQgPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcy5kZWZhdWx0IDogKCkgPT4gcGFyYW1zLmRlZmF1bHQsXG4gICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpXG4gIH0pO1xufTtcbnZhciBab2RDYXRjaCA9IGNsYXNzIGV4dGVuZHMgWm9kVHlwZSB7XG4gIF9wYXJzZShpbnB1dCkge1xuICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgIGNvbnN0IG5ld0N0eCA9IHtcbiAgICAgIC4uLmN0eCxcbiAgICAgIGNvbW1vbjoge1xuICAgICAgICAuLi5jdHguY29tbW9uLFxuICAgICAgICBpc3N1ZXM6IFtdXG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICBkYXRhOiBuZXdDdHguZGF0YSxcbiAgICAgIHBhdGg6IG5ld0N0eC5wYXRoLFxuICAgICAgcGFyZW50OiB7XG4gICAgICAgIC4uLm5ld0N0eFxuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChpc0FzeW5jKHJlc3VsdCkpIHtcbiAgICAgIHJldHVybiByZXN1bHQudGhlbigocmVzdWx0MikgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN0YXR1czogXCJ2YWxpZFwiLFxuICAgICAgICAgIHZhbHVlOiByZXN1bHQyLnN0YXR1cyA9PT0gXCJ2YWxpZFwiID8gcmVzdWx0Mi52YWx1ZSA6IHRoaXMuX2RlZi5jYXRjaFZhbHVlKHtcbiAgICAgICAgICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW5wdXQ6IG5ld0N0eC5kYXRhXG4gICAgICAgICAgfSlcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGF0dXM6IFwidmFsaWRcIixcbiAgICAgICAgdmFsdWU6IHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIiA/IHJlc3VsdC52YWx1ZSA6IHRoaXMuX2RlZi5jYXRjaFZhbHVlKHtcbiAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFpvZEVycm9yKG5ld0N0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGlucHV0OiBuZXdDdHguZGF0YVxuICAgICAgICB9KVxuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgcmVtb3ZlQ2F0Y2goKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gIH1cbn07XG5ab2RDYXRjaC5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gIHJldHVybiBuZXcgWm9kQ2F0Y2goe1xuICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgIGNhdGNoVmFsdWU6IHR5cGVvZiBwYXJhbXMuY2F0Y2ggPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcy5jYXRjaCA6ICgpID0+IHBhcmFtcy5jYXRjaCxcbiAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcylcbiAgfSk7XG59O1xudmFyIFpvZE5hTiA9IGNsYXNzIGV4dGVuZHMgWm9kVHlwZSB7XG4gIF9wYXJzZShpbnB1dCkge1xuICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5uYW4pIHtcbiAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5uYW4sXG4gICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgcmV0dXJuIHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gIH1cbn07XG5ab2ROYU4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICByZXR1cm4gbmV3IFpvZE5hTih7XG4gICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROYU4sXG4gICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpXG4gIH0pO1xufTtcbnZhciBCUkFORCA9IFN5bWJvbChcInpvZF9icmFuZFwiKTtcbnZhciBab2RCcmFuZGVkID0gY2xhc3MgZXh0ZW5kcyBab2RUeXBlIHtcbiAgX3BhcnNlKGlucHV0KSB7XG4gICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgY29uc3QgZGF0YSA9IGN0eC5kYXRhO1xuICAgIHJldHVybiB0aGlzLl9kZWYudHlwZS5fcGFyc2Uoe1xuICAgICAgZGF0YSxcbiAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgcGFyZW50OiBjdHhcbiAgICB9KTtcbiAgfVxuICB1bndyYXAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICB9XG59O1xudmFyIFpvZFBpcGVsaW5lID0gY2xhc3MgX1pvZFBpcGVsaW5lIGV4dGVuZHMgWm9kVHlwZSB7XG4gIF9wYXJzZShpbnB1dCkge1xuICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgIGNvbnN0IGhhbmRsZUFzeW5jID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBpblJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5pbi5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgcGFyZW50OiBjdHhcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChpblJlc3VsdC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICByZXR1cm4gRElSVFkoaW5SZXN1bHQudmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYub3V0Ll9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgIGRhdGE6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IGN0eFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgcmV0dXJuIGhhbmRsZUFzeW5jKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGluUmVzdWx0ID0gdGhpcy5fZGVmLmluLl9wYXJzZVN5bmMoe1xuICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgIHBhcmVudDogY3R4XG4gICAgICB9KTtcbiAgICAgIGlmIChpblJlc3VsdC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgIGlmIChpblJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdGF0dXM6IFwiZGlydHlcIixcbiAgICAgICAgICB2YWx1ZTogaW5SZXN1bHQudmFsdWVcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3V0Ll9wYXJzZVN5bmMoe1xuICAgICAgICAgIGRhdGE6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgIHBhcmVudDogY3R4XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBzdGF0aWMgY3JlYXRlKGEsIGIpIHtcbiAgICByZXR1cm4gbmV3IF9ab2RQaXBlbGluZSh7XG4gICAgICBpbjogYSxcbiAgICAgIG91dDogYixcbiAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmVcbiAgICB9KTtcbiAgfVxufTtcbnZhciBab2RSZWFkb25seSA9IGNsYXNzIGV4dGVuZHMgWm9kVHlwZSB7XG4gIF9wYXJzZShpbnB1dCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKGlucHV0KTtcbiAgICBjb25zdCBmcmVlemUgPSAoZGF0YSkgPT4ge1xuICAgICAgaWYgKGlzVmFsaWQoZGF0YSkpIHtcbiAgICAgICAgZGF0YS52YWx1ZSA9IE9iamVjdC5mcmVlemUoZGF0YS52YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9O1xuICAgIHJldHVybiBpc0FzeW5jKHJlc3VsdCkgPyByZXN1bHQudGhlbigoZGF0YSkgPT4gZnJlZXplKGRhdGEpKSA6IGZyZWV6ZShyZXN1bHQpO1xuICB9XG4gIHVud3JhcCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgfVxufTtcblpvZFJlYWRvbmx5LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgcmV0dXJuIG5ldyBab2RSZWFkb25seSh7XG4gICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVhZG9ubHksXG4gICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpXG4gIH0pO1xufTtcbmZ1bmN0aW9uIGN1c3RvbShjaGVjaywgcGFyYW1zID0ge30sIGZhdGFsKSB7XG4gIGlmIChjaGVjaylcbiAgICByZXR1cm4gWm9kQW55LmNyZWF0ZSgpLnN1cGVyUmVmaW5lKChkYXRhLCBjdHgpID0+IHtcbiAgICAgIHZhciBfYSwgX2I7XG4gICAgICBpZiAoIWNoZWNrKGRhdGEpKSB7XG4gICAgICAgIGNvbnN0IHAgPSB0eXBlb2YgcGFyYW1zID09PSBcImZ1bmN0aW9uXCIgPyBwYXJhbXMoZGF0YSkgOiB0eXBlb2YgcGFyYW1zID09PSBcInN0cmluZ1wiID8geyBtZXNzYWdlOiBwYXJhbXMgfSA6IHBhcmFtcztcbiAgICAgICAgY29uc3QgX2ZhdGFsID0gKF9iID0gKF9hID0gcC5mYXRhbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmF0YWwpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHRydWU7XG4gICAgICAgIGNvbnN0IHAyID0gdHlwZW9mIHAgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHAgfSA6IHA7XG4gICAgICAgIGN0eC5hZGRJc3N1ZSh7IGNvZGU6IFwiY3VzdG9tXCIsIC4uLnAyLCBmYXRhbDogX2ZhdGFsIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICByZXR1cm4gWm9kQW55LmNyZWF0ZSgpO1xufVxudmFyIGxhdGUgPSB7XG4gIG9iamVjdDogWm9kT2JqZWN0LmxhenljcmVhdGVcbn07XG52YXIgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kO1xuKGZ1bmN0aW9uKFpvZEZpcnN0UGFydHlUeXBlS2luZDIpIHtcbiAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMltcIlpvZFN0cmluZ1wiXSA9IFwiWm9kU3RyaW5nXCI7XG4gIFpvZEZpcnN0UGFydHlUeXBlS2luZDJbXCJab2ROdW1iZXJcIl0gPSBcIlpvZE51bWJlclwiO1xuICBab2RGaXJzdFBhcnR5VHlwZUtpbmQyW1wiWm9kTmFOXCJdID0gXCJab2ROYU5cIjtcbiAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMltcIlpvZEJpZ0ludFwiXSA9IFwiWm9kQmlnSW50XCI7XG4gIFpvZEZpcnN0UGFydHlUeXBlS2luZDJbXCJab2RCb29sZWFuXCJdID0gXCJab2RCb29sZWFuXCI7XG4gIFpvZEZpcnN0UGFydHlUeXBlS2luZDJbXCJab2REYXRlXCJdID0gXCJab2REYXRlXCI7XG4gIFpvZEZpcnN0UGFydHlUeXBlS2luZDJbXCJab2RTeW1ib2xcIl0gPSBcIlpvZFN5bWJvbFwiO1xuICBab2RGaXJzdFBhcnR5VHlwZUtpbmQyW1wiWm9kVW5kZWZpbmVkXCJdID0gXCJab2RVbmRlZmluZWRcIjtcbiAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMltcIlpvZE51bGxcIl0gPSBcIlpvZE51bGxcIjtcbiAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMltcIlpvZEFueVwiXSA9IFwiWm9kQW55XCI7XG4gIFpvZEZpcnN0UGFydHlUeXBlS2luZDJbXCJab2RVbmtub3duXCJdID0gXCJab2RVbmtub3duXCI7XG4gIFpvZEZpcnN0UGFydHlUeXBlS2luZDJbXCJab2ROZXZlclwiXSA9IFwiWm9kTmV2ZXJcIjtcbiAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMltcIlpvZFZvaWRcIl0gPSBcIlpvZFZvaWRcIjtcbiAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMltcIlpvZEFycmF5XCJdID0gXCJab2RBcnJheVwiO1xuICBab2RGaXJzdFBhcnR5VHlwZUtpbmQyW1wiWm9kT2JqZWN0XCJdID0gXCJab2RPYmplY3RcIjtcbiAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMltcIlpvZFVuaW9uXCJdID0gXCJab2RVbmlvblwiO1xuICBab2RGaXJzdFBhcnR5VHlwZUtpbmQyW1wiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCJdID0gXCJab2REaXNjcmltaW5hdGVkVW5pb25cIjtcbiAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMltcIlpvZEludGVyc2VjdGlvblwiXSA9IFwiWm9kSW50ZXJzZWN0aW9uXCI7XG4gIFpvZEZpcnN0UGFydHlUeXBlS2luZDJbXCJab2RUdXBsZVwiXSA9IFwiWm9kVHVwbGVcIjtcbiAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMltcIlpvZFJlY29yZFwiXSA9IFwiWm9kUmVjb3JkXCI7XG4gIFpvZEZpcnN0UGFydHlUeXBlS2luZDJbXCJab2RNYXBcIl0gPSBcIlpvZE1hcFwiO1xuICBab2RGaXJzdFBhcnR5VHlwZUtpbmQyW1wiWm9kU2V0XCJdID0gXCJab2RTZXRcIjtcbiAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMltcIlpvZEZ1bmN0aW9uXCJdID0gXCJab2RGdW5jdGlvblwiO1xuICBab2RGaXJzdFBhcnR5VHlwZUtpbmQyW1wiWm9kTGF6eVwiXSA9IFwiWm9kTGF6eVwiO1xuICBab2RGaXJzdFBhcnR5VHlwZUtpbmQyW1wiWm9kTGl0ZXJhbFwiXSA9IFwiWm9kTGl0ZXJhbFwiO1xuICBab2RGaXJzdFBhcnR5VHlwZUtpbmQyW1wiWm9kRW51bVwiXSA9IFwiWm9kRW51bVwiO1xuICBab2RGaXJzdFBhcnR5VHlwZUtpbmQyW1wiWm9kRWZmZWN0c1wiXSA9IFwiWm9kRWZmZWN0c1wiO1xuICBab2RGaXJzdFBhcnR5VHlwZUtpbmQyW1wiWm9kTmF0aXZlRW51bVwiXSA9IFwiWm9kTmF0aXZlRW51bVwiO1xuICBab2RGaXJzdFBhcnR5VHlwZUtpbmQyW1wiWm9kT3B0aW9uYWxcIl0gPSBcIlpvZE9wdGlvbmFsXCI7XG4gIFpvZEZpcnN0UGFydHlUeXBlS2luZDJbXCJab2ROdWxsYWJsZVwiXSA9IFwiWm9kTnVsbGFibGVcIjtcbiAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMltcIlpvZERlZmF1bHRcIl0gPSBcIlpvZERlZmF1bHRcIjtcbiAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kMltcIlpvZENhdGNoXCJdID0gXCJab2RDYXRjaFwiO1xuICBab2RGaXJzdFBhcnR5VHlwZUtpbmQyW1wiWm9kUHJvbWlzZVwiXSA9IFwiWm9kUHJvbWlzZVwiO1xuICBab2RGaXJzdFBhcnR5VHlwZUtpbmQyW1wiWm9kQnJhbmRlZFwiXSA9IFwiWm9kQnJhbmRlZFwiO1xuICBab2RGaXJzdFBhcnR5VHlwZUtpbmQyW1wiWm9kUGlwZWxpbmVcIl0gPSBcIlpvZFBpcGVsaW5lXCI7XG4gIFpvZEZpcnN0UGFydHlUeXBlS2luZDJbXCJab2RSZWFkb25seVwiXSA9IFwiWm9kUmVhZG9ubHlcIjtcbn0pKFpvZEZpcnN0UGFydHlUeXBlS2luZCB8fCAoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kID0ge30pKTtcbnZhciBpbnN0YW5jZU9mVHlwZSA9IChjbHMsIHBhcmFtcyA9IHtcbiAgbWVzc2FnZTogYElucHV0IG5vdCBpbnN0YW5jZSBvZiAke2Nscy5uYW1lfWBcbn0pID0+IGN1c3RvbSgoZGF0YSkgPT4gZGF0YSBpbnN0YW5jZW9mIGNscywgcGFyYW1zKTtcbnZhciBzdHJpbmdUeXBlID0gWm9kU3RyaW5nLmNyZWF0ZTtcbnZhciBudW1iZXJUeXBlID0gWm9kTnVtYmVyLmNyZWF0ZTtcbnZhciBuYW5UeXBlID0gWm9kTmFOLmNyZWF0ZTtcbnZhciBiaWdJbnRUeXBlID0gWm9kQmlnSW50LmNyZWF0ZTtcbnZhciBib29sZWFuVHlwZSA9IFpvZEJvb2xlYW4uY3JlYXRlO1xudmFyIGRhdGVUeXBlID0gWm9kRGF0ZS5jcmVhdGU7XG52YXIgc3ltYm9sVHlwZSA9IFpvZFN5bWJvbC5jcmVhdGU7XG52YXIgdW5kZWZpbmVkVHlwZSA9IFpvZFVuZGVmaW5lZC5jcmVhdGU7XG52YXIgbnVsbFR5cGUgPSBab2ROdWxsLmNyZWF0ZTtcbnZhciBhbnlUeXBlID0gWm9kQW55LmNyZWF0ZTtcbnZhciB1bmtub3duVHlwZSA9IFpvZFVua25vd24uY3JlYXRlO1xudmFyIG5ldmVyVHlwZSA9IFpvZE5ldmVyLmNyZWF0ZTtcbnZhciB2b2lkVHlwZSA9IFpvZFZvaWQuY3JlYXRlO1xudmFyIGFycmF5VHlwZSA9IFpvZEFycmF5LmNyZWF0ZTtcbnZhciBvYmplY3RUeXBlID0gWm9kT2JqZWN0LmNyZWF0ZTtcbnZhciBzdHJpY3RPYmplY3RUeXBlID0gWm9kT2JqZWN0LnN0cmljdENyZWF0ZTtcbnZhciB1bmlvblR5cGUgPSBab2RVbmlvbi5jcmVhdGU7XG52YXIgZGlzY3JpbWluYXRlZFVuaW9uVHlwZSA9IFpvZERpc2NyaW1pbmF0ZWRVbmlvbi5jcmVhdGU7XG52YXIgaW50ZXJzZWN0aW9uVHlwZSA9IFpvZEludGVyc2VjdGlvbi5jcmVhdGU7XG52YXIgdHVwbGVUeXBlID0gWm9kVHVwbGUuY3JlYXRlO1xudmFyIHJlY29yZFR5cGUgPSBab2RSZWNvcmQuY3JlYXRlO1xudmFyIG1hcFR5cGUgPSBab2RNYXAuY3JlYXRlO1xudmFyIHNldFR5cGUgPSBab2RTZXQuY3JlYXRlO1xudmFyIGZ1bmN0aW9uVHlwZSA9IFpvZEZ1bmN0aW9uLmNyZWF0ZTtcbnZhciBsYXp5VHlwZSA9IFpvZExhenkuY3JlYXRlO1xudmFyIGxpdGVyYWxUeXBlID0gWm9kTGl0ZXJhbC5jcmVhdGU7XG52YXIgZW51bVR5cGUgPSBab2RFbnVtLmNyZWF0ZTtcbnZhciBuYXRpdmVFbnVtVHlwZSA9IFpvZE5hdGl2ZUVudW0uY3JlYXRlO1xudmFyIHByb21pc2VUeXBlID0gWm9kUHJvbWlzZS5jcmVhdGU7XG52YXIgZWZmZWN0c1R5cGUgPSBab2RFZmZlY3RzLmNyZWF0ZTtcbnZhciBvcHRpb25hbFR5cGUgPSBab2RPcHRpb25hbC5jcmVhdGU7XG52YXIgbnVsbGFibGVUeXBlID0gWm9kTnVsbGFibGUuY3JlYXRlO1xudmFyIHByZXByb2Nlc3NUeXBlID0gWm9kRWZmZWN0cy5jcmVhdGVXaXRoUHJlcHJvY2VzcztcbnZhciBwaXBlbGluZVR5cGUgPSBab2RQaXBlbGluZS5jcmVhdGU7XG52YXIgb3N0cmluZyA9ICgpID0+IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpO1xudmFyIG9udW1iZXIgPSAoKSA9PiBudW1iZXJUeXBlKCkub3B0aW9uYWwoKTtcbnZhciBvYm9vbGVhbiA9ICgpID0+IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKTtcbnZhciBjb2VyY2UgPSB7XG4gIHN0cmluZzogKGFyZykgPT4gWm9kU3RyaW5nLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pLFxuICBudW1iZXI6IChhcmcpID0+IFpvZE51bWJlci5jcmVhdGUoeyAuLi5hcmcsIGNvZXJjZTogdHJ1ZSB9KSxcbiAgYm9vbGVhbjogKGFyZykgPT4gWm9kQm9vbGVhbi5jcmVhdGUoe1xuICAgIC4uLmFyZyxcbiAgICBjb2VyY2U6IHRydWVcbiAgfSksXG4gIGJpZ2ludDogKGFyZykgPT4gWm9kQmlnSW50LmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pLFxuICBkYXRlOiAoYXJnKSA9PiBab2REYXRlLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pXG59O1xudmFyIE5FVkVSID0gSU5WQUxJRDtcbnZhciB6ID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gIGRlZmF1bHRFcnJvck1hcDogZXJyb3JNYXAsXG4gIHNldEVycm9yTWFwLFxuICBnZXRFcnJvck1hcCxcbiAgbWFrZUlzc3VlLFxuICBFTVBUWV9QQVRILFxuICBhZGRJc3N1ZVRvQ29udGV4dCxcbiAgUGFyc2VTdGF0dXMsXG4gIElOVkFMSUQsXG4gIERJUlRZLFxuICBPSyxcbiAgaXNBYm9ydGVkLFxuICBpc0RpcnR5LFxuICBpc1ZhbGlkLFxuICBpc0FzeW5jLFxuICBnZXQgdXRpbCgpIHtcbiAgICByZXR1cm4gdXRpbDtcbiAgfSxcbiAgZ2V0IG9iamVjdFV0aWwoKSB7XG4gICAgcmV0dXJuIG9iamVjdFV0aWw7XG4gIH0sXG4gIFpvZFBhcnNlZFR5cGUsXG4gIGdldFBhcnNlZFR5cGUsXG4gIFpvZFR5cGUsXG4gIGRhdGV0aW1lUmVnZXgsXG4gIFpvZFN0cmluZyxcbiAgWm9kTnVtYmVyLFxuICBab2RCaWdJbnQsXG4gIFpvZEJvb2xlYW4sXG4gIFpvZERhdGUsXG4gIFpvZFN5bWJvbCxcbiAgWm9kVW5kZWZpbmVkLFxuICBab2ROdWxsLFxuICBab2RBbnksXG4gIFpvZFVua25vd24sXG4gIFpvZE5ldmVyLFxuICBab2RWb2lkLFxuICBab2RBcnJheSxcbiAgWm9kT2JqZWN0LFxuICBab2RVbmlvbixcbiAgWm9kRGlzY3JpbWluYXRlZFVuaW9uLFxuICBab2RJbnRlcnNlY3Rpb24sXG4gIFpvZFR1cGxlLFxuICBab2RSZWNvcmQsXG4gIFpvZE1hcCxcbiAgWm9kU2V0LFxuICBab2RGdW5jdGlvbixcbiAgWm9kTGF6eSxcbiAgWm9kTGl0ZXJhbCxcbiAgWm9kRW51bSxcbiAgWm9kTmF0aXZlRW51bSxcbiAgWm9kUHJvbWlzZSxcbiAgWm9kRWZmZWN0cyxcbiAgWm9kVHJhbnNmb3JtZXI6IFpvZEVmZmVjdHMsXG4gIFpvZE9wdGlvbmFsLFxuICBab2ROdWxsYWJsZSxcbiAgWm9kRGVmYXVsdCxcbiAgWm9kQ2F0Y2gsXG4gIFpvZE5hTixcbiAgQlJBTkQsXG4gIFpvZEJyYW5kZWQsXG4gIFpvZFBpcGVsaW5lLFxuICBab2RSZWFkb25seSxcbiAgY3VzdG9tLFxuICBTY2hlbWE6IFpvZFR5cGUsXG4gIFpvZFNjaGVtYTogWm9kVHlwZSxcbiAgbGF0ZSxcbiAgZ2V0IFpvZEZpcnN0UGFydHlUeXBlS2luZCgpIHtcbiAgICByZXR1cm4gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kO1xuICB9LFxuICBjb2VyY2UsXG4gIGFueTogYW55VHlwZSxcbiAgYXJyYXk6IGFycmF5VHlwZSxcbiAgYmlnaW50OiBiaWdJbnRUeXBlLFxuICBib29sZWFuOiBib29sZWFuVHlwZSxcbiAgZGF0ZTogZGF0ZVR5cGUsXG4gIGRpc2NyaW1pbmF0ZWRVbmlvbjogZGlzY3JpbWluYXRlZFVuaW9uVHlwZSxcbiAgZWZmZWN0OiBlZmZlY3RzVHlwZSxcbiAgXCJlbnVtXCI6IGVudW1UeXBlLFxuICBcImZ1bmN0aW9uXCI6IGZ1bmN0aW9uVHlwZSxcbiAgXCJpbnN0YW5jZW9mXCI6IGluc3RhbmNlT2ZUeXBlLFxuICBpbnRlcnNlY3Rpb246IGludGVyc2VjdGlvblR5cGUsXG4gIGxhenk6IGxhenlUeXBlLFxuICBsaXRlcmFsOiBsaXRlcmFsVHlwZSxcbiAgbWFwOiBtYXBUeXBlLFxuICBuYW46IG5hblR5cGUsXG4gIG5hdGl2ZUVudW06IG5hdGl2ZUVudW1UeXBlLFxuICBuZXZlcjogbmV2ZXJUeXBlLFxuICBcIm51bGxcIjogbnVsbFR5cGUsXG4gIG51bGxhYmxlOiBudWxsYWJsZVR5cGUsXG4gIG51bWJlcjogbnVtYmVyVHlwZSxcbiAgb2JqZWN0OiBvYmplY3RUeXBlLFxuICBvYm9vbGVhbixcbiAgb251bWJlcixcbiAgb3B0aW9uYWw6IG9wdGlvbmFsVHlwZSxcbiAgb3N0cmluZyxcbiAgcGlwZWxpbmU6IHBpcGVsaW5lVHlwZSxcbiAgcHJlcHJvY2VzczogcHJlcHJvY2Vzc1R5cGUsXG4gIHByb21pc2U6IHByb21pc2VUeXBlLFxuICByZWNvcmQ6IHJlY29yZFR5cGUsXG4gIHNldDogc2V0VHlwZSxcbiAgc3RyaWN0T2JqZWN0OiBzdHJpY3RPYmplY3RUeXBlLFxuICBzdHJpbmc6IHN0cmluZ1R5cGUsXG4gIHN5bWJvbDogc3ltYm9sVHlwZSxcbiAgdHJhbnNmb3JtZXI6IGVmZmVjdHNUeXBlLFxuICB0dXBsZTogdHVwbGVUeXBlLFxuICBcInVuZGVmaW5lZFwiOiB1bmRlZmluZWRUeXBlLFxuICB1bmlvbjogdW5pb25UeXBlLFxuICB1bmtub3duOiB1bmtub3duVHlwZSxcbiAgXCJ2b2lkXCI6IHZvaWRUeXBlLFxuICBORVZFUixcbiAgWm9kSXNzdWVDb2RlLFxuICBxdW90ZWxlc3NKc29uLFxuICBab2RFcnJvclxufSk7XG5cbi8vIC4uL3R5cGVzL2Rpc3QvdmFsaWRhdG9ycy9jb21tb24udmFsaWRhdG9ycy5qc1xudmFyIEFjdGl2ZVBlZXJzU2NoZW1hID0gei5vYmplY3Qoe1xuICBwZWVySWRzOiB6LmFycmF5KHouc3RyaW5nKCkpLFxuICBkb21pbmFudFNwZWFrZXI6IHouc3RyaW5nKClcbn0pO1xudmFyIFJvb21Db250cm9sc1NjaGVtYSA9IHoub2JqZWN0KHtcbiAgcm9vbUxvY2tlZDogei5ib29sZWFuKCksXG4gIGFsbG93UHJvZHVjZTogei5ib29sZWFuKCksXG4gIGFsbG93UHJvZHVjZVNvdXJjZXM6IHoub2JqZWN0KHtcbiAgICBjYW06IHouYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG4gICAgbWljOiB6LmJvb2xlYW4oKS5kZWZhdWx0KHRydWUpLFxuICAgIHNjcmVlbjogei5ib29sZWFuKCkuZGVmYXVsdCh0cnVlKVxuICB9KSxcbiAgYWxsb3dDb25zdW1lOiB6LmJvb2xlYW4oKSxcbiAgYWxsb3dTZW5kRGF0YTogei5ib29sZWFuKClcbn0pO1xudmFyIHByb2R1Y2VTb3VyY2VzU2NoZW1hID0gei5vYmplY3Qoe1xuICBjYW06IHouYm9vbGVhbigpLFxuICBtaWM6IHouYm9vbGVhbigpLFxuICBzY3JlZW46IHouYm9vbGVhbigpXG59KTtcbnZhciBQZXJtaXNzaW9uU2NoZW1hID0gei5vYmplY3Qoe1xuICBhZG1pbjogei5ib29sZWFuKCksXG4gIGNhbkNvbnN1bWU6IHouYm9vbGVhbigpLFxuICBjYW5Qcm9kdWNlOiB6LmJvb2xlYW4oKSxcbiAgY2FuUHJvZHVjZVNvdXJjZXM6IHByb2R1Y2VTb3VyY2VzU2NoZW1hLFxuICBjYW5TZW5kRGF0YTogei5ib29sZWFuKCksXG4gIGNhblJlY3ZEYXRhOiB6LmJvb2xlYW4oKSxcbiAgY2FuVXBkYXRlTWV0YWRhdGE6IHouYm9vbGVhbigpXG59KTtcbnZhciBWb2xhdGlsZURhdGFNZXNzYWdlU2NoZW1hID0gei5vYmplY3Qoe1xuICBmcm9tOiB6LnN0cmluZygpLFxuICBwYXlsb2FkOiB6LnVua25vd24oKSxcbiAgbGFiZWw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgdG86IHoudW5pb24oW3oubGl0ZXJhbChcIipcIiksIHouYXJyYXkoei5zdHJpbmcoKSldKS5vcHRpb25hbCgpXG59KTtcbnZhciBSZWNvcmRpbmdUeXBlU2NoZW1hID0gei5lbnVtKFtcInJlY29yZGluZ1wiLCBcImxpdmVzdHJlYW1cIl0pO1xudmFyIEFwaUtleVJlY29yZGluZ1N0YXR1c1NjaGVtYSA9IHoub2JqZWN0KHtcbiAgc3RhdHVzOiB6LmVudW0oW1wib25nb2luZ1wiLCBcInN0b3BwZWRcIl0pLFxuICBzdGFydFRpbWU6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgdHlwZTogUmVjb3JkaW5nVHlwZVNjaGVtYS5vcHRpb25hbCgpXG59KTtcblxuLy8gc3JjL2hvb2tzL3VzZUFjdGl2ZVBlZXJzLnRzXG52YXIgdXNlQWN0aXZlUGVlcnMgPSAoKSA9PiB7XG4gIGNvbnN0IHsgcm9vbSB9ID0gdXNlUm9vbSgpO1xuICBjb25zdCBbYWN0aXZlUGVlcklkcywgc2V0QWN0aXZlUGVlcklkc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtkb21pbmFudFNwZWFrZXJJZCwgc2V0RG9taW5hbnRTcGVha2VySWRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IGhhbmRsZVNwZWFrZXJDaGFuZ2UgPSB1c2VDYWxsYmFjayhcbiAgICAoZGF0YSkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gQWN0aXZlUGVlcnNTY2hlbWEuc2FmZVBhcnNlKGRhdGEpO1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHNldEFjdGl2ZVBlZXJJZHMocmVzdWx0LmRhdGEucGVlcklkcyk7XG4gICAgICAgIHNldERvbWluYW50U3BlYWtlcklkKHJlc3VsdC5kYXRhLmRvbWluYW50U3BlYWtlcik7XG4gICAgICB9XG4gICAgfSxcbiAgICBbXVxuICApO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJvb20ub24oXCJhY3RpdmUtc3BlYWtlcnMtY2hhbmdlXCIsIGhhbmRsZVNwZWFrZXJDaGFuZ2UpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByb29tLm9mZihcImFjdGl2ZS1zcGVha2Vycy1jaGFuZ2VcIiwgaGFuZGxlU3BlYWtlckNoYW5nZSk7XG4gICAgfTtcbiAgfSwgW10pO1xuICBjb25zdCB1cGRhdGVTaXplID0gdXNlQ2FsbGJhY2soKHNpemUpID0+IHtcbiAgICBpZiAoIXJvb20/LmFjdGl2ZVNwZWFrZXJzKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIFwiYWN0aXZlU3BlYWtlcnMgaXMgbm90IGluaXRpYWxpemVkLCB1c2UgbG9jYWxQZWVyLmFjdGl2YXRlU3BlYWtlck5vdGlmaWNhdGlvblwiXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByb29tPy5hY3RpdmVTcGVha2Vycz8udXBkYXRlU2l6ZShzaXplKTtcbiAgfSwgW10pO1xuICByZXR1cm4ge1xuICAgIGFjdGl2ZVBlZXJJZHMsXG4gICAgZG9taW5hbnRTcGVha2VySWQsXG4gICAgdXBkYXRlU2l6ZVxuICB9O1xufTtcblxuZXhwb3J0IHtcbiAgdXNlQWN0aXZlUGVlcnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1ZWU81NlhWNC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/react/dist/chunk-YYO56XV4.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/react/dist/chunk-ZMPAREGQ.js":
/*!*************************************************************!*\
  !*** ./node_modules/@huddle01/react/dist/chunk-ZMPAREGQ.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useRemoteScreenShare: () => (/* binding */ useRemoteScreenShare)\n/* harmony export */ });\n/* harmony import */ var _chunk_CW3UCU6Y_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-CW3UCU6Y.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-CW3UCU6Y.js\");\n\n\n// src/hooks/useRemoteScreenShare.ts\nvar useRemoteScreenShare = (props) => {\n  const {\n    state,\n    stream: videoStream,\n    track: videoTrack\n  } = (0,_chunk_CW3UCU6Y_js__WEBPACK_IMPORTED_MODULE_0__.useRemoteMedia)({\n    label: \"screen-share-video\",\n    peerId: props.peerId,\n    onClose: props.onClose,\n    onPlayable: (data) => {\n      props.onPlayable?.({\n        label: \"screen-share-video\",\n        track: data.track,\n        stream: data.stream\n      });\n    }\n  });\n  const { stream: audioStream, track: audioTrack } = (0,_chunk_CW3UCU6Y_js__WEBPACK_IMPORTED_MODULE_0__.useRemoteMedia)({\n    label: \"screen-share-audio\",\n    peerId: props.peerId,\n    onClose: props.onClose,\n    onPlayable: (data) => {\n      props.onPlayable?.({\n        label: \"screen-share-audio\",\n        track: data.track,\n        stream: data.stream\n      });\n    }\n  });\n  return {\n    videoStream,\n    audioStream,\n    videoTrack,\n    audioTrack,\n    state\n  };\n};\n\n\n//# sourceMappingURL=chunk-ZMPAREGQ.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvY2h1bmstWk1QQVJFR1EuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFFNkI7O0FBRTdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksRUFBRSxrRUFBYztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNILFVBQVUseUNBQXlDLEVBQUUsa0VBQWM7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2tlbW9uLWdhbWUtZXRoaW5kaWEtMS8uL25vZGVfbW9kdWxlcy9AaHVkZGxlMDEvcmVhY3QvZGlzdC9jaHVuay1aTVBBUkVHUS5qcz9jNzJlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHVzZVJlbW90ZU1lZGlhXG59IGZyb20gXCIuL2NodW5rLUNXM1VDVTZZLmpzXCI7XG5cbi8vIHNyYy9ob29rcy91c2VSZW1vdGVTY3JlZW5TaGFyZS50c1xudmFyIHVzZVJlbW90ZVNjcmVlblNoYXJlID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBzdGF0ZSxcbiAgICBzdHJlYW06IHZpZGVvU3RyZWFtLFxuICAgIHRyYWNrOiB2aWRlb1RyYWNrXG4gIH0gPSB1c2VSZW1vdGVNZWRpYSh7XG4gICAgbGFiZWw6IFwic2NyZWVuLXNoYXJlLXZpZGVvXCIsXG4gICAgcGVlcklkOiBwcm9wcy5wZWVySWQsXG4gICAgb25DbG9zZTogcHJvcHMub25DbG9zZSxcbiAgICBvblBsYXlhYmxlOiAoZGF0YSkgPT4ge1xuICAgICAgcHJvcHMub25QbGF5YWJsZT8uKHtcbiAgICAgICAgbGFiZWw6IFwic2NyZWVuLXNoYXJlLXZpZGVvXCIsXG4gICAgICAgIHRyYWNrOiBkYXRhLnRyYWNrLFxuICAgICAgICBzdHJlYW06IGRhdGEuc3RyZWFtXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBjb25zdCB7IHN0cmVhbTogYXVkaW9TdHJlYW0sIHRyYWNrOiBhdWRpb1RyYWNrIH0gPSB1c2VSZW1vdGVNZWRpYSh7XG4gICAgbGFiZWw6IFwic2NyZWVuLXNoYXJlLWF1ZGlvXCIsXG4gICAgcGVlcklkOiBwcm9wcy5wZWVySWQsXG4gICAgb25DbG9zZTogcHJvcHMub25DbG9zZSxcbiAgICBvblBsYXlhYmxlOiAoZGF0YSkgPT4ge1xuICAgICAgcHJvcHMub25QbGF5YWJsZT8uKHtcbiAgICAgICAgbGFiZWw6IFwic2NyZWVuLXNoYXJlLWF1ZGlvXCIsXG4gICAgICAgIHRyYWNrOiBkYXRhLnRyYWNrLFxuICAgICAgICBzdHJlYW06IGRhdGEuc3RyZWFtXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIHZpZGVvU3RyZWFtLFxuICAgIGF1ZGlvU3RyZWFtLFxuICAgIHZpZGVvVHJhY2ssXG4gICAgYXVkaW9UcmFjayxcbiAgICBzdGF0ZVxuICB9O1xufTtcblxuZXhwb3J0IHtcbiAgdXNlUmVtb3RlU2NyZWVuU2hhcmVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1aTVBBUkVHUS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/react/dist/chunk-ZMPAREGQ.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/react/dist/index.js":
/*!****************************************************!*\
  !*** ./node_modules/@huddle01/react/dist/index.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HuddleClient: () => (/* reexport safe */ _huddle01_web_core__WEBPACK_IMPORTED_MODULE_20__.HuddleClient),\n/* harmony export */   HuddleProvider: () => (/* reexport safe */ _chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_19__.HuddleProvider),\n/* harmony export */   useActivePeers: () => (/* reexport safe */ _chunk_YYO56XV4_js__WEBPACK_IMPORTED_MODULE_14__.useActivePeers),\n/* harmony export */   useDataMessage: () => (/* reexport safe */ _chunk_DJIIIDCT_js__WEBPACK_IMPORTED_MODULE_16__.useDataMessage),\n/* harmony export */   useDevices: () => (/* reexport safe */ _chunk_RK73FBGP_js__WEBPACK_IMPORTED_MODULE_17__.useDevices),\n/* harmony export */   useHuddle01: () => (/* reexport safe */ _chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_19__.useHuddle01_default),\n/* harmony export */   useLobby: () => (/* reexport safe */ _chunk_5NBDJ44S_js__WEBPACK_IMPORTED_MODULE_18__.useLobby),\n/* harmony export */   useLocalAudio: () => (/* reexport safe */ _chunk_CKLHJDG3_js__WEBPACK_IMPORTED_MODULE_6__.useLocalAudio),\n/* harmony export */   useLocalMedia: () => (/* reexport safe */ _chunk_OIBQWHQD_js__WEBPACK_IMPORTED_MODULE_7__.useLocalMedia),\n/* harmony export */   useLocalPeer: () => (/* reexport safe */ _chunk_CF7WL7FP_js__WEBPACK_IMPORTED_MODULE_8__.useLocalPeer),\n/* harmony export */   useLocalScreenShare: () => (/* reexport safe */ _chunk_QFSKFQPJ_js__WEBPACK_IMPORTED_MODULE_9__.useLocalScreenShare),\n/* harmony export */   useLocalVideo: () => (/* reexport safe */ _chunk_5MJAZUF3_js__WEBPACK_IMPORTED_MODULE_10__.useLocalVideo),\n/* harmony export */   usePeerIds: () => (/* reexport safe */ _chunk_Q43I2MTJ_js__WEBPACK_IMPORTED_MODULE_11__.usePeerIds),\n/* harmony export */   useRemoteAudio: () => (/* reexport safe */ _chunk_FF7A243A_js__WEBPACK_IMPORTED_MODULE_12__.useRemoteAudio),\n/* harmony export */   useRemoteMedia: () => (/* reexport safe */ _chunk_CW3UCU6Y_js__WEBPACK_IMPORTED_MODULE_13__.useRemoteMedia),\n/* harmony export */   useRemotePeer: () => (/* reexport safe */ _chunk_N4XD3HMV_js__WEBPACK_IMPORTED_MODULE_1__.useRemotePeer),\n/* harmony export */   useRemoteScreenShare: () => (/* reexport safe */ _chunk_ZMPAREGQ_js__WEBPACK_IMPORTED_MODULE_2__.useRemoteScreenShare),\n/* harmony export */   useRemoteVideo: () => (/* reexport safe */ _chunk_TMQB7U6H_js__WEBPACK_IMPORTED_MODULE_3__.useRemoteVideo),\n/* harmony export */   useRoom: () => (/* reexport safe */ _chunk_PFZ5VHJP_js__WEBPACK_IMPORTED_MODULE_15__.useRoom),\n/* harmony export */   useRoomControls: () => (/* reexport safe */ _chunk_NDNPIV4Z_js__WEBPACK_IMPORTED_MODULE_4__.useRoomControls),\n/* harmony export */   useRoomMetadata: () => (/* reexport safe */ _chunk_KJEMWK6P_js__WEBPACK_IMPORTED_MODULE_5__.useRoomMetadata)\n/* harmony export */ });\n/* harmony import */ var _chunk_P3AULUFQ_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-P3AULUFQ.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-P3AULUFQ.js\");\n/* harmony import */ var _chunk_N4XD3HMV_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-N4XD3HMV.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-N4XD3HMV.js\");\n/* harmony import */ var _chunk_ZMPAREGQ_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-ZMPAREGQ.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-ZMPAREGQ.js\");\n/* harmony import */ var _chunk_TMQB7U6H_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunk-TMQB7U6H.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-TMQB7U6H.js\");\n/* harmony import */ var _chunk_NDNPIV4Z_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./chunk-NDNPIV4Z.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-NDNPIV4Z.js\");\n/* harmony import */ var _chunk_KJEMWK6P_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./chunk-KJEMWK6P.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-KJEMWK6P.js\");\n/* harmony import */ var _chunk_CKLHJDG3_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./chunk-CKLHJDG3.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-CKLHJDG3.js\");\n/* harmony import */ var _chunk_OIBQWHQD_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./chunk-OIBQWHQD.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-OIBQWHQD.js\");\n/* harmony import */ var _chunk_CF7WL7FP_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./chunk-CF7WL7FP.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-CF7WL7FP.js\");\n/* harmony import */ var _chunk_QFSKFQPJ_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./chunk-QFSKFQPJ.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-QFSKFQPJ.js\");\n/* harmony import */ var _chunk_5MJAZUF3_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./chunk-5MJAZUF3.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-5MJAZUF3.js\");\n/* harmony import */ var _chunk_Q43I2MTJ_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./chunk-Q43I2MTJ.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-Q43I2MTJ.js\");\n/* harmony import */ var _chunk_FF7A243A_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./chunk-FF7A243A.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-FF7A243A.js\");\n/* harmony import */ var _chunk_CW3UCU6Y_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./chunk-CW3UCU6Y.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-CW3UCU6Y.js\");\n/* harmony import */ var _chunk_YYO56XV4_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./chunk-YYO56XV4.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-YYO56XV4.js\");\n/* harmony import */ var _chunk_PFZ5VHJP_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./chunk-PFZ5VHJP.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-PFZ5VHJP.js\");\n/* harmony import */ var _chunk_DJIIIDCT_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./chunk-DJIIIDCT.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-DJIIIDCT.js\");\n/* harmony import */ var _chunk_RK73FBGP_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./chunk-RK73FBGP.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-RK73FBGP.js\");\n/* harmony import */ var _chunk_5NBDJ44S_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./chunk-5NBDJ44S.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-5NBDJ44S.js\");\n/* harmony import */ var _chunk_AOJVKUIS_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./chunk-AOJVKUIS.js */ \"(ssr)/./node_modules/@huddle01/react/dist/chunk-AOJVKUIS.js\");\n/* harmony import */ var _huddle01_web_core__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @huddle01/web-core */ \"(ssr)/./node_modules/@huddle01/web-core/dist/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// src/index.ts\n\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTZCO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBR0E7QUFHQTtBQUdBO0FBSUE7O0FBRTdCO0FBQ2tEO0FBdUJoRDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9rZW1vbi1nYW1lLWV0aGluZGlhLTEvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3JlYWN0L2Rpc3QvaW5kZXguanM/ZTYzYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXCIuL2NodW5rLVAzQVVMVUZRLmpzXCI7XG5pbXBvcnQge1xuICB1c2VSZW1vdGVQZWVyXG59IGZyb20gXCIuL2NodW5rLU40WEQzSE1WLmpzXCI7XG5pbXBvcnQge1xuICB1c2VSZW1vdGVTY3JlZW5TaGFyZVxufSBmcm9tIFwiLi9jaHVuay1aTVBBUkVHUS5qc1wiO1xuaW1wb3J0IHtcbiAgdXNlUmVtb3RlVmlkZW9cbn0gZnJvbSBcIi4vY2h1bmstVE1RQjdVNkguanNcIjtcbmltcG9ydCB7XG4gIHVzZVJvb21Db250cm9sc1xufSBmcm9tIFwiLi9jaHVuay1ORE5QSVY0Wi5qc1wiO1xuaW1wb3J0IHtcbiAgdXNlUm9vbU1ldGFkYXRhXG59IGZyb20gXCIuL2NodW5rLUtKRU1XSzZQLmpzXCI7XG5pbXBvcnQge1xuICB1c2VMb2NhbEF1ZGlvXG59IGZyb20gXCIuL2NodW5rLUNLTEhKREczLmpzXCI7XG5pbXBvcnQge1xuICB1c2VMb2NhbE1lZGlhXG59IGZyb20gXCIuL2NodW5rLU9JQlFXSFFELmpzXCI7XG5pbXBvcnQge1xuICB1c2VMb2NhbFBlZXJcbn0gZnJvbSBcIi4vY2h1bmstQ0Y3V0w3RlAuanNcIjtcbmltcG9ydCB7XG4gIHVzZUxvY2FsU2NyZWVuU2hhcmVcbn0gZnJvbSBcIi4vY2h1bmstUUZTS0ZRUEouanNcIjtcbmltcG9ydCB7XG4gIHVzZUxvY2FsVmlkZW9cbn0gZnJvbSBcIi4vY2h1bmstNU1KQVpVRjMuanNcIjtcbmltcG9ydCB7XG4gIHVzZVBlZXJJZHNcbn0gZnJvbSBcIi4vY2h1bmstUTQzSTJNVEouanNcIjtcbmltcG9ydCB7XG4gIHVzZVJlbW90ZUF1ZGlvXG59IGZyb20gXCIuL2NodW5rLUZGN0EyNDNBLmpzXCI7XG5pbXBvcnQge1xuICB1c2VSZW1vdGVNZWRpYVxufSBmcm9tIFwiLi9jaHVuay1DVzNVQ1U2WS5qc1wiO1xuaW1wb3J0IHtcbiAgdXNlQWN0aXZlUGVlcnNcbn0gZnJvbSBcIi4vY2h1bmstWVlPNTZYVjQuanNcIjtcbmltcG9ydCB7XG4gIHVzZVJvb21cbn0gZnJvbSBcIi4vY2h1bmstUEZaNVZISlAuanNcIjtcbmltcG9ydCB7XG4gIHVzZURhdGFNZXNzYWdlXG59IGZyb20gXCIuL2NodW5rLURKSUlJRENULmpzXCI7XG5pbXBvcnQge1xuICB1c2VEZXZpY2VzXG59IGZyb20gXCIuL2NodW5rLVJLNzNGQkdQLmpzXCI7XG5pbXBvcnQge1xuICB1c2VMb2JieVxufSBmcm9tIFwiLi9jaHVuay01TkJESjQ0Uy5qc1wiO1xuaW1wb3J0IHtcbiAgSHVkZGxlUHJvdmlkZXIsXG4gIHVzZUh1ZGRsZTAxX2RlZmF1bHRcbn0gZnJvbSBcIi4vY2h1bmstQU9KVktVSVMuanNcIjtcblxuLy8gc3JjL2luZGV4LnRzXG5pbXBvcnQgeyBIdWRkbGVDbGllbnQgfSBmcm9tIFwiQGh1ZGRsZTAxL3dlYi1jb3JlXCI7XG5leHBvcnQge1xuICBIdWRkbGVDbGllbnQsXG4gIEh1ZGRsZVByb3ZpZGVyLFxuICB1c2VBY3RpdmVQZWVycyxcbiAgdXNlRGF0YU1lc3NhZ2UsXG4gIHVzZURldmljZXMsXG4gIHVzZUh1ZGRsZTAxX2RlZmF1bHQgYXMgdXNlSHVkZGxlMDEsXG4gIHVzZUxvYmJ5LFxuICB1c2VMb2NhbEF1ZGlvLFxuICB1c2VMb2NhbE1lZGlhLFxuICB1c2VMb2NhbFBlZXIsXG4gIHVzZUxvY2FsU2NyZWVuU2hhcmUsXG4gIHVzZUxvY2FsVmlkZW8sXG4gIHVzZVBlZXJJZHMsXG4gIHVzZVJlbW90ZUF1ZGlvLFxuICB1c2VSZW1vdGVNZWRpYSxcbiAgdXNlUmVtb3RlUGVlcixcbiAgdXNlUmVtb3RlU2NyZWVuU2hhcmUsXG4gIHVzZVJlbW90ZVZpZGVvLFxuICB1c2VSb29tLFxuICB1c2VSb29tQ29udHJvbHMsXG4gIHVzZVJvb21NZXRhZGF0YVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/react/dist/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-2OLUNNR5.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-2OLUNNR5.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseRouterRtpCapabilities: () => (/* binding */ parseRouterRtpCapabilities),\n/* harmony export */   parseRtpParameters: () => (/* binding */ parseRtpParameters),\n/* harmony export */   parseToProtoRtpParameters: () => (/* binding */ parseToProtoRtpParameters)\n/* harmony export */ });\n/* harmony import */ var _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-DFNYORIF.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-DFNYORIF.js\");\n\n\n// src/helpers/ProtooParsing.ts\nvar parseRouterRtpCapabilities = (rtpCapabilities) => {\n  const parsedRouterRtpCapabilites = rtpCapabilities;\n  if (parsedRouterRtpCapabilites.codecs)\n    for (const codec of parsedRouterRtpCapabilites.codecs) {\n      if (codec.parameters) {\n        const keys = Object.keys(codec.parameters);\n        for (const key of keys) {\n          if (key === \"apt\") {\n            codec.parameters[key] = Number(codec.parameters[key]);\n          }\n          if (key === \"level-asymmetry-allowed\") {\n            codec.parameters[key] = Number(codec.parameters[key]);\n          }\n          if (key === \"packetization-mode\") {\n            codec.parameters[key] = Number(codec.parameters[key]);\n          }\n          if (key === \"x-google-start-bitrate\") {\n            codec.parameters[key] = Number(codec.parameters[key]);\n          }\n          if (key === \"profile-id\") {\n            codec.parameters[key] = Number(codec.parameters[key]);\n          }\n        }\n      }\n    }\n  return parsedRouterRtpCapabilites;\n};\nvar parseRtpParameters = (rtpParameters) => {\n  const parsedRtpParameters = rtpParameters;\n  for (const codec of parsedRtpParameters.codecs) {\n    if (codec.parameters) {\n      const keys = Object.keys(codec.parameters);\n      for (const key of keys) {\n        if (key === \"apt\") {\n          codec.parameters[key] = Number(codec.parameters[key]);\n        }\n        if (key === \"level-asymmetry-allowed\") {\n          codec.parameters[key] = Number(codec.parameters[key]);\n        }\n        if (key === \"packetization-mode\") {\n          codec.parameters[key] = Number(codec.parameters[key]);\n        }\n        if (key === \"x-google-start-bitrate\") {\n          codec.parameters[key] = Number(codec.parameters[key]);\n        }\n        if (key === \"profile-id\") {\n          codec.parameters[key] = Number(codec.parameters[key]);\n        }\n      }\n    }\n  }\n  if (parsedRtpParameters.encodings) {\n    for (const encoding of parsedRtpParameters.encodings) {\n      encoding.dtx = false;\n      encoding.ssrc = Number(encoding.ssrc);\n      if (Number.isNaN(encoding.ssrc)) {\n        encoding.ssrc = void 0;\n      }\n      if (encoding.rtx?.ssrc !== void 0) {\n        if (Number(encoding.rtx.ssrc) === 0) {\n          encoding.rtx = void 0;\n        } else {\n          encoding.rtx.ssrc = Number(encoding.rtx.ssrc);\n        }\n      } else {\n        encoding.rtx = void 0;\n      }\n    }\n  }\n  const headerExtensions = parsedRtpParameters.headerExtensions;\n  if (headerExtensions) {\n    headerExtensions.map((headerExtension) => {\n      headerExtension.encrypt = false;\n      headerExtension.parameters = {};\n    });\n  }\n  return parsedRtpParameters;\n};\nvar parseToProtoRtpParameters = (rtpParameters) => {\n  const codecs = rtpParameters.codecs;\n  for (const codec of codecs) {\n    if (codec.parameters) {\n      const keys = Object.keys(codec.parameters);\n      for (const key of keys) {\n        if (key === \"apt\") {\n          codec.parameters[key] = String(codec.parameters[key]);\n        }\n        if (key === \"level-asymmetry-allowed\") {\n          codec.parameters[key] = String(codec.parameters[key]);\n        }\n        if (key === \"packetization-mode\") {\n          codec.parameters[key] = String(codec.parameters[key]);\n        }\n        if (key === \"x-google-start-bitrate\") {\n          codec.parameters[key] = String(codec.parameters[key]);\n        }\n        if (key === \"profile-id\") {\n          codec.parameters[key] = String(codec.parameters[key]);\n        }\n      }\n    }\n  }\n  const encodings = rtpParameters.encodings;\n  if (encodings) {\n    for (const encoding of encodings) {\n      if (Number.isNaN(encoding.ssrc)) {\n        encoding.ssrc = void 0;\n      }\n      new _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.ProtoEncodings({\n        ssrc: encoding.ssrc ? BigInt(encoding.ssrc) : void 0,\n        rid: encoding.rid,\n        codecPayloadType: encoding.codecPayloadType,\n        rtx: {\n          ssrc: encoding.rtx?.ssrc ? BigInt(encoding.rtx.ssrc) : void 0\n        },\n        dtx: encoding.dtx,\n        scalabilityMode: encoding.scalabilityMode,\n        scaleResolutionDownBy: encoding.scaleResolutionDownBy,\n        maxBitrate: encoding.maxBitrate\n      });\n    }\n  }\n  return rtpParameters;\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstMk9MVU5OUjUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFxRDs7QUFFckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDhEQUFjO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRXFGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9rZW1vbi1nYW1lLWV0aGluZGlhLTEvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstMk9MVU5OUjUuanM/ZDVmMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcm90b0VuY29kaW5ncyB9IGZyb20gJy4vY2h1bmstREZOWU9SSUYuanMnO1xuXG4vLyBzcmMvaGVscGVycy9Qcm90b29QYXJzaW5nLnRzXG52YXIgcGFyc2VSb3V0ZXJSdHBDYXBhYmlsaXRpZXMgPSAocnRwQ2FwYWJpbGl0aWVzKSA9PiB7XG4gIGNvbnN0IHBhcnNlZFJvdXRlclJ0cENhcGFiaWxpdGVzID0gcnRwQ2FwYWJpbGl0aWVzO1xuICBpZiAocGFyc2VkUm91dGVyUnRwQ2FwYWJpbGl0ZXMuY29kZWNzKVxuICAgIGZvciAoY29uc3QgY29kZWMgb2YgcGFyc2VkUm91dGVyUnRwQ2FwYWJpbGl0ZXMuY29kZWNzKSB7XG4gICAgICBpZiAoY29kZWMucGFyYW1ldGVycykge1xuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoY29kZWMucGFyYW1ldGVycyk7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICAgICAgICBpZiAoa2V5ID09PSBcImFwdFwiKSB7XG4gICAgICAgICAgICBjb2RlYy5wYXJhbWV0ZXJzW2tleV0gPSBOdW1iZXIoY29kZWMucGFyYW1ldGVyc1trZXldKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGtleSA9PT0gXCJsZXZlbC1hc3ltbWV0cnktYWxsb3dlZFwiKSB7XG4gICAgICAgICAgICBjb2RlYy5wYXJhbWV0ZXJzW2tleV0gPSBOdW1iZXIoY29kZWMucGFyYW1ldGVyc1trZXldKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGtleSA9PT0gXCJwYWNrZXRpemF0aW9uLW1vZGVcIikge1xuICAgICAgICAgICAgY29kZWMucGFyYW1ldGVyc1trZXldID0gTnVtYmVyKGNvZGVjLnBhcmFtZXRlcnNba2V5XSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChrZXkgPT09IFwieC1nb29nbGUtc3RhcnQtYml0cmF0ZVwiKSB7XG4gICAgICAgICAgICBjb2RlYy5wYXJhbWV0ZXJzW2tleV0gPSBOdW1iZXIoY29kZWMucGFyYW1ldGVyc1trZXldKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGtleSA9PT0gXCJwcm9maWxlLWlkXCIpIHtcbiAgICAgICAgICAgIGNvZGVjLnBhcmFtZXRlcnNba2V5XSA9IE51bWJlcihjb2RlYy5wYXJhbWV0ZXJzW2tleV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgcmV0dXJuIHBhcnNlZFJvdXRlclJ0cENhcGFiaWxpdGVzO1xufTtcbnZhciBwYXJzZVJ0cFBhcmFtZXRlcnMgPSAocnRwUGFyYW1ldGVycykgPT4ge1xuICBjb25zdCBwYXJzZWRSdHBQYXJhbWV0ZXJzID0gcnRwUGFyYW1ldGVycztcbiAgZm9yIChjb25zdCBjb2RlYyBvZiBwYXJzZWRSdHBQYXJhbWV0ZXJzLmNvZGVjcykge1xuICAgIGlmIChjb2RlYy5wYXJhbWV0ZXJzKSB7XG4gICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoY29kZWMucGFyYW1ldGVycyk7XG4gICAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgICAgIGlmIChrZXkgPT09IFwiYXB0XCIpIHtcbiAgICAgICAgICBjb2RlYy5wYXJhbWV0ZXJzW2tleV0gPSBOdW1iZXIoY29kZWMucGFyYW1ldGVyc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoa2V5ID09PSBcImxldmVsLWFzeW1tZXRyeS1hbGxvd2VkXCIpIHtcbiAgICAgICAgICBjb2RlYy5wYXJhbWV0ZXJzW2tleV0gPSBOdW1iZXIoY29kZWMucGFyYW1ldGVyc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoa2V5ID09PSBcInBhY2tldGl6YXRpb24tbW9kZVwiKSB7XG4gICAgICAgICAgY29kZWMucGFyYW1ldGVyc1trZXldID0gTnVtYmVyKGNvZGVjLnBhcmFtZXRlcnNba2V5XSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtleSA9PT0gXCJ4LWdvb2dsZS1zdGFydC1iaXRyYXRlXCIpIHtcbiAgICAgICAgICBjb2RlYy5wYXJhbWV0ZXJzW2tleV0gPSBOdW1iZXIoY29kZWMucGFyYW1ldGVyc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoa2V5ID09PSBcInByb2ZpbGUtaWRcIikge1xuICAgICAgICAgIGNvZGVjLnBhcmFtZXRlcnNba2V5XSA9IE51bWJlcihjb2RlYy5wYXJhbWV0ZXJzW2tleV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChwYXJzZWRSdHBQYXJhbWV0ZXJzLmVuY29kaW5ncykge1xuICAgIGZvciAoY29uc3QgZW5jb2Rpbmcgb2YgcGFyc2VkUnRwUGFyYW1ldGVycy5lbmNvZGluZ3MpIHtcbiAgICAgIGVuY29kaW5nLmR0eCA9IGZhbHNlO1xuICAgICAgZW5jb2Rpbmcuc3NyYyA9IE51bWJlcihlbmNvZGluZy5zc3JjKTtcbiAgICAgIGlmIChOdW1iZXIuaXNOYU4oZW5jb2Rpbmcuc3NyYykpIHtcbiAgICAgICAgZW5jb2Rpbmcuc3NyYyA9IHZvaWQgMDtcbiAgICAgIH1cbiAgICAgIGlmIChlbmNvZGluZy5ydHg/LnNzcmMgIT09IHZvaWQgMCkge1xuICAgICAgICBpZiAoTnVtYmVyKGVuY29kaW5nLnJ0eC5zc3JjKSA9PT0gMCkge1xuICAgICAgICAgIGVuY29kaW5nLnJ0eCA9IHZvaWQgMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbmNvZGluZy5ydHguc3NyYyA9IE51bWJlcihlbmNvZGluZy5ydHguc3NyYyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVuY29kaW5nLnJ0eCA9IHZvaWQgMDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgY29uc3QgaGVhZGVyRXh0ZW5zaW9ucyA9IHBhcnNlZFJ0cFBhcmFtZXRlcnMuaGVhZGVyRXh0ZW5zaW9ucztcbiAgaWYgKGhlYWRlckV4dGVuc2lvbnMpIHtcbiAgICBoZWFkZXJFeHRlbnNpb25zLm1hcCgoaGVhZGVyRXh0ZW5zaW9uKSA9PiB7XG4gICAgICBoZWFkZXJFeHRlbnNpb24uZW5jcnlwdCA9IGZhbHNlO1xuICAgICAgaGVhZGVyRXh0ZW5zaW9uLnBhcmFtZXRlcnMgPSB7fTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gcGFyc2VkUnRwUGFyYW1ldGVycztcbn07XG52YXIgcGFyc2VUb1Byb3RvUnRwUGFyYW1ldGVycyA9IChydHBQYXJhbWV0ZXJzKSA9PiB7XG4gIGNvbnN0IGNvZGVjcyA9IHJ0cFBhcmFtZXRlcnMuY29kZWNzO1xuICBmb3IgKGNvbnN0IGNvZGVjIG9mIGNvZGVjcykge1xuICAgIGlmIChjb2RlYy5wYXJhbWV0ZXJzKSB7XG4gICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoY29kZWMucGFyYW1ldGVycyk7XG4gICAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgICAgIGlmIChrZXkgPT09IFwiYXB0XCIpIHtcbiAgICAgICAgICBjb2RlYy5wYXJhbWV0ZXJzW2tleV0gPSBTdHJpbmcoY29kZWMucGFyYW1ldGVyc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoa2V5ID09PSBcImxldmVsLWFzeW1tZXRyeS1hbGxvd2VkXCIpIHtcbiAgICAgICAgICBjb2RlYy5wYXJhbWV0ZXJzW2tleV0gPSBTdHJpbmcoY29kZWMucGFyYW1ldGVyc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoa2V5ID09PSBcInBhY2tldGl6YXRpb24tbW9kZVwiKSB7XG4gICAgICAgICAgY29kZWMucGFyYW1ldGVyc1trZXldID0gU3RyaW5nKGNvZGVjLnBhcmFtZXRlcnNba2V5XSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtleSA9PT0gXCJ4LWdvb2dsZS1zdGFydC1iaXRyYXRlXCIpIHtcbiAgICAgICAgICBjb2RlYy5wYXJhbWV0ZXJzW2tleV0gPSBTdHJpbmcoY29kZWMucGFyYW1ldGVyc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoa2V5ID09PSBcInByb2ZpbGUtaWRcIikge1xuICAgICAgICAgIGNvZGVjLnBhcmFtZXRlcnNba2V5XSA9IFN0cmluZyhjb2RlYy5wYXJhbWV0ZXJzW2tleV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGNvbnN0IGVuY29kaW5ncyA9IHJ0cFBhcmFtZXRlcnMuZW5jb2RpbmdzO1xuICBpZiAoZW5jb2RpbmdzKSB7XG4gICAgZm9yIChjb25zdCBlbmNvZGluZyBvZiBlbmNvZGluZ3MpIHtcbiAgICAgIGlmIChOdW1iZXIuaXNOYU4oZW5jb2Rpbmcuc3NyYykpIHtcbiAgICAgICAgZW5jb2Rpbmcuc3NyYyA9IHZvaWQgMDtcbiAgICAgIH1cbiAgICAgIG5ldyBQcm90b0VuY29kaW5ncyh7XG4gICAgICAgIHNzcmM6IGVuY29kaW5nLnNzcmMgPyBCaWdJbnQoZW5jb2Rpbmcuc3NyYykgOiB2b2lkIDAsXG4gICAgICAgIHJpZDogZW5jb2RpbmcucmlkLFxuICAgICAgICBjb2RlY1BheWxvYWRUeXBlOiBlbmNvZGluZy5jb2RlY1BheWxvYWRUeXBlLFxuICAgICAgICBydHg6IHtcbiAgICAgICAgICBzc3JjOiBlbmNvZGluZy5ydHg/LnNzcmMgPyBCaWdJbnQoZW5jb2RpbmcucnR4LnNzcmMpIDogdm9pZCAwXG4gICAgICAgIH0sXG4gICAgICAgIGR0eDogZW5jb2RpbmcuZHR4LFxuICAgICAgICBzY2FsYWJpbGl0eU1vZGU6IGVuY29kaW5nLnNjYWxhYmlsaXR5TW9kZSxcbiAgICAgICAgc2NhbGVSZXNvbHV0aW9uRG93bkJ5OiBlbmNvZGluZy5zY2FsZVJlc29sdXRpb25Eb3duQnksXG4gICAgICAgIG1heEJpdHJhdGU6IGVuY29kaW5nLm1heEJpdHJhdGVcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcnRwUGFyYW1ldGVycztcbn07XG5cbmV4cG9ydCB7IHBhcnNlUm91dGVyUnRwQ2FwYWJpbGl0aWVzLCBwYXJzZVJ0cFBhcmFtZXRlcnMsIHBhcnNlVG9Qcm90b1J0cFBhcmFtZXRlcnMgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-2OLUNNR5.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-6MHHX2FW.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-6MHHX2FW.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Bot_default: () => (/* binding */ Bot_default)\n/* harmony export */ });\n/* harmony import */ var _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-TOCFOGTC.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-TOCFOGTC.js\");\n/* harmony import */ var _chunk_BW2DGP4D_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-BW2DGP4D.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-BW2DGP4D.js\");\n\n\n\n// src/Bot.ts\nvar logger = _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_0__.mainLogger.createSubLogger(\"Bot\");\nvar Bot = class extends _chunk_BW2DGP4D_js__WEBPACK_IMPORTED_MODULE_1__.EnhancedEventEmitter {\n  /**\n   * Bot Data Consumer\n   */\n  __botDataConsumer;\n  /**\n   * Bot Data Producer\n   */\n  __botDataProducer;\n  constructor(data) {\n    super();\n    this.__botDataConsumer = data.dataConsumer;\n    this.__botDataProducer = data.dataProducer;\n    this.__registerBotDataConsumerEvent();\n    if (this.__botDataProducer) {\n      this.__registerBotDataProducerEvent(this.__botDataProducer);\n    }\n  }\n  /**\n   * Register the bot data consumer event.\n   */\n  __registerBotDataConsumerEvent = () => {\n    logger.info(\"\\u{1F514} Setting a new data consumer\");\n    try {\n      this.__botDataConsumer.on(\"message\", (message) => {\n        try {\n          logger.debug(\"\\u{1F514} Bot Data Message\", message);\n          const parsedJsonData = JSON.parse(message);\n          if (parsedJsonData.label === \"lastN\") {\n            this.emit(\"active-speakers-change\", {\n              peerIds: parsedJsonData?.payload?.activeSpeakers ?? []\n            });\n            return;\n          }\n          this.emit(\"received-volatile-data\", parsedJsonData);\n        } catch (error) {\n          logger.error(\"\\u274C Error in bot data consumer message\", error);\n        }\n      });\n      this.__botDataConsumer.on(\"error\", (err) => {\n        logger.error(\"\\u274C Bot Data Consumer Error\", err);\n      });\n      this.__botDataConsumer.on(\"open\", () => {\n        logger.info(\"\\u{1F514} Bot Data Consumer Opened\");\n      });\n      this.__botDataConsumer.on(\"@close\", () => {\n        logger.info(\"\\u{1F514} Bot Data Consumer Closed\");\n      });\n    } catch (error) {\n      logger.error(\"Error in setting data consumer\", error);\n    }\n  };\n  /**\n   * Register the bot data producer event.\n   */\n  __registerBotDataProducerEvent = (dataProducer) => {\n    logger.info(\"\\u{1F514} Setting a new data producer\");\n    try {\n      dataProducer.on(\"error\", (err) => {\n        logger.error(\"\\u274C Bot Data Producer Error\", err);\n      });\n      dataProducer.on(\"open\", () => {\n        logger.info(\"\\u{1F514} Bot Data Producer Opened\");\n      });\n      dataProducer.on(\"@close\", () => {\n        logger.info(\"\\u{1F514} Bot Data Producer Closed\");\n      });\n      dataProducer.on(\"bufferedamountlow\", () => {\n        logger.info(\"\\u{1F514} Bot Data Producer bufferedamountlow\");\n      });\n    } catch (error) {\n      logger.error(\"Error in setting data producer\", error);\n    }\n  };\n  /**\n   * @description Send data to the bot data producer, if available\n   * @param data - Data to send {string}\n   * @returns {boolean} - Returns true if data is sent, cannot guarantee if data is received as its over UDP.\n   */\n  sendData = (data) => {\n    try {\n      if (!this.__botDataProducer) {\n        throw new Error(\"Bot Data Producer is not available\");\n      }\n      const payload = JSON.stringify(data);\n      logger.info(\"\\u{1F514} Sending data to bot's producer\", payload);\n      this.__botDataProducer.send(payload);\n      return true;\n    } catch (error) {\n      logger.error(\"\\u274C Error in sending buffer\", error);\n      return false;\n    }\n  };\n  close = () => {\n    try {\n      logger.info(\"\\u{1F514} Closing Bot\");\n      this.__botDataConsumer.close();\n      if (this.__botDataProducer) {\n        this.__botDataProducer.close();\n      }\n      this.removeAllListeners();\n    } catch (error) {\n      logger.error(\"\\u274C Error in closing bot\", error);\n    }\n  };\n};\nvar Bot_default = Bot;\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstNk1ISFgyRlcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlEO0FBQ1U7O0FBRTNEO0FBQ0EsYUFBYSwwREFBVTtBQUN2Qix3QkFBd0Isb0VBQW9CO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixPQUFPO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixPQUFPO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSx3QkFBd0IsT0FBTztBQUMvQixPQUFPO0FBQ1A7QUFDQSx3QkFBd0IsT0FBTztBQUMvQixPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLE9BQU87QUFDM0I7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0Esd0JBQXdCLE9BQU87QUFDL0IsT0FBTztBQUNQO0FBQ0Esd0JBQXdCLE9BQU87QUFDL0IsT0FBTztBQUNQO0FBQ0Esd0JBQXdCLE9BQU87QUFDL0IsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixPQUFPO0FBQzdCO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLE9BQU87QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUV1QiIsInNvdXJjZXMiOlsid2VicGFjazovL3Bva2Vtb24tZ2FtZS1ldGhpbmRpYS0xLy4vbm9kZV9tb2R1bGVzL0BodWRkbGUwMS93ZWItY29yZS9kaXN0L2NodW5rLTZNSEhYMkZXLmpzPzQ2NWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWFpbkxvZ2dlciB9IGZyb20gJy4vY2h1bmstVE9DRk9HVEMuanMnO1xuaW1wb3J0IHsgRW5oYW5jZWRFdmVudEVtaXR0ZXIgfSBmcm9tICcuL2NodW5rLUJXMkRHUDRELmpzJztcblxuLy8gc3JjL0JvdC50c1xudmFyIGxvZ2dlciA9IG1haW5Mb2dnZXIuY3JlYXRlU3ViTG9nZ2VyKFwiQm90XCIpO1xudmFyIEJvdCA9IGNsYXNzIGV4dGVuZHMgRW5oYW5jZWRFdmVudEVtaXR0ZXIge1xuICAvKipcbiAgICogQm90IERhdGEgQ29uc3VtZXJcbiAgICovXG4gIF9fYm90RGF0YUNvbnN1bWVyO1xuICAvKipcbiAgICogQm90IERhdGEgUHJvZHVjZXJcbiAgICovXG4gIF9fYm90RGF0YVByb2R1Y2VyO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9fYm90RGF0YUNvbnN1bWVyID0gZGF0YS5kYXRhQ29uc3VtZXI7XG4gICAgdGhpcy5fX2JvdERhdGFQcm9kdWNlciA9IGRhdGEuZGF0YVByb2R1Y2VyO1xuICAgIHRoaXMuX19yZWdpc3RlckJvdERhdGFDb25zdW1lckV2ZW50KCk7XG4gICAgaWYgKHRoaXMuX19ib3REYXRhUHJvZHVjZXIpIHtcbiAgICAgIHRoaXMuX19yZWdpc3RlckJvdERhdGFQcm9kdWNlckV2ZW50KHRoaXMuX19ib3REYXRhUHJvZHVjZXIpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXIgdGhlIGJvdCBkYXRhIGNvbnN1bWVyIGV2ZW50LlxuICAgKi9cbiAgX19yZWdpc3RlckJvdERhdGFDb25zdW1lckV2ZW50ID0gKCkgPT4ge1xuICAgIGxvZ2dlci5pbmZvKFwiXFx1ezFGNTE0fSBTZXR0aW5nIGEgbmV3IGRhdGEgY29uc3VtZXJcIik7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuX19ib3REYXRhQ29uc3VtZXIub24oXCJtZXNzYWdlXCIsIChtZXNzYWdlKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbG9nZ2VyLmRlYnVnKFwiXFx1ezFGNTE0fSBCb3QgRGF0YSBNZXNzYWdlXCIsIG1lc3NhZ2UpO1xuICAgICAgICAgIGNvbnN0IHBhcnNlZEpzb25EYXRhID0gSlNPTi5wYXJzZShtZXNzYWdlKTtcbiAgICAgICAgICBpZiAocGFyc2VkSnNvbkRhdGEubGFiZWwgPT09IFwibGFzdE5cIikge1xuICAgICAgICAgICAgdGhpcy5lbWl0KFwiYWN0aXZlLXNwZWFrZXJzLWNoYW5nZVwiLCB7XG4gICAgICAgICAgICAgIHBlZXJJZHM6IHBhcnNlZEpzb25EYXRhPy5wYXlsb2FkPy5hY3RpdmVTcGVha2VycyA/PyBbXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuZW1pdChcInJlY2VpdmVkLXZvbGF0aWxlLWRhdGFcIiwgcGFyc2VkSnNvbkRhdGEpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgRXJyb3IgaW4gYm90IGRhdGEgY29uc3VtZXIgbWVzc2FnZVwiLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdGhpcy5fX2JvdERhdGFDb25zdW1lci5vbihcImVycm9yXCIsIChlcnIpID0+IHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1Mjc0QyBCb3QgRGF0YSBDb25zdW1lciBFcnJvclwiLCBlcnIpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLl9fYm90RGF0YUNvbnN1bWVyLm9uKFwib3BlblwiLCAoKSA9PiB7XG4gICAgICAgIGxvZ2dlci5pbmZvKFwiXFx1ezFGNTE0fSBCb3QgRGF0YSBDb25zdW1lciBPcGVuZWRcIik7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuX19ib3REYXRhQ29uc3VtZXIub24oXCJAY2xvc2VcIiwgKCkgPT4ge1xuICAgICAgICBsb2dnZXIuaW5mbyhcIlxcdXsxRjUxNH0gQm90IERhdGEgQ29uc3VtZXIgQ2xvc2VkXCIpO1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIGluIHNldHRpbmcgZGF0YSBjb25zdW1lclwiLCBlcnJvcik7XG4gICAgfVxuICB9O1xuICAvKipcbiAgICogUmVnaXN0ZXIgdGhlIGJvdCBkYXRhIHByb2R1Y2VyIGV2ZW50LlxuICAgKi9cbiAgX19yZWdpc3RlckJvdERhdGFQcm9kdWNlckV2ZW50ID0gKGRhdGFQcm9kdWNlcikgPT4ge1xuICAgIGxvZ2dlci5pbmZvKFwiXFx1ezFGNTE0fSBTZXR0aW5nIGEgbmV3IGRhdGEgcHJvZHVjZXJcIik7XG4gICAgdHJ5IHtcbiAgICAgIGRhdGFQcm9kdWNlci5vbihcImVycm9yXCIsIChlcnIpID0+IHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1Mjc0QyBCb3QgRGF0YSBQcm9kdWNlciBFcnJvclwiLCBlcnIpO1xuICAgICAgfSk7XG4gICAgICBkYXRhUHJvZHVjZXIub24oXCJvcGVuXCIsICgpID0+IHtcbiAgICAgICAgbG9nZ2VyLmluZm8oXCJcXHV7MUY1MTR9IEJvdCBEYXRhIFByb2R1Y2VyIE9wZW5lZFwiKTtcbiAgICAgIH0pO1xuICAgICAgZGF0YVByb2R1Y2VyLm9uKFwiQGNsb3NlXCIsICgpID0+IHtcbiAgICAgICAgbG9nZ2VyLmluZm8oXCJcXHV7MUY1MTR9IEJvdCBEYXRhIFByb2R1Y2VyIENsb3NlZFwiKTtcbiAgICAgIH0pO1xuICAgICAgZGF0YVByb2R1Y2VyLm9uKFwiYnVmZmVyZWRhbW91bnRsb3dcIiwgKCkgPT4ge1xuICAgICAgICBsb2dnZXIuaW5mbyhcIlxcdXsxRjUxNH0gQm90IERhdGEgUHJvZHVjZXIgYnVmZmVyZWRhbW91bnRsb3dcIik7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgaW4gc2V0dGluZyBkYXRhIHByb2R1Y2VyXCIsIGVycm9yKTtcbiAgICB9XG4gIH07XG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gU2VuZCBkYXRhIHRvIHRoZSBib3QgZGF0YSBwcm9kdWNlciwgaWYgYXZhaWxhYmxlXG4gICAqIEBwYXJhbSBkYXRhIC0gRGF0YSB0byBzZW5kIHtzdHJpbmd9XG4gICAqIEByZXR1cm5zIHtib29sZWFufSAtIFJldHVybnMgdHJ1ZSBpZiBkYXRhIGlzIHNlbnQsIGNhbm5vdCBndWFyYW50ZWUgaWYgZGF0YSBpcyByZWNlaXZlZCBhcyBpdHMgb3ZlciBVRFAuXG4gICAqL1xuICBzZW5kRGF0YSA9IChkYXRhKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghdGhpcy5fX2JvdERhdGFQcm9kdWNlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCb3QgRGF0YSBQcm9kdWNlciBpcyBub3QgYXZhaWxhYmxlXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgcGF5bG9hZCA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgICAgbG9nZ2VyLmluZm8oXCJcXHV7MUY1MTR9IFNlbmRpbmcgZGF0YSB0byBib3QncyBwcm9kdWNlclwiLCBwYXlsb2FkKTtcbiAgICAgIHRoaXMuX19ib3REYXRhUHJvZHVjZXIuc2VuZChwYXlsb2FkKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGluIHNlbmRpbmcgYnVmZmVyXCIsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG4gIGNsb3NlID0gKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBsb2dnZXIuaW5mbyhcIlxcdXsxRjUxNH0gQ2xvc2luZyBCb3RcIik7XG4gICAgICB0aGlzLl9fYm90RGF0YUNvbnN1bWVyLmNsb3NlKCk7XG4gICAgICBpZiAodGhpcy5fX2JvdERhdGFQcm9kdWNlcikge1xuICAgICAgICB0aGlzLl9fYm90RGF0YVByb2R1Y2VyLmNsb3NlKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGluIGNsb3NpbmcgYm90XCIsIGVycm9yKTtcbiAgICB9XG4gIH07XG59O1xudmFyIEJvdF9kZWZhdWx0ID0gQm90O1xuXG5leHBvcnQgeyBCb3RfZGVmYXVsdCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-6MHHX2FW.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-B7NPLGIE.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-B7NPLGIE.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ESocketCloseCode: () => (/* binding */ ESocketCloseCode),\n/* harmony export */   Socket_default: () => (/* binding */ Socket_default)\n/* harmony export */ });\n/* harmony import */ var _chunk_NTD5WULD_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-NTD5WULD.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-NTD5WULD.js\");\n/* harmony import */ var _chunk_UNAM3CMB_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-UNAM3CMB.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-UNAM3CMB.js\");\n/* harmony import */ var _chunk_SJ5FMYZU_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-SJ5FMYZU.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-SJ5FMYZU.js\");\n/* harmony import */ var _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunk-DFNYORIF.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-DFNYORIF.js\");\n/* harmony import */ var _chunk_WA3QABYS_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./chunk-WA3QABYS.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-WA3QABYS.js\");\n/* harmony import */ var _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./chunk-TOCFOGTC.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-TOCFOGTC.js\");\n/* harmony import */ var _chunk_BW2DGP4D_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./chunk-BW2DGP4D.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-BW2DGP4D.js\");\n\n\n\n\n\n\n\n\n// ../types/dist/socket.types.js\nvar ESocketCloseCode;\n(function(ESocketCloseCode2) {\n  ESocketCloseCode2[ESocketCloseCode2[\"ABNORMAL_CLOSURE\"] = 1006] = \"ABNORMAL_CLOSURE\";\n  ESocketCloseCode2[ESocketCloseCode2[\"NORMAL_CLOSURE\"] = 1e3] = \"NORMAL_CLOSURE\";\n  ESocketCloseCode2[ESocketCloseCode2[\"BROWSER_TAB_CLOSE\"] = 1001] = \"BROWSER_TAB_CLOSE\";\n  ESocketCloseCode2[ESocketCloseCode2[\"GOING_AWAY\"] = 4001] = \"GOING_AWAY\";\n  ESocketCloseCode2[ESocketCloseCode2[\"CONNECTION_EXPIRED\"] = 4002] = \"CONNECTION_EXPIRED\";\n  ESocketCloseCode2[ESocketCloseCode2[\"CONNECTION_ERROR\"] = 4006] = \"CONNECTION_ERROR\";\n  ESocketCloseCode2[ESocketCloseCode2[\"ROOM_CLOSED\"] = 4007] = \"ROOM_CLOSED\";\n  ESocketCloseCode2[ESocketCloseCode2[\"ROOM_ENTRY_DENIED\"] = 4008] = \"ROOM_ENTRY_DENIED\";\n  ESocketCloseCode2[ESocketCloseCode2[\"KICKED\"] = 4009] = \"KICKED\";\n  ESocketCloseCode2[ESocketCloseCode2[\"MAX_PEERS_REACHED\"] = 4010] = \"MAX_PEERS_REACHED\";\n  ESocketCloseCode2[ESocketCloseCode2[\"ROOM_EXPIRED\"] = 4011] = \"ROOM_EXPIRED\";\n})(ESocketCloseCode || (ESocketCloseCode = {}));\nvar SocketCloseReason = {\n  [ESocketCloseCode.ROOM_CLOSED]: \"ROOM_CLOSED\",\n  [ESocketCloseCode.ABNORMAL_CLOSURE]: \"ABNORMAL_CLOSURE\",\n  [ESocketCloseCode.NORMAL_CLOSURE]: \"NORMAL_CLOSURE\",\n  [ESocketCloseCode.BROWSER_TAB_CLOSE]: \"BROWSER_TAB_CLOSE\",\n  [ESocketCloseCode.GOING_AWAY]: \"GOING_AWAY\",\n  [ESocketCloseCode.CONNECTION_ERROR]: \"CONNECTION_ERROR\",\n  [ESocketCloseCode.CONNECTION_EXPIRED]: \"CONNECTION_EXPIRED\",\n  [ESocketCloseCode.ROOM_ENTRY_DENIED]: \"ROOM_ENTRY_DENIED\",\n  [ESocketCloseCode.KICKED]: \"KICKED\",\n  [ESocketCloseCode.MAX_PEERS_REACHED]: \"MAX_PEERS_REACHED\",\n  [ESocketCloseCode.ROOM_EXPIRED]: \"ROOM_EXPIRED\"\n};\n\n// ../protoc/dist/rtc/rtp_capabilities_pb.js\nvar ProtoRtpCodecCapability = class _ProtoRtpCodecCapability extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: string kind = 1;\n   */\n  kind = \"\";\n  /**\n   * @generated from field: string mimeType = 2;\n   */\n  mimeType = \"\";\n  /**\n   * @generated from field: int32 preferredPayloadType = 3;\n   */\n  preferredPayloadType = 0;\n  /**\n   * @generated from field: int32 clockRate = 4;\n   */\n  clockRate = 0;\n  /**\n   * @generated from field: int32 channels = 5;\n   */\n  channels = 0;\n  /**\n   * @generated from field: map<string, string> parameters = 6;\n   */\n  parameters = {};\n  /**\n   * @generated from field: repeated ProtoRtpCodecCapability.ProtoRtcpFeedback rtcpFeedback = 7;\n   */\n  rtcpFeedback = [];\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto3.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto3;\n  static typeName = \"ProtoRtpCodecCapability\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto3.util.newFieldList(() => [\n    {\n      no: 1,\n      name: \"kind\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 2,\n      name: \"mimeType\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 3,\n      name: \"preferredPayloadType\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    },\n    {\n      no: 4,\n      name: \"clockRate\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    },\n    {\n      no: 5,\n      name: \"channels\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    },\n    { no: 6, name: \"parameters\", kind: \"map\", K: 9, V: {\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    } },\n    { no: 7, name: \"rtcpFeedback\", kind: \"message\", T: ProtoRtpCodecCapability_ProtoRtcpFeedback, repeated: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProtoRtpCodecCapability().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProtoRtpCodecCapability().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProtoRtpCodecCapability().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto3.util.equals(_ProtoRtpCodecCapability, a, b);\n  }\n};\nvar ProtoRtpCodecCapability_ProtoRtcpFeedback = class _ProtoRtpCodecCapability_ProtoRtcpFeedback extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: string type = 1;\n   */\n  type = \"\";\n  /**\n   * @generated from field: string parameter = 2;\n   */\n  parameter = \"\";\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto3.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto3;\n  static typeName = \"ProtoRtpCodecCapability.ProtoRtcpFeedback\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto3.util.newFieldList(() => [\n    {\n      no: 1,\n      name: \"type\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 2,\n      name: \"parameter\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProtoRtpCodecCapability_ProtoRtcpFeedback().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProtoRtpCodecCapability_ProtoRtcpFeedback().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProtoRtpCodecCapability_ProtoRtcpFeedback().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto3.util.equals(_ProtoRtpCodecCapability_ProtoRtcpFeedback, a, b);\n  }\n};\nvar ProtoRtpHeaderExtension = class _ProtoRtpHeaderExtension extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: string kind = 1;\n   */\n  kind = \"\";\n  /**\n   * @generated from field: string uri = 2;\n   */\n  uri = \"\";\n  /**\n   * @generated from field: int32 preferredId = 3;\n   */\n  preferredId = 0;\n  /**\n   * @generated from field: bool preferredEncrypt = 4;\n   */\n  preferredEncrypt = false;\n  /**\n   * @generated from field: string direction = 5;\n   */\n  direction = \"\";\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto3.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto3;\n  static typeName = \"ProtoRtpHeaderExtension\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto3.util.newFieldList(() => [\n    {\n      no: 1,\n      name: \"kind\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 2,\n      name: \"uri\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 3,\n      name: \"preferredId\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    },\n    {\n      no: 4,\n      name: \"preferredEncrypt\",\n      kind: \"scalar\",\n      T: 8\n      /* ScalarType.BOOL */\n    },\n    {\n      no: 5,\n      name: \"direction\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProtoRtpHeaderExtension().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProtoRtpHeaderExtension().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProtoRtpHeaderExtension().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto3.util.equals(_ProtoRtpHeaderExtension, a, b);\n  }\n};\nvar ProtoRtpCapabilities = class _ProtoRtpCapabilities extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: repeated ProtoRtpCodecCapability codecs = 1;\n   */\n  codecs = [];\n  /**\n   * @generated from field: repeated ProtoRtpHeaderExtension headerExtensions = 2;\n   */\n  headerExtensions = [];\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto3.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto3;\n  static typeName = \"ProtoRtpCapabilities\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto3.util.newFieldList(() => [\n    { no: 1, name: \"codecs\", kind: \"message\", T: ProtoRtpCodecCapability, repeated: true },\n    { no: 2, name: \"headerExtensions\", kind: \"message\", T: ProtoRtpHeaderExtension, repeated: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProtoRtpCapabilities().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProtoRtpCapabilities().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProtoRtpCapabilities().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto3.util.equals(_ProtoRtpCapabilities, a, b);\n  }\n};\n\n// ../protoc/dist/client/response_pb.js\nvar Hello = class _Hello extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string peerId = 1;\n   */\n  peerId;\n  /**\n   * @generated from field: required string roomId = 2;\n   */\n  roomId;\n  /**\n   * @generated from field: required string sessionId = 3;\n   */\n  sessionId;\n  /**\n   * @generated from field: required Permissions acl = 4;\n   */\n  acl;\n  /**\n   * @generated from field: optional string role = 5;\n   */\n  role;\n  /**\n   * @generated from field: optional string metadata = 6;\n   */\n  metadata;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"Hello\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"peerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"roomId\", kind: \"scalar\", T: 9, req: true },\n    { no: 3, name: \"sessionId\", kind: \"scalar\", T: 9, req: true },\n    { no: 4, name: \"acl\", kind: \"message\", T: _chunk_SJ5FMYZU_js__WEBPACK_IMPORTED_MODULE_2__.Permissions, req: true },\n    { no: 5, name: \"role\", kind: \"scalar\", T: 9, opt: true },\n    { no: 6, name: \"metadata\", kind: \"scalar\", T: 9, opt: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _Hello().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _Hello().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _Hello().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_Hello, a, b);\n  }\n};\nvar RoomControls = class _RoomControls extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required bool roomLocked = 1;\n   */\n  roomLocked;\n  /**\n   * @generated from field: required bool allowProduce = 2;\n   */\n  allowProduce;\n  /**\n   * @generated from field: required RoomControls.ProduceSources allowProduceSources = 3;\n   */\n  allowProduceSources;\n  /**\n   * @generated from field: required bool allowConsume = 4;\n   */\n  allowConsume;\n  /**\n   * @generated from field: required bool allowSendData = 5;\n   */\n  allowSendData;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"RoomControls\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"roomLocked\", kind: \"scalar\", T: 8, req: true },\n    { no: 2, name: \"allowProduce\", kind: \"scalar\", T: 8, req: true },\n    { no: 3, name: \"allowProduceSources\", kind: \"message\", T: RoomControls_ProduceSources, req: true },\n    { no: 4, name: \"allowConsume\", kind: \"scalar\", T: 8, req: true },\n    { no: 5, name: \"allowSendData\", kind: \"scalar\", T: 8, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _RoomControls().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _RoomControls().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _RoomControls().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_RoomControls, a, b);\n  }\n};\nvar RoomControls_ProduceSources = class _RoomControls_ProduceSources extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required bool cam = 1;\n   */\n  cam;\n  /**\n   * @generated from field: required bool mic = 2;\n   */\n  mic;\n  /**\n   * @generated from field: required bool screen = 3;\n   */\n  screen;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"RoomControls.ProduceSources\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"cam\", kind: \"scalar\", T: 8, req: true },\n    { no: 2, name: \"mic\", kind: \"scalar\", T: 8, req: true },\n    { no: 3, name: \"screen\", kind: \"scalar\", T: 8, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _RoomControls_ProduceSources().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _RoomControls_ProduceSources().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _RoomControls_ProduceSources().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_RoomControls_ProduceSources, a, b);\n  }\n};\nvar PeersInfo = class _PeersInfo extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string peerId = 1;\n   */\n  peerId;\n  /**\n   * @generated from field: optional string metadata = 3;\n   */\n  metadata;\n  /**\n   * @generated from field: optional string role = 5;\n   */\n  role;\n  /**\n   * @generated from field: repeated PeersInfo.ProducerInfo producers = 4;\n   */\n  producers = [];\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"PeersInfo\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"peerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 3, name: \"metadata\", kind: \"scalar\", T: 9, opt: true },\n    { no: 5, name: \"role\", kind: \"scalar\", T: 9, opt: true },\n    { no: 4, name: \"producers\", kind: \"message\", T: PeersInfo_ProducerInfo, repeated: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _PeersInfo().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _PeersInfo().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _PeersInfo().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_PeersInfo, a, b);\n  }\n};\nvar PeersInfo_ProducerInfo = class _PeersInfo_ProducerInfo extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string id = 1;\n   */\n  id;\n  /**\n   * @generated from field: required string label = 2;\n   */\n  label;\n  /**\n   * @generated from field: optional bool paused = 3;\n   */\n  paused;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"PeersInfo.ProducerInfo\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"id\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"label\", kind: \"scalar\", T: 9, req: true },\n    { no: 3, name: \"paused\", kind: \"scalar\", T: 8, opt: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _PeersInfo_ProducerInfo().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _PeersInfo_ProducerInfo().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _PeersInfo_ProducerInfo().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_PeersInfo_ProducerInfo, a, b);\n  }\n};\nvar RoomInfo = class _RoomInfo extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required bool roomLocked = 1;\n   */\n  roomLocked;\n  /**\n   * @generated from field: required RoomControls config = 2;\n   */\n  config;\n  /**\n   * @generated from field: repeated PeersInfo peers = 3;\n   */\n  peers = [];\n  /**\n   * @generated from field: repeated LobbyPeers lobbyPeers = 4;\n   */\n  lobbyPeers = [];\n  /**\n   * @generated from field: optional string metadata = 5;\n   */\n  metadata;\n  /**\n   * @generated from field: required int64 startTime = 6;\n   */\n  startTime;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"RoomInfo\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"roomLocked\", kind: \"scalar\", T: 8, req: true },\n    { no: 2, name: \"config\", kind: \"message\", T: RoomControls, req: true },\n    { no: 3, name: \"peers\", kind: \"message\", T: PeersInfo, repeated: true },\n    { no: 4, name: \"lobbyPeers\", kind: \"message\", T: LobbyPeers, repeated: true },\n    { no: 5, name: \"metadata\", kind: \"scalar\", T: 9, opt: true },\n    { no: 6, name: \"startTime\", kind: \"scalar\", T: 3, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _RoomInfo().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _RoomInfo().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _RoomInfo().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_RoomInfo, a, b);\n  }\n};\nvar LobbyPeers = class _LobbyPeers extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string peerId = 1;\n   */\n  peerId;\n  /**\n   * @generated from field: optional string metadata = 3;\n   */\n  metadata;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"LobbyPeers\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"peerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 3, name: \"metadata\", kind: \"scalar\", T: 9, opt: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _LobbyPeers().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _LobbyPeers().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _LobbyPeers().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_LobbyPeers, a, b);\n  }\n};\nvar ConnectRoomResponse = class _ConnectRoomResponse extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string roomId = 1;\n   */\n  roomId;\n  /**\n   * @generated from field: required RoomInfo roomInfo = 2;\n   */\n  roomInfo;\n  /**\n   * @generated from field: required ProtoRtpCapabilities routerRTPCapabilities = 3;\n   */\n  routerRTPCapabilities;\n  /**\n   * @generated from field: repeated ConnectRoomResponse.RTCIceServer turnServers = 4;\n   */\n  turnServers = [];\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"ConnectRoomResponse\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"roomId\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"roomInfo\", kind: \"message\", T: RoomInfo, req: true },\n    { no: 3, name: \"routerRTPCapabilities\", kind: \"message\", T: ProtoRtpCapabilities, req: true },\n    { no: 4, name: \"turnServers\", kind: \"message\", T: ConnectRoomResponse_RTCIceServer, repeated: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ConnectRoomResponse().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ConnectRoomResponse().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ConnectRoomResponse().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_ConnectRoomResponse, a, b);\n  }\n};\nvar ConnectRoomResponse_RTCIceServer = class _ConnectRoomResponse_RTCIceServer extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string urls = 1;\n   */\n  urls;\n  /**\n   * @generated from field: optional string username = 2;\n   */\n  username;\n  /**\n   * @generated from field: optional string credential = 3;\n   */\n  credential;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"ConnectRoomResponse.RTCIceServer\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"urls\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"username\", kind: \"scalar\", T: 9, opt: true },\n    { no: 3, name: \"credential\", kind: \"scalar\", T: 9, opt: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ConnectRoomResponse_RTCIceServer().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ConnectRoomResponse_RTCIceServer().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ConnectRoomResponse_RTCIceServer().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_ConnectRoomResponse_RTCIceServer, a, b);\n  }\n};\nvar CreateTransportOnClient = class _CreateTransportOnClient extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string transportType = 1;\n   */\n  transportType;\n  /**\n   * @generated from field: required ProtoTransportSDPInfo transportSDPInfo = 2;\n   */\n  transportSDPInfo;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"CreateTransportOnClient\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"transportType\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"transportSDPInfo\", kind: \"message\", T: _chunk_SJ5FMYZU_js__WEBPACK_IMPORTED_MODULE_2__.ProtoTransportSDPInfo, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _CreateTransportOnClient().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _CreateTransportOnClient().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _CreateTransportOnClient().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_CreateTransportOnClient, a, b);\n  }\n};\nvar ConnectTransportResponse = class _ConnectTransportResponse extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string transportType = 1;\n   */\n  transportType;\n  /**\n   * @generated from field: required string transportId = 2;\n   */\n  transportId;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"ConnectTransportResponse\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"transportType\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"transportId\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ConnectTransportResponse().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ConnectTransportResponse().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ConnectTransportResponse().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_ConnectTransportResponse, a, b);\n  }\n};\nvar ProduceResponse = class _ProduceResponse extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string peerId = 1;\n   */\n  peerId;\n  /**\n   * @generated from field: required string producerId = 2;\n   */\n  producerId;\n  /**\n   * @generated from field: required string label = 3;\n   */\n  label;\n  /**\n   * @generated from field: optional AppData appData = 4;\n   */\n  appData;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"ProduceResponse\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"peerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"producerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 3, name: \"label\", kind: \"scalar\", T: 9, req: true },\n    { no: 4, name: \"appData\", kind: \"message\", T: _chunk_SJ5FMYZU_js__WEBPACK_IMPORTED_MODULE_2__.AppData, opt: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProduceResponse().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProduceResponse().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProduceResponse().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_ProduceResponse, a, b);\n  }\n};\nvar ProduceDataResponse = class _ProduceDataResponse extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string id = 1;\n   */\n  id;\n  /**\n   * @generated from field: required string dataProducerId = 2;\n   */\n  dataProducerId;\n  /**\n   * @generated from field: required string label = 3;\n   */\n  label;\n  /**\n   * @generated from field: required string peerId = 4;\n   */\n  peerId;\n  /**\n   * @generated from field: required string protocol = 5;\n   */\n  protocol;\n  /**\n   * @generated from field: required ProtoSctpStreamParameters sctpStreamParameters = 6;\n   */\n  sctpStreamParameters;\n  /**\n   * @generated from field: optional AppData appData = 7;\n   */\n  appData;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"ProduceDataResponse\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"id\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"dataProducerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 3, name: \"label\", kind: \"scalar\", T: 9, req: true },\n    { no: 4, name: \"peerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 5, name: \"protocol\", kind: \"scalar\", T: 9, req: true },\n    { no: 6, name: \"sctpStreamParameters\", kind: \"message\", T: _chunk_SJ5FMYZU_js__WEBPACK_IMPORTED_MODULE_2__.ProtoSctpStreamParameters, req: true },\n    { no: 7, name: \"appData\", kind: \"message\", T: _chunk_SJ5FMYZU_js__WEBPACK_IMPORTED_MODULE_2__.AppData, opt: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProduceDataResponse().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProduceDataResponse().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProduceDataResponse().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_ProduceDataResponse, a, b);\n  }\n};\nvar ConsumeDataResponse = class _ConsumeDataResponse extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string id = 1;\n   */\n  id;\n  /**\n   * @generated from field: required string dataProducerId = 2;\n   */\n  dataProducerId;\n  /**\n   * @generated from field: required string label = 3;\n   */\n  label;\n  /**\n   * @generated from field: required string peerId = 4;\n   */\n  peerId;\n  /**\n   * @generated from field: required string protocol = 5;\n   */\n  protocol;\n  /**\n   * @generated from field: required ProtoSctpStreamParameters sctpStreamParameters = 6;\n   */\n  sctpStreamParameters;\n  /**\n   * @generated from field: optional AppData appData = 7;\n   */\n  appData;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"ConsumeDataResponse\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"id\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"dataProducerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 3, name: \"label\", kind: \"scalar\", T: 9, req: true },\n    { no: 4, name: \"peerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 5, name: \"protocol\", kind: \"scalar\", T: 9, req: true },\n    { no: 6, name: \"sctpStreamParameters\", kind: \"message\", T: _chunk_SJ5FMYZU_js__WEBPACK_IMPORTED_MODULE_2__.ProtoSctpStreamParameters, req: true },\n    { no: 7, name: \"appData\", kind: \"message\", T: _chunk_SJ5FMYZU_js__WEBPACK_IMPORTED_MODULE_2__.AppData, opt: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ConsumeDataResponse().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ConsumeDataResponse().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ConsumeDataResponse().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_ConsumeDataResponse, a, b);\n  }\n};\nvar SyncMeetingStateResponse = class _SyncMeetingStateResponse extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required RoomInfo roomInfo = 1;\n   */\n  roomInfo;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"SyncMeetingStateResponse\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"roomInfo\", kind: \"message\", T: RoomInfo, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _SyncMeetingStateResponse().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _SyncMeetingStateResponse().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _SyncMeetingStateResponse().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_SyncMeetingStateResponse, a, b);\n  }\n};\nvar ConsumeResponse = class _ConsumeResponse extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string label = 1;\n   */\n  label;\n  /**\n   * @generated from field: required string consumerId = 2;\n   */\n  consumerId;\n  /**\n   * @generated from field: required string producerId = 3;\n   */\n  producerId;\n  /**\n   * @generated from field: required string kind = 4;\n   */\n  kind;\n  /**\n   * @generated from field: required ProtoRtpParameters rtpParameters = 5;\n   */\n  rtpParameters;\n  /**\n   * @generated from field: required string producerPeerId = 6;\n   */\n  producerPeerId;\n  /**\n   * @generated from field: optional AppData appData = 7;\n   */\n  appData;\n  /**\n   * @generated from field: optional bool producerPaused = 8;\n   */\n  producerPaused;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"ConsumeResponse\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"label\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"consumerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 3, name: \"producerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 4, name: \"kind\", kind: \"scalar\", T: 9, req: true },\n    { no: 5, name: \"rtpParameters\", kind: \"message\", T: _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.ProtoRtpParameters, req: true },\n    { no: 6, name: \"producerPeerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 7, name: \"appData\", kind: \"message\", T: _chunk_SJ5FMYZU_js__WEBPACK_IMPORTED_MODULE_2__.AppData, opt: true },\n    { no: 8, name: \"producerPaused\", kind: \"scalar\", T: 8, opt: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ConsumeResponse().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ConsumeResponse().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ConsumeResponse().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_ConsumeResponse, a, b);\n  }\n};\nvar CloseProducerSuccess = class _CloseProducerSuccess extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string peerId = 1;\n   */\n  peerId;\n  /**\n   * @generated from field: required string producerId = 2;\n   */\n  producerId;\n  /**\n   * @generated from field: required string label = 3;\n   */\n  label;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"CloseProducerSuccess\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"peerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"producerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 3, name: \"label\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _CloseProducerSuccess().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _CloseProducerSuccess().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _CloseProducerSuccess().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_CloseProducerSuccess, a, b);\n  }\n};\nvar PauseProducerSuccess = class _PauseProducerSuccess extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string peerId = 1;\n   */\n  peerId;\n  /**\n   * @generated from field: required string producerId = 2;\n   */\n  producerId;\n  /**\n   * @generated from field: required string label = 3;\n   */\n  label;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"PauseProducerSuccess\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"peerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"producerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 3, name: \"label\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _PauseProducerSuccess().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _PauseProducerSuccess().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _PauseProducerSuccess().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_PauseProducerSuccess, a, b);\n  }\n};\nvar ResumeProducerSuccess = class _ResumeProducerSuccess extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string peerId = 1;\n   */\n  peerId;\n  /**\n   * @generated from field: required string producerId = 2;\n   */\n  producerId;\n  /**\n   * @generated from field: required string label = 3;\n   */\n  label;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"ResumeProducerSuccess\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"peerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"producerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 3, name: \"label\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ResumeProducerSuccess().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ResumeProducerSuccess().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ResumeProducerSuccess().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_ResumeProducerSuccess, a, b);\n  }\n};\nvar CloseConsumerSuccess = class _CloseConsumerSuccess extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string peerId = 1;\n   */\n  peerId;\n  /**\n   * @generated from field: required string consumerId = 2;\n   */\n  consumerId;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"CloseConsumerSuccess\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"peerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"consumerId\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _CloseConsumerSuccess().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _CloseConsumerSuccess().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _CloseConsumerSuccess().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_CloseConsumerSuccess, a, b);\n  }\n};\nvar RestartTransportIceResponse = class _RestartTransportIceResponse extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string transportType = 1;\n   */\n  transportType;\n  /**\n   * @generated from field: required ProtoIceParameters iceParameters = 2;\n   */\n  iceParameters;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"RestartTransportIceResponse\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"transportType\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"iceParameters\", kind: \"message\", T: _chunk_SJ5FMYZU_js__WEBPACK_IMPORTED_MODULE_2__.ProtoIceParameters, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _RestartTransportIceResponse().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _RestartTransportIceResponse().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _RestartTransportIceResponse().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_RestartTransportIceResponse, a, b);\n  }\n};\nvar NewPeerJoined = class _NewPeerJoined extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string peerId = 1;\n   */\n  peerId;\n  /**\n   * @generated from field: optional string metadata = 2;\n   */\n  metadata;\n  /**\n   * @generated from field: optional string role = 3;\n   */\n  role;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"NewPeerJoined\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"peerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"metadata\", kind: \"scalar\", T: 9, opt: true },\n    { no: 3, name: \"role\", kind: \"scalar\", T: 9, opt: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _NewPeerJoined().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _NewPeerJoined().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _NewPeerJoined().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_NewPeerJoined, a, b);\n  }\n};\nvar NewLobbyPeer = class _NewLobbyPeer extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string peerId = 1;\n   */\n  peerId;\n  /**\n   * @generated from field: optional string metadata = 2;\n   */\n  metadata;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"NewLobbyPeer\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"peerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"metadata\", kind: \"scalar\", T: 9, opt: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _NewLobbyPeer().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _NewLobbyPeer().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _NewLobbyPeer().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_NewLobbyPeer, a, b);\n  }\n};\nvar NewPermissions = class _NewPermissions extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required Permissions acl = 2;\n   */\n  acl;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"NewPermissions\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 2, name: \"acl\", kind: \"message\", T: _chunk_SJ5FMYZU_js__WEBPACK_IMPORTED_MODULE_2__.Permissions, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _NewPermissions().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _NewPermissions().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _NewPermissions().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_NewPermissions, a, b);\n  }\n};\nvar NewRoomControls = class _NewRoomControls extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required RoomControls controls = 1;\n   */\n  controls;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"NewRoomControls\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"controls\", kind: \"message\", T: RoomControls, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _NewRoomControls().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _NewRoomControls().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _NewRoomControls().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_NewRoomControls, a, b);\n  }\n};\nvar NewPeerRole = class _NewPeerRole extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string peerId = 1;\n   */\n  peerId;\n  /**\n   * @generated from field: required string role = 2;\n   */\n  role;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"NewPeerRole\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"peerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"role\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _NewPeerRole().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _NewPeerRole().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _NewPeerRole().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_NewPeerRole, a, b);\n  }\n};\nvar ReceiveData = class _ReceiveData extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string from = 1;\n   */\n  from;\n  /**\n   * @generated from field: required string payload = 2;\n   */\n  payload;\n  /**\n   * @generated from field: optional string label = 3;\n   */\n  label;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"ReceiveData\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"from\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"payload\", kind: \"scalar\", T: 9, req: true },\n    { no: 3, name: \"label\", kind: \"scalar\", T: 9, opt: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ReceiveData().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ReceiveData().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ReceiveData().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_ReceiveData, a, b);\n  }\n};\nvar PeerMetadataUpdated = class _PeerMetadataUpdated extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string peerId = 1;\n   */\n  peerId;\n  /**\n   * @generated from field: required string metadata = 2;\n   */\n  metadata;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"PeerMetadataUpdated\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"peerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"metadata\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _PeerMetadataUpdated().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _PeerMetadataUpdated().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _PeerMetadataUpdated().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_PeerMetadataUpdated, a, b);\n  }\n};\nvar RoomMetadataUpdated = class _RoomMetadataUpdated extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string metadata = 1;\n   */\n  metadata;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"RoomMetadataUpdated\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"metadata\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _RoomMetadataUpdated().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _RoomMetadataUpdated().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _RoomMetadataUpdated().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_RoomMetadataUpdated, a, b);\n  }\n};\nvar RoomClosedProducers = class _RoomClosedProducers extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: repeated RoomClosedProducers.CloseProducerInfo producers = 1;\n   */\n  producers = [];\n  /**\n   * @generated from field: required RoomClosedProducers.CloseProducerReason reason = 2;\n   */\n  reason;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"RoomClosedProducers\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"producers\", kind: \"message\", T: RoomClosedProducers_CloseProducerInfo, repeated: true },\n    { no: 2, name: \"reason\", kind: \"message\", T: RoomClosedProducers_CloseProducerReason, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _RoomClosedProducers().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _RoomClosedProducers().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _RoomClosedProducers().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_RoomClosedProducers, a, b);\n  }\n};\nvar RoomClosedProducers_CloseProducerInfo = class _RoomClosedProducers_CloseProducerInfo extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string peerId = 1;\n   */\n  peerId;\n  /**\n   * @generated from field: required string producerId = 2;\n   */\n  producerId;\n  /**\n   * @generated from field: required string label = 3;\n   */\n  label;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"RoomClosedProducers.CloseProducerInfo\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"peerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"producerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 3, name: \"label\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _RoomClosedProducers_CloseProducerInfo().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _RoomClosedProducers_CloseProducerInfo().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _RoomClosedProducers_CloseProducerInfo().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_RoomClosedProducers_CloseProducerInfo, a, b);\n  }\n};\nvar RoomClosedProducers_CloseProducerReason = class _RoomClosedProducers_CloseProducerReason extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required int32 code = 1;\n   */\n  code;\n  /**\n   * @generated from field: required string tag = 2;\n   */\n  tag;\n  /**\n   * @generated from field: required string message = 3;\n   */\n  message;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"RoomClosedProducers.CloseProducerReason\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"code\", kind: \"scalar\", T: 5, req: true },\n    { no: 2, name: \"tag\", kind: \"scalar\", T: 9, req: true },\n    { no: 3, name: \"message\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _RoomClosedProducers_CloseProducerReason().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _RoomClosedProducers_CloseProducerReason().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _RoomClosedProducers_CloseProducerReason().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_RoomClosedProducers_CloseProducerReason, a, b);\n  }\n};\nvar PeerLeft = class _PeerLeft extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string peerId = 1;\n   */\n  peerId;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"PeerLeft\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"peerId\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _PeerLeft().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _PeerLeft().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _PeerLeft().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_PeerLeft, a, b);\n  }\n};\nvar LobbyPeerLeft = class _LobbyPeerLeft extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string peerId = 1;\n   */\n  peerId;\n  /**\n   * @generated from field: required string status = 2;\n   */\n  status;\n  /**\n   * @generated from field: optional string message = 3;\n   */\n  message;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"LobbyPeerLeft\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"peerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"status\", kind: \"scalar\", T: 9, req: true },\n    { no: 3, name: \"message\", kind: \"scalar\", T: 9, opt: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _LobbyPeerLeft().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _LobbyPeerLeft().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _LobbyPeerLeft().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_LobbyPeerLeft, a, b);\n  }\n};\nvar WaitingRoom = class _WaitingRoom extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string reason = 1;\n   */\n  reason;\n  /**\n   * @generated from field: optional string metadata = 2;\n   */\n  metadata;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"WaitingRoom\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"reason\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"metadata\", kind: \"scalar\", T: 9, opt: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _WaitingRoom().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _WaitingRoom().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _WaitingRoom().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_WaitingRoom, a, b);\n  }\n};\nvar Error2 = class _Error extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from field: required string event = 1;\n   */\n  event;\n  /**\n   * @generated from field: required string error = 2;\n   */\n  error;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"Error\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"event\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"error\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _Error().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _Error().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _Error().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_Error, a, b);\n  }\n};\nvar Response = class _Response extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.Message {\n  /**\n   * @generated from oneof Response.Response\n   */\n  Response = { case: void 0 };\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2;\n  static typeName = \"Response\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"hello\", kind: \"message\", T: Hello, oneof: \"Response\" },\n    { no: 2, name: \"connectRoomResponse\", kind: \"message\", T: ConnectRoomResponse, oneof: \"Response\" },\n    { no: 3, name: \"createTransportOnClient\", kind: \"message\", T: CreateTransportOnClient, oneof: \"Response\" },\n    { no: 4, name: \"produceResponse\", kind: \"message\", T: ProduceResponse, oneof: \"Response\" },\n    { no: 25, name: \"consumeDataResponse\", kind: \"message\", T: ConsumeDataResponse, oneof: \"Response\" },\n    { no: 5, name: \"produceDataResponse\", kind: \"message\", T: ProduceDataResponse, oneof: \"Response\" },\n    { no: 6, name: \"syncMeetingStateResponse\", kind: \"message\", T: SyncMeetingStateResponse, oneof: \"Response\" },\n    { no: 7, name: \"consumeResponse\", kind: \"message\", T: ConsumeResponse, oneof: \"Response\" },\n    { no: 8, name: \"closeProducerSuccess\", kind: \"message\", T: CloseProducerSuccess, oneof: \"Response\" },\n    { no: 26, name: \"pauseProducerSuccess\", kind: \"message\", T: PauseProducerSuccess, oneof: \"Response\" },\n    { no: 27, name: \"resumeProducerSuccess\", kind: \"message\", T: ResumeProducerSuccess, oneof: \"Response\" },\n    { no: 9, name: \"closeConsumerSuccess\", kind: \"message\", T: CloseConsumerSuccess, oneof: \"Response\" },\n    { no: 10, name: \"connectTransportResponse\", kind: \"message\", T: ConnectTransportResponse, oneof: \"Response\" },\n    { no: 11, name: \"restartTransportIceResponse\", kind: \"message\", T: RestartTransportIceResponse, oneof: \"Response\" },\n    { no: 12, name: \"newPeerJoined\", kind: \"message\", T: NewPeerJoined, oneof: \"Response\" },\n    { no: 13, name: \"newLobbyPeer\", kind: \"message\", T: NewLobbyPeer, oneof: \"Response\" },\n    { no: 14, name: \"newPermissions\", kind: \"message\", T: NewPermissions, oneof: \"Response\" },\n    { no: 15, name: \"newRoomControls\", kind: \"message\", T: NewRoomControls, oneof: \"Response\" },\n    { no: 16, name: \"newPeerRole\", kind: \"message\", T: NewPeerRole, oneof: \"Response\" },\n    { no: 17, name: \"receiveData\", kind: \"message\", T: ReceiveData, oneof: \"Response\" },\n    { no: 18, name: \"peerMetadataUpdated\", kind: \"message\", T: PeerMetadataUpdated, oneof: \"Response\" },\n    { no: 19, name: \"roomMetadataUpdated\", kind: \"message\", T: RoomMetadataUpdated, oneof: \"Response\" },\n    { no: 20, name: \"roomClosedProducers\", kind: \"message\", T: RoomClosedProducers, oneof: \"Response\" },\n    { no: 21, name: \"peerLeft\", kind: \"message\", T: PeerLeft, oneof: \"Response\" },\n    { no: 22, name: \"lobbyPeerLeft\", kind: \"message\", T: LobbyPeerLeft, oneof: \"Response\" },\n    { no: 23, name: \"waitingRoom\", kind: \"message\", T: WaitingRoom, oneof: \"Response\" },\n    { no: 24, name: \"error\", kind: \"message\", T: Error2, oneof: \"Response\" }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _Response().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _Response().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _Response().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_3__.proto2.util.equals(_Response, a, b);\n  }\n};\n\n// package.json\nvar package_default = {\n  name: \"@huddle01/web-core\",\n  version: \"2.2.4\",\n  description: \"The Huddle01 Javascript SDK offers a comprehensive suite of methods and event listeners that allow for seamless real-time audio and video communication with minimal coding required.\",\n  type: \"module\",\n  main: \"dist/index.js\",\n  types: \"dist/index.d.ts\",\n  files: [\"dist\", \"types.d.ts\"],\n  scripts: {\n    build: \"rimraf dist && tsup --format esm,cjs\",\n    \"build:umd\": \"rimraf dist && tsup --format iife\",\n    watch: \"tsup --watch\",\n    pub: \"bun run build && npm publish --access public\",\n    \"pub:umd\": \"bun run build:umd && npm publish --access public --tag umd\",\n    \"pub:dev\": \"bun run build && npm publish --access public --tag dev\",\n    \"pub:alpha\": \"bun run build && npm publish --access public --tag alpha\",\n    \"pub:beta\": \"bun run build && npm publish --access public --tag beta\",\n    test: \"vitest\",\n    \"test:types\": \"vitest typecheck\"\n  },\n  exports: {\n    \".\": {\n      import: \"./dist/index.js\",\n      types: \"./dist/index.d.ts\"\n    },\n    \"./types\": {\n      import: \"./dist/types/index.js\",\n      types: \"./dist/types/index.d.ts\"\n    }\n  },\n  keywords: [\"huddle01\", \"web-core\", \"RTC\", \"web3\"],\n  author: \"a4748g\",\n  license: \"ISC\",\n  devDependencies: {\n    \"@vitest/browser\": \"^2.1.2\",\n    esbuild: \"^0.24.0\",\n    jsdom: \"^25.0.1\",\n    protoc: \"workspace:*\",\n    tsconfig: \"workspace:*\",\n    tsup: \"^8.3.0\",\n    types: \"workspace:*\",\n    typescript: \"5.6.2\",\n    vitest: \"^2.1.2\",\n    webdriverio: \"^9.1.3\"\n  },\n  dependencies: {\n    \"mediasoup-client\": \"3.7.16\",\n    zod: \"^3.23.8\"\n  }\n};\n\n// src/Socket.ts\nvar logger = _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_5__.mainLogger.createSubLogger(\"Socket.ts\");\nvar Socket = class _Socket extends _chunk_BW2DGP4D_js__WEBPACK_IMPORTED_MODULE_6__.EnhancedEventEmitter {\n  /**\n   * Socket Instance, Singleton class\n   */\n  static __instance = null;\n  /**\n   * Retry count for the socket connection, if the connection is closed abnormally, we try to reconnect 5 times\n   */\n  __retryCount = 0;\n  /**\n   * Current connection state of the socket connection\n   */\n  __connectionState = \"uninitialized\";\n  /**\n   * websocket polyfill\n   */\n  __wsPolyfill;\n  /**\n   * Underlying WebSocket connection, until we dont call Socket.connect(); this will be null\n   */\n  __ws = null;\n  /**\n   * Map of all the subscribed events/topics for the socket connection\n   */\n  __subscribedMap = /* @__PURE__ */ new Map();\n  /**\n   * Geo data of the current socket connection, specific to the Local Peer who joined the meeting\n   */\n  __geoData = null;\n  /**\n   * Endpoint of the socket server, this is fetched from the API server\n   */\n  __ENDPOINT = null;\n  /**\n   * Flag to enable local development\n   */\n  isLocalDev = false;\n  /**\n   * Token of the current socket connection, specific to the Local Peer who joined the meeting\n   */\n  token = null;\n  /**\n   * Returns the underlying WebSocket connection, throws an error if the connection is not initialized\n   * @throws `Error` if the connection is not initialized\n   */\n  get ws() {\n    if (!this.__ws) {\n      throw new Error(\"\\u{1F534} Socket Not Initialised\");\n    }\n    return this.__ws;\n  }\n  /**\n   * Getter for the region of the current socket connection\n   */\n  get region() {\n    return this.__geoData?.region;\n  }\n  /**\n   * Getter for the geo data of the current socket connection\n   */\n  get geoData() {\n    return this.__geoData;\n  }\n  /**\n   * Returns the current connection state of the socket connection\n   */\n  get connectionState() {\n    return this.__connectionState;\n  }\n  /**\n   * Returns true if the socket connection is connected\n   */\n  get connected() {\n    return this.__ws?.OPEN === 1 && this.connectionState === \"connected\";\n  }\n  /**\n   * Returns true if the socket connection is connecting\n   */\n  get connecting() {\n    return this.__ws?.CONNECTING === 0 && this.connectionState === \"connecting\";\n  }\n  /**\n   * Returns true if the socket connection is closed\n   */\n  get closed() {\n    return this.__ws?.CLOSED === 3 || this.__ws?.CLOSING === 2;\n  }\n  /**\n   * Sets the current connection state of the socket connection\n   */\n  set connectionState(state) {\n    logger.info(`\\u{1F50C} WebSocket state changed to ${state}`);\n    this.__connectionState = state;\n  }\n  /**\n   * Update the token for this socket\n   * @throws `Error` if the token is already set\n   */\n  setToken(token) {\n    if (this.token) {\n      throw new Error(\"\\u{1F534} Token Already Set\");\n    }\n    this.token = token;\n    this.emit(\"token-updated\", token);\n  }\n  /**\n   * Set a new region for the socket connection\n   */\n  setRegion(region) {\n    if (this.geoData) {\n      this.geoData.region = region;\n    } else {\n      this.__geoData = {\n        country: \"IN\",\n        region\n      };\n    }\n    this.emit(\"region-updated\", region);\n  }\n  /**\n   * @protected - For Internal Use Only\n   */\n  enableLocalDev = () => {\n    this.isLocalDev = true;\n  };\n  /**\n   * Creates the socket and returns the instance of the socket if already initialized\n   * you need to call connect method to connect to the server\n   * @param data\n   * @returns\n   */\n  static create(wsPolyfill) {\n    if (!_Socket.__instance) {\n      _Socket.__instance = new _Socket(wsPolyfill);\n    }\n    return _Socket.__instance;\n  }\n  /**\n   * Returns the instance of the socket connection, throws an error if the connection is not initialized\n   * @throws `Error` if the connection is not initialized\n   */\n  static getInstance() {\n    if (!_Socket.__instance) {\n      throw new Error(\n        \"\\u{1F534} Socket Instance Not Initialised, You are trying to do something which is not possible\"\n      );\n    }\n    return _Socket.__instance;\n  }\n  constructor(wsPolyfill) {\n    super();\n    this.__wsPolyfill = wsPolyfill || null;\n  }\n  /**\n   *\n   */\n  __getGeoData = async () => {\n    const fn = async () => {\n      const resp = await fetch(\n        \"https://shinigami.huddle01.com/api/get-geolocation\"\n      );\n      const data = await resp?.json();\n      const geolocationdata = _chunk_NTD5WULD_js__WEBPACK_IMPORTED_MODULE_0__.GeolocationSchema.safeParse(data);\n      if (!geolocationdata.success) {\n        throw new Error(\"\\u{1F534} Error While Finding the Region to connect to\");\n      }\n      return {\n        region: geolocationdata.data.globalRegion,\n        country: geolocationdata.data.country\n      };\n    };\n    return (0,_chunk_UNAM3CMB_js__WEBPACK_IMPORTED_MODULE_1__.apiCallWithRetry)(fn);\n  };\n  /**\n   * Connect to the socket server using the token, this will establish the connection with the server\n   *\n   * Every `token` is unique for each New Peer Trying to connect. Reusing the token will result in an repeated connection error, until the connection is closed.\n   * @param data - `{ token: string }`\n   * @throws `Error` if the socket connection cannot be established\n   */\n  connect = async (data) => {\n    if (!_Socket.__instance) {\n      throw new Error(\"\\u{1F534} Socket Instance Not Initialised\");\n    }\n    if (!this.token) {\n      this.setToken(data.token);\n    }\n    if (this.connectionState === \"connected\") {\n      logger.error(\"\\u{1F534} Socket Already Connected\");\n      return _Socket.__instance;\n    }\n    if (this.connectionState === \"connecting\") {\n      logger.error(\"\\u{1F534} Socket Already Connecting\");\n      return _Socket.__instance;\n    }\n    if (this.__ws) {\n      logger.error(\"\\u{1F534} Socket Already Initialized\");\n      return _Socket.__instance;\n    }\n    logger.info(\"\\u{1F50C} Connecting to the socket server\");\n    if (!this.__geoData) {\n      const geoData = await this.__getGeoData();\n      this.__geoData = geoData;\n    }\n    const url = await this.__getConfigUrl(\n      data.token,\n      this.__geoData.region,\n      this.__geoData.country\n    );\n    this.connectionState = \"connecting\";\n    this.emit(\"connecting\");\n    if (this.__wsPolyfill) this.__ws = new this.__wsPolyfill(url);\n    else this.__ws = new WebSocket(url);\n    this.__ws.binaryType = \"arraybuffer\";\n    this.__ws.onmessage = this.__handleIncomingMessage;\n    this.__registerSocketEvents(this.ws);\n    const socketConnectionPromise = new Promise((resolve, reject) => {\n      const handleSuccess = () => {\n        logger.info(\"\\u2705 WebSocket Connection Established Promise Resolved\");\n        handleRemoveListeners();\n        resolve();\n      };\n      const handleClose = () => {\n        logger.error(\n          \"\\u{1F534} Error Connecting WebSocket, Closing the Connection, Try Again.\"\n        );\n        handleRemoveListeners();\n        reject(\n          new Error(\n            \"\\u274C Error Connecting WebSocket, Closing the Connection, Try Again.\"\n          )\n        );\n      };\n      const handleRemoveListeners = () => {\n        this.off(\"connected\", handleSuccess);\n        this.off(\"closed\", handleClose);\n      };\n      this.once(\"connected\", handleSuccess);\n      this.once(\"closed\", handleClose);\n    });\n    await socketConnectionPromise;\n    return _Socket.__instance;\n  };\n  /**\n   * Closes the underlying socket connection, and clears all the event listeners and subscriptions to events as well as\n   * any other information related to the connection.\n   * @param code `{ ESocketCloseCode }`\n   */\n  close = (code, reconnect = false) => {\n    if (this.__ws) {\n      this.__ws.onmessage = null;\n    }\n    const reason = SocketCloseReason[code];\n    if (code >= 3e3 && code <= 4999 || code === 1e3) {\n      logger.info(`\\u{1F534} Closing the WebSocket Connection, ${code} ${reason}`);\n      this.__ws?.close(code, reason);\n      this.__ws = null;\n      this.token = null;\n      this.__ENDPOINT = null;\n      this.__retryCount = 0;\n      this.emit(\"token-updated\", null);\n      this.connectionState = \"closed\";\n      this.emit(\"closed\", code);\n      logger.info(\"\\u{1F50C} WebSocket Connection closed\");\n      return;\n    }\n    this.__ws?.close();\n    if (this.__ws) {\n      this.__unregisterSocketEvents(this.ws);\n    }\n    this.__ws = null;\n    if (code === ESocketCloseCode.ABNORMAL_CLOSURE || reconnect) {\n      logger.info(\n        \"\\u{1F50C} Socket Connection closed abnormally, Trying to Reconnect\",\n        {\n          code,\n          reason\n        }\n      );\n      if (this.__retryCount < 7) {\n        const delay = 2 ** this.__retryCount * 1e3;\n        setTimeout(\n          () => {\n            if (this.token) {\n              try {\n                logger.info(\n                  \"\\u{1F514} Trying to reconnect, Attempt:\",\n                  this.__retryCount\n                );\n                this.connectionState = \"reconnecting\";\n                this.emit(\"reconnecting\");\n                this.connect({ token: this.token }).then(() => {\n                  if (this.__retryCount > 0) {\n                    this.emit(\"reconnected\");\n                  }\n                  this.__retryCount = 0;\n                }).catch(() => {\n                  if (this.__retryCount === 7) {\n                    logger.error(\"All Reconnection Attempt failed\");\n                  }\n                });\n              } catch (err) {\n                logger.error(\n                  `Reconnection Attempt ${this.__retryCount} failed`\n                );\n              }\n            }\n          },\n          Math.min(delay, 2e4)\n        );\n        this.__retryCount++;\n      } else {\n        logger.error(\n          \"\\u{1F534} Socket connection closed abnormally, reconnecting failed\"\n        );\n        this.close(ESocketCloseCode.CONNECTION_EXPIRED);\n      }\n    } else {\n      logger.info(\"\\u{1F50C} Socket Connection closed\", code, reason);\n      this.connectionState = \"closed\";\n      this.emit(\"closed\", code);\n    }\n  };\n  /**\n   * Publish a message to the server using the socket connection based on some events/topics\n   */\n  publish = (event, data) => {\n    try {\n      const message = new _chunk_SJ5FMYZU_js__WEBPACK_IMPORTED_MODULE_2__.Request({\n        // @ts-ignore - TS doesn't understand that the value of event is a key of ClientToSushiEvents\n        request: {\n          case: event,\n          value: new _chunk_SJ5FMYZU_js__WEBPACK_IMPORTED_MODULE_2__.ProtoRequestEvent[event](data)\n        }\n      });\n      const binaryData = message.toBinary();\n      this.ws.send(binaryData);\n    } catch (error) {\n      logger.error(\"\\u{1F534} Error While Sending the Message\", error);\n    }\n  };\n  /**\n   * Subscribe to a specific event/topic from the server\n   */\n  subscribe = (event, fn) => {\n    if (this.__subscribedMap.has(event)) {\n      logger.warn(\"\\u26A0\\uFE0F Overriding existing event handler\");\n    }\n    this.__subscribedMap.set(event, fn);\n  };\n  /**\n   * Get the config url for the socket connection based on the token and region\n   * @param token Local Peer specific meeting token\n   * @param region Local Peer specific region\n   * @returns\n   */\n  async __getConfigUrl(token, region, country) {\n    if (this.__ENDPOINT) {\n      return this.__ENDPOINT;\n    }\n    const fn = async () => {\n      const apiServerUrl = this.isLocalDev ? \"http://localhost:8000/api/v1\" : \"https://apira.huddle01.media/api/v1\";\n      const res = await fetch(`${apiServerUrl}/getSushiUrl`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          authorization: `Bearer ${token}`\n        }\n      });\n      if (!res.ok) {\n        throw new Error(\"\\u{1F534} Error While Fetching the Url\");\n      }\n      const { url } = await res.json();\n      this.__ENDPOINT = url.replace(\"https://\", \"wss://\").replace(\"http://\", \"ws://\");\n      const wssAddress = `${this.__ENDPOINT}/ws`;\n      const wsAddress = `${wssAddress}?${[\n        `token=${token}`,\n        `version=${package_default.version}`,\n        `region=${region}`,\n        `country=${country}`\n      ].join(\"&\")}`;\n      this.__ENDPOINT = wsAddress;\n      return wsAddress;\n    };\n    return (0,_chunk_UNAM3CMB_js__WEBPACK_IMPORTED_MODULE_1__.apiCallWithRetry)(fn);\n  }\n  /**\n   * !Important\n   * Handle the incoming message from the server based on the events received from the server and call the subscribed event handler\n   */\n  __handleIncomingMessage = (event) => {\n    try {\n      const eventData = new Uint8Array(event.data);\n      const msg = Response.fromBinary(eventData).Response;\n      logger.debug(\"\\u{1F4E8} Incoming message\", msg);\n      const eventName = msg.case;\n      if (eventName === void 0) {\n        throw new Error(\"\\u{1F534} Can't find the event name, Found: { undefined }\");\n      }\n      const data = JSON.parse(JSON.stringify(msg.value));\n      logger.info(\"\\u{1F4E8} Incoming message event name: \", eventName);\n      const fn = this.__subscribedMap.get(eventName);\n      if (fn) {\n        fn(data);\n      }\n    } catch (error) {\n      logger.error(\"\\u{1F534} Error: Handling Incoming Message\", error);\n    }\n  };\n  __handleSocketError = (ev) => {\n    logger.error(\"\\u274C Socket connection error\", ev);\n  };\n  /**\n   * @description Handle the socket close event which is sent by the server\n   * @param ev CloseEvent\n   */\n  __handleSocketClose = (ev) => {\n    logger.info(\"\\u{1F514} Socket connection closed emitted\", ev);\n    const code = ev.code;\n    const reason = ev.reason;\n    const isCloudflareClose = reason?.toLowerCase().includes(\"cloudflare\");\n    const isReactNativeStreamEnd = (0,_chunk_WA3QABYS_js__WEBPACK_IMPORTED_MODULE_4__.isReactNative)() && reason?.toLowerCase().includes(\"stream end encountered\");\n    this.close(code, isCloudflareClose || isReactNativeStreamEnd);\n  };\n  /**\n   * @description Handle the socket open event which is sent after the connection is established with the server\n   * @param ev Event\n   */\n  __handleSocketOpen = (ev) => {\n    logger.debug(\"WebSocket Connection Open\", ev);\n    this.connectionState = \"connected\";\n    this.emit(\"connected\");\n  };\n  /**\n   * @description Register the socket events\n   * @param ws WebSocket\n   */\n  __registerSocketEvents = (ws) => {\n    ws.onerror = this.__handleSocketError;\n    ws.onclose = this.__handleSocketClose;\n    ws.onopen = this.__handleSocketOpen;\n  };\n  /**\n   * @description Unregister the socket events\n   * @param ws WebSocket\n   */\n  __unregisterSocketEvents = (ws) => {\n    ws.onerror = null;\n    ws.onclose = null;\n    ws.onopen = null;\n  };\n};\nvar Socket_default = Socket;\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstQjdOUExHSUUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXdEO0FBQ0Q7QUFDc0c7QUFDM0U7QUFDOUI7QUFDSDtBQUNVOztBQUUzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw0Q0FBNEM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxxRUFBcUUsdURBQU87QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxzREFBTTtBQUNWO0FBQ0EsbUJBQW1CLHNEQUFNO0FBQ3pCO0FBQ0Esa0JBQWtCLHNEQUFNO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsc0RBQU07QUFDakI7QUFDQTtBQUNBLHlHQUF5Ryx1REFBTztBQUNoSDtBQUNBO0FB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QUFDQTtBQUNBOztBQUU0QyIsInNvdXJjZXMiOlsid2VicGFjazovL3Bva2Vtb24tZ2FtZS1ldGhpbmRpYS0xLy4vbm9kZV9tb2R1bGVzL0BodWRkbGUwMS93ZWItY29yZS9kaXN0L2NodW5rLUI3TlBMR0lFLmpzPzZkODIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2VvbG9jYXRpb25TY2hlbWEgfSBmcm9tICcuL2NodW5rLU5URDVXVUxELmpzJztcbmltcG9ydCB7IGFwaUNhbGxXaXRoUmV0cnkgfSBmcm9tICcuL2NodW5rLVVOQU0zQ01CLmpzJztcbmltcG9ydCB7IFBlcm1pc3Npb25zLCBQcm90b1RyYW5zcG9ydFNEUEluZm8sIEFwcERhdGEsIFByb3RvU2N0cFN0cmVhbVBhcmFtZXRlcnMsIFByb3RvSWNlUGFyYW1ldGVycywgUmVxdWVzdCwgUHJvdG9SZXF1ZXN0RXZlbnQgfSBmcm9tICcuL2NodW5rLVNKNUZNWVpVLmpzJztcbmltcG9ydCB7IE1lc3NhZ2UsIHByb3RvMywgcHJvdG8yLCBQcm90b1J0cFBhcmFtZXRlcnMgfSBmcm9tICcuL2NodW5rLURGTllPUklGLmpzJztcbmltcG9ydCB7IGlzUmVhY3ROYXRpdmUgfSBmcm9tICcuL2NodW5rLVdBM1FBQllTLmpzJztcbmltcG9ydCB7IG1haW5Mb2dnZXIgfSBmcm9tICcuL2NodW5rLVRPQ0ZPR1RDLmpzJztcbmltcG9ydCB7IEVuaGFuY2VkRXZlbnRFbWl0dGVyIH0gZnJvbSAnLi9jaHVuay1CVzJER1A0RC5qcyc7XG5cbi8vIC4uL3R5cGVzL2Rpc3Qvc29ja2V0LnR5cGVzLmpzXG52YXIgRVNvY2tldENsb3NlQ29kZTtcbihmdW5jdGlvbihFU29ja2V0Q2xvc2VDb2RlMikge1xuICBFU29ja2V0Q2xvc2VDb2RlMltFU29ja2V0Q2xvc2VDb2RlMltcIkFCTk9STUFMX0NMT1NVUkVcIl0gPSAxMDA2XSA9IFwiQUJOT1JNQUxfQ0xPU1VSRVwiO1xuICBFU29ja2V0Q2xvc2VDb2RlMltFU29ja2V0Q2xvc2VDb2RlMltcIk5PUk1BTF9DTE9TVVJFXCJdID0gMWUzXSA9IFwiTk9STUFMX0NMT1NVUkVcIjtcbiAgRVNvY2tldENsb3NlQ29kZTJbRVNvY2tldENsb3NlQ29kZTJbXCJCUk9XU0VSX1RBQl9DTE9TRVwiXSA9IDEwMDFdID0gXCJCUk9XU0VSX1RBQl9DTE9TRVwiO1xuICBFU29ja2V0Q2xvc2VDb2RlMltFU29ja2V0Q2xvc2VDb2RlMltcIkdPSU5HX0FXQVlcIl0gPSA0MDAxXSA9IFwiR09JTkdfQVdBWVwiO1xuICBFU29ja2V0Q2xvc2VDb2RlMltFU29ja2V0Q2xvc2VDb2RlMltcIkNPTk5FQ1RJT05fRVhQSVJFRFwiXSA9IDQwMDJdID0gXCJDT05ORUNUSU9OX0VYUElSRURcIjtcbiAgRVNvY2tldENsb3NlQ29kZTJbRVNvY2tldENsb3NlQ29kZTJbXCJDT05ORUNUSU9OX0VSUk9SXCJdID0gNDAwNl0gPSBcIkNPTk5FQ1RJT05fRVJST1JcIjtcbiAgRVNvY2tldENsb3NlQ29kZTJbRVNvY2tldENsb3NlQ29kZTJbXCJST09NX0NMT1NFRFwiXSA9IDQwMDddID0gXCJST09NX0NMT1NFRFwiO1xuICBFU29ja2V0Q2xvc2VDb2RlMltFU29ja2V0Q2xvc2VDb2RlMltcIlJPT01fRU5UUllfREVOSUVEXCJdID0gNDAwOF0gPSBcIlJPT01fRU5UUllfREVOSUVEXCI7XG4gIEVTb2NrZXRDbG9zZUNvZGUyW0VTb2NrZXRDbG9zZUNvZGUyW1wiS0lDS0VEXCJdID0gNDAwOV0gPSBcIktJQ0tFRFwiO1xuICBFU29ja2V0Q2xvc2VDb2RlMltFU29ja2V0Q2xvc2VDb2RlMltcIk1BWF9QRUVSU19SRUFDSEVEXCJdID0gNDAxMF0gPSBcIk1BWF9QRUVSU19SRUFDSEVEXCI7XG4gIEVTb2NrZXRDbG9zZUNvZGUyW0VTb2NrZXRDbG9zZUNvZGUyW1wiUk9PTV9FWFBJUkVEXCJdID0gNDAxMV0gPSBcIlJPT01fRVhQSVJFRFwiO1xufSkoRVNvY2tldENsb3NlQ29kZSB8fCAoRVNvY2tldENsb3NlQ29kZSA9IHt9KSk7XG52YXIgU29ja2V0Q2xvc2VSZWFzb24gPSB7XG4gIFtFU29ja2V0Q2xvc2VDb2RlLlJPT01fQ0xPU0VEXTogXCJST09NX0NMT1NFRFwiLFxuICBbRVNvY2tldENsb3NlQ29kZS5BQk5PUk1BTF9DTE9TVVJFXTogXCJBQk5PUk1BTF9DTE9TVVJFXCIsXG4gIFtFU29ja2V0Q2xvc2VDb2RlLk5PUk1BTF9DTE9TVVJFXTogXCJOT1JNQUxfQ0xPU1VSRVwiLFxuICBbRVNvY2tldENsb3NlQ29kZS5CUk9XU0VSX1RBQl9DTE9TRV06IFwiQlJPV1NFUl9UQUJfQ0xPU0VcIixcbiAgW0VTb2NrZXRDbG9zZUNvZGUuR09JTkdfQVdBWV06IFwiR09JTkdfQVdBWVwiLFxuICBbRVNvY2tldENsb3NlQ29kZS5DT05ORUNUSU9OX0VSUk9SXTogXCJDT05ORUNUSU9OX0VSUk9SXCIsXG4gIFtFU29ja2V0Q2xvc2VDb2RlLkNPTk5FQ1RJT05fRVhQSVJFRF06IFwiQ09OTkVDVElPTl9FWFBJUkVEXCIsXG4gIFtFU29ja2V0Q2xvc2VDb2RlLlJPT01fRU5UUllfREVOSUVEXTogXCJST09NX0VOVFJZX0RFTklFRFwiLFxuICBbRVNvY2tldENsb3NlQ29kZS5LSUNLRURdOiBcIktJQ0tFRFwiLFxuICBbRVNvY2tldENsb3NlQ29kZS5NQVhfUEVFUlNfUkVBQ0hFRF06IFwiTUFYX1BFRVJTX1JFQUNIRURcIixcbiAgW0VTb2NrZXRDbG9zZUNvZGUuUk9PTV9FWFBJUkVEXTogXCJST09NX0VYUElSRURcIlxufTtcblxuLy8gLi4vcHJvdG9jL2Rpc3QvcnRjL3J0cF9jYXBhYmlsaXRpZXNfcGIuanNcbnZhciBQcm90b1J0cENvZGVjQ2FwYWJpbGl0eSA9IGNsYXNzIF9Qcm90b1J0cENvZGVjQ2FwYWJpbGl0eSBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBzdHJpbmcga2luZCA9IDE7XG4gICAqL1xuICBraW5kID0gXCJcIjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogc3RyaW5nIG1pbWVUeXBlID0gMjtcbiAgICovXG4gIG1pbWVUeXBlID0gXCJcIjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogaW50MzIgcHJlZmVycmVkUGF5bG9hZFR5cGUgPSAzO1xuICAgKi9cbiAgcHJlZmVycmVkUGF5bG9hZFR5cGUgPSAwO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBpbnQzMiBjbG9ja1JhdGUgPSA0O1xuICAgKi9cbiAgY2xvY2tSYXRlID0gMDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogaW50MzIgY2hhbm5lbHMgPSA1O1xuICAgKi9cbiAgY2hhbm5lbHMgPSAwO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBtYXA8c3RyaW5nLCBzdHJpbmc+IHBhcmFtZXRlcnMgPSA2O1xuICAgKi9cbiAgcGFyYW1ldGVycyA9IHt9O1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXBlYXRlZCBQcm90b1J0cENvZGVjQ2FwYWJpbGl0eS5Qcm90b1J0Y3BGZWVkYmFjayBydGNwRmVlZGJhY2sgPSA3O1xuICAgKi9cbiAgcnRjcEZlZWRiYWNrID0gW107XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMy51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8zO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIlByb3RvUnRwQ29kZWNDYXBhYmlsaXR5XCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzMudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHtcbiAgICAgIG5vOiAxLFxuICAgICAgbmFtZTogXCJraW5kXCIsXG4gICAgICBraW5kOiBcInNjYWxhclwiLFxuICAgICAgVDogOVxuICAgICAgLyogU2NhbGFyVHlwZS5TVFJJTkcgKi9cbiAgICB9LFxuICAgIHtcbiAgICAgIG5vOiAyLFxuICAgICAgbmFtZTogXCJtaW1lVHlwZVwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDlcbiAgICAgIC8qIFNjYWxhclR5cGUuU1RSSU5HICovXG4gICAgfSxcbiAgICB7XG4gICAgICBubzogMyxcbiAgICAgIG5hbWU6IFwicHJlZmVycmVkUGF5bG9hZFR5cGVcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA1XG4gICAgICAvKiBTY2FsYXJUeXBlLklOVDMyICovXG4gICAgfSxcbiAgICB7XG4gICAgICBubzogNCxcbiAgICAgIG5hbWU6IFwiY2xvY2tSYXRlXCIsXG4gICAgICBraW5kOiBcInNjYWxhclwiLFxuICAgICAgVDogNVxuICAgICAgLyogU2NhbGFyVHlwZS5JTlQzMiAqL1xuICAgIH0sXG4gICAge1xuICAgICAgbm86IDUsXG4gICAgICBuYW1lOiBcImNoYW5uZWxzXCIsXG4gICAgICBraW5kOiBcInNjYWxhclwiLFxuICAgICAgVDogNVxuICAgICAgLyogU2NhbGFyVHlwZS5JTlQzMiAqL1xuICAgIH0sXG4gICAgeyBubzogNiwgbmFtZTogXCJwYXJhbWV0ZXJzXCIsIGtpbmQ6IFwibWFwXCIsIEs6IDksIFY6IHtcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA5XG4gICAgICAvKiBTY2FsYXJUeXBlLlNUUklORyAqL1xuICAgIH0gfSxcbiAgICB7IG5vOiA3LCBuYW1lOiBcInJ0Y3BGZWVkYmFja1wiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogUHJvdG9SdHBDb2RlY0NhcGFiaWxpdHlfUHJvdG9SdGNwRmVlZGJhY2ssIHJlcGVhdGVkOiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvdG9SdHBDb2RlY0NhcGFiaWxpdHkoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvdG9SdHBDb2RlY0NhcGFiaWxpdHkoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvdG9SdHBDb2RlY0NhcGFiaWxpdHkoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8zLnV0aWwuZXF1YWxzKF9Qcm90b1J0cENvZGVjQ2FwYWJpbGl0eSwgYSwgYik7XG4gIH1cbn07XG52YXIgUHJvdG9SdHBDb2RlY0NhcGFiaWxpdHlfUHJvdG9SdGNwRmVlZGJhY2sgPSBjbGFzcyBfUHJvdG9SdHBDb2RlY0NhcGFiaWxpdHlfUHJvdG9SdGNwRmVlZGJhY2sgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogc3RyaW5nIHR5cGUgPSAxO1xuICAgKi9cbiAgdHlwZSA9IFwiXCI7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHN0cmluZyBwYXJhbWV0ZXIgPSAyO1xuICAgKi9cbiAgcGFyYW1ldGVyID0gXCJcIjtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8zLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzM7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiUHJvdG9SdHBDb2RlY0NhcGFiaWxpdHkuUHJvdG9SdGNwRmVlZGJhY2tcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMy51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAge1xuICAgICAgbm86IDEsXG4gICAgICBuYW1lOiBcInR5cGVcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA5XG4gICAgICAvKiBTY2FsYXJUeXBlLlNUUklORyAqL1xuICAgIH0sXG4gICAge1xuICAgICAgbm86IDIsXG4gICAgICBuYW1lOiBcInBhcmFtZXRlclwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDlcbiAgICAgIC8qIFNjYWxhclR5cGUuU1RSSU5HICovXG4gICAgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b1J0cENvZGVjQ2FwYWJpbGl0eV9Qcm90b1J0Y3BGZWVkYmFjaygpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b1J0cENvZGVjQ2FwYWJpbGl0eV9Qcm90b1J0Y3BGZWVkYmFjaygpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b1J0cENvZGVjQ2FwYWJpbGl0eV9Qcm90b1J0Y3BGZWVkYmFjaygpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzMudXRpbC5lcXVhbHMoX1Byb3RvUnRwQ29kZWNDYXBhYmlsaXR5X1Byb3RvUnRjcEZlZWRiYWNrLCBhLCBiKTtcbiAgfVxufTtcbnZhciBQcm90b1J0cEhlYWRlckV4dGVuc2lvbiA9IGNsYXNzIF9Qcm90b1J0cEhlYWRlckV4dGVuc2lvbiBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBzdHJpbmcga2luZCA9IDE7XG4gICAqL1xuICBraW5kID0gXCJcIjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogc3RyaW5nIHVyaSA9IDI7XG4gICAqL1xuICB1cmkgPSBcIlwiO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBpbnQzMiBwcmVmZXJyZWRJZCA9IDM7XG4gICAqL1xuICBwcmVmZXJyZWRJZCA9IDA7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IGJvb2wgcHJlZmVycmVkRW5jcnlwdCA9IDQ7XG4gICAqL1xuICBwcmVmZXJyZWRFbmNyeXB0ID0gZmFsc2U7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHN0cmluZyBkaXJlY3Rpb24gPSA1O1xuICAgKi9cbiAgZGlyZWN0aW9uID0gXCJcIjtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8zLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzM7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiUHJvdG9SdHBIZWFkZXJFeHRlbnNpb25cIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMy51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAge1xuICAgICAgbm86IDEsXG4gICAgICBuYW1lOiBcImtpbmRcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA5XG4gICAgICAvKiBTY2FsYXJUeXBlLlNUUklORyAqL1xuICAgIH0sXG4gICAge1xuICAgICAgbm86IDIsXG4gICAgICBuYW1lOiBcInVyaVwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDlcbiAgICAgIC8qIFNjYWxhclR5cGUuU1RSSU5HICovXG4gICAgfSxcbiAgICB7XG4gICAgICBubzogMyxcbiAgICAgIG5hbWU6IFwicHJlZmVycmVkSWRcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA1XG4gICAgICAvKiBTY2FsYXJUeXBlLklOVDMyICovXG4gICAgfSxcbiAgICB7XG4gICAgICBubzogNCxcbiAgICAgIG5hbWU6IFwicHJlZmVycmVkRW5jcnlwdFwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDhcbiAgICAgIC8qIFNjYWxhclR5cGUuQk9PTCAqL1xuICAgIH0sXG4gICAge1xuICAgICAgbm86IDUsXG4gICAgICBuYW1lOiBcImRpcmVjdGlvblwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDlcbiAgICAgIC8qIFNjYWxhclR5cGUuU1RSSU5HICovXG4gICAgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b1J0cEhlYWRlckV4dGVuc2lvbigpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b1J0cEhlYWRlckV4dGVuc2lvbigpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b1J0cEhlYWRlckV4dGVuc2lvbigpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzMudXRpbC5lcXVhbHMoX1Byb3RvUnRwSGVhZGVyRXh0ZW5zaW9uLCBhLCBiKTtcbiAgfVxufTtcbnZhciBQcm90b1J0cENhcGFiaWxpdGllcyA9IGNsYXNzIF9Qcm90b1J0cENhcGFiaWxpdGllcyBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXBlYXRlZCBQcm90b1J0cENvZGVjQ2FwYWJpbGl0eSBjb2RlY3MgPSAxO1xuICAgKi9cbiAgY29kZWNzID0gW107XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcGVhdGVkIFByb3RvUnRwSGVhZGVyRXh0ZW5zaW9uIGhlYWRlckV4dGVuc2lvbnMgPSAyO1xuICAgKi9cbiAgaGVhZGVyRXh0ZW5zaW9ucyA9IFtdO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzMudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMztcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJQcm90b1J0cENhcGFiaWxpdGllc1wiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8zLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcImNvZGVjc1wiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogUHJvdG9SdHBDb2RlY0NhcGFiaWxpdHksIHJlcGVhdGVkOiB0cnVlIH0sXG4gICAgeyBubzogMiwgbmFtZTogXCJoZWFkZXJFeHRlbnNpb25zXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBQcm90b1J0cEhlYWRlckV4dGVuc2lvbiwgcmVwZWF0ZWQ6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b1J0cENhcGFiaWxpdGllcygpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b1J0cENhcGFiaWxpdGllcygpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b1J0cENhcGFiaWxpdGllcygpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzMudXRpbC5lcXVhbHMoX1Byb3RvUnRwQ2FwYWJpbGl0aWVzLCBhLCBiKTtcbiAgfVxufTtcblxuLy8gLi4vcHJvdG9jL2Rpc3QvY2xpZW50L3Jlc3BvbnNlX3BiLmpzXG52YXIgSGVsbG8gPSBjbGFzcyBfSGVsbG8gZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIHBlZXJJZCA9IDE7XG4gICAqL1xuICBwZWVySWQ7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyByb29tSWQgPSAyO1xuICAgKi9cbiAgcm9vbUlkO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgc2Vzc2lvbklkID0gMztcbiAgICovXG4gIHNlc3Npb25JZDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgUGVybWlzc2lvbnMgYWNsID0gNDtcbiAgICovXG4gIGFjbDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogb3B0aW9uYWwgc3RyaW5nIHJvbGUgPSA1O1xuICAgKi9cbiAgcm9sZTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogb3B0aW9uYWwgc3RyaW5nIG1ldGFkYXRhID0gNjtcbiAgICovXG4gIG1ldGFkYXRhO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJIZWxsb1wiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcInBlZXJJZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAyLCBuYW1lOiBcInJvb21JZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAzLCBuYW1lOiBcInNlc3Npb25JZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiA0LCBuYW1lOiBcImFjbFwiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogUGVybWlzc2lvbnMsIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDUsIG5hbWU6IFwicm9sZVwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCBvcHQ6IHRydWUgfSxcbiAgICB7IG5vOiA2LCBuYW1lOiBcIm1ldGFkYXRhXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIG9wdDogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0hlbGxvKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0hlbGxvKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0hlbGxvKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfSGVsbG8sIGEsIGIpO1xuICB9XG59O1xudmFyIFJvb21Db250cm9scyA9IGNsYXNzIF9Sb29tQ29udHJvbHMgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgYm9vbCByb29tTG9ja2VkID0gMTtcbiAgICovXG4gIHJvb21Mb2NrZWQ7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIGJvb2wgYWxsb3dQcm9kdWNlID0gMjtcbiAgICovXG4gIGFsbG93UHJvZHVjZTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgUm9vbUNvbnRyb2xzLlByb2R1Y2VTb3VyY2VzIGFsbG93UHJvZHVjZVNvdXJjZXMgPSAzO1xuICAgKi9cbiAgYWxsb3dQcm9kdWNlU291cmNlcztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgYm9vbCBhbGxvd0NvbnN1bWUgPSA0O1xuICAgKi9cbiAgYWxsb3dDb25zdW1lO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBib29sIGFsbG93U2VuZERhdGEgPSA1O1xuICAgKi9cbiAgYWxsb3dTZW5kRGF0YTtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiUm9vbUNvbnRyb2xzXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwicm9vbUxvY2tlZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA4LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAyLCBuYW1lOiBcImFsbG93UHJvZHVjZVwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA4LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAzLCBuYW1lOiBcImFsbG93UHJvZHVjZVNvdXJjZXNcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFJvb21Db250cm9sc19Qcm9kdWNlU291cmNlcywgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogNCwgbmFtZTogXCJhbGxvd0NvbnN1bWVcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOCwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogNSwgbmFtZTogXCJhbGxvd1NlbmREYXRhXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDgsIHJlcTogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Jvb21Db250cm9scygpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Sb29tQ29udHJvbHMoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUm9vbUNvbnRyb2xzKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfUm9vbUNvbnRyb2xzLCBhLCBiKTtcbiAgfVxufTtcbnZhciBSb29tQ29udHJvbHNfUHJvZHVjZVNvdXJjZXMgPSBjbGFzcyBfUm9vbUNvbnRyb2xzX1Byb2R1Y2VTb3VyY2VzIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIGJvb2wgY2FtID0gMTtcbiAgICovXG4gIGNhbTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgYm9vbCBtaWMgPSAyO1xuICAgKi9cbiAgbWljO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBib29sIHNjcmVlbiA9IDM7XG4gICAqL1xuICBzY3JlZW47XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIlJvb21Db250cm9scy5Qcm9kdWNlU291cmNlc1wiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcImNhbVwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA4LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAyLCBuYW1lOiBcIm1pY1wiLCBraW5kOiBcInNjYWxhclwiLCBUOiA4LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAzLCBuYW1lOiBcInNjcmVlblwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA4LCByZXE6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Sb29tQ29udHJvbHNfUHJvZHVjZVNvdXJjZXMoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUm9vbUNvbnRyb2xzX1Byb2R1Y2VTb3VyY2VzKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Jvb21Db250cm9sc19Qcm9kdWNlU291cmNlcygpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX1Jvb21Db250cm9sc19Qcm9kdWNlU291cmNlcywgYSwgYik7XG4gIH1cbn07XG52YXIgUGVlcnNJbmZvID0gY2xhc3MgX1BlZXJzSW5mbyBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgcGVlcklkID0gMTtcbiAgICovXG4gIHBlZXJJZDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogb3B0aW9uYWwgc3RyaW5nIG1ldGFkYXRhID0gMztcbiAgICovXG4gIG1ldGFkYXRhO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBvcHRpb25hbCBzdHJpbmcgcm9sZSA9IDU7XG4gICAqL1xuICByb2xlO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXBlYXRlZCBQZWVyc0luZm8uUHJvZHVjZXJJbmZvIHByb2R1Y2VycyA9IDQ7XG4gICAqL1xuICBwcm9kdWNlcnMgPSBbXTtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiUGVlcnNJbmZvXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwicGVlcklkXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDMsIG5hbWU6IFwibWV0YWRhdGFcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgb3B0OiB0cnVlIH0sXG4gICAgeyBubzogNSwgbmFtZTogXCJyb2xlXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIG9wdDogdHJ1ZSB9LFxuICAgIHsgbm86IDQsIG5hbWU6IFwicHJvZHVjZXJzXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBQZWVyc0luZm9fUHJvZHVjZXJJbmZvLCByZXBlYXRlZDogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1BlZXJzSW5mbygpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9QZWVyc0luZm8oKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUGVlcnNJbmZvKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfUGVlcnNJbmZvLCBhLCBiKTtcbiAgfVxufTtcbnZhciBQZWVyc0luZm9fUHJvZHVjZXJJbmZvID0gY2xhc3MgX1BlZXJzSW5mb19Qcm9kdWNlckluZm8gZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIGlkID0gMTtcbiAgICovXG4gIGlkO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgbGFiZWwgPSAyO1xuICAgKi9cbiAgbGFiZWw7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IG9wdGlvbmFsIGJvb2wgcGF1c2VkID0gMztcbiAgICovXG4gIHBhdXNlZDtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiUGVlcnNJbmZvLlByb2R1Y2VySW5mb1wiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcImlkXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDIsIG5hbWU6IFwibGFiZWxcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogMywgbmFtZTogXCJwYXVzZWRcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOCwgb3B0OiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUGVlcnNJbmZvX1Byb2R1Y2VySW5mbygpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9QZWVyc0luZm9fUHJvZHVjZXJJbmZvKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1BlZXJzSW5mb19Qcm9kdWNlckluZm8oKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9QZWVyc0luZm9fUHJvZHVjZXJJbmZvLCBhLCBiKTtcbiAgfVxufTtcbnZhciBSb29tSW5mbyA9IGNsYXNzIF9Sb29tSW5mbyBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBib29sIHJvb21Mb2NrZWQgPSAxO1xuICAgKi9cbiAgcm9vbUxvY2tlZDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgUm9vbUNvbnRyb2xzIGNvbmZpZyA9IDI7XG4gICAqL1xuICBjb25maWc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcGVhdGVkIFBlZXJzSW5mbyBwZWVycyA9IDM7XG4gICAqL1xuICBwZWVycyA9IFtdO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXBlYXRlZCBMb2JieVBlZXJzIGxvYmJ5UGVlcnMgPSA0O1xuICAgKi9cbiAgbG9iYnlQZWVycyA9IFtdO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBvcHRpb25hbCBzdHJpbmcgbWV0YWRhdGEgPSA1O1xuICAgKi9cbiAgbWV0YWRhdGE7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIGludDY0IHN0YXJ0VGltZSA9IDY7XG4gICAqL1xuICBzdGFydFRpbWU7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIlJvb21JbmZvXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwicm9vbUxvY2tlZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA4LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAyLCBuYW1lOiBcImNvbmZpZ1wiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogUm9vbUNvbnRyb2xzLCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAzLCBuYW1lOiBcInBlZXJzXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBQZWVyc0luZm8sIHJlcGVhdGVkOiB0cnVlIH0sXG4gICAgeyBubzogNCwgbmFtZTogXCJsb2JieVBlZXJzXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBMb2JieVBlZXJzLCByZXBlYXRlZDogdHJ1ZSB9LFxuICAgIHsgbm86IDUsIG5hbWU6IFwibWV0YWRhdGFcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgb3B0OiB0cnVlIH0sXG4gICAgeyBubzogNiwgbmFtZTogXCJzdGFydFRpbWVcIiwga2luZDogXCJzY2FsYXJcIiwgVDogMywgcmVxOiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUm9vbUluZm8oKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUm9vbUluZm8oKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUm9vbUluZm8oKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9Sb29tSW5mbywgYSwgYik7XG4gIH1cbn07XG52YXIgTG9iYnlQZWVycyA9IGNsYXNzIF9Mb2JieVBlZXJzIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBwZWVySWQgPSAxO1xuICAgKi9cbiAgcGVlcklkO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBvcHRpb25hbCBzdHJpbmcgbWV0YWRhdGEgPSAzO1xuICAgKi9cbiAgbWV0YWRhdGE7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIkxvYmJ5UGVlcnNcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMi51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAgeyBubzogMSwgbmFtZTogXCJwZWVySWRcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogMywgbmFtZTogXCJtZXRhZGF0YVwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCBvcHQ6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Mb2JieVBlZXJzKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0xvYmJ5UGVlcnMoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfTG9iYnlQZWVycygpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX0xvYmJ5UGVlcnMsIGEsIGIpO1xuICB9XG59O1xudmFyIENvbm5lY3RSb29tUmVzcG9uc2UgPSBjbGFzcyBfQ29ubmVjdFJvb21SZXNwb25zZSBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgcm9vbUlkID0gMTtcbiAgICovXG4gIHJvb21JZDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgUm9vbUluZm8gcm9vbUluZm8gPSAyO1xuICAgKi9cbiAgcm9vbUluZm87XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIFByb3RvUnRwQ2FwYWJpbGl0aWVzIHJvdXRlclJUUENhcGFiaWxpdGllcyA9IDM7XG4gICAqL1xuICByb3V0ZXJSVFBDYXBhYmlsaXRpZXM7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcGVhdGVkIENvbm5lY3RSb29tUmVzcG9uc2UuUlRDSWNlU2VydmVyIHR1cm5TZXJ2ZXJzID0gNDtcbiAgICovXG4gIHR1cm5TZXJ2ZXJzID0gW107XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIkNvbm5lY3RSb29tUmVzcG9uc2VcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMi51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAgeyBubzogMSwgbmFtZTogXCJyb29tSWRcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogMiwgbmFtZTogXCJyb29tSW5mb1wiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogUm9vbUluZm8sIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDMsIG5hbWU6IFwicm91dGVyUlRQQ2FwYWJpbGl0aWVzXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBQcm90b1J0cENhcGFiaWxpdGllcywgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogNCwgbmFtZTogXCJ0dXJuU2VydmVyc1wiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogQ29ubmVjdFJvb21SZXNwb25zZV9SVENJY2VTZXJ2ZXIsIHJlcGVhdGVkOiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfQ29ubmVjdFJvb21SZXNwb25zZSgpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Db25uZWN0Um9vbVJlc3BvbnNlKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0Nvbm5lY3RSb29tUmVzcG9uc2UoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9Db25uZWN0Um9vbVJlc3BvbnNlLCBhLCBiKTtcbiAgfVxufTtcbnZhciBDb25uZWN0Um9vbVJlc3BvbnNlX1JUQ0ljZVNlcnZlciA9IGNsYXNzIF9Db25uZWN0Um9vbVJlc3BvbnNlX1JUQ0ljZVNlcnZlciBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgdXJscyA9IDE7XG4gICAqL1xuICB1cmxzO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBvcHRpb25hbCBzdHJpbmcgdXNlcm5hbWUgPSAyO1xuICAgKi9cbiAgdXNlcm5hbWU7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IG9wdGlvbmFsIHN0cmluZyBjcmVkZW50aWFsID0gMztcbiAgICovXG4gIGNyZWRlbnRpYWw7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIkNvbm5lY3RSb29tUmVzcG9uc2UuUlRDSWNlU2VydmVyXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwidXJsc1wiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAyLCBuYW1lOiBcInVzZXJuYW1lXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIG9wdDogdHJ1ZSB9LFxuICAgIHsgbm86IDMsIG5hbWU6IFwiY3JlZGVudGlhbFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCBvcHQ6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Db25uZWN0Um9vbVJlc3BvbnNlX1JUQ0ljZVNlcnZlcigpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Db25uZWN0Um9vbVJlc3BvbnNlX1JUQ0ljZVNlcnZlcigpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Db25uZWN0Um9vbVJlc3BvbnNlX1JUQ0ljZVNlcnZlcigpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX0Nvbm5lY3RSb29tUmVzcG9uc2VfUlRDSWNlU2VydmVyLCBhLCBiKTtcbiAgfVxufTtcbnZhciBDcmVhdGVUcmFuc3BvcnRPbkNsaWVudCA9IGNsYXNzIF9DcmVhdGVUcmFuc3BvcnRPbkNsaWVudCBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgdHJhbnNwb3J0VHlwZSA9IDE7XG4gICAqL1xuICB0cmFuc3BvcnRUeXBlO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBQcm90b1RyYW5zcG9ydFNEUEluZm8gdHJhbnNwb3J0U0RQSW5mbyA9IDI7XG4gICAqL1xuICB0cmFuc3BvcnRTRFBJbmZvO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJDcmVhdGVUcmFuc3BvcnRPbkNsaWVudFwiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcInRyYW5zcG9ydFR5cGVcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogMiwgbmFtZTogXCJ0cmFuc3BvcnRTRFBJbmZvXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBQcm90b1RyYW5zcG9ydFNEUEluZm8sIHJlcTogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0NyZWF0ZVRyYW5zcG9ydE9uQ2xpZW50KCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0NyZWF0ZVRyYW5zcG9ydE9uQ2xpZW50KCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0NyZWF0ZVRyYW5zcG9ydE9uQ2xpZW50KCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfQ3JlYXRlVHJhbnNwb3J0T25DbGllbnQsIGEsIGIpO1xuICB9XG59O1xudmFyIENvbm5lY3RUcmFuc3BvcnRSZXNwb25zZSA9IGNsYXNzIF9Db25uZWN0VHJhbnNwb3J0UmVzcG9uc2UgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIHRyYW5zcG9ydFR5cGUgPSAxO1xuICAgKi9cbiAgdHJhbnNwb3J0VHlwZTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIHRyYW5zcG9ydElkID0gMjtcbiAgICovXG4gIHRyYW5zcG9ydElkO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJDb25uZWN0VHJhbnNwb3J0UmVzcG9uc2VcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMi51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAgeyBubzogMSwgbmFtZTogXCJ0cmFuc3BvcnRUeXBlXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDIsIG5hbWU6IFwidHJhbnNwb3J0SWRcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfQ29ubmVjdFRyYW5zcG9ydFJlc3BvbnNlKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0Nvbm5lY3RUcmFuc3BvcnRSZXNwb25zZSgpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Db25uZWN0VHJhbnNwb3J0UmVzcG9uc2UoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9Db25uZWN0VHJhbnNwb3J0UmVzcG9uc2UsIGEsIGIpO1xuICB9XG59O1xudmFyIFByb2R1Y2VSZXNwb25zZSA9IGNsYXNzIF9Qcm9kdWNlUmVzcG9uc2UgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIHBlZXJJZCA9IDE7XG4gICAqL1xuICBwZWVySWQ7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBwcm9kdWNlcklkID0gMjtcbiAgICovXG4gIHByb2R1Y2VySWQ7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBsYWJlbCA9IDM7XG4gICAqL1xuICBsYWJlbDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogb3B0aW9uYWwgQXBwRGF0YSBhcHBEYXRhID0gNDtcbiAgICovXG4gIGFwcERhdGE7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIlByb2R1Y2VSZXNwb25zZVwiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcInBlZXJJZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAyLCBuYW1lOiBcInByb2R1Y2VySWRcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogMywgbmFtZTogXCJsYWJlbFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiA0LCBuYW1lOiBcImFwcERhdGFcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IEFwcERhdGEsIG9wdDogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb2R1Y2VSZXNwb25zZSgpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm9kdWNlUmVzcG9uc2UoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvZHVjZVJlc3BvbnNlKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfUHJvZHVjZVJlc3BvbnNlLCBhLCBiKTtcbiAgfVxufTtcbnZhciBQcm9kdWNlRGF0YVJlc3BvbnNlID0gY2xhc3MgX1Byb2R1Y2VEYXRhUmVzcG9uc2UgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIGlkID0gMTtcbiAgICovXG4gIGlkO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgZGF0YVByb2R1Y2VySWQgPSAyO1xuICAgKi9cbiAgZGF0YVByb2R1Y2VySWQ7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBsYWJlbCA9IDM7XG4gICAqL1xuICBsYWJlbDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIHBlZXJJZCA9IDQ7XG4gICAqL1xuICBwZWVySWQ7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBwcm90b2NvbCA9IDU7XG4gICAqL1xuICBwcm90b2NvbDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgUHJvdG9TY3RwU3RyZWFtUGFyYW1ldGVycyBzY3RwU3RyZWFtUGFyYW1ldGVycyA9IDY7XG4gICAqL1xuICBzY3RwU3RyZWFtUGFyYW1ldGVycztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogb3B0aW9uYWwgQXBwRGF0YSBhcHBEYXRhID0gNztcbiAgICovXG4gIGFwcERhdGE7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIlByb2R1Y2VEYXRhUmVzcG9uc2VcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMi51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAgeyBubzogMSwgbmFtZTogXCJpZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAyLCBuYW1lOiBcImRhdGFQcm9kdWNlcklkXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDMsIG5hbWU6IFwibGFiZWxcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogNCwgbmFtZTogXCJwZWVySWRcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogNSwgbmFtZTogXCJwcm90b2NvbFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiA2LCBuYW1lOiBcInNjdHBTdHJlYW1QYXJhbWV0ZXJzXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBQcm90b1NjdHBTdHJlYW1QYXJhbWV0ZXJzLCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiA3LCBuYW1lOiBcImFwcERhdGFcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IEFwcERhdGEsIG9wdDogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb2R1Y2VEYXRhUmVzcG9uc2UoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvZHVjZURhdGFSZXNwb25zZSgpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm9kdWNlRGF0YVJlc3BvbnNlKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfUHJvZHVjZURhdGFSZXNwb25zZSwgYSwgYik7XG4gIH1cbn07XG52YXIgQ29uc3VtZURhdGFSZXNwb25zZSA9IGNsYXNzIF9Db25zdW1lRGF0YVJlc3BvbnNlIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBpZCA9IDE7XG4gICAqL1xuICBpZDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIGRhdGFQcm9kdWNlcklkID0gMjtcbiAgICovXG4gIGRhdGFQcm9kdWNlcklkO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgbGFiZWwgPSAzO1xuICAgKi9cbiAgbGFiZWw7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBwZWVySWQgPSA0O1xuICAgKi9cbiAgcGVlcklkO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgcHJvdG9jb2wgPSA1O1xuICAgKi9cbiAgcHJvdG9jb2w7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIFByb3RvU2N0cFN0cmVhbVBhcmFtZXRlcnMgc2N0cFN0cmVhbVBhcmFtZXRlcnMgPSA2O1xuICAgKi9cbiAgc2N0cFN0cmVhbVBhcmFtZXRlcnM7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IG9wdGlvbmFsIEFwcERhdGEgYXBwRGF0YSA9IDc7XG4gICAqL1xuICBhcHBEYXRhO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJDb25zdW1lRGF0YVJlc3BvbnNlXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwiaWRcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogMiwgbmFtZTogXCJkYXRhUHJvZHVjZXJJZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAzLCBuYW1lOiBcImxhYmVsXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDQsIG5hbWU6IFwicGVlcklkXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDUsIG5hbWU6IFwicHJvdG9jb2xcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogNiwgbmFtZTogXCJzY3RwU3RyZWFtUGFyYW1ldGVyc1wiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogUHJvdG9TY3RwU3RyZWFtUGFyYW1ldGVycywgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogNywgbmFtZTogXCJhcHBEYXRhXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBBcHBEYXRhLCBvcHQ6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Db25zdW1lRGF0YVJlc3BvbnNlKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0NvbnN1bWVEYXRhUmVzcG9uc2UoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfQ29uc3VtZURhdGFSZXNwb25zZSgpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX0NvbnN1bWVEYXRhUmVzcG9uc2UsIGEsIGIpO1xuICB9XG59O1xudmFyIFN5bmNNZWV0aW5nU3RhdGVSZXNwb25zZSA9IGNsYXNzIF9TeW5jTWVldGluZ1N0YXRlUmVzcG9uc2UgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgUm9vbUluZm8gcm9vbUluZm8gPSAxO1xuICAgKi9cbiAgcm9vbUluZm87XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIlN5bmNNZWV0aW5nU3RhdGVSZXNwb25zZVwiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcInJvb21JbmZvXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBSb29tSW5mbywgcmVxOiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfU3luY01lZXRpbmdTdGF0ZVJlc3BvbnNlKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1N5bmNNZWV0aW5nU3RhdGVSZXNwb25zZSgpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9TeW5jTWVldGluZ1N0YXRlUmVzcG9uc2UoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9TeW5jTWVldGluZ1N0YXRlUmVzcG9uc2UsIGEsIGIpO1xuICB9XG59O1xudmFyIENvbnN1bWVSZXNwb25zZSA9IGNsYXNzIF9Db25zdW1lUmVzcG9uc2UgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIGxhYmVsID0gMTtcbiAgICovXG4gIGxhYmVsO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgY29uc3VtZXJJZCA9IDI7XG4gICAqL1xuICBjb25zdW1lcklkO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgcHJvZHVjZXJJZCA9IDM7XG4gICAqL1xuICBwcm9kdWNlcklkO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcga2luZCA9IDQ7XG4gICAqL1xuICBraW5kO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBQcm90b1J0cFBhcmFtZXRlcnMgcnRwUGFyYW1ldGVycyA9IDU7XG4gICAqL1xuICBydHBQYXJhbWV0ZXJzO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgcHJvZHVjZXJQZWVySWQgPSA2O1xuICAgKi9cbiAgcHJvZHVjZXJQZWVySWQ7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IG9wdGlvbmFsIEFwcERhdGEgYXBwRGF0YSA9IDc7XG4gICAqL1xuICBhcHBEYXRhO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBvcHRpb25hbCBib29sIHByb2R1Y2VyUGF1c2VkID0gODtcbiAgICovXG4gIHByb2R1Y2VyUGF1c2VkO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJDb25zdW1lUmVzcG9uc2VcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMi51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAgeyBubzogMSwgbmFtZTogXCJsYWJlbFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAyLCBuYW1lOiBcImNvbnN1bWVySWRcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogMywgbmFtZTogXCJwcm9kdWNlcklkXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDQsIG5hbWU6IFwia2luZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiA1LCBuYW1lOiBcInJ0cFBhcmFtZXRlcnNcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFByb3RvUnRwUGFyYW1ldGVycywgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogNiwgbmFtZTogXCJwcm9kdWNlclBlZXJJZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiA3LCBuYW1lOiBcImFwcERhdGFcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IEFwcERhdGEsIG9wdDogdHJ1ZSB9LFxuICAgIHsgbm86IDgsIG5hbWU6IFwicHJvZHVjZXJQYXVzZWRcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOCwgb3B0OiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfQ29uc3VtZVJlc3BvbnNlKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0NvbnN1bWVSZXNwb25zZSgpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Db25zdW1lUmVzcG9uc2UoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9Db25zdW1lUmVzcG9uc2UsIGEsIGIpO1xuICB9XG59O1xudmFyIENsb3NlUHJvZHVjZXJTdWNjZXNzID0gY2xhc3MgX0Nsb3NlUHJvZHVjZXJTdWNjZXNzIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBwZWVySWQgPSAxO1xuICAgKi9cbiAgcGVlcklkO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgcHJvZHVjZXJJZCA9IDI7XG4gICAqL1xuICBwcm9kdWNlcklkO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgbGFiZWwgPSAzO1xuICAgKi9cbiAgbGFiZWw7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIkNsb3NlUHJvZHVjZXJTdWNjZXNzXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwicGVlcklkXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDIsIG5hbWU6IFwicHJvZHVjZXJJZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAzLCBuYW1lOiBcImxhYmVsXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0Nsb3NlUHJvZHVjZXJTdWNjZXNzKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0Nsb3NlUHJvZHVjZXJTdWNjZXNzKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0Nsb3NlUHJvZHVjZXJTdWNjZXNzKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfQ2xvc2VQcm9kdWNlclN1Y2Nlc3MsIGEsIGIpO1xuICB9XG59O1xudmFyIFBhdXNlUHJvZHVjZXJTdWNjZXNzID0gY2xhc3MgX1BhdXNlUHJvZHVjZXJTdWNjZXNzIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBwZWVySWQgPSAxO1xuICAgKi9cbiAgcGVlcklkO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgcHJvZHVjZXJJZCA9IDI7XG4gICAqL1xuICBwcm9kdWNlcklkO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgbGFiZWwgPSAzO1xuICAgKi9cbiAgbGFiZWw7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIlBhdXNlUHJvZHVjZXJTdWNjZXNzXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwicGVlcklkXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDIsIG5hbWU6IFwicHJvZHVjZXJJZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAzLCBuYW1lOiBcImxhYmVsXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1BhdXNlUHJvZHVjZXJTdWNjZXNzKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1BhdXNlUHJvZHVjZXJTdWNjZXNzKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1BhdXNlUHJvZHVjZXJTdWNjZXNzKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfUGF1c2VQcm9kdWNlclN1Y2Nlc3MsIGEsIGIpO1xuICB9XG59O1xudmFyIFJlc3VtZVByb2R1Y2VyU3VjY2VzcyA9IGNsYXNzIF9SZXN1bWVQcm9kdWNlclN1Y2Nlc3MgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIHBlZXJJZCA9IDE7XG4gICAqL1xuICBwZWVySWQ7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBwcm9kdWNlcklkID0gMjtcbiAgICovXG4gIHByb2R1Y2VySWQ7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBsYWJlbCA9IDM7XG4gICAqL1xuICBsYWJlbDtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiUmVzdW1lUHJvZHVjZXJTdWNjZXNzXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwicGVlcklkXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDIsIG5hbWU6IFwicHJvZHVjZXJJZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAzLCBuYW1lOiBcImxhYmVsXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Jlc3VtZVByb2R1Y2VyU3VjY2VzcygpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9SZXN1bWVQcm9kdWNlclN1Y2Nlc3MoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUmVzdW1lUHJvZHVjZXJTdWNjZXNzKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfUmVzdW1lUHJvZHVjZXJTdWNjZXNzLCBhLCBiKTtcbiAgfVxufTtcbnZhciBDbG9zZUNvbnN1bWVyU3VjY2VzcyA9IGNsYXNzIF9DbG9zZUNvbnN1bWVyU3VjY2VzcyBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgcGVlcklkID0gMTtcbiAgICovXG4gIHBlZXJJZDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIGNvbnN1bWVySWQgPSAyO1xuICAgKi9cbiAgY29uc3VtZXJJZDtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiQ2xvc2VDb25zdW1lclN1Y2Nlc3NcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMi51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAgeyBubzogMSwgbmFtZTogXCJwZWVySWRcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogMiwgbmFtZTogXCJjb25zdW1lcklkXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0Nsb3NlQ29uc3VtZXJTdWNjZXNzKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0Nsb3NlQ29uc3VtZXJTdWNjZXNzKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0Nsb3NlQ29uc3VtZXJTdWNjZXNzKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfQ2xvc2VDb25zdW1lclN1Y2Nlc3MsIGEsIGIpO1xuICB9XG59O1xudmFyIFJlc3RhcnRUcmFuc3BvcnRJY2VSZXNwb25zZSA9IGNsYXNzIF9SZXN0YXJ0VHJhbnNwb3J0SWNlUmVzcG9uc2UgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIHRyYW5zcG9ydFR5cGUgPSAxO1xuICAgKi9cbiAgdHJhbnNwb3J0VHlwZTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgUHJvdG9JY2VQYXJhbWV0ZXJzIGljZVBhcmFtZXRlcnMgPSAyO1xuICAgKi9cbiAgaWNlUGFyYW1ldGVycztcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiUmVzdGFydFRyYW5zcG9ydEljZVJlc3BvbnNlXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwidHJhbnNwb3J0VHlwZVwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAyLCBuYW1lOiBcImljZVBhcmFtZXRlcnNcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFByb3RvSWNlUGFyYW1ldGVycywgcmVxOiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUmVzdGFydFRyYW5zcG9ydEljZVJlc3BvbnNlKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Jlc3RhcnRUcmFuc3BvcnRJY2VSZXNwb25zZSgpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9SZXN0YXJ0VHJhbnNwb3J0SWNlUmVzcG9uc2UoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9SZXN0YXJ0VHJhbnNwb3J0SWNlUmVzcG9uc2UsIGEsIGIpO1xuICB9XG59O1xudmFyIE5ld1BlZXJKb2luZWQgPSBjbGFzcyBfTmV3UGVlckpvaW5lZCBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgcGVlcklkID0gMTtcbiAgICovXG4gIHBlZXJJZDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogb3B0aW9uYWwgc3RyaW5nIG1ldGFkYXRhID0gMjtcbiAgICovXG4gIG1ldGFkYXRhO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBvcHRpb25hbCBzdHJpbmcgcm9sZSA9IDM7XG4gICAqL1xuICByb2xlO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJOZXdQZWVySm9pbmVkXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwicGVlcklkXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDIsIG5hbWU6IFwibWV0YWRhdGFcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgb3B0OiB0cnVlIH0sXG4gICAgeyBubzogMywgbmFtZTogXCJyb2xlXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIG9wdDogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX05ld1BlZXJKb2luZWQoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfTmV3UGVlckpvaW5lZCgpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9OZXdQZWVySm9pbmVkKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfTmV3UGVlckpvaW5lZCwgYSwgYik7XG4gIH1cbn07XG52YXIgTmV3TG9iYnlQZWVyID0gY2xhc3MgX05ld0xvYmJ5UGVlciBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgcGVlcklkID0gMTtcbiAgICovXG4gIHBlZXJJZDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogb3B0aW9uYWwgc3RyaW5nIG1ldGFkYXRhID0gMjtcbiAgICovXG4gIG1ldGFkYXRhO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJOZXdMb2JieVBlZXJcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMi51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAgeyBubzogMSwgbmFtZTogXCJwZWVySWRcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogMiwgbmFtZTogXCJtZXRhZGF0YVwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCBvcHQ6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9OZXdMb2JieVBlZXIoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfTmV3TG9iYnlQZWVyKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX05ld0xvYmJ5UGVlcigpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX05ld0xvYmJ5UGVlciwgYSwgYik7XG4gIH1cbn07XG52YXIgTmV3UGVybWlzc2lvbnMgPSBjbGFzcyBfTmV3UGVybWlzc2lvbnMgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgUGVybWlzc2lvbnMgYWNsID0gMjtcbiAgICovXG4gIGFjbDtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiTmV3UGVybWlzc2lvbnNcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMi51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAgeyBubzogMiwgbmFtZTogXCJhY2xcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFBlcm1pc3Npb25zLCByZXE6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9OZXdQZXJtaXNzaW9ucygpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9OZXdQZXJtaXNzaW9ucygpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9OZXdQZXJtaXNzaW9ucygpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX05ld1Blcm1pc3Npb25zLCBhLCBiKTtcbiAgfVxufTtcbnZhciBOZXdSb29tQ29udHJvbHMgPSBjbGFzcyBfTmV3Um9vbUNvbnRyb2xzIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIFJvb21Db250cm9scyBjb250cm9scyA9IDE7XG4gICAqL1xuICBjb250cm9scztcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiTmV3Um9vbUNvbnRyb2xzXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwiY29udHJvbHNcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFJvb21Db250cm9scywgcmVxOiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfTmV3Um9vbUNvbnRyb2xzKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX05ld1Jvb21Db250cm9scygpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9OZXdSb29tQ29udHJvbHMoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9OZXdSb29tQ29udHJvbHMsIGEsIGIpO1xuICB9XG59O1xudmFyIE5ld1BlZXJSb2xlID0gY2xhc3MgX05ld1BlZXJSb2xlIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBwZWVySWQgPSAxO1xuICAgKi9cbiAgcGVlcklkO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgcm9sZSA9IDI7XG4gICAqL1xuICByb2xlO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJOZXdQZWVyUm9sZVwiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcInBlZXJJZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAyLCBuYW1lOiBcInJvbGVcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfTmV3UGVlclJvbGUoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfTmV3UGVlclJvbGUoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfTmV3UGVlclJvbGUoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9OZXdQZWVyUm9sZSwgYSwgYik7XG4gIH1cbn07XG52YXIgUmVjZWl2ZURhdGEgPSBjbGFzcyBfUmVjZWl2ZURhdGEgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIGZyb20gPSAxO1xuICAgKi9cbiAgZnJvbTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIHBheWxvYWQgPSAyO1xuICAgKi9cbiAgcGF5bG9hZDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogb3B0aW9uYWwgc3RyaW5nIGxhYmVsID0gMztcbiAgICovXG4gIGxhYmVsO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJSZWNlaXZlRGF0YVwiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcImZyb21cIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogMiwgbmFtZTogXCJwYXlsb2FkXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDMsIG5hbWU6IFwibGFiZWxcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgb3B0OiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUmVjZWl2ZURhdGEoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUmVjZWl2ZURhdGEoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUmVjZWl2ZURhdGEoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9SZWNlaXZlRGF0YSwgYSwgYik7XG4gIH1cbn07XG52YXIgUGVlck1ldGFkYXRhVXBkYXRlZCA9IGNsYXNzIF9QZWVyTWV0YWRhdGFVcGRhdGVkIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBwZWVySWQgPSAxO1xuICAgKi9cbiAgcGVlcklkO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgbWV0YWRhdGEgPSAyO1xuICAgKi9cbiAgbWV0YWRhdGE7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIlBlZXJNZXRhZGF0YVVwZGF0ZWRcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMi51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAgeyBubzogMSwgbmFtZTogXCJwZWVySWRcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogMiwgbmFtZTogXCJtZXRhZGF0YVwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9QZWVyTWV0YWRhdGFVcGRhdGVkKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1BlZXJNZXRhZGF0YVVwZGF0ZWQoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUGVlck1ldGFkYXRhVXBkYXRlZCgpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX1BlZXJNZXRhZGF0YVVwZGF0ZWQsIGEsIGIpO1xuICB9XG59O1xudmFyIFJvb21NZXRhZGF0YVVwZGF0ZWQgPSBjbGFzcyBfUm9vbU1ldGFkYXRhVXBkYXRlZCBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgbWV0YWRhdGEgPSAxO1xuICAgKi9cbiAgbWV0YWRhdGE7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIlJvb21NZXRhZGF0YVVwZGF0ZWRcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMi51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAgeyBubzogMSwgbmFtZTogXCJtZXRhZGF0YVwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Sb29tTWV0YWRhdGFVcGRhdGVkKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Jvb21NZXRhZGF0YVVwZGF0ZWQoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUm9vbU1ldGFkYXRhVXBkYXRlZCgpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX1Jvb21NZXRhZGF0YVVwZGF0ZWQsIGEsIGIpO1xuICB9XG59O1xudmFyIFJvb21DbG9zZWRQcm9kdWNlcnMgPSBjbGFzcyBfUm9vbUNsb3NlZFByb2R1Y2VycyBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXBlYXRlZCBSb29tQ2xvc2VkUHJvZHVjZXJzLkNsb3NlUHJvZHVjZXJJbmZvIHByb2R1Y2VycyA9IDE7XG4gICAqL1xuICBwcm9kdWNlcnMgPSBbXTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgUm9vbUNsb3NlZFByb2R1Y2Vycy5DbG9zZVByb2R1Y2VyUmVhc29uIHJlYXNvbiA9IDI7XG4gICAqL1xuICByZWFzb247XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIlJvb21DbG9zZWRQcm9kdWNlcnNcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMi51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAgeyBubzogMSwgbmFtZTogXCJwcm9kdWNlcnNcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFJvb21DbG9zZWRQcm9kdWNlcnNfQ2xvc2VQcm9kdWNlckluZm8sIHJlcGVhdGVkOiB0cnVlIH0sXG4gICAgeyBubzogMiwgbmFtZTogXCJyZWFzb25cIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFJvb21DbG9zZWRQcm9kdWNlcnNfQ2xvc2VQcm9kdWNlclJlYXNvbiwgcmVxOiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUm9vbUNsb3NlZFByb2R1Y2VycygpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Sb29tQ2xvc2VkUHJvZHVjZXJzKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Jvb21DbG9zZWRQcm9kdWNlcnMoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9Sb29tQ2xvc2VkUHJvZHVjZXJzLCBhLCBiKTtcbiAgfVxufTtcbnZhciBSb29tQ2xvc2VkUHJvZHVjZXJzX0Nsb3NlUHJvZHVjZXJJbmZvID0gY2xhc3MgX1Jvb21DbG9zZWRQcm9kdWNlcnNfQ2xvc2VQcm9kdWNlckluZm8gZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIHBlZXJJZCA9IDE7XG4gICAqL1xuICBwZWVySWQ7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBwcm9kdWNlcklkID0gMjtcbiAgICovXG4gIHByb2R1Y2VySWQ7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBsYWJlbCA9IDM7XG4gICAqL1xuICBsYWJlbDtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiUm9vbUNsb3NlZFByb2R1Y2Vycy5DbG9zZVByb2R1Y2VySW5mb1wiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcInBlZXJJZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAyLCBuYW1lOiBcInByb2R1Y2VySWRcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogMywgbmFtZTogXCJsYWJlbFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Sb29tQ2xvc2VkUHJvZHVjZXJzX0Nsb3NlUHJvZHVjZXJJbmZvKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Jvb21DbG9zZWRQcm9kdWNlcnNfQ2xvc2VQcm9kdWNlckluZm8oKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUm9vbUNsb3NlZFByb2R1Y2Vyc19DbG9zZVByb2R1Y2VySW5mbygpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX1Jvb21DbG9zZWRQcm9kdWNlcnNfQ2xvc2VQcm9kdWNlckluZm8sIGEsIGIpO1xuICB9XG59O1xudmFyIFJvb21DbG9zZWRQcm9kdWNlcnNfQ2xvc2VQcm9kdWNlclJlYXNvbiA9IGNsYXNzIF9Sb29tQ2xvc2VkUHJvZHVjZXJzX0Nsb3NlUHJvZHVjZXJSZWFzb24gZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgaW50MzIgY29kZSA9IDE7XG4gICAqL1xuICBjb2RlO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgdGFnID0gMjtcbiAgICovXG4gIHRhZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIG1lc3NhZ2UgPSAzO1xuICAgKi9cbiAgbWVzc2FnZTtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiUm9vbUNsb3NlZFByb2R1Y2Vycy5DbG9zZVByb2R1Y2VyUmVhc29uXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwiY29kZVwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA1LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAyLCBuYW1lOiBcInRhZ1wiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAzLCBuYW1lOiBcIm1lc3NhZ2VcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUm9vbUNsb3NlZFByb2R1Y2Vyc19DbG9zZVByb2R1Y2VyUmVhc29uKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Jvb21DbG9zZWRQcm9kdWNlcnNfQ2xvc2VQcm9kdWNlclJlYXNvbigpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Sb29tQ2xvc2VkUHJvZHVjZXJzX0Nsb3NlUHJvZHVjZXJSZWFzb24oKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9Sb29tQ2xvc2VkUHJvZHVjZXJzX0Nsb3NlUHJvZHVjZXJSZWFzb24sIGEsIGIpO1xuICB9XG59O1xudmFyIFBlZXJMZWZ0ID0gY2xhc3MgX1BlZXJMZWZ0IGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBwZWVySWQgPSAxO1xuICAgKi9cbiAgcGVlcklkO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJQZWVyTGVmdFwiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcInBlZXJJZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9QZWVyTGVmdCgpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9QZWVyTGVmdCgpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9QZWVyTGVmdCgpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX1BlZXJMZWZ0LCBhLCBiKTtcbiAgfVxufTtcbnZhciBMb2JieVBlZXJMZWZ0ID0gY2xhc3MgX0xvYmJ5UGVlckxlZnQgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIHBlZXJJZCA9IDE7XG4gICAqL1xuICBwZWVySWQ7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBzdGF0dXMgPSAyO1xuICAgKi9cbiAgc3RhdHVzO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBvcHRpb25hbCBzdHJpbmcgbWVzc2FnZSA9IDM7XG4gICAqL1xuICBtZXNzYWdlO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJMb2JieVBlZXJMZWZ0XCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwicGVlcklkXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDIsIG5hbWU6IFwic3RhdHVzXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDMsIG5hbWU6IFwibWVzc2FnZVwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCBvcHQ6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Mb2JieVBlZXJMZWZ0KCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0xvYmJ5UGVlckxlZnQoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfTG9iYnlQZWVyTGVmdCgpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX0xvYmJ5UGVlckxlZnQsIGEsIGIpO1xuICB9XG59O1xudmFyIFdhaXRpbmdSb29tID0gY2xhc3MgX1dhaXRpbmdSb29tIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyByZWFzb24gPSAxO1xuICAgKi9cbiAgcmVhc29uO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBvcHRpb25hbCBzdHJpbmcgbWV0YWRhdGEgPSAyO1xuICAgKi9cbiAgbWV0YWRhdGE7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIldhaXRpbmdSb29tXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwicmVhc29uXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDIsIG5hbWU6IFwibWV0YWRhdGFcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgb3B0OiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfV2FpdGluZ1Jvb20oKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfV2FpdGluZ1Jvb20oKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfV2FpdGluZ1Jvb20oKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9XYWl0aW5nUm9vbSwgYSwgYik7XG4gIH1cbn07XG52YXIgRXJyb3IyID0gY2xhc3MgX0Vycm9yIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBldmVudCA9IDE7XG4gICAqL1xuICBldmVudDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIGVycm9yID0gMjtcbiAgICovXG4gIGVycm9yO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJFcnJvclwiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcImV2ZW50XCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDIsIG5hbWU6IFwiZXJyb3JcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfRXJyb3IoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfRXJyb3IoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfRXJyb3IoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9FcnJvciwgYSwgYik7XG4gIH1cbn07XG52YXIgUmVzcG9uc2UgPSBjbGFzcyBfUmVzcG9uc2UgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBvbmVvZiBSZXNwb25zZS5SZXNwb25zZVxuICAgKi9cbiAgUmVzcG9uc2UgPSB7IGNhc2U6IHZvaWQgMCB9O1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJSZXNwb25zZVwiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcImhlbGxvXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBIZWxsbywgb25lb2Y6IFwiUmVzcG9uc2VcIiB9LFxuICAgIHsgbm86IDIsIG5hbWU6IFwiY29ubmVjdFJvb21SZXNwb25zZVwiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogQ29ubmVjdFJvb21SZXNwb25zZSwgb25lb2Y6IFwiUmVzcG9uc2VcIiB9LFxuICAgIHsgbm86IDMsIG5hbWU6IFwiY3JlYXRlVHJhbnNwb3J0T25DbGllbnRcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IENyZWF0ZVRyYW5zcG9ydE9uQ2xpZW50LCBvbmVvZjogXCJSZXNwb25zZVwiIH0sXG4gICAgeyBubzogNCwgbmFtZTogXCJwcm9kdWNlUmVzcG9uc2VcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFByb2R1Y2VSZXNwb25zZSwgb25lb2Y6IFwiUmVzcG9uc2VcIiB9LFxuICAgIHsgbm86IDI1LCBuYW1lOiBcImNvbnN1bWVEYXRhUmVzcG9uc2VcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IENvbnN1bWVEYXRhUmVzcG9uc2UsIG9uZW9mOiBcIlJlc3BvbnNlXCIgfSxcbiAgICB7IG5vOiA1LCBuYW1lOiBcInByb2R1Y2VEYXRhUmVzcG9uc2VcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFByb2R1Y2VEYXRhUmVzcG9uc2UsIG9uZW9mOiBcIlJlc3BvbnNlXCIgfSxcbiAgICB7IG5vOiA2LCBuYW1lOiBcInN5bmNNZWV0aW5nU3RhdGVSZXNwb25zZVwiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogU3luY01lZXRpbmdTdGF0ZVJlc3BvbnNlLCBvbmVvZjogXCJSZXNwb25zZVwiIH0sXG4gICAgeyBubzogNywgbmFtZTogXCJjb25zdW1lUmVzcG9uc2VcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IENvbnN1bWVSZXNwb25zZSwgb25lb2Y6IFwiUmVzcG9uc2VcIiB9LFxuICAgIHsgbm86IDgsIG5hbWU6IFwiY2xvc2VQcm9kdWNlclN1Y2Nlc3NcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IENsb3NlUHJvZHVjZXJTdWNjZXNzLCBvbmVvZjogXCJSZXNwb25zZVwiIH0sXG4gICAgeyBubzogMjYsIG5hbWU6IFwicGF1c2VQcm9kdWNlclN1Y2Nlc3NcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFBhdXNlUHJvZHVjZXJTdWNjZXNzLCBvbmVvZjogXCJSZXNwb25zZVwiIH0sXG4gICAgeyBubzogMjcsIG5hbWU6IFwicmVzdW1lUHJvZHVjZXJTdWNjZXNzXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBSZXN1bWVQcm9kdWNlclN1Y2Nlc3MsIG9uZW9mOiBcIlJlc3BvbnNlXCIgfSxcbiAgICB7IG5vOiA5LCBuYW1lOiBcImNsb3NlQ29uc3VtZXJTdWNjZXNzXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBDbG9zZUNvbnN1bWVyU3VjY2Vzcywgb25lb2Y6IFwiUmVzcG9uc2VcIiB9LFxuICAgIHsgbm86IDEwLCBuYW1lOiBcImNvbm5lY3RUcmFuc3BvcnRSZXNwb25zZVwiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogQ29ubmVjdFRyYW5zcG9ydFJlc3BvbnNlLCBvbmVvZjogXCJSZXNwb25zZVwiIH0sXG4gICAgeyBubzogMTEsIG5hbWU6IFwicmVzdGFydFRyYW5zcG9ydEljZVJlc3BvbnNlXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBSZXN0YXJ0VHJhbnNwb3J0SWNlUmVzcG9uc2UsIG9uZW9mOiBcIlJlc3BvbnNlXCIgfSxcbiAgICB7IG5vOiAxMiwgbmFtZTogXCJuZXdQZWVySm9pbmVkXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBOZXdQZWVySm9pbmVkLCBvbmVvZjogXCJSZXNwb25zZVwiIH0sXG4gICAgeyBubzogMTMsIG5hbWU6IFwibmV3TG9iYnlQZWVyXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBOZXdMb2JieVBlZXIsIG9uZW9mOiBcIlJlc3BvbnNlXCIgfSxcbiAgICB7IG5vOiAxNCwgbmFtZTogXCJuZXdQZXJtaXNzaW9uc1wiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogTmV3UGVybWlzc2lvbnMsIG9uZW9mOiBcIlJlc3BvbnNlXCIgfSxcbiAgICB7IG5vOiAxNSwgbmFtZTogXCJuZXdSb29tQ29udHJvbHNcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IE5ld1Jvb21Db250cm9scywgb25lb2Y6IFwiUmVzcG9uc2VcIiB9LFxuICAgIHsgbm86IDE2LCBuYW1lOiBcIm5ld1BlZXJSb2xlXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBOZXdQZWVyUm9sZSwgb25lb2Y6IFwiUmVzcG9uc2VcIiB9LFxuICAgIHsgbm86IDE3LCBuYW1lOiBcInJlY2VpdmVEYXRhXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBSZWNlaXZlRGF0YSwgb25lb2Y6IFwiUmVzcG9uc2VcIiB9LFxuICAgIHsgbm86IDE4LCBuYW1lOiBcInBlZXJNZXRhZGF0YVVwZGF0ZWRcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFBlZXJNZXRhZGF0YVVwZGF0ZWQsIG9uZW9mOiBcIlJlc3BvbnNlXCIgfSxcbiAgICB7IG5vOiAxOSwgbmFtZTogXCJyb29tTWV0YWRhdGFVcGRhdGVkXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBSb29tTWV0YWRhdGFVcGRhdGVkLCBvbmVvZjogXCJSZXNwb25zZVwiIH0sXG4gICAgeyBubzogMjAsIG5hbWU6IFwicm9vbUNsb3NlZFByb2R1Y2Vyc1wiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogUm9vbUNsb3NlZFByb2R1Y2Vycywgb25lb2Y6IFwiUmVzcG9uc2VcIiB9LFxuICAgIHsgbm86IDIxLCBuYW1lOiBcInBlZXJMZWZ0XCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBQZWVyTGVmdCwgb25lb2Y6IFwiUmVzcG9uc2VcIiB9LFxuICAgIHsgbm86IDIyLCBuYW1lOiBcImxvYmJ5UGVlckxlZnRcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IExvYmJ5UGVlckxlZnQsIG9uZW9mOiBcIlJlc3BvbnNlXCIgfSxcbiAgICB7IG5vOiAyMywgbmFtZTogXCJ3YWl0aW5nUm9vbVwiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogV2FpdGluZ1Jvb20sIG9uZW9mOiBcIlJlc3BvbnNlXCIgfSxcbiAgICB7IG5vOiAyNCwgbmFtZTogXCJlcnJvclwiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogRXJyb3IyLCBvbmVvZjogXCJSZXNwb25zZVwiIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUmVzcG9uc2UoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUmVzcG9uc2UoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUmVzcG9uc2UoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9SZXNwb25zZSwgYSwgYik7XG4gIH1cbn07XG5cbi8vIHBhY2thZ2UuanNvblxudmFyIHBhY2thZ2VfZGVmYXVsdCA9IHtcbiAgbmFtZTogXCJAaHVkZGxlMDEvd2ViLWNvcmVcIixcbiAgdmVyc2lvbjogXCIyLjIuNFwiLFxuICBkZXNjcmlwdGlvbjogXCJUaGUgSHVkZGxlMDEgSmF2YXNjcmlwdCBTREsgb2ZmZXJzIGEgY29tcHJlaGVuc2l2ZSBzdWl0ZSBvZiBtZXRob2RzIGFuZCBldmVudCBsaXN0ZW5lcnMgdGhhdCBhbGxvdyBmb3Igc2VhbWxlc3MgcmVhbC10aW1lIGF1ZGlvIGFuZCB2aWRlbyBjb21tdW5pY2F0aW9uIHdpdGggbWluaW1hbCBjb2RpbmcgcmVxdWlyZWQuXCIsXG4gIHR5cGU6IFwibW9kdWxlXCIsXG4gIG1haW46IFwiZGlzdC9pbmRleC5qc1wiLFxuICB0eXBlczogXCJkaXN0L2luZGV4LmQudHNcIixcbiAgZmlsZXM6IFtcImRpc3RcIiwgXCJ0eXBlcy5kLnRzXCJdLFxuICBzY3JpcHRzOiB7XG4gICAgYnVpbGQ6IFwicmltcmFmIGRpc3QgJiYgdHN1cCAtLWZvcm1hdCBlc20sY2pzXCIsXG4gICAgXCJidWlsZDp1bWRcIjogXCJyaW1yYWYgZGlzdCAmJiB0c3VwIC0tZm9ybWF0IGlpZmVcIixcbiAgICB3YXRjaDogXCJ0c3VwIC0td2F0Y2hcIixcbiAgICBwdWI6IFwiYnVuIHJ1biBidWlsZCAmJiBucG0gcHVibGlzaCAtLWFjY2VzcyBwdWJsaWNcIixcbiAgICBcInB1Yjp1bWRcIjogXCJidW4gcnVuIGJ1aWxkOnVtZCAmJiBucG0gcHVibGlzaCAtLWFjY2VzcyBwdWJsaWMgLS10YWcgdW1kXCIsXG4gICAgXCJwdWI6ZGV2XCI6IFwiYnVuIHJ1biBidWlsZCAmJiBucG0gcHVibGlzaCAtLWFjY2VzcyBwdWJsaWMgLS10YWcgZGV2XCIsXG4gICAgXCJwdWI6YWxwaGFcIjogXCJidW4gcnVuIGJ1aWxkICYmIG5wbSBwdWJsaXNoIC0tYWNjZXNzIHB1YmxpYyAtLXRhZyBhbHBoYVwiLFxuICAgIFwicHViOmJldGFcIjogXCJidW4gcnVuIGJ1aWxkICYmIG5wbSBwdWJsaXNoIC0tYWNjZXNzIHB1YmxpYyAtLXRhZyBiZXRhXCIsXG4gICAgdGVzdDogXCJ2aXRlc3RcIixcbiAgICBcInRlc3Q6dHlwZXNcIjogXCJ2aXRlc3QgdHlwZWNoZWNrXCJcbiAgfSxcbiAgZXhwb3J0czoge1xuICAgIFwiLlwiOiB7XG4gICAgICBpbXBvcnQ6IFwiLi9kaXN0L2luZGV4LmpzXCIsXG4gICAgICB0eXBlczogXCIuL2Rpc3QvaW5kZXguZC50c1wiXG4gICAgfSxcbiAgICBcIi4vdHlwZXNcIjoge1xuICAgICAgaW1wb3J0OiBcIi4vZGlzdC90eXBlcy9pbmRleC5qc1wiLFxuICAgICAgdHlwZXM6IFwiLi9kaXN0L3R5cGVzL2luZGV4LmQudHNcIlxuICAgIH1cbiAgfSxcbiAga2V5d29yZHM6IFtcImh1ZGRsZTAxXCIsIFwid2ViLWNvcmVcIiwgXCJSVENcIiwgXCJ3ZWIzXCJdLFxuICBhdXRob3I6IFwiYTQ3NDhnXCIsXG4gIGxpY2Vuc2U6IFwiSVNDXCIsXG4gIGRldkRlcGVuZGVuY2llczoge1xuICAgIFwiQHZpdGVzdC9icm93c2VyXCI6IFwiXjIuMS4yXCIsXG4gICAgZXNidWlsZDogXCJeMC4yNC4wXCIsXG4gICAganNkb206IFwiXjI1LjAuMVwiLFxuICAgIHByb3RvYzogXCJ3b3Jrc3BhY2U6KlwiLFxuICAgIHRzY29uZmlnOiBcIndvcmtzcGFjZToqXCIsXG4gICAgdHN1cDogXCJeOC4zLjBcIixcbiAgICB0eXBlczogXCJ3b3Jrc3BhY2U6KlwiLFxuICAgIHR5cGVzY3JpcHQ6IFwiNS42LjJcIixcbiAgICB2aXRlc3Q6IFwiXjIuMS4yXCIsXG4gICAgd2ViZHJpdmVyaW86IFwiXjkuMS4zXCJcbiAgfSxcbiAgZGVwZW5kZW5jaWVzOiB7XG4gICAgXCJtZWRpYXNvdXAtY2xpZW50XCI6IFwiMy43LjE2XCIsXG4gICAgem9kOiBcIl4zLjIzLjhcIlxuICB9XG59O1xuXG4vLyBzcmMvU29ja2V0LnRzXG52YXIgbG9nZ2VyID0gbWFpbkxvZ2dlci5jcmVhdGVTdWJMb2dnZXIoXCJTb2NrZXQudHNcIik7XG52YXIgU29ja2V0ID0gY2xhc3MgX1NvY2tldCBleHRlbmRzIEVuaGFuY2VkRXZlbnRFbWl0dGVyIHtcbiAgLyoqXG4gICAqIFNvY2tldCBJbnN0YW5jZSwgU2luZ2xldG9uIGNsYXNzXG4gICAqL1xuICBzdGF0aWMgX19pbnN0YW5jZSA9IG51bGw7XG4gIC8qKlxuICAgKiBSZXRyeSBjb3VudCBmb3IgdGhlIHNvY2tldCBjb25uZWN0aW9uLCBpZiB0aGUgY29ubmVjdGlvbiBpcyBjbG9zZWQgYWJub3JtYWxseSwgd2UgdHJ5IHRvIHJlY29ubmVjdCA1IHRpbWVzXG4gICAqL1xuICBfX3JldHJ5Q291bnQgPSAwO1xuICAvKipcbiAgICogQ3VycmVudCBjb25uZWN0aW9uIHN0YXRlIG9mIHRoZSBzb2NrZXQgY29ubmVjdGlvblxuICAgKi9cbiAgX19jb25uZWN0aW9uU3RhdGUgPSBcInVuaW5pdGlhbGl6ZWRcIjtcbiAgLyoqXG4gICAqIHdlYnNvY2tldCBwb2x5ZmlsbFxuICAgKi9cbiAgX193c1BvbHlmaWxsO1xuICAvKipcbiAgICogVW5kZXJseWluZyBXZWJTb2NrZXQgY29ubmVjdGlvbiwgdW50aWwgd2UgZG9udCBjYWxsIFNvY2tldC5jb25uZWN0KCk7IHRoaXMgd2lsbCBiZSBudWxsXG4gICAqL1xuICBfX3dzID0gbnVsbDtcbiAgLyoqXG4gICAqIE1hcCBvZiBhbGwgdGhlIHN1YnNjcmliZWQgZXZlbnRzL3RvcGljcyBmb3IgdGhlIHNvY2tldCBjb25uZWN0aW9uXG4gICAqL1xuICBfX3N1YnNjcmliZWRNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAvKipcbiAgICogR2VvIGRhdGEgb2YgdGhlIGN1cnJlbnQgc29ja2V0IGNvbm5lY3Rpb24sIHNwZWNpZmljIHRvIHRoZSBMb2NhbCBQZWVyIHdobyBqb2luZWQgdGhlIG1lZXRpbmdcbiAgICovXG4gIF9fZ2VvRGF0YSA9IG51bGw7XG4gIC8qKlxuICAgKiBFbmRwb2ludCBvZiB0aGUgc29ja2V0IHNlcnZlciwgdGhpcyBpcyBmZXRjaGVkIGZyb20gdGhlIEFQSSBzZXJ2ZXJcbiAgICovXG4gIF9fRU5EUE9JTlQgPSBudWxsO1xuICAvKipcbiAgICogRmxhZyB0byBlbmFibGUgbG9jYWwgZGV2ZWxvcG1lbnRcbiAgICovXG4gIGlzTG9jYWxEZXYgPSBmYWxzZTtcbiAgLyoqXG4gICAqIFRva2VuIG9mIHRoZSBjdXJyZW50IHNvY2tldCBjb25uZWN0aW9uLCBzcGVjaWZpYyB0byB0aGUgTG9jYWwgUGVlciB3aG8gam9pbmVkIHRoZSBtZWV0aW5nXG4gICAqL1xuICB0b2tlbiA9IG51bGw7XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB1bmRlcmx5aW5nIFdlYlNvY2tldCBjb25uZWN0aW9uLCB0aHJvd3MgYW4gZXJyb3IgaWYgdGhlIGNvbm5lY3Rpb24gaXMgbm90IGluaXRpYWxpemVkXG4gICAqIEB0aHJvd3MgYEVycm9yYCBpZiB0aGUgY29ubmVjdGlvbiBpcyBub3QgaW5pdGlhbGl6ZWRcbiAgICovXG4gIGdldCB3cygpIHtcbiAgICBpZiAoIXRoaXMuX193cykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiXFx1ezFGNTM0fSBTb2NrZXQgTm90IEluaXRpYWxpc2VkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fX3dzO1xuICB9XG4gIC8qKlxuICAgKiBHZXR0ZXIgZm9yIHRoZSByZWdpb24gb2YgdGhlIGN1cnJlbnQgc29ja2V0IGNvbm5lY3Rpb25cbiAgICovXG4gIGdldCByZWdpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX19nZW9EYXRhPy5yZWdpb247XG4gIH1cbiAgLyoqXG4gICAqIEdldHRlciBmb3IgdGhlIGdlbyBkYXRhIG9mIHRoZSBjdXJyZW50IHNvY2tldCBjb25uZWN0aW9uXG4gICAqL1xuICBnZXQgZ2VvRGF0YSgpIHtcbiAgICByZXR1cm4gdGhpcy5fX2dlb0RhdGE7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGN1cnJlbnQgY29ubmVjdGlvbiBzdGF0ZSBvZiB0aGUgc29ja2V0IGNvbm5lY3Rpb25cbiAgICovXG4gIGdldCBjb25uZWN0aW9uU3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX19jb25uZWN0aW9uU3RhdGU7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc29ja2V0IGNvbm5lY3Rpb24gaXMgY29ubmVjdGVkXG4gICAqL1xuICBnZXQgY29ubmVjdGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9fd3M/Lk9QRU4gPT09IDEgJiYgdGhpcy5jb25uZWN0aW9uU3RhdGUgPT09IFwiY29ubmVjdGVkXCI7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc29ja2V0IGNvbm5lY3Rpb24gaXMgY29ubmVjdGluZ1xuICAgKi9cbiAgZ2V0IGNvbm5lY3RpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuX193cz8uQ09OTkVDVElORyA9PT0gMCAmJiB0aGlzLmNvbm5lY3Rpb25TdGF0ZSA9PT0gXCJjb25uZWN0aW5nXCI7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc29ja2V0IGNvbm5lY3Rpb24gaXMgY2xvc2VkXG4gICAqL1xuICBnZXQgY2xvc2VkKCkge1xuICAgIHJldHVybiB0aGlzLl9fd3M/LkNMT1NFRCA9PT0gMyB8fCB0aGlzLl9fd3M/LkNMT1NJTkcgPT09IDI7XG4gIH1cbiAgLyoqXG4gICAqIFNldHMgdGhlIGN1cnJlbnQgY29ubmVjdGlvbiBzdGF0ZSBvZiB0aGUgc29ja2V0IGNvbm5lY3Rpb25cbiAgICovXG4gIHNldCBjb25uZWN0aW9uU3RhdGUoc3RhdGUpIHtcbiAgICBsb2dnZXIuaW5mbyhgXFx1ezFGNTBDfSBXZWJTb2NrZXQgc3RhdGUgY2hhbmdlZCB0byAke3N0YXRlfWApO1xuICAgIHRoaXMuX19jb25uZWN0aW9uU3RhdGUgPSBzdGF0ZTtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHRoZSB0b2tlbiBmb3IgdGhpcyBzb2NrZXRcbiAgICogQHRocm93cyBgRXJyb3JgIGlmIHRoZSB0b2tlbiBpcyBhbHJlYWR5IHNldFxuICAgKi9cbiAgc2V0VG9rZW4odG9rZW4pIHtcbiAgICBpZiAodGhpcy50b2tlbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiXFx1ezFGNTM0fSBUb2tlbiBBbHJlYWR5IFNldFwiKTtcbiAgICB9XG4gICAgdGhpcy50b2tlbiA9IHRva2VuO1xuICAgIHRoaXMuZW1pdChcInRva2VuLXVwZGF0ZWRcIiwgdG9rZW4pO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgYSBuZXcgcmVnaW9uIGZvciB0aGUgc29ja2V0IGNvbm5lY3Rpb25cbiAgICovXG4gIHNldFJlZ2lvbihyZWdpb24pIHtcbiAgICBpZiAodGhpcy5nZW9EYXRhKSB7XG4gICAgICB0aGlzLmdlb0RhdGEucmVnaW9uID0gcmVnaW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9fZ2VvRGF0YSA9IHtcbiAgICAgICAgY291bnRyeTogXCJJTlwiLFxuICAgICAgICByZWdpb25cbiAgICAgIH07XG4gICAgfVxuICAgIHRoaXMuZW1pdChcInJlZ2lvbi11cGRhdGVkXCIsIHJlZ2lvbik7XG4gIH1cbiAgLyoqXG4gICAqIEBwcm90ZWN0ZWQgLSBGb3IgSW50ZXJuYWwgVXNlIE9ubHlcbiAgICovXG4gIGVuYWJsZUxvY2FsRGV2ID0gKCkgPT4ge1xuICAgIHRoaXMuaXNMb2NhbERldiA9IHRydWU7XG4gIH07XG4gIC8qKlxuICAgKiBDcmVhdGVzIHRoZSBzb2NrZXQgYW5kIHJldHVybnMgdGhlIGluc3RhbmNlIG9mIHRoZSBzb2NrZXQgaWYgYWxyZWFkeSBpbml0aWFsaXplZFxuICAgKiB5b3UgbmVlZCB0byBjYWxsIGNvbm5lY3QgbWV0aG9kIHRvIGNvbm5lY3QgdG8gdGhlIHNlcnZlclxuICAgKiBAcGFyYW0gZGF0YVxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgc3RhdGljIGNyZWF0ZSh3c1BvbHlmaWxsKSB7XG4gICAgaWYgKCFfU29ja2V0Ll9faW5zdGFuY2UpIHtcbiAgICAgIF9Tb2NrZXQuX19pbnN0YW5jZSA9IG5ldyBfU29ja2V0KHdzUG9seWZpbGwpO1xuICAgIH1cbiAgICByZXR1cm4gX1NvY2tldC5fX2luc3RhbmNlO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBpbnN0YW5jZSBvZiB0aGUgc29ja2V0IGNvbm5lY3Rpb24sIHRocm93cyBhbiBlcnJvciBpZiB0aGUgY29ubmVjdGlvbiBpcyBub3QgaW5pdGlhbGl6ZWRcbiAgICogQHRocm93cyBgRXJyb3JgIGlmIHRoZSBjb25uZWN0aW9uIGlzIG5vdCBpbml0aWFsaXplZFxuICAgKi9cbiAgc3RhdGljIGdldEluc3RhbmNlKCkge1xuICAgIGlmICghX1NvY2tldC5fX2luc3RhbmNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiXFx1ezFGNTM0fSBTb2NrZXQgSW5zdGFuY2UgTm90IEluaXRpYWxpc2VkLCBZb3UgYXJlIHRyeWluZyB0byBkbyBzb21ldGhpbmcgd2hpY2ggaXMgbm90IHBvc3NpYmxlXCJcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBfU29ja2V0Ll9faW5zdGFuY2U7XG4gIH1cbiAgY29uc3RydWN0b3Iod3NQb2x5ZmlsbCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fX3dzUG9seWZpbGwgPSB3c1BvbHlmaWxsIHx8IG51bGw7XG4gIH1cbiAgLyoqXG4gICAqXG4gICAqL1xuICBfX2dldEdlb0RhdGEgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgZm4gPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2goXG4gICAgICAgIFwiaHR0cHM6Ly9zaGluaWdhbWkuaHVkZGxlMDEuY29tL2FwaS9nZXQtZ2VvbG9jYXRpb25cIlxuICAgICAgKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwPy5qc29uKCk7XG4gICAgICBjb25zdCBnZW9sb2NhdGlvbmRhdGEgPSBHZW9sb2NhdGlvblNjaGVtYS5zYWZlUGFyc2UoZGF0YSk7XG4gICAgICBpZiAoIWdlb2xvY2F0aW9uZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlxcdXsxRjUzNH0gRXJyb3IgV2hpbGUgRmluZGluZyB0aGUgUmVnaW9uIHRvIGNvbm5lY3QgdG9cIik7XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZWdpb246IGdlb2xvY2F0aW9uZGF0YS5kYXRhLmdsb2JhbFJlZ2lvbixcbiAgICAgICAgY291bnRyeTogZ2VvbG9jYXRpb25kYXRhLmRhdGEuY291bnRyeVxuICAgICAgfTtcbiAgICB9O1xuICAgIHJldHVybiBhcGlDYWxsV2l0aFJldHJ5KGZuKTtcbiAgfTtcbiAgLyoqXG4gICAqIENvbm5lY3QgdG8gdGhlIHNvY2tldCBzZXJ2ZXIgdXNpbmcgdGhlIHRva2VuLCB0aGlzIHdpbGwgZXN0YWJsaXNoIHRoZSBjb25uZWN0aW9uIHdpdGggdGhlIHNlcnZlclxuICAgKlxuICAgKiBFdmVyeSBgdG9rZW5gIGlzIHVuaXF1ZSBmb3IgZWFjaCBOZXcgUGVlciBUcnlpbmcgdG8gY29ubmVjdC4gUmV1c2luZyB0aGUgdG9rZW4gd2lsbCByZXN1bHQgaW4gYW4gcmVwZWF0ZWQgY29ubmVjdGlvbiBlcnJvciwgdW50aWwgdGhlIGNvbm5lY3Rpb24gaXMgY2xvc2VkLlxuICAgKiBAcGFyYW0gZGF0YSAtIGB7IHRva2VuOiBzdHJpbmcgfWBcbiAgICogQHRocm93cyBgRXJyb3JgIGlmIHRoZSBzb2NrZXQgY29ubmVjdGlvbiBjYW5ub3QgYmUgZXN0YWJsaXNoZWRcbiAgICovXG4gIGNvbm5lY3QgPSBhc3luYyAoZGF0YSkgPT4ge1xuICAgIGlmICghX1NvY2tldC5fX2luc3RhbmNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcXHV7MUY1MzR9IFNvY2tldCBJbnN0YW5jZSBOb3QgSW5pdGlhbGlzZWRcIik7XG4gICAgfVxuICAgIGlmICghdGhpcy50b2tlbikge1xuICAgICAgdGhpcy5zZXRUb2tlbihkYXRhLnRva2VuKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY29ubmVjdGlvblN0YXRlID09PSBcImNvbm5lY3RlZFwiKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJcXHV7MUY1MzR9IFNvY2tldCBBbHJlYWR5IENvbm5lY3RlZFwiKTtcbiAgICAgIHJldHVybiBfU29ja2V0Ll9faW5zdGFuY2U7XG4gICAgfVxuICAgIGlmICh0aGlzLmNvbm5lY3Rpb25TdGF0ZSA9PT0gXCJjb25uZWN0aW5nXCIpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIlxcdXsxRjUzNH0gU29ja2V0IEFscmVhZHkgQ29ubmVjdGluZ1wiKTtcbiAgICAgIHJldHVybiBfU29ja2V0Ll9faW5zdGFuY2U7XG4gICAgfVxuICAgIGlmICh0aGlzLl9fd3MpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIlxcdXsxRjUzNH0gU29ja2V0IEFscmVhZHkgSW5pdGlhbGl6ZWRcIik7XG4gICAgICByZXR1cm4gX1NvY2tldC5fX2luc3RhbmNlO1xuICAgIH1cbiAgICBsb2dnZXIuaW5mbyhcIlxcdXsxRjUwQ30gQ29ubmVjdGluZyB0byB0aGUgc29ja2V0IHNlcnZlclwiKTtcbiAgICBpZiAoIXRoaXMuX19nZW9EYXRhKSB7XG4gICAgICBjb25zdCBnZW9EYXRhID0gYXdhaXQgdGhpcy5fX2dldEdlb0RhdGEoKTtcbiAgICAgIHRoaXMuX19nZW9EYXRhID0gZ2VvRGF0YTtcbiAgICB9XG4gICAgY29uc3QgdXJsID0gYXdhaXQgdGhpcy5fX2dldENvbmZpZ1VybChcbiAgICAgIGRhdGEudG9rZW4sXG4gICAgICB0aGlzLl9fZ2VvRGF0YS5yZWdpb24sXG4gICAgICB0aGlzLl9fZ2VvRGF0YS5jb3VudHJ5XG4gICAgKTtcbiAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZSA9IFwiY29ubmVjdGluZ1wiO1xuICAgIHRoaXMuZW1pdChcImNvbm5lY3RpbmdcIik7XG4gICAgaWYgKHRoaXMuX193c1BvbHlmaWxsKSB0aGlzLl9fd3MgPSBuZXcgdGhpcy5fX3dzUG9seWZpbGwodXJsKTtcbiAgICBlbHNlIHRoaXMuX193cyA9IG5ldyBXZWJTb2NrZXQodXJsKTtcbiAgICB0aGlzLl9fd3MuYmluYXJ5VHlwZSA9IFwiYXJyYXlidWZmZXJcIjtcbiAgICB0aGlzLl9fd3Mub25tZXNzYWdlID0gdGhpcy5fX2hhbmRsZUluY29taW5nTWVzc2FnZTtcbiAgICB0aGlzLl9fcmVnaXN0ZXJTb2NrZXRFdmVudHModGhpcy53cyk7XG4gICAgY29uc3Qgc29ja2V0Q29ubmVjdGlvblByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBoYW5kbGVTdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICBsb2dnZXIuaW5mbyhcIlxcdTI3MDUgV2ViU29ja2V0IENvbm5lY3Rpb24gRXN0YWJsaXNoZWQgUHJvbWlzZSBSZXNvbHZlZFwiKTtcbiAgICAgICAgaGFuZGxlUmVtb3ZlTGlzdGVuZXJzKCk7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH07XG4gICAgICBjb25zdCBoYW5kbGVDbG9zZSA9ICgpID0+IHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICAgIFwiXFx1ezFGNTM0fSBFcnJvciBDb25uZWN0aW5nIFdlYlNvY2tldCwgQ2xvc2luZyB0aGUgQ29ubmVjdGlvbiwgVHJ5IEFnYWluLlwiXG4gICAgICAgICk7XG4gICAgICAgIGhhbmRsZVJlbW92ZUxpc3RlbmVycygpO1xuICAgICAgICByZWplY3QoXG4gICAgICAgICAgbmV3IEVycm9yKFxuICAgICAgICAgICAgXCJcXHUyNzRDIEVycm9yIENvbm5lY3RpbmcgV2ViU29ja2V0LCBDbG9zaW5nIHRoZSBDb25uZWN0aW9uLCBUcnkgQWdhaW4uXCJcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICB9O1xuICAgICAgY29uc3QgaGFuZGxlUmVtb3ZlTGlzdGVuZXJzID0gKCkgPT4ge1xuICAgICAgICB0aGlzLm9mZihcImNvbm5lY3RlZFwiLCBoYW5kbGVTdWNjZXNzKTtcbiAgICAgICAgdGhpcy5vZmYoXCJjbG9zZWRcIiwgaGFuZGxlQ2xvc2UpO1xuICAgICAgfTtcbiAgICAgIHRoaXMub25jZShcImNvbm5lY3RlZFwiLCBoYW5kbGVTdWNjZXNzKTtcbiAgICAgIHRoaXMub25jZShcImNsb3NlZFwiLCBoYW5kbGVDbG9zZSk7XG4gICAgfSk7XG4gICAgYXdhaXQgc29ja2V0Q29ubmVjdGlvblByb21pc2U7XG4gICAgcmV0dXJuIF9Tb2NrZXQuX19pbnN0YW5jZTtcbiAgfTtcbiAgLyoqXG4gICAqIENsb3NlcyB0aGUgdW5kZXJseWluZyBzb2NrZXQgY29ubmVjdGlvbiwgYW5kIGNsZWFycyBhbGwgdGhlIGV2ZW50IGxpc3RlbmVycyBhbmQgc3Vic2NyaXB0aW9ucyB0byBldmVudHMgYXMgd2VsbCBhc1xuICAgKiBhbnkgb3RoZXIgaW5mb3JtYXRpb24gcmVsYXRlZCB0byB0aGUgY29ubmVjdGlvbi5cbiAgICogQHBhcmFtIGNvZGUgYHsgRVNvY2tldENsb3NlQ29kZSB9YFxuICAgKi9cbiAgY2xvc2UgPSAoY29kZSwgcmVjb25uZWN0ID0gZmFsc2UpID0+IHtcbiAgICBpZiAodGhpcy5fX3dzKSB7XG4gICAgICB0aGlzLl9fd3Mub25tZXNzYWdlID0gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgcmVhc29uID0gU29ja2V0Q2xvc2VSZWFzb25bY29kZV07XG4gICAgaWYgKGNvZGUgPj0gM2UzICYmIGNvZGUgPD0gNDk5OSB8fCBjb2RlID09PSAxZTMpIHtcbiAgICAgIGxvZ2dlci5pbmZvKGBcXHV7MUY1MzR9IENsb3NpbmcgdGhlIFdlYlNvY2tldCBDb25uZWN0aW9uLCAke2NvZGV9ICR7cmVhc29ufWApO1xuICAgICAgdGhpcy5fX3dzPy5jbG9zZShjb2RlLCByZWFzb24pO1xuICAgICAgdGhpcy5fX3dzID0gbnVsbDtcbiAgICAgIHRoaXMudG9rZW4gPSBudWxsO1xuICAgICAgdGhpcy5fX0VORFBPSU5UID0gbnVsbDtcbiAgICAgIHRoaXMuX19yZXRyeUNvdW50ID0gMDtcbiAgICAgIHRoaXMuZW1pdChcInRva2VuLXVwZGF0ZWRcIiwgbnVsbCk7XG4gICAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZSA9IFwiY2xvc2VkXCI7XG4gICAgICB0aGlzLmVtaXQoXCJjbG9zZWRcIiwgY29kZSk7XG4gICAgICBsb2dnZXIuaW5mbyhcIlxcdXsxRjUwQ30gV2ViU29ja2V0IENvbm5lY3Rpb24gY2xvc2VkXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9fd3M/LmNsb3NlKCk7XG4gICAgaWYgKHRoaXMuX193cykge1xuICAgICAgdGhpcy5fX3VucmVnaXN0ZXJTb2NrZXRFdmVudHModGhpcy53cyk7XG4gICAgfVxuICAgIHRoaXMuX193cyA9IG51bGw7XG4gICAgaWYgKGNvZGUgPT09IEVTb2NrZXRDbG9zZUNvZGUuQUJOT1JNQUxfQ0xPU1VSRSB8fCByZWNvbm5lY3QpIHtcbiAgICAgIGxvZ2dlci5pbmZvKFxuICAgICAgICBcIlxcdXsxRjUwQ30gU29ja2V0IENvbm5lY3Rpb24gY2xvc2VkIGFibm9ybWFsbHksIFRyeWluZyB0byBSZWNvbm5lY3RcIixcbiAgICAgICAge1xuICAgICAgICAgIGNvZGUsXG4gICAgICAgICAgcmVhc29uXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBpZiAodGhpcy5fX3JldHJ5Q291bnQgPCA3KSB7XG4gICAgICAgIGNvbnN0IGRlbGF5ID0gMiAqKiB0aGlzLl9fcmV0cnlDb3VudCAqIDFlMztcbiAgICAgICAgc2V0VGltZW91dChcbiAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy50b2tlbikge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICAgICAgXCJcXHV7MUY1MTR9IFRyeWluZyB0byByZWNvbm5lY3QsIEF0dGVtcHQ6XCIsXG4gICAgICAgICAgICAgICAgICB0aGlzLl9fcmV0cnlDb3VudFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uU3RhdGUgPSBcInJlY29ubmVjdGluZ1wiO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdChcInJlY29ubmVjdGluZ1wiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3QoeyB0b2tlbjogdGhpcy50b2tlbiB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9fcmV0cnlDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KFwicmVjb25uZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB0aGlzLl9fcmV0cnlDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX19yZXRyeUNvdW50ID09PSA3KSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkFsbCBSZWNvbm5lY3Rpb24gQXR0ZW1wdCBmYWlsZWRcIik7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcbiAgICAgICAgICAgICAgICAgIGBSZWNvbm5lY3Rpb24gQXR0ZW1wdCAke3RoaXMuX19yZXRyeUNvdW50fSBmYWlsZWRgXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgTWF0aC5taW4oZGVsYXksIDJlNClcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5fX3JldHJ5Q291bnQrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcbiAgICAgICAgICBcIlxcdXsxRjUzNH0gU29ja2V0IGNvbm5lY3Rpb24gY2xvc2VkIGFibm9ybWFsbHksIHJlY29ubmVjdGluZyBmYWlsZWRcIlxuICAgICAgICApO1xuICAgICAgICB0aGlzLmNsb3NlKEVTb2NrZXRDbG9zZUNvZGUuQ09OTkVDVElPTl9FWFBJUkVEKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbG9nZ2VyLmluZm8oXCJcXHV7MUY1MEN9IFNvY2tldCBDb25uZWN0aW9uIGNsb3NlZFwiLCBjb2RlLCByZWFzb24pO1xuICAgICAgdGhpcy5jb25uZWN0aW9uU3RhdGUgPSBcImNsb3NlZFwiO1xuICAgICAgdGhpcy5lbWl0KFwiY2xvc2VkXCIsIGNvZGUpO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIFB1Ymxpc2ggYSBtZXNzYWdlIHRvIHRoZSBzZXJ2ZXIgdXNpbmcgdGhlIHNvY2tldCBjb25uZWN0aW9uIGJhc2VkIG9uIHNvbWUgZXZlbnRzL3RvcGljc1xuICAgKi9cbiAgcHVibGlzaCA9IChldmVudCwgZGF0YSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gbmV3IFJlcXVlc3Qoe1xuICAgICAgICAvLyBAdHMtaWdub3JlIC0gVFMgZG9lc24ndCB1bmRlcnN0YW5kIHRoYXQgdGhlIHZhbHVlIG9mIGV2ZW50IGlzIGEga2V5IG9mIENsaWVudFRvU3VzaGlFdmVudHNcbiAgICAgICAgcmVxdWVzdDoge1xuICAgICAgICAgIGNhc2U6IGV2ZW50LFxuICAgICAgICAgIHZhbHVlOiBuZXcgUHJvdG9SZXF1ZXN0RXZlbnRbZXZlbnRdKGRhdGEpXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgY29uc3QgYmluYXJ5RGF0YSA9IG1lc3NhZ2UudG9CaW5hcnkoKTtcbiAgICAgIHRoaXMud3Muc2VuZChiaW5hcnlEYXRhKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1ezFGNTM0fSBFcnJvciBXaGlsZSBTZW5kaW5nIHRoZSBNZXNzYWdlXCIsIGVycm9yKTtcbiAgICB9XG4gIH07XG4gIC8qKlxuICAgKiBTdWJzY3JpYmUgdG8gYSBzcGVjaWZpYyBldmVudC90b3BpYyBmcm9tIHRoZSBzZXJ2ZXJcbiAgICovXG4gIHN1YnNjcmliZSA9IChldmVudCwgZm4pID0+IHtcbiAgICBpZiAodGhpcy5fX3N1YnNjcmliZWRNYXAuaGFzKGV2ZW50KSkge1xuICAgICAgbG9nZ2VyLndhcm4oXCJcXHUyNkEwXFx1RkUwRiBPdmVycmlkaW5nIGV4aXN0aW5nIGV2ZW50IGhhbmRsZXJcIik7XG4gICAgfVxuICAgIHRoaXMuX19zdWJzY3JpYmVkTWFwLnNldChldmVudCwgZm4pO1xuICB9O1xuICAvKipcbiAgICogR2V0IHRoZSBjb25maWcgdXJsIGZvciB0aGUgc29ja2V0IGNvbm5lY3Rpb24gYmFzZWQgb24gdGhlIHRva2VuIGFuZCByZWdpb25cbiAgICogQHBhcmFtIHRva2VuIExvY2FsIFBlZXIgc3BlY2lmaWMgbWVldGluZyB0b2tlblxuICAgKiBAcGFyYW0gcmVnaW9uIExvY2FsIFBlZXIgc3BlY2lmaWMgcmVnaW9uXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBhc3luYyBfX2dldENvbmZpZ1VybCh0b2tlbiwgcmVnaW9uLCBjb3VudHJ5KSB7XG4gICAgaWYgKHRoaXMuX19FTkRQT0lOVCkge1xuICAgICAgcmV0dXJuIHRoaXMuX19FTkRQT0lOVDtcbiAgICB9XG4gICAgY29uc3QgZm4gPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhcGlTZXJ2ZXJVcmwgPSB0aGlzLmlzTG9jYWxEZXYgPyBcImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9hcGkvdjFcIiA6IFwiaHR0cHM6Ly9hcGlyYS5odWRkbGUwMS5tZWRpYS9hcGkvdjFcIjtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke2FwaVNlcnZlclVybH0vZ2V0U3VzaGlVcmxgLCB7XG4gICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgIGF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiXFx1ezFGNTM0fSBFcnJvciBXaGlsZSBGZXRjaGluZyB0aGUgVXJsXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgeyB1cmwgfSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICB0aGlzLl9fRU5EUE9JTlQgPSB1cmwucmVwbGFjZShcImh0dHBzOi8vXCIsIFwid3NzOi8vXCIpLnJlcGxhY2UoXCJodHRwOi8vXCIsIFwid3M6Ly9cIik7XG4gICAgICBjb25zdCB3c3NBZGRyZXNzID0gYCR7dGhpcy5fX0VORFBPSU5UfS93c2A7XG4gICAgICBjb25zdCB3c0FkZHJlc3MgPSBgJHt3c3NBZGRyZXNzfT8ke1tcbiAgICAgICAgYHRva2VuPSR7dG9rZW59YCxcbiAgICAgICAgYHZlcnNpb249JHtwYWNrYWdlX2RlZmF1bHQudmVyc2lvbn1gLFxuICAgICAgICBgcmVnaW9uPSR7cmVnaW9ufWAsXG4gICAgICAgIGBjb3VudHJ5PSR7Y291bnRyeX1gXG4gICAgICBdLmpvaW4oXCImXCIpfWA7XG4gICAgICB0aGlzLl9fRU5EUE9JTlQgPSB3c0FkZHJlc3M7XG4gICAgICByZXR1cm4gd3NBZGRyZXNzO1xuICAgIH07XG4gICAgcmV0dXJuIGFwaUNhbGxXaXRoUmV0cnkoZm4pO1xuICB9XG4gIC8qKlxuICAgKiAhSW1wb3J0YW50XG4gICAqIEhhbmRsZSB0aGUgaW5jb21pbmcgbWVzc2FnZSBmcm9tIHRoZSBzZXJ2ZXIgYmFzZWQgb24gdGhlIGV2ZW50cyByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXIgYW5kIGNhbGwgdGhlIHN1YnNjcmliZWQgZXZlbnQgaGFuZGxlclxuICAgKi9cbiAgX19oYW5kbGVJbmNvbWluZ01lc3NhZ2UgPSAoZXZlbnQpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZXZlbnREYXRhID0gbmV3IFVpbnQ4QXJyYXkoZXZlbnQuZGF0YSk7XG4gICAgICBjb25zdCBtc2cgPSBSZXNwb25zZS5mcm9tQmluYXJ5KGV2ZW50RGF0YSkuUmVzcG9uc2U7XG4gICAgICBsb2dnZXIuZGVidWcoXCJcXHV7MUY0RTh9IEluY29taW5nIG1lc3NhZ2VcIiwgbXNnKTtcbiAgICAgIGNvbnN0IGV2ZW50TmFtZSA9IG1zZy5jYXNlO1xuICAgICAgaWYgKGV2ZW50TmFtZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlxcdXsxRjUzNH0gQ2FuJ3QgZmluZCB0aGUgZXZlbnQgbmFtZSwgRm91bmQ6IHsgdW5kZWZpbmVkIH1cIik7XG4gICAgICB9XG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShtc2cudmFsdWUpKTtcbiAgICAgIGxvZ2dlci5pbmZvKFwiXFx1ezFGNEU4fSBJbmNvbWluZyBtZXNzYWdlIGV2ZW50IG5hbWU6IFwiLCBldmVudE5hbWUpO1xuICAgICAgY29uc3QgZm4gPSB0aGlzLl9fc3Vic2NyaWJlZE1hcC5nZXQoZXZlbnROYW1lKTtcbiAgICAgIGlmIChmbikge1xuICAgICAgICBmbihkYXRhKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1ezFGNTM0fSBFcnJvcjogSGFuZGxpbmcgSW5jb21pbmcgTWVzc2FnZVwiLCBlcnJvcik7XG4gICAgfVxuICB9O1xuICBfX2hhbmRsZVNvY2tldEVycm9yID0gKGV2KSA9PiB7XG4gICAgbG9nZ2VyLmVycm9yKFwiXFx1Mjc0QyBTb2NrZXQgY29ubmVjdGlvbiBlcnJvclwiLCBldik7XG4gIH07XG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gSGFuZGxlIHRoZSBzb2NrZXQgY2xvc2UgZXZlbnQgd2hpY2ggaXMgc2VudCBieSB0aGUgc2VydmVyXG4gICAqIEBwYXJhbSBldiBDbG9zZUV2ZW50XG4gICAqL1xuICBfX2hhbmRsZVNvY2tldENsb3NlID0gKGV2KSA9PiB7XG4gICAgbG9nZ2VyLmluZm8oXCJcXHV7MUY1MTR9IFNvY2tldCBjb25uZWN0aW9uIGNsb3NlZCBlbWl0dGVkXCIsIGV2KTtcbiAgICBjb25zdCBjb2RlID0gZXYuY29kZTtcbiAgICBjb25zdCByZWFzb24gPSBldi5yZWFzb247XG4gICAgY29uc3QgaXNDbG91ZGZsYXJlQ2xvc2UgPSByZWFzb24/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJjbG91ZGZsYXJlXCIpO1xuICAgIGNvbnN0IGlzUmVhY3ROYXRpdmVTdHJlYW1FbmQgPSBpc1JlYWN0TmF0aXZlKCkgJiYgcmVhc29uPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwic3RyZWFtIGVuZCBlbmNvdW50ZXJlZFwiKTtcbiAgICB0aGlzLmNsb3NlKGNvZGUsIGlzQ2xvdWRmbGFyZUNsb3NlIHx8IGlzUmVhY3ROYXRpdmVTdHJlYW1FbmQpO1xuICB9O1xuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIEhhbmRsZSB0aGUgc29ja2V0IG9wZW4gZXZlbnQgd2hpY2ggaXMgc2VudCBhZnRlciB0aGUgY29ubmVjdGlvbiBpcyBlc3RhYmxpc2hlZCB3aXRoIHRoZSBzZXJ2ZXJcbiAgICogQHBhcmFtIGV2IEV2ZW50XG4gICAqL1xuICBfX2hhbmRsZVNvY2tldE9wZW4gPSAoZXYpID0+IHtcbiAgICBsb2dnZXIuZGVidWcoXCJXZWJTb2NrZXQgQ29ubmVjdGlvbiBPcGVuXCIsIGV2KTtcbiAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZSA9IFwiY29ubmVjdGVkXCI7XG4gICAgdGhpcy5lbWl0KFwiY29ubmVjdGVkXCIpO1xuICB9O1xuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIFJlZ2lzdGVyIHRoZSBzb2NrZXQgZXZlbnRzXG4gICAqIEBwYXJhbSB3cyBXZWJTb2NrZXRcbiAgICovXG4gIF9fcmVnaXN0ZXJTb2NrZXRFdmVudHMgPSAod3MpID0+IHtcbiAgICB3cy5vbmVycm9yID0gdGhpcy5fX2hhbmRsZVNvY2tldEVycm9yO1xuICAgIHdzLm9uY2xvc2UgPSB0aGlzLl9faGFuZGxlU29ja2V0Q2xvc2U7XG4gICAgd3Mub25vcGVuID0gdGhpcy5fX2hhbmRsZVNvY2tldE9wZW47XG4gIH07XG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gVW5yZWdpc3RlciB0aGUgc29ja2V0IGV2ZW50c1xuICAgKiBAcGFyYW0gd3MgV2ViU29ja2V0XG4gICAqL1xuICBfX3VucmVnaXN0ZXJTb2NrZXRFdmVudHMgPSAod3MpID0+IHtcbiAgICB3cy5vbmVycm9yID0gbnVsbDtcbiAgICB3cy5vbmNsb3NlID0gbnVsbDtcbiAgICB3cy5vbm9wZW4gPSBudWxsO1xuICB9O1xufTtcbnZhciBTb2NrZXRfZGVmYXVsdCA9IFNvY2tldDtcblxuZXhwb3J0IHsgRVNvY2tldENsb3NlQ29kZSwgU29ja2V0X2RlZmF1bHQgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-B7NPLGIE.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-BQEIAMKZ.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-BQEIAMKZ.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Room_default: () => (/* binding */ Room_default)\n/* harmony export */ });\n/* harmony import */ var _chunk_B7NPLGIE_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-B7NPLGIE.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-B7NPLGIE.js\");\n/* harmony import */ var _chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-E2DU7IIE.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-E2DU7IIE.js\");\n/* harmony import */ var _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-TOCFOGTC.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-TOCFOGTC.js\");\n/* harmony import */ var _chunk_BW2DGP4D_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunk-BW2DGP4D.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-BW2DGP4D.js\");\n\n\n\n\n\n// src/Room.ts\nvar logger = _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_2__.mainLogger.createSubLogger(\"Room.ts\");\nvar Room = class _Room extends _chunk_BW2DGP4D_js__WEBPACK_IMPORTED_MODULE_3__.EnhancedEventEmitter {\n  /**\n   * Room Instance, Singleton class\n   */\n  static __instance = null;\n  /**\n   * Socket Instance, Singleton class\n   */\n  __socket = _chunk_B7NPLGIE_js__WEBPACK_IMPORTED_MODULE_0__.Socket_default.getInstance();\n  /**\n   * Returns the instance of the socket connection\n   */\n  get socket() {\n    return this.__socket;\n  }\n  /**\n   * Room Id of the current room\n   */\n  __roomId = null;\n  /**\n   * session id\n   */\n  __sessionId = null;\n  /**\n   * Lobby PeerIds\n   */\n  __lobbyPeers = /* @__PURE__ */ new Map();\n  /**\n   * Removed Lobby PeerId from the lobby\n   * @param peerId - PeerId of the peer who joined the room\n   */\n  removeLobbyPeer = (peerId) => {\n    this.__lobbyPeers.delete(peerId);\n    this.emit(\"lobby-peers-updated\", this.lobbyPeerIds);\n  };\n  /**\n   * Room Config Object\n   * - `allowProduce`: Allow non-admin Peers in the Room to produce Media Streams\n   * - `allowConsume`: Allow non-admin Peers in the Room to consume Media Streams\n   * - `allowSendData`: Allow non-admin Peers in the Room to send data message\n   * - `roomLocked`: If the room is locked\n   */\n  __config = {\n    roomLocked: false,\n    allowProduce: true,\n    allowProduceSources: {\n      cam: true,\n      mic: true,\n      screen: true\n    },\n    allowConsume: true,\n    allowSendData: true\n  };\n  /**\n   * Auto consume flag, if set to true, Peers Joining the Room will automatically consume the media streams of the remote peers\n   *\n   * @default true\n   *\n   * @remarks - This flag is used by the `useRoom` hook to automatically consume the media streams of the remote peers,\n   * - if set to false, the user will have to manually consume the media streams of the remote peers\n   * using the `consume` method of the `LocalPeer` instance `localPeer.consume({ peerId, label: \"video\", appData: {} });`\n   */\n  autoConsume = true;\n  /**\n   * Default Active Speaker Size, if not provided in the room config object\n   * @default 0\n   * @remarks - To update the active speaker size, you can use function `room.activeSpeakers.updateSize(size: number)`\n   */\n  __defaultActiveSpeakerSize = 0;\n  /**\n   * Get the default active speaker size which can be updated using option `activeSpeaker` when initializing the HuddleClient.\n   * @remarks - To update the active speaker while inside the meeting, use the function `room.activeSpeakers.updateSize(size: number)`\n   */\n  get defaultActiveSpeakerSize() {\n    return this.__defaultActiveSpeakerSize;\n  }\n  /**\n   * Handler for the ActiveSpeaker\n   */\n  __activeSpeakers = null;\n  /**\n   * Get the active speakers instance\n   */\n  get activeSpeakers() {\n    return this.__activeSpeakers;\n  }\n  set activeSpeakers(activeSpeakers) {\n    if (this.__activeSpeakers) {\n      logger.warn(\n        \"Active Speakers is already set, Ignoring the new active speakers, end this room and create a new room\"\n      );\n    }\n    this.__activeSpeakers = activeSpeakers;\n  }\n  /**\n   * Bot Instance, which is used to manage Volatile Messages inside the SDK.\n   */\n  __bot = null;\n  get bot() {\n    return this.__bot;\n  }\n  set bot(bot) {\n    if (this.__bot) {\n      logger.warn(\n        \"Bot is already set, Ignoring the new bot, end this room and create a new room\"\n      );\n    }\n    this.__bot = bot;\n    this.__bot.on(\"received-volatile-data\", (data) => {\n      this.emit(\"received-volatile-data\", data);\n    });\n  }\n  /**\n   * State of the Room\n   */\n  __state = \"idle\";\n  /**\n   * Room Stats\n   */\n  __stats = {\n    startTime: 0\n  };\n  /**\n   * Set the state of the room\n   */\n  set state(newState) {\n    if (this.state !== newState) {\n      this.__state = newState;\n    }\n  }\n  /**\n   * State of the room\n   */\n  get state() {\n    return this.__state;\n  }\n  /**\n   * Get the lobby peers in the form of map\n   * @returns - Map of Lobby PeerIds, with the metadata, {peerId ==> {peerId, metadata}}\n   * @example\n   * ```ts\n   * const lobbyPeers = room.lobbyPeersMap;\n   *\n   * for (const [peerId, metadata] of lobbyPeers) {}\n   *\n   * ```\n   */\n  get lobbyPeersMap() {\n    return this.__lobbyPeers;\n  }\n  /**\n   * Get lobby peers in the form of array\n   */\n  get lobbyPeerIds() {\n    return Array.from(this.__lobbyPeers.keys());\n  }\n  /**\n   * Get lobby peers in the form of array\n   * @returns - Array of Lobby PeerIds\n   */\n  get lobbyPeers() {\n    return this.__lobbyPeers;\n  }\n  /**\n   * Set lobby peers in the form of map\n   * `NOTE: This function is an internal function of the SDK, Used to emit evnts based on changes`\n   */\n  set lobbyPeersMap(peers) {\n    this.__lobbyPeers = peers;\n    this.emit(\"lobby-peers-updated\", this.lobbyPeerIds);\n  }\n  /**\n   * Get Room Stats\n   */\n  get stats() {\n    return this.__stats;\n  }\n  /**\n   * Set Room Stats\n   */\n  set stats(stats) {\n    this.__stats = stats;\n  }\n  /**\n   * Get\n   * @returns\n   */\n  getLobbyPeerMetadata = (peerId) => {\n    const lobbyPeer = this.lobbyPeers.get(peerId);\n    let metadata = {};\n    if (lobbyPeer?.metadata) {\n      metadata = JSON.parse(lobbyPeer.metadata);\n    }\n    return {\n      peerId,\n      metadata\n    };\n  };\n  /**\n   * Set lobby peers in the form of array\n   */\n  set newlobbyPeers(peers) {\n    for (const peer of peers) {\n      this.__lobbyPeers.set(peer.peerId, peer);\n      this.emit(\"new-lobby-peer\", peer);\n    }\n    this.emit(\"lobby-peers-updated\", this.lobbyPeerIds);\n  }\n  /**\n   * Room Config Object\n   * - `allowProduce`: Allow non-admin Peers in the Room to produce Media Streams\n   * - `allowConsume`: Allow non-admin Peers in the Room to consume Media Streams\n   * - `allowSendData`: Allow non-admin Peers in the Room to send data message\n   * - `roomLocked`: If the room is locked\n   */\n  get config() {\n    return this.__config;\n  }\n  set config(config) {\n    this.__config = config;\n  }\n  /**\n   * Remote Peers Map, Stores all the remote peers\n   */\n  remotePeers = /* @__PURE__ */ new Map();\n  /**\n   * Metadata of the room.\n   */\n  __metadata = \"{}\";\n  /**\n   * Setter function for the metadata of the room\n   * `Note: This will not update the metadata of the room, this is just a setter function for the metadata`\n   * `To notify everyone in the room about the metadata change, use the updateMetadata function`\n   */\n  set metadata(metadata) {\n    this.__metadata = metadata;\n    const parse = JSON.parse(metadata);\n    this.emit(\"metadata-updated\", parse);\n  }\n  /**\n   * Get the metadata of the room\n   */\n  getMetadata = () => {\n    const data = JSON.parse(this.__metadata || \"{}\");\n    return data;\n  };\n  /**\n   * Update Metadata of the room\n   * @throws { Error } If Request Failed to Update Metadata\n   */\n  updateMetadata = (0,_chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_1__.checkPermissions)({ admin: true }).validate(\n    async (data) => {\n      try {\n        if (this.state === \"closed\" || this.state === \"failed\" || this.state === \"left\") {\n          logger.error(\n            \"\\u274C Cannot Update Metadata, You have not joined the room yet\"\n          );\n          return;\n        }\n        const metadata = JSON.stringify(data);\n        this.metadata = metadata;\n        this.socket.publish(\"updateRoomMetadata\", {\n          metadata\n        });\n      } catch (error) {\n        logger.error(\"\\u274C Error Updating Metadata\");\n        logger.error(error);\n      }\n    }\n  );\n  /**\n   * Create a new Room Instance if not created, else return the existing Room Instance\n   *\n   * @returns - Room Instance\n   */\n  static create(data) {\n    if (_Room.__instance) {\n      return _Room.__instance;\n    }\n    _Room.__instance = new _Room(data);\n    return _Room.__instance;\n  }\n  /**\n   * Get the Room Instance if its not initialized it will throw an error\n   * @returns - Room Instance\n   * @throws { Error } If the Room Instance is not initialized\n   */\n  static getInstance = () => {\n    if (!_Room.__instance) {\n      throw new Error(\"\\u274C Room Instance Not Initialized\");\n    }\n    return _Room.__instance;\n  };\n  /**\n   * RoomId of the currently joined room.\n   */\n  get roomId() {\n    return this.__roomId;\n  }\n  /**\n   *\n   */\n  get sessionId() {\n    return this.__sessionId;\n  }\n  set roomId(roomId) {\n    if (this.__roomId) {\n      logger.warn(\n        \"RoomId is already set, Ignoring the new roomId, end this room and create a new room\"\n      );\n      return;\n    }\n    this.__roomId = roomId;\n  }\n  set sessionId(sessionId) {\n    if (this.__sessionId) {\n      logger.warn(\n        \"sessionId is already set, Ignoring the new sessionId, end this room and create a new room\"\n      );\n      return;\n    }\n    this.__sessionId = sessionId;\n  }\n  /**\n   * Returns the PeerIds of the remote peers\n   */\n  get peerIds() {\n    return Array.from(this.remotePeers.keys());\n  }\n  /**\n   * @description Update room control booleans - roomLocked, allowProduce, allowConsume, allowSendData\n   * @param data: TNewRoomControls\n   * @throws { Error } If the Peer Calling this Functions is not an admin, then the permissions will not be updated\n   */\n  updateRoomControls = (0,_chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_1__.checkPermissions)({\n    admin: true\n  }).validate(async (data) => {\n    logger.info(\"\\u{1F514} Updating Room Controls\", data);\n    this.config[data.type] = data.value;\n    this.emit(\"room-controls-updated\");\n    if (data.type === \"allowProduceSources\") {\n      this.socket.publish(\"updateRoomControls\", {\n        control: {\n          case: \"produceSourcesControl\",\n          value: data\n        }\n      });\n    } else {\n      this.socket.publish(\"updateRoomControls\", {\n        control: {\n          case: \"roomControl\",\n          value: data\n        }\n      });\n    }\n  });\n  /**\n   * Close a particular stream of remote peers\n   *  @param data: { label: string; peerIds?: string[] }\n   *  @param label: Label of the stream\n   *  @param peerIds: PeerIds of the remote peers, if not provided, it will close the stream of all the remote peers\n   * @throws { Error } If the Peer Calling this Function is not an admin, then the permissions will not be updated\n   */\n  closeStreamOfLabel = (0,_chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_1__.checkPermissions)({ admin: true }).validate(\n    async (data) => {\n      logger.info(\"\\u{1F514} Closing Stream of Label\", data);\n      this.socket.publish(\"closeStreamOfLabel\", data);\n    }\n  );\n  /**\n   * Mute everyone in the room. This will close the audio stream of all the remote peers who dont have admin permissions\n   *\n   * `NOTE: This will target all the audio stream in the room with the label \"audio\"`\n   *\n   * @throws { Error } If the Peer Calling this Function is not an admin, then the permissions will not be updated\n   */\n  muteEveryone = (0,_chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_1__.checkPermissions)({ admin: true }).validate(async () => {\n    logger.info(\"\\u{1F514} Muting Everyone\");\n    this.socket.publish(\"closeStreamOfLabel\", {\n      label: \"audio\"\n    });\n  });\n  /**\n   * Returns the Remote Peer with the given peerId is present in the room. Returns null if the peer is not present in the room.\n   *\n   * @param peerId - PeerId of the remote peer\n   * @returns - RemotePeer Instance\n   * @return - null if the peer is not present in the room\n   */\n  remotePeerExists = (peerId) => {\n    const peer = this.remotePeers.get(peerId);\n    if (!peer) {\n      return null;\n    }\n    return peer;\n  };\n  /**\n   * Returns the Remote Peer if present in room.\n   * @param peerId - PeerId of the remote peer\n   * @returns - RemotePeer Instance\n   * @throws { Error } If the Remote Peer is not found\n   */\n  getRemotePeerById(peerId) {\n    const peer = this.remotePeers.get(peerId);\n    if (!peer) {\n      throw new Error(`Remote Peer Not Found, peerId: ${peerId}`);\n    }\n    return peer;\n  }\n  constructor(data) {\n    super();\n    if (data?.autoConsume !== void 0) {\n      this.autoConsume = data.autoConsume;\n    }\n    if (data?.activeSpeakers && data.activeSpeakers.size !== this.__defaultActiveSpeakerSize) {\n      this.__defaultActiveSpeakerSize = data.activeSpeakers.size;\n    }\n  }\n  /**\n   * Connects to the room and returns the instance of the room,\n   *\n   * @param data - roomId to connect to, make sure the roomId matches the roomId in the token used to connect the socket, else it will throw an error\n   * @throws { Error } If the socket connection is not connected, or if the socket connection is connecting\n   */\n  connect = (data) => {\n    if (_Room.__instance === null) {\n      throw new Error(\"Room Instance Not Initialized\");\n    }\n    if (!data.roomId) {\n      throw new Error(\"Room Id is required to connect to the room\");\n    }\n    this.__roomId = data.roomId;\n    if (!this.socket.connected) {\n      throw new Error(\"Socket is Not Connected\");\n    }\n    if (this.socket.connecting) {\n      throw new Error(\"Socket is Connecting, Wait for it to be connected\");\n    }\n    logger.info(\"\\u{1F514} Connecting to the room\");\n    this.socket.publish(\"connectRoom\", { roomId: data.roomId });\n    this.__state = \"connecting\";\n    this.emit(\"room-connecting\");\n    return _Room.__instance;\n  };\n  /**\n   * Admit a Peer to the room who is in the lobby\n   *\n   * @throws {Error} If the Peer Calling this Function is not an admin, then the permissions will not be updated\n   */\n  admitPeer = (0,_chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_1__.checkPermissions)({ admin: true }).validate(\n    async (peerId) => {\n      try {\n        this.removeLobbyPeer(peerId);\n        this.socket.publish(\"acceptLobbyPeer\", { peerId });\n      } catch (error) {\n        logger.error(\"\\u{1F534} Error admitting peer\", error);\n      }\n    }\n  );\n  /**\n   * Denies the peer from joining the room, who is in the lobby\n   */\n  denyPeer = (0,_chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_1__.checkPermissions)({ admin: true }).validate(\n    async (peerId) => {\n      try {\n        this.removeLobbyPeer(peerId);\n        this.socket.publish(\"denyLobbyPeer\", { peerId });\n      } catch (error) {\n        logger.error(\"\\u{1F534} Error denying peer\", error);\n      }\n    }\n  );\n  /**\n   * kick peer from room with respective peerId\n   * @throws { Error } If the Peer Calling this Function is not an admin, then the permissions will not be updated\n   */\n  kickPeer = (0,_chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_1__.checkPermissions)({ admin: true }).validate(\n    async (peerId) => {\n      try {\n        this.socket.publish(\"kickPeer\", { peerId });\n      } catch (error) {\n        logger.error(\"\\u{1F534} Error denying peer\", error);\n      }\n    }\n  );\n  /**\n   * closing the room for the current user, room will keep on running for the remote users\n   */\n  close = (reason) => {\n    try {\n      logger.info(\"\\u{1F534} Leaving the room\");\n      this.__roomId = null;\n      this.__sessionId = null;\n      this.remotePeers.clear();\n      this.lobbyPeers.clear();\n      this.metadata = \"{}\";\n      if (this.__activeSpeakers) {\n        this.__activeSpeakers.close();\n      }\n      this.__activeSpeakers = null;\n      this.__defaultActiveSpeakerSize = 8;\n      this.__bot?.close();\n      this.__bot = null;\n      this.state = \"left\";\n      this.emit(\"room-closed\", { reason: reason || \"LEFT\" });\n    } catch (error) {\n      logger.error(\"Error: Leaving the Room\");\n    }\n  };\n};\nvar Room_default = Room;\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstQlFFSUFNS1ouanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBcUQ7QUFDRTtBQUNOO0FBQ1U7O0FBRTNEO0FBQ0EsYUFBYSwwREFBVTtBQUN2QiwrQkFBK0Isb0VBQW9CO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSw4REFBYztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlGQUFpRixxQ0FBcUMsRUFBRTtBQUN4SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsWUFBWTtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxtQkFBbUIsb0VBQWdCLEdBQUcsYUFBYTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSx1QkFBdUIsb0VBQWdCO0FBQ3ZDO0FBQ0EsR0FBRztBQUNILG9CQUFvQixPQUFPO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLHFCQUFxQixlQUFlO0FBQ3BDO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSx1QkFBdUIsb0VBQWdCLEdBQUcsYUFBYTtBQUN2RDtBQUNBLHNCQUFzQixPQUFPO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxpQkFBaUIsb0VBQWdCLEdBQUcsYUFBYTtBQUNqRCxvQkFBb0IsT0FBTztBQUMzQjtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsT0FBTztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsT0FBTztBQUMzQix5Q0FBeUMscUJBQXFCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxPQUFPO0FBQ3JCO0FBQ0EsY0FBYyxvRUFBZ0IsR0FBRyxhQUFhO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxRQUFRO0FBQ3pELFFBQVE7QUFDUix5QkFBeUIsT0FBTztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLG9FQUFnQixHQUFHLGFBQWE7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLFFBQVE7QUFDdkQsUUFBUTtBQUNSLHlCQUF5QixPQUFPO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxhQUFhLG9FQUFnQixHQUFHLGFBQWE7QUFDN0M7QUFDQTtBQUNBLDBDQUEwQyxRQUFRO0FBQ2xELFFBQVE7QUFDUix5QkFBeUIsT0FBTztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLE9BQU87QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQywwQkFBMEI7QUFDM0QsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRXdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9rZW1vbi1nYW1lLWV0aGluZGlhLTEvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstQlFFSUFNS1ouanM/MzEzZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTb2NrZXRfZGVmYXVsdCB9IGZyb20gJy4vY2h1bmstQjdOUExHSUUuanMnO1xuaW1wb3J0IHsgY2hlY2tQZXJtaXNzaW9ucyB9IGZyb20gJy4vY2h1bmstRTJEVTdJSUUuanMnO1xuaW1wb3J0IHsgbWFpbkxvZ2dlciB9IGZyb20gJy4vY2h1bmstVE9DRk9HVEMuanMnO1xuaW1wb3J0IHsgRW5oYW5jZWRFdmVudEVtaXR0ZXIgfSBmcm9tICcuL2NodW5rLUJXMkRHUDRELmpzJztcblxuLy8gc3JjL1Jvb20udHNcbnZhciBsb2dnZXIgPSBtYWluTG9nZ2VyLmNyZWF0ZVN1YkxvZ2dlcihcIlJvb20udHNcIik7XG52YXIgUm9vbSA9IGNsYXNzIF9Sb29tIGV4dGVuZHMgRW5oYW5jZWRFdmVudEVtaXR0ZXIge1xuICAvKipcbiAgICogUm9vbSBJbnN0YW5jZSwgU2luZ2xldG9uIGNsYXNzXG4gICAqL1xuICBzdGF0aWMgX19pbnN0YW5jZSA9IG51bGw7XG4gIC8qKlxuICAgKiBTb2NrZXQgSW5zdGFuY2UsIFNpbmdsZXRvbiBjbGFzc1xuICAgKi9cbiAgX19zb2NrZXQgPSBTb2NrZXRfZGVmYXVsdC5nZXRJbnN0YW5jZSgpO1xuICAvKipcbiAgICogUmV0dXJucyB0aGUgaW5zdGFuY2Ugb2YgdGhlIHNvY2tldCBjb25uZWN0aW9uXG4gICAqL1xuICBnZXQgc29ja2V0KCkge1xuICAgIHJldHVybiB0aGlzLl9fc29ja2V0O1xuICB9XG4gIC8qKlxuICAgKiBSb29tIElkIG9mIHRoZSBjdXJyZW50IHJvb21cbiAgICovXG4gIF9fcm9vbUlkID0gbnVsbDtcbiAgLyoqXG4gICAqIHNlc3Npb24gaWRcbiAgICovXG4gIF9fc2Vzc2lvbklkID0gbnVsbDtcbiAgLyoqXG4gICAqIExvYmJ5IFBlZXJJZHNcbiAgICovXG4gIF9fbG9iYnlQZWVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIC8qKlxuICAgKiBSZW1vdmVkIExvYmJ5IFBlZXJJZCBmcm9tIHRoZSBsb2JieVxuICAgKiBAcGFyYW0gcGVlcklkIC0gUGVlcklkIG9mIHRoZSBwZWVyIHdobyBqb2luZWQgdGhlIHJvb21cbiAgICovXG4gIHJlbW92ZUxvYmJ5UGVlciA9IChwZWVySWQpID0+IHtcbiAgICB0aGlzLl9fbG9iYnlQZWVycy5kZWxldGUocGVlcklkKTtcbiAgICB0aGlzLmVtaXQoXCJsb2JieS1wZWVycy11cGRhdGVkXCIsIHRoaXMubG9iYnlQZWVySWRzKTtcbiAgfTtcbiAgLyoqXG4gICAqIFJvb20gQ29uZmlnIE9iamVjdFxuICAgKiAtIGBhbGxvd1Byb2R1Y2VgOiBBbGxvdyBub24tYWRtaW4gUGVlcnMgaW4gdGhlIFJvb20gdG8gcHJvZHVjZSBNZWRpYSBTdHJlYW1zXG4gICAqIC0gYGFsbG93Q29uc3VtZWA6IEFsbG93IG5vbi1hZG1pbiBQZWVycyBpbiB0aGUgUm9vbSB0byBjb25zdW1lIE1lZGlhIFN0cmVhbXNcbiAgICogLSBgYWxsb3dTZW5kRGF0YWA6IEFsbG93IG5vbi1hZG1pbiBQZWVycyBpbiB0aGUgUm9vbSB0byBzZW5kIGRhdGEgbWVzc2FnZVxuICAgKiAtIGByb29tTG9ja2VkYDogSWYgdGhlIHJvb20gaXMgbG9ja2VkXG4gICAqL1xuICBfX2NvbmZpZyA9IHtcbiAgICByb29tTG9ja2VkOiBmYWxzZSxcbiAgICBhbGxvd1Byb2R1Y2U6IHRydWUsXG4gICAgYWxsb3dQcm9kdWNlU291cmNlczoge1xuICAgICAgY2FtOiB0cnVlLFxuICAgICAgbWljOiB0cnVlLFxuICAgICAgc2NyZWVuOiB0cnVlXG4gICAgfSxcbiAgICBhbGxvd0NvbnN1bWU6IHRydWUsXG4gICAgYWxsb3dTZW5kRGF0YTogdHJ1ZVxuICB9O1xuICAvKipcbiAgICogQXV0byBjb25zdW1lIGZsYWcsIGlmIHNldCB0byB0cnVlLCBQZWVycyBKb2luaW5nIHRoZSBSb29tIHdpbGwgYXV0b21hdGljYWxseSBjb25zdW1lIHRoZSBtZWRpYSBzdHJlYW1zIG9mIHRoZSByZW1vdGUgcGVlcnNcbiAgICpcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKlxuICAgKiBAcmVtYXJrcyAtIFRoaXMgZmxhZyBpcyB1c2VkIGJ5IHRoZSBgdXNlUm9vbWAgaG9vayB0byBhdXRvbWF0aWNhbGx5IGNvbnN1bWUgdGhlIG1lZGlhIHN0cmVhbXMgb2YgdGhlIHJlbW90ZSBwZWVycyxcbiAgICogLSBpZiBzZXQgdG8gZmFsc2UsIHRoZSB1c2VyIHdpbGwgaGF2ZSB0byBtYW51YWxseSBjb25zdW1lIHRoZSBtZWRpYSBzdHJlYW1zIG9mIHRoZSByZW1vdGUgcGVlcnNcbiAgICogdXNpbmcgdGhlIGBjb25zdW1lYCBtZXRob2Qgb2YgdGhlIGBMb2NhbFBlZXJgIGluc3RhbmNlIGBsb2NhbFBlZXIuY29uc3VtZSh7IHBlZXJJZCwgbGFiZWw6IFwidmlkZW9cIiwgYXBwRGF0YToge30gfSk7YFxuICAgKi9cbiAgYXV0b0NvbnN1bWUgPSB0cnVlO1xuICAvKipcbiAgICogRGVmYXVsdCBBY3RpdmUgU3BlYWtlciBTaXplLCBpZiBub3QgcHJvdmlkZWQgaW4gdGhlIHJvb20gY29uZmlnIG9iamVjdFxuICAgKiBAZGVmYXVsdCAwXG4gICAqIEByZW1hcmtzIC0gVG8gdXBkYXRlIHRoZSBhY3RpdmUgc3BlYWtlciBzaXplLCB5b3UgY2FuIHVzZSBmdW5jdGlvbiBgcm9vbS5hY3RpdmVTcGVha2Vycy51cGRhdGVTaXplKHNpemU6IG51bWJlcilgXG4gICAqL1xuICBfX2RlZmF1bHRBY3RpdmVTcGVha2VyU2l6ZSA9IDA7XG4gIC8qKlxuICAgKiBHZXQgdGhlIGRlZmF1bHQgYWN0aXZlIHNwZWFrZXIgc2l6ZSB3aGljaCBjYW4gYmUgdXBkYXRlZCB1c2luZyBvcHRpb24gYGFjdGl2ZVNwZWFrZXJgIHdoZW4gaW5pdGlhbGl6aW5nIHRoZSBIdWRkbGVDbGllbnQuXG4gICAqIEByZW1hcmtzIC0gVG8gdXBkYXRlIHRoZSBhY3RpdmUgc3BlYWtlciB3aGlsZSBpbnNpZGUgdGhlIG1lZXRpbmcsIHVzZSB0aGUgZnVuY3Rpb24gYHJvb20uYWN0aXZlU3BlYWtlcnMudXBkYXRlU2l6ZShzaXplOiBudW1iZXIpYFxuICAgKi9cbiAgZ2V0IGRlZmF1bHRBY3RpdmVTcGVha2VyU2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fX2RlZmF1bHRBY3RpdmVTcGVha2VyU2l6ZTtcbiAgfVxuICAvKipcbiAgICogSGFuZGxlciBmb3IgdGhlIEFjdGl2ZVNwZWFrZXJcbiAgICovXG4gIF9fYWN0aXZlU3BlYWtlcnMgPSBudWxsO1xuICAvKipcbiAgICogR2V0IHRoZSBhY3RpdmUgc3BlYWtlcnMgaW5zdGFuY2VcbiAgICovXG4gIGdldCBhY3RpdmVTcGVha2VycygpIHtcbiAgICByZXR1cm4gdGhpcy5fX2FjdGl2ZVNwZWFrZXJzO1xuICB9XG4gIHNldCBhY3RpdmVTcGVha2VycyhhY3RpdmVTcGVha2Vycykge1xuICAgIGlmICh0aGlzLl9fYWN0aXZlU3BlYWtlcnMpIHtcbiAgICAgIGxvZ2dlci53YXJuKFxuICAgICAgICBcIkFjdGl2ZSBTcGVha2VycyBpcyBhbHJlYWR5IHNldCwgSWdub3JpbmcgdGhlIG5ldyBhY3RpdmUgc3BlYWtlcnMsIGVuZCB0aGlzIHJvb20gYW5kIGNyZWF0ZSBhIG5ldyByb29tXCJcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMuX19hY3RpdmVTcGVha2VycyA9IGFjdGl2ZVNwZWFrZXJzO1xuICB9XG4gIC8qKlxuICAgKiBCb3QgSW5zdGFuY2UsIHdoaWNoIGlzIHVzZWQgdG8gbWFuYWdlIFZvbGF0aWxlIE1lc3NhZ2VzIGluc2lkZSB0aGUgU0RLLlxuICAgKi9cbiAgX19ib3QgPSBudWxsO1xuICBnZXQgYm90KCkge1xuICAgIHJldHVybiB0aGlzLl9fYm90O1xuICB9XG4gIHNldCBib3QoYm90KSB7XG4gICAgaWYgKHRoaXMuX19ib3QpIHtcbiAgICAgIGxvZ2dlci53YXJuKFxuICAgICAgICBcIkJvdCBpcyBhbHJlYWR5IHNldCwgSWdub3JpbmcgdGhlIG5ldyBib3QsIGVuZCB0aGlzIHJvb20gYW5kIGNyZWF0ZSBhIG5ldyByb29tXCJcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMuX19ib3QgPSBib3Q7XG4gICAgdGhpcy5fX2JvdC5vbihcInJlY2VpdmVkLXZvbGF0aWxlLWRhdGFcIiwgKGRhdGEpID0+IHtcbiAgICAgIHRoaXMuZW1pdChcInJlY2VpdmVkLXZvbGF0aWxlLWRhdGFcIiwgZGF0YSk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFN0YXRlIG9mIHRoZSBSb29tXG4gICAqL1xuICBfX3N0YXRlID0gXCJpZGxlXCI7XG4gIC8qKlxuICAgKiBSb29tIFN0YXRzXG4gICAqL1xuICBfX3N0YXRzID0ge1xuICAgIHN0YXJ0VGltZTogMFxuICB9O1xuICAvKipcbiAgICogU2V0IHRoZSBzdGF0ZSBvZiB0aGUgcm9vbVxuICAgKi9cbiAgc2V0IHN0YXRlKG5ld1N0YXRlKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUgIT09IG5ld1N0YXRlKSB7XG4gICAgICB0aGlzLl9fc3RhdGUgPSBuZXdTdGF0ZTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFN0YXRlIG9mIHRoZSByb29tXG4gICAqL1xuICBnZXQgc3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX19zdGF0ZTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBsb2JieSBwZWVycyBpbiB0aGUgZm9ybSBvZiBtYXBcbiAgICogQHJldHVybnMgLSBNYXAgb2YgTG9iYnkgUGVlcklkcywgd2l0aCB0aGUgbWV0YWRhdGEsIHtwZWVySWQgPT0+IHtwZWVySWQsIG1ldGFkYXRhfX1cbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogY29uc3QgbG9iYnlQZWVycyA9IHJvb20ubG9iYnlQZWVyc01hcDtcbiAgICpcbiAgICogZm9yIChjb25zdCBbcGVlcklkLCBtZXRhZGF0YV0gb2YgbG9iYnlQZWVycykge31cbiAgICpcbiAgICogYGBgXG4gICAqL1xuICBnZXQgbG9iYnlQZWVyc01hcCgpIHtcbiAgICByZXR1cm4gdGhpcy5fX2xvYmJ5UGVlcnM7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBsb2JieSBwZWVycyBpbiB0aGUgZm9ybSBvZiBhcnJheVxuICAgKi9cbiAgZ2V0IGxvYmJ5UGVlcklkcygpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLl9fbG9iYnlQZWVycy5rZXlzKCkpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgbG9iYnkgcGVlcnMgaW4gdGhlIGZvcm0gb2YgYXJyYXlcbiAgICogQHJldHVybnMgLSBBcnJheSBvZiBMb2JieSBQZWVySWRzXG4gICAqL1xuICBnZXQgbG9iYnlQZWVycygpIHtcbiAgICByZXR1cm4gdGhpcy5fX2xvYmJ5UGVlcnM7XG4gIH1cbiAgLyoqXG4gICAqIFNldCBsb2JieSBwZWVycyBpbiB0aGUgZm9ybSBvZiBtYXBcbiAgICogYE5PVEU6IFRoaXMgZnVuY3Rpb24gaXMgYW4gaW50ZXJuYWwgZnVuY3Rpb24gb2YgdGhlIFNESywgVXNlZCB0byBlbWl0IGV2bnRzIGJhc2VkIG9uIGNoYW5nZXNgXG4gICAqL1xuICBzZXQgbG9iYnlQZWVyc01hcChwZWVycykge1xuICAgIHRoaXMuX19sb2JieVBlZXJzID0gcGVlcnM7XG4gICAgdGhpcy5lbWl0KFwibG9iYnktcGVlcnMtdXBkYXRlZFwiLCB0aGlzLmxvYmJ5UGVlcklkcyk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBSb29tIFN0YXRzXG4gICAqL1xuICBnZXQgc3RhdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX19zdGF0cztcbiAgfVxuICAvKipcbiAgICogU2V0IFJvb20gU3RhdHNcbiAgICovXG4gIHNldCBzdGF0cyhzdGF0cykge1xuICAgIHRoaXMuX19zdGF0cyA9IHN0YXRzO1xuICB9XG4gIC8qKlxuICAgKiBHZXRcbiAgICogQHJldHVybnNcbiAgICovXG4gIGdldExvYmJ5UGVlck1ldGFkYXRhID0gKHBlZXJJZCkgPT4ge1xuICAgIGNvbnN0IGxvYmJ5UGVlciA9IHRoaXMubG9iYnlQZWVycy5nZXQocGVlcklkKTtcbiAgICBsZXQgbWV0YWRhdGEgPSB7fTtcbiAgICBpZiAobG9iYnlQZWVyPy5tZXRhZGF0YSkge1xuICAgICAgbWV0YWRhdGEgPSBKU09OLnBhcnNlKGxvYmJ5UGVlci5tZXRhZGF0YSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBwZWVySWQsXG4gICAgICBtZXRhZGF0YVxuICAgIH07XG4gIH07XG4gIC8qKlxuICAgKiBTZXQgbG9iYnkgcGVlcnMgaW4gdGhlIGZvcm0gb2YgYXJyYXlcbiAgICovXG4gIHNldCBuZXdsb2JieVBlZXJzKHBlZXJzKSB7XG4gICAgZm9yIChjb25zdCBwZWVyIG9mIHBlZXJzKSB7XG4gICAgICB0aGlzLl9fbG9iYnlQZWVycy5zZXQocGVlci5wZWVySWQsIHBlZXIpO1xuICAgICAgdGhpcy5lbWl0KFwibmV3LWxvYmJ5LXBlZXJcIiwgcGVlcik7XG4gICAgfVxuICAgIHRoaXMuZW1pdChcImxvYmJ5LXBlZXJzLXVwZGF0ZWRcIiwgdGhpcy5sb2JieVBlZXJJZHMpO1xuICB9XG4gIC8qKlxuICAgKiBSb29tIENvbmZpZyBPYmplY3RcbiAgICogLSBgYWxsb3dQcm9kdWNlYDogQWxsb3cgbm9uLWFkbWluIFBlZXJzIGluIHRoZSBSb29tIHRvIHByb2R1Y2UgTWVkaWEgU3RyZWFtc1xuICAgKiAtIGBhbGxvd0NvbnN1bWVgOiBBbGxvdyBub24tYWRtaW4gUGVlcnMgaW4gdGhlIFJvb20gdG8gY29uc3VtZSBNZWRpYSBTdHJlYW1zXG4gICAqIC0gYGFsbG93U2VuZERhdGFgOiBBbGxvdyBub24tYWRtaW4gUGVlcnMgaW4gdGhlIFJvb20gdG8gc2VuZCBkYXRhIG1lc3NhZ2VcbiAgICogLSBgcm9vbUxvY2tlZGA6IElmIHRoZSByb29tIGlzIGxvY2tlZFxuICAgKi9cbiAgZ2V0IGNvbmZpZygpIHtcbiAgICByZXR1cm4gdGhpcy5fX2NvbmZpZztcbiAgfVxuICBzZXQgY29uZmlnKGNvbmZpZykge1xuICAgIHRoaXMuX19jb25maWcgPSBjb25maWc7XG4gIH1cbiAgLyoqXG4gICAqIFJlbW90ZSBQZWVycyBNYXAsIFN0b3JlcyBhbGwgdGhlIHJlbW90ZSBwZWVyc1xuICAgKi9cbiAgcmVtb3RlUGVlcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAvKipcbiAgICogTWV0YWRhdGEgb2YgdGhlIHJvb20uXG4gICAqL1xuICBfX21ldGFkYXRhID0gXCJ7fVwiO1xuICAvKipcbiAgICogU2V0dGVyIGZ1bmN0aW9uIGZvciB0aGUgbWV0YWRhdGEgb2YgdGhlIHJvb21cbiAgICogYE5vdGU6IFRoaXMgd2lsbCBub3QgdXBkYXRlIHRoZSBtZXRhZGF0YSBvZiB0aGUgcm9vbSwgdGhpcyBpcyBqdXN0IGEgc2V0dGVyIGZ1bmN0aW9uIGZvciB0aGUgbWV0YWRhdGFgXG4gICAqIGBUbyBub3RpZnkgZXZlcnlvbmUgaW4gdGhlIHJvb20gYWJvdXQgdGhlIG1ldGFkYXRhIGNoYW5nZSwgdXNlIHRoZSB1cGRhdGVNZXRhZGF0YSBmdW5jdGlvbmBcbiAgICovXG4gIHNldCBtZXRhZGF0YShtZXRhZGF0YSkge1xuICAgIHRoaXMuX19tZXRhZGF0YSA9IG1ldGFkYXRhO1xuICAgIGNvbnN0IHBhcnNlID0gSlNPTi5wYXJzZShtZXRhZGF0YSk7XG4gICAgdGhpcy5lbWl0KFwibWV0YWRhdGEtdXBkYXRlZFwiLCBwYXJzZSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgbWV0YWRhdGEgb2YgdGhlIHJvb21cbiAgICovXG4gIGdldE1ldGFkYXRhID0gKCkgPT4ge1xuICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHRoaXMuX19tZXRhZGF0YSB8fCBcInt9XCIpO1xuICAgIHJldHVybiBkYXRhO1xuICB9O1xuICAvKipcbiAgICogVXBkYXRlIE1ldGFkYXRhIG9mIHRoZSByb29tXG4gICAqIEB0aHJvd3MgeyBFcnJvciB9IElmIFJlcXVlc3QgRmFpbGVkIHRvIFVwZGF0ZSBNZXRhZGF0YVxuICAgKi9cbiAgdXBkYXRlTWV0YWRhdGEgPSBjaGVja1Blcm1pc3Npb25zKHsgYWRtaW46IHRydWUgfSkudmFsaWRhdGUoXG4gICAgYXN5bmMgKGRhdGEpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBcImNsb3NlZFwiIHx8IHRoaXMuc3RhdGUgPT09IFwiZmFpbGVkXCIgfHwgdGhpcy5zdGF0ZSA9PT0gXCJsZWZ0XCIpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgICAgICBcIlxcdTI3NEMgQ2Fubm90IFVwZGF0ZSBNZXRhZGF0YSwgWW91IGhhdmUgbm90IGpvaW5lZCB0aGUgcm9vbSB5ZXRcIlxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBtZXRhZGF0YTtcbiAgICAgICAgdGhpcy5zb2NrZXQucHVibGlzaChcInVwZGF0ZVJvb21NZXRhZGF0YVwiLCB7XG4gICAgICAgICAgbWV0YWRhdGFcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIEVycm9yIFVwZGF0aW5nIE1ldGFkYXRhXCIpO1xuICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBSb29tIEluc3RhbmNlIGlmIG5vdCBjcmVhdGVkLCBlbHNlIHJldHVybiB0aGUgZXhpc3RpbmcgUm9vbSBJbnN0YW5jZVxuICAgKlxuICAgKiBAcmV0dXJucyAtIFJvb20gSW5zdGFuY2VcbiAgICovXG4gIHN0YXRpYyBjcmVhdGUoZGF0YSkge1xuICAgIGlmIChfUm9vbS5fX2luc3RhbmNlKSB7XG4gICAgICByZXR1cm4gX1Jvb20uX19pbnN0YW5jZTtcbiAgICB9XG4gICAgX1Jvb20uX19pbnN0YW5jZSA9IG5ldyBfUm9vbShkYXRhKTtcbiAgICByZXR1cm4gX1Jvb20uX19pbnN0YW5jZTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBSb29tIEluc3RhbmNlIGlmIGl0cyBub3QgaW5pdGlhbGl6ZWQgaXQgd2lsbCB0aHJvdyBhbiBlcnJvclxuICAgKiBAcmV0dXJucyAtIFJvb20gSW5zdGFuY2VcbiAgICogQHRocm93cyB7IEVycm9yIH0gSWYgdGhlIFJvb20gSW5zdGFuY2UgaXMgbm90IGluaXRpYWxpemVkXG4gICAqL1xuICBzdGF0aWMgZ2V0SW5zdGFuY2UgPSAoKSA9PiB7XG4gICAgaWYgKCFfUm9vbS5fX2luc3RhbmNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcXHUyNzRDIFJvb20gSW5zdGFuY2UgTm90IEluaXRpYWxpemVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gX1Jvb20uX19pbnN0YW5jZTtcbiAgfTtcbiAgLyoqXG4gICAqIFJvb21JZCBvZiB0aGUgY3VycmVudGx5IGpvaW5lZCByb29tLlxuICAgKi9cbiAgZ2V0IHJvb21JZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fX3Jvb21JZDtcbiAgfVxuICAvKipcbiAgICpcbiAgICovXG4gIGdldCBzZXNzaW9uSWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX19zZXNzaW9uSWQ7XG4gIH1cbiAgc2V0IHJvb21JZChyb29tSWQpIHtcbiAgICBpZiAodGhpcy5fX3Jvb21JZCkge1xuICAgICAgbG9nZ2VyLndhcm4oXG4gICAgICAgIFwiUm9vbUlkIGlzIGFscmVhZHkgc2V0LCBJZ25vcmluZyB0aGUgbmV3IHJvb21JZCwgZW5kIHRoaXMgcm9vbSBhbmQgY3JlYXRlIGEgbmV3IHJvb21cIlxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fX3Jvb21JZCA9IHJvb21JZDtcbiAgfVxuICBzZXQgc2Vzc2lvbklkKHNlc3Npb25JZCkge1xuICAgIGlmICh0aGlzLl9fc2Vzc2lvbklkKSB7XG4gICAgICBsb2dnZXIud2FybihcbiAgICAgICAgXCJzZXNzaW9uSWQgaXMgYWxyZWFkeSBzZXQsIElnbm9yaW5nIHRoZSBuZXcgc2Vzc2lvbklkLCBlbmQgdGhpcyByb29tIGFuZCBjcmVhdGUgYSBuZXcgcm9vbVwiXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9fc2Vzc2lvbklkID0gc2Vzc2lvbklkO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBQZWVySWRzIG9mIHRoZSByZW1vdGUgcGVlcnNcbiAgICovXG4gIGdldCBwZWVySWRzKCkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucmVtb3RlUGVlcnMua2V5cygpKTtcbiAgfVxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIFVwZGF0ZSByb29tIGNvbnRyb2wgYm9vbGVhbnMgLSByb29tTG9ja2VkLCBhbGxvd1Byb2R1Y2UsIGFsbG93Q29uc3VtZSwgYWxsb3dTZW5kRGF0YVxuICAgKiBAcGFyYW0gZGF0YTogVE5ld1Jvb21Db250cm9sc1xuICAgKiBAdGhyb3dzIHsgRXJyb3IgfSBJZiB0aGUgUGVlciBDYWxsaW5nIHRoaXMgRnVuY3Rpb25zIGlzIG5vdCBhbiBhZG1pbiwgdGhlbiB0aGUgcGVybWlzc2lvbnMgd2lsbCBub3QgYmUgdXBkYXRlZFxuICAgKi9cbiAgdXBkYXRlUm9vbUNvbnRyb2xzID0gY2hlY2tQZXJtaXNzaW9ucyh7XG4gICAgYWRtaW46IHRydWVcbiAgfSkudmFsaWRhdGUoYXN5bmMgKGRhdGEpID0+IHtcbiAgICBsb2dnZXIuaW5mbyhcIlxcdXsxRjUxNH0gVXBkYXRpbmcgUm9vbSBDb250cm9sc1wiLCBkYXRhKTtcbiAgICB0aGlzLmNvbmZpZ1tkYXRhLnR5cGVdID0gZGF0YS52YWx1ZTtcbiAgICB0aGlzLmVtaXQoXCJyb29tLWNvbnRyb2xzLXVwZGF0ZWRcIik7XG4gICAgaWYgKGRhdGEudHlwZSA9PT0gXCJhbGxvd1Byb2R1Y2VTb3VyY2VzXCIpIHtcbiAgICAgIHRoaXMuc29ja2V0LnB1Ymxpc2goXCJ1cGRhdGVSb29tQ29udHJvbHNcIiwge1xuICAgICAgICBjb250cm9sOiB7XG4gICAgICAgICAgY2FzZTogXCJwcm9kdWNlU291cmNlc0NvbnRyb2xcIixcbiAgICAgICAgICB2YWx1ZTogZGF0YVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zb2NrZXQucHVibGlzaChcInVwZGF0ZVJvb21Db250cm9sc1wiLCB7XG4gICAgICAgIGNvbnRyb2w6IHtcbiAgICAgICAgICBjYXNlOiBcInJvb21Db250cm9sXCIsXG4gICAgICAgICAgdmFsdWU6IGRhdGFcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgLyoqXG4gICAqIENsb3NlIGEgcGFydGljdWxhciBzdHJlYW0gb2YgcmVtb3RlIHBlZXJzXG4gICAqICBAcGFyYW0gZGF0YTogeyBsYWJlbDogc3RyaW5nOyBwZWVySWRzPzogc3RyaW5nW10gfVxuICAgKiAgQHBhcmFtIGxhYmVsOiBMYWJlbCBvZiB0aGUgc3RyZWFtXG4gICAqICBAcGFyYW0gcGVlcklkczogUGVlcklkcyBvZiB0aGUgcmVtb3RlIHBlZXJzLCBpZiBub3QgcHJvdmlkZWQsIGl0IHdpbGwgY2xvc2UgdGhlIHN0cmVhbSBvZiBhbGwgdGhlIHJlbW90ZSBwZWVyc1xuICAgKiBAdGhyb3dzIHsgRXJyb3IgfSBJZiB0aGUgUGVlciBDYWxsaW5nIHRoaXMgRnVuY3Rpb24gaXMgbm90IGFuIGFkbWluLCB0aGVuIHRoZSBwZXJtaXNzaW9ucyB3aWxsIG5vdCBiZSB1cGRhdGVkXG4gICAqL1xuICBjbG9zZVN0cmVhbU9mTGFiZWwgPSBjaGVja1Blcm1pc3Npb25zKHsgYWRtaW46IHRydWUgfSkudmFsaWRhdGUoXG4gICAgYXN5bmMgKGRhdGEpID0+IHtcbiAgICAgIGxvZ2dlci5pbmZvKFwiXFx1ezFGNTE0fSBDbG9zaW5nIFN0cmVhbSBvZiBMYWJlbFwiLCBkYXRhKTtcbiAgICAgIHRoaXMuc29ja2V0LnB1Ymxpc2goXCJjbG9zZVN0cmVhbU9mTGFiZWxcIiwgZGF0YSk7XG4gICAgfVxuICApO1xuICAvKipcbiAgICogTXV0ZSBldmVyeW9uZSBpbiB0aGUgcm9vbS4gVGhpcyB3aWxsIGNsb3NlIHRoZSBhdWRpbyBzdHJlYW0gb2YgYWxsIHRoZSByZW1vdGUgcGVlcnMgd2hvIGRvbnQgaGF2ZSBhZG1pbiBwZXJtaXNzaW9uc1xuICAgKlxuICAgKiBgTk9URTogVGhpcyB3aWxsIHRhcmdldCBhbGwgdGhlIGF1ZGlvIHN0cmVhbSBpbiB0aGUgcm9vbSB3aXRoIHRoZSBsYWJlbCBcImF1ZGlvXCJgXG4gICAqXG4gICAqIEB0aHJvd3MgeyBFcnJvciB9IElmIHRoZSBQZWVyIENhbGxpbmcgdGhpcyBGdW5jdGlvbiBpcyBub3QgYW4gYWRtaW4sIHRoZW4gdGhlIHBlcm1pc3Npb25zIHdpbGwgbm90IGJlIHVwZGF0ZWRcbiAgICovXG4gIG11dGVFdmVyeW9uZSA9IGNoZWNrUGVybWlzc2lvbnMoeyBhZG1pbjogdHJ1ZSB9KS52YWxpZGF0ZShhc3luYyAoKSA9PiB7XG4gICAgbG9nZ2VyLmluZm8oXCJcXHV7MUY1MTR9IE11dGluZyBFdmVyeW9uZVwiKTtcbiAgICB0aGlzLnNvY2tldC5wdWJsaXNoKFwiY2xvc2VTdHJlYW1PZkxhYmVsXCIsIHtcbiAgICAgIGxhYmVsOiBcImF1ZGlvXCJcbiAgICB9KTtcbiAgfSk7XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBSZW1vdGUgUGVlciB3aXRoIHRoZSBnaXZlbiBwZWVySWQgaXMgcHJlc2VudCBpbiB0aGUgcm9vbS4gUmV0dXJucyBudWxsIGlmIHRoZSBwZWVyIGlzIG5vdCBwcmVzZW50IGluIHRoZSByb29tLlxuICAgKlxuICAgKiBAcGFyYW0gcGVlcklkIC0gUGVlcklkIG9mIHRoZSByZW1vdGUgcGVlclxuICAgKiBAcmV0dXJucyAtIFJlbW90ZVBlZXIgSW5zdGFuY2VcbiAgICogQHJldHVybiAtIG51bGwgaWYgdGhlIHBlZXIgaXMgbm90IHByZXNlbnQgaW4gdGhlIHJvb21cbiAgICovXG4gIHJlbW90ZVBlZXJFeGlzdHMgPSAocGVlcklkKSA9PiB7XG4gICAgY29uc3QgcGVlciA9IHRoaXMucmVtb3RlUGVlcnMuZ2V0KHBlZXJJZCk7XG4gICAgaWYgKCFwZWVyKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHBlZXI7XG4gIH07XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBSZW1vdGUgUGVlciBpZiBwcmVzZW50IGluIHJvb20uXG4gICAqIEBwYXJhbSBwZWVySWQgLSBQZWVySWQgb2YgdGhlIHJlbW90ZSBwZWVyXG4gICAqIEByZXR1cm5zIC0gUmVtb3RlUGVlciBJbnN0YW5jZVxuICAgKiBAdGhyb3dzIHsgRXJyb3IgfSBJZiB0aGUgUmVtb3RlIFBlZXIgaXMgbm90IGZvdW5kXG4gICAqL1xuICBnZXRSZW1vdGVQZWVyQnlJZChwZWVySWQpIHtcbiAgICBjb25zdCBwZWVyID0gdGhpcy5yZW1vdGVQZWVycy5nZXQocGVlcklkKTtcbiAgICBpZiAoIXBlZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUmVtb3RlIFBlZXIgTm90IEZvdW5kLCBwZWVySWQ6ICR7cGVlcklkfWApO1xuICAgIH1cbiAgICByZXR1cm4gcGVlcjtcbiAgfVxuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBpZiAoZGF0YT8uYXV0b0NvbnN1bWUgIT09IHZvaWQgMCkge1xuICAgICAgdGhpcy5hdXRvQ29uc3VtZSA9IGRhdGEuYXV0b0NvbnN1bWU7XG4gICAgfVxuICAgIGlmIChkYXRhPy5hY3RpdmVTcGVha2VycyAmJiBkYXRhLmFjdGl2ZVNwZWFrZXJzLnNpemUgIT09IHRoaXMuX19kZWZhdWx0QWN0aXZlU3BlYWtlclNpemUpIHtcbiAgICAgIHRoaXMuX19kZWZhdWx0QWN0aXZlU3BlYWtlclNpemUgPSBkYXRhLmFjdGl2ZVNwZWFrZXJzLnNpemU7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDb25uZWN0cyB0byB0aGUgcm9vbSBhbmQgcmV0dXJucyB0aGUgaW5zdGFuY2Ugb2YgdGhlIHJvb20sXG4gICAqXG4gICAqIEBwYXJhbSBkYXRhIC0gcm9vbUlkIHRvIGNvbm5lY3QgdG8sIG1ha2Ugc3VyZSB0aGUgcm9vbUlkIG1hdGNoZXMgdGhlIHJvb21JZCBpbiB0aGUgdG9rZW4gdXNlZCB0byBjb25uZWN0IHRoZSBzb2NrZXQsIGVsc2UgaXQgd2lsbCB0aHJvdyBhbiBlcnJvclxuICAgKiBAdGhyb3dzIHsgRXJyb3IgfSBJZiB0aGUgc29ja2V0IGNvbm5lY3Rpb24gaXMgbm90IGNvbm5lY3RlZCwgb3IgaWYgdGhlIHNvY2tldCBjb25uZWN0aW9uIGlzIGNvbm5lY3RpbmdcbiAgICovXG4gIGNvbm5lY3QgPSAoZGF0YSkgPT4ge1xuICAgIGlmIChfUm9vbS5fX2luc3RhbmNlID09PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSb29tIEluc3RhbmNlIE5vdCBJbml0aWFsaXplZFwiKTtcbiAgICB9XG4gICAgaWYgKCFkYXRhLnJvb21JZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUm9vbSBJZCBpcyByZXF1aXJlZCB0byBjb25uZWN0IHRvIHRoZSByb29tXCIpO1xuICAgIH1cbiAgICB0aGlzLl9fcm9vbUlkID0gZGF0YS5yb29tSWQ7XG4gICAgaWYgKCF0aGlzLnNvY2tldC5jb25uZWN0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvY2tldCBpcyBOb3QgQ29ubmVjdGVkXCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zb2NrZXQuY29ubmVjdGluZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU29ja2V0IGlzIENvbm5lY3RpbmcsIFdhaXQgZm9yIGl0IHRvIGJlIGNvbm5lY3RlZFwiKTtcbiAgICB9XG4gICAgbG9nZ2VyLmluZm8oXCJcXHV7MUY1MTR9IENvbm5lY3RpbmcgdG8gdGhlIHJvb21cIik7XG4gICAgdGhpcy5zb2NrZXQucHVibGlzaChcImNvbm5lY3RSb29tXCIsIHsgcm9vbUlkOiBkYXRhLnJvb21JZCB9KTtcbiAgICB0aGlzLl9fc3RhdGUgPSBcImNvbm5lY3RpbmdcIjtcbiAgICB0aGlzLmVtaXQoXCJyb29tLWNvbm5lY3RpbmdcIik7XG4gICAgcmV0dXJuIF9Sb29tLl9faW5zdGFuY2U7XG4gIH07XG4gIC8qKlxuICAgKiBBZG1pdCBhIFBlZXIgdG8gdGhlIHJvb20gd2hvIGlzIGluIHRoZSBsb2JieVxuICAgKlxuICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIFBlZXIgQ2FsbGluZyB0aGlzIEZ1bmN0aW9uIGlzIG5vdCBhbiBhZG1pbiwgdGhlbiB0aGUgcGVybWlzc2lvbnMgd2lsbCBub3QgYmUgdXBkYXRlZFxuICAgKi9cbiAgYWRtaXRQZWVyID0gY2hlY2tQZXJtaXNzaW9ucyh7IGFkbWluOiB0cnVlIH0pLnZhbGlkYXRlKFxuICAgIGFzeW5jIChwZWVySWQpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMucmVtb3ZlTG9iYnlQZWVyKHBlZXJJZCk7XG4gICAgICAgIHRoaXMuc29ja2V0LnB1Ymxpc2goXCJhY2NlcHRMb2JieVBlZXJcIiwgeyBwZWVySWQgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJcXHV7MUY1MzR9IEVycm9yIGFkbWl0dGluZyBwZWVyXCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG4gIC8qKlxuICAgKiBEZW5pZXMgdGhlIHBlZXIgZnJvbSBqb2luaW5nIHRoZSByb29tLCB3aG8gaXMgaW4gdGhlIGxvYmJ5XG4gICAqL1xuICBkZW55UGVlciA9IGNoZWNrUGVybWlzc2lvbnMoeyBhZG1pbjogdHJ1ZSB9KS52YWxpZGF0ZShcbiAgICBhc3luYyAocGVlcklkKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLnJlbW92ZUxvYmJ5UGVlcihwZWVySWQpO1xuICAgICAgICB0aGlzLnNvY2tldC5wdWJsaXNoKFwiZGVueUxvYmJ5UGVlclwiLCB7IHBlZXJJZCB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIlxcdXsxRjUzNH0gRXJyb3IgZGVueWluZyBwZWVyXCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG4gIC8qKlxuICAgKiBraWNrIHBlZXIgZnJvbSByb29tIHdpdGggcmVzcGVjdGl2ZSBwZWVySWRcbiAgICogQHRocm93cyB7IEVycm9yIH0gSWYgdGhlIFBlZXIgQ2FsbGluZyB0aGlzIEZ1bmN0aW9uIGlzIG5vdCBhbiBhZG1pbiwgdGhlbiB0aGUgcGVybWlzc2lvbnMgd2lsbCBub3QgYmUgdXBkYXRlZFxuICAgKi9cbiAga2lja1BlZXIgPSBjaGVja1Blcm1pc3Npb25zKHsgYWRtaW46IHRydWUgfSkudmFsaWRhdGUoXG4gICAgYXN5bmMgKHBlZXJJZCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5zb2NrZXQucHVibGlzaChcImtpY2tQZWVyXCIsIHsgcGVlcklkIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1ezFGNTM0fSBFcnJvciBkZW55aW5nIHBlZXJcIiwgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbiAgLyoqXG4gICAqIGNsb3NpbmcgdGhlIHJvb20gZm9yIHRoZSBjdXJyZW50IHVzZXIsIHJvb20gd2lsbCBrZWVwIG9uIHJ1bm5pbmcgZm9yIHRoZSByZW1vdGUgdXNlcnNcbiAgICovXG4gIGNsb3NlID0gKHJlYXNvbikgPT4ge1xuICAgIHRyeSB7XG4gICAgICBsb2dnZXIuaW5mbyhcIlxcdXsxRjUzNH0gTGVhdmluZyB0aGUgcm9vbVwiKTtcbiAgICAgIHRoaXMuX19yb29tSWQgPSBudWxsO1xuICAgICAgdGhpcy5fX3Nlc3Npb25JZCA9IG51bGw7XG4gICAgICB0aGlzLnJlbW90ZVBlZXJzLmNsZWFyKCk7XG4gICAgICB0aGlzLmxvYmJ5UGVlcnMuY2xlYXIoKTtcbiAgICAgIHRoaXMubWV0YWRhdGEgPSBcInt9XCI7XG4gICAgICBpZiAodGhpcy5fX2FjdGl2ZVNwZWFrZXJzKSB7XG4gICAgICAgIHRoaXMuX19hY3RpdmVTcGVha2Vycy5jbG9zZSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5fX2FjdGl2ZVNwZWFrZXJzID0gbnVsbDtcbiAgICAgIHRoaXMuX19kZWZhdWx0QWN0aXZlU3BlYWtlclNpemUgPSA4O1xuICAgICAgdGhpcy5fX2JvdD8uY2xvc2UoKTtcbiAgICAgIHRoaXMuX19ib3QgPSBudWxsO1xuICAgICAgdGhpcy5zdGF0ZSA9IFwibGVmdFwiO1xuICAgICAgdGhpcy5lbWl0KFwicm9vbS1jbG9zZWRcIiwgeyByZWFzb246IHJlYXNvbiB8fCBcIkxFRlRcIiB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3I6IExlYXZpbmcgdGhlIFJvb21cIik7XG4gICAgfVxuICB9O1xufTtcbnZhciBSb29tX2RlZmF1bHQgPSBSb29tO1xuXG5leHBvcnQgeyBSb29tX2RlZmF1bHQgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-BQEIAMKZ.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-BW2DGP4D.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-BW2DGP4D.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EnhancedEventEmitter: () => (/* binding */ EnhancedEventEmitter)\n/* harmony export */ });\n/* harmony import */ var _chunk_JSBRDJBE_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-JSBRDJBE.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-JSBRDJBE.js\");\n\n\n// ../../node_modules/events/events.js\nvar require_events = (0,_chunk_JSBRDJBE_js__WEBPACK_IMPORTED_MODULE_0__.__commonJS)({\n  \"../../node_modules/events/events.js\"(exports, module) {\n    var R = typeof Reflect === \"object\" ? Reflect : null;\n    var ReflectApply = R && typeof R.apply === \"function\" ? R.apply : function ReflectApply2(target, receiver, args) {\n      return Function.prototype.apply.call(target, receiver, args);\n    };\n    var ReflectOwnKeys;\n    if (R && typeof R.ownKeys === \"function\") {\n      ReflectOwnKeys = R.ownKeys;\n    } else if (Object.getOwnPropertySymbols) {\n      ReflectOwnKeys = function ReflectOwnKeys2(target) {\n        return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));\n      };\n    } else {\n      ReflectOwnKeys = function ReflectOwnKeys2(target) {\n        return Object.getOwnPropertyNames(target);\n      };\n    }\n    function ProcessEmitWarning(warning) {\n      if (console && console.warn) console.warn(warning);\n    }\n    var NumberIsNaN = Number.isNaN || function NumberIsNaN2(value) {\n      return value !== value;\n    };\n    function EventEmitter2() {\n      EventEmitter2.init.call(this);\n    }\n    module.exports = EventEmitter2;\n    module.exports.once = once;\n    EventEmitter2.EventEmitter = EventEmitter2;\n    EventEmitter2.prototype._events = void 0;\n    EventEmitter2.prototype._eventsCount = 0;\n    EventEmitter2.prototype._maxListeners = void 0;\n    var defaultMaxListeners = 10;\n    function checkListener(listener) {\n      if (typeof listener !== \"function\") {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n    }\n    Object.defineProperty(EventEmitter2, \"defaultMaxListeners\", {\n      enumerable: true,\n      get: function() {\n        return defaultMaxListeners;\n      },\n      set: function(arg) {\n        if (typeof arg !== \"number\" || arg < 0 || NumberIsNaN(arg)) {\n          throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + \".\");\n        }\n        defaultMaxListeners = arg;\n      }\n    });\n    EventEmitter2.init = function() {\n      if (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) {\n        this._events = /* @__PURE__ */ Object.create(null);\n        this._eventsCount = 0;\n      }\n      this._maxListeners = this._maxListeners || void 0;\n    };\n    EventEmitter2.prototype.setMaxListeners = function setMaxListeners(n) {\n      if (typeof n !== \"number\" || n < 0 || NumberIsNaN(n)) {\n        throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + \".\");\n      }\n      this._maxListeners = n;\n      return this;\n    };\n    function _getMaxListeners(that) {\n      if (that._maxListeners === void 0)\n        return EventEmitter2.defaultMaxListeners;\n      return that._maxListeners;\n    }\n    EventEmitter2.prototype.getMaxListeners = function getMaxListeners() {\n      return _getMaxListeners(this);\n    };\n    EventEmitter2.prototype.emit = function emit(type) {\n      var args = [];\n      for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n      var doError = type === \"error\";\n      var events = this._events;\n      if (events !== void 0)\n        doError = doError && events.error === void 0;\n      else if (!doError)\n        return false;\n      if (doError) {\n        var er;\n        if (args.length > 0)\n          er = args[0];\n        if (er instanceof Error) {\n          throw er;\n        }\n        var err = new Error(\"Unhandled error.\" + (er ? \" (\" + er.message + \")\" : \"\"));\n        err.context = er;\n        throw err;\n      }\n      var handler = events[type];\n      if (handler === void 0)\n        return false;\n      if (typeof handler === \"function\") {\n        ReflectApply(handler, this, args);\n      } else {\n        var len = handler.length;\n        var listeners = arrayClone(handler, len);\n        for (var i = 0; i < len; ++i)\n          ReflectApply(listeners[i], this, args);\n      }\n      return true;\n    };\n    function _addListener(target, type, listener, prepend) {\n      var m;\n      var events;\n      var existing;\n      checkListener(listener);\n      events = target._events;\n      if (events === void 0) {\n        events = target._events = /* @__PURE__ */ Object.create(null);\n        target._eventsCount = 0;\n      } else {\n        if (events.newListener !== void 0) {\n          target.emit(\n            \"newListener\",\n            type,\n            listener.listener ? listener.listener : listener\n          );\n          events = target._events;\n        }\n        existing = events[type];\n      }\n      if (existing === void 0) {\n        existing = events[type] = listener;\n        ++target._eventsCount;\n      } else {\n        if (typeof existing === \"function\") {\n          existing = events[type] = prepend ? [listener, existing] : [existing, listener];\n        } else if (prepend) {\n          existing.unshift(listener);\n        } else {\n          existing.push(listener);\n        }\n        m = _getMaxListeners(target);\n        if (m > 0 && existing.length > m && !existing.warned) {\n          existing.warned = true;\n          var w = new Error(\"Possible EventEmitter memory leak detected. \" + existing.length + \" \" + String(type) + \" listeners added. Use emitter.setMaxListeners() to increase limit\");\n          w.name = \"MaxListenersExceededWarning\";\n          w.emitter = target;\n          w.type = type;\n          w.count = existing.length;\n          ProcessEmitWarning(w);\n        }\n      }\n      return target;\n    }\n    EventEmitter2.prototype.addListener = function addListener(type, listener) {\n      return _addListener(this, type, listener, false);\n    };\n    EventEmitter2.prototype.on = EventEmitter2.prototype.addListener;\n    EventEmitter2.prototype.prependListener = function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n    function onceWrapper() {\n      if (!this.fired) {\n        this.target.removeListener(this.type, this.wrapFn);\n        this.fired = true;\n        if (arguments.length === 0)\n          return this.listener.call(this.target);\n        return this.listener.apply(this.target, arguments);\n      }\n    }\n    function _onceWrap(target, type, listener) {\n      var state = { fired: false, wrapFn: void 0, target, type, listener };\n      var wrapped = onceWrapper.bind(state);\n      wrapped.listener = listener;\n      state.wrapFn = wrapped;\n      return wrapped;\n    }\n    EventEmitter2.prototype.once = function once2(type, listener) {\n      checkListener(listener);\n      this.on(type, _onceWrap(this, type, listener));\n      return this;\n    };\n    EventEmitter2.prototype.prependOnceListener = function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n    EventEmitter2.prototype.removeListener = function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n      checkListener(listener);\n      events = this._events;\n      if (events === void 0)\n        return this;\n      list = events[type];\n      if (list === void 0)\n        return this;\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = /* @__PURE__ */ Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit(\"removeListener\", type, list.listener || listener);\n        }\n      } else if (typeof list !== \"function\") {\n        position = -1;\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n        if (position < 0)\n          return this;\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n        if (list.length === 1)\n          events[type] = list[0];\n        if (events.removeListener !== void 0)\n          this.emit(\"removeListener\", type, originalListener || listener);\n      }\n      return this;\n    };\n    EventEmitter2.prototype.off = EventEmitter2.prototype.removeListener;\n    EventEmitter2.prototype.removeAllListeners = function removeAllListeners(type) {\n      var listeners, events, i;\n      events = this._events;\n      if (events === void 0)\n        return this;\n      if (events.removeListener === void 0) {\n        if (arguments.length === 0) {\n          this._events = /* @__PURE__ */ Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== void 0) {\n          if (--this._eventsCount === 0)\n            this._events = /* @__PURE__ */ Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === \"removeListener\") continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners(\"removeListener\");\n        this._events = /* @__PURE__ */ Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n      listeners = events[type];\n      if (typeof listeners === \"function\") {\n        this.removeListener(type, listeners);\n      } else if (listeners !== void 0) {\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n      return this;\n    };\n    function _listeners(target, type, unwrap) {\n      var events = target._events;\n      if (events === void 0)\n        return [];\n      var evlistener = events[type];\n      if (evlistener === void 0)\n        return [];\n      if (typeof evlistener === \"function\")\n        return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n      return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n    }\n    EventEmitter2.prototype.listeners = function listeners(type) {\n      return _listeners(this, type, true);\n    };\n    EventEmitter2.prototype.rawListeners = function rawListeners(type) {\n      return _listeners(this, type, false);\n    };\n    EventEmitter2.listenerCount = function(emitter, type) {\n      if (typeof emitter.listenerCount === \"function\") {\n        return emitter.listenerCount(type);\n      } else {\n        return listenerCount.call(emitter, type);\n      }\n    };\n    EventEmitter2.prototype.listenerCount = listenerCount;\n    function listenerCount(type) {\n      var events = this._events;\n      if (events !== void 0) {\n        var evlistener = events[type];\n        if (typeof evlistener === \"function\") {\n          return 1;\n        } else if (evlistener !== void 0) {\n          return evlistener.length;\n        }\n      }\n      return 0;\n    }\n    EventEmitter2.prototype.eventNames = function eventNames() {\n      return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n    };\n    function arrayClone(arr, n) {\n      var copy = new Array(n);\n      for (var i = 0; i < n; ++i)\n        copy[i] = arr[i];\n      return copy;\n    }\n    function spliceOne(list, index) {\n      for (; index + 1 < list.length; index++)\n        list[index] = list[index + 1];\n      list.pop();\n    }\n    function unwrapListeners(arr) {\n      var ret = new Array(arr.length);\n      for (var i = 0; i < ret.length; ++i) {\n        ret[i] = arr[i].listener || arr[i];\n      }\n      return ret;\n    }\n    function once(emitter, name) {\n      return new Promise(function(resolve, reject) {\n        function errorListener(err) {\n          emitter.removeListener(name, resolver);\n          reject(err);\n        }\n        function resolver() {\n          if (typeof emitter.removeListener === \"function\") {\n            emitter.removeListener(\"error\", errorListener);\n          }\n          resolve([].slice.call(arguments));\n        }\n        eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n        if (name !== \"error\") {\n          addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n        }\n      });\n    }\n    function addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n      if (typeof emitter.on === \"function\") {\n        eventTargetAgnosticAddListener(emitter, \"error\", handler, flags);\n      }\n    }\n    function eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n      if (typeof emitter.on === \"function\") {\n        if (flags.once) {\n          emitter.once(name, listener);\n        } else {\n          emitter.on(name, listener);\n        }\n      } else if (typeof emitter.addEventListener === \"function\") {\n        emitter.addEventListener(name, function wrapListener(arg) {\n          if (flags.once) {\n            emitter.removeEventListener(name, wrapListener);\n          }\n          listener(arg);\n        });\n      } else {\n        throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n      }\n    }\n  }\n});\n\n// src/common-js/EnhancedEventEmitter.ts\nvar import_events = (0,_chunk_JSBRDJBE_js__WEBPACK_IMPORTED_MODULE_0__.__toESM)(require_events(), 1);\nvar EnhancedEventEmitter = class {\n  emitter;\n  constructor() {\n    this.emitter = new import_events.EventEmitter();\n    this.emitter.setMaxListeners(Number.POSITIVE_INFINITY);\n  }\n  on(eventName, listener) {\n    this.emitter.on(\n      eventName,\n      // biome-ignore lint/suspicious/noExplicitAny: need to override the type because default it's any[ and we cannot assign E[K] to any[]\n      listener\n    );\n    return this;\n  }\n  off(eventName, listener) {\n    this.emitter.off(\n      eventName,\n      // biome-ignore lint/suspicious/noExplicitAny: <explanation>\n      listener\n    );\n    return this;\n  }\n  listenerCount(eventName) {\n    return this.emitter.listenerCount(eventName);\n  }\n  listeners(eventName) {\n    return this.emitter.listeners(eventName);\n  }\n  emit(eventName, ...args) {\n    return this.emitter.emit(eventName, ...args);\n  }\n  safeEmit(eventName, ...args) {\n    return this.emitter.emit(eventName, ...args);\n  }\n  once(eventName, listener) {\n    this.emitter.once(\n      eventName,\n      // biome-ignore lint/suspicious/noExplicitAny: <explanation>\n      listener\n    );\n    return this;\n  }\n  removeAllListeners(eventName) {\n    if (eventName) {\n      this.emitter.removeAllListeners(eventName);\n    } else {\n      this.emitter.removeAllListeners();\n    }\n    return this;\n  }\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstQlcyREdQNEQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMEQ7O0FBRTFEO0FBQ0EscUJBQXFCLDhEQUFVO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixzQkFBc0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLHdCQUF3QixTQUFTO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0Esa0NBQWtDLFFBQVE7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlCQUFpQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsdUNBQXVDLFFBQVE7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsT0FBTztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEseUJBQXlCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsZ0JBQWdCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLFlBQVk7QUFDOUU7QUFDQSxrRUFBa0UsWUFBWTtBQUM5RTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBLG9CQUFvQiwyREFBTztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFZ0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2tlbW9uLWdhbWUtZXRoaW5kaWEtMS8uL25vZGVfbW9kdWxlcy9AaHVkZGxlMDEvd2ViLWNvcmUvZGlzdC9jaHVuay1CVzJER1A0RC5qcz85MDI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fY29tbW9uSlMsIF9fdG9FU00gfSBmcm9tICcuL2NodW5rLUpTQlJESkJFLmpzJztcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanNcbnZhciByZXF1aXJlX2V2ZW50cyA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy9ldmVudHMvZXZlbnRzLmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgdmFyIFIgPSB0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiA/IFJlZmxlY3QgOiBudWxsO1xuICAgIHZhciBSZWZsZWN0QXBwbHkgPSBSICYmIHR5cGVvZiBSLmFwcGx5ID09PSBcImZ1bmN0aW9uXCIgPyBSLmFwcGx5IDogZnVuY3Rpb24gUmVmbGVjdEFwcGx5Mih0YXJnZXQsIHJlY2VpdmVyLCBhcmdzKSB7XG4gICAgICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwodGFyZ2V0LCByZWNlaXZlciwgYXJncyk7XG4gICAgfTtcbiAgICB2YXIgUmVmbGVjdE93bktleXM7XG4gICAgaWYgKFIgJiYgdHlwZW9mIFIub3duS2V5cyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBSZWZsZWN0T3duS2V5cyA9IFIub3duS2V5cztcbiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgICAgIFJlZmxlY3RPd25LZXlzID0gZnVuY3Rpb24gUmVmbGVjdE93bktleXMyKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGFyZ2V0KS5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0YXJnZXQpKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIFJlZmxlY3RPd25LZXlzID0gZnVuY3Rpb24gUmVmbGVjdE93bktleXMyKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGFyZ2V0KTtcbiAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIFByb2Nlc3NFbWl0V2FybmluZyh3YXJuaW5nKSB7XG4gICAgICBpZiAoY29uc29sZSAmJiBjb25zb2xlLndhcm4pIGNvbnNvbGUud2Fybih3YXJuaW5nKTtcbiAgICB9XG4gICAgdmFyIE51bWJlcklzTmFOID0gTnVtYmVyLmlzTmFOIHx8IGZ1bmN0aW9uIE51bWJlcklzTmFOMih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlICE9PSB2YWx1ZTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIEV2ZW50RW1pdHRlcjIoKSB7XG4gICAgICBFdmVudEVtaXR0ZXIyLmluaXQuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXIyO1xuICAgIG1vZHVsZS5leHBvcnRzLm9uY2UgPSBvbmNlO1xuICAgIEV2ZW50RW1pdHRlcjIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyMjtcbiAgICBFdmVudEVtaXR0ZXIyLnByb3RvdHlwZS5fZXZlbnRzID0gdm9pZCAwO1xuICAgIEV2ZW50RW1pdHRlcjIucHJvdG90eXBlLl9ldmVudHNDb3VudCA9IDA7XG4gICAgRXZlbnRFbWl0dGVyMi5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHZvaWQgMDtcbiAgICB2YXIgZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuICAgIGZ1bmN0aW9uIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEV2ZW50RW1pdHRlcjIsIFwiZGVmYXVsdE1heExpc3RlbmVyc1wiLCB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBhcmcgIT09IFwibnVtYmVyXCIgfHwgYXJnIDwgMCB8fCBOdW1iZXJJc05hTihhcmcpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcImRlZmF1bHRNYXhMaXN0ZW5lcnNcIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgYXJnICsgXCIuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHRNYXhMaXN0ZW5lcnMgPSBhcmc7XG4gICAgICB9XG4gICAgfSk7XG4gICAgRXZlbnRFbWl0dGVyMi5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5fZXZlbnRzID09PSB2b2lkIDAgfHwgdGhpcy5fZXZlbnRzID09PSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykuX2V2ZW50cykge1xuICAgICAgICB0aGlzLl9ldmVudHMgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgfVxuICAgICAgdGhpcy5fbWF4TGlzdGVuZXJzID0gdGhpcy5fbWF4TGlzdGVuZXJzIHx8IHZvaWQgMDtcbiAgICB9O1xuICAgIEV2ZW50RW1pdHRlcjIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uIHNldE1heExpc3RlbmVycyhuKSB7XG4gICAgICBpZiAodHlwZW9mIG4gIT09IFwibnVtYmVyXCIgfHwgbiA8IDAgfHwgTnVtYmVySXNOYU4obikpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcIm5cIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgbiArIFwiLlwiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX21heExpc3RlbmVycyA9IG47XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIGZ1bmN0aW9uIF9nZXRNYXhMaXN0ZW5lcnModGhhdCkge1xuICAgICAgaWYgKHRoYXQuX21heExpc3RlbmVycyA9PT0gdm9pZCAwKVxuICAgICAgICByZXR1cm4gRXZlbnRFbWl0dGVyMi5kZWZhdWx0TWF4TGlzdGVuZXJzO1xuICAgICAgcmV0dXJuIHRoYXQuX21heExpc3RlbmVycztcbiAgICB9XG4gICAgRXZlbnRFbWl0dGVyMi5wcm90b3R5cGUuZ2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gZ2V0TWF4TGlzdGVuZXJzKCkge1xuICAgICAgcmV0dXJuIF9nZXRNYXhMaXN0ZW5lcnModGhpcyk7XG4gICAgfTtcbiAgICBFdmVudEVtaXR0ZXIyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCh0eXBlKSB7XG4gICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIGFyZ3MucHVzaChhcmd1bWVudHNbaV0pO1xuICAgICAgdmFyIGRvRXJyb3IgPSB0eXBlID09PSBcImVycm9yXCI7XG4gICAgICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuICAgICAgaWYgKGV2ZW50cyAhPT0gdm9pZCAwKVxuICAgICAgICBkb0Vycm9yID0gZG9FcnJvciAmJiBldmVudHMuZXJyb3IgPT09IHZvaWQgMDtcbiAgICAgIGVsc2UgaWYgKCFkb0Vycm9yKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoZG9FcnJvcikge1xuICAgICAgICB2YXIgZXI7XG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDApXG4gICAgICAgICAgZXIgPSBhcmdzWzBdO1xuICAgICAgICBpZiAoZXIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgIHRocm93IGVyO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoXCJVbmhhbmRsZWQgZXJyb3IuXCIgKyAoZXIgPyBcIiAoXCIgKyBlci5tZXNzYWdlICsgXCIpXCIgOiBcIlwiKSk7XG4gICAgICAgIGVyci5jb250ZXh0ID0gZXI7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICAgIHZhciBoYW5kbGVyID0gZXZlbnRzW3R5cGVdO1xuICAgICAgaWYgKGhhbmRsZXIgPT09IHZvaWQgMClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgUmVmbGVjdEFwcGx5KGhhbmRsZXIsIHRoaXMsIGFyZ3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgICAgICB2YXIgbGlzdGVuZXJzID0gYXJyYXlDbG9uZShoYW5kbGVyLCBsZW4pO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKVxuICAgICAgICAgIFJlZmxlY3RBcHBseShsaXN0ZW5lcnNbaV0sIHRoaXMsIGFyZ3MpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBfYWRkTGlzdGVuZXIodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgcHJlcGVuZCkge1xuICAgICAgdmFyIG07XG4gICAgICB2YXIgZXZlbnRzO1xuICAgICAgdmFyIGV4aXN0aW5nO1xuICAgICAgY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcbiAgICAgIGlmIChldmVudHMgPT09IHZvaWQgMCkge1xuICAgICAgICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cyA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB0YXJnZXQuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChldmVudHMubmV3TGlzdGVuZXIgIT09IHZvaWQgMCkge1xuICAgICAgICAgIHRhcmdldC5lbWl0KFxuICAgICAgICAgICAgXCJuZXdMaXN0ZW5lclwiLFxuICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIGxpc3RlbmVyLmxpc3RlbmVyID8gbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lclxuICAgICAgICAgICk7XG4gICAgICAgICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHM7XG4gICAgICAgIH1cbiAgICAgICAgZXhpc3RpbmcgPSBldmVudHNbdHlwZV07XG4gICAgICB9XG4gICAgICBpZiAoZXhpc3RpbmcgPT09IHZvaWQgMCkge1xuICAgICAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuICAgICAgICArK3RhcmdldC5fZXZlbnRzQ291bnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9IHByZXBlbmQgPyBbbGlzdGVuZXIsIGV4aXN0aW5nXSA6IFtleGlzdGluZywgbGlzdGVuZXJdO1xuICAgICAgICB9IGVsc2UgaWYgKHByZXBlbmQpIHtcbiAgICAgICAgICBleGlzdGluZy51bnNoaWZ0KGxpc3RlbmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBleGlzdGluZy5wdXNoKGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgICAgICBtID0gX2dldE1heExpc3RlbmVycyh0YXJnZXQpO1xuICAgICAgICBpZiAobSA+IDAgJiYgZXhpc3RpbmcubGVuZ3RoID4gbSAmJiAhZXhpc3Rpbmcud2FybmVkKSB7XG4gICAgICAgICAgZXhpc3Rpbmcud2FybmVkID0gdHJ1ZTtcbiAgICAgICAgICB2YXIgdyA9IG5ldyBFcnJvcihcIlBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gXCIgKyBleGlzdGluZy5sZW5ndGggKyBcIiBcIiArIFN0cmluZyh0eXBlKSArIFwiIGxpc3RlbmVycyBhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXRcIik7XG4gICAgICAgICAgdy5uYW1lID0gXCJNYXhMaXN0ZW5lcnNFeGNlZWRlZFdhcm5pbmdcIjtcbiAgICAgICAgICB3LmVtaXR0ZXIgPSB0YXJnZXQ7XG4gICAgICAgICAgdy50eXBlID0gdHlwZTtcbiAgICAgICAgICB3LmNvdW50ID0gZXhpc3RpbmcubGVuZ3RoO1xuICAgICAgICAgIFByb2Nlc3NFbWl0V2FybmluZyh3KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG4gICAgRXZlbnRFbWl0dGVyMi5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbiBhZGRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgcmV0dXJuIF9hZGRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lciwgZmFsc2UpO1xuICAgIH07XG4gICAgRXZlbnRFbWl0dGVyMi5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjtcbiAgICBFdmVudEVtaXR0ZXIyLnByb3RvdHlwZS5wcmVwZW5kTGlzdGVuZXIgPSBmdW5jdGlvbiBwcmVwZW5kTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIHRydWUpO1xuICAgIH07XG4gICAgZnVuY3Rpb24gb25jZVdyYXBwZXIoKSB7XG4gICAgICBpZiAoIXRoaXMuZmlyZWQpIHtcbiAgICAgICAgdGhpcy50YXJnZXQucmVtb3ZlTGlzdGVuZXIodGhpcy50eXBlLCB0aGlzLndyYXBGbik7XG4gICAgICAgIHRoaXMuZmlyZWQgPSB0cnVlO1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5jYWxsKHRoaXMudGFyZ2V0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuYXBwbHkodGhpcy50YXJnZXQsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIF9vbmNlV3JhcCh0YXJnZXQsIHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICB2YXIgc3RhdGUgPSB7IGZpcmVkOiBmYWxzZSwgd3JhcEZuOiB2b2lkIDAsIHRhcmdldCwgdHlwZSwgbGlzdGVuZXIgfTtcbiAgICAgIHZhciB3cmFwcGVkID0gb25jZVdyYXBwZXIuYmluZChzdGF0ZSk7XG4gICAgICB3cmFwcGVkLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gICAgICBzdGF0ZS53cmFwRm4gPSB3cmFwcGVkO1xuICAgICAgcmV0dXJuIHdyYXBwZWQ7XG4gICAgfVxuICAgIEV2ZW50RW1pdHRlcjIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlMih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgICB0aGlzLm9uKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBFdmVudEVtaXR0ZXIyLnByb3RvdHlwZS5wcmVwZW5kT25jZUxpc3RlbmVyID0gZnVuY3Rpb24gcHJlcGVuZE9uY2VMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgICB0aGlzLnByZXBlbmRMaXN0ZW5lcih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgRXZlbnRFbWl0dGVyMi5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgdmFyIGxpc3QsIGV2ZW50cywgcG9zaXRpb24sIGksIG9yaWdpbmFsTGlzdGVuZXI7XG4gICAgICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICAgIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgICAgIGlmIChldmVudHMgPT09IHZvaWQgMClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICBsaXN0ID0gZXZlbnRzW3R5cGVdO1xuICAgICAgaWYgKGxpc3QgPT09IHZvaWQgMClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHwgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgdGhpcy5fZXZlbnRzID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07XG4gICAgICAgICAgaWYgKGV2ZW50cy5yZW1vdmVMaXN0ZW5lcilcbiAgICAgICAgICAgIHRoaXMuZW1pdChcInJlbW92ZUxpc3RlbmVyXCIsIHR5cGUsIGxpc3QubGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaXN0ICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcG9zaXRpb24gPSAtMTtcbiAgICAgICAgZm9yIChpID0gbGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fCBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICAgICAgb3JpZ2luYWxMaXN0ZW5lciA9IGxpc3RbaV0ubGlzdGVuZXI7XG4gICAgICAgICAgICBwb3NpdGlvbiA9IGk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvc2l0aW9uIDwgMClcbiAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSAwKVxuICAgICAgICAgIGxpc3Quc2hpZnQoKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgc3BsaWNlT25lKGxpc3QsIHBvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpXG4gICAgICAgICAgZXZlbnRzW3R5cGVdID0gbGlzdFswXTtcbiAgICAgICAgaWYgKGV2ZW50cy5yZW1vdmVMaXN0ZW5lciAhPT0gdm9pZCAwKVxuICAgICAgICAgIHRoaXMuZW1pdChcInJlbW92ZUxpc3RlbmVyXCIsIHR5cGUsIG9yaWdpbmFsTGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBFdmVudEVtaXR0ZXIyLnByb3RvdHlwZS5vZmYgPSBFdmVudEVtaXR0ZXIyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcjtcbiAgICBFdmVudEVtaXR0ZXIyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbiByZW1vdmVBbGxMaXN0ZW5lcnModHlwZSkge1xuICAgICAgdmFyIGxpc3RlbmVycywgZXZlbnRzLCBpO1xuICAgICAgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuICAgICAgaWYgKGV2ZW50cyA9PT0gdm9pZCAwKVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgPT09IHZvaWQgMCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudHNbdHlwZV0gIT09IHZvaWQgMCkge1xuICAgICAgICAgIGlmICgtLXRoaXMuX2V2ZW50c0NvdW50ID09PSAwKVxuICAgICAgICAgICAgdGhpcy5fZXZlbnRzID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgZGVsZXRlIGV2ZW50c1t0eXBlXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZXZlbnRzKTtcbiAgICAgICAgdmFyIGtleTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIGlmIChrZXkgPT09IFwicmVtb3ZlTGlzdGVuZXJcIikgY29udGludWU7XG4gICAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhcInJlbW92ZUxpc3RlbmVyXCIpO1xuICAgICAgICB0aGlzLl9ldmVudHMgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIGxpc3RlbmVycyA9IGV2ZW50c1t0eXBlXTtcbiAgICAgIGlmICh0eXBlb2YgbGlzdGVuZXJzID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpO1xuICAgICAgfSBlbHNlIGlmIChsaXN0ZW5lcnMgIT09IHZvaWQgMCkge1xuICAgICAgICBmb3IgKGkgPSBsaXN0ZW5lcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgZnVuY3Rpb24gX2xpc3RlbmVycyh0YXJnZXQsIHR5cGUsIHVud3JhcCkge1xuICAgICAgdmFyIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICAgICAgaWYgKGV2ZW50cyA9PT0gdm9pZCAwKVxuICAgICAgICByZXR1cm4gW107XG4gICAgICB2YXIgZXZsaXN0ZW5lciA9IGV2ZW50c1t0eXBlXTtcbiAgICAgIGlmIChldmxpc3RlbmVyID09PSB2b2lkIDApXG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICByZXR1cm4gdW53cmFwID8gW2V2bGlzdGVuZXIubGlzdGVuZXIgfHwgZXZsaXN0ZW5lcl0gOiBbZXZsaXN0ZW5lcl07XG4gICAgICByZXR1cm4gdW53cmFwID8gdW53cmFwTGlzdGVuZXJzKGV2bGlzdGVuZXIpIDogYXJyYXlDbG9uZShldmxpc3RlbmVyLCBldmxpc3RlbmVyLmxlbmd0aCk7XG4gICAgfVxuICAgIEV2ZW50RW1pdHRlcjIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uIGxpc3RlbmVycyh0eXBlKSB7XG4gICAgICByZXR1cm4gX2xpc3RlbmVycyh0aGlzLCB0eXBlLCB0cnVlKTtcbiAgICB9O1xuICAgIEV2ZW50RW1pdHRlcjIucHJvdG90eXBlLnJhd0xpc3RlbmVycyA9IGZ1bmN0aW9uIHJhd0xpc3RlbmVycyh0eXBlKSB7XG4gICAgICByZXR1cm4gX2xpc3RlbmVycyh0aGlzLCB0eXBlLCBmYWxzZSk7XG4gICAgfTtcbiAgICBFdmVudEVtaXR0ZXIyLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlKSB7XG4gICAgICBpZiAodHlwZW9mIGVtaXR0ZXIubGlzdGVuZXJDb3VudCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbGlzdGVuZXJDb3VudC5jYWxsKGVtaXR0ZXIsIHR5cGUpO1xuICAgICAgfVxuICAgIH07XG4gICAgRXZlbnRFbWl0dGVyMi5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGxpc3RlbmVyQ291bnQ7XG4gICAgZnVuY3Rpb24gbGlzdGVuZXJDb3VudCh0eXBlKSB7XG4gICAgICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuICAgICAgaWYgKGV2ZW50cyAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xuICAgICAgICBpZiAodHlwZW9mIGV2bGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9IGVsc2UgaWYgKGV2bGlzdGVuZXIgIT09IHZvaWQgMCkge1xuICAgICAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIEV2ZW50RW1pdHRlcjIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2V2ZW50c0NvdW50ID4gMCA/IFJlZmxlY3RPd25LZXlzKHRoaXMuX2V2ZW50cykgOiBbXTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGFycmF5Q2xvbmUoYXJyLCBuKSB7XG4gICAgICB2YXIgY29weSA9IG5ldyBBcnJheShuKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKVxuICAgICAgICBjb3B5W2ldID0gYXJyW2ldO1xuICAgICAgcmV0dXJuIGNvcHk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNwbGljZU9uZShsaXN0LCBpbmRleCkge1xuICAgICAgZm9yICg7IGluZGV4ICsgMSA8IGxpc3QubGVuZ3RoOyBpbmRleCsrKVxuICAgICAgICBsaXN0W2luZGV4XSA9IGxpc3RbaW5kZXggKyAxXTtcbiAgICAgIGxpc3QucG9wKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVud3JhcExpc3RlbmVycyhhcnIpIHtcbiAgICAgIHZhciByZXQgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJldC5sZW5ndGg7ICsraSkge1xuICAgICAgICByZXRbaV0gPSBhcnJbaV0ubGlzdGVuZXIgfHwgYXJyW2ldO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgZnVuY3Rpb24gb25jZShlbWl0dGVyLCBuYW1lKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGVycm9yTGlzdGVuZXIoZXJyKSB7XG4gICAgICAgICAgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcihuYW1lLCByZXNvbHZlcik7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZXIoKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBlbWl0dGVyLnJlbW92ZUxpc3RlbmVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLCBlcnJvckxpc3RlbmVyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzb2x2ZShbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuICAgICAgICB9XG4gICAgICAgIGV2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lcihlbWl0dGVyLCBuYW1lLCByZXNvbHZlciwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICBpZiAobmFtZSAhPT0gXCJlcnJvclwiKSB7XG4gICAgICAgICAgYWRkRXJyb3JIYW5kbGVySWZFdmVudEVtaXR0ZXIoZW1pdHRlciwgZXJyb3JMaXN0ZW5lciwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkRXJyb3JIYW5kbGVySWZFdmVudEVtaXR0ZXIoZW1pdHRlciwgaGFuZGxlciwgZmxhZ3MpIHtcbiAgICAgIGlmICh0eXBlb2YgZW1pdHRlci5vbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGV2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lcihlbWl0dGVyLCBcImVycm9yXCIsIGhhbmRsZXIsIGZsYWdzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZXZlbnRUYXJnZXRBZ25vc3RpY0FkZExpc3RlbmVyKGVtaXR0ZXIsIG5hbWUsIGxpc3RlbmVyLCBmbGFncykge1xuICAgICAgaWYgKHR5cGVvZiBlbWl0dGVyLm9uID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgaWYgKGZsYWdzLm9uY2UpIHtcbiAgICAgICAgICBlbWl0dGVyLm9uY2UobmFtZSwgbGlzdGVuZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVtaXR0ZXIub24obmFtZSwgbGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBlbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIobmFtZSwgZnVuY3Rpb24gd3JhcExpc3RlbmVyKGFyZykge1xuICAgICAgICAgIGlmIChmbGFncy5vbmNlKSB7XG4gICAgICAgICAgICBlbWl0dGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgd3JhcExpc3RlbmVyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGlzdGVuZXIoYXJnKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJlbWl0dGVyXCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIEV2ZW50RW1pdHRlci4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGVtaXR0ZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSk7XG5cbi8vIHNyYy9jb21tb24tanMvRW5oYW5jZWRFdmVudEVtaXR0ZXIudHNcbnZhciBpbXBvcnRfZXZlbnRzID0gX190b0VTTShyZXF1aXJlX2V2ZW50cygpLCAxKTtcbnZhciBFbmhhbmNlZEV2ZW50RW1pdHRlciA9IGNsYXNzIHtcbiAgZW1pdHRlcjtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5lbWl0dGVyID0gbmV3IGltcG9ydF9ldmVudHMuRXZlbnRFbWl0dGVyKCk7XG4gICAgdGhpcy5lbWl0dGVyLnNldE1heExpc3RlbmVycyhOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpO1xuICB9XG4gIG9uKGV2ZW50TmFtZSwgbGlzdGVuZXIpIHtcbiAgICB0aGlzLmVtaXR0ZXIub24oXG4gICAgICBldmVudE5hbWUsXG4gICAgICAvLyBiaW9tZS1pZ25vcmUgbGludC9zdXNwaWNpb3VzL25vRXhwbGljaXRBbnk6IG5lZWQgdG8gb3ZlcnJpZGUgdGhlIHR5cGUgYmVjYXVzZSBkZWZhdWx0IGl0J3MgYW55WyBhbmQgd2UgY2Fubm90IGFzc2lnbiBFW0tdIHRvIGFueVtdXG4gICAgICBsaXN0ZW5lclxuICAgICk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgb2ZmKGV2ZW50TmFtZSwgbGlzdGVuZXIpIHtcbiAgICB0aGlzLmVtaXR0ZXIub2ZmKFxuICAgICAgZXZlbnROYW1lLFxuICAgICAgLy8gYmlvbWUtaWdub3JlIGxpbnQvc3VzcGljaW91cy9ub0V4cGxpY2l0QW55OiA8ZXhwbGFuYXRpb24+XG4gICAgICBsaXN0ZW5lclxuICAgICk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgbGlzdGVuZXJDb3VudChldmVudE5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5lbWl0dGVyLmxpc3RlbmVyQ291bnQoZXZlbnROYW1lKTtcbiAgfVxuICBsaXN0ZW5lcnMoZXZlbnROYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuZW1pdHRlci5saXN0ZW5lcnMoZXZlbnROYW1lKTtcbiAgfVxuICBlbWl0KGV2ZW50TmFtZSwgLi4uYXJncykge1xuICAgIHJldHVybiB0aGlzLmVtaXR0ZXIuZW1pdChldmVudE5hbWUsIC4uLmFyZ3MpO1xuICB9XG4gIHNhZmVFbWl0KGV2ZW50TmFtZSwgLi4uYXJncykge1xuICAgIHJldHVybiB0aGlzLmVtaXR0ZXIuZW1pdChldmVudE5hbWUsIC4uLmFyZ3MpO1xuICB9XG4gIG9uY2UoZXZlbnROYW1lLCBsaXN0ZW5lcikge1xuICAgIHRoaXMuZW1pdHRlci5vbmNlKFxuICAgICAgZXZlbnROYW1lLFxuICAgICAgLy8gYmlvbWUtaWdub3JlIGxpbnQvc3VzcGljaW91cy9ub0V4cGxpY2l0QW55OiA8ZXhwbGFuYXRpb24+XG4gICAgICBsaXN0ZW5lclxuICAgICk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50TmFtZSkge1xuICAgIGlmIChldmVudE5hbWUpIHtcbiAgICAgIHRoaXMuZW1pdHRlci5yZW1vdmVBbGxMaXN0ZW5lcnMoZXZlbnROYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbWl0dGVyLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxufTtcblxuZXhwb3J0IHsgRW5oYW5jZWRFdmVudEVtaXR0ZXIgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-BW2DGP4D.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-DFNYORIF.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-DFNYORIF.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Message: () => (/* binding */ Message),\n/* harmony export */   ProtoEncodings: () => (/* binding */ ProtoEncodings),\n/* harmony export */   ProtoRtpParameters: () => (/* binding */ ProtoRtpParameters),\n/* harmony export */   proto2: () => (/* binding */ proto2),\n/* harmony export */   proto3: () => (/* binding */ proto3)\n/* harmony export */ });\n// ../../node_modules/@bufbuild/protobuf/dist/esm/private/assert.js\nfunction assert(condition, msg) {\n  if (!condition) {\n    throw new Error(msg);\n  }\n}\nvar FLOAT32_MAX = 34028234663852886e22;\nvar FLOAT32_MIN = -34028234663852886e22;\nvar UINT32_MAX = 4294967295;\nvar INT32_MAX = 2147483647;\nvar INT32_MIN = -2147483648;\nfunction assertInt32(arg) {\n  if (typeof arg !== \"number\")\n    throw new Error(\"invalid int 32: \" + typeof arg);\n  if (!Number.isInteger(arg) || arg > INT32_MAX || arg < INT32_MIN)\n    throw new Error(\"invalid int 32: \" + arg);\n}\nfunction assertUInt32(arg) {\n  if (typeof arg !== \"number\")\n    throw new Error(\"invalid uint 32: \" + typeof arg);\n  if (!Number.isInteger(arg) || arg > UINT32_MAX || arg < 0)\n    throw new Error(\"invalid uint 32: \" + arg);\n}\nfunction assertFloat32(arg) {\n  if (typeof arg !== \"number\")\n    throw new Error(\"invalid float 32: \" + typeof arg);\n  if (!Number.isFinite(arg))\n    return;\n  if (arg > FLOAT32_MAX || arg < FLOAT32_MIN)\n    throw new Error(\"invalid float 32: \" + arg);\n}\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/private/enum.js\nvar enumTypeSymbol = Symbol(\"@bufbuild/protobuf/enum-type\");\nfunction getEnumType(enumObject) {\n  const t = enumObject[enumTypeSymbol];\n  assert(t, \"missing enum type on enum object\");\n  return t;\n}\nfunction setEnumType(enumObject, typeName, values, opt) {\n  enumObject[enumTypeSymbol] = makeEnumType(typeName, values.map((v) => ({\n    no: v.no,\n    name: v.name,\n    localName: enumObject[v.no]\n  })));\n}\nfunction makeEnumType(typeName, values, _opt) {\n  const names = /* @__PURE__ */ Object.create(null);\n  const numbers = /* @__PURE__ */ Object.create(null);\n  const normalValues = [];\n  for (const value of values) {\n    const n = normalizeEnumValue(value);\n    normalValues.push(n);\n    names[value.name] = n;\n    numbers[value.no] = n;\n  }\n  return {\n    typeName,\n    values: normalValues,\n    // We do not surface options at this time\n    // options: opt?.options ?? Object.create(null),\n    findName(name) {\n      return names[name];\n    },\n    findNumber(no) {\n      return numbers[no];\n    }\n  };\n}\nfunction makeEnum(typeName, values, opt) {\n  const enumObject = {};\n  for (const value of values) {\n    const n = normalizeEnumValue(value);\n    enumObject[n.localName] = n.no;\n    enumObject[n.no] = n.localName;\n  }\n  setEnumType(enumObject, typeName, values);\n  return enumObject;\n}\nfunction normalizeEnumValue(value) {\n  if (\"localName\" in value) {\n    return value;\n  }\n  return Object.assign(Object.assign({}, value), { localName: value.name });\n}\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/message.js\nvar Message = class {\n  /**\n   * Compare with a message of the same type.\n   * Note that this function disregards extensions and unknown fields.\n   */\n  equals(other) {\n    return this.getType().runtime.util.equals(this.getType(), this, other);\n  }\n  /**\n   * Create a deep copy.\n   */\n  clone() {\n    return this.getType().runtime.util.clone(this);\n  }\n  /**\n   * Parse from binary data, merging fields.\n   *\n   * Repeated fields are appended. Map entries are added, overwriting\n   * existing keys.\n   *\n   * If a message field is already present, it will be merged with the\n   * new data.\n   */\n  fromBinary(bytes, options) {\n    const type = this.getType(), format = type.runtime.bin, opt = format.makeReadOptions(options);\n    format.readMessage(this, opt.readerFactory(bytes), bytes.byteLength, opt);\n    return this;\n  }\n  /**\n   * Parse a message from a JSON value.\n   */\n  fromJson(jsonValue, options) {\n    const type = this.getType(), format = type.runtime.json, opt = format.makeReadOptions(options);\n    format.readMessage(type, jsonValue, opt, this);\n    return this;\n  }\n  /**\n   * Parse a message from a JSON string.\n   */\n  fromJsonString(jsonString, options) {\n    let json;\n    try {\n      json = JSON.parse(jsonString);\n    } catch (e) {\n      throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${e instanceof Error ? e.message : String(e)}`);\n    }\n    return this.fromJson(json, options);\n  }\n  /**\n   * Serialize the message to binary data.\n   */\n  toBinary(options) {\n    const type = this.getType(), bin = type.runtime.bin, opt = bin.makeWriteOptions(options), writer = opt.writerFactory();\n    bin.writeMessage(this, writer, opt);\n    return writer.finish();\n  }\n  /**\n   * Serialize the message to a JSON value, a JavaScript value that can be\n   * passed to JSON.stringify().\n   */\n  toJson(options) {\n    const type = this.getType(), json = type.runtime.json, opt = json.makeWriteOptions(options);\n    return json.writeMessage(this, opt);\n  }\n  /**\n   * Serialize the message to a JSON string.\n   */\n  toJsonString(options) {\n    var _a;\n    const value = this.toJson(options);\n    return JSON.stringify(value, null, (_a = options === null || options === void 0 ? void 0 : options.prettySpaces) !== null && _a !== void 0 ? _a : 0);\n  }\n  /**\n   * Override for serialization behavior. This will be invoked when calling\n   * JSON.stringify on this message (i.e. JSON.stringify(msg)).\n   *\n   * Note that this will not serialize google.protobuf.Any with a packed\n   * message because the protobuf JSON format specifies that it needs to be\n   * unpacked, and this is only possible with a type registry to look up the\n   * message type.  As a result, attempting to serialize a message with this\n   * type will throw an Error.\n   *\n   * This method is protected because you should not need to invoke it\n   * directly -- instead use JSON.stringify or toJsonString for\n   * stringified JSON.  Alternatively, if actual JSON is desired, you should\n   * use toJson.\n   */\n  toJSON() {\n    return this.toJson({\n      emitDefaultValues: true\n    });\n  }\n  /**\n   * Retrieve the MessageType of this message - a singleton that represents\n   * the protobuf message declaration and provides metadata for reflection-\n   * based operations.\n   */\n  getType() {\n    return Object.getPrototypeOf(this).constructor;\n  }\n};\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/private/message-type.js\nfunction makeMessageType(runtime, typeName, fields, opt) {\n  var _a;\n  const localName = (_a = opt === null || opt === void 0 ? void 0 : opt.localName) !== null && _a !== void 0 ? _a : typeName.substring(typeName.lastIndexOf(\".\") + 1);\n  const type = {\n    [localName]: function(data) {\n      runtime.util.initFields(this);\n      runtime.util.initPartial(data, this);\n    }\n  }[localName];\n  Object.setPrototypeOf(type.prototype, new Message());\n  Object.assign(type, {\n    runtime,\n    typeName,\n    fields: runtime.util.newFieldList(fields),\n    fromBinary(bytes, options) {\n      return new type().fromBinary(bytes, options);\n    },\n    fromJson(jsonValue, options) {\n      return new type().fromJson(jsonValue, options);\n    },\n    fromJsonString(jsonString, options) {\n      return new type().fromJsonString(jsonString, options);\n    },\n    equals(a, b) {\n      return runtime.util.equals(type, a, b);\n    }\n  });\n  return type;\n}\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/google/varint.js\nfunction varint64read() {\n  let lowBits = 0;\n  let highBits = 0;\n  for (let shift = 0; shift < 28; shift += 7) {\n    let b = this.buf[this.pos++];\n    lowBits |= (b & 127) << shift;\n    if ((b & 128) == 0) {\n      this.assertBounds();\n      return [lowBits, highBits];\n    }\n  }\n  let middleByte = this.buf[this.pos++];\n  lowBits |= (middleByte & 15) << 28;\n  highBits = (middleByte & 112) >> 4;\n  if ((middleByte & 128) == 0) {\n    this.assertBounds();\n    return [lowBits, highBits];\n  }\n  for (let shift = 3; shift <= 31; shift += 7) {\n    let b = this.buf[this.pos++];\n    highBits |= (b & 127) << shift;\n    if ((b & 128) == 0) {\n      this.assertBounds();\n      return [lowBits, highBits];\n    }\n  }\n  throw new Error(\"invalid varint\");\n}\nfunction varint64write(lo, hi, bytes) {\n  for (let i = 0; i < 28; i = i + 7) {\n    const shift = lo >>> i;\n    const hasNext = !(shift >>> 7 == 0 && hi == 0);\n    const byte = (hasNext ? shift | 128 : shift) & 255;\n    bytes.push(byte);\n    if (!hasNext) {\n      return;\n    }\n  }\n  const splitBits = lo >>> 28 & 15 | (hi & 7) << 4;\n  const hasMoreBits = !(hi >> 3 == 0);\n  bytes.push((hasMoreBits ? splitBits | 128 : splitBits) & 255);\n  if (!hasMoreBits) {\n    return;\n  }\n  for (let i = 3; i < 31; i = i + 7) {\n    const shift = hi >>> i;\n    const hasNext = !(shift >>> 7 == 0);\n    const byte = (hasNext ? shift | 128 : shift) & 255;\n    bytes.push(byte);\n    if (!hasNext) {\n      return;\n    }\n  }\n  bytes.push(hi >>> 31 & 1);\n}\nvar TWO_PWR_32_DBL = 4294967296;\nfunction int64FromString(dec) {\n  const minus = dec[0] === \"-\";\n  if (minus) {\n    dec = dec.slice(1);\n  }\n  const base = 1e6;\n  let lowBits = 0;\n  let highBits = 0;\n  function add1e6digit(begin, end) {\n    const digit1e6 = Number(dec.slice(begin, end));\n    highBits *= base;\n    lowBits = lowBits * base + digit1e6;\n    if (lowBits >= TWO_PWR_32_DBL) {\n      highBits = highBits + (lowBits / TWO_PWR_32_DBL | 0);\n      lowBits = lowBits % TWO_PWR_32_DBL;\n    }\n  }\n  add1e6digit(-24, -18);\n  add1e6digit(-18, -12);\n  add1e6digit(-12, -6);\n  add1e6digit(-6);\n  return minus ? negate(lowBits, highBits) : newBits(lowBits, highBits);\n}\nfunction int64ToString(lo, hi) {\n  let bits = newBits(lo, hi);\n  const negative = bits.hi & 2147483648;\n  if (negative) {\n    bits = negate(bits.lo, bits.hi);\n  }\n  const result = uInt64ToString(bits.lo, bits.hi);\n  return negative ? \"-\" + result : result;\n}\nfunction uInt64ToString(lo, hi) {\n  ({ lo, hi } = toUnsigned(lo, hi));\n  if (hi <= 2097151) {\n    return String(TWO_PWR_32_DBL * hi + lo);\n  }\n  const low = lo & 16777215;\n  const mid = (lo >>> 24 | hi << 8) & 16777215;\n  const high = hi >> 16 & 65535;\n  let digitA = low + mid * 6777216 + high * 6710656;\n  let digitB = mid + high * 8147497;\n  let digitC = high * 2;\n  const base = 1e7;\n  if (digitA >= base) {\n    digitB += Math.floor(digitA / base);\n    digitA %= base;\n  }\n  if (digitB >= base) {\n    digitC += Math.floor(digitB / base);\n    digitB %= base;\n  }\n  return digitC.toString() + decimalFrom1e7WithLeadingZeros(digitB) + decimalFrom1e7WithLeadingZeros(digitA);\n}\nfunction toUnsigned(lo, hi) {\n  return { lo: lo >>> 0, hi: hi >>> 0 };\n}\nfunction newBits(lo, hi) {\n  return { lo: lo | 0, hi: hi | 0 };\n}\nfunction negate(lowBits, highBits) {\n  highBits = ~highBits;\n  if (lowBits) {\n    lowBits = ~lowBits + 1;\n  } else {\n    highBits += 1;\n  }\n  return newBits(lowBits, highBits);\n}\nvar decimalFrom1e7WithLeadingZeros = (digit1e7) => {\n  const partial = String(digit1e7);\n  return \"0000000\".slice(partial.length) + partial;\n};\nfunction varint32write(value, bytes) {\n  if (value >= 0) {\n    while (value > 127) {\n      bytes.push(value & 127 | 128);\n      value = value >>> 7;\n    }\n    bytes.push(value);\n  } else {\n    for (let i = 0; i < 9; i++) {\n      bytes.push(value & 127 | 128);\n      value = value >> 7;\n    }\n    bytes.push(1);\n  }\n}\nfunction varint32read() {\n  let b = this.buf[this.pos++];\n  let result = b & 127;\n  if ((b & 128) == 0) {\n    this.assertBounds();\n    return result;\n  }\n  b = this.buf[this.pos++];\n  result |= (b & 127) << 7;\n  if ((b & 128) == 0) {\n    this.assertBounds();\n    return result;\n  }\n  b = this.buf[this.pos++];\n  result |= (b & 127) << 14;\n  if ((b & 128) == 0) {\n    this.assertBounds();\n    return result;\n  }\n  b = this.buf[this.pos++];\n  result |= (b & 127) << 21;\n  if ((b & 128) == 0) {\n    this.assertBounds();\n    return result;\n  }\n  b = this.buf[this.pos++];\n  result |= (b & 15) << 28;\n  for (let readBytes = 5; (b & 128) !== 0 && readBytes < 10; readBytes++)\n    b = this.buf[this.pos++];\n  if ((b & 128) != 0)\n    throw new Error(\"invalid varint\");\n  this.assertBounds();\n  return result >>> 0;\n}\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/proto-int64.js\nfunction makeInt64Support() {\n  const dv = new DataView(new ArrayBuffer(8));\n  const ok = typeof BigInt === \"function\" && typeof dv.getBigInt64 === \"function\" && typeof dv.getBigUint64 === \"function\" && typeof dv.setBigInt64 === \"function\" && typeof dv.setBigUint64 === \"function\" && (typeof process != \"object\" || typeof process.env != \"object\" || process.env.BUF_BIGINT_DISABLE !== \"1\");\n  if (ok) {\n    const MIN = BigInt(\"-9223372036854775808\"), MAX = BigInt(\"9223372036854775807\"), UMIN = BigInt(\"0\"), UMAX = BigInt(\"18446744073709551615\");\n    return {\n      zero: BigInt(0),\n      supported: true,\n      parse(value) {\n        const bi = typeof value == \"bigint\" ? value : BigInt(value);\n        if (bi > MAX || bi < MIN) {\n          throw new Error(`int64 invalid: ${value}`);\n        }\n        return bi;\n      },\n      uParse(value) {\n        const bi = typeof value == \"bigint\" ? value : BigInt(value);\n        if (bi > UMAX || bi < UMIN) {\n          throw new Error(`uint64 invalid: ${value}`);\n        }\n        return bi;\n      },\n      enc(value) {\n        dv.setBigInt64(0, this.parse(value), true);\n        return {\n          lo: dv.getInt32(0, true),\n          hi: dv.getInt32(4, true)\n        };\n      },\n      uEnc(value) {\n        dv.setBigInt64(0, this.uParse(value), true);\n        return {\n          lo: dv.getInt32(0, true),\n          hi: dv.getInt32(4, true)\n        };\n      },\n      dec(lo, hi) {\n        dv.setInt32(0, lo, true);\n        dv.setInt32(4, hi, true);\n        return dv.getBigInt64(0, true);\n      },\n      uDec(lo, hi) {\n        dv.setInt32(0, lo, true);\n        dv.setInt32(4, hi, true);\n        return dv.getBigUint64(0, true);\n      }\n    };\n  }\n  const assertInt64String = (value) => assert(/^-?[0-9]+$/.test(value), `int64 invalid: ${value}`);\n  const assertUInt64String = (value) => assert(/^[0-9]+$/.test(value), `uint64 invalid: ${value}`);\n  return {\n    zero: \"0\",\n    supported: false,\n    parse(value) {\n      if (typeof value != \"string\") {\n        value = value.toString();\n      }\n      assertInt64String(value);\n      return value;\n    },\n    uParse(value) {\n      if (typeof value != \"string\") {\n        value = value.toString();\n      }\n      assertUInt64String(value);\n      return value;\n    },\n    enc(value) {\n      if (typeof value != \"string\") {\n        value = value.toString();\n      }\n      assertInt64String(value);\n      return int64FromString(value);\n    },\n    uEnc(value) {\n      if (typeof value != \"string\") {\n        value = value.toString();\n      }\n      assertUInt64String(value);\n      return int64FromString(value);\n    },\n    dec(lo, hi) {\n      return int64ToString(lo, hi);\n    },\n    uDec(lo, hi) {\n      return uInt64ToString(lo, hi);\n    }\n  };\n}\nvar protoInt64 = makeInt64Support();\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/scalar.js\nvar ScalarType;\n(function(ScalarType2) {\n  ScalarType2[ScalarType2[\"DOUBLE\"] = 1] = \"DOUBLE\";\n  ScalarType2[ScalarType2[\"FLOAT\"] = 2] = \"FLOAT\";\n  ScalarType2[ScalarType2[\"INT64\"] = 3] = \"INT64\";\n  ScalarType2[ScalarType2[\"UINT64\"] = 4] = \"UINT64\";\n  ScalarType2[ScalarType2[\"INT32\"] = 5] = \"INT32\";\n  ScalarType2[ScalarType2[\"FIXED64\"] = 6] = \"FIXED64\";\n  ScalarType2[ScalarType2[\"FIXED32\"] = 7] = \"FIXED32\";\n  ScalarType2[ScalarType2[\"BOOL\"] = 8] = \"BOOL\";\n  ScalarType2[ScalarType2[\"STRING\"] = 9] = \"STRING\";\n  ScalarType2[ScalarType2[\"BYTES\"] = 12] = \"BYTES\";\n  ScalarType2[ScalarType2[\"UINT32\"] = 13] = \"UINT32\";\n  ScalarType2[ScalarType2[\"SFIXED32\"] = 15] = \"SFIXED32\";\n  ScalarType2[ScalarType2[\"SFIXED64\"] = 16] = \"SFIXED64\";\n  ScalarType2[ScalarType2[\"SINT32\"] = 17] = \"SINT32\";\n  ScalarType2[ScalarType2[\"SINT64\"] = 18] = \"SINT64\";\n})(ScalarType || (ScalarType = {}));\nvar LongType;\n(function(LongType2) {\n  LongType2[LongType2[\"BIGINT\"] = 0] = \"BIGINT\";\n  LongType2[LongType2[\"STRING\"] = 1] = \"STRING\";\n})(LongType || (LongType = {}));\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/private/scalars.js\nfunction scalarEquals(type, a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (type == ScalarType.BYTES) {\n    if (!(a instanceof Uint8Array) || !(b instanceof Uint8Array)) {\n      return false;\n    }\n    if (a.length !== b.length) {\n      return false;\n    }\n    for (let i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n  switch (type) {\n    case ScalarType.UINT64:\n    case ScalarType.FIXED64:\n    case ScalarType.INT64:\n    case ScalarType.SFIXED64:\n    case ScalarType.SINT64:\n      return a == b;\n  }\n  return false;\n}\nfunction scalarZeroValue(type, longType) {\n  switch (type) {\n    case ScalarType.BOOL:\n      return false;\n    case ScalarType.UINT64:\n    case ScalarType.FIXED64:\n    case ScalarType.INT64:\n    case ScalarType.SFIXED64:\n    case ScalarType.SINT64:\n      return longType == 0 ? protoInt64.zero : \"0\";\n    case ScalarType.DOUBLE:\n    case ScalarType.FLOAT:\n      return 0;\n    case ScalarType.BYTES:\n      return new Uint8Array(0);\n    case ScalarType.STRING:\n      return \"\";\n    default:\n      return 0;\n  }\n}\nfunction isScalarZeroValue(type, value) {\n  switch (type) {\n    case ScalarType.BOOL:\n      return value === false;\n    case ScalarType.STRING:\n      return value === \"\";\n    case ScalarType.BYTES:\n      return value instanceof Uint8Array && !value.byteLength;\n    default:\n      return value == 0;\n  }\n}\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/binary-encoding.js\nvar WireType;\n(function(WireType2) {\n  WireType2[WireType2[\"Varint\"] = 0] = \"Varint\";\n  WireType2[WireType2[\"Bit64\"] = 1] = \"Bit64\";\n  WireType2[WireType2[\"LengthDelimited\"] = 2] = \"LengthDelimited\";\n  WireType2[WireType2[\"StartGroup\"] = 3] = \"StartGroup\";\n  WireType2[WireType2[\"EndGroup\"] = 4] = \"EndGroup\";\n  WireType2[WireType2[\"Bit32\"] = 5] = \"Bit32\";\n})(WireType || (WireType = {}));\nvar BinaryWriter = class {\n  constructor(textEncoder) {\n    this.stack = [];\n    this.textEncoder = textEncoder !== null && textEncoder !== void 0 ? textEncoder : new TextEncoder();\n    this.chunks = [];\n    this.buf = [];\n  }\n  /**\n   * Return all bytes written and reset this writer.\n   */\n  finish() {\n    this.chunks.push(new Uint8Array(this.buf));\n    let len = 0;\n    for (let i = 0; i < this.chunks.length; i++)\n      len += this.chunks[i].length;\n    let bytes = new Uint8Array(len);\n    let offset = 0;\n    for (let i = 0; i < this.chunks.length; i++) {\n      bytes.set(this.chunks[i], offset);\n      offset += this.chunks[i].length;\n    }\n    this.chunks = [];\n    return bytes;\n  }\n  /**\n   * Start a new fork for length-delimited data like a message\n   * or a packed repeated field.\n   *\n   * Must be joined later with `join()`.\n   */\n  fork() {\n    this.stack.push({ chunks: this.chunks, buf: this.buf });\n    this.chunks = [];\n    this.buf = [];\n    return this;\n  }\n  /**\n   * Join the last fork. Write its length and bytes, then\n   * return to the previous state.\n   */\n  join() {\n    let chunk = this.finish();\n    let prev = this.stack.pop();\n    if (!prev)\n      throw new Error(\"invalid state, fork stack empty\");\n    this.chunks = prev.chunks;\n    this.buf = prev.buf;\n    this.uint32(chunk.byteLength);\n    return this.raw(chunk);\n  }\n  /**\n   * Writes a tag (field number and wire type).\n   *\n   * Equivalent to `uint32( (fieldNo << 3 | type) >>> 0 )`.\n   *\n   * Generated code should compute the tag ahead of time and call `uint32()`.\n   */\n  tag(fieldNo, type) {\n    return this.uint32((fieldNo << 3 | type) >>> 0);\n  }\n  /**\n   * Write a chunk of raw bytes.\n   */\n  raw(chunk) {\n    if (this.buf.length) {\n      this.chunks.push(new Uint8Array(this.buf));\n      this.buf = [];\n    }\n    this.chunks.push(chunk);\n    return this;\n  }\n  /**\n   * Write a `uint32` value, an unsigned 32 bit varint.\n   */\n  uint32(value) {\n    assertUInt32(value);\n    while (value > 127) {\n      this.buf.push(value & 127 | 128);\n      value = value >>> 7;\n    }\n    this.buf.push(value);\n    return this;\n  }\n  /**\n   * Write a `int32` value, a signed 32 bit varint.\n   */\n  int32(value) {\n    assertInt32(value);\n    varint32write(value, this.buf);\n    return this;\n  }\n  /**\n   * Write a `bool` value, a variant.\n   */\n  bool(value) {\n    this.buf.push(value ? 1 : 0);\n    return this;\n  }\n  /**\n   * Write a `bytes` value, length-delimited arbitrary data.\n   */\n  bytes(value) {\n    this.uint32(value.byteLength);\n    return this.raw(value);\n  }\n  /**\n   * Write a `string` value, length-delimited data converted to UTF-8 text.\n   */\n  string(value) {\n    let chunk = this.textEncoder.encode(value);\n    this.uint32(chunk.byteLength);\n    return this.raw(chunk);\n  }\n  /**\n   * Write a `float` value, 32-bit floating point number.\n   */\n  float(value) {\n    assertFloat32(value);\n    let chunk = new Uint8Array(4);\n    new DataView(chunk.buffer).setFloat32(0, value, true);\n    return this.raw(chunk);\n  }\n  /**\n   * Write a `double` value, a 64-bit floating point number.\n   */\n  double(value) {\n    let chunk = new Uint8Array(8);\n    new DataView(chunk.buffer).setFloat64(0, value, true);\n    return this.raw(chunk);\n  }\n  /**\n   * Write a `fixed32` value, an unsigned, fixed-length 32-bit integer.\n   */\n  fixed32(value) {\n    assertUInt32(value);\n    let chunk = new Uint8Array(4);\n    new DataView(chunk.buffer).setUint32(0, value, true);\n    return this.raw(chunk);\n  }\n  /**\n   * Write a `sfixed32` value, a signed, fixed-length 32-bit integer.\n   */\n  sfixed32(value) {\n    assertInt32(value);\n    let chunk = new Uint8Array(4);\n    new DataView(chunk.buffer).setInt32(0, value, true);\n    return this.raw(chunk);\n  }\n  /**\n   * Write a `sint32` value, a signed, zigzag-encoded 32-bit varint.\n   */\n  sint32(value) {\n    assertInt32(value);\n    value = (value << 1 ^ value >> 31) >>> 0;\n    varint32write(value, this.buf);\n    return this;\n  }\n  /**\n   * Write a `fixed64` value, a signed, fixed-length 64-bit integer.\n   */\n  sfixed64(value) {\n    let chunk = new Uint8Array(8), view = new DataView(chunk.buffer), tc = protoInt64.enc(value);\n    view.setInt32(0, tc.lo, true);\n    view.setInt32(4, tc.hi, true);\n    return this.raw(chunk);\n  }\n  /**\n   * Write a `fixed64` value, an unsigned, fixed-length 64 bit integer.\n   */\n  fixed64(value) {\n    let chunk = new Uint8Array(8), view = new DataView(chunk.buffer), tc = protoInt64.uEnc(value);\n    view.setInt32(0, tc.lo, true);\n    view.setInt32(4, tc.hi, true);\n    return this.raw(chunk);\n  }\n  /**\n   * Write a `int64` value, a signed 64-bit varint.\n   */\n  int64(value) {\n    let tc = protoInt64.enc(value);\n    varint64write(tc.lo, tc.hi, this.buf);\n    return this;\n  }\n  /**\n   * Write a `sint64` value, a signed, zig-zag-encoded 64-bit varint.\n   */\n  sint64(value) {\n    let tc = protoInt64.enc(value), sign = tc.hi >> 31, lo = tc.lo << 1 ^ sign, hi = (tc.hi << 1 | tc.lo >>> 31) ^ sign;\n    varint64write(lo, hi, this.buf);\n    return this;\n  }\n  /**\n   * Write a `uint64` value, an unsigned 64-bit varint.\n   */\n  uint64(value) {\n    let tc = protoInt64.uEnc(value);\n    varint64write(tc.lo, tc.hi, this.buf);\n    return this;\n  }\n};\nvar BinaryReader = class {\n  constructor(buf, textDecoder) {\n    this.varint64 = varint64read;\n    this.uint32 = varint32read;\n    this.buf = buf;\n    this.len = buf.length;\n    this.pos = 0;\n    this.view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength);\n    this.textDecoder = textDecoder !== null && textDecoder !== void 0 ? textDecoder : new TextDecoder();\n  }\n  /**\n   * Reads a tag - field number and wire type.\n   */\n  tag() {\n    let tag = this.uint32(), fieldNo = tag >>> 3, wireType = tag & 7;\n    if (fieldNo <= 0 || wireType < 0 || wireType > 5)\n      throw new Error(\"illegal tag: field no \" + fieldNo + \" wire type \" + wireType);\n    return [fieldNo, wireType];\n  }\n  /**\n   * Skip one element and return the skipped data.\n   *\n   * When skipping StartGroup, provide the tags field number to check for\n   * matching field number in the EndGroup tag.\n   */\n  skip(wireType, fieldNo) {\n    let start = this.pos;\n    switch (wireType) {\n      case WireType.Varint:\n        while (this.buf[this.pos++] & 128) {\n        }\n        break;\n      // eslint-disable-next-line\n      // @ts-ignore TS7029: Fallthrough case in switch\n      case WireType.Bit64:\n        this.pos += 4;\n      // eslint-disable-next-line\n      // @ts-ignore TS7029: Fallthrough case in switch\n      case WireType.Bit32:\n        this.pos += 4;\n        break;\n      case WireType.LengthDelimited:\n        let len = this.uint32();\n        this.pos += len;\n        break;\n      case WireType.StartGroup:\n        for (; ; ) {\n          const [fn, wt] = this.tag();\n          if (wt === WireType.EndGroup) {\n            if (fieldNo !== void 0 && fn !== fieldNo) {\n              throw new Error(\"invalid end group tag\");\n            }\n            break;\n          }\n          this.skip(wt, fn);\n        }\n        break;\n      default:\n        throw new Error(\"cant skip wire type \" + wireType);\n    }\n    this.assertBounds();\n    return this.buf.subarray(start, this.pos);\n  }\n  /**\n   * Throws error if position in byte array is out of range.\n   */\n  assertBounds() {\n    if (this.pos > this.len)\n      throw new RangeError(\"premature EOF\");\n  }\n  /**\n   * Read a `int32` field, a signed 32 bit varint.\n   */\n  int32() {\n    return this.uint32() | 0;\n  }\n  /**\n   * Read a `sint32` field, a signed, zigzag-encoded 32-bit varint.\n   */\n  sint32() {\n    let zze = this.uint32();\n    return zze >>> 1 ^ -(zze & 1);\n  }\n  /**\n   * Read a `int64` field, a signed 64-bit varint.\n   */\n  int64() {\n    return protoInt64.dec(...this.varint64());\n  }\n  /**\n   * Read a `uint64` field, an unsigned 64-bit varint.\n   */\n  uint64() {\n    return protoInt64.uDec(...this.varint64());\n  }\n  /**\n   * Read a `sint64` field, a signed, zig-zag-encoded 64-bit varint.\n   */\n  sint64() {\n    let [lo, hi] = this.varint64();\n    let s = -(lo & 1);\n    lo = (lo >>> 1 | (hi & 1) << 31) ^ s;\n    hi = hi >>> 1 ^ s;\n    return protoInt64.dec(lo, hi);\n  }\n  /**\n   * Read a `bool` field, a variant.\n   */\n  bool() {\n    let [lo, hi] = this.varint64();\n    return lo !== 0 || hi !== 0;\n  }\n  /**\n   * Read a `fixed32` field, an unsigned, fixed-length 32-bit integer.\n   */\n  fixed32() {\n    return this.view.getUint32((this.pos += 4) - 4, true);\n  }\n  /**\n   * Read a `sfixed32` field, a signed, fixed-length 32-bit integer.\n   */\n  sfixed32() {\n    return this.view.getInt32((this.pos += 4) - 4, true);\n  }\n  /**\n   * Read a `fixed64` field, an unsigned, fixed-length 64 bit integer.\n   */\n  fixed64() {\n    return protoInt64.uDec(this.sfixed32(), this.sfixed32());\n  }\n  /**\n   * Read a `fixed64` field, a signed, fixed-length 64-bit integer.\n   */\n  sfixed64() {\n    return protoInt64.dec(this.sfixed32(), this.sfixed32());\n  }\n  /**\n   * Read a `float` field, 32-bit floating point number.\n   */\n  float() {\n    return this.view.getFloat32((this.pos += 4) - 4, true);\n  }\n  /**\n   * Read a `double` field, a 64-bit floating point number.\n   */\n  double() {\n    return this.view.getFloat64((this.pos += 8) - 8, true);\n  }\n  /**\n   * Read a `bytes` field, length-delimited arbitrary data.\n   */\n  bytes() {\n    let len = this.uint32(), start = this.pos;\n    this.pos += len;\n    this.assertBounds();\n    return this.buf.subarray(start, start + len);\n  }\n  /**\n   * Read a `string` field, length-delimited data converted to UTF-8 text.\n   */\n  string() {\n    return this.textDecoder.decode(this.bytes());\n  }\n};\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/private/extensions.js\nfunction makeExtension(runtime, typeName, extendee, field) {\n  let fi;\n  return {\n    typeName,\n    extendee,\n    get field() {\n      if (!fi) {\n        const i = typeof field == \"function\" ? field() : field;\n        i.name = typeName.split(\".\").pop();\n        i.jsonName = `[${typeName}]`;\n        fi = runtime.util.newFieldList([i]).list()[0];\n      }\n      return fi;\n    },\n    runtime\n  };\n}\nfunction createExtensionContainer(extension) {\n  const localName = extension.field.localName;\n  const container = /* @__PURE__ */ Object.create(null);\n  container[localName] = initExtensionField(extension);\n  return [container, () => container[localName]];\n}\nfunction initExtensionField(ext) {\n  const field = ext.field;\n  if (field.repeated) {\n    return [];\n  }\n  if (field.default !== void 0) {\n    return field.default;\n  }\n  switch (field.kind) {\n    case \"enum\":\n      return field.T.values[0].no;\n    case \"scalar\":\n      return scalarZeroValue(field.T, field.L);\n    case \"message\":\n      const T = field.T, value = new T();\n      return T.fieldWrapper ? T.fieldWrapper.unwrapField(value) : value;\n    case \"map\":\n      throw \"map fields are not allowed to be extensions\";\n  }\n}\nfunction filterUnknownFields(unknownFields, field) {\n  if (!field.repeated && (field.kind == \"enum\" || field.kind == \"scalar\")) {\n    for (let i = unknownFields.length - 1; i >= 0; --i) {\n      if (unknownFields[i].no == field.no) {\n        return [unknownFields[i]];\n      }\n    }\n    return [];\n  }\n  return unknownFields.filter((uf) => uf.no === field.no);\n}\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/proto-base64.js\nvar encTable = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\".split(\"\");\nvar decTable = [];\nfor (let i = 0; i < encTable.length; i++)\n  decTable[encTable[i].charCodeAt(0)] = i;\ndecTable[\"-\".charCodeAt(0)] = encTable.indexOf(\"+\");\ndecTable[\"_\".charCodeAt(0)] = encTable.indexOf(\"/\");\nvar protoBase64 = {\n  /**\n   * Decodes a base64 string to a byte array.\n   *\n   * - ignores white-space, including line breaks and tabs\n   * - allows inner padding (can decode concatenated base64 strings)\n   * - does not require padding\n   * - understands base64url encoding:\n   *   \"-\" instead of \"+\",\n   *   \"_\" instead of \"/\",\n   *   no padding\n   */\n  dec(base64Str) {\n    let es = base64Str.length * 3 / 4;\n    if (base64Str[base64Str.length - 2] == \"=\")\n      es -= 2;\n    else if (base64Str[base64Str.length - 1] == \"=\")\n      es -= 1;\n    let bytes = new Uint8Array(es), bytePos = 0, groupPos = 0, b, p = 0;\n    for (let i = 0; i < base64Str.length; i++) {\n      b = decTable[base64Str.charCodeAt(i)];\n      if (b === void 0) {\n        switch (base64Str[i]) {\n          // @ts-ignore TS7029: Fallthrough case in switch\n          case \"=\":\n            groupPos = 0;\n          // reset state when padding found\n          // @ts-ignore TS7029: Fallthrough case in switch\n          case \"\\n\":\n          case \"\\r\":\n          case \"\t\":\n          case \" \":\n            continue;\n          // skip white-space, and padding\n          default:\n            throw Error(\"invalid base64 string.\");\n        }\n      }\n      switch (groupPos) {\n        case 0:\n          p = b;\n          groupPos = 1;\n          break;\n        case 1:\n          bytes[bytePos++] = p << 2 | (b & 48) >> 4;\n          p = b;\n          groupPos = 2;\n          break;\n        case 2:\n          bytes[bytePos++] = (p & 15) << 4 | (b & 60) >> 2;\n          p = b;\n          groupPos = 3;\n          break;\n        case 3:\n          bytes[bytePos++] = (p & 3) << 6 | b;\n          groupPos = 0;\n          break;\n      }\n    }\n    if (groupPos == 1)\n      throw Error(\"invalid base64 string.\");\n    return bytes.subarray(0, bytePos);\n  },\n  /**\n   * Encode a byte array to a base64 string.\n   */\n  enc(bytes) {\n    let base64 = \"\", groupPos = 0, b, p = 0;\n    for (let i = 0; i < bytes.length; i++) {\n      b = bytes[i];\n      switch (groupPos) {\n        case 0:\n          base64 += encTable[b >> 2];\n          p = (b & 3) << 4;\n          groupPos = 1;\n          break;\n        case 1:\n          base64 += encTable[p | b >> 4];\n          p = (b & 15) << 2;\n          groupPos = 2;\n          break;\n        case 2:\n          base64 += encTable[p | b >> 6];\n          base64 += encTable[b & 63];\n          groupPos = 0;\n          break;\n      }\n    }\n    if (groupPos) {\n      base64 += encTable[p];\n      base64 += \"=\";\n      if (groupPos == 1)\n        base64 += \"=\";\n    }\n    return base64;\n  }\n};\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/extension-accessor.js\nfunction getExtension(message, extension, options) {\n  assertExtendee(extension, message);\n  const opt = extension.runtime.bin.makeReadOptions(options);\n  const ufs = filterUnknownFields(message.getType().runtime.bin.listUnknownFields(message), extension.field);\n  const [container, get] = createExtensionContainer(extension);\n  for (const uf of ufs) {\n    extension.runtime.bin.readField(container, opt.readerFactory(uf.data), extension.field, uf.wireType, opt);\n  }\n  return get();\n}\nfunction setExtension(message, extension, value, options) {\n  assertExtendee(extension, message);\n  const readOpt = extension.runtime.bin.makeReadOptions(options);\n  const writeOpt = extension.runtime.bin.makeWriteOptions(options);\n  if (hasExtension(message, extension)) {\n    const ufs = message.getType().runtime.bin.listUnknownFields(message).filter((uf) => uf.no != extension.field.no);\n    message.getType().runtime.bin.discardUnknownFields(message);\n    for (const uf of ufs) {\n      message.getType().runtime.bin.onUnknownField(message, uf.no, uf.wireType, uf.data);\n    }\n  }\n  const writer = writeOpt.writerFactory();\n  let f = extension.field;\n  if (!f.opt && !f.repeated && (f.kind == \"enum\" || f.kind == \"scalar\")) {\n    f = Object.assign(Object.assign({}, extension.field), { opt: true });\n  }\n  extension.runtime.bin.writeField(f, value, writer, writeOpt);\n  const reader = readOpt.readerFactory(writer.finish());\n  while (reader.pos < reader.len) {\n    const [no, wireType] = reader.tag();\n    const data = reader.skip(wireType, no);\n    message.getType().runtime.bin.onUnknownField(message, no, wireType, data);\n  }\n}\nfunction hasExtension(message, extension) {\n  const messageType = message.getType();\n  return extension.extendee.typeName === messageType.typeName && !!messageType.runtime.bin.listUnknownFields(message).find((uf) => uf.no == extension.field.no);\n}\nfunction assertExtendee(extension, message) {\n  assert(extension.extendee.typeName == message.getType().typeName, `extension ${extension.typeName} can only be applied to message ${extension.extendee.typeName}`);\n}\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/private/reflect.js\nfunction isFieldSet(field, target) {\n  const localName = field.localName;\n  if (field.repeated) {\n    return target[localName].length > 0;\n  }\n  if (field.oneof) {\n    return target[field.oneof.localName].case === localName;\n  }\n  switch (field.kind) {\n    case \"enum\":\n    case \"scalar\":\n      if (field.opt || field.req) {\n        return target[localName] !== void 0;\n      }\n      if (field.kind == \"enum\") {\n        return target[localName] !== field.T.values[0].no;\n      }\n      return !isScalarZeroValue(field.T, target[localName]);\n    case \"message\":\n      return target[localName] !== void 0;\n    case \"map\":\n      return Object.keys(target[localName]).length > 0;\n  }\n}\nfunction clearField(field, target) {\n  const localName = field.localName;\n  const implicitPresence = !field.opt && !field.req;\n  if (field.repeated) {\n    target[localName] = [];\n  } else if (field.oneof) {\n    target[field.oneof.localName] = { case: void 0 };\n  } else {\n    switch (field.kind) {\n      case \"map\":\n        target[localName] = {};\n        break;\n      case \"enum\":\n        target[localName] = implicitPresence ? field.T.values[0].no : void 0;\n        break;\n      case \"scalar\":\n        target[localName] = implicitPresence ? scalarZeroValue(field.T, field.L) : void 0;\n        break;\n      case \"message\":\n        target[localName] = void 0;\n        break;\n    }\n  }\n}\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/is-message.js\nfunction isMessage(arg, type) {\n  if (arg === null || typeof arg != \"object\") {\n    return false;\n  }\n  if (!Object.getOwnPropertyNames(Message.prototype).every((m) => m in arg && typeof arg[m] == \"function\")) {\n    return false;\n  }\n  const actualType = arg.getType();\n  if (actualType === null || typeof actualType != \"function\" || !(\"typeName\" in actualType) || typeof actualType.typeName != \"string\") {\n    return false;\n  }\n  return type === void 0 ? true : actualType.typeName == type.typeName;\n}\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/private/field-wrapper.js\nfunction wrapField(type, value) {\n  if (isMessage(value) || !type.fieldWrapper) {\n    return value;\n  }\n  return type.fieldWrapper.wrapField(value);\n}\n({\n  \"google.protobuf.DoubleValue\": ScalarType.DOUBLE,\n  \"google.protobuf.FloatValue\": ScalarType.FLOAT,\n  \"google.protobuf.Int64Value\": ScalarType.INT64,\n  \"google.protobuf.UInt64Value\": ScalarType.UINT64,\n  \"google.protobuf.Int32Value\": ScalarType.INT32,\n  \"google.protobuf.UInt32Value\": ScalarType.UINT32,\n  \"google.protobuf.BoolValue\": ScalarType.BOOL,\n  \"google.protobuf.StringValue\": ScalarType.STRING,\n  \"google.protobuf.BytesValue\": ScalarType.BYTES\n});\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/private/json-format.js\nvar jsonReadDefaults = {\n  ignoreUnknownFields: false\n};\nvar jsonWriteDefaults = {\n  emitDefaultValues: false,\n  enumAsInteger: false,\n  useProtoFieldName: false,\n  prettySpaces: 0\n};\nfunction makeReadOptions(options) {\n  return options ? Object.assign(Object.assign({}, jsonReadDefaults), options) : jsonReadDefaults;\n}\nfunction makeWriteOptions(options) {\n  return options ? Object.assign(Object.assign({}, jsonWriteDefaults), options) : jsonWriteDefaults;\n}\nvar tokenNull = Symbol();\nvar tokenIgnoredUnknownEnum = Symbol();\nfunction makeJsonFormat() {\n  return {\n    makeReadOptions,\n    makeWriteOptions,\n    readMessage(type, json, options, message) {\n      if (json == null || Array.isArray(json) || typeof json != \"object\") {\n        throw new Error(`cannot decode message ${type.typeName} from JSON: ${debugJsonValue(json)}`);\n      }\n      message = message !== null && message !== void 0 ? message : new type();\n      const oneofSeen = /* @__PURE__ */ new Map();\n      const registry = options.typeRegistry;\n      for (const [jsonKey, jsonValue] of Object.entries(json)) {\n        const field = type.fields.findJsonName(jsonKey);\n        if (field) {\n          if (field.oneof) {\n            if (jsonValue === null && field.kind == \"scalar\") {\n              continue;\n            }\n            const seen = oneofSeen.get(field.oneof);\n            if (seen !== void 0) {\n              throw new Error(`cannot decode message ${type.typeName} from JSON: multiple keys for oneof \"${field.oneof.name}\" present: \"${seen}\", \"${jsonKey}\"`);\n            }\n            oneofSeen.set(field.oneof, jsonKey);\n          }\n          readField(message, jsonValue, field, options, type);\n        } else {\n          let found = false;\n          if ((registry === null || registry === void 0 ? void 0 : registry.findExtension) && jsonKey.startsWith(\"[\") && jsonKey.endsWith(\"]\")) {\n            const ext = registry.findExtension(jsonKey.substring(1, jsonKey.length - 1));\n            if (ext && ext.extendee.typeName == type.typeName) {\n              found = true;\n              const [container, get] = createExtensionContainer(ext);\n              readField(container, jsonValue, ext.field, options, ext);\n              setExtension(message, ext, get(), options);\n            }\n          }\n          if (!found && !options.ignoreUnknownFields) {\n            throw new Error(`cannot decode message ${type.typeName} from JSON: key \"${jsonKey}\" is unknown`);\n          }\n        }\n      }\n      return message;\n    },\n    writeMessage(message, options) {\n      const type = message.getType();\n      const json = {};\n      let field;\n      try {\n        for (field of type.fields.byNumber()) {\n          if (!isFieldSet(field, message)) {\n            if (field.req) {\n              throw `required field not set`;\n            }\n            if (!options.emitDefaultValues) {\n              continue;\n            }\n            if (!canEmitFieldDefaultValue(field)) {\n              continue;\n            }\n          }\n          const value = field.oneof ? message[field.oneof.localName].value : message[field.localName];\n          const jsonValue = writeField(field, value, options);\n          if (jsonValue !== void 0) {\n            json[options.useProtoFieldName ? field.name : field.jsonName] = jsonValue;\n          }\n        }\n        const registry = options.typeRegistry;\n        if (registry === null || registry === void 0 ? void 0 : registry.findExtensionFor) {\n          for (const uf of type.runtime.bin.listUnknownFields(message)) {\n            const ext = registry.findExtensionFor(type.typeName, uf.no);\n            if (ext && hasExtension(message, ext)) {\n              const value = getExtension(message, ext, options);\n              const jsonValue = writeField(ext.field, value, options);\n              if (jsonValue !== void 0) {\n                json[ext.field.jsonName] = jsonValue;\n              }\n            }\n          }\n        }\n      } catch (e) {\n        const m = field ? `cannot encode field ${type.typeName}.${field.name} to JSON` : `cannot encode message ${type.typeName} to JSON`;\n        const r = e instanceof Error ? e.message : String(e);\n        throw new Error(m + (r.length > 0 ? `: ${r}` : \"\"));\n      }\n      return json;\n    },\n    readScalar(type, json, longType) {\n      return readScalar(type, json, longType !== null && longType !== void 0 ? longType : LongType.BIGINT, true);\n    },\n    writeScalar(type, value, emitDefaultValues) {\n      if (value === void 0) {\n        return void 0;\n      }\n      if (emitDefaultValues || isScalarZeroValue(type, value)) {\n        return writeScalar(type, value);\n      }\n      return void 0;\n    },\n    debug: debugJsonValue\n  };\n}\nfunction debugJsonValue(json) {\n  if (json === null) {\n    return \"null\";\n  }\n  switch (typeof json) {\n    case \"object\":\n      return Array.isArray(json) ? \"array\" : \"object\";\n    case \"string\":\n      return json.length > 100 ? \"string\" : `\"${json.split('\"').join('\\\\\"')}\"`;\n    default:\n      return String(json);\n  }\n}\nfunction readField(target, jsonValue, field, options, parentType) {\n  let localName = field.localName;\n  if (field.repeated) {\n    assert(field.kind != \"map\");\n    if (jsonValue === null) {\n      return;\n    }\n    if (!Array.isArray(jsonValue)) {\n      throw new Error(`cannot decode field ${parentType.typeName}.${field.name} from JSON: ${debugJsonValue(jsonValue)}`);\n    }\n    const targetArray = target[localName];\n    for (const jsonItem of jsonValue) {\n      if (jsonItem === null) {\n        throw new Error(`cannot decode field ${parentType.typeName}.${field.name} from JSON: ${debugJsonValue(jsonItem)}`);\n      }\n      switch (field.kind) {\n        case \"message\":\n          targetArray.push(field.T.fromJson(jsonItem, options));\n          break;\n        case \"enum\":\n          const enumValue = readEnum(field.T, jsonItem, options.ignoreUnknownFields, true);\n          if (enumValue !== tokenIgnoredUnknownEnum) {\n            targetArray.push(enumValue);\n          }\n          break;\n        case \"scalar\":\n          try {\n            targetArray.push(readScalar(field.T, jsonItem, field.L, true));\n          } catch (e) {\n            let m = `cannot decode field ${parentType.typeName}.${field.name} from JSON: ${debugJsonValue(jsonItem)}`;\n            if (e instanceof Error && e.message.length > 0) {\n              m += `: ${e.message}`;\n            }\n            throw new Error(m);\n          }\n          break;\n      }\n    }\n  } else if (field.kind == \"map\") {\n    if (jsonValue === null) {\n      return;\n    }\n    if (typeof jsonValue != \"object\" || Array.isArray(jsonValue)) {\n      throw new Error(`cannot decode field ${parentType.typeName}.${field.name} from JSON: ${debugJsonValue(jsonValue)}`);\n    }\n    const targetMap = target[localName];\n    for (const [jsonMapKey, jsonMapValue] of Object.entries(jsonValue)) {\n      if (jsonMapValue === null) {\n        throw new Error(`cannot decode field ${parentType.typeName}.${field.name} from JSON: map value null`);\n      }\n      let key;\n      try {\n        key = readMapKey(field.K, jsonMapKey);\n      } catch (e) {\n        let m = `cannot decode map key for field ${parentType.typeName}.${field.name} from JSON: ${debugJsonValue(jsonValue)}`;\n        if (e instanceof Error && e.message.length > 0) {\n          m += `: ${e.message}`;\n        }\n        throw new Error(m);\n      }\n      switch (field.V.kind) {\n        case \"message\":\n          targetMap[key] = field.V.T.fromJson(jsonMapValue, options);\n          break;\n        case \"enum\":\n          const enumValue = readEnum(field.V.T, jsonMapValue, options.ignoreUnknownFields, true);\n          if (enumValue !== tokenIgnoredUnknownEnum) {\n            targetMap[key] = enumValue;\n          }\n          break;\n        case \"scalar\":\n          try {\n            targetMap[key] = readScalar(field.V.T, jsonMapValue, LongType.BIGINT, true);\n          } catch (e) {\n            let m = `cannot decode map value for field ${parentType.typeName}.${field.name} from JSON: ${debugJsonValue(jsonValue)}`;\n            if (e instanceof Error && e.message.length > 0) {\n              m += `: ${e.message}`;\n            }\n            throw new Error(m);\n          }\n          break;\n      }\n    }\n  } else {\n    if (field.oneof) {\n      target = target[field.oneof.localName] = { case: localName };\n      localName = \"value\";\n    }\n    switch (field.kind) {\n      case \"message\":\n        const messageType = field.T;\n        if (jsonValue === null && messageType.typeName != \"google.protobuf.Value\") {\n          return;\n        }\n        let currentValue = target[localName];\n        if (isMessage(currentValue)) {\n          currentValue.fromJson(jsonValue, options);\n        } else {\n          target[localName] = currentValue = messageType.fromJson(jsonValue, options);\n          if (messageType.fieldWrapper && !field.oneof) {\n            target[localName] = messageType.fieldWrapper.unwrapField(currentValue);\n          }\n        }\n        break;\n      case \"enum\":\n        const enumValue = readEnum(field.T, jsonValue, options.ignoreUnknownFields, false);\n        switch (enumValue) {\n          case tokenNull:\n            clearField(field, target);\n            break;\n          case tokenIgnoredUnknownEnum:\n            break;\n          default:\n            target[localName] = enumValue;\n            break;\n        }\n        break;\n      case \"scalar\":\n        try {\n          const scalarValue = readScalar(field.T, jsonValue, field.L, false);\n          switch (scalarValue) {\n            case tokenNull:\n              clearField(field, target);\n              break;\n            default:\n              target[localName] = scalarValue;\n              break;\n          }\n        } catch (e) {\n          let m = `cannot decode field ${parentType.typeName}.${field.name} from JSON: ${debugJsonValue(jsonValue)}`;\n          if (e instanceof Error && e.message.length > 0) {\n            m += `: ${e.message}`;\n          }\n          throw new Error(m);\n        }\n        break;\n    }\n  }\n}\nfunction readMapKey(type, json) {\n  if (type === ScalarType.BOOL) {\n    switch (json) {\n      case \"true\":\n        json = true;\n        break;\n      case \"false\":\n        json = false;\n        break;\n    }\n  }\n  return readScalar(type, json, LongType.BIGINT, true).toString();\n}\nfunction readScalar(type, json, longType, nullAsZeroValue) {\n  if (json === null) {\n    if (nullAsZeroValue) {\n      return scalarZeroValue(type, longType);\n    }\n    return tokenNull;\n  }\n  switch (type) {\n    // float, double: JSON value will be a number or one of the special string values \"NaN\", \"Infinity\", and \"-Infinity\".\n    // Either numbers or strings are accepted. Exponent notation is also accepted.\n    case ScalarType.DOUBLE:\n    case ScalarType.FLOAT:\n      if (json === \"NaN\")\n        return Number.NaN;\n      if (json === \"Infinity\")\n        return Number.POSITIVE_INFINITY;\n      if (json === \"-Infinity\")\n        return Number.NEGATIVE_INFINITY;\n      if (json === \"\") {\n        break;\n      }\n      if (typeof json == \"string\" && json.trim().length !== json.length) {\n        break;\n      }\n      if (typeof json != \"string\" && typeof json != \"number\") {\n        break;\n      }\n      const float = Number(json);\n      if (Number.isNaN(float)) {\n        break;\n      }\n      if (!Number.isFinite(float)) {\n        break;\n      }\n      if (type == ScalarType.FLOAT)\n        assertFloat32(float);\n      return float;\n    // int32, fixed32, uint32: JSON value will be a decimal number. Either numbers or strings are accepted.\n    case ScalarType.INT32:\n    case ScalarType.FIXED32:\n    case ScalarType.SFIXED32:\n    case ScalarType.SINT32:\n    case ScalarType.UINT32:\n      let int32;\n      if (typeof json == \"number\")\n        int32 = json;\n      else if (typeof json == \"string\" && json.length > 0) {\n        if (json.trim().length === json.length)\n          int32 = Number(json);\n      }\n      if (int32 === void 0)\n        break;\n      if (type == ScalarType.UINT32 || type == ScalarType.FIXED32)\n        assertUInt32(int32);\n      else\n        assertInt32(int32);\n      return int32;\n    // int64, fixed64, uint64: JSON value will be a decimal string. Either numbers or strings are accepted.\n    case ScalarType.INT64:\n    case ScalarType.SFIXED64:\n    case ScalarType.SINT64:\n      if (typeof json != \"number\" && typeof json != \"string\")\n        break;\n      const long = protoInt64.parse(json);\n      return longType ? long.toString() : long;\n    case ScalarType.FIXED64:\n    case ScalarType.UINT64:\n      if (typeof json != \"number\" && typeof json != \"string\")\n        break;\n      const uLong = protoInt64.uParse(json);\n      return longType ? uLong.toString() : uLong;\n    // bool:\n    case ScalarType.BOOL:\n      if (typeof json !== \"boolean\")\n        break;\n      return json;\n    // string:\n    case ScalarType.STRING:\n      if (typeof json !== \"string\") {\n        break;\n      }\n      try {\n        encodeURIComponent(json);\n      } catch (e) {\n        throw new Error(\"invalid UTF8\");\n      }\n      return json;\n    // bytes: JSON value will be the data encoded as a string using standard base64 encoding with paddings.\n    // Either standard or URL-safe base64 encoding with/without paddings are accepted.\n    case ScalarType.BYTES:\n      if (json === \"\")\n        return new Uint8Array(0);\n      if (typeof json !== \"string\")\n        break;\n      return protoBase64.dec(json);\n  }\n  throw new Error();\n}\nfunction readEnum(type, json, ignoreUnknownFields, nullAsZeroValue) {\n  if (json === null) {\n    if (type.typeName == \"google.protobuf.NullValue\") {\n      return 0;\n    }\n    return nullAsZeroValue ? type.values[0].no : tokenNull;\n  }\n  switch (typeof json) {\n    case \"number\":\n      if (Number.isInteger(json)) {\n        return json;\n      }\n      break;\n    case \"string\":\n      const value = type.findName(json);\n      if (value !== void 0) {\n        return value.no;\n      }\n      if (ignoreUnknownFields) {\n        return tokenIgnoredUnknownEnum;\n      }\n      break;\n  }\n  throw new Error(`cannot decode enum ${type.typeName} from JSON: ${debugJsonValue(json)}`);\n}\nfunction canEmitFieldDefaultValue(field) {\n  if (field.repeated || field.kind == \"map\") {\n    return true;\n  }\n  if (field.oneof) {\n    return false;\n  }\n  if (field.kind == \"message\") {\n    return false;\n  }\n  if (field.opt || field.req) {\n    return false;\n  }\n  return true;\n}\nfunction writeField(field, value, options) {\n  if (field.kind == \"map\") {\n    assert(typeof value == \"object\" && value != null);\n    const jsonObj = {};\n    const entries = Object.entries(value);\n    switch (field.V.kind) {\n      case \"scalar\":\n        for (const [entryKey, entryValue] of entries) {\n          jsonObj[entryKey.toString()] = writeScalar(field.V.T, entryValue);\n        }\n        break;\n      case \"message\":\n        for (const [entryKey, entryValue] of entries) {\n          jsonObj[entryKey.toString()] = entryValue.toJson(options);\n        }\n        break;\n      case \"enum\":\n        const enumType = field.V.T;\n        for (const [entryKey, entryValue] of entries) {\n          jsonObj[entryKey.toString()] = writeEnum(enumType, entryValue, options.enumAsInteger);\n        }\n        break;\n    }\n    return options.emitDefaultValues || entries.length > 0 ? jsonObj : void 0;\n  }\n  if (field.repeated) {\n    assert(Array.isArray(value));\n    const jsonArr = [];\n    switch (field.kind) {\n      case \"scalar\":\n        for (let i = 0; i < value.length; i++) {\n          jsonArr.push(writeScalar(field.T, value[i]));\n        }\n        break;\n      case \"enum\":\n        for (let i = 0; i < value.length; i++) {\n          jsonArr.push(writeEnum(field.T, value[i], options.enumAsInteger));\n        }\n        break;\n      case \"message\":\n        for (let i = 0; i < value.length; i++) {\n          jsonArr.push(value[i].toJson(options));\n        }\n        break;\n    }\n    return options.emitDefaultValues || jsonArr.length > 0 ? jsonArr : void 0;\n  }\n  switch (field.kind) {\n    case \"scalar\":\n      return writeScalar(field.T, value);\n    case \"enum\":\n      return writeEnum(field.T, value, options.enumAsInteger);\n    case \"message\":\n      return wrapField(field.T, value).toJson(options);\n  }\n}\nfunction writeEnum(type, value, enumAsInteger) {\n  var _a;\n  assert(typeof value == \"number\");\n  if (type.typeName == \"google.protobuf.NullValue\") {\n    return null;\n  }\n  if (enumAsInteger) {\n    return value;\n  }\n  const val = type.findNumber(value);\n  return (_a = val === null || val === void 0 ? void 0 : val.name) !== null && _a !== void 0 ? _a : value;\n}\nfunction writeScalar(type, value) {\n  switch (type) {\n    // int32, fixed32, uint32: JSON value will be a decimal number. Either numbers or strings are accepted.\n    case ScalarType.INT32:\n    case ScalarType.SFIXED32:\n    case ScalarType.SINT32:\n    case ScalarType.FIXED32:\n    case ScalarType.UINT32:\n      assert(typeof value == \"number\");\n      return value;\n    // float, double: JSON value will be a number or one of the special string values \"NaN\", \"Infinity\", and \"-Infinity\".\n    // Either numbers or strings are accepted. Exponent notation is also accepted.\n    case ScalarType.FLOAT:\n    // assertFloat32(value);\n    case ScalarType.DOUBLE:\n      assert(typeof value == \"number\");\n      if (Number.isNaN(value))\n        return \"NaN\";\n      if (value === Number.POSITIVE_INFINITY)\n        return \"Infinity\";\n      if (value === Number.NEGATIVE_INFINITY)\n        return \"-Infinity\";\n      return value;\n    // string:\n    case ScalarType.STRING:\n      assert(typeof value == \"string\");\n      return value;\n    // bool:\n    case ScalarType.BOOL:\n      assert(typeof value == \"boolean\");\n      return value;\n    // JSON value will be a decimal string. Either numbers or strings are accepted.\n    case ScalarType.UINT64:\n    case ScalarType.FIXED64:\n    case ScalarType.INT64:\n    case ScalarType.SFIXED64:\n    case ScalarType.SINT64:\n      assert(typeof value == \"bigint\" || typeof value == \"string\" || typeof value == \"number\");\n      return value.toString();\n    // bytes: JSON value will be the data encoded as a string using standard base64 encoding with paddings.\n    // Either standard or URL-safe base64 encoding with/without paddings are accepted.\n    case ScalarType.BYTES:\n      assert(value instanceof Uint8Array);\n      return protoBase64.enc(value);\n  }\n}\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/private/binary-format.js\nvar unknownFieldsSymbol = Symbol(\"@bufbuild/protobuf/unknown-fields\");\nvar readDefaults = {\n  readUnknownFields: true,\n  readerFactory: (bytes) => new BinaryReader(bytes)\n};\nvar writeDefaults = {\n  writeUnknownFields: true,\n  writerFactory: () => new BinaryWriter()\n};\nfunction makeReadOptions2(options) {\n  return options ? Object.assign(Object.assign({}, readDefaults), options) : readDefaults;\n}\nfunction makeWriteOptions2(options) {\n  return options ? Object.assign(Object.assign({}, writeDefaults), options) : writeDefaults;\n}\nfunction makeBinaryFormat() {\n  return {\n    makeReadOptions: makeReadOptions2,\n    makeWriteOptions: makeWriteOptions2,\n    listUnknownFields(message) {\n      var _a;\n      return (_a = message[unknownFieldsSymbol]) !== null && _a !== void 0 ? _a : [];\n    },\n    discardUnknownFields(message) {\n      delete message[unknownFieldsSymbol];\n    },\n    writeUnknownFields(message, writer) {\n      const m = message;\n      const c = m[unknownFieldsSymbol];\n      if (c) {\n        for (const f of c) {\n          writer.tag(f.no, f.wireType).raw(f.data);\n        }\n      }\n    },\n    onUnknownField(message, no, wireType, data) {\n      const m = message;\n      if (!Array.isArray(m[unknownFieldsSymbol])) {\n        m[unknownFieldsSymbol] = [];\n      }\n      m[unknownFieldsSymbol].push({ no, wireType, data });\n    },\n    readMessage(message, reader, lengthOrEndTagFieldNo, options, delimitedMessageEncoding) {\n      const type = message.getType();\n      const end = delimitedMessageEncoding ? reader.len : reader.pos + lengthOrEndTagFieldNo;\n      let fieldNo, wireType;\n      while (reader.pos < end) {\n        [fieldNo, wireType] = reader.tag();\n        if (delimitedMessageEncoding === true && wireType == WireType.EndGroup) {\n          break;\n        }\n        const field = type.fields.find(fieldNo);\n        if (!field) {\n          const data = reader.skip(wireType, fieldNo);\n          if (options.readUnknownFields) {\n            this.onUnknownField(message, fieldNo, wireType, data);\n          }\n          continue;\n        }\n        readField2(message, reader, field, wireType, options);\n      }\n      if (delimitedMessageEncoding && // eslint-disable-line @typescript-eslint/strict-boolean-expressions\n      (wireType != WireType.EndGroup || fieldNo !== lengthOrEndTagFieldNo)) {\n        throw new Error(`invalid end group tag`);\n      }\n    },\n    readField: readField2,\n    writeMessage(message, writer, options) {\n      const type = message.getType();\n      for (const field of type.fields.byNumber()) {\n        if (!isFieldSet(field, message)) {\n          if (field.req) {\n            throw new Error(`cannot encode field ${type.typeName}.${field.name} to binary: required field not set`);\n          }\n          continue;\n        }\n        const value = field.oneof ? message[field.oneof.localName].value : message[field.localName];\n        writeField2(field, value, writer, options);\n      }\n      if (options.writeUnknownFields) {\n        this.writeUnknownFields(message, writer);\n      }\n      return writer;\n    },\n    writeField(field, value, writer, options) {\n      if (value === void 0) {\n        return void 0;\n      }\n      writeField2(field, value, writer, options);\n    }\n  };\n}\nfunction readField2(target, reader, field, wireType, options) {\n  let { repeated, localName } = field;\n  if (field.oneof) {\n    target = target[field.oneof.localName];\n    if (target.case != localName) {\n      delete target.value;\n    }\n    target.case = localName;\n    localName = \"value\";\n  }\n  switch (field.kind) {\n    case \"scalar\":\n    case \"enum\":\n      const scalarType = field.kind == \"enum\" ? ScalarType.INT32 : field.T;\n      let read = readScalar2;\n      if (field.kind == \"scalar\" && field.L > 0) {\n        read = readScalarLTString;\n      }\n      if (repeated) {\n        let arr = target[localName];\n        const isPacked = wireType == WireType.LengthDelimited && scalarType != ScalarType.STRING && scalarType != ScalarType.BYTES;\n        if (isPacked) {\n          let e = reader.uint32() + reader.pos;\n          while (reader.pos < e) {\n            arr.push(read(reader, scalarType));\n          }\n        } else {\n          arr.push(read(reader, scalarType));\n        }\n      } else {\n        target[localName] = read(reader, scalarType);\n      }\n      break;\n    case \"message\":\n      const messageType = field.T;\n      if (repeated) {\n        target[localName].push(readMessageField(reader, new messageType(), options, field));\n      } else {\n        if (isMessage(target[localName])) {\n          readMessageField(reader, target[localName], options, field);\n        } else {\n          target[localName] = readMessageField(reader, new messageType(), options, field);\n          if (messageType.fieldWrapper && !field.oneof && !field.repeated) {\n            target[localName] = messageType.fieldWrapper.unwrapField(target[localName]);\n          }\n        }\n      }\n      break;\n    case \"map\":\n      let [mapKey, mapVal] = readMapEntry(field, reader, options);\n      target[localName][mapKey] = mapVal;\n      break;\n  }\n}\nfunction readMessageField(reader, message, options, field) {\n  const format = message.getType().runtime.bin;\n  const delimited = field === null || field === void 0 ? void 0 : field.delimited;\n  format.readMessage(\n    message,\n    reader,\n    delimited ? field.no : reader.uint32(),\n    // eslint-disable-line @typescript-eslint/strict-boolean-expressions\n    options,\n    delimited\n  );\n  return message;\n}\nfunction readMapEntry(field, reader, options) {\n  const length = reader.uint32(), end = reader.pos + length;\n  let key, val;\n  while (reader.pos < end) {\n    const [fieldNo] = reader.tag();\n    switch (fieldNo) {\n      case 1:\n        key = readScalar2(reader, field.K);\n        break;\n      case 2:\n        switch (field.V.kind) {\n          case \"scalar\":\n            val = readScalar2(reader, field.V.T);\n            break;\n          case \"enum\":\n            val = reader.int32();\n            break;\n          case \"message\":\n            val = readMessageField(reader, new field.V.T(), options, void 0);\n            break;\n        }\n        break;\n    }\n  }\n  if (key === void 0) {\n    key = scalarZeroValue(field.K, LongType.BIGINT);\n  }\n  if (typeof key != \"string\" && typeof key != \"number\") {\n    key = key.toString();\n  }\n  if (val === void 0) {\n    switch (field.V.kind) {\n      case \"scalar\":\n        val = scalarZeroValue(field.V.T, LongType.BIGINT);\n        break;\n      case \"enum\":\n        val = field.V.T.values[0].no;\n        break;\n      case \"message\":\n        val = new field.V.T();\n        break;\n    }\n  }\n  return [key, val];\n}\nfunction readScalarLTString(reader, type) {\n  const v = readScalar2(reader, type);\n  return typeof v == \"bigint\" ? v.toString() : v;\n}\nfunction readScalar2(reader, type) {\n  switch (type) {\n    case ScalarType.STRING:\n      return reader.string();\n    case ScalarType.BOOL:\n      return reader.bool();\n    case ScalarType.DOUBLE:\n      return reader.double();\n    case ScalarType.FLOAT:\n      return reader.float();\n    case ScalarType.INT32:\n      return reader.int32();\n    case ScalarType.INT64:\n      return reader.int64();\n    case ScalarType.UINT64:\n      return reader.uint64();\n    case ScalarType.FIXED64:\n      return reader.fixed64();\n    case ScalarType.BYTES:\n      return reader.bytes();\n    case ScalarType.FIXED32:\n      return reader.fixed32();\n    case ScalarType.SFIXED32:\n      return reader.sfixed32();\n    case ScalarType.SFIXED64:\n      return reader.sfixed64();\n    case ScalarType.SINT64:\n      return reader.sint64();\n    case ScalarType.UINT32:\n      return reader.uint32();\n    case ScalarType.SINT32:\n      return reader.sint32();\n  }\n}\nfunction writeField2(field, value, writer, options) {\n  assert(value !== void 0);\n  const repeated = field.repeated;\n  switch (field.kind) {\n    case \"scalar\":\n    case \"enum\":\n      let scalarType = field.kind == \"enum\" ? ScalarType.INT32 : field.T;\n      if (repeated) {\n        assert(Array.isArray(value));\n        if (field.packed) {\n          writePacked(writer, scalarType, field.no, value);\n        } else {\n          for (const item of value) {\n            writeScalar2(writer, scalarType, field.no, item);\n          }\n        }\n      } else {\n        writeScalar2(writer, scalarType, field.no, value);\n      }\n      break;\n    case \"message\":\n      if (repeated) {\n        assert(Array.isArray(value));\n        for (const item of value) {\n          writeMessageField(writer, options, field, item);\n        }\n      } else {\n        writeMessageField(writer, options, field, value);\n      }\n      break;\n    case \"map\":\n      assert(typeof value == \"object\" && value != null);\n      for (const [key, val] of Object.entries(value)) {\n        writeMapEntry(writer, options, field, key, val);\n      }\n      break;\n  }\n}\nfunction writeMapEntry(writer, options, field, key, value) {\n  writer.tag(field.no, WireType.LengthDelimited);\n  writer.fork();\n  let keyValue = key;\n  switch (field.K) {\n    case ScalarType.INT32:\n    case ScalarType.FIXED32:\n    case ScalarType.UINT32:\n    case ScalarType.SFIXED32:\n    case ScalarType.SINT32:\n      keyValue = Number.parseInt(key);\n      break;\n    case ScalarType.BOOL:\n      assert(key == \"true\" || key == \"false\");\n      keyValue = key == \"true\";\n      break;\n  }\n  writeScalar2(writer, field.K, 1, keyValue);\n  switch (field.V.kind) {\n    case \"scalar\":\n      writeScalar2(writer, field.V.T, 2, value);\n      break;\n    case \"enum\":\n      writeScalar2(writer, ScalarType.INT32, 2, value);\n      break;\n    case \"message\":\n      assert(value !== void 0);\n      writer.tag(2, WireType.LengthDelimited).bytes(value.toBinary(options));\n      break;\n  }\n  writer.join();\n}\nfunction writeMessageField(writer, options, field, value) {\n  const message = wrapField(field.T, value);\n  if (field.delimited)\n    writer.tag(field.no, WireType.StartGroup).raw(message.toBinary(options)).tag(field.no, WireType.EndGroup);\n  else\n    writer.tag(field.no, WireType.LengthDelimited).bytes(message.toBinary(options));\n}\nfunction writeScalar2(writer, type, fieldNo, value) {\n  assert(value !== void 0);\n  let [wireType, method] = scalarTypeInfo(type);\n  writer.tag(fieldNo, wireType)[method](value);\n}\nfunction writePacked(writer, type, fieldNo, value) {\n  if (!value.length) {\n    return;\n  }\n  writer.tag(fieldNo, WireType.LengthDelimited).fork();\n  let [, method] = scalarTypeInfo(type);\n  for (let i = 0; i < value.length; i++) {\n    writer[method](value[i]);\n  }\n  writer.join();\n}\nfunction scalarTypeInfo(type) {\n  let wireType = WireType.Varint;\n  switch (type) {\n    case ScalarType.BYTES:\n    case ScalarType.STRING:\n      wireType = WireType.LengthDelimited;\n      break;\n    case ScalarType.DOUBLE:\n    case ScalarType.FIXED64:\n    case ScalarType.SFIXED64:\n      wireType = WireType.Bit64;\n      break;\n    case ScalarType.FIXED32:\n    case ScalarType.SFIXED32:\n    case ScalarType.FLOAT:\n      wireType = WireType.Bit32;\n      break;\n  }\n  const method = ScalarType[type].toLowerCase();\n  return [wireType, method];\n}\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/private/util-common.js\nfunction makeUtilCommon() {\n  return {\n    setEnumType,\n    initPartial(source, target) {\n      if (source === void 0) {\n        return;\n      }\n      const type = target.getType();\n      for (const member of type.fields.byMember()) {\n        const localName = member.localName, t = target, s = source;\n        if (s[localName] == null) {\n          continue;\n        }\n        switch (member.kind) {\n          case \"oneof\":\n            const sk = s[localName].case;\n            if (sk === void 0) {\n              continue;\n            }\n            const sourceField = member.findField(sk);\n            let val = s[localName].value;\n            if (sourceField && sourceField.kind == \"message\" && !isMessage(val, sourceField.T)) {\n              val = new sourceField.T(val);\n            } else if (sourceField && sourceField.kind === \"scalar\" && sourceField.T === ScalarType.BYTES) {\n              val = toU8Arr(val);\n            }\n            t[localName] = { case: sk, value: val };\n            break;\n          case \"scalar\":\n          case \"enum\":\n            let copy = s[localName];\n            if (member.T === ScalarType.BYTES) {\n              copy = member.repeated ? copy.map(toU8Arr) : toU8Arr(copy);\n            }\n            t[localName] = copy;\n            break;\n          case \"map\":\n            switch (member.V.kind) {\n              case \"scalar\":\n              case \"enum\":\n                if (member.V.T === ScalarType.BYTES) {\n                  for (const [k, v] of Object.entries(s[localName])) {\n                    t[localName][k] = toU8Arr(v);\n                  }\n                } else {\n                  Object.assign(t[localName], s[localName]);\n                }\n                break;\n              case \"message\":\n                const messageType = member.V.T;\n                for (const k of Object.keys(s[localName])) {\n                  let val2 = s[localName][k];\n                  if (!messageType.fieldWrapper) {\n                    val2 = new messageType(val2);\n                  }\n                  t[localName][k] = val2;\n                }\n                break;\n            }\n            break;\n          case \"message\":\n            const mt = member.T;\n            if (member.repeated) {\n              t[localName] = s[localName].map((val2) => isMessage(val2, mt) ? val2 : new mt(val2));\n            } else {\n              const val2 = s[localName];\n              if (mt.fieldWrapper) {\n                if (\n                  // We can't use BytesValue.typeName as that will create a circular import\n                  mt.typeName === \"google.protobuf.BytesValue\"\n                ) {\n                  t[localName] = toU8Arr(val2);\n                } else {\n                  t[localName] = val2;\n                }\n              } else {\n                t[localName] = isMessage(val2, mt) ? val2 : new mt(val2);\n              }\n            }\n            break;\n        }\n      }\n    },\n    // TODO use isFieldSet() here to support future field presence\n    equals(type, a, b) {\n      if (a === b) {\n        return true;\n      }\n      if (!a || !b) {\n        return false;\n      }\n      return type.fields.byMember().every((m) => {\n        const va = a[m.localName];\n        const vb = b[m.localName];\n        if (m.repeated) {\n          if (va.length !== vb.length) {\n            return false;\n          }\n          switch (m.kind) {\n            case \"message\":\n              return va.every((a2, i) => m.T.equals(a2, vb[i]));\n            case \"scalar\":\n              return va.every((a2, i) => scalarEquals(m.T, a2, vb[i]));\n            case \"enum\":\n              return va.every((a2, i) => scalarEquals(ScalarType.INT32, a2, vb[i]));\n          }\n          throw new Error(`repeated cannot contain ${m.kind}`);\n        }\n        switch (m.kind) {\n          case \"message\":\n            return m.T.equals(va, vb);\n          case \"enum\":\n            return scalarEquals(ScalarType.INT32, va, vb);\n          case \"scalar\":\n            return scalarEquals(m.T, va, vb);\n          case \"oneof\":\n            if (va.case !== vb.case) {\n              return false;\n            }\n            const s = m.findField(va.case);\n            if (s === void 0) {\n              return true;\n            }\n            switch (s.kind) {\n              case \"message\":\n                return s.T.equals(va.value, vb.value);\n              case \"enum\":\n                return scalarEquals(ScalarType.INT32, va.value, vb.value);\n              case \"scalar\":\n                return scalarEquals(s.T, va.value, vb.value);\n            }\n            throw new Error(`oneof cannot contain ${s.kind}`);\n          case \"map\":\n            const keys = Object.keys(va).concat(Object.keys(vb));\n            switch (m.V.kind) {\n              case \"message\":\n                const messageType = m.V.T;\n                return keys.every((k) => messageType.equals(va[k], vb[k]));\n              case \"enum\":\n                return keys.every((k) => scalarEquals(ScalarType.INT32, va[k], vb[k]));\n              case \"scalar\":\n                const scalarType = m.V.T;\n                return keys.every((k) => scalarEquals(scalarType, va[k], vb[k]));\n            }\n            break;\n        }\n      });\n    },\n    // TODO use isFieldSet() here to support future field presence\n    clone(message) {\n      const type = message.getType(), target = new type(), any = target;\n      for (const member of type.fields.byMember()) {\n        const source = message[member.localName];\n        let copy;\n        if (member.repeated) {\n          copy = source.map(cloneSingularField);\n        } else if (member.kind == \"map\") {\n          copy = any[member.localName];\n          for (const [key, v] of Object.entries(source)) {\n            copy[key] = cloneSingularField(v);\n          }\n        } else if (member.kind == \"oneof\") {\n          const f = member.findField(source.case);\n          copy = f ? { case: source.case, value: cloneSingularField(source.value) } : { case: void 0 };\n        } else {\n          copy = cloneSingularField(source);\n        }\n        any[member.localName] = copy;\n      }\n      for (const uf of type.runtime.bin.listUnknownFields(message)) {\n        type.runtime.bin.onUnknownField(any, uf.no, uf.wireType, uf.data);\n      }\n      return target;\n    }\n  };\n}\nfunction cloneSingularField(value) {\n  if (value === void 0) {\n    return value;\n  }\n  if (isMessage(value)) {\n    return value.clone();\n  }\n  if (value instanceof Uint8Array) {\n    const c = new Uint8Array(value.byteLength);\n    c.set(value);\n    return c;\n  }\n  return value;\n}\nfunction toU8Arr(input) {\n  return input instanceof Uint8Array ? input : new Uint8Array(input);\n}\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/private/proto-runtime.js\nfunction makeProtoRuntime(syntax, newFieldList, initFields) {\n  return {\n    syntax,\n    json: makeJsonFormat(),\n    bin: makeBinaryFormat(),\n    util: Object.assign(Object.assign({}, makeUtilCommon()), {\n      newFieldList,\n      initFields\n    }),\n    makeMessageType(typeName, fields, opt) {\n      return makeMessageType(this, typeName, fields, opt);\n    },\n    makeEnum,\n    makeEnumType,\n    getEnumType,\n    makeExtension(typeName, extendee, field) {\n      return makeExtension(this, typeName, extendee, field);\n    }\n  };\n}\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/private/field-list.js\nvar InternalFieldList = class {\n  constructor(fields, normalizer) {\n    this._fields = fields;\n    this._normalizer = normalizer;\n  }\n  findJsonName(jsonName) {\n    if (!this.jsonNames) {\n      const t = {};\n      for (const f of this.list()) {\n        t[f.jsonName] = t[f.name] = f;\n      }\n      this.jsonNames = t;\n    }\n    return this.jsonNames[jsonName];\n  }\n  find(fieldNo) {\n    if (!this.numbers) {\n      const t = {};\n      for (const f of this.list()) {\n        t[f.no] = f;\n      }\n      this.numbers = t;\n    }\n    return this.numbers[fieldNo];\n  }\n  list() {\n    if (!this.all) {\n      this.all = this._normalizer(this._fields);\n    }\n    return this.all;\n  }\n  byNumber() {\n    if (!this.numbersAsc) {\n      this.numbersAsc = this.list().concat().sort((a, b) => a.no - b.no);\n    }\n    return this.numbersAsc;\n  }\n  byMember() {\n    if (!this.members) {\n      this.members = [];\n      const a = this.members;\n      let o;\n      for (const f of this.list()) {\n        if (f.oneof) {\n          if (f.oneof !== o) {\n            o = f.oneof;\n            a.push(o);\n          }\n        } else {\n          a.push(f);\n        }\n      }\n    }\n    return this.members;\n  }\n};\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/private/names.js\nfunction localFieldName(protoName, inOneof) {\n  const name = protoCamelCase(protoName);\n  if (inOneof) {\n    return name;\n  }\n  return safeObjectProperty(safeMessageProperty(name));\n}\nfunction localOneofName(protoName) {\n  return localFieldName(protoName, false);\n}\nvar fieldJsonName = protoCamelCase;\nfunction protoCamelCase(snakeCase) {\n  let capNext = false;\n  const b = [];\n  for (let i = 0; i < snakeCase.length; i++) {\n    let c = snakeCase.charAt(i);\n    switch (c) {\n      case \"_\":\n        capNext = true;\n        break;\n      case \"0\":\n      case \"1\":\n      case \"2\":\n      case \"3\":\n      case \"4\":\n      case \"5\":\n      case \"6\":\n      case \"7\":\n      case \"8\":\n      case \"9\":\n        b.push(c);\n        capNext = false;\n        break;\n      default:\n        if (capNext) {\n          capNext = false;\n          c = c.toUpperCase();\n        }\n        b.push(c);\n        break;\n    }\n  }\n  return b.join(\"\");\n}\nvar reservedObjectProperties = /* @__PURE__ */ new Set([\n  // names reserved by JavaScript\n  \"constructor\",\n  \"toString\",\n  \"toJSON\",\n  \"valueOf\"\n]);\nvar reservedMessageProperties = /* @__PURE__ */ new Set([\n  // names reserved by the runtime\n  \"getType\",\n  \"clone\",\n  \"equals\",\n  \"fromBinary\",\n  \"fromJson\",\n  \"fromJsonString\",\n  \"toBinary\",\n  \"toJson\",\n  \"toJsonString\",\n  // names reserved by the runtime for the future\n  \"toObject\"\n]);\nvar fallback = (name) => `${name}$`;\nvar safeMessageProperty = (name) => {\n  if (reservedMessageProperties.has(name)) {\n    return fallback(name);\n  }\n  return name;\n};\nvar safeObjectProperty = (name) => {\n  if (reservedObjectProperties.has(name)) {\n    return fallback(name);\n  }\n  return name;\n};\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/private/field.js\nvar InternalOneofInfo = class {\n  constructor(name) {\n    this.kind = \"oneof\";\n    this.repeated = false;\n    this.packed = false;\n    this.opt = false;\n    this.req = false;\n    this.default = void 0;\n    this.fields = [];\n    this.name = name;\n    this.localName = localOneofName(name);\n  }\n  addField(field) {\n    assert(field.oneof === this, `field ${field.name} not one of ${this.name}`);\n    this.fields.push(field);\n  }\n  findField(localName) {\n    if (!this._lookup) {\n      this._lookup = /* @__PURE__ */ Object.create(null);\n      for (let i = 0; i < this.fields.length; i++) {\n        this._lookup[this.fields[i].localName] = this.fields[i];\n      }\n    }\n    return this._lookup[localName];\n  }\n};\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/private/field-normalize.js\nfunction normalizeFieldInfos(fieldInfos, packedByDefault) {\n  var _a, _b, _c, _d, _e, _f;\n  const r = [];\n  let o;\n  for (const field of typeof fieldInfos == \"function\" ? fieldInfos() : fieldInfos) {\n    const f = field;\n    f.localName = localFieldName(field.name, field.oneof !== void 0);\n    f.jsonName = (_a = field.jsonName) !== null && _a !== void 0 ? _a : fieldJsonName(field.name);\n    f.repeated = (_b = field.repeated) !== null && _b !== void 0 ? _b : false;\n    if (field.kind == \"scalar\") {\n      f.L = (_c = field.L) !== null && _c !== void 0 ? _c : LongType.BIGINT;\n    }\n    f.delimited = (_d = field.delimited) !== null && _d !== void 0 ? _d : false;\n    f.req = (_e = field.req) !== null && _e !== void 0 ? _e : false;\n    f.opt = (_f = field.opt) !== null && _f !== void 0 ? _f : false;\n    if (field.packed === void 0) {\n      if (packedByDefault) {\n        f.packed = field.kind == \"enum\" || field.kind == \"scalar\" && field.T != ScalarType.BYTES && field.T != ScalarType.STRING;\n      } else {\n        f.packed = false;\n      }\n    }\n    if (field.oneof !== void 0) {\n      const ooname = typeof field.oneof == \"string\" ? field.oneof : field.oneof.name;\n      if (!o || o.name != ooname) {\n        o = new InternalOneofInfo(ooname);\n      }\n      f.oneof = o;\n      o.addField(f);\n    }\n    r.push(f);\n  }\n  return r;\n}\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/proto3.js\nvar proto3 = makeProtoRuntime(\n  \"proto3\",\n  (fields) => {\n    return new InternalFieldList(fields, (source) => normalizeFieldInfos(source, true));\n  },\n  // TODO merge with proto2 and initExtensionField, also see initPartial, equals, clone\n  (target) => {\n    for (const member of target.getType().fields.byMember()) {\n      if (member.opt) {\n        continue;\n      }\n      const name = member.localName, t = target;\n      if (member.repeated) {\n        t[name] = [];\n        continue;\n      }\n      switch (member.kind) {\n        case \"oneof\":\n          t[name] = { case: void 0 };\n          break;\n        case \"enum\":\n          t[name] = 0;\n          break;\n        case \"map\":\n          t[name] = {};\n          break;\n        case \"scalar\":\n          t[name] = scalarZeroValue(member.T, member.L);\n          break;\n      }\n    }\n  }\n);\n\n// ../../node_modules/@bufbuild/protobuf/dist/esm/proto2.js\nvar proto2 = makeProtoRuntime(\n  \"proto2\",\n  (fields) => {\n    return new InternalFieldList(fields, (source) => normalizeFieldInfos(source, false));\n  },\n  // TODO merge with proto3 and initExtensionField, also see initPartial, equals, clone\n  (target) => {\n    for (const member of target.getType().fields.byMember()) {\n      const name = member.localName, t = target;\n      if (member.repeated) {\n        t[name] = [];\n        continue;\n      }\n      switch (member.kind) {\n        case \"oneof\":\n          t[name] = { case: void 0 };\n          break;\n        case \"map\":\n          t[name] = {};\n          break;\n      }\n    }\n  }\n);\n\n// ../protoc/dist/rtc/rtp_parameters_pb.js\nvar ProtoRtcpFeedback = class _ProtoRtcpFeedback extends Message {\n  /**\n   * @generated from field: string type = 1;\n   */\n  type = \"\";\n  /**\n   * @generated from field: string parameter = 2;\n   */\n  parameter = \"\";\n  constructor(data) {\n    super();\n    proto3.util.initPartial(data, this);\n  }\n  static runtime = proto3;\n  static typeName = \"ProtoRtcpFeedback\";\n  static fields = proto3.util.newFieldList(() => [\n    {\n      no: 1,\n      name: \"type\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 2,\n      name: \"parameter\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProtoRtcpFeedback().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProtoRtcpFeedback().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProtoRtcpFeedback().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return proto3.util.equals(_ProtoRtcpFeedback, a, b);\n  }\n};\nvar ProtoCodecParameters = class _ProtoCodecParameters extends Message {\n  /**\n   * @generated from field: string mimeType = 1;\n   */\n  mimeType = \"\";\n  /**\n   * @generated from field: int32 payloadType = 2;\n   */\n  payloadType = 0;\n  /**\n   * @generated from field: int32 clockRate = 3;\n   */\n  clockRate = 0;\n  /**\n   * @generated from field: int32 channels = 4;\n   */\n  channels = 0;\n  /**\n   * @generated from field: map<string, string> parameters = 6;\n   */\n  parameters = {};\n  /**\n   * @generated from field: repeated ProtoRtcpFeedback rtcpFeedback = 7;\n   */\n  rtcpFeedback = [];\n  constructor(data) {\n    super();\n    proto3.util.initPartial(data, this);\n  }\n  static runtime = proto3;\n  static typeName = \"ProtoCodecParameters\";\n  static fields = proto3.util.newFieldList(() => [\n    {\n      no: 1,\n      name: \"mimeType\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 2,\n      name: \"payloadType\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    },\n    {\n      no: 3,\n      name: \"clockRate\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    },\n    {\n      no: 4,\n      name: \"channels\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    },\n    { no: 6, name: \"parameters\", kind: \"map\", K: 9, V: {\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    } },\n    { no: 7, name: \"rtcpFeedback\", kind: \"message\", T: ProtoRtcpFeedback, repeated: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProtoCodecParameters().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProtoCodecParameters().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProtoCodecParameters().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return proto3.util.equals(_ProtoCodecParameters, a, b);\n  }\n};\nvar ProtoHeaderExtensionParameters = class _ProtoHeaderExtensionParameters extends Message {\n  /**\n   * @generated from field: string uri = 1;\n   */\n  uri = \"\";\n  /**\n   * @generated from field: int32 id = 2;\n   */\n  id = 0;\n  /**\n   * @generated from field: bool encrypt = 3;\n   */\n  encrypt = false;\n  /**\n   * @generated from field: map<string, string> parameters = 4;\n   */\n  parameters = {};\n  constructor(data) {\n    super();\n    proto3.util.initPartial(data, this);\n  }\n  static runtime = proto3;\n  static typeName = \"ProtoHeaderExtensionParameters\";\n  static fields = proto3.util.newFieldList(() => [\n    {\n      no: 1,\n      name: \"uri\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 2,\n      name: \"id\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    },\n    {\n      no: 3,\n      name: \"encrypt\",\n      kind: \"scalar\",\n      T: 8\n      /* ScalarType.BOOL */\n    },\n    { no: 4, name: \"parameters\", kind: \"map\", K: 9, V: {\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    } }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProtoHeaderExtensionParameters().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProtoHeaderExtensionParameters().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProtoHeaderExtensionParameters().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return proto3.util.equals(_ProtoHeaderExtensionParameters, a, b);\n  }\n};\nvar ProtoEncodings = class _ProtoEncodings extends Message {\n  /**\n   * @generated from field: int64 ssrc = 1;\n   */\n  ssrc = protoInt64.zero;\n  /**\n   * @generated from field: string rid = 2;\n   */\n  rid = \"\";\n  /**\n   * @generated from field: int32 codecPayloadType = 3;\n   */\n  codecPayloadType = 0;\n  /**\n   * @generated from field: ProtoEncodings.ProtoRTX rtx = 4;\n   */\n  rtx;\n  /**\n   * @generated from field: bool dtx = 5;\n   */\n  dtx = false;\n  /**\n   * @generated from field: string scalabilityMode = 6;\n   */\n  scalabilityMode = \"\";\n  /**\n   * @generated from field: int32 scaleResolutionDownBy = 7;\n   */\n  scaleResolutionDownBy = 0;\n  /**\n   * @generated from field: int32 maxBitrate = 8;\n   */\n  maxBitrate = 0;\n  /**\n   * @generated from field: bool active = 9;\n   */\n  active = false;\n  /**\n   * @generated from field: int32 maxFramerate = 10;\n   */\n  maxFramerate = 0;\n  constructor(data) {\n    super();\n    proto3.util.initPartial(data, this);\n  }\n  static runtime = proto3;\n  static typeName = \"ProtoEncodings\";\n  static fields = proto3.util.newFieldList(() => [\n    {\n      no: 1,\n      name: \"ssrc\",\n      kind: \"scalar\",\n      T: 3\n      /* ScalarType.INT64 */\n    },\n    {\n      no: 2,\n      name: \"rid\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 3,\n      name: \"codecPayloadType\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    },\n    { no: 4, name: \"rtx\", kind: \"message\", T: ProtoEncodings_ProtoRTX },\n    {\n      no: 5,\n      name: \"dtx\",\n      kind: \"scalar\",\n      T: 8\n      /* ScalarType.BOOL */\n    },\n    {\n      no: 6,\n      name: \"scalabilityMode\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 7,\n      name: \"scaleResolutionDownBy\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    },\n    {\n      no: 8,\n      name: \"maxBitrate\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    },\n    {\n      no: 9,\n      name: \"active\",\n      kind: \"scalar\",\n      T: 8\n      /* ScalarType.BOOL */\n    },\n    {\n      no: 10,\n      name: \"maxFramerate\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProtoEncodings().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProtoEncodings().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProtoEncodings().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return proto3.util.equals(_ProtoEncodings, a, b);\n  }\n};\nvar ProtoEncodings_ProtoRTX = class _ProtoEncodings_ProtoRTX extends Message {\n  /**\n   * @generated from field: int64 ssrc = 1;\n   */\n  ssrc = protoInt64.zero;\n  constructor(data) {\n    super();\n    proto3.util.initPartial(data, this);\n  }\n  static runtime = proto3;\n  static typeName = \"ProtoEncodings.ProtoRTX\";\n  static fields = proto3.util.newFieldList(() => [\n    {\n      no: 1,\n      name: \"ssrc\",\n      kind: \"scalar\",\n      T: 3\n      /* ScalarType.INT64 */\n    }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProtoEncodings_ProtoRTX().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProtoEncodings_ProtoRTX().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProtoEncodings_ProtoRTX().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return proto3.util.equals(_ProtoEncodings_ProtoRTX, a, b);\n  }\n};\nvar RtcpParameters = class _RtcpParameters extends Message {\n  /**\n   * @generated from field: string cname = 1;\n   */\n  cname = \"\";\n  /**\n   * @generated from field: bool reducedSize = 2;\n   */\n  reducedSize = false;\n  /**\n   * @generated from field: bool mux = 3;\n   */\n  mux = false;\n  constructor(data) {\n    super();\n    proto3.util.initPartial(data, this);\n  }\n  static runtime = proto3;\n  static typeName = \"RtcpParameters\";\n  static fields = proto3.util.newFieldList(() => [\n    {\n      no: 1,\n      name: \"cname\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 2,\n      name: \"reducedSize\",\n      kind: \"scalar\",\n      T: 8\n      /* ScalarType.BOOL */\n    },\n    {\n      no: 3,\n      name: \"mux\",\n      kind: \"scalar\",\n      T: 8\n      /* ScalarType.BOOL */\n    }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _RtcpParameters().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _RtcpParameters().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _RtcpParameters().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return proto3.util.equals(_RtcpParameters, a, b);\n  }\n};\nvar ProtoRtpParameters = class _ProtoRtpParameters extends Message {\n  /**\n   * @generated from field: string mid = 1;\n   */\n  mid = \"\";\n  /**\n   * @generated from field: repeated ProtoCodecParameters codecs = 2;\n   */\n  codecs = [];\n  /**\n   * @generated from field: repeated ProtoHeaderExtensionParameters headerExtensions = 3;\n   */\n  headerExtensions = [];\n  /**\n   * @generated from field: repeated ProtoEncodings encodings = 4;\n   */\n  encodings = [];\n  /**\n   * @generated from field: RtcpParameters rtcp = 5;\n   */\n  rtcp;\n  constructor(data) {\n    super();\n    proto3.util.initPartial(data, this);\n  }\n  static runtime = proto3;\n  static typeName = \"ProtoRtpParameters\";\n  static fields = proto3.util.newFieldList(() => [\n    {\n      no: 1,\n      name: \"mid\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    { no: 2, name: \"codecs\", kind: \"message\", T: ProtoCodecParameters, repeated: true },\n    { no: 3, name: \"headerExtensions\", kind: \"message\", T: ProtoHeaderExtensionParameters, repeated: true },\n    { no: 4, name: \"encodings\", kind: \"message\", T: ProtoEncodings, repeated: true },\n    { no: 5, name: \"rtcp\", kind: \"message\", T: RtcpParameters }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProtoRtpParameters().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProtoRtpParameters().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProtoRtpParameters().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return proto3.util.equals(_ProtoRtpParameters, a, b);\n  }\n};\n(class _ProtoSrtpParameters extends Message {\n  /**\n   * @generated from field: string cryptoSuite = 1;\n   */\n  cryptoSuite = \"\";\n  /**\n   * @generated from field: string keyBase64 = 2;\n   */\n  keyBase64 = \"\";\n  constructor(data) {\n    super();\n    proto3.util.initPartial(data, this);\n  }\n  static runtime = proto3;\n  static typeName = \"ProtoSrtpParameters\";\n  static fields = proto3.util.newFieldList(() => [\n    {\n      no: 1,\n      name: \"cryptoSuite\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 2,\n      name: \"keyBase64\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProtoSrtpParameters().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProtoSrtpParameters().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProtoSrtpParameters().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return proto3.util.equals(_ProtoSrtpParameters, a, b);\n  }\n});\n(class _ProtoTransportTuple extends Message {\n  /**\n   * @generated from field: string localIp = 1;\n   */\n  localIp = \"\";\n  /**\n   * @generated from field: int32 localPort = 2;\n   */\n  localPort = 0;\n  /**\n   * @generated from field: string remoteIp = 3;\n   */\n  remoteIp = \"\";\n  /**\n   * @generated from field: int32 remotePort = 4;\n   */\n  remotePort = 0;\n  /**\n   * @generated from field: string protocol = 5;\n   */\n  protocol = \"\";\n  /**\n   * @generated from field: string localAddress = 6;\n   */\n  localAddress = \"\";\n  constructor(data) {\n    super();\n    proto3.util.initPartial(data, this);\n  }\n  static runtime = proto3;\n  static typeName = \"ProtoTransportTuple\";\n  static fields = proto3.util.newFieldList(() => [\n    {\n      no: 1,\n      name: \"localIp\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 2,\n      name: \"localPort\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    },\n    {\n      no: 3,\n      name: \"remoteIp\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 4,\n      name: \"remotePort\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    },\n    {\n      no: 5,\n      name: \"protocol\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 6,\n      name: \"localAddress\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProtoTransportTuple().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProtoTransportTuple().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProtoTransportTuple().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return proto3.util.equals(_ProtoTransportTuple, a, b);\n  }\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstREZOWU9SSUYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLFlBQVksdUJBQXVCO0FBQzFFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sdUNBQXVDLHlCQUF5QixhQUFhLDJDQUEyQztBQUN4SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixZQUFZO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsYUFBYTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixRQUFRO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsUUFBUTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxTQUFTO0FB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixTQUFTO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxlQUFlLGFBQWEscUJBQXFCO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGtCQUFrQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrQkFBa0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0JBQWtCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLG9CQUFvQjtBQUN4RCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsY0FBYyxHQUFHLFlBQVk7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzQkFBc0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGtCQUFrQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsT0FBTztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsT0FBTztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsdUJBQXVCLDZEQUE2RCxJQUFJO0FBQ3hGLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHNCQUFzQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLEtBQUs7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsWUFBWSxhQUFhLFVBQVU7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix3QkFBd0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLE1BQU0saUVBQWlFO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsTUFBTSxpRkFBaUY7QUFDdkYsTUFBTSxxR0FBcUc7QUFDM0csTUFBTSw4RUFBOEU7QUFDcEYsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVzRSIsInNvdXJjZXMiOlsid2VicGFjazovL3Bva2Vtb24tZ2FtZS1ldGhpbmRpYS0xLy4vbm9kZV9tb2R1bGVzL0BodWRkbGUwMS93ZWItY29yZS9kaXN0L2NodW5rLURGTllPUklGLmpzP2VlNWEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0BidWZidWlsZC9wcm90b2J1Zi9kaXN0L2VzbS9wcml2YXRlL2Fzc2VydC5qc1xuZnVuY3Rpb24gYXNzZXJ0KGNvbmRpdGlvbiwgbXNnKSB7XG4gIGlmICghY29uZGl0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gIH1cbn1cbnZhciBGTE9BVDMyX01BWCA9IDM0MDI4MjM0NjYzODUyODg2ZTIyO1xudmFyIEZMT0FUMzJfTUlOID0gLTM0MDI4MjM0NjYzODUyODg2ZTIyO1xudmFyIFVJTlQzMl9NQVggPSA0Mjk0OTY3Mjk1O1xudmFyIElOVDMyX01BWCA9IDIxNDc0ODM2NDc7XG52YXIgSU5UMzJfTUlOID0gLTIxNDc0ODM2NDg7XG5mdW5jdGlvbiBhc3NlcnRJbnQzMihhcmcpIHtcbiAgaWYgKHR5cGVvZiBhcmcgIT09IFwibnVtYmVyXCIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBpbnQgMzI6IFwiICsgdHlwZW9mIGFyZyk7XG4gIGlmICghTnVtYmVyLmlzSW50ZWdlcihhcmcpIHx8IGFyZyA+IElOVDMyX01BWCB8fCBhcmcgPCBJTlQzMl9NSU4pXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBpbnQgMzI6IFwiICsgYXJnKTtcbn1cbmZ1bmN0aW9uIGFzc2VydFVJbnQzMihhcmcpIHtcbiAgaWYgKHR5cGVvZiBhcmcgIT09IFwibnVtYmVyXCIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCB1aW50IDMyOiBcIiArIHR5cGVvZiBhcmcpO1xuICBpZiAoIU51bWJlci5pc0ludGVnZXIoYXJnKSB8fCBhcmcgPiBVSU5UMzJfTUFYIHx8IGFyZyA8IDApXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCB1aW50IDMyOiBcIiArIGFyZyk7XG59XG5mdW5jdGlvbiBhc3NlcnRGbG9hdDMyKGFyZykge1xuICBpZiAodHlwZW9mIGFyZyAhPT0gXCJudW1iZXJcIilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIGZsb2F0IDMyOiBcIiArIHR5cGVvZiBhcmcpO1xuICBpZiAoIU51bWJlci5pc0Zpbml0ZShhcmcpKVxuICAgIHJldHVybjtcbiAgaWYgKGFyZyA+IEZMT0FUMzJfTUFYIHx8IGFyZyA8IEZMT0FUMzJfTUlOKVxuICAgIHRocm93IG5ldyBFcnJvcihcImludmFsaWQgZmxvYXQgMzI6IFwiICsgYXJnKTtcbn1cblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0BidWZidWlsZC9wcm90b2J1Zi9kaXN0L2VzbS9wcml2YXRlL2VudW0uanNcbnZhciBlbnVtVHlwZVN5bWJvbCA9IFN5bWJvbChcIkBidWZidWlsZC9wcm90b2J1Zi9lbnVtLXR5cGVcIik7XG5mdW5jdGlvbiBnZXRFbnVtVHlwZShlbnVtT2JqZWN0KSB7XG4gIGNvbnN0IHQgPSBlbnVtT2JqZWN0W2VudW1UeXBlU3ltYm9sXTtcbiAgYXNzZXJ0KHQsIFwibWlzc2luZyBlbnVtIHR5cGUgb24gZW51bSBvYmplY3RcIik7XG4gIHJldHVybiB0O1xufVxuZnVuY3Rpb24gc2V0RW51bVR5cGUoZW51bU9iamVjdCwgdHlwZU5hbWUsIHZhbHVlcywgb3B0KSB7XG4gIGVudW1PYmplY3RbZW51bVR5cGVTeW1ib2xdID0gbWFrZUVudW1UeXBlKHR5cGVOYW1lLCB2YWx1ZXMubWFwKCh2KSA9PiAoe1xuICAgIG5vOiB2Lm5vLFxuICAgIG5hbWU6IHYubmFtZSxcbiAgICBsb2NhbE5hbWU6IGVudW1PYmplY3Rbdi5ub11cbiAgfSkpKTtcbn1cbmZ1bmN0aW9uIG1ha2VFbnVtVHlwZSh0eXBlTmFtZSwgdmFsdWVzLCBfb3B0KSB7XG4gIGNvbnN0IG5hbWVzID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGNvbnN0IG51bWJlcnMgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgY29uc3Qgbm9ybWFsVmFsdWVzID0gW107XG4gIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgY29uc3QgbiA9IG5vcm1hbGl6ZUVudW1WYWx1ZSh2YWx1ZSk7XG4gICAgbm9ybWFsVmFsdWVzLnB1c2gobik7XG4gICAgbmFtZXNbdmFsdWUubmFtZV0gPSBuO1xuICAgIG51bWJlcnNbdmFsdWUubm9dID0gbjtcbiAgfVxuICByZXR1cm4ge1xuICAgIHR5cGVOYW1lLFxuICAgIHZhbHVlczogbm9ybWFsVmFsdWVzLFxuICAgIC8vIFdlIGRvIG5vdCBzdXJmYWNlIG9wdGlvbnMgYXQgdGhpcyB0aW1lXG4gICAgLy8gb3B0aW9uczogb3B0Py5vcHRpb25zID8/IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgZmluZE5hbWUobmFtZSkge1xuICAgICAgcmV0dXJuIG5hbWVzW25hbWVdO1xuICAgIH0sXG4gICAgZmluZE51bWJlcihubykge1xuICAgICAgcmV0dXJuIG51bWJlcnNbbm9dO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIG1ha2VFbnVtKHR5cGVOYW1lLCB2YWx1ZXMsIG9wdCkge1xuICBjb25zdCBlbnVtT2JqZWN0ID0ge307XG4gIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgY29uc3QgbiA9IG5vcm1hbGl6ZUVudW1WYWx1ZSh2YWx1ZSk7XG4gICAgZW51bU9iamVjdFtuLmxvY2FsTmFtZV0gPSBuLm5vO1xuICAgIGVudW1PYmplY3Rbbi5ub10gPSBuLmxvY2FsTmFtZTtcbiAgfVxuICBzZXRFbnVtVHlwZShlbnVtT2JqZWN0LCB0eXBlTmFtZSwgdmFsdWVzKTtcbiAgcmV0dXJuIGVudW1PYmplY3Q7XG59XG5mdW5jdGlvbiBub3JtYWxpemVFbnVtVmFsdWUodmFsdWUpIHtcbiAgaWYgKFwibG9jYWxOYW1lXCIgaW4gdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdmFsdWUpLCB7IGxvY2FsTmFtZTogdmFsdWUubmFtZSB9KTtcbn1cblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0BidWZidWlsZC9wcm90b2J1Zi9kaXN0L2VzbS9tZXNzYWdlLmpzXG52YXIgTWVzc2FnZSA9IGNsYXNzIHtcbiAgLyoqXG4gICAqIENvbXBhcmUgd2l0aCBhIG1lc3NhZ2Ugb2YgdGhlIHNhbWUgdHlwZS5cbiAgICogTm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gZGlzcmVnYXJkcyBleHRlbnNpb25zIGFuZCB1bmtub3duIGZpZWxkcy5cbiAgICovXG4gIGVxdWFscyhvdGhlcikge1xuICAgIHJldHVybiB0aGlzLmdldFR5cGUoKS5ydW50aW1lLnV0aWwuZXF1YWxzKHRoaXMuZ2V0VHlwZSgpLCB0aGlzLCBvdGhlcik7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGRlZXAgY29weS5cbiAgICovXG4gIGNsb25lKCkge1xuICAgIHJldHVybiB0aGlzLmdldFR5cGUoKS5ydW50aW1lLnV0aWwuY2xvbmUodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIFBhcnNlIGZyb20gYmluYXJ5IGRhdGEsIG1lcmdpbmcgZmllbGRzLlxuICAgKlxuICAgKiBSZXBlYXRlZCBmaWVsZHMgYXJlIGFwcGVuZGVkLiBNYXAgZW50cmllcyBhcmUgYWRkZWQsIG92ZXJ3cml0aW5nXG4gICAqIGV4aXN0aW5nIGtleXMuXG4gICAqXG4gICAqIElmIGEgbWVzc2FnZSBmaWVsZCBpcyBhbHJlYWR5IHByZXNlbnQsIGl0IHdpbGwgYmUgbWVyZ2VkIHdpdGggdGhlXG4gICAqIG5ldyBkYXRhLlxuICAgKi9cbiAgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIGNvbnN0IHR5cGUgPSB0aGlzLmdldFR5cGUoKSwgZm9ybWF0ID0gdHlwZS5ydW50aW1lLmJpbiwgb3B0ID0gZm9ybWF0Lm1ha2VSZWFkT3B0aW9ucyhvcHRpb25zKTtcbiAgICBmb3JtYXQucmVhZE1lc3NhZ2UodGhpcywgb3B0LnJlYWRlckZhY3RvcnkoYnl0ZXMpLCBieXRlcy5ieXRlTGVuZ3RoLCBvcHQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBQYXJzZSBhIG1lc3NhZ2UgZnJvbSBhIEpTT04gdmFsdWUuXG4gICAqL1xuICBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB0eXBlID0gdGhpcy5nZXRUeXBlKCksIGZvcm1hdCA9IHR5cGUucnVudGltZS5qc29uLCBvcHQgPSBmb3JtYXQubWFrZVJlYWRPcHRpb25zKG9wdGlvbnMpO1xuICAgIGZvcm1hdC5yZWFkTWVzc2FnZSh0eXBlLCBqc29uVmFsdWUsIG9wdCwgdGhpcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFBhcnNlIGEgbWVzc2FnZSBmcm9tIGEgSlNPTiBzdHJpbmcuXG4gICAqL1xuICBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgbGV0IGpzb247XG4gICAgdHJ5IHtcbiAgICAgIGpzb24gPSBKU09OLnBhcnNlKGpzb25TdHJpbmcpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgY2Fubm90IGRlY29kZSAke3RoaXMuZ2V0VHlwZSgpLnR5cGVOYW1lfSBmcm9tIEpTT046ICR7ZSBpbnN0YW5jZW9mIEVycm9yID8gZS5tZXNzYWdlIDogU3RyaW5nKGUpfWApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5mcm9tSnNvbihqc29uLCBvcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogU2VyaWFsaXplIHRoZSBtZXNzYWdlIHRvIGJpbmFyeSBkYXRhLlxuICAgKi9cbiAgdG9CaW5hcnkob3B0aW9ucykge1xuICAgIGNvbnN0IHR5cGUgPSB0aGlzLmdldFR5cGUoKSwgYmluID0gdHlwZS5ydW50aW1lLmJpbiwgb3B0ID0gYmluLm1ha2VXcml0ZU9wdGlvbnMob3B0aW9ucyksIHdyaXRlciA9IG9wdC53cml0ZXJGYWN0b3J5KCk7XG4gICAgYmluLndyaXRlTWVzc2FnZSh0aGlzLCB3cml0ZXIsIG9wdCk7XG4gICAgcmV0dXJuIHdyaXRlci5maW5pc2goKTtcbiAgfVxuICAvKipcbiAgICogU2VyaWFsaXplIHRoZSBtZXNzYWdlIHRvIGEgSlNPTiB2YWx1ZSwgYSBKYXZhU2NyaXB0IHZhbHVlIHRoYXQgY2FuIGJlXG4gICAqIHBhc3NlZCB0byBKU09OLnN0cmluZ2lmeSgpLlxuICAgKi9cbiAgdG9Kc29uKG9wdGlvbnMpIHtcbiAgICBjb25zdCB0eXBlID0gdGhpcy5nZXRUeXBlKCksIGpzb24gPSB0eXBlLnJ1bnRpbWUuanNvbiwgb3B0ID0ganNvbi5tYWtlV3JpdGVPcHRpb25zKG9wdGlvbnMpO1xuICAgIHJldHVybiBqc29uLndyaXRlTWVzc2FnZSh0aGlzLCBvcHQpO1xuICB9XG4gIC8qKlxuICAgKiBTZXJpYWxpemUgdGhlIG1lc3NhZ2UgdG8gYSBKU09OIHN0cmluZy5cbiAgICovXG4gIHRvSnNvblN0cmluZyhvcHRpb25zKSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy50b0pzb24ob3B0aW9ucyk7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlLCBudWxsLCAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMucHJldHR5U3BhY2VzKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwKTtcbiAgfVxuICAvKipcbiAgICogT3ZlcnJpZGUgZm9yIHNlcmlhbGl6YXRpb24gYmVoYXZpb3IuIFRoaXMgd2lsbCBiZSBpbnZva2VkIHdoZW4gY2FsbGluZ1xuICAgKiBKU09OLnN0cmluZ2lmeSBvbiB0aGlzIG1lc3NhZ2UgKGkuZS4gSlNPTi5zdHJpbmdpZnkobXNnKSkuXG4gICAqXG4gICAqIE5vdGUgdGhhdCB0aGlzIHdpbGwgbm90IHNlcmlhbGl6ZSBnb29nbGUucHJvdG9idWYuQW55IHdpdGggYSBwYWNrZWRcbiAgICogbWVzc2FnZSBiZWNhdXNlIHRoZSBwcm90b2J1ZiBKU09OIGZvcm1hdCBzcGVjaWZpZXMgdGhhdCBpdCBuZWVkcyB0byBiZVxuICAgKiB1bnBhY2tlZCwgYW5kIHRoaXMgaXMgb25seSBwb3NzaWJsZSB3aXRoIGEgdHlwZSByZWdpc3RyeSB0byBsb29rIHVwIHRoZVxuICAgKiBtZXNzYWdlIHR5cGUuICBBcyBhIHJlc3VsdCwgYXR0ZW1wdGluZyB0byBzZXJpYWxpemUgYSBtZXNzYWdlIHdpdGggdGhpc1xuICAgKiB0eXBlIHdpbGwgdGhyb3cgYW4gRXJyb3IuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGlzIHByb3RlY3RlZCBiZWNhdXNlIHlvdSBzaG91bGQgbm90IG5lZWQgdG8gaW52b2tlIGl0XG4gICAqIGRpcmVjdGx5IC0tIGluc3RlYWQgdXNlIEpTT04uc3RyaW5naWZ5IG9yIHRvSnNvblN0cmluZyBmb3JcbiAgICogc3RyaW5naWZpZWQgSlNPTi4gIEFsdGVybmF0aXZlbHksIGlmIGFjdHVhbCBKU09OIGlzIGRlc2lyZWQsIHlvdSBzaG91bGRcbiAgICogdXNlIHRvSnNvbi5cbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy50b0pzb24oe1xuICAgICAgZW1pdERlZmF1bHRWYWx1ZXM6IHRydWVcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogUmV0cmlldmUgdGhlIE1lc3NhZ2VUeXBlIG9mIHRoaXMgbWVzc2FnZSAtIGEgc2luZ2xldG9uIHRoYXQgcmVwcmVzZW50c1xuICAgKiB0aGUgcHJvdG9idWYgbWVzc2FnZSBkZWNsYXJhdGlvbiBhbmQgcHJvdmlkZXMgbWV0YWRhdGEgZm9yIHJlZmxlY3Rpb24tXG4gICAqIGJhc2VkIG9wZXJhdGlvbnMuXG4gICAqL1xuICBnZXRUeXBlKCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7XG4gIH1cbn07XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AYnVmYnVpbGQvcHJvdG9idWYvZGlzdC9lc20vcHJpdmF0ZS9tZXNzYWdlLXR5cGUuanNcbmZ1bmN0aW9uIG1ha2VNZXNzYWdlVHlwZShydW50aW1lLCB0eXBlTmFtZSwgZmllbGRzLCBvcHQpIHtcbiAgdmFyIF9hO1xuICBjb25zdCBsb2NhbE5hbWUgPSAoX2EgPSBvcHQgPT09IG51bGwgfHwgb3B0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHQubG9jYWxOYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB0eXBlTmFtZS5zdWJzdHJpbmcodHlwZU5hbWUubGFzdEluZGV4T2YoXCIuXCIpICsgMSk7XG4gIGNvbnN0IHR5cGUgPSB7XG4gICAgW2xvY2FsTmFtZV06IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHJ1bnRpbWUudXRpbC5pbml0RmllbGRzKHRoaXMpO1xuICAgICAgcnVudGltZS51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICAgIH1cbiAgfVtsb2NhbE5hbWVdO1xuICBPYmplY3Quc2V0UHJvdG90eXBlT2YodHlwZS5wcm90b3R5cGUsIG5ldyBNZXNzYWdlKCkpO1xuICBPYmplY3QuYXNzaWduKHR5cGUsIHtcbiAgICBydW50aW1lLFxuICAgIHR5cGVOYW1lLFxuICAgIGZpZWxkczogcnVudGltZS51dGlsLm5ld0ZpZWxkTGlzdChmaWVsZHMpLFxuICAgIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiBuZXcgdHlwZSgpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICAgIH0sXG4gICAgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gbmV3IHR5cGUoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICAgIH0sXG4gICAgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIG5ldyB0eXBlKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gICAgfSxcbiAgICBlcXVhbHMoYSwgYikge1xuICAgICAgcmV0dXJuIHJ1bnRpbWUudXRpbC5lcXVhbHModHlwZSwgYSwgYik7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHR5cGU7XG59XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AYnVmYnVpbGQvcHJvdG9idWYvZGlzdC9lc20vZ29vZ2xlL3ZhcmludC5qc1xuZnVuY3Rpb24gdmFyaW50NjRyZWFkKCkge1xuICBsZXQgbG93Qml0cyA9IDA7XG4gIGxldCBoaWdoQml0cyA9IDA7XG4gIGZvciAobGV0IHNoaWZ0ID0gMDsgc2hpZnQgPCAyODsgc2hpZnQgKz0gNykge1xuICAgIGxldCBiID0gdGhpcy5idWZbdGhpcy5wb3MrK107XG4gICAgbG93Qml0cyB8PSAoYiAmIDEyNykgPDwgc2hpZnQ7XG4gICAgaWYgKChiICYgMTI4KSA9PSAwKSB7XG4gICAgICB0aGlzLmFzc2VydEJvdW5kcygpO1xuICAgICAgcmV0dXJuIFtsb3dCaXRzLCBoaWdoQml0c107XG4gICAgfVxuICB9XG4gIGxldCBtaWRkbGVCeXRlID0gdGhpcy5idWZbdGhpcy5wb3MrK107XG4gIGxvd0JpdHMgfD0gKG1pZGRsZUJ5dGUgJiAxNSkgPDwgMjg7XG4gIGhpZ2hCaXRzID0gKG1pZGRsZUJ5dGUgJiAxMTIpID4+IDQ7XG4gIGlmICgobWlkZGxlQnl0ZSAmIDEyOCkgPT0gMCkge1xuICAgIHRoaXMuYXNzZXJ0Qm91bmRzKCk7XG4gICAgcmV0dXJuIFtsb3dCaXRzLCBoaWdoQml0c107XG4gIH1cbiAgZm9yIChsZXQgc2hpZnQgPSAzOyBzaGlmdCA8PSAzMTsgc2hpZnQgKz0gNykge1xuICAgIGxldCBiID0gdGhpcy5idWZbdGhpcy5wb3MrK107XG4gICAgaGlnaEJpdHMgfD0gKGIgJiAxMjcpIDw8IHNoaWZ0O1xuICAgIGlmICgoYiAmIDEyOCkgPT0gMCkge1xuICAgICAgdGhpcy5hc3NlcnRCb3VuZHMoKTtcbiAgICAgIHJldHVybiBbbG93Qml0cywgaGlnaEJpdHNdO1xuICAgIH1cbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIHZhcmludFwiKTtcbn1cbmZ1bmN0aW9uIHZhcmludDY0d3JpdGUobG8sIGhpLCBieXRlcykge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IDI4OyBpID0gaSArIDcpIHtcbiAgICBjb25zdCBzaGlmdCA9IGxvID4+PiBpO1xuICAgIGNvbnN0IGhhc05leHQgPSAhKHNoaWZ0ID4+PiA3ID09IDAgJiYgaGkgPT0gMCk7XG4gICAgY29uc3QgYnl0ZSA9IChoYXNOZXh0ID8gc2hpZnQgfCAxMjggOiBzaGlmdCkgJiAyNTU7XG4gICAgYnl0ZXMucHVzaChieXRlKTtcbiAgICBpZiAoIWhhc05leHQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbiAgY29uc3Qgc3BsaXRCaXRzID0gbG8gPj4+IDI4ICYgMTUgfCAoaGkgJiA3KSA8PCA0O1xuICBjb25zdCBoYXNNb3JlQml0cyA9ICEoaGkgPj4gMyA9PSAwKTtcbiAgYnl0ZXMucHVzaCgoaGFzTW9yZUJpdHMgPyBzcGxpdEJpdHMgfCAxMjggOiBzcGxpdEJpdHMpICYgMjU1KTtcbiAgaWYgKCFoYXNNb3JlQml0cykge1xuICAgIHJldHVybjtcbiAgfVxuICBmb3IgKGxldCBpID0gMzsgaSA8IDMxOyBpID0gaSArIDcpIHtcbiAgICBjb25zdCBzaGlmdCA9IGhpID4+PiBpO1xuICAgIGNvbnN0IGhhc05leHQgPSAhKHNoaWZ0ID4+PiA3ID09IDApO1xuICAgIGNvbnN0IGJ5dGUgPSAoaGFzTmV4dCA/IHNoaWZ0IHwgMTI4IDogc2hpZnQpICYgMjU1O1xuICAgIGJ5dGVzLnB1c2goYnl0ZSk7XG4gICAgaWYgKCFoYXNOZXh0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIGJ5dGVzLnB1c2goaGkgPj4+IDMxICYgMSk7XG59XG52YXIgVFdPX1BXUl8zMl9EQkwgPSA0Mjk0OTY3Mjk2O1xuZnVuY3Rpb24gaW50NjRGcm9tU3RyaW5nKGRlYykge1xuICBjb25zdCBtaW51cyA9IGRlY1swXSA9PT0gXCItXCI7XG4gIGlmIChtaW51cykge1xuICAgIGRlYyA9IGRlYy5zbGljZSgxKTtcbiAgfVxuICBjb25zdCBiYXNlID0gMWU2O1xuICBsZXQgbG93Qml0cyA9IDA7XG4gIGxldCBoaWdoQml0cyA9IDA7XG4gIGZ1bmN0aW9uIGFkZDFlNmRpZ2l0KGJlZ2luLCBlbmQpIHtcbiAgICBjb25zdCBkaWdpdDFlNiA9IE51bWJlcihkZWMuc2xpY2UoYmVnaW4sIGVuZCkpO1xuICAgIGhpZ2hCaXRzICo9IGJhc2U7XG4gICAgbG93Qml0cyA9IGxvd0JpdHMgKiBiYXNlICsgZGlnaXQxZTY7XG4gICAgaWYgKGxvd0JpdHMgPj0gVFdPX1BXUl8zMl9EQkwpIHtcbiAgICAgIGhpZ2hCaXRzID0gaGlnaEJpdHMgKyAobG93Qml0cyAvIFRXT19QV1JfMzJfREJMIHwgMCk7XG4gICAgICBsb3dCaXRzID0gbG93Qml0cyAlIFRXT19QV1JfMzJfREJMO1xuICAgIH1cbiAgfVxuICBhZGQxZTZkaWdpdCgtMjQsIC0xOCk7XG4gIGFkZDFlNmRpZ2l0KC0xOCwgLTEyKTtcbiAgYWRkMWU2ZGlnaXQoLTEyLCAtNik7XG4gIGFkZDFlNmRpZ2l0KC02KTtcbiAgcmV0dXJuIG1pbnVzID8gbmVnYXRlKGxvd0JpdHMsIGhpZ2hCaXRzKSA6IG5ld0JpdHMobG93Qml0cywgaGlnaEJpdHMpO1xufVxuZnVuY3Rpb24gaW50NjRUb1N0cmluZyhsbywgaGkpIHtcbiAgbGV0IGJpdHMgPSBuZXdCaXRzKGxvLCBoaSk7XG4gIGNvbnN0IG5lZ2F0aXZlID0gYml0cy5oaSAmIDIxNDc0ODM2NDg7XG4gIGlmIChuZWdhdGl2ZSkge1xuICAgIGJpdHMgPSBuZWdhdGUoYml0cy5sbywgYml0cy5oaSk7XG4gIH1cbiAgY29uc3QgcmVzdWx0ID0gdUludDY0VG9TdHJpbmcoYml0cy5sbywgYml0cy5oaSk7XG4gIHJldHVybiBuZWdhdGl2ZSA/IFwiLVwiICsgcmVzdWx0IDogcmVzdWx0O1xufVxuZnVuY3Rpb24gdUludDY0VG9TdHJpbmcobG8sIGhpKSB7XG4gICh7IGxvLCBoaSB9ID0gdG9VbnNpZ25lZChsbywgaGkpKTtcbiAgaWYgKGhpIDw9IDIwOTcxNTEpIHtcbiAgICByZXR1cm4gU3RyaW5nKFRXT19QV1JfMzJfREJMICogaGkgKyBsbyk7XG4gIH1cbiAgY29uc3QgbG93ID0gbG8gJiAxNjc3NzIxNTtcbiAgY29uc3QgbWlkID0gKGxvID4+PiAyNCB8IGhpIDw8IDgpICYgMTY3NzcyMTU7XG4gIGNvbnN0IGhpZ2ggPSBoaSA+PiAxNiAmIDY1NTM1O1xuICBsZXQgZGlnaXRBID0gbG93ICsgbWlkICogNjc3NzIxNiArIGhpZ2ggKiA2NzEwNjU2O1xuICBsZXQgZGlnaXRCID0gbWlkICsgaGlnaCAqIDgxNDc0OTc7XG4gIGxldCBkaWdpdEMgPSBoaWdoICogMjtcbiAgY29uc3QgYmFzZSA9IDFlNztcbiAgaWYgKGRpZ2l0QSA+PSBiYXNlKSB7XG4gICAgZGlnaXRCICs9IE1hdGguZmxvb3IoZGlnaXRBIC8gYmFzZSk7XG4gICAgZGlnaXRBICU9IGJhc2U7XG4gIH1cbiAgaWYgKGRpZ2l0QiA+PSBiYXNlKSB7XG4gICAgZGlnaXRDICs9IE1hdGguZmxvb3IoZGlnaXRCIC8gYmFzZSk7XG4gICAgZGlnaXRCICU9IGJhc2U7XG4gIH1cbiAgcmV0dXJuIGRpZ2l0Qy50b1N0cmluZygpICsgZGVjaW1hbEZyb20xZTdXaXRoTGVhZGluZ1plcm9zKGRpZ2l0QikgKyBkZWNpbWFsRnJvbTFlN1dpdGhMZWFkaW5nWmVyb3MoZGlnaXRBKTtcbn1cbmZ1bmN0aW9uIHRvVW5zaWduZWQobG8sIGhpKSB7XG4gIHJldHVybiB7IGxvOiBsbyA+Pj4gMCwgaGk6IGhpID4+PiAwIH07XG59XG5mdW5jdGlvbiBuZXdCaXRzKGxvLCBoaSkge1xuICByZXR1cm4geyBsbzogbG8gfCAwLCBoaTogaGkgfCAwIH07XG59XG5mdW5jdGlvbiBuZWdhdGUobG93Qml0cywgaGlnaEJpdHMpIHtcbiAgaGlnaEJpdHMgPSB+aGlnaEJpdHM7XG4gIGlmIChsb3dCaXRzKSB7XG4gICAgbG93Qml0cyA9IH5sb3dCaXRzICsgMTtcbiAgfSBlbHNlIHtcbiAgICBoaWdoQml0cyArPSAxO1xuICB9XG4gIHJldHVybiBuZXdCaXRzKGxvd0JpdHMsIGhpZ2hCaXRzKTtcbn1cbnZhciBkZWNpbWFsRnJvbTFlN1dpdGhMZWFkaW5nWmVyb3MgPSAoZGlnaXQxZTcpID0+IHtcbiAgY29uc3QgcGFydGlhbCA9IFN0cmluZyhkaWdpdDFlNyk7XG4gIHJldHVybiBcIjAwMDAwMDBcIi5zbGljZShwYXJ0aWFsLmxlbmd0aCkgKyBwYXJ0aWFsO1xufTtcbmZ1bmN0aW9uIHZhcmludDMyd3JpdGUodmFsdWUsIGJ5dGVzKSB7XG4gIGlmICh2YWx1ZSA+PSAwKSB7XG4gICAgd2hpbGUgKHZhbHVlID4gMTI3KSB7XG4gICAgICBieXRlcy5wdXNoKHZhbHVlICYgMTI3IHwgMTI4KTtcbiAgICAgIHZhbHVlID0gdmFsdWUgPj4+IDc7XG4gICAgfVxuICAgIGJ5dGVzLnB1c2godmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgOTsgaSsrKSB7XG4gICAgICBieXRlcy5wdXNoKHZhbHVlICYgMTI3IHwgMTI4KTtcbiAgICAgIHZhbHVlID0gdmFsdWUgPj4gNztcbiAgICB9XG4gICAgYnl0ZXMucHVzaCgxKTtcbiAgfVxufVxuZnVuY3Rpb24gdmFyaW50MzJyZWFkKCkge1xuICBsZXQgYiA9IHRoaXMuYnVmW3RoaXMucG9zKytdO1xuICBsZXQgcmVzdWx0ID0gYiAmIDEyNztcbiAgaWYgKChiICYgMTI4KSA9PSAwKSB7XG4gICAgdGhpcy5hc3NlcnRCb3VuZHMoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGIgPSB0aGlzLmJ1Zlt0aGlzLnBvcysrXTtcbiAgcmVzdWx0IHw9IChiICYgMTI3KSA8PCA3O1xuICBpZiAoKGIgJiAxMjgpID09IDApIHtcbiAgICB0aGlzLmFzc2VydEJvdW5kcygpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgYiA9IHRoaXMuYnVmW3RoaXMucG9zKytdO1xuICByZXN1bHQgfD0gKGIgJiAxMjcpIDw8IDE0O1xuICBpZiAoKGIgJiAxMjgpID09IDApIHtcbiAgICB0aGlzLmFzc2VydEJvdW5kcygpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgYiA9IHRoaXMuYnVmW3RoaXMucG9zKytdO1xuICByZXN1bHQgfD0gKGIgJiAxMjcpIDw8IDIxO1xuICBpZiAoKGIgJiAxMjgpID09IDApIHtcbiAgICB0aGlzLmFzc2VydEJvdW5kcygpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgYiA9IHRoaXMuYnVmW3RoaXMucG9zKytdO1xuICByZXN1bHQgfD0gKGIgJiAxNSkgPDwgMjg7XG4gIGZvciAobGV0IHJlYWRCeXRlcyA9IDU7IChiICYgMTI4KSAhPT0gMCAmJiByZWFkQnl0ZXMgPCAxMDsgcmVhZEJ5dGVzKyspXG4gICAgYiA9IHRoaXMuYnVmW3RoaXMucG9zKytdO1xuICBpZiAoKGIgJiAxMjgpICE9IDApXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCB2YXJpbnRcIik7XG4gIHRoaXMuYXNzZXJ0Qm91bmRzKCk7XG4gIHJldHVybiByZXN1bHQgPj4+IDA7XG59XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AYnVmYnVpbGQvcHJvdG9idWYvZGlzdC9lc20vcHJvdG8taW50NjQuanNcbmZ1bmN0aW9uIG1ha2VJbnQ2NFN1cHBvcnQoKSB7XG4gIGNvbnN0IGR2ID0gbmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcig4KSk7XG4gIGNvbnN0IG9rID0gdHlwZW9mIEJpZ0ludCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBkdi5nZXRCaWdJbnQ2NCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBkdi5nZXRCaWdVaW50NjQgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgZHYuc2V0QmlnSW50NjQgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgZHYuc2V0QmlnVWludDY0ID09PSBcImZ1bmN0aW9uXCIgJiYgKHR5cGVvZiBwcm9jZXNzICE9IFwib2JqZWN0XCIgfHwgdHlwZW9mIHByb2Nlc3MuZW52ICE9IFwib2JqZWN0XCIgfHwgcHJvY2Vzcy5lbnYuQlVGX0JJR0lOVF9ESVNBQkxFICE9PSBcIjFcIik7XG4gIGlmIChvaykge1xuICAgIGNvbnN0IE1JTiA9IEJpZ0ludChcIi05MjIzMzcyMDM2ODU0Nzc1ODA4XCIpLCBNQVggPSBCaWdJbnQoXCI5MjIzMzcyMDM2ODU0Nzc1ODA3XCIpLCBVTUlOID0gQmlnSW50KFwiMFwiKSwgVU1BWCA9IEJpZ0ludChcIjE4NDQ2NzQ0MDczNzA5NTUxNjE1XCIpO1xuICAgIHJldHVybiB7XG4gICAgICB6ZXJvOiBCaWdJbnQoMCksXG4gICAgICBzdXBwb3J0ZWQ6IHRydWUsXG4gICAgICBwYXJzZSh2YWx1ZSkge1xuICAgICAgICBjb25zdCBiaSA9IHR5cGVvZiB2YWx1ZSA9PSBcImJpZ2ludFwiID8gdmFsdWUgOiBCaWdJbnQodmFsdWUpO1xuICAgICAgICBpZiAoYmkgPiBNQVggfHwgYmkgPCBNSU4pIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGludDY0IGludmFsaWQ6ICR7dmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJpO1xuICAgICAgfSxcbiAgICAgIHVQYXJzZSh2YWx1ZSkge1xuICAgICAgICBjb25zdCBiaSA9IHR5cGVvZiB2YWx1ZSA9PSBcImJpZ2ludFwiID8gdmFsdWUgOiBCaWdJbnQodmFsdWUpO1xuICAgICAgICBpZiAoYmkgPiBVTUFYIHx8IGJpIDwgVU1JTikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgdWludDY0IGludmFsaWQ6ICR7dmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJpO1xuICAgICAgfSxcbiAgICAgIGVuYyh2YWx1ZSkge1xuICAgICAgICBkdi5zZXRCaWdJbnQ2NCgwLCB0aGlzLnBhcnNlKHZhbHVlKSwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbG86IGR2LmdldEludDMyKDAsIHRydWUpLFxuICAgICAgICAgIGhpOiBkdi5nZXRJbnQzMig0LCB0cnVlKVxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIHVFbmModmFsdWUpIHtcbiAgICAgICAgZHYuc2V0QmlnSW50NjQoMCwgdGhpcy51UGFyc2UodmFsdWUpLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBsbzogZHYuZ2V0SW50MzIoMCwgdHJ1ZSksXG4gICAgICAgICAgaGk6IGR2LmdldEludDMyKDQsIHRydWUpXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgZGVjKGxvLCBoaSkge1xuICAgICAgICBkdi5zZXRJbnQzMigwLCBsbywgdHJ1ZSk7XG4gICAgICAgIGR2LnNldEludDMyKDQsIGhpLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIGR2LmdldEJpZ0ludDY0KDAsIHRydWUpO1xuICAgICAgfSxcbiAgICAgIHVEZWMobG8sIGhpKSB7XG4gICAgICAgIGR2LnNldEludDMyKDAsIGxvLCB0cnVlKTtcbiAgICAgICAgZHYuc2V0SW50MzIoNCwgaGksIHRydWUpO1xuICAgICAgICByZXR1cm4gZHYuZ2V0QmlnVWludDY0KDAsIHRydWUpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgY29uc3QgYXNzZXJ0SW50NjRTdHJpbmcgPSAodmFsdWUpID0+IGFzc2VydCgvXi0/WzAtOV0rJC8udGVzdCh2YWx1ZSksIGBpbnQ2NCBpbnZhbGlkOiAke3ZhbHVlfWApO1xuICBjb25zdCBhc3NlcnRVSW50NjRTdHJpbmcgPSAodmFsdWUpID0+IGFzc2VydCgvXlswLTldKyQvLnRlc3QodmFsdWUpLCBgdWludDY0IGludmFsaWQ6ICR7dmFsdWV9YCk7XG4gIHJldHVybiB7XG4gICAgemVybzogXCIwXCIsXG4gICAgc3VwcG9ydGVkOiBmYWxzZSxcbiAgICBwYXJzZSh2YWx1ZSkge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgIH1cbiAgICAgIGFzc2VydEludDY0U3RyaW5nKHZhbHVlKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHVQYXJzZSh2YWx1ZSkge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgIH1cbiAgICAgIGFzc2VydFVJbnQ2NFN0cmluZyh2YWx1ZSk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBlbmModmFsdWUpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT0gXCJzdHJpbmdcIikge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICB9XG4gICAgICBhc3NlcnRJbnQ2NFN0cmluZyh2YWx1ZSk7XG4gICAgICByZXR1cm4gaW50NjRGcm9tU3RyaW5nKHZhbHVlKTtcbiAgICB9LFxuICAgIHVFbmModmFsdWUpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT0gXCJzdHJpbmdcIikge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICB9XG4gICAgICBhc3NlcnRVSW50NjRTdHJpbmcodmFsdWUpO1xuICAgICAgcmV0dXJuIGludDY0RnJvbVN0cmluZyh2YWx1ZSk7XG4gICAgfSxcbiAgICBkZWMobG8sIGhpKSB7XG4gICAgICByZXR1cm4gaW50NjRUb1N0cmluZyhsbywgaGkpO1xuICAgIH0sXG4gICAgdURlYyhsbywgaGkpIHtcbiAgICAgIHJldHVybiB1SW50NjRUb1N0cmluZyhsbywgaGkpO1xuICAgIH1cbiAgfTtcbn1cbnZhciBwcm90b0ludDY0ID0gbWFrZUludDY0U3VwcG9ydCgpO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvQGJ1ZmJ1aWxkL3Byb3RvYnVmL2Rpc3QvZXNtL3NjYWxhci5qc1xudmFyIFNjYWxhclR5cGU7XG4oZnVuY3Rpb24oU2NhbGFyVHlwZTIpIHtcbiAgU2NhbGFyVHlwZTJbU2NhbGFyVHlwZTJbXCJET1VCTEVcIl0gPSAxXSA9IFwiRE9VQkxFXCI7XG4gIFNjYWxhclR5cGUyW1NjYWxhclR5cGUyW1wiRkxPQVRcIl0gPSAyXSA9IFwiRkxPQVRcIjtcbiAgU2NhbGFyVHlwZTJbU2NhbGFyVHlwZTJbXCJJTlQ2NFwiXSA9IDNdID0gXCJJTlQ2NFwiO1xuICBTY2FsYXJUeXBlMltTY2FsYXJUeXBlMltcIlVJTlQ2NFwiXSA9IDRdID0gXCJVSU5UNjRcIjtcbiAgU2NhbGFyVHlwZTJbU2NhbGFyVHlwZTJbXCJJTlQzMlwiXSA9IDVdID0gXCJJTlQzMlwiO1xuICBTY2FsYXJUeXBlMltTY2FsYXJUeXBlMltcIkZJWEVENjRcIl0gPSA2XSA9IFwiRklYRUQ2NFwiO1xuICBTY2FsYXJUeXBlMltTY2FsYXJUeXBlMltcIkZJWEVEMzJcIl0gPSA3XSA9IFwiRklYRUQzMlwiO1xuICBTY2FsYXJUeXBlMltTY2FsYXJUeXBlMltcIkJPT0xcIl0gPSA4XSA9IFwiQk9PTFwiO1xuICBTY2FsYXJUeXBlMltTY2FsYXJUeXBlMltcIlNUUklOR1wiXSA9IDldID0gXCJTVFJJTkdcIjtcbiAgU2NhbGFyVHlwZTJbU2NhbGFyVHlwZTJbXCJCWVRFU1wiXSA9IDEyXSA9IFwiQllURVNcIjtcbiAgU2NhbGFyVHlwZTJbU2NhbGFyVHlwZTJbXCJVSU5UMzJcIl0gPSAxM10gPSBcIlVJTlQzMlwiO1xuICBTY2FsYXJUeXBlMltTY2FsYXJUeXBlMltcIlNGSVhFRDMyXCJdID0gMTVdID0gXCJTRklYRUQzMlwiO1xuICBTY2FsYXJUeXBlMltTY2FsYXJUeXBlMltcIlNGSVhFRDY0XCJdID0gMTZdID0gXCJTRklYRUQ2NFwiO1xuICBTY2FsYXJUeXBlMltTY2FsYXJUeXBlMltcIlNJTlQzMlwiXSA9IDE3XSA9IFwiU0lOVDMyXCI7XG4gIFNjYWxhclR5cGUyW1NjYWxhclR5cGUyW1wiU0lOVDY0XCJdID0gMThdID0gXCJTSU5UNjRcIjtcbn0pKFNjYWxhclR5cGUgfHwgKFNjYWxhclR5cGUgPSB7fSkpO1xudmFyIExvbmdUeXBlO1xuKGZ1bmN0aW9uKExvbmdUeXBlMikge1xuICBMb25nVHlwZTJbTG9uZ1R5cGUyW1wiQklHSU5UXCJdID0gMF0gPSBcIkJJR0lOVFwiO1xuICBMb25nVHlwZTJbTG9uZ1R5cGUyW1wiU1RSSU5HXCJdID0gMV0gPSBcIlNUUklOR1wiO1xufSkoTG9uZ1R5cGUgfHwgKExvbmdUeXBlID0ge30pKTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0BidWZidWlsZC9wcm90b2J1Zi9kaXN0L2VzbS9wcml2YXRlL3NjYWxhcnMuanNcbmZ1bmN0aW9uIHNjYWxhckVxdWFscyh0eXBlLCBhLCBiKSB7XG4gIGlmIChhID09PSBiKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKHR5cGUgPT0gU2NhbGFyVHlwZS5CWVRFUykge1xuICAgIGlmICghKGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB8fCAhKGIgaW5zdGFuY2VvZiBVaW50OEFycmF5KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGFbaV0gIT09IGJbaV0pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIFNjYWxhclR5cGUuVUlOVDY0OlxuICAgIGNhc2UgU2NhbGFyVHlwZS5GSVhFRDY0OlxuICAgIGNhc2UgU2NhbGFyVHlwZS5JTlQ2NDpcbiAgICBjYXNlIFNjYWxhclR5cGUuU0ZJWEVENjQ6XG4gICAgY2FzZSBTY2FsYXJUeXBlLlNJTlQ2NDpcbiAgICAgIHJldHVybiBhID09IGI7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gc2NhbGFyWmVyb1ZhbHVlKHR5cGUsIGxvbmdUeXBlKSB7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgU2NhbGFyVHlwZS5CT09MOlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGNhc2UgU2NhbGFyVHlwZS5VSU5UNjQ6XG4gICAgY2FzZSBTY2FsYXJUeXBlLkZJWEVENjQ6XG4gICAgY2FzZSBTY2FsYXJUeXBlLklOVDY0OlxuICAgIGNhc2UgU2NhbGFyVHlwZS5TRklYRUQ2NDpcbiAgICBjYXNlIFNjYWxhclR5cGUuU0lOVDY0OlxuICAgICAgcmV0dXJuIGxvbmdUeXBlID09IDAgPyBwcm90b0ludDY0Lnplcm8gOiBcIjBcIjtcbiAgICBjYXNlIFNjYWxhclR5cGUuRE9VQkxFOlxuICAgIGNhc2UgU2NhbGFyVHlwZS5GTE9BVDpcbiAgICAgIHJldHVybiAwO1xuICAgIGNhc2UgU2NhbGFyVHlwZS5CWVRFUzpcbiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSgwKTtcbiAgICBjYXNlIFNjYWxhclR5cGUuU1RSSU5HOlxuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiAwO1xuICB9XG59XG5mdW5jdGlvbiBpc1NjYWxhclplcm9WYWx1ZSh0eXBlLCB2YWx1ZSkge1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIFNjYWxhclR5cGUuQk9PTDpcbiAgICAgIHJldHVybiB2YWx1ZSA9PT0gZmFsc2U7XG4gICAgY2FzZSBTY2FsYXJUeXBlLlNUUklORzpcbiAgICAgIHJldHVybiB2YWx1ZSA9PT0gXCJcIjtcbiAgICBjYXNlIFNjYWxhclR5cGUuQllURVM6XG4gICAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBVaW50OEFycmF5ICYmICF2YWx1ZS5ieXRlTGVuZ3RoO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gdmFsdWUgPT0gMDtcbiAgfVxufVxuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvQGJ1ZmJ1aWxkL3Byb3RvYnVmL2Rpc3QvZXNtL2JpbmFyeS1lbmNvZGluZy5qc1xudmFyIFdpcmVUeXBlO1xuKGZ1bmN0aW9uKFdpcmVUeXBlMikge1xuICBXaXJlVHlwZTJbV2lyZVR5cGUyW1wiVmFyaW50XCJdID0gMF0gPSBcIlZhcmludFwiO1xuICBXaXJlVHlwZTJbV2lyZVR5cGUyW1wiQml0NjRcIl0gPSAxXSA9IFwiQml0NjRcIjtcbiAgV2lyZVR5cGUyW1dpcmVUeXBlMltcIkxlbmd0aERlbGltaXRlZFwiXSA9IDJdID0gXCJMZW5ndGhEZWxpbWl0ZWRcIjtcbiAgV2lyZVR5cGUyW1dpcmVUeXBlMltcIlN0YXJ0R3JvdXBcIl0gPSAzXSA9IFwiU3RhcnRHcm91cFwiO1xuICBXaXJlVHlwZTJbV2lyZVR5cGUyW1wiRW5kR3JvdXBcIl0gPSA0XSA9IFwiRW5kR3JvdXBcIjtcbiAgV2lyZVR5cGUyW1dpcmVUeXBlMltcIkJpdDMyXCJdID0gNV0gPSBcIkJpdDMyXCI7XG59KShXaXJlVHlwZSB8fCAoV2lyZVR5cGUgPSB7fSkpO1xudmFyIEJpbmFyeVdyaXRlciA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IodGV4dEVuY29kZXIpIHtcbiAgICB0aGlzLnN0YWNrID0gW107XG4gICAgdGhpcy50ZXh0RW5jb2RlciA9IHRleHRFbmNvZGVyICE9PSBudWxsICYmIHRleHRFbmNvZGVyICE9PSB2b2lkIDAgPyB0ZXh0RW5jb2RlciA6IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgIHRoaXMuY2h1bmtzID0gW107XG4gICAgdGhpcy5idWYgPSBbXTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJuIGFsbCBieXRlcyB3cml0dGVuIGFuZCByZXNldCB0aGlzIHdyaXRlci5cbiAgICovXG4gIGZpbmlzaCgpIHtcbiAgICB0aGlzLmNodW5rcy5wdXNoKG5ldyBVaW50OEFycmF5KHRoaXMuYnVmKSk7XG4gICAgbGV0IGxlbiA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNodW5rcy5sZW5ndGg7IGkrKylcbiAgICAgIGxlbiArPSB0aGlzLmNodW5rc1tpXS5sZW5ndGg7XG4gICAgbGV0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobGVuKTtcbiAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2h1bmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBieXRlcy5zZXQodGhpcy5jaHVua3NbaV0sIG9mZnNldCk7XG4gICAgICBvZmZzZXQgKz0gdGhpcy5jaHVua3NbaV0ubGVuZ3RoO1xuICAgIH1cbiAgICB0aGlzLmNodW5rcyA9IFtdO1xuICAgIHJldHVybiBieXRlcztcbiAgfVxuICAvKipcbiAgICogU3RhcnQgYSBuZXcgZm9yayBmb3IgbGVuZ3RoLWRlbGltaXRlZCBkYXRhIGxpa2UgYSBtZXNzYWdlXG4gICAqIG9yIGEgcGFja2VkIHJlcGVhdGVkIGZpZWxkLlxuICAgKlxuICAgKiBNdXN0IGJlIGpvaW5lZCBsYXRlciB3aXRoIGBqb2luKClgLlxuICAgKi9cbiAgZm9yaygpIHtcbiAgICB0aGlzLnN0YWNrLnB1c2goeyBjaHVua3M6IHRoaXMuY2h1bmtzLCBidWY6IHRoaXMuYnVmIH0pO1xuICAgIHRoaXMuY2h1bmtzID0gW107XG4gICAgdGhpcy5idWYgPSBbXTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogSm9pbiB0aGUgbGFzdCBmb3JrLiBXcml0ZSBpdHMgbGVuZ3RoIGFuZCBieXRlcywgdGhlblxuICAgKiByZXR1cm4gdG8gdGhlIHByZXZpb3VzIHN0YXRlLlxuICAgKi9cbiAgam9pbigpIHtcbiAgICBsZXQgY2h1bmsgPSB0aGlzLmZpbmlzaCgpO1xuICAgIGxldCBwcmV2ID0gdGhpcy5zdGFjay5wb3AoKTtcbiAgICBpZiAoIXByZXYpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIHN0YXRlLCBmb3JrIHN0YWNrIGVtcHR5XCIpO1xuICAgIHRoaXMuY2h1bmtzID0gcHJldi5jaHVua3M7XG4gICAgdGhpcy5idWYgPSBwcmV2LmJ1ZjtcbiAgICB0aGlzLnVpbnQzMihjaHVuay5ieXRlTGVuZ3RoKTtcbiAgICByZXR1cm4gdGhpcy5yYXcoY2h1bmspO1xuICB9XG4gIC8qKlxuICAgKiBXcml0ZXMgYSB0YWcgKGZpZWxkIG51bWJlciBhbmQgd2lyZSB0eXBlKS5cbiAgICpcbiAgICogRXF1aXZhbGVudCB0byBgdWludDMyKCAoZmllbGRObyA8PCAzIHwgdHlwZSkgPj4+IDAgKWAuXG4gICAqXG4gICAqIEdlbmVyYXRlZCBjb2RlIHNob3VsZCBjb21wdXRlIHRoZSB0YWcgYWhlYWQgb2YgdGltZSBhbmQgY2FsbCBgdWludDMyKClgLlxuICAgKi9cbiAgdGFnKGZpZWxkTm8sIHR5cGUpIHtcbiAgICByZXR1cm4gdGhpcy51aW50MzIoKGZpZWxkTm8gPDwgMyB8IHR5cGUpID4+PiAwKTtcbiAgfVxuICAvKipcbiAgICogV3JpdGUgYSBjaHVuayBvZiByYXcgYnl0ZXMuXG4gICAqL1xuICByYXcoY2h1bmspIHtcbiAgICBpZiAodGhpcy5idWYubGVuZ3RoKSB7XG4gICAgICB0aGlzLmNodW5rcy5wdXNoKG5ldyBVaW50OEFycmF5KHRoaXMuYnVmKSk7XG4gICAgICB0aGlzLmJ1ZiA9IFtdO1xuICAgIH1cbiAgICB0aGlzLmNodW5rcy5wdXNoKGNodW5rKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogV3JpdGUgYSBgdWludDMyYCB2YWx1ZSwgYW4gdW5zaWduZWQgMzIgYml0IHZhcmludC5cbiAgICovXG4gIHVpbnQzMih2YWx1ZSkge1xuICAgIGFzc2VydFVJbnQzMih2YWx1ZSk7XG4gICAgd2hpbGUgKHZhbHVlID4gMTI3KSB7XG4gICAgICB0aGlzLmJ1Zi5wdXNoKHZhbHVlICYgMTI3IHwgMTI4KTtcbiAgICAgIHZhbHVlID0gdmFsdWUgPj4+IDc7XG4gICAgfVxuICAgIHRoaXMuYnVmLnB1c2godmFsdWUpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBXcml0ZSBhIGBpbnQzMmAgdmFsdWUsIGEgc2lnbmVkIDMyIGJpdCB2YXJpbnQuXG4gICAqL1xuICBpbnQzMih2YWx1ZSkge1xuICAgIGFzc2VydEludDMyKHZhbHVlKTtcbiAgICB2YXJpbnQzMndyaXRlKHZhbHVlLCB0aGlzLmJ1Zik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFdyaXRlIGEgYGJvb2xgIHZhbHVlLCBhIHZhcmlhbnQuXG4gICAqL1xuICBib29sKHZhbHVlKSB7XG4gICAgdGhpcy5idWYucHVzaCh2YWx1ZSA/IDEgOiAwKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogV3JpdGUgYSBgYnl0ZXNgIHZhbHVlLCBsZW5ndGgtZGVsaW1pdGVkIGFyYml0cmFyeSBkYXRhLlxuICAgKi9cbiAgYnl0ZXModmFsdWUpIHtcbiAgICB0aGlzLnVpbnQzMih2YWx1ZS5ieXRlTGVuZ3RoKTtcbiAgICByZXR1cm4gdGhpcy5yYXcodmFsdWUpO1xuICB9XG4gIC8qKlxuICAgKiBXcml0ZSBhIGBzdHJpbmdgIHZhbHVlLCBsZW5ndGgtZGVsaW1pdGVkIGRhdGEgY29udmVydGVkIHRvIFVURi04IHRleHQuXG4gICAqL1xuICBzdHJpbmcodmFsdWUpIHtcbiAgICBsZXQgY2h1bmsgPSB0aGlzLnRleHRFbmNvZGVyLmVuY29kZSh2YWx1ZSk7XG4gICAgdGhpcy51aW50MzIoY2h1bmsuYnl0ZUxlbmd0aCk7XG4gICAgcmV0dXJuIHRoaXMucmF3KGNodW5rKTtcbiAgfVxuICAvKipcbiAgICogV3JpdGUgYSBgZmxvYXRgIHZhbHVlLCAzMi1iaXQgZmxvYXRpbmcgcG9pbnQgbnVtYmVyLlxuICAgKi9cbiAgZmxvYXQodmFsdWUpIHtcbiAgICBhc3NlcnRGbG9hdDMyKHZhbHVlKTtcbiAgICBsZXQgY2h1bmsgPSBuZXcgVWludDhBcnJheSg0KTtcbiAgICBuZXcgRGF0YVZpZXcoY2h1bmsuYnVmZmVyKS5zZXRGbG9hdDMyKDAsIHZhbHVlLCB0cnVlKTtcbiAgICByZXR1cm4gdGhpcy5yYXcoY2h1bmspO1xuICB9XG4gIC8qKlxuICAgKiBXcml0ZSBhIGBkb3VibGVgIHZhbHVlLCBhIDY0LWJpdCBmbG9hdGluZyBwb2ludCBudW1iZXIuXG4gICAqL1xuICBkb3VibGUodmFsdWUpIHtcbiAgICBsZXQgY2h1bmsgPSBuZXcgVWludDhBcnJheSg4KTtcbiAgICBuZXcgRGF0YVZpZXcoY2h1bmsuYnVmZmVyKS5zZXRGbG9hdDY0KDAsIHZhbHVlLCB0cnVlKTtcbiAgICByZXR1cm4gdGhpcy5yYXcoY2h1bmspO1xuICB9XG4gIC8qKlxuICAgKiBXcml0ZSBhIGBmaXhlZDMyYCB2YWx1ZSwgYW4gdW5zaWduZWQsIGZpeGVkLWxlbmd0aCAzMi1iaXQgaW50ZWdlci5cbiAgICovXG4gIGZpeGVkMzIodmFsdWUpIHtcbiAgICBhc3NlcnRVSW50MzIodmFsdWUpO1xuICAgIGxldCBjaHVuayA9IG5ldyBVaW50OEFycmF5KDQpO1xuICAgIG5ldyBEYXRhVmlldyhjaHVuay5idWZmZXIpLnNldFVpbnQzMigwLCB2YWx1ZSwgdHJ1ZSk7XG4gICAgcmV0dXJuIHRoaXMucmF3KGNodW5rKTtcbiAgfVxuICAvKipcbiAgICogV3JpdGUgYSBgc2ZpeGVkMzJgIHZhbHVlLCBhIHNpZ25lZCwgZml4ZWQtbGVuZ3RoIDMyLWJpdCBpbnRlZ2VyLlxuICAgKi9cbiAgc2ZpeGVkMzIodmFsdWUpIHtcbiAgICBhc3NlcnRJbnQzMih2YWx1ZSk7XG4gICAgbGV0IGNodW5rID0gbmV3IFVpbnQ4QXJyYXkoNCk7XG4gICAgbmV3IERhdGFWaWV3KGNodW5rLmJ1ZmZlcikuc2V0SW50MzIoMCwgdmFsdWUsIHRydWUpO1xuICAgIHJldHVybiB0aGlzLnJhdyhjaHVuayk7XG4gIH1cbiAgLyoqXG4gICAqIFdyaXRlIGEgYHNpbnQzMmAgdmFsdWUsIGEgc2lnbmVkLCB6aWd6YWctZW5jb2RlZCAzMi1iaXQgdmFyaW50LlxuICAgKi9cbiAgc2ludDMyKHZhbHVlKSB7XG4gICAgYXNzZXJ0SW50MzIodmFsdWUpO1xuICAgIHZhbHVlID0gKHZhbHVlIDw8IDEgXiB2YWx1ZSA+PiAzMSkgPj4+IDA7XG4gICAgdmFyaW50MzJ3cml0ZSh2YWx1ZSwgdGhpcy5idWYpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBXcml0ZSBhIGBmaXhlZDY0YCB2YWx1ZSwgYSBzaWduZWQsIGZpeGVkLWxlbmd0aCA2NC1iaXQgaW50ZWdlci5cbiAgICovXG4gIHNmaXhlZDY0KHZhbHVlKSB7XG4gICAgbGV0IGNodW5rID0gbmV3IFVpbnQ4QXJyYXkoOCksIHZpZXcgPSBuZXcgRGF0YVZpZXcoY2h1bmsuYnVmZmVyKSwgdGMgPSBwcm90b0ludDY0LmVuYyh2YWx1ZSk7XG4gICAgdmlldy5zZXRJbnQzMigwLCB0Yy5sbywgdHJ1ZSk7XG4gICAgdmlldy5zZXRJbnQzMig0LCB0Yy5oaSwgdHJ1ZSk7XG4gICAgcmV0dXJuIHRoaXMucmF3KGNodW5rKTtcbiAgfVxuICAvKipcbiAgICogV3JpdGUgYSBgZml4ZWQ2NGAgdmFsdWUsIGFuIHVuc2lnbmVkLCBmaXhlZC1sZW5ndGggNjQgYml0IGludGVnZXIuXG4gICAqL1xuICBmaXhlZDY0KHZhbHVlKSB7XG4gICAgbGV0IGNodW5rID0gbmV3IFVpbnQ4QXJyYXkoOCksIHZpZXcgPSBuZXcgRGF0YVZpZXcoY2h1bmsuYnVmZmVyKSwgdGMgPSBwcm90b0ludDY0LnVFbmModmFsdWUpO1xuICAgIHZpZXcuc2V0SW50MzIoMCwgdGMubG8sIHRydWUpO1xuICAgIHZpZXcuc2V0SW50MzIoNCwgdGMuaGksIHRydWUpO1xuICAgIHJldHVybiB0aGlzLnJhdyhjaHVuayk7XG4gIH1cbiAgLyoqXG4gICAqIFdyaXRlIGEgYGludDY0YCB2YWx1ZSwgYSBzaWduZWQgNjQtYml0IHZhcmludC5cbiAgICovXG4gIGludDY0KHZhbHVlKSB7XG4gICAgbGV0IHRjID0gcHJvdG9JbnQ2NC5lbmModmFsdWUpO1xuICAgIHZhcmludDY0d3JpdGUodGMubG8sIHRjLmhpLCB0aGlzLmJ1Zik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFdyaXRlIGEgYHNpbnQ2NGAgdmFsdWUsIGEgc2lnbmVkLCB6aWctemFnLWVuY29kZWQgNjQtYml0IHZhcmludC5cbiAgICovXG4gIHNpbnQ2NCh2YWx1ZSkge1xuICAgIGxldCB0YyA9IHByb3RvSW50NjQuZW5jKHZhbHVlKSwgc2lnbiA9IHRjLmhpID4+IDMxLCBsbyA9IHRjLmxvIDw8IDEgXiBzaWduLCBoaSA9ICh0Yy5oaSA8PCAxIHwgdGMubG8gPj4+IDMxKSBeIHNpZ247XG4gICAgdmFyaW50NjR3cml0ZShsbywgaGksIHRoaXMuYnVmKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogV3JpdGUgYSBgdWludDY0YCB2YWx1ZSwgYW4gdW5zaWduZWQgNjQtYml0IHZhcmludC5cbiAgICovXG4gIHVpbnQ2NCh2YWx1ZSkge1xuICAgIGxldCB0YyA9IHByb3RvSW50NjQudUVuYyh2YWx1ZSk7XG4gICAgdmFyaW50NjR3cml0ZSh0Yy5sbywgdGMuaGksIHRoaXMuYnVmKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxufTtcbnZhciBCaW5hcnlSZWFkZXIgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGJ1ZiwgdGV4dERlY29kZXIpIHtcbiAgICB0aGlzLnZhcmludDY0ID0gdmFyaW50NjRyZWFkO1xuICAgIHRoaXMudWludDMyID0gdmFyaW50MzJyZWFkO1xuICAgIHRoaXMuYnVmID0gYnVmO1xuICAgIHRoaXMubGVuID0gYnVmLmxlbmd0aDtcbiAgICB0aGlzLnBvcyA9IDA7XG4gICAgdGhpcy52aWV3ID0gbmV3IERhdGFWaWV3KGJ1Zi5idWZmZXIsIGJ1Zi5ieXRlT2Zmc2V0LCBidWYuYnl0ZUxlbmd0aCk7XG4gICAgdGhpcy50ZXh0RGVjb2RlciA9IHRleHREZWNvZGVyICE9PSBudWxsICYmIHRleHREZWNvZGVyICE9PSB2b2lkIDAgPyB0ZXh0RGVjb2RlciA6IG5ldyBUZXh0RGVjb2RlcigpO1xuICB9XG4gIC8qKlxuICAgKiBSZWFkcyBhIHRhZyAtIGZpZWxkIG51bWJlciBhbmQgd2lyZSB0eXBlLlxuICAgKi9cbiAgdGFnKCkge1xuICAgIGxldCB0YWcgPSB0aGlzLnVpbnQzMigpLCBmaWVsZE5vID0gdGFnID4+PiAzLCB3aXJlVHlwZSA9IHRhZyAmIDc7XG4gICAgaWYgKGZpZWxkTm8gPD0gMCB8fCB3aXJlVHlwZSA8IDAgfHwgd2lyZVR5cGUgPiA1KVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCB0YWc6IGZpZWxkIG5vIFwiICsgZmllbGRObyArIFwiIHdpcmUgdHlwZSBcIiArIHdpcmVUeXBlKTtcbiAgICByZXR1cm4gW2ZpZWxkTm8sIHdpcmVUeXBlXTtcbiAgfVxuICAvKipcbiAgICogU2tpcCBvbmUgZWxlbWVudCBhbmQgcmV0dXJuIHRoZSBza2lwcGVkIGRhdGEuXG4gICAqXG4gICAqIFdoZW4gc2tpcHBpbmcgU3RhcnRHcm91cCwgcHJvdmlkZSB0aGUgdGFncyBmaWVsZCBudW1iZXIgdG8gY2hlY2sgZm9yXG4gICAqIG1hdGNoaW5nIGZpZWxkIG51bWJlciBpbiB0aGUgRW5kR3JvdXAgdGFnLlxuICAgKi9cbiAgc2tpcCh3aXJlVHlwZSwgZmllbGRObykge1xuICAgIGxldCBzdGFydCA9IHRoaXMucG9zO1xuICAgIHN3aXRjaCAod2lyZVR5cGUpIHtcbiAgICAgIGNhc2UgV2lyZVR5cGUuVmFyaW50OlxuICAgICAgICB3aGlsZSAodGhpcy5idWZbdGhpcy5wb3MrK10gJiAxMjgpIHtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgLy8gQHRzLWlnbm9yZSBUUzcwMjk6IEZhbGx0aHJvdWdoIGNhc2UgaW4gc3dpdGNoXG4gICAgICBjYXNlIFdpcmVUeXBlLkJpdDY0OlxuICAgICAgICB0aGlzLnBvcyArPSA0O1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAvLyBAdHMtaWdub3JlIFRTNzAyOTogRmFsbHRocm91Z2ggY2FzZSBpbiBzd2l0Y2hcbiAgICAgIGNhc2UgV2lyZVR5cGUuQml0MzI6XG4gICAgICAgIHRoaXMucG9zICs9IDQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQ6XG4gICAgICAgIGxldCBsZW4gPSB0aGlzLnVpbnQzMigpO1xuICAgICAgICB0aGlzLnBvcyArPSBsZW47XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBXaXJlVHlwZS5TdGFydEdyb3VwOlxuICAgICAgICBmb3IgKDsgOyApIHtcbiAgICAgICAgICBjb25zdCBbZm4sIHd0XSA9IHRoaXMudGFnKCk7XG4gICAgICAgICAgaWYgKHd0ID09PSBXaXJlVHlwZS5FbmRHcm91cCkge1xuICAgICAgICAgICAgaWYgKGZpZWxkTm8gIT09IHZvaWQgMCAmJiBmbiAhPT0gZmllbGRObykge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIGVuZCBncm91cCB0YWdcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5za2lwKHd0LCBmbik7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYW50IHNraXAgd2lyZSB0eXBlIFwiICsgd2lyZVR5cGUpO1xuICAgIH1cbiAgICB0aGlzLmFzc2VydEJvdW5kcygpO1xuICAgIHJldHVybiB0aGlzLmJ1Zi5zdWJhcnJheShzdGFydCwgdGhpcy5wb3MpO1xuICB9XG4gIC8qKlxuICAgKiBUaHJvd3MgZXJyb3IgaWYgcG9zaXRpb24gaW4gYnl0ZSBhcnJheSBpcyBvdXQgb2YgcmFuZ2UuXG4gICAqL1xuICBhc3NlcnRCb3VuZHMoKSB7XG4gICAgaWYgKHRoaXMucG9zID4gdGhpcy5sZW4pXG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcInByZW1hdHVyZSBFT0ZcIik7XG4gIH1cbiAgLyoqXG4gICAqIFJlYWQgYSBgaW50MzJgIGZpZWxkLCBhIHNpZ25lZCAzMiBiaXQgdmFyaW50LlxuICAgKi9cbiAgaW50MzIoKSB7XG4gICAgcmV0dXJuIHRoaXMudWludDMyKCkgfCAwO1xuICB9XG4gIC8qKlxuICAgKiBSZWFkIGEgYHNpbnQzMmAgZmllbGQsIGEgc2lnbmVkLCB6aWd6YWctZW5jb2RlZCAzMi1iaXQgdmFyaW50LlxuICAgKi9cbiAgc2ludDMyKCkge1xuICAgIGxldCB6emUgPSB0aGlzLnVpbnQzMigpO1xuICAgIHJldHVybiB6emUgPj4+IDEgXiAtKHp6ZSAmIDEpO1xuICB9XG4gIC8qKlxuICAgKiBSZWFkIGEgYGludDY0YCBmaWVsZCwgYSBzaWduZWQgNjQtYml0IHZhcmludC5cbiAgICovXG4gIGludDY0KCkge1xuICAgIHJldHVybiBwcm90b0ludDY0LmRlYyguLi50aGlzLnZhcmludDY0KCkpO1xuICB9XG4gIC8qKlxuICAgKiBSZWFkIGEgYHVpbnQ2NGAgZmllbGQsIGFuIHVuc2lnbmVkIDY0LWJpdCB2YXJpbnQuXG4gICAqL1xuICB1aW50NjQoKSB7XG4gICAgcmV0dXJuIHByb3RvSW50NjQudURlYyguLi50aGlzLnZhcmludDY0KCkpO1xuICB9XG4gIC8qKlxuICAgKiBSZWFkIGEgYHNpbnQ2NGAgZmllbGQsIGEgc2lnbmVkLCB6aWctemFnLWVuY29kZWQgNjQtYml0IHZhcmludC5cbiAgICovXG4gIHNpbnQ2NCgpIHtcbiAgICBsZXQgW2xvLCBoaV0gPSB0aGlzLnZhcmludDY0KCk7XG4gICAgbGV0IHMgPSAtKGxvICYgMSk7XG4gICAgbG8gPSAobG8gPj4+IDEgfCAoaGkgJiAxKSA8PCAzMSkgXiBzO1xuICAgIGhpID0gaGkgPj4+IDEgXiBzO1xuICAgIHJldHVybiBwcm90b0ludDY0LmRlYyhsbywgaGkpO1xuICB9XG4gIC8qKlxuICAgKiBSZWFkIGEgYGJvb2xgIGZpZWxkLCBhIHZhcmlhbnQuXG4gICAqL1xuICBib29sKCkge1xuICAgIGxldCBbbG8sIGhpXSA9IHRoaXMudmFyaW50NjQoKTtcbiAgICByZXR1cm4gbG8gIT09IDAgfHwgaGkgIT09IDA7XG4gIH1cbiAgLyoqXG4gICAqIFJlYWQgYSBgZml4ZWQzMmAgZmllbGQsIGFuIHVuc2lnbmVkLCBmaXhlZC1sZW5ndGggMzItYml0IGludGVnZXIuXG4gICAqL1xuICBmaXhlZDMyKCkge1xuICAgIHJldHVybiB0aGlzLnZpZXcuZ2V0VWludDMyKCh0aGlzLnBvcyArPSA0KSAtIDQsIHRydWUpO1xuICB9XG4gIC8qKlxuICAgKiBSZWFkIGEgYHNmaXhlZDMyYCBmaWVsZCwgYSBzaWduZWQsIGZpeGVkLWxlbmd0aCAzMi1iaXQgaW50ZWdlci5cbiAgICovXG4gIHNmaXhlZDMyKCkge1xuICAgIHJldHVybiB0aGlzLnZpZXcuZ2V0SW50MzIoKHRoaXMucG9zICs9IDQpIC0gNCwgdHJ1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIFJlYWQgYSBgZml4ZWQ2NGAgZmllbGQsIGFuIHVuc2lnbmVkLCBmaXhlZC1sZW5ndGggNjQgYml0IGludGVnZXIuXG4gICAqL1xuICBmaXhlZDY0KCkge1xuICAgIHJldHVybiBwcm90b0ludDY0LnVEZWModGhpcy5zZml4ZWQzMigpLCB0aGlzLnNmaXhlZDMyKCkpO1xuICB9XG4gIC8qKlxuICAgKiBSZWFkIGEgYGZpeGVkNjRgIGZpZWxkLCBhIHNpZ25lZCwgZml4ZWQtbGVuZ3RoIDY0LWJpdCBpbnRlZ2VyLlxuICAgKi9cbiAgc2ZpeGVkNjQoKSB7XG4gICAgcmV0dXJuIHByb3RvSW50NjQuZGVjKHRoaXMuc2ZpeGVkMzIoKSwgdGhpcy5zZml4ZWQzMigpKTtcbiAgfVxuICAvKipcbiAgICogUmVhZCBhIGBmbG9hdGAgZmllbGQsIDMyLWJpdCBmbG9hdGluZyBwb2ludCBudW1iZXIuXG4gICAqL1xuICBmbG9hdCgpIHtcbiAgICByZXR1cm4gdGhpcy52aWV3LmdldEZsb2F0MzIoKHRoaXMucG9zICs9IDQpIC0gNCwgdHJ1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIFJlYWQgYSBgZG91YmxlYCBmaWVsZCwgYSA2NC1iaXQgZmxvYXRpbmcgcG9pbnQgbnVtYmVyLlxuICAgKi9cbiAgZG91YmxlKCkge1xuICAgIHJldHVybiB0aGlzLnZpZXcuZ2V0RmxvYXQ2NCgodGhpcy5wb3MgKz0gOCkgLSA4LCB0cnVlKTtcbiAgfVxuICAvKipcbiAgICogUmVhZCBhIGBieXRlc2AgZmllbGQsIGxlbmd0aC1kZWxpbWl0ZWQgYXJiaXRyYXJ5IGRhdGEuXG4gICAqL1xuICBieXRlcygpIHtcbiAgICBsZXQgbGVuID0gdGhpcy51aW50MzIoKSwgc3RhcnQgPSB0aGlzLnBvcztcbiAgICB0aGlzLnBvcyArPSBsZW47XG4gICAgdGhpcy5hc3NlcnRCb3VuZHMoKTtcbiAgICByZXR1cm4gdGhpcy5idWYuc3ViYXJyYXkoc3RhcnQsIHN0YXJ0ICsgbGVuKTtcbiAgfVxuICAvKipcbiAgICogUmVhZCBhIGBzdHJpbmdgIGZpZWxkLCBsZW5ndGgtZGVsaW1pdGVkIGRhdGEgY29udmVydGVkIHRvIFVURi04IHRleHQuXG4gICAqL1xuICBzdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMudGV4dERlY29kZXIuZGVjb2RlKHRoaXMuYnl0ZXMoKSk7XG4gIH1cbn07XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AYnVmYnVpbGQvcHJvdG9idWYvZGlzdC9lc20vcHJpdmF0ZS9leHRlbnNpb25zLmpzXG5mdW5jdGlvbiBtYWtlRXh0ZW5zaW9uKHJ1bnRpbWUsIHR5cGVOYW1lLCBleHRlbmRlZSwgZmllbGQpIHtcbiAgbGV0IGZpO1xuICByZXR1cm4ge1xuICAgIHR5cGVOYW1lLFxuICAgIGV4dGVuZGVlLFxuICAgIGdldCBmaWVsZCgpIHtcbiAgICAgIGlmICghZmkpIHtcbiAgICAgICAgY29uc3QgaSA9IHR5cGVvZiBmaWVsZCA9PSBcImZ1bmN0aW9uXCIgPyBmaWVsZCgpIDogZmllbGQ7XG4gICAgICAgIGkubmFtZSA9IHR5cGVOYW1lLnNwbGl0KFwiLlwiKS5wb3AoKTtcbiAgICAgICAgaS5qc29uTmFtZSA9IGBbJHt0eXBlTmFtZX1dYDtcbiAgICAgICAgZmkgPSBydW50aW1lLnV0aWwubmV3RmllbGRMaXN0KFtpXSkubGlzdCgpWzBdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZpO1xuICAgIH0sXG4gICAgcnVudGltZVxuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlRXh0ZW5zaW9uQ29udGFpbmVyKGV4dGVuc2lvbikge1xuICBjb25zdCBsb2NhbE5hbWUgPSBleHRlbnNpb24uZmllbGQubG9jYWxOYW1lO1xuICBjb25zdCBjb250YWluZXIgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgY29udGFpbmVyW2xvY2FsTmFtZV0gPSBpbml0RXh0ZW5zaW9uRmllbGQoZXh0ZW5zaW9uKTtcbiAgcmV0dXJuIFtjb250YWluZXIsICgpID0+IGNvbnRhaW5lcltsb2NhbE5hbWVdXTtcbn1cbmZ1bmN0aW9uIGluaXRFeHRlbnNpb25GaWVsZChleHQpIHtcbiAgY29uc3QgZmllbGQgPSBleHQuZmllbGQ7XG4gIGlmIChmaWVsZC5yZXBlYXRlZCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBpZiAoZmllbGQuZGVmYXVsdCAhPT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuIGZpZWxkLmRlZmF1bHQ7XG4gIH1cbiAgc3dpdGNoIChmaWVsZC5raW5kKSB7XG4gICAgY2FzZSBcImVudW1cIjpcbiAgICAgIHJldHVybiBmaWVsZC5ULnZhbHVlc1swXS5ubztcbiAgICBjYXNlIFwic2NhbGFyXCI6XG4gICAgICByZXR1cm4gc2NhbGFyWmVyb1ZhbHVlKGZpZWxkLlQsIGZpZWxkLkwpO1xuICAgIGNhc2UgXCJtZXNzYWdlXCI6XG4gICAgICBjb25zdCBUID0gZmllbGQuVCwgdmFsdWUgPSBuZXcgVCgpO1xuICAgICAgcmV0dXJuIFQuZmllbGRXcmFwcGVyID8gVC5maWVsZFdyYXBwZXIudW53cmFwRmllbGQodmFsdWUpIDogdmFsdWU7XG4gICAgY2FzZSBcIm1hcFwiOlxuICAgICAgdGhyb3cgXCJtYXAgZmllbGRzIGFyZSBub3QgYWxsb3dlZCB0byBiZSBleHRlbnNpb25zXCI7XG4gIH1cbn1cbmZ1bmN0aW9uIGZpbHRlclVua25vd25GaWVsZHModW5rbm93bkZpZWxkcywgZmllbGQpIHtcbiAgaWYgKCFmaWVsZC5yZXBlYXRlZCAmJiAoZmllbGQua2luZCA9PSBcImVudW1cIiB8fCBmaWVsZC5raW5kID09IFwic2NhbGFyXCIpKSB7XG4gICAgZm9yIChsZXQgaSA9IHVua25vd25GaWVsZHMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIGlmICh1bmtub3duRmllbGRzW2ldLm5vID09IGZpZWxkLm5vKSB7XG4gICAgICAgIHJldHVybiBbdW5rbm93bkZpZWxkc1tpXV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbXTtcbiAgfVxuICByZXR1cm4gdW5rbm93bkZpZWxkcy5maWx0ZXIoKHVmKSA9PiB1Zi5ubyA9PT0gZmllbGQubm8pO1xufVxuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvQGJ1ZmJ1aWxkL3Byb3RvYnVmL2Rpc3QvZXNtL3Byb3RvLWJhc2U2NC5qc1xudmFyIGVuY1RhYmxlID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCIuc3BsaXQoXCJcIik7XG52YXIgZGVjVGFibGUgPSBbXTtcbmZvciAobGV0IGkgPSAwOyBpIDwgZW5jVGFibGUubGVuZ3RoOyBpKyspXG4gIGRlY1RhYmxlW2VuY1RhYmxlW2ldLmNoYXJDb2RlQXQoMCldID0gaTtcbmRlY1RhYmxlW1wiLVwiLmNoYXJDb2RlQXQoMCldID0gZW5jVGFibGUuaW5kZXhPZihcIitcIik7XG5kZWNUYWJsZVtcIl9cIi5jaGFyQ29kZUF0KDApXSA9IGVuY1RhYmxlLmluZGV4T2YoXCIvXCIpO1xudmFyIHByb3RvQmFzZTY0ID0ge1xuICAvKipcbiAgICogRGVjb2RlcyBhIGJhc2U2NCBzdHJpbmcgdG8gYSBieXRlIGFycmF5LlxuICAgKlxuICAgKiAtIGlnbm9yZXMgd2hpdGUtc3BhY2UsIGluY2x1ZGluZyBsaW5lIGJyZWFrcyBhbmQgdGFic1xuICAgKiAtIGFsbG93cyBpbm5lciBwYWRkaW5nIChjYW4gZGVjb2RlIGNvbmNhdGVuYXRlZCBiYXNlNjQgc3RyaW5ncylcbiAgICogLSBkb2VzIG5vdCByZXF1aXJlIHBhZGRpbmdcbiAgICogLSB1bmRlcnN0YW5kcyBiYXNlNjR1cmwgZW5jb2Rpbmc6XG4gICAqICAgXCItXCIgaW5zdGVhZCBvZiBcIitcIixcbiAgICogICBcIl9cIiBpbnN0ZWFkIG9mIFwiL1wiLFxuICAgKiAgIG5vIHBhZGRpbmdcbiAgICovXG4gIGRlYyhiYXNlNjRTdHIpIHtcbiAgICBsZXQgZXMgPSBiYXNlNjRTdHIubGVuZ3RoICogMyAvIDQ7XG4gICAgaWYgKGJhc2U2NFN0cltiYXNlNjRTdHIubGVuZ3RoIC0gMl0gPT0gXCI9XCIpXG4gICAgICBlcyAtPSAyO1xuICAgIGVsc2UgaWYgKGJhc2U2NFN0cltiYXNlNjRTdHIubGVuZ3RoIC0gMV0gPT0gXCI9XCIpXG4gICAgICBlcyAtPSAxO1xuICAgIGxldCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGVzKSwgYnl0ZVBvcyA9IDAsIGdyb3VwUG9zID0gMCwgYiwgcCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiYXNlNjRTdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGIgPSBkZWNUYWJsZVtiYXNlNjRTdHIuY2hhckNvZGVBdChpKV07XG4gICAgICBpZiAoYiA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHN3aXRjaCAoYmFzZTY0U3RyW2ldKSB7XG4gICAgICAgICAgLy8gQHRzLWlnbm9yZSBUUzcwMjk6IEZhbGx0aHJvdWdoIGNhc2UgaW4gc3dpdGNoXG4gICAgICAgICAgY2FzZSBcIj1cIjpcbiAgICAgICAgICAgIGdyb3VwUG9zID0gMDtcbiAgICAgICAgICAvLyByZXNldCBzdGF0ZSB3aGVuIHBhZGRpbmcgZm91bmRcbiAgICAgICAgICAvLyBAdHMtaWdub3JlIFRTNzAyOTogRmFsbHRocm91Z2ggY2FzZSBpbiBzd2l0Y2hcbiAgICAgICAgICBjYXNlIFwiXFxuXCI6XG4gICAgICAgICAgY2FzZSBcIlxcclwiOlxuICAgICAgICAgIGNhc2UgXCJcdFwiOlxuICAgICAgICAgIGNhc2UgXCIgXCI6XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAvLyBza2lwIHdoaXRlLXNwYWNlLCBhbmQgcGFkZGluZ1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcImludmFsaWQgYmFzZTY0IHN0cmluZy5cIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHN3aXRjaCAoZ3JvdXBQb3MpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHAgPSBiO1xuICAgICAgICAgIGdyb3VwUG9zID0gMTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGJ5dGVzW2J5dGVQb3MrK10gPSBwIDw8IDIgfCAoYiAmIDQ4KSA+PiA0O1xuICAgICAgICAgIHAgPSBiO1xuICAgICAgICAgIGdyb3VwUG9zID0gMjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIGJ5dGVzW2J5dGVQb3MrK10gPSAocCAmIDE1KSA8PCA0IHwgKGIgJiA2MCkgPj4gMjtcbiAgICAgICAgICBwID0gYjtcbiAgICAgICAgICBncm91cFBvcyA9IDM7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBieXRlc1tieXRlUG9zKytdID0gKHAgJiAzKSA8PCA2IHwgYjtcbiAgICAgICAgICBncm91cFBvcyA9IDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChncm91cFBvcyA9PSAxKVxuICAgICAgdGhyb3cgRXJyb3IoXCJpbnZhbGlkIGJhc2U2NCBzdHJpbmcuXCIpO1xuICAgIHJldHVybiBieXRlcy5zdWJhcnJheSgwLCBieXRlUG9zKTtcbiAgfSxcbiAgLyoqXG4gICAqIEVuY29kZSBhIGJ5dGUgYXJyYXkgdG8gYSBiYXNlNjQgc3RyaW5nLlxuICAgKi9cbiAgZW5jKGJ5dGVzKSB7XG4gICAgbGV0IGJhc2U2NCA9IFwiXCIsIGdyb3VwUG9zID0gMCwgYiwgcCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgYiA9IGJ5dGVzW2ldO1xuICAgICAgc3dpdGNoIChncm91cFBvcykge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgYmFzZTY0ICs9IGVuY1RhYmxlW2IgPj4gMl07XG4gICAgICAgICAgcCA9IChiICYgMykgPDwgNDtcbiAgICAgICAgICBncm91cFBvcyA9IDE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBiYXNlNjQgKz0gZW5jVGFibGVbcCB8IGIgPj4gNF07XG4gICAgICAgICAgcCA9IChiICYgMTUpIDw8IDI7XG4gICAgICAgICAgZ3JvdXBQb3MgPSAyO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgYmFzZTY0ICs9IGVuY1RhYmxlW3AgfCBiID4+IDZdO1xuICAgICAgICAgIGJhc2U2NCArPSBlbmNUYWJsZVtiICYgNjNdO1xuICAgICAgICAgIGdyb3VwUG9zID0gMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGdyb3VwUG9zKSB7XG4gICAgICBiYXNlNjQgKz0gZW5jVGFibGVbcF07XG4gICAgICBiYXNlNjQgKz0gXCI9XCI7XG4gICAgICBpZiAoZ3JvdXBQb3MgPT0gMSlcbiAgICAgICAgYmFzZTY0ICs9IFwiPVwiO1xuICAgIH1cbiAgICByZXR1cm4gYmFzZTY0O1xuICB9XG59O1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvQGJ1ZmJ1aWxkL3Byb3RvYnVmL2Rpc3QvZXNtL2V4dGVuc2lvbi1hY2Nlc3Nvci5qc1xuZnVuY3Rpb24gZ2V0RXh0ZW5zaW9uKG1lc3NhZ2UsIGV4dGVuc2lvbiwgb3B0aW9ucykge1xuICBhc3NlcnRFeHRlbmRlZShleHRlbnNpb24sIG1lc3NhZ2UpO1xuICBjb25zdCBvcHQgPSBleHRlbnNpb24ucnVudGltZS5iaW4ubWFrZVJlYWRPcHRpb25zKG9wdGlvbnMpO1xuICBjb25zdCB1ZnMgPSBmaWx0ZXJVbmtub3duRmllbGRzKG1lc3NhZ2UuZ2V0VHlwZSgpLnJ1bnRpbWUuYmluLmxpc3RVbmtub3duRmllbGRzKG1lc3NhZ2UpLCBleHRlbnNpb24uZmllbGQpO1xuICBjb25zdCBbY29udGFpbmVyLCBnZXRdID0gY3JlYXRlRXh0ZW5zaW9uQ29udGFpbmVyKGV4dGVuc2lvbik7XG4gIGZvciAoY29uc3QgdWYgb2YgdWZzKSB7XG4gICAgZXh0ZW5zaW9uLnJ1bnRpbWUuYmluLnJlYWRGaWVsZChjb250YWluZXIsIG9wdC5yZWFkZXJGYWN0b3J5KHVmLmRhdGEpLCBleHRlbnNpb24uZmllbGQsIHVmLndpcmVUeXBlLCBvcHQpO1xuICB9XG4gIHJldHVybiBnZXQoKTtcbn1cbmZ1bmN0aW9uIHNldEV4dGVuc2lvbihtZXNzYWdlLCBleHRlbnNpb24sIHZhbHVlLCBvcHRpb25zKSB7XG4gIGFzc2VydEV4dGVuZGVlKGV4dGVuc2lvbiwgbWVzc2FnZSk7XG4gIGNvbnN0IHJlYWRPcHQgPSBleHRlbnNpb24ucnVudGltZS5iaW4ubWFrZVJlYWRPcHRpb25zKG9wdGlvbnMpO1xuICBjb25zdCB3cml0ZU9wdCA9IGV4dGVuc2lvbi5ydW50aW1lLmJpbi5tYWtlV3JpdGVPcHRpb25zKG9wdGlvbnMpO1xuICBpZiAoaGFzRXh0ZW5zaW9uKG1lc3NhZ2UsIGV4dGVuc2lvbikpIHtcbiAgICBjb25zdCB1ZnMgPSBtZXNzYWdlLmdldFR5cGUoKS5ydW50aW1lLmJpbi5saXN0VW5rbm93bkZpZWxkcyhtZXNzYWdlKS5maWx0ZXIoKHVmKSA9PiB1Zi5ubyAhPSBleHRlbnNpb24uZmllbGQubm8pO1xuICAgIG1lc3NhZ2UuZ2V0VHlwZSgpLnJ1bnRpbWUuYmluLmRpc2NhcmRVbmtub3duRmllbGRzKG1lc3NhZ2UpO1xuICAgIGZvciAoY29uc3QgdWYgb2YgdWZzKSB7XG4gICAgICBtZXNzYWdlLmdldFR5cGUoKS5ydW50aW1lLmJpbi5vblVua25vd25GaWVsZChtZXNzYWdlLCB1Zi5ubywgdWYud2lyZVR5cGUsIHVmLmRhdGEpO1xuICAgIH1cbiAgfVxuICBjb25zdCB3cml0ZXIgPSB3cml0ZU9wdC53cml0ZXJGYWN0b3J5KCk7XG4gIGxldCBmID0gZXh0ZW5zaW9uLmZpZWxkO1xuICBpZiAoIWYub3B0ICYmICFmLnJlcGVhdGVkICYmIChmLmtpbmQgPT0gXCJlbnVtXCIgfHwgZi5raW5kID09IFwic2NhbGFyXCIpKSB7XG4gICAgZiA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZXh0ZW5zaW9uLmZpZWxkKSwgeyBvcHQ6IHRydWUgfSk7XG4gIH1cbiAgZXh0ZW5zaW9uLnJ1bnRpbWUuYmluLndyaXRlRmllbGQoZiwgdmFsdWUsIHdyaXRlciwgd3JpdGVPcHQpO1xuICBjb25zdCByZWFkZXIgPSByZWFkT3B0LnJlYWRlckZhY3Rvcnkod3JpdGVyLmZpbmlzaCgpKTtcbiAgd2hpbGUgKHJlYWRlci5wb3MgPCByZWFkZXIubGVuKSB7XG4gICAgY29uc3QgW25vLCB3aXJlVHlwZV0gPSByZWFkZXIudGFnKCk7XG4gICAgY29uc3QgZGF0YSA9IHJlYWRlci5za2lwKHdpcmVUeXBlLCBubyk7XG4gICAgbWVzc2FnZS5nZXRUeXBlKCkucnVudGltZS5iaW4ub25Vbmtub3duRmllbGQobWVzc2FnZSwgbm8sIHdpcmVUeXBlLCBkYXRhKTtcbiAgfVxufVxuZnVuY3Rpb24gaGFzRXh0ZW5zaW9uKG1lc3NhZ2UsIGV4dGVuc2lvbikge1xuICBjb25zdCBtZXNzYWdlVHlwZSA9IG1lc3NhZ2UuZ2V0VHlwZSgpO1xuICByZXR1cm4gZXh0ZW5zaW9uLmV4dGVuZGVlLnR5cGVOYW1lID09PSBtZXNzYWdlVHlwZS50eXBlTmFtZSAmJiAhIW1lc3NhZ2VUeXBlLnJ1bnRpbWUuYmluLmxpc3RVbmtub3duRmllbGRzKG1lc3NhZ2UpLmZpbmQoKHVmKSA9PiB1Zi5ubyA9PSBleHRlbnNpb24uZmllbGQubm8pO1xufVxuZnVuY3Rpb24gYXNzZXJ0RXh0ZW5kZWUoZXh0ZW5zaW9uLCBtZXNzYWdlKSB7XG4gIGFzc2VydChleHRlbnNpb24uZXh0ZW5kZWUudHlwZU5hbWUgPT0gbWVzc2FnZS5nZXRUeXBlKCkudHlwZU5hbWUsIGBleHRlbnNpb24gJHtleHRlbnNpb24udHlwZU5hbWV9IGNhbiBvbmx5IGJlIGFwcGxpZWQgdG8gbWVzc2FnZSAke2V4dGVuc2lvbi5leHRlbmRlZS50eXBlTmFtZX1gKTtcbn1cblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0BidWZidWlsZC9wcm90b2J1Zi9kaXN0L2VzbS9wcml2YXRlL3JlZmxlY3QuanNcbmZ1bmN0aW9uIGlzRmllbGRTZXQoZmllbGQsIHRhcmdldCkge1xuICBjb25zdCBsb2NhbE5hbWUgPSBmaWVsZC5sb2NhbE5hbWU7XG4gIGlmIChmaWVsZC5yZXBlYXRlZCkge1xuICAgIHJldHVybiB0YXJnZXRbbG9jYWxOYW1lXS5sZW5ndGggPiAwO1xuICB9XG4gIGlmIChmaWVsZC5vbmVvZikge1xuICAgIHJldHVybiB0YXJnZXRbZmllbGQub25lb2YubG9jYWxOYW1lXS5jYXNlID09PSBsb2NhbE5hbWU7XG4gIH1cbiAgc3dpdGNoIChmaWVsZC5raW5kKSB7XG4gICAgY2FzZSBcImVudW1cIjpcbiAgICBjYXNlIFwic2NhbGFyXCI6XG4gICAgICBpZiAoZmllbGQub3B0IHx8IGZpZWxkLnJlcSkge1xuICAgICAgICByZXR1cm4gdGFyZ2V0W2xvY2FsTmFtZV0gIT09IHZvaWQgMDtcbiAgICAgIH1cbiAgICAgIGlmIChmaWVsZC5raW5kID09IFwiZW51bVwiKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXRbbG9jYWxOYW1lXSAhPT0gZmllbGQuVC52YWx1ZXNbMF0ubm87XG4gICAgICB9XG4gICAgICByZXR1cm4gIWlzU2NhbGFyWmVyb1ZhbHVlKGZpZWxkLlQsIHRhcmdldFtsb2NhbE5hbWVdKTtcbiAgICBjYXNlIFwibWVzc2FnZVwiOlxuICAgICAgcmV0dXJuIHRhcmdldFtsb2NhbE5hbWVdICE9PSB2b2lkIDA7XG4gICAgY2FzZSBcIm1hcFwiOlxuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRhcmdldFtsb2NhbE5hbWVdKS5sZW5ndGggPiAwO1xuICB9XG59XG5mdW5jdGlvbiBjbGVhckZpZWxkKGZpZWxkLCB0YXJnZXQpIHtcbiAgY29uc3QgbG9jYWxOYW1lID0gZmllbGQubG9jYWxOYW1lO1xuICBjb25zdCBpbXBsaWNpdFByZXNlbmNlID0gIWZpZWxkLm9wdCAmJiAhZmllbGQucmVxO1xuICBpZiAoZmllbGQucmVwZWF0ZWQpIHtcbiAgICB0YXJnZXRbbG9jYWxOYW1lXSA9IFtdO1xuICB9IGVsc2UgaWYgKGZpZWxkLm9uZW9mKSB7XG4gICAgdGFyZ2V0W2ZpZWxkLm9uZW9mLmxvY2FsTmFtZV0gPSB7IGNhc2U6IHZvaWQgMCB9O1xuICB9IGVsc2Uge1xuICAgIHN3aXRjaCAoZmllbGQua2luZCkge1xuICAgICAgY2FzZSBcIm1hcFwiOlxuICAgICAgICB0YXJnZXRbbG9jYWxOYW1lXSA9IHt9O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJlbnVtXCI6XG4gICAgICAgIHRhcmdldFtsb2NhbE5hbWVdID0gaW1wbGljaXRQcmVzZW5jZSA/IGZpZWxkLlQudmFsdWVzWzBdLm5vIDogdm9pZCAwO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJzY2FsYXJcIjpcbiAgICAgICAgdGFyZ2V0W2xvY2FsTmFtZV0gPSBpbXBsaWNpdFByZXNlbmNlID8gc2NhbGFyWmVyb1ZhbHVlKGZpZWxkLlQsIGZpZWxkLkwpIDogdm9pZCAwO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJtZXNzYWdlXCI6XG4gICAgICAgIHRhcmdldFtsb2NhbE5hbWVdID0gdm9pZCAwO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbn1cblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0BidWZidWlsZC9wcm90b2J1Zi9kaXN0L2VzbS9pcy1tZXNzYWdlLmpzXG5mdW5jdGlvbiBpc01lc3NhZ2UoYXJnLCB0eXBlKSB7XG4gIGlmIChhcmcgPT09IG51bGwgfHwgdHlwZW9mIGFyZyAhPSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICghT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTWVzc2FnZS5wcm90b3R5cGUpLmV2ZXJ5KChtKSA9PiBtIGluIGFyZyAmJiB0eXBlb2YgYXJnW21dID09IFwiZnVuY3Rpb25cIikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgYWN0dWFsVHlwZSA9IGFyZy5nZXRUeXBlKCk7XG4gIGlmIChhY3R1YWxUeXBlID09PSBudWxsIHx8IHR5cGVvZiBhY3R1YWxUeXBlICE9IFwiZnVuY3Rpb25cIiB8fCAhKFwidHlwZU5hbWVcIiBpbiBhY3R1YWxUeXBlKSB8fCB0eXBlb2YgYWN0dWFsVHlwZS50eXBlTmFtZSAhPSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0eXBlID09PSB2b2lkIDAgPyB0cnVlIDogYWN0dWFsVHlwZS50eXBlTmFtZSA9PSB0eXBlLnR5cGVOYW1lO1xufVxuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvQGJ1ZmJ1aWxkL3Byb3RvYnVmL2Rpc3QvZXNtL3ByaXZhdGUvZmllbGQtd3JhcHBlci5qc1xuZnVuY3Rpb24gd3JhcEZpZWxkKHR5cGUsIHZhbHVlKSB7XG4gIGlmIChpc01lc3NhZ2UodmFsdWUpIHx8ICF0eXBlLmZpZWxkV3JhcHBlcikge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICByZXR1cm4gdHlwZS5maWVsZFdyYXBwZXIud3JhcEZpZWxkKHZhbHVlKTtcbn1cbih7XG4gIFwiZ29vZ2xlLnByb3RvYnVmLkRvdWJsZVZhbHVlXCI6IFNjYWxhclR5cGUuRE9VQkxFLFxuICBcImdvb2dsZS5wcm90b2J1Zi5GbG9hdFZhbHVlXCI6IFNjYWxhclR5cGUuRkxPQVQsXG4gIFwiZ29vZ2xlLnByb3RvYnVmLkludDY0VmFsdWVcIjogU2NhbGFyVHlwZS5JTlQ2NCxcbiAgXCJnb29nbGUucHJvdG9idWYuVUludDY0VmFsdWVcIjogU2NhbGFyVHlwZS5VSU5UNjQsXG4gIFwiZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWVcIjogU2NhbGFyVHlwZS5JTlQzMixcbiAgXCJnb29nbGUucHJvdG9idWYuVUludDMyVmFsdWVcIjogU2NhbGFyVHlwZS5VSU5UMzIsXG4gIFwiZ29vZ2xlLnByb3RvYnVmLkJvb2xWYWx1ZVwiOiBTY2FsYXJUeXBlLkJPT0wsXG4gIFwiZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlXCI6IFNjYWxhclR5cGUuU1RSSU5HLFxuICBcImdvb2dsZS5wcm90b2J1Zi5CeXRlc1ZhbHVlXCI6IFNjYWxhclR5cGUuQllURVNcbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvQGJ1ZmJ1aWxkL3Byb3RvYnVmL2Rpc3QvZXNtL3ByaXZhdGUvanNvbi1mb3JtYXQuanNcbnZhciBqc29uUmVhZERlZmF1bHRzID0ge1xuICBpZ25vcmVVbmtub3duRmllbGRzOiBmYWxzZVxufTtcbnZhciBqc29uV3JpdGVEZWZhdWx0cyA9IHtcbiAgZW1pdERlZmF1bHRWYWx1ZXM6IGZhbHNlLFxuICBlbnVtQXNJbnRlZ2VyOiBmYWxzZSxcbiAgdXNlUHJvdG9GaWVsZE5hbWU6IGZhbHNlLFxuICBwcmV0dHlTcGFjZXM6IDBcbn07XG5mdW5jdGlvbiBtYWtlUmVhZE9wdGlvbnMob3B0aW9ucykge1xuICByZXR1cm4gb3B0aW9ucyA/IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwganNvblJlYWREZWZhdWx0cyksIG9wdGlvbnMpIDoganNvblJlYWREZWZhdWx0cztcbn1cbmZ1bmN0aW9uIG1ha2VXcml0ZU9wdGlvbnMob3B0aW9ucykge1xuICByZXR1cm4gb3B0aW9ucyA/IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwganNvbldyaXRlRGVmYXVsdHMpLCBvcHRpb25zKSA6IGpzb25Xcml0ZURlZmF1bHRzO1xufVxudmFyIHRva2VuTnVsbCA9IFN5bWJvbCgpO1xudmFyIHRva2VuSWdub3JlZFVua25vd25FbnVtID0gU3ltYm9sKCk7XG5mdW5jdGlvbiBtYWtlSnNvbkZvcm1hdCgpIHtcbiAgcmV0dXJuIHtcbiAgICBtYWtlUmVhZE9wdGlvbnMsXG4gICAgbWFrZVdyaXRlT3B0aW9ucyxcbiAgICByZWFkTWVzc2FnZSh0eXBlLCBqc29uLCBvcHRpb25zLCBtZXNzYWdlKSB7XG4gICAgICBpZiAoanNvbiA9PSBudWxsIHx8IEFycmF5LmlzQXJyYXkoanNvbikgfHwgdHlwZW9mIGpzb24gIT0gXCJvYmplY3RcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGNhbm5vdCBkZWNvZGUgbWVzc2FnZSAke3R5cGUudHlwZU5hbWV9IGZyb20gSlNPTjogJHtkZWJ1Z0pzb25WYWx1ZShqc29uKX1gKTtcbiAgICAgIH1cbiAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlICE9PSBudWxsICYmIG1lc3NhZ2UgIT09IHZvaWQgMCA/IG1lc3NhZ2UgOiBuZXcgdHlwZSgpO1xuICAgICAgY29uc3Qgb25lb2ZTZWVuID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICAgIGNvbnN0IHJlZ2lzdHJ5ID0gb3B0aW9ucy50eXBlUmVnaXN0cnk7XG4gICAgICBmb3IgKGNvbnN0IFtqc29uS2V5LCBqc29uVmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGpzb24pKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkID0gdHlwZS5maWVsZHMuZmluZEpzb25OYW1lKGpzb25LZXkpO1xuICAgICAgICBpZiAoZmllbGQpIHtcbiAgICAgICAgICBpZiAoZmllbGQub25lb2YpIHtcbiAgICAgICAgICAgIGlmIChqc29uVmFsdWUgPT09IG51bGwgJiYgZmllbGQua2luZCA9PSBcInNjYWxhclwiKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2VlbiA9IG9uZW9mU2Vlbi5nZXQoZmllbGQub25lb2YpO1xuICAgICAgICAgICAgaWYgKHNlZW4gIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGNhbm5vdCBkZWNvZGUgbWVzc2FnZSAke3R5cGUudHlwZU5hbWV9IGZyb20gSlNPTjogbXVsdGlwbGUga2V5cyBmb3Igb25lb2YgXCIke2ZpZWxkLm9uZW9mLm5hbWV9XCIgcHJlc2VudDogXCIke3NlZW59XCIsIFwiJHtqc29uS2V5fVwiYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvbmVvZlNlZW4uc2V0KGZpZWxkLm9uZW9mLCBqc29uS2V5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVhZEZpZWxkKG1lc3NhZ2UsIGpzb25WYWx1ZSwgZmllbGQsIG9wdGlvbnMsIHR5cGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgICAgICAgIGlmICgocmVnaXN0cnkgPT09IG51bGwgfHwgcmVnaXN0cnkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlZ2lzdHJ5LmZpbmRFeHRlbnNpb24pICYmIGpzb25LZXkuc3RhcnRzV2l0aChcIltcIikgJiYganNvbktleS5lbmRzV2l0aChcIl1cIikpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4dCA9IHJlZ2lzdHJ5LmZpbmRFeHRlbnNpb24oanNvbktleS5zdWJzdHJpbmcoMSwganNvbktleS5sZW5ndGggLSAxKSk7XG4gICAgICAgICAgICBpZiAoZXh0ICYmIGV4dC5leHRlbmRlZS50eXBlTmFtZSA9PSB0eXBlLnR5cGVOYW1lKSB7XG4gICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgY29uc3QgW2NvbnRhaW5lciwgZ2V0XSA9IGNyZWF0ZUV4dGVuc2lvbkNvbnRhaW5lcihleHQpO1xuICAgICAgICAgICAgICByZWFkRmllbGQoY29udGFpbmVyLCBqc29uVmFsdWUsIGV4dC5maWVsZCwgb3B0aW9ucywgZXh0KTtcbiAgICAgICAgICAgICAgc2V0RXh0ZW5zaW9uKG1lc3NhZ2UsIGV4dCwgZ2V0KCksIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWZvdW5kICYmICFvcHRpb25zLmlnbm9yZVVua25vd25GaWVsZHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgY2Fubm90IGRlY29kZSBtZXNzYWdlICR7dHlwZS50eXBlTmFtZX0gZnJvbSBKU09OOiBrZXkgXCIke2pzb25LZXl9XCIgaXMgdW5rbm93bmApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfSxcbiAgICB3cml0ZU1lc3NhZ2UobWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgY29uc3QgdHlwZSA9IG1lc3NhZ2UuZ2V0VHlwZSgpO1xuICAgICAgY29uc3QganNvbiA9IHt9O1xuICAgICAgbGV0IGZpZWxkO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yIChmaWVsZCBvZiB0eXBlLmZpZWxkcy5ieU51bWJlcigpKSB7XG4gICAgICAgICAgaWYgKCFpc0ZpZWxkU2V0KGZpZWxkLCBtZXNzYWdlKSkge1xuICAgICAgICAgICAgaWYgKGZpZWxkLnJlcSkge1xuICAgICAgICAgICAgICB0aHJvdyBgcmVxdWlyZWQgZmllbGQgbm90IHNldGA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMuZW1pdERlZmF1bHRWYWx1ZXMpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNhbkVtaXRGaWVsZERlZmF1bHRWYWx1ZShmaWVsZCkpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHZhbHVlID0gZmllbGQub25lb2YgPyBtZXNzYWdlW2ZpZWxkLm9uZW9mLmxvY2FsTmFtZV0udmFsdWUgOiBtZXNzYWdlW2ZpZWxkLmxvY2FsTmFtZV07XG4gICAgICAgICAgY29uc3QganNvblZhbHVlID0gd3JpdGVGaWVsZChmaWVsZCwgdmFsdWUsIG9wdGlvbnMpO1xuICAgICAgICAgIGlmIChqc29uVmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAganNvbltvcHRpb25zLnVzZVByb3RvRmllbGROYW1lID8gZmllbGQubmFtZSA6IGZpZWxkLmpzb25OYW1lXSA9IGpzb25WYWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVnaXN0cnkgPSBvcHRpb25zLnR5cGVSZWdpc3RyeTtcbiAgICAgICAgaWYgKHJlZ2lzdHJ5ID09PSBudWxsIHx8IHJlZ2lzdHJ5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZWdpc3RyeS5maW5kRXh0ZW5zaW9uRm9yKSB7XG4gICAgICAgICAgZm9yIChjb25zdCB1ZiBvZiB0eXBlLnJ1bnRpbWUuYmluLmxpc3RVbmtub3duRmllbGRzKG1lc3NhZ2UpKSB7XG4gICAgICAgICAgICBjb25zdCBleHQgPSByZWdpc3RyeS5maW5kRXh0ZW5zaW9uRm9yKHR5cGUudHlwZU5hbWUsIHVmLm5vKTtcbiAgICAgICAgICAgIGlmIChleHQgJiYgaGFzRXh0ZW5zaW9uKG1lc3NhZ2UsIGV4dCkpIHtcbiAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBnZXRFeHRlbnNpb24obWVzc2FnZSwgZXh0LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgY29uc3QganNvblZhbHVlID0gd3JpdGVGaWVsZChleHQuZmllbGQsIHZhbHVlLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgaWYgKGpzb25WYWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAganNvbltleHQuZmllbGQuanNvbk5hbWVdID0ganNvblZhbHVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnN0IG0gPSBmaWVsZCA/IGBjYW5ub3QgZW5jb2RlIGZpZWxkICR7dHlwZS50eXBlTmFtZX0uJHtmaWVsZC5uYW1lfSB0byBKU09OYCA6IGBjYW5ub3QgZW5jb2RlIG1lc3NhZ2UgJHt0eXBlLnR5cGVOYW1lfSB0byBKU09OYDtcbiAgICAgICAgY29uc3QgciA9IGUgaW5zdGFuY2VvZiBFcnJvciA/IGUubWVzc2FnZSA6IFN0cmluZyhlKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG0gKyAoci5sZW5ndGggPiAwID8gYDogJHtyfWAgOiBcIlwiKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4ganNvbjtcbiAgICB9LFxuICAgIHJlYWRTY2FsYXIodHlwZSwganNvbiwgbG9uZ1R5cGUpIHtcbiAgICAgIHJldHVybiByZWFkU2NhbGFyKHR5cGUsIGpzb24sIGxvbmdUeXBlICE9PSBudWxsICYmIGxvbmdUeXBlICE9PSB2b2lkIDAgPyBsb25nVHlwZSA6IExvbmdUeXBlLkJJR0lOVCwgdHJ1ZSk7XG4gICAgfSxcbiAgICB3cml0ZVNjYWxhcih0eXBlLCB2YWx1ZSwgZW1pdERlZmF1bHRWYWx1ZXMpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICB9XG4gICAgICBpZiAoZW1pdERlZmF1bHRWYWx1ZXMgfHwgaXNTY2FsYXJaZXJvVmFsdWUodHlwZSwgdmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB3cml0ZVNjYWxhcih0eXBlLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH0sXG4gICAgZGVidWc6IGRlYnVnSnNvblZhbHVlXG4gIH07XG59XG5mdW5jdGlvbiBkZWJ1Z0pzb25WYWx1ZShqc29uKSB7XG4gIGlmIChqc29uID09PSBudWxsKSB7XG4gICAgcmV0dXJuIFwibnVsbFwiO1xuICB9XG4gIHN3aXRjaCAodHlwZW9mIGpzb24pIHtcbiAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShqc29uKSA/IFwiYXJyYXlcIiA6IFwib2JqZWN0XCI7XG4gICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgcmV0dXJuIGpzb24ubGVuZ3RoID4gMTAwID8gXCJzdHJpbmdcIiA6IGBcIiR7anNvbi5zcGxpdCgnXCInKS5qb2luKCdcXFxcXCInKX1cImA7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBTdHJpbmcoanNvbik7XG4gIH1cbn1cbmZ1bmN0aW9uIHJlYWRGaWVsZCh0YXJnZXQsIGpzb25WYWx1ZSwgZmllbGQsIG9wdGlvbnMsIHBhcmVudFR5cGUpIHtcbiAgbGV0IGxvY2FsTmFtZSA9IGZpZWxkLmxvY2FsTmFtZTtcbiAgaWYgKGZpZWxkLnJlcGVhdGVkKSB7XG4gICAgYXNzZXJ0KGZpZWxkLmtpbmQgIT0gXCJtYXBcIik7XG4gICAgaWYgKGpzb25WYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoanNvblZhbHVlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBjYW5ub3QgZGVjb2RlIGZpZWxkICR7cGFyZW50VHlwZS50eXBlTmFtZX0uJHtmaWVsZC5uYW1lfSBmcm9tIEpTT046ICR7ZGVidWdKc29uVmFsdWUoanNvblZhbHVlKX1gKTtcbiAgICB9XG4gICAgY29uc3QgdGFyZ2V0QXJyYXkgPSB0YXJnZXRbbG9jYWxOYW1lXTtcbiAgICBmb3IgKGNvbnN0IGpzb25JdGVtIG9mIGpzb25WYWx1ZSkge1xuICAgICAgaWYgKGpzb25JdGVtID09PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgY2Fubm90IGRlY29kZSBmaWVsZCAke3BhcmVudFR5cGUudHlwZU5hbWV9LiR7ZmllbGQubmFtZX0gZnJvbSBKU09OOiAke2RlYnVnSnNvblZhbHVlKGpzb25JdGVtKX1gKTtcbiAgICAgIH1cbiAgICAgIHN3aXRjaCAoZmllbGQua2luZCkge1xuICAgICAgICBjYXNlIFwibWVzc2FnZVwiOlxuICAgICAgICAgIHRhcmdldEFycmF5LnB1c2goZmllbGQuVC5mcm9tSnNvbihqc29uSXRlbSwgb3B0aW9ucykpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiZW51bVwiOlxuICAgICAgICAgIGNvbnN0IGVudW1WYWx1ZSA9IHJlYWRFbnVtKGZpZWxkLlQsIGpzb25JdGVtLCBvcHRpb25zLmlnbm9yZVVua25vd25GaWVsZHMsIHRydWUpO1xuICAgICAgICAgIGlmIChlbnVtVmFsdWUgIT09IHRva2VuSWdub3JlZFVua25vd25FbnVtKSB7XG4gICAgICAgICAgICB0YXJnZXRBcnJheS5wdXNoKGVudW1WYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwic2NhbGFyXCI6XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRhcmdldEFycmF5LnB1c2gocmVhZFNjYWxhcihmaWVsZC5ULCBqc29uSXRlbSwgZmllbGQuTCwgdHJ1ZSkpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGxldCBtID0gYGNhbm5vdCBkZWNvZGUgZmllbGQgJHtwYXJlbnRUeXBlLnR5cGVOYW1lfS4ke2ZpZWxkLm5hbWV9IGZyb20gSlNPTjogJHtkZWJ1Z0pzb25WYWx1ZShqc29uSXRlbSl9YDtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5tZXNzYWdlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgbSArPSBgOiAke2UubWVzc2FnZX1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoZmllbGQua2luZCA9PSBcIm1hcFwiKSB7XG4gICAgaWYgKGpzb25WYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGpzb25WYWx1ZSAhPSBcIm9iamVjdFwiIHx8IEFycmF5LmlzQXJyYXkoanNvblZhbHVlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBjYW5ub3QgZGVjb2RlIGZpZWxkICR7cGFyZW50VHlwZS50eXBlTmFtZX0uJHtmaWVsZC5uYW1lfSBmcm9tIEpTT046ICR7ZGVidWdKc29uVmFsdWUoanNvblZhbHVlKX1gKTtcbiAgICB9XG4gICAgY29uc3QgdGFyZ2V0TWFwID0gdGFyZ2V0W2xvY2FsTmFtZV07XG4gICAgZm9yIChjb25zdCBbanNvbk1hcEtleSwganNvbk1hcFZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhqc29uVmFsdWUpKSB7XG4gICAgICBpZiAoanNvbk1hcFZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgY2Fubm90IGRlY29kZSBmaWVsZCAke3BhcmVudFR5cGUudHlwZU5hbWV9LiR7ZmllbGQubmFtZX0gZnJvbSBKU09OOiBtYXAgdmFsdWUgbnVsbGApO1xuICAgICAgfVxuICAgICAgbGV0IGtleTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGtleSA9IHJlYWRNYXBLZXkoZmllbGQuSywganNvbk1hcEtleSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGxldCBtID0gYGNhbm5vdCBkZWNvZGUgbWFwIGtleSBmb3IgZmllbGQgJHtwYXJlbnRUeXBlLnR5cGVOYW1lfS4ke2ZpZWxkLm5hbWV9IGZyb20gSlNPTjogJHtkZWJ1Z0pzb25WYWx1ZShqc29uVmFsdWUpfWA7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5tZXNzYWdlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBtICs9IGA6ICR7ZS5tZXNzYWdlfWA7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG0pO1xuICAgICAgfVxuICAgICAgc3dpdGNoIChmaWVsZC5WLmtpbmQpIHtcbiAgICAgICAgY2FzZSBcIm1lc3NhZ2VcIjpcbiAgICAgICAgICB0YXJnZXRNYXBba2V5XSA9IGZpZWxkLlYuVC5mcm9tSnNvbihqc29uTWFwVmFsdWUsIG9wdGlvbnMpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiZW51bVwiOlxuICAgICAgICAgIGNvbnN0IGVudW1WYWx1ZSA9IHJlYWRFbnVtKGZpZWxkLlYuVCwganNvbk1hcFZhbHVlLCBvcHRpb25zLmlnbm9yZVVua25vd25GaWVsZHMsIHRydWUpO1xuICAgICAgICAgIGlmIChlbnVtVmFsdWUgIT09IHRva2VuSWdub3JlZFVua25vd25FbnVtKSB7XG4gICAgICAgICAgICB0YXJnZXRNYXBba2V5XSA9IGVudW1WYWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJzY2FsYXJcIjpcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGFyZ2V0TWFwW2tleV0gPSByZWFkU2NhbGFyKGZpZWxkLlYuVCwganNvbk1hcFZhbHVlLCBMb25nVHlwZS5CSUdJTlQsIHRydWUpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGxldCBtID0gYGNhbm5vdCBkZWNvZGUgbWFwIHZhbHVlIGZvciBmaWVsZCAke3BhcmVudFR5cGUudHlwZU5hbWV9LiR7ZmllbGQubmFtZX0gZnJvbSBKU09OOiAke2RlYnVnSnNvblZhbHVlKGpzb25WYWx1ZSl9YDtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5tZXNzYWdlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgbSArPSBgOiAke2UubWVzc2FnZX1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGZpZWxkLm9uZW9mKSB7XG4gICAgICB0YXJnZXQgPSB0YXJnZXRbZmllbGQub25lb2YubG9jYWxOYW1lXSA9IHsgY2FzZTogbG9jYWxOYW1lIH07XG4gICAgICBsb2NhbE5hbWUgPSBcInZhbHVlXCI7XG4gICAgfVxuICAgIHN3aXRjaCAoZmllbGQua2luZCkge1xuICAgICAgY2FzZSBcIm1lc3NhZ2VcIjpcbiAgICAgICAgY29uc3QgbWVzc2FnZVR5cGUgPSBmaWVsZC5UO1xuICAgICAgICBpZiAoanNvblZhbHVlID09PSBudWxsICYmIG1lc3NhZ2VUeXBlLnR5cGVOYW1lICE9IFwiZ29vZ2xlLnByb3RvYnVmLlZhbHVlXCIpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN1cnJlbnRWYWx1ZSA9IHRhcmdldFtsb2NhbE5hbWVdO1xuICAgICAgICBpZiAoaXNNZXNzYWdlKGN1cnJlbnRWYWx1ZSkpIHtcbiAgICAgICAgICBjdXJyZW50VmFsdWUuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0YXJnZXRbbG9jYWxOYW1lXSA9IGN1cnJlbnRWYWx1ZSA9IG1lc3NhZ2VUeXBlLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgaWYgKG1lc3NhZ2VUeXBlLmZpZWxkV3JhcHBlciAmJiAhZmllbGQub25lb2YpIHtcbiAgICAgICAgICAgIHRhcmdldFtsb2NhbE5hbWVdID0gbWVzc2FnZVR5cGUuZmllbGRXcmFwcGVyLnVud3JhcEZpZWxkKGN1cnJlbnRWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImVudW1cIjpcbiAgICAgICAgY29uc3QgZW51bVZhbHVlID0gcmVhZEVudW0oZmllbGQuVCwganNvblZhbHVlLCBvcHRpb25zLmlnbm9yZVVua25vd25GaWVsZHMsIGZhbHNlKTtcbiAgICAgICAgc3dpdGNoIChlbnVtVmFsdWUpIHtcbiAgICAgICAgICBjYXNlIHRva2VuTnVsbDpcbiAgICAgICAgICAgIGNsZWFyRmllbGQoZmllbGQsIHRhcmdldCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIHRva2VuSWdub3JlZFVua25vd25FbnVtOlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRhcmdldFtsb2NhbE5hbWVdID0gZW51bVZhbHVlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwic2NhbGFyXCI6XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3Qgc2NhbGFyVmFsdWUgPSByZWFkU2NhbGFyKGZpZWxkLlQsIGpzb25WYWx1ZSwgZmllbGQuTCwgZmFsc2UpO1xuICAgICAgICAgIHN3aXRjaCAoc2NhbGFyVmFsdWUpIHtcbiAgICAgICAgICAgIGNhc2UgdG9rZW5OdWxsOlxuICAgICAgICAgICAgICBjbGVhckZpZWxkKGZpZWxkLCB0YXJnZXQpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIHRhcmdldFtsb2NhbE5hbWVdID0gc2NhbGFyVmFsdWU7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGxldCBtID0gYGNhbm5vdCBkZWNvZGUgZmllbGQgJHtwYXJlbnRUeXBlLnR5cGVOYW1lfS4ke2ZpZWxkLm5hbWV9IGZyb20gSlNPTjogJHtkZWJ1Z0pzb25WYWx1ZShqc29uVmFsdWUpfWA7XG4gICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBFcnJvciAmJiBlLm1lc3NhZ2UubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbSArPSBgOiAke2UubWVzc2FnZX1gO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiByZWFkTWFwS2V5KHR5cGUsIGpzb24pIHtcbiAgaWYgKHR5cGUgPT09IFNjYWxhclR5cGUuQk9PTCkge1xuICAgIHN3aXRjaCAoanNvbikge1xuICAgICAgY2FzZSBcInRydWVcIjpcbiAgICAgICAganNvbiA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImZhbHNlXCI6XG4gICAgICAgIGpzb24gPSBmYWxzZTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiByZWFkU2NhbGFyKHR5cGUsIGpzb24sIExvbmdUeXBlLkJJR0lOVCwgdHJ1ZSkudG9TdHJpbmcoKTtcbn1cbmZ1bmN0aW9uIHJlYWRTY2FsYXIodHlwZSwganNvbiwgbG9uZ1R5cGUsIG51bGxBc1plcm9WYWx1ZSkge1xuICBpZiAoanNvbiA9PT0gbnVsbCkge1xuICAgIGlmIChudWxsQXNaZXJvVmFsdWUpIHtcbiAgICAgIHJldHVybiBzY2FsYXJaZXJvVmFsdWUodHlwZSwgbG9uZ1R5cGUpO1xuICAgIH1cbiAgICByZXR1cm4gdG9rZW5OdWxsO1xuICB9XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIC8vIGZsb2F0LCBkb3VibGU6IEpTT04gdmFsdWUgd2lsbCBiZSBhIG51bWJlciBvciBvbmUgb2YgdGhlIHNwZWNpYWwgc3RyaW5nIHZhbHVlcyBcIk5hTlwiLCBcIkluZmluaXR5XCIsIGFuZCBcIi1JbmZpbml0eVwiLlxuICAgIC8vIEVpdGhlciBudW1iZXJzIG9yIHN0cmluZ3MgYXJlIGFjY2VwdGVkLiBFeHBvbmVudCBub3RhdGlvbiBpcyBhbHNvIGFjY2VwdGVkLlxuICAgIGNhc2UgU2NhbGFyVHlwZS5ET1VCTEU6XG4gICAgY2FzZSBTY2FsYXJUeXBlLkZMT0FUOlxuICAgICAgaWYgKGpzb24gPT09IFwiTmFOXCIpXG4gICAgICAgIHJldHVybiBOdW1iZXIuTmFOO1xuICAgICAgaWYgKGpzb24gPT09IFwiSW5maW5pdHlcIilcbiAgICAgICAgcmV0dXJuIE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICAgIGlmIChqc29uID09PSBcIi1JbmZpbml0eVwiKVxuICAgICAgICByZXR1cm4gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZO1xuICAgICAgaWYgKGpzb24gPT09IFwiXCIpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGpzb24gPT0gXCJzdHJpbmdcIiAmJiBqc29uLnRyaW0oKS5sZW5ndGggIT09IGpzb24ubGVuZ3RoKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBqc29uICE9IFwic3RyaW5nXCIgJiYgdHlwZW9mIGpzb24gIT0gXCJudW1iZXJcIikge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNvbnN0IGZsb2F0ID0gTnVtYmVyKGpzb24pO1xuICAgICAgaWYgKE51bWJlci5pc05hTihmbG9hdCkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShmbG9hdCkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAodHlwZSA9PSBTY2FsYXJUeXBlLkZMT0FUKVxuICAgICAgICBhc3NlcnRGbG9hdDMyKGZsb2F0KTtcbiAgICAgIHJldHVybiBmbG9hdDtcbiAgICAvLyBpbnQzMiwgZml4ZWQzMiwgdWludDMyOiBKU09OIHZhbHVlIHdpbGwgYmUgYSBkZWNpbWFsIG51bWJlci4gRWl0aGVyIG51bWJlcnMgb3Igc3RyaW5ncyBhcmUgYWNjZXB0ZWQuXG4gICAgY2FzZSBTY2FsYXJUeXBlLklOVDMyOlxuICAgIGNhc2UgU2NhbGFyVHlwZS5GSVhFRDMyOlxuICAgIGNhc2UgU2NhbGFyVHlwZS5TRklYRUQzMjpcbiAgICBjYXNlIFNjYWxhclR5cGUuU0lOVDMyOlxuICAgIGNhc2UgU2NhbGFyVHlwZS5VSU5UMzI6XG4gICAgICBsZXQgaW50MzI7XG4gICAgICBpZiAodHlwZW9mIGpzb24gPT0gXCJudW1iZXJcIilcbiAgICAgICAgaW50MzIgPSBqc29uO1xuICAgICAgZWxzZSBpZiAodHlwZW9mIGpzb24gPT0gXCJzdHJpbmdcIiAmJiBqc29uLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKGpzb24udHJpbSgpLmxlbmd0aCA9PT0ganNvbi5sZW5ndGgpXG4gICAgICAgICAgaW50MzIgPSBOdW1iZXIoanNvbik7XG4gICAgICB9XG4gICAgICBpZiAoaW50MzIgPT09IHZvaWQgMClcbiAgICAgICAgYnJlYWs7XG4gICAgICBpZiAodHlwZSA9PSBTY2FsYXJUeXBlLlVJTlQzMiB8fCB0eXBlID09IFNjYWxhclR5cGUuRklYRUQzMilcbiAgICAgICAgYXNzZXJ0VUludDMyKGludDMyKTtcbiAgICAgIGVsc2VcbiAgICAgICAgYXNzZXJ0SW50MzIoaW50MzIpO1xuICAgICAgcmV0dXJuIGludDMyO1xuICAgIC8vIGludDY0LCBmaXhlZDY0LCB1aW50NjQ6IEpTT04gdmFsdWUgd2lsbCBiZSBhIGRlY2ltYWwgc3RyaW5nLiBFaXRoZXIgbnVtYmVycyBvciBzdHJpbmdzIGFyZSBhY2NlcHRlZC5cbiAgICBjYXNlIFNjYWxhclR5cGUuSU5UNjQ6XG4gICAgY2FzZSBTY2FsYXJUeXBlLlNGSVhFRDY0OlxuICAgIGNhc2UgU2NhbGFyVHlwZS5TSU5UNjQ6XG4gICAgICBpZiAodHlwZW9mIGpzb24gIT0gXCJudW1iZXJcIiAmJiB0eXBlb2YganNvbiAhPSBcInN0cmluZ1wiKVxuICAgICAgICBicmVhaztcbiAgICAgIGNvbnN0IGxvbmcgPSBwcm90b0ludDY0LnBhcnNlKGpzb24pO1xuICAgICAgcmV0dXJuIGxvbmdUeXBlID8gbG9uZy50b1N0cmluZygpIDogbG9uZztcbiAgICBjYXNlIFNjYWxhclR5cGUuRklYRUQ2NDpcbiAgICBjYXNlIFNjYWxhclR5cGUuVUlOVDY0OlxuICAgICAgaWYgKHR5cGVvZiBqc29uICE9IFwibnVtYmVyXCIgJiYgdHlwZW9mIGpzb24gIT0gXCJzdHJpbmdcIilcbiAgICAgICAgYnJlYWs7XG4gICAgICBjb25zdCB1TG9uZyA9IHByb3RvSW50NjQudVBhcnNlKGpzb24pO1xuICAgICAgcmV0dXJuIGxvbmdUeXBlID8gdUxvbmcudG9TdHJpbmcoKSA6IHVMb25nO1xuICAgIC8vIGJvb2w6XG4gICAgY2FzZSBTY2FsYXJUeXBlLkJPT0w6XG4gICAgICBpZiAodHlwZW9mIGpzb24gIT09IFwiYm9vbGVhblwiKVxuICAgICAgICBicmVhaztcbiAgICAgIHJldHVybiBqc29uO1xuICAgIC8vIHN0cmluZzpcbiAgICBjYXNlIFNjYWxhclR5cGUuU1RSSU5HOlxuICAgICAgaWYgKHR5cGVvZiBqc29uICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KGpzb24pO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIFVURjhcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4ganNvbjtcbiAgICAvLyBieXRlczogSlNPTiB2YWx1ZSB3aWxsIGJlIHRoZSBkYXRhIGVuY29kZWQgYXMgYSBzdHJpbmcgdXNpbmcgc3RhbmRhcmQgYmFzZTY0IGVuY29kaW5nIHdpdGggcGFkZGluZ3MuXG4gICAgLy8gRWl0aGVyIHN0YW5kYXJkIG9yIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZyB3aXRoL3dpdGhvdXQgcGFkZGluZ3MgYXJlIGFjY2VwdGVkLlxuICAgIGNhc2UgU2NhbGFyVHlwZS5CWVRFUzpcbiAgICAgIGlmIChqc29uID09PSBcIlwiKVxuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoMCk7XG4gICAgICBpZiAodHlwZW9mIGpzb24gIT09IFwic3RyaW5nXCIpXG4gICAgICAgIGJyZWFrO1xuICAgICAgcmV0dXJuIHByb3RvQmFzZTY0LmRlYyhqc29uKTtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoKTtcbn1cbmZ1bmN0aW9uIHJlYWRFbnVtKHR5cGUsIGpzb24sIGlnbm9yZVVua25vd25GaWVsZHMsIG51bGxBc1plcm9WYWx1ZSkge1xuICBpZiAoanNvbiA9PT0gbnVsbCkge1xuICAgIGlmICh0eXBlLnR5cGVOYW1lID09IFwiZ29vZ2xlLnByb3RvYnVmLk51bGxWYWx1ZVwiKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGxBc1plcm9WYWx1ZSA/IHR5cGUudmFsdWVzWzBdLm5vIDogdG9rZW5OdWxsO1xuICB9XG4gIHN3aXRjaCAodHlwZW9mIGpzb24pIHtcbiAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcihqc29uKSkge1xuICAgICAgICByZXR1cm4ganNvbjtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgIGNvbnN0IHZhbHVlID0gdHlwZS5maW5kTmFtZShqc29uKTtcbiAgICAgIGlmICh2YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS5ubztcbiAgICAgIH1cbiAgICAgIGlmIChpZ25vcmVVbmtub3duRmllbGRzKSB7XG4gICAgICAgIHJldHVybiB0b2tlbklnbm9yZWRVbmtub3duRW51bTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihgY2Fubm90IGRlY29kZSBlbnVtICR7dHlwZS50eXBlTmFtZX0gZnJvbSBKU09OOiAke2RlYnVnSnNvblZhbHVlKGpzb24pfWApO1xufVxuZnVuY3Rpb24gY2FuRW1pdEZpZWxkRGVmYXVsdFZhbHVlKGZpZWxkKSB7XG4gIGlmIChmaWVsZC5yZXBlYXRlZCB8fCBmaWVsZC5raW5kID09IFwibWFwXCIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoZmllbGQub25lb2YpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGZpZWxkLmtpbmQgPT0gXCJtZXNzYWdlXCIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGZpZWxkLm9wdCB8fCBmaWVsZC5yZXEpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiB3cml0ZUZpZWxkKGZpZWxkLCB2YWx1ZSwgb3B0aW9ucykge1xuICBpZiAoZmllbGQua2luZCA9PSBcIm1hcFwiKSB7XG4gICAgYXNzZXJ0KHR5cGVvZiB2YWx1ZSA9PSBcIm9iamVjdFwiICYmIHZhbHVlICE9IG51bGwpO1xuICAgIGNvbnN0IGpzb25PYmogPSB7fTtcbiAgICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXModmFsdWUpO1xuICAgIHN3aXRjaCAoZmllbGQuVi5raW5kKSB7XG4gICAgICBjYXNlIFwic2NhbGFyXCI6XG4gICAgICAgIGZvciAoY29uc3QgW2VudHJ5S2V5LCBlbnRyeVZhbHVlXSBvZiBlbnRyaWVzKSB7XG4gICAgICAgICAganNvbk9ialtlbnRyeUtleS50b1N0cmluZygpXSA9IHdyaXRlU2NhbGFyKGZpZWxkLlYuVCwgZW50cnlWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwibWVzc2FnZVwiOlxuICAgICAgICBmb3IgKGNvbnN0IFtlbnRyeUtleSwgZW50cnlWYWx1ZV0gb2YgZW50cmllcykge1xuICAgICAgICAgIGpzb25PYmpbZW50cnlLZXkudG9TdHJpbmcoKV0gPSBlbnRyeVZhbHVlLnRvSnNvbihvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJlbnVtXCI6XG4gICAgICAgIGNvbnN0IGVudW1UeXBlID0gZmllbGQuVi5UO1xuICAgICAgICBmb3IgKGNvbnN0IFtlbnRyeUtleSwgZW50cnlWYWx1ZV0gb2YgZW50cmllcykge1xuICAgICAgICAgIGpzb25PYmpbZW50cnlLZXkudG9TdHJpbmcoKV0gPSB3cml0ZUVudW0oZW51bVR5cGUsIGVudHJ5VmFsdWUsIG9wdGlvbnMuZW51bUFzSW50ZWdlcik7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBvcHRpb25zLmVtaXREZWZhdWx0VmFsdWVzIHx8IGVudHJpZXMubGVuZ3RoID4gMCA/IGpzb25PYmogOiB2b2lkIDA7XG4gIH1cbiAgaWYgKGZpZWxkLnJlcGVhdGVkKSB7XG4gICAgYXNzZXJ0KEFycmF5LmlzQXJyYXkodmFsdWUpKTtcbiAgICBjb25zdCBqc29uQXJyID0gW107XG4gICAgc3dpdGNoIChmaWVsZC5raW5kKSB7XG4gICAgICBjYXNlIFwic2NhbGFyXCI6XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBqc29uQXJyLnB1c2god3JpdGVTY2FsYXIoZmllbGQuVCwgdmFsdWVbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJlbnVtXCI6XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBqc29uQXJyLnB1c2god3JpdGVFbnVtKGZpZWxkLlQsIHZhbHVlW2ldLCBvcHRpb25zLmVudW1Bc0ludGVnZXIpKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJtZXNzYWdlXCI6XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBqc29uQXJyLnB1c2godmFsdWVbaV0udG9Kc29uKG9wdGlvbnMpKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIG9wdGlvbnMuZW1pdERlZmF1bHRWYWx1ZXMgfHwganNvbkFyci5sZW5ndGggPiAwID8ganNvbkFyciA6IHZvaWQgMDtcbiAgfVxuICBzd2l0Y2ggKGZpZWxkLmtpbmQpIHtcbiAgICBjYXNlIFwic2NhbGFyXCI6XG4gICAgICByZXR1cm4gd3JpdGVTY2FsYXIoZmllbGQuVCwgdmFsdWUpO1xuICAgIGNhc2UgXCJlbnVtXCI6XG4gICAgICByZXR1cm4gd3JpdGVFbnVtKGZpZWxkLlQsIHZhbHVlLCBvcHRpb25zLmVudW1Bc0ludGVnZXIpO1xuICAgIGNhc2UgXCJtZXNzYWdlXCI6XG4gICAgICByZXR1cm4gd3JhcEZpZWxkKGZpZWxkLlQsIHZhbHVlKS50b0pzb24ob3B0aW9ucyk7XG4gIH1cbn1cbmZ1bmN0aW9uIHdyaXRlRW51bSh0eXBlLCB2YWx1ZSwgZW51bUFzSW50ZWdlcikge1xuICB2YXIgX2E7XG4gIGFzc2VydCh0eXBlb2YgdmFsdWUgPT0gXCJudW1iZXJcIik7XG4gIGlmICh0eXBlLnR5cGVOYW1lID09IFwiZ29vZ2xlLnByb3RvYnVmLk51bGxWYWx1ZVwiKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKGVudW1Bc0ludGVnZXIpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgY29uc3QgdmFsID0gdHlwZS5maW5kTnVtYmVyKHZhbHVlKTtcbiAgcmV0dXJuIChfYSA9IHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbC5uYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHdyaXRlU2NhbGFyKHR5cGUsIHZhbHVlKSB7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIC8vIGludDMyLCBmaXhlZDMyLCB1aW50MzI6IEpTT04gdmFsdWUgd2lsbCBiZSBhIGRlY2ltYWwgbnVtYmVyLiBFaXRoZXIgbnVtYmVycyBvciBzdHJpbmdzIGFyZSBhY2NlcHRlZC5cbiAgICBjYXNlIFNjYWxhclR5cGUuSU5UMzI6XG4gICAgY2FzZSBTY2FsYXJUeXBlLlNGSVhFRDMyOlxuICAgIGNhc2UgU2NhbGFyVHlwZS5TSU5UMzI6XG4gICAgY2FzZSBTY2FsYXJUeXBlLkZJWEVEMzI6XG4gICAgY2FzZSBTY2FsYXJUeXBlLlVJTlQzMjpcbiAgICAgIGFzc2VydCh0eXBlb2YgdmFsdWUgPT0gXCJudW1iZXJcIik7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgLy8gZmxvYXQsIGRvdWJsZTogSlNPTiB2YWx1ZSB3aWxsIGJlIGEgbnVtYmVyIG9yIG9uZSBvZiB0aGUgc3BlY2lhbCBzdHJpbmcgdmFsdWVzIFwiTmFOXCIsIFwiSW5maW5pdHlcIiwgYW5kIFwiLUluZmluaXR5XCIuXG4gICAgLy8gRWl0aGVyIG51bWJlcnMgb3Igc3RyaW5ncyBhcmUgYWNjZXB0ZWQuIEV4cG9uZW50IG5vdGF0aW9uIGlzIGFsc28gYWNjZXB0ZWQuXG4gICAgY2FzZSBTY2FsYXJUeXBlLkZMT0FUOlxuICAgIC8vIGFzc2VydEZsb2F0MzIodmFsdWUpO1xuICAgIGNhc2UgU2NhbGFyVHlwZS5ET1VCTEU6XG4gICAgICBhc3NlcnQodHlwZW9mIHZhbHVlID09IFwibnVtYmVyXCIpO1xuICAgICAgaWYgKE51bWJlci5pc05hTih2YWx1ZSkpXG4gICAgICAgIHJldHVybiBcIk5hTlwiO1xuICAgICAgaWYgKHZhbHVlID09PSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpXG4gICAgICAgIHJldHVybiBcIkluZmluaXR5XCI7XG4gICAgICBpZiAodmFsdWUgPT09IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSlcbiAgICAgICAgcmV0dXJuIFwiLUluZmluaXR5XCI7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgLy8gc3RyaW5nOlxuICAgIGNhc2UgU2NhbGFyVHlwZS5TVFJJTkc6XG4gICAgICBhc3NlcnQodHlwZW9mIHZhbHVlID09IFwic3RyaW5nXCIpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIC8vIGJvb2w6XG4gICAgY2FzZSBTY2FsYXJUeXBlLkJPT0w6XG4gICAgICBhc3NlcnQodHlwZW9mIHZhbHVlID09IFwiYm9vbGVhblwiKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAvLyBKU09OIHZhbHVlIHdpbGwgYmUgYSBkZWNpbWFsIHN0cmluZy4gRWl0aGVyIG51bWJlcnMgb3Igc3RyaW5ncyBhcmUgYWNjZXB0ZWQuXG4gICAgY2FzZSBTY2FsYXJUeXBlLlVJTlQ2NDpcbiAgICBjYXNlIFNjYWxhclR5cGUuRklYRUQ2NDpcbiAgICBjYXNlIFNjYWxhclR5cGUuSU5UNjQ6XG4gICAgY2FzZSBTY2FsYXJUeXBlLlNGSVhFRDY0OlxuICAgIGNhc2UgU2NhbGFyVHlwZS5TSU5UNjQ6XG4gICAgICBhc3NlcnQodHlwZW9mIHZhbHVlID09IFwiYmlnaW50XCIgfHwgdHlwZW9mIHZhbHVlID09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHZhbHVlID09IFwibnVtYmVyXCIpO1xuICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgLy8gYnl0ZXM6IEpTT04gdmFsdWUgd2lsbCBiZSB0aGUgZGF0YSBlbmNvZGVkIGFzIGEgc3RyaW5nIHVzaW5nIHN0YW5kYXJkIGJhc2U2NCBlbmNvZGluZyB3aXRoIHBhZGRpbmdzLlxuICAgIC8vIEVpdGhlciBzdGFuZGFyZCBvciBVUkwtc2FmZSBiYXNlNjQgZW5jb2Rpbmcgd2l0aC93aXRob3V0IHBhZGRpbmdzIGFyZSBhY2NlcHRlZC5cbiAgICBjYXNlIFNjYWxhclR5cGUuQllURVM6XG4gICAgICBhc3NlcnQodmFsdWUgaW5zdGFuY2VvZiBVaW50OEFycmF5KTtcbiAgICAgIHJldHVybiBwcm90b0Jhc2U2NC5lbmModmFsdWUpO1xuICB9XG59XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AYnVmYnVpbGQvcHJvdG9idWYvZGlzdC9lc20vcHJpdmF0ZS9iaW5hcnktZm9ybWF0LmpzXG52YXIgdW5rbm93bkZpZWxkc1N5bWJvbCA9IFN5bWJvbChcIkBidWZidWlsZC9wcm90b2J1Zi91bmtub3duLWZpZWxkc1wiKTtcbnZhciByZWFkRGVmYXVsdHMgPSB7XG4gIHJlYWRVbmtub3duRmllbGRzOiB0cnVlLFxuICByZWFkZXJGYWN0b3J5OiAoYnl0ZXMpID0+IG5ldyBCaW5hcnlSZWFkZXIoYnl0ZXMpXG59O1xudmFyIHdyaXRlRGVmYXVsdHMgPSB7XG4gIHdyaXRlVW5rbm93bkZpZWxkczogdHJ1ZSxcbiAgd3JpdGVyRmFjdG9yeTogKCkgPT4gbmV3IEJpbmFyeVdyaXRlcigpXG59O1xuZnVuY3Rpb24gbWFrZVJlYWRPcHRpb25zMihvcHRpb25zKSB7XG4gIHJldHVybiBvcHRpb25zID8gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZWFkRGVmYXVsdHMpLCBvcHRpb25zKSA6IHJlYWREZWZhdWx0cztcbn1cbmZ1bmN0aW9uIG1ha2VXcml0ZU9wdGlvbnMyKG9wdGlvbnMpIHtcbiAgcmV0dXJuIG9wdGlvbnMgPyBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHdyaXRlRGVmYXVsdHMpLCBvcHRpb25zKSA6IHdyaXRlRGVmYXVsdHM7XG59XG5mdW5jdGlvbiBtYWtlQmluYXJ5Rm9ybWF0KCkge1xuICByZXR1cm4ge1xuICAgIG1ha2VSZWFkT3B0aW9uczogbWFrZVJlYWRPcHRpb25zMixcbiAgICBtYWtlV3JpdGVPcHRpb25zOiBtYWtlV3JpdGVPcHRpb25zMixcbiAgICBsaXN0VW5rbm93bkZpZWxkcyhtZXNzYWdlKSB7XG4gICAgICB2YXIgX2E7XG4gICAgICByZXR1cm4gKF9hID0gbWVzc2FnZVt1bmtub3duRmllbGRzU3ltYm9sXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogW107XG4gICAgfSxcbiAgICBkaXNjYXJkVW5rbm93bkZpZWxkcyhtZXNzYWdlKSB7XG4gICAgICBkZWxldGUgbWVzc2FnZVt1bmtub3duRmllbGRzU3ltYm9sXTtcbiAgICB9LFxuICAgIHdyaXRlVW5rbm93bkZpZWxkcyhtZXNzYWdlLCB3cml0ZXIpIHtcbiAgICAgIGNvbnN0IG0gPSBtZXNzYWdlO1xuICAgICAgY29uc3QgYyA9IG1bdW5rbm93bkZpZWxkc1N5bWJvbF07XG4gICAgICBpZiAoYykge1xuICAgICAgICBmb3IgKGNvbnN0IGYgb2YgYykge1xuICAgICAgICAgIHdyaXRlci50YWcoZi5ubywgZi53aXJlVHlwZSkucmF3KGYuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIG9uVW5rbm93bkZpZWxkKG1lc3NhZ2UsIG5vLCB3aXJlVHlwZSwgZGF0YSkge1xuICAgICAgY29uc3QgbSA9IG1lc3NhZ2U7XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkobVt1bmtub3duRmllbGRzU3ltYm9sXSkpIHtcbiAgICAgICAgbVt1bmtub3duRmllbGRzU3ltYm9sXSA9IFtdO1xuICAgICAgfVxuICAgICAgbVt1bmtub3duRmllbGRzU3ltYm9sXS5wdXNoKHsgbm8sIHdpcmVUeXBlLCBkYXRhIH0pO1xuICAgIH0sXG4gICAgcmVhZE1lc3NhZ2UobWVzc2FnZSwgcmVhZGVyLCBsZW5ndGhPckVuZFRhZ0ZpZWxkTm8sIG9wdGlvbnMsIGRlbGltaXRlZE1lc3NhZ2VFbmNvZGluZykge1xuICAgICAgY29uc3QgdHlwZSA9IG1lc3NhZ2UuZ2V0VHlwZSgpO1xuICAgICAgY29uc3QgZW5kID0gZGVsaW1pdGVkTWVzc2FnZUVuY29kaW5nID8gcmVhZGVyLmxlbiA6IHJlYWRlci5wb3MgKyBsZW5ndGhPckVuZFRhZ0ZpZWxkTm87XG4gICAgICBsZXQgZmllbGRObywgd2lyZVR5cGU7XG4gICAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgICBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgICBpZiAoZGVsaW1pdGVkTWVzc2FnZUVuY29kaW5nID09PSB0cnVlICYmIHdpcmVUeXBlID09IFdpcmVUeXBlLkVuZEdyb3VwKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmllbGQgPSB0eXBlLmZpZWxkcy5maW5kKGZpZWxkTm8pO1xuICAgICAgICBpZiAoIWZpZWxkKSB7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IHJlYWRlci5za2lwKHdpcmVUeXBlLCBmaWVsZE5vKTtcbiAgICAgICAgICBpZiAob3B0aW9ucy5yZWFkVW5rbm93bkZpZWxkcykge1xuICAgICAgICAgICAgdGhpcy5vblVua25vd25GaWVsZChtZXNzYWdlLCBmaWVsZE5vLCB3aXJlVHlwZSwgZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHJlYWRGaWVsZDIobWVzc2FnZSwgcmVhZGVyLCBmaWVsZCwgd2lyZVR5cGUsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgaWYgKGRlbGltaXRlZE1lc3NhZ2VFbmNvZGluZyAmJiAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9zdHJpY3QtYm9vbGVhbi1leHByZXNzaW9uc1xuICAgICAgKHdpcmVUeXBlICE9IFdpcmVUeXBlLkVuZEdyb3VwIHx8IGZpZWxkTm8gIT09IGxlbmd0aE9yRW5kVGFnRmllbGRObykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIGVuZCBncm91cCB0YWdgKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHJlYWRGaWVsZDogcmVhZEZpZWxkMixcbiAgICB3cml0ZU1lc3NhZ2UobWVzc2FnZSwgd3JpdGVyLCBvcHRpb25zKSB7XG4gICAgICBjb25zdCB0eXBlID0gbWVzc2FnZS5nZXRUeXBlKCk7XG4gICAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIHR5cGUuZmllbGRzLmJ5TnVtYmVyKCkpIHtcbiAgICAgICAgaWYgKCFpc0ZpZWxkU2V0KGZpZWxkLCBtZXNzYWdlKSkge1xuICAgICAgICAgIGlmIChmaWVsZC5yZXEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgY2Fubm90IGVuY29kZSBmaWVsZCAke3R5cGUudHlwZU5hbWV9LiR7ZmllbGQubmFtZX0gdG8gYmluYXJ5OiByZXF1aXJlZCBmaWVsZCBub3Qgc2V0YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZmllbGQub25lb2YgPyBtZXNzYWdlW2ZpZWxkLm9uZW9mLmxvY2FsTmFtZV0udmFsdWUgOiBtZXNzYWdlW2ZpZWxkLmxvY2FsTmFtZV07XG4gICAgICAgIHdyaXRlRmllbGQyKGZpZWxkLCB2YWx1ZSwgd3JpdGVyLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcykge1xuICAgICAgICB0aGlzLndyaXRlVW5rbm93bkZpZWxkcyhtZXNzYWdlLCB3cml0ZXIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdyaXRlcjtcbiAgICB9LFxuICAgIHdyaXRlRmllbGQoZmllbGQsIHZhbHVlLCB3cml0ZXIsIG9wdGlvbnMpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICB9XG4gICAgICB3cml0ZUZpZWxkMihmaWVsZCwgdmFsdWUsIHdyaXRlciwgb3B0aW9ucyk7XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gcmVhZEZpZWxkMih0YXJnZXQsIHJlYWRlciwgZmllbGQsIHdpcmVUeXBlLCBvcHRpb25zKSB7XG4gIGxldCB7IHJlcGVhdGVkLCBsb2NhbE5hbWUgfSA9IGZpZWxkO1xuICBpZiAoZmllbGQub25lb2YpIHtcbiAgICB0YXJnZXQgPSB0YXJnZXRbZmllbGQub25lb2YubG9jYWxOYW1lXTtcbiAgICBpZiAodGFyZ2V0LmNhc2UgIT0gbG9jYWxOYW1lKSB7XG4gICAgICBkZWxldGUgdGFyZ2V0LnZhbHVlO1xuICAgIH1cbiAgICB0YXJnZXQuY2FzZSA9IGxvY2FsTmFtZTtcbiAgICBsb2NhbE5hbWUgPSBcInZhbHVlXCI7XG4gIH1cbiAgc3dpdGNoIChmaWVsZC5raW5kKSB7XG4gICAgY2FzZSBcInNjYWxhclwiOlxuICAgIGNhc2UgXCJlbnVtXCI6XG4gICAgICBjb25zdCBzY2FsYXJUeXBlID0gZmllbGQua2luZCA9PSBcImVudW1cIiA/IFNjYWxhclR5cGUuSU5UMzIgOiBmaWVsZC5UO1xuICAgICAgbGV0IHJlYWQgPSByZWFkU2NhbGFyMjtcbiAgICAgIGlmIChmaWVsZC5raW5kID09IFwic2NhbGFyXCIgJiYgZmllbGQuTCA+IDApIHtcbiAgICAgICAgcmVhZCA9IHJlYWRTY2FsYXJMVFN0cmluZztcbiAgICAgIH1cbiAgICAgIGlmIChyZXBlYXRlZCkge1xuICAgICAgICBsZXQgYXJyID0gdGFyZ2V0W2xvY2FsTmFtZV07XG4gICAgICAgIGNvbnN0IGlzUGFja2VkID0gd2lyZVR5cGUgPT0gV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkICYmIHNjYWxhclR5cGUgIT0gU2NhbGFyVHlwZS5TVFJJTkcgJiYgc2NhbGFyVHlwZSAhPSBTY2FsYXJUeXBlLkJZVEVTO1xuICAgICAgICBpZiAoaXNQYWNrZWQpIHtcbiAgICAgICAgICBsZXQgZSA9IHJlYWRlci51aW50MzIoKSArIHJlYWRlci5wb3M7XG4gICAgICAgICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlKSB7XG4gICAgICAgICAgICBhcnIucHVzaChyZWFkKHJlYWRlciwgc2NhbGFyVHlwZSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcnIucHVzaChyZWFkKHJlYWRlciwgc2NhbGFyVHlwZSkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXRbbG9jYWxOYW1lXSA9IHJlYWQocmVhZGVyLCBzY2FsYXJUeXBlKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJtZXNzYWdlXCI6XG4gICAgICBjb25zdCBtZXNzYWdlVHlwZSA9IGZpZWxkLlQ7XG4gICAgICBpZiAocmVwZWF0ZWQpIHtcbiAgICAgICAgdGFyZ2V0W2xvY2FsTmFtZV0ucHVzaChyZWFkTWVzc2FnZUZpZWxkKHJlYWRlciwgbmV3IG1lc3NhZ2VUeXBlKCksIG9wdGlvbnMsIGZpZWxkKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaXNNZXNzYWdlKHRhcmdldFtsb2NhbE5hbWVdKSkge1xuICAgICAgICAgIHJlYWRNZXNzYWdlRmllbGQocmVhZGVyLCB0YXJnZXRbbG9jYWxOYW1lXSwgb3B0aW9ucywgZmllbGQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRhcmdldFtsb2NhbE5hbWVdID0gcmVhZE1lc3NhZ2VGaWVsZChyZWFkZXIsIG5ldyBtZXNzYWdlVHlwZSgpLCBvcHRpb25zLCBmaWVsZCk7XG4gICAgICAgICAgaWYgKG1lc3NhZ2VUeXBlLmZpZWxkV3JhcHBlciAmJiAhZmllbGQub25lb2YgJiYgIWZpZWxkLnJlcGVhdGVkKSB7XG4gICAgICAgICAgICB0YXJnZXRbbG9jYWxOYW1lXSA9IG1lc3NhZ2VUeXBlLmZpZWxkV3JhcHBlci51bndyYXBGaWVsZCh0YXJnZXRbbG9jYWxOYW1lXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwibWFwXCI6XG4gICAgICBsZXQgW21hcEtleSwgbWFwVmFsXSA9IHJlYWRNYXBFbnRyeShmaWVsZCwgcmVhZGVyLCBvcHRpb25zKTtcbiAgICAgIHRhcmdldFtsb2NhbE5hbWVdW21hcEtleV0gPSBtYXBWYWw7XG4gICAgICBicmVhaztcbiAgfVxufVxuZnVuY3Rpb24gcmVhZE1lc3NhZ2VGaWVsZChyZWFkZXIsIG1lc3NhZ2UsIG9wdGlvbnMsIGZpZWxkKSB7XG4gIGNvbnN0IGZvcm1hdCA9IG1lc3NhZ2UuZ2V0VHlwZSgpLnJ1bnRpbWUuYmluO1xuICBjb25zdCBkZWxpbWl0ZWQgPSBmaWVsZCA9PT0gbnVsbCB8fCBmaWVsZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZmllbGQuZGVsaW1pdGVkO1xuICBmb3JtYXQucmVhZE1lc3NhZ2UoXG4gICAgbWVzc2FnZSxcbiAgICByZWFkZXIsXG4gICAgZGVsaW1pdGVkID8gZmllbGQubm8gOiByZWFkZXIudWludDMyKCksXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvc3RyaWN0LWJvb2xlYW4tZXhwcmVzc2lvbnNcbiAgICBvcHRpb25zLFxuICAgIGRlbGltaXRlZFxuICApO1xuICByZXR1cm4gbWVzc2FnZTtcbn1cbmZ1bmN0aW9uIHJlYWRNYXBFbnRyeShmaWVsZCwgcmVhZGVyLCBvcHRpb25zKSB7XG4gIGNvbnN0IGxlbmd0aCA9IHJlYWRlci51aW50MzIoKSwgZW5kID0gcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgbGV0IGtleSwgdmFsO1xuICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgIGNvbnN0IFtmaWVsZE5vXSA9IHJlYWRlci50YWcoKTtcbiAgICBzd2l0Y2ggKGZpZWxkTm8pIHtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAga2V5ID0gcmVhZFNjYWxhcjIocmVhZGVyLCBmaWVsZC5LKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHN3aXRjaCAoZmllbGQuVi5raW5kKSB7XG4gICAgICAgICAgY2FzZSBcInNjYWxhclwiOlxuICAgICAgICAgICAgdmFsID0gcmVhZFNjYWxhcjIocmVhZGVyLCBmaWVsZC5WLlQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcImVudW1cIjpcbiAgICAgICAgICAgIHZhbCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIm1lc3NhZ2VcIjpcbiAgICAgICAgICAgIHZhbCA9IHJlYWRNZXNzYWdlRmllbGQocmVhZGVyLCBuZXcgZmllbGQuVi5UKCksIG9wdGlvbnMsIHZvaWQgMCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgaWYgKGtleSA9PT0gdm9pZCAwKSB7XG4gICAga2V5ID0gc2NhbGFyWmVyb1ZhbHVlKGZpZWxkLkssIExvbmdUeXBlLkJJR0lOVCk7XG4gIH1cbiAgaWYgKHR5cGVvZiBrZXkgIT0gXCJzdHJpbmdcIiAmJiB0eXBlb2Yga2V5ICE9IFwibnVtYmVyXCIpIHtcbiAgICBrZXkgPSBrZXkudG9TdHJpbmcoKTtcbiAgfVxuICBpZiAodmFsID09PSB2b2lkIDApIHtcbiAgICBzd2l0Y2ggKGZpZWxkLlYua2luZCkge1xuICAgICAgY2FzZSBcInNjYWxhclwiOlxuICAgICAgICB2YWwgPSBzY2FsYXJaZXJvVmFsdWUoZmllbGQuVi5ULCBMb25nVHlwZS5CSUdJTlQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJlbnVtXCI6XG4gICAgICAgIHZhbCA9IGZpZWxkLlYuVC52YWx1ZXNbMF0ubm87XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIm1lc3NhZ2VcIjpcbiAgICAgICAgdmFsID0gbmV3IGZpZWxkLlYuVCgpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFtrZXksIHZhbF07XG59XG5mdW5jdGlvbiByZWFkU2NhbGFyTFRTdHJpbmcocmVhZGVyLCB0eXBlKSB7XG4gIGNvbnN0IHYgPSByZWFkU2NhbGFyMihyZWFkZXIsIHR5cGUpO1xuICByZXR1cm4gdHlwZW9mIHYgPT0gXCJiaWdpbnRcIiA/IHYudG9TdHJpbmcoKSA6IHY7XG59XG5mdW5jdGlvbiByZWFkU2NhbGFyMihyZWFkZXIsIHR5cGUpIHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBTY2FsYXJUeXBlLlNUUklORzpcbiAgICAgIHJldHVybiByZWFkZXIuc3RyaW5nKCk7XG4gICAgY2FzZSBTY2FsYXJUeXBlLkJPT0w6XG4gICAgICByZXR1cm4gcmVhZGVyLmJvb2woKTtcbiAgICBjYXNlIFNjYWxhclR5cGUuRE9VQkxFOlxuICAgICAgcmV0dXJuIHJlYWRlci5kb3VibGUoKTtcbiAgICBjYXNlIFNjYWxhclR5cGUuRkxPQVQ6XG4gICAgICByZXR1cm4gcmVhZGVyLmZsb2F0KCk7XG4gICAgY2FzZSBTY2FsYXJUeXBlLklOVDMyOlxuICAgICAgcmV0dXJuIHJlYWRlci5pbnQzMigpO1xuICAgIGNhc2UgU2NhbGFyVHlwZS5JTlQ2NDpcbiAgICAgIHJldHVybiByZWFkZXIuaW50NjQoKTtcbiAgICBjYXNlIFNjYWxhclR5cGUuVUlOVDY0OlxuICAgICAgcmV0dXJuIHJlYWRlci51aW50NjQoKTtcbiAgICBjYXNlIFNjYWxhclR5cGUuRklYRUQ2NDpcbiAgICAgIHJldHVybiByZWFkZXIuZml4ZWQ2NCgpO1xuICAgIGNhc2UgU2NhbGFyVHlwZS5CWVRFUzpcbiAgICAgIHJldHVybiByZWFkZXIuYnl0ZXMoKTtcbiAgICBjYXNlIFNjYWxhclR5cGUuRklYRUQzMjpcbiAgICAgIHJldHVybiByZWFkZXIuZml4ZWQzMigpO1xuICAgIGNhc2UgU2NhbGFyVHlwZS5TRklYRUQzMjpcbiAgICAgIHJldHVybiByZWFkZXIuc2ZpeGVkMzIoKTtcbiAgICBjYXNlIFNjYWxhclR5cGUuU0ZJWEVENjQ6XG4gICAgICByZXR1cm4gcmVhZGVyLnNmaXhlZDY0KCk7XG4gICAgY2FzZSBTY2FsYXJUeXBlLlNJTlQ2NDpcbiAgICAgIHJldHVybiByZWFkZXIuc2ludDY0KCk7XG4gICAgY2FzZSBTY2FsYXJUeXBlLlVJTlQzMjpcbiAgICAgIHJldHVybiByZWFkZXIudWludDMyKCk7XG4gICAgY2FzZSBTY2FsYXJUeXBlLlNJTlQzMjpcbiAgICAgIHJldHVybiByZWFkZXIuc2ludDMyKCk7XG4gIH1cbn1cbmZ1bmN0aW9uIHdyaXRlRmllbGQyKGZpZWxkLCB2YWx1ZSwgd3JpdGVyLCBvcHRpb25zKSB7XG4gIGFzc2VydCh2YWx1ZSAhPT0gdm9pZCAwKTtcbiAgY29uc3QgcmVwZWF0ZWQgPSBmaWVsZC5yZXBlYXRlZDtcbiAgc3dpdGNoIChmaWVsZC5raW5kKSB7XG4gICAgY2FzZSBcInNjYWxhclwiOlxuICAgIGNhc2UgXCJlbnVtXCI6XG4gICAgICBsZXQgc2NhbGFyVHlwZSA9IGZpZWxkLmtpbmQgPT0gXCJlbnVtXCIgPyBTY2FsYXJUeXBlLklOVDMyIDogZmllbGQuVDtcbiAgICAgIGlmIChyZXBlYXRlZCkge1xuICAgICAgICBhc3NlcnQoQXJyYXkuaXNBcnJheSh2YWx1ZSkpO1xuICAgICAgICBpZiAoZmllbGQucGFja2VkKSB7XG4gICAgICAgICAgd3JpdGVQYWNrZWQod3JpdGVyLCBzY2FsYXJUeXBlLCBmaWVsZC5ubywgdmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB2YWx1ZSkge1xuICAgICAgICAgICAgd3JpdGVTY2FsYXIyKHdyaXRlciwgc2NhbGFyVHlwZSwgZmllbGQubm8sIGl0ZW0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd3JpdGVTY2FsYXIyKHdyaXRlciwgc2NhbGFyVHlwZSwgZmllbGQubm8sIHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJtZXNzYWdlXCI6XG4gICAgICBpZiAocmVwZWF0ZWQpIHtcbiAgICAgICAgYXNzZXJ0KEFycmF5LmlzQXJyYXkodmFsdWUpKTtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHZhbHVlKSB7XG4gICAgICAgICAgd3JpdGVNZXNzYWdlRmllbGQod3JpdGVyLCBvcHRpb25zLCBmaWVsZCwgaXRlbSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdyaXRlTWVzc2FnZUZpZWxkKHdyaXRlciwgb3B0aW9ucywgZmllbGQsIHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJtYXBcIjpcbiAgICAgIGFzc2VydCh0eXBlb2YgdmFsdWUgPT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPSBudWxsKTtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsXSBvZiBPYmplY3QuZW50cmllcyh2YWx1ZSkpIHtcbiAgICAgICAgd3JpdGVNYXBFbnRyeSh3cml0ZXIsIG9wdGlvbnMsIGZpZWxkLCBrZXksIHZhbCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgfVxufVxuZnVuY3Rpb24gd3JpdGVNYXBFbnRyeSh3cml0ZXIsIG9wdGlvbnMsIGZpZWxkLCBrZXksIHZhbHVlKSB7XG4gIHdyaXRlci50YWcoZmllbGQubm8sIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCk7XG4gIHdyaXRlci5mb3JrKCk7XG4gIGxldCBrZXlWYWx1ZSA9IGtleTtcbiAgc3dpdGNoIChmaWVsZC5LKSB7XG4gICAgY2FzZSBTY2FsYXJUeXBlLklOVDMyOlxuICAgIGNhc2UgU2NhbGFyVHlwZS5GSVhFRDMyOlxuICAgIGNhc2UgU2NhbGFyVHlwZS5VSU5UMzI6XG4gICAgY2FzZSBTY2FsYXJUeXBlLlNGSVhFRDMyOlxuICAgIGNhc2UgU2NhbGFyVHlwZS5TSU5UMzI6XG4gICAgICBrZXlWYWx1ZSA9IE51bWJlci5wYXJzZUludChrZXkpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBTY2FsYXJUeXBlLkJPT0w6XG4gICAgICBhc3NlcnQoa2V5ID09IFwidHJ1ZVwiIHx8IGtleSA9PSBcImZhbHNlXCIpO1xuICAgICAga2V5VmFsdWUgPSBrZXkgPT0gXCJ0cnVlXCI7XG4gICAgICBicmVhaztcbiAgfVxuICB3cml0ZVNjYWxhcjIod3JpdGVyLCBmaWVsZC5LLCAxLCBrZXlWYWx1ZSk7XG4gIHN3aXRjaCAoZmllbGQuVi5raW5kKSB7XG4gICAgY2FzZSBcInNjYWxhclwiOlxuICAgICAgd3JpdGVTY2FsYXIyKHdyaXRlciwgZmllbGQuVi5ULCAyLCB2YWx1ZSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiZW51bVwiOlxuICAgICAgd3JpdGVTY2FsYXIyKHdyaXRlciwgU2NhbGFyVHlwZS5JTlQzMiwgMiwgdmFsdWUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIm1lc3NhZ2VcIjpcbiAgICAgIGFzc2VydCh2YWx1ZSAhPT0gdm9pZCAwKTtcbiAgICAgIHdyaXRlci50YWcoMiwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5ieXRlcyh2YWx1ZS50b0JpbmFyeShvcHRpb25zKSk7XG4gICAgICBicmVhaztcbiAgfVxuICB3cml0ZXIuam9pbigpO1xufVxuZnVuY3Rpb24gd3JpdGVNZXNzYWdlRmllbGQod3JpdGVyLCBvcHRpb25zLCBmaWVsZCwgdmFsdWUpIHtcbiAgY29uc3QgbWVzc2FnZSA9IHdyYXBGaWVsZChmaWVsZC5ULCB2YWx1ZSk7XG4gIGlmIChmaWVsZC5kZWxpbWl0ZWQpXG4gICAgd3JpdGVyLnRhZyhmaWVsZC5ubywgV2lyZVR5cGUuU3RhcnRHcm91cCkucmF3KG1lc3NhZ2UudG9CaW5hcnkob3B0aW9ucykpLnRhZyhmaWVsZC5ubywgV2lyZVR5cGUuRW5kR3JvdXApO1xuICBlbHNlXG4gICAgd3JpdGVyLnRhZyhmaWVsZC5ubywgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5ieXRlcyhtZXNzYWdlLnRvQmluYXJ5KG9wdGlvbnMpKTtcbn1cbmZ1bmN0aW9uIHdyaXRlU2NhbGFyMih3cml0ZXIsIHR5cGUsIGZpZWxkTm8sIHZhbHVlKSB7XG4gIGFzc2VydCh2YWx1ZSAhPT0gdm9pZCAwKTtcbiAgbGV0IFt3aXJlVHlwZSwgbWV0aG9kXSA9IHNjYWxhclR5cGVJbmZvKHR5cGUpO1xuICB3cml0ZXIudGFnKGZpZWxkTm8sIHdpcmVUeXBlKVttZXRob2RdKHZhbHVlKTtcbn1cbmZ1bmN0aW9uIHdyaXRlUGFja2VkKHdyaXRlciwgdHlwZSwgZmllbGRObywgdmFsdWUpIHtcbiAgaWYgKCF2YWx1ZS5sZW5ndGgpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgd3JpdGVyLnRhZyhmaWVsZE5vLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKTtcbiAgbGV0IFssIG1ldGhvZF0gPSBzY2FsYXJUeXBlSW5mbyh0eXBlKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgIHdyaXRlclttZXRob2RdKHZhbHVlW2ldKTtcbiAgfVxuICB3cml0ZXIuam9pbigpO1xufVxuZnVuY3Rpb24gc2NhbGFyVHlwZUluZm8odHlwZSkge1xuICBsZXQgd2lyZVR5cGUgPSBXaXJlVHlwZS5WYXJpbnQ7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgU2NhbGFyVHlwZS5CWVRFUzpcbiAgICBjYXNlIFNjYWxhclR5cGUuU1RSSU5HOlxuICAgICAgd2lyZVR5cGUgPSBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQ7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFNjYWxhclR5cGUuRE9VQkxFOlxuICAgIGNhc2UgU2NhbGFyVHlwZS5GSVhFRDY0OlxuICAgIGNhc2UgU2NhbGFyVHlwZS5TRklYRUQ2NDpcbiAgICAgIHdpcmVUeXBlID0gV2lyZVR5cGUuQml0NjQ7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFNjYWxhclR5cGUuRklYRUQzMjpcbiAgICBjYXNlIFNjYWxhclR5cGUuU0ZJWEVEMzI6XG4gICAgY2FzZSBTY2FsYXJUeXBlLkZMT0FUOlxuICAgICAgd2lyZVR5cGUgPSBXaXJlVHlwZS5CaXQzMjtcbiAgICAgIGJyZWFrO1xuICB9XG4gIGNvbnN0IG1ldGhvZCA9IFNjYWxhclR5cGVbdHlwZV0udG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIFt3aXJlVHlwZSwgbWV0aG9kXTtcbn1cblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0BidWZidWlsZC9wcm90b2J1Zi9kaXN0L2VzbS9wcml2YXRlL3V0aWwtY29tbW9uLmpzXG5mdW5jdGlvbiBtYWtlVXRpbENvbW1vbigpIHtcbiAgcmV0dXJuIHtcbiAgICBzZXRFbnVtVHlwZSxcbiAgICBpbml0UGFydGlhbChzb3VyY2UsIHRhcmdldCkge1xuICAgICAgaWYgKHNvdXJjZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHR5cGUgPSB0YXJnZXQuZ2V0VHlwZSgpO1xuICAgICAgZm9yIChjb25zdCBtZW1iZXIgb2YgdHlwZS5maWVsZHMuYnlNZW1iZXIoKSkge1xuICAgICAgICBjb25zdCBsb2NhbE5hbWUgPSBtZW1iZXIubG9jYWxOYW1lLCB0ID0gdGFyZ2V0LCBzID0gc291cmNlO1xuICAgICAgICBpZiAoc1tsb2NhbE5hbWVdID09IG51bGwpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKG1lbWJlci5raW5kKSB7XG4gICAgICAgICAgY2FzZSBcIm9uZW9mXCI6XG4gICAgICAgICAgICBjb25zdCBzayA9IHNbbG9jYWxOYW1lXS5jYXNlO1xuICAgICAgICAgICAgaWYgKHNrID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzb3VyY2VGaWVsZCA9IG1lbWJlci5maW5kRmllbGQoc2spO1xuICAgICAgICAgICAgbGV0IHZhbCA9IHNbbG9jYWxOYW1lXS52YWx1ZTtcbiAgICAgICAgICAgIGlmIChzb3VyY2VGaWVsZCAmJiBzb3VyY2VGaWVsZC5raW5kID09IFwibWVzc2FnZVwiICYmICFpc01lc3NhZ2UodmFsLCBzb3VyY2VGaWVsZC5UKSkge1xuICAgICAgICAgICAgICB2YWwgPSBuZXcgc291cmNlRmllbGQuVCh2YWwpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VyY2VGaWVsZCAmJiBzb3VyY2VGaWVsZC5raW5kID09PSBcInNjYWxhclwiICYmIHNvdXJjZUZpZWxkLlQgPT09IFNjYWxhclR5cGUuQllURVMpIHtcbiAgICAgICAgICAgICAgdmFsID0gdG9VOEFycih2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdFtsb2NhbE5hbWVdID0geyBjYXNlOiBzaywgdmFsdWU6IHZhbCB9O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcInNjYWxhclwiOlxuICAgICAgICAgIGNhc2UgXCJlbnVtXCI6XG4gICAgICAgICAgICBsZXQgY29weSA9IHNbbG9jYWxOYW1lXTtcbiAgICAgICAgICAgIGlmIChtZW1iZXIuVCA9PT0gU2NhbGFyVHlwZS5CWVRFUykge1xuICAgICAgICAgICAgICBjb3B5ID0gbWVtYmVyLnJlcGVhdGVkID8gY29weS5tYXAodG9VOEFycikgOiB0b1U4QXJyKGNvcHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdFtsb2NhbE5hbWVdID0gY29weTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJtYXBcIjpcbiAgICAgICAgICAgIHN3aXRjaCAobWVtYmVyLlYua2luZCkge1xuICAgICAgICAgICAgICBjYXNlIFwic2NhbGFyXCI6XG4gICAgICAgICAgICAgIGNhc2UgXCJlbnVtXCI6XG4gICAgICAgICAgICAgICAgaWYgKG1lbWJlci5WLlQgPT09IFNjYWxhclR5cGUuQllURVMpIHtcbiAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKHNbbG9jYWxOYW1lXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdFtsb2NhbE5hbWVdW2tdID0gdG9VOEFycih2KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0W2xvY2FsTmFtZV0sIHNbbG9jYWxOYW1lXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlIFwibWVzc2FnZVwiOlxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VUeXBlID0gbWVtYmVyLlYuVDtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGsgb2YgT2JqZWN0LmtleXMoc1tsb2NhbE5hbWVdKSkge1xuICAgICAgICAgICAgICAgICAgbGV0IHZhbDIgPSBzW2xvY2FsTmFtZV1ba107XG4gICAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2VUeXBlLmZpZWxkV3JhcHBlcikge1xuICAgICAgICAgICAgICAgICAgICB2YWwyID0gbmV3IG1lc3NhZ2VUeXBlKHZhbDIpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgdFtsb2NhbE5hbWVdW2tdID0gdmFsMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwibWVzc2FnZVwiOlxuICAgICAgICAgICAgY29uc3QgbXQgPSBtZW1iZXIuVDtcbiAgICAgICAgICAgIGlmIChtZW1iZXIucmVwZWF0ZWQpIHtcbiAgICAgICAgICAgICAgdFtsb2NhbE5hbWVdID0gc1tsb2NhbE5hbWVdLm1hcCgodmFsMikgPT4gaXNNZXNzYWdlKHZhbDIsIG10KSA/IHZhbDIgOiBuZXcgbXQodmFsMikpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc3QgdmFsMiA9IHNbbG9jYWxOYW1lXTtcbiAgICAgICAgICAgICAgaWYgKG10LmZpZWxkV3JhcHBlcikge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIC8vIFdlIGNhbid0IHVzZSBCeXRlc1ZhbHVlLnR5cGVOYW1lIGFzIHRoYXQgd2lsbCBjcmVhdGUgYSBjaXJjdWxhciBpbXBvcnRcbiAgICAgICAgICAgICAgICAgIG10LnR5cGVOYW1lID09PSBcImdvb2dsZS5wcm90b2J1Zi5CeXRlc1ZhbHVlXCJcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIHRbbG9jYWxOYW1lXSA9IHRvVThBcnIodmFsMik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHRbbG9jYWxOYW1lXSA9IHZhbDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRbbG9jYWxOYW1lXSA9IGlzTWVzc2FnZSh2YWwyLCBtdCkgPyB2YWwyIDogbmV3IG10KHZhbDIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgLy8gVE9ETyB1c2UgaXNGaWVsZFNldCgpIGhlcmUgdG8gc3VwcG9ydCBmdXR1cmUgZmllbGQgcHJlc2VuY2VcbiAgICBlcXVhbHModHlwZSwgYSwgYikge1xuICAgICAgaWYgKGEgPT09IGIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoIWEgfHwgIWIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHR5cGUuZmllbGRzLmJ5TWVtYmVyKCkuZXZlcnkoKG0pID0+IHtcbiAgICAgICAgY29uc3QgdmEgPSBhW20ubG9jYWxOYW1lXTtcbiAgICAgICAgY29uc3QgdmIgPSBiW20ubG9jYWxOYW1lXTtcbiAgICAgICAgaWYgKG0ucmVwZWF0ZWQpIHtcbiAgICAgICAgICBpZiAodmEubGVuZ3RoICE9PSB2Yi5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc3dpdGNoIChtLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgXCJtZXNzYWdlXCI6XG4gICAgICAgICAgICAgIHJldHVybiB2YS5ldmVyeSgoYTIsIGkpID0+IG0uVC5lcXVhbHMoYTIsIHZiW2ldKSk7XG4gICAgICAgICAgICBjYXNlIFwic2NhbGFyXCI6XG4gICAgICAgICAgICAgIHJldHVybiB2YS5ldmVyeSgoYTIsIGkpID0+IHNjYWxhckVxdWFscyhtLlQsIGEyLCB2YltpXSkpO1xuICAgICAgICAgICAgY2FzZSBcImVudW1cIjpcbiAgICAgICAgICAgICAgcmV0dXJuIHZhLmV2ZXJ5KChhMiwgaSkgPT4gc2NhbGFyRXF1YWxzKFNjYWxhclR5cGUuSU5UMzIsIGEyLCB2YltpXSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHJlcGVhdGVkIGNhbm5vdCBjb250YWluICR7bS5raW5kfWApO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAobS5raW5kKSB7XG4gICAgICAgICAgY2FzZSBcIm1lc3NhZ2VcIjpcbiAgICAgICAgICAgIHJldHVybiBtLlQuZXF1YWxzKHZhLCB2Yik7XG4gICAgICAgICAgY2FzZSBcImVudW1cIjpcbiAgICAgICAgICAgIHJldHVybiBzY2FsYXJFcXVhbHMoU2NhbGFyVHlwZS5JTlQzMiwgdmEsIHZiKTtcbiAgICAgICAgICBjYXNlIFwic2NhbGFyXCI6XG4gICAgICAgICAgICByZXR1cm4gc2NhbGFyRXF1YWxzKG0uVCwgdmEsIHZiKTtcbiAgICAgICAgICBjYXNlIFwib25lb2ZcIjpcbiAgICAgICAgICAgIGlmICh2YS5jYXNlICE9PSB2Yi5jYXNlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHMgPSBtLmZpbmRGaWVsZCh2YS5jYXNlKTtcbiAgICAgICAgICAgIGlmIChzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKHMua2luZCkge1xuICAgICAgICAgICAgICBjYXNlIFwibWVzc2FnZVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBzLlQuZXF1YWxzKHZhLnZhbHVlLCB2Yi52YWx1ZSk7XG4gICAgICAgICAgICAgIGNhc2UgXCJlbnVtXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjYWxhckVxdWFscyhTY2FsYXJUeXBlLklOVDMyLCB2YS52YWx1ZSwgdmIudmFsdWUpO1xuICAgICAgICAgICAgICBjYXNlIFwic2NhbGFyXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjYWxhckVxdWFscyhzLlQsIHZhLnZhbHVlLCB2Yi52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYG9uZW9mIGNhbm5vdCBjb250YWluICR7cy5raW5kfWApO1xuICAgICAgICAgIGNhc2UgXCJtYXBcIjpcbiAgICAgICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh2YSkuY29uY2F0KE9iamVjdC5rZXlzKHZiKSk7XG4gICAgICAgICAgICBzd2l0Y2ggKG0uVi5raW5kKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJtZXNzYWdlXCI6XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZVR5cGUgPSBtLlYuVDtcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5cy5ldmVyeSgoaykgPT4gbWVzc2FnZVR5cGUuZXF1YWxzKHZhW2tdLCB2YltrXSkpO1xuICAgICAgICAgICAgICBjYXNlIFwiZW51bVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBrZXlzLmV2ZXJ5KChrKSA9PiBzY2FsYXJFcXVhbHMoU2NhbGFyVHlwZS5JTlQzMiwgdmFba10sIHZiW2tdKSk7XG4gICAgICAgICAgICAgIGNhc2UgXCJzY2FsYXJcIjpcbiAgICAgICAgICAgICAgICBjb25zdCBzY2FsYXJUeXBlID0gbS5WLlQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGtleXMuZXZlcnkoKGspID0+IHNjYWxhckVxdWFscyhzY2FsYXJUeXBlLCB2YVtrXSwgdmJba10pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vIFRPRE8gdXNlIGlzRmllbGRTZXQoKSBoZXJlIHRvIHN1cHBvcnQgZnV0dXJlIGZpZWxkIHByZXNlbmNlXG4gICAgY2xvbmUobWVzc2FnZSkge1xuICAgICAgY29uc3QgdHlwZSA9IG1lc3NhZ2UuZ2V0VHlwZSgpLCB0YXJnZXQgPSBuZXcgdHlwZSgpLCBhbnkgPSB0YXJnZXQ7XG4gICAgICBmb3IgKGNvbnN0IG1lbWJlciBvZiB0eXBlLmZpZWxkcy5ieU1lbWJlcigpKSB7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IG1lc3NhZ2VbbWVtYmVyLmxvY2FsTmFtZV07XG4gICAgICAgIGxldCBjb3B5O1xuICAgICAgICBpZiAobWVtYmVyLnJlcGVhdGVkKSB7XG4gICAgICAgICAgY29weSA9IHNvdXJjZS5tYXAoY2xvbmVTaW5ndWxhckZpZWxkKTtcbiAgICAgICAgfSBlbHNlIGlmIChtZW1iZXIua2luZCA9PSBcIm1hcFwiKSB7XG4gICAgICAgICAgY29weSA9IGFueVttZW1iZXIubG9jYWxOYW1lXTtcbiAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZdIG9mIE9iamVjdC5lbnRyaWVzKHNvdXJjZSkpIHtcbiAgICAgICAgICAgIGNvcHlba2V5XSA9IGNsb25lU2luZ3VsYXJGaWVsZCh2KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobWVtYmVyLmtpbmQgPT0gXCJvbmVvZlwiKSB7XG4gICAgICAgICAgY29uc3QgZiA9IG1lbWJlci5maW5kRmllbGQoc291cmNlLmNhc2UpO1xuICAgICAgICAgIGNvcHkgPSBmID8geyBjYXNlOiBzb3VyY2UuY2FzZSwgdmFsdWU6IGNsb25lU2luZ3VsYXJGaWVsZChzb3VyY2UudmFsdWUpIH0gOiB7IGNhc2U6IHZvaWQgMCB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvcHkgPSBjbG9uZVNpbmd1bGFyRmllbGQoc291cmNlKTtcbiAgICAgICAgfVxuICAgICAgICBhbnlbbWVtYmVyLmxvY2FsTmFtZV0gPSBjb3B5O1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCB1ZiBvZiB0eXBlLnJ1bnRpbWUuYmluLmxpc3RVbmtub3duRmllbGRzKG1lc3NhZ2UpKSB7XG4gICAgICAgIHR5cGUucnVudGltZS5iaW4ub25Vbmtub3duRmllbGQoYW55LCB1Zi5ubywgdWYud2lyZVR5cGUsIHVmLmRhdGEpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBjbG9uZVNpbmd1bGFyRmllbGQodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09PSB2b2lkIDApIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKGlzTWVzc2FnZSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWUuY2xvbmUoKTtcbiAgfVxuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgY29uc3QgYyA9IG5ldyBVaW50OEFycmF5KHZhbHVlLmJ5dGVMZW5ndGgpO1xuICAgIGMuc2V0KHZhbHVlKTtcbiAgICByZXR1cm4gYztcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiB0b1U4QXJyKGlucHV0KSB7XG4gIHJldHVybiBpbnB1dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBpbnB1dCA6IG5ldyBVaW50OEFycmF5KGlucHV0KTtcbn1cblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0BidWZidWlsZC9wcm90b2J1Zi9kaXN0L2VzbS9wcml2YXRlL3Byb3RvLXJ1bnRpbWUuanNcbmZ1bmN0aW9uIG1ha2VQcm90b1J1bnRpbWUoc3ludGF4LCBuZXdGaWVsZExpc3QsIGluaXRGaWVsZHMpIHtcbiAgcmV0dXJuIHtcbiAgICBzeW50YXgsXG4gICAganNvbjogbWFrZUpzb25Gb3JtYXQoKSxcbiAgICBiaW46IG1ha2VCaW5hcnlGb3JtYXQoKSxcbiAgICB1dGlsOiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG1ha2VVdGlsQ29tbW9uKCkpLCB7XG4gICAgICBuZXdGaWVsZExpc3QsXG4gICAgICBpbml0RmllbGRzXG4gICAgfSksXG4gICAgbWFrZU1lc3NhZ2VUeXBlKHR5cGVOYW1lLCBmaWVsZHMsIG9wdCkge1xuICAgICAgcmV0dXJuIG1ha2VNZXNzYWdlVHlwZSh0aGlzLCB0eXBlTmFtZSwgZmllbGRzLCBvcHQpO1xuICAgIH0sXG4gICAgbWFrZUVudW0sXG4gICAgbWFrZUVudW1UeXBlLFxuICAgIGdldEVudW1UeXBlLFxuICAgIG1ha2VFeHRlbnNpb24odHlwZU5hbWUsIGV4dGVuZGVlLCBmaWVsZCkge1xuICAgICAgcmV0dXJuIG1ha2VFeHRlbnNpb24odGhpcywgdHlwZU5hbWUsIGV4dGVuZGVlLCBmaWVsZCk7XG4gICAgfVxuICB9O1xufVxuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvQGJ1ZmJ1aWxkL3Byb3RvYnVmL2Rpc3QvZXNtL3ByaXZhdGUvZmllbGQtbGlzdC5qc1xudmFyIEludGVybmFsRmllbGRMaXN0ID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihmaWVsZHMsIG5vcm1hbGl6ZXIpIHtcbiAgICB0aGlzLl9maWVsZHMgPSBmaWVsZHM7XG4gICAgdGhpcy5fbm9ybWFsaXplciA9IG5vcm1hbGl6ZXI7XG4gIH1cbiAgZmluZEpzb25OYW1lKGpzb25OYW1lKSB7XG4gICAgaWYgKCF0aGlzLmpzb25OYW1lcykge1xuICAgICAgY29uc3QgdCA9IHt9O1xuICAgICAgZm9yIChjb25zdCBmIG9mIHRoaXMubGlzdCgpKSB7XG4gICAgICAgIHRbZi5qc29uTmFtZV0gPSB0W2YubmFtZV0gPSBmO1xuICAgICAgfVxuICAgICAgdGhpcy5qc29uTmFtZXMgPSB0O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5qc29uTmFtZXNbanNvbk5hbWVdO1xuICB9XG4gIGZpbmQoZmllbGRObykge1xuICAgIGlmICghdGhpcy5udW1iZXJzKSB7XG4gICAgICBjb25zdCB0ID0ge307XG4gICAgICBmb3IgKGNvbnN0IGYgb2YgdGhpcy5saXN0KCkpIHtcbiAgICAgICAgdFtmLm5vXSA9IGY7XG4gICAgICB9XG4gICAgICB0aGlzLm51bWJlcnMgPSB0O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5udW1iZXJzW2ZpZWxkTm9dO1xuICB9XG4gIGxpc3QoKSB7XG4gICAgaWYgKCF0aGlzLmFsbCkge1xuICAgICAgdGhpcy5hbGwgPSB0aGlzLl9ub3JtYWxpemVyKHRoaXMuX2ZpZWxkcyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmFsbDtcbiAgfVxuICBieU51bWJlcigpIHtcbiAgICBpZiAoIXRoaXMubnVtYmVyc0FzYykge1xuICAgICAgdGhpcy5udW1iZXJzQXNjID0gdGhpcy5saXN0KCkuY29uY2F0KCkuc29ydCgoYSwgYikgPT4gYS5ubyAtIGIubm8pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5udW1iZXJzQXNjO1xuICB9XG4gIGJ5TWVtYmVyKCkge1xuICAgIGlmICghdGhpcy5tZW1iZXJzKSB7XG4gICAgICB0aGlzLm1lbWJlcnMgPSBbXTtcbiAgICAgIGNvbnN0IGEgPSB0aGlzLm1lbWJlcnM7XG4gICAgICBsZXQgbztcbiAgICAgIGZvciAoY29uc3QgZiBvZiB0aGlzLmxpc3QoKSkge1xuICAgICAgICBpZiAoZi5vbmVvZikge1xuICAgICAgICAgIGlmIChmLm9uZW9mICE9PSBvKSB7XG4gICAgICAgICAgICBvID0gZi5vbmVvZjtcbiAgICAgICAgICAgIGEucHVzaChvKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYS5wdXNoKGYpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLm1lbWJlcnM7XG4gIH1cbn07XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AYnVmYnVpbGQvcHJvdG9idWYvZGlzdC9lc20vcHJpdmF0ZS9uYW1lcy5qc1xuZnVuY3Rpb24gbG9jYWxGaWVsZE5hbWUocHJvdG9OYW1lLCBpbk9uZW9mKSB7XG4gIGNvbnN0IG5hbWUgPSBwcm90b0NhbWVsQ2FzZShwcm90b05hbWUpO1xuICBpZiAoaW5PbmVvZikge1xuICAgIHJldHVybiBuYW1lO1xuICB9XG4gIHJldHVybiBzYWZlT2JqZWN0UHJvcGVydHkoc2FmZU1lc3NhZ2VQcm9wZXJ0eShuYW1lKSk7XG59XG5mdW5jdGlvbiBsb2NhbE9uZW9mTmFtZShwcm90b05hbWUpIHtcbiAgcmV0dXJuIGxvY2FsRmllbGROYW1lKHByb3RvTmFtZSwgZmFsc2UpO1xufVxudmFyIGZpZWxkSnNvbk5hbWUgPSBwcm90b0NhbWVsQ2FzZTtcbmZ1bmN0aW9uIHByb3RvQ2FtZWxDYXNlKHNuYWtlQ2FzZSkge1xuICBsZXQgY2FwTmV4dCA9IGZhbHNlO1xuICBjb25zdCBiID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc25ha2VDYXNlLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IGMgPSBzbmFrZUNhc2UuY2hhckF0KGkpO1xuICAgIHN3aXRjaCAoYykge1xuICAgICAgY2FzZSBcIl9cIjpcbiAgICAgICAgY2FwTmV4dCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIjBcIjpcbiAgICAgIGNhc2UgXCIxXCI6XG4gICAgICBjYXNlIFwiMlwiOlxuICAgICAgY2FzZSBcIjNcIjpcbiAgICAgIGNhc2UgXCI0XCI6XG4gICAgICBjYXNlIFwiNVwiOlxuICAgICAgY2FzZSBcIjZcIjpcbiAgICAgIGNhc2UgXCI3XCI6XG4gICAgICBjYXNlIFwiOFwiOlxuICAgICAgY2FzZSBcIjlcIjpcbiAgICAgICAgYi5wdXNoKGMpO1xuICAgICAgICBjYXBOZXh0ID0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGNhcE5leHQpIHtcbiAgICAgICAgICBjYXBOZXh0ID0gZmFsc2U7XG4gICAgICAgICAgYyA9IGMudG9VcHBlckNhc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBiLnB1c2goYyk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYi5qb2luKFwiXCIpO1xufVxudmFyIHJlc2VydmVkT2JqZWN0UHJvcGVydGllcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcbiAgLy8gbmFtZXMgcmVzZXJ2ZWQgYnkgSmF2YVNjcmlwdFxuICBcImNvbnN0cnVjdG9yXCIsXG4gIFwidG9TdHJpbmdcIixcbiAgXCJ0b0pTT05cIixcbiAgXCJ2YWx1ZU9mXCJcbl0pO1xudmFyIHJlc2VydmVkTWVzc2FnZVByb3BlcnRpZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXG4gIC8vIG5hbWVzIHJlc2VydmVkIGJ5IHRoZSBydW50aW1lXG4gIFwiZ2V0VHlwZVwiLFxuICBcImNsb25lXCIsXG4gIFwiZXF1YWxzXCIsXG4gIFwiZnJvbUJpbmFyeVwiLFxuICBcImZyb21Kc29uXCIsXG4gIFwiZnJvbUpzb25TdHJpbmdcIixcbiAgXCJ0b0JpbmFyeVwiLFxuICBcInRvSnNvblwiLFxuICBcInRvSnNvblN0cmluZ1wiLFxuICAvLyBuYW1lcyByZXNlcnZlZCBieSB0aGUgcnVudGltZSBmb3IgdGhlIGZ1dHVyZVxuICBcInRvT2JqZWN0XCJcbl0pO1xudmFyIGZhbGxiYWNrID0gKG5hbWUpID0+IGAke25hbWV9JGA7XG52YXIgc2FmZU1lc3NhZ2VQcm9wZXJ0eSA9IChuYW1lKSA9PiB7XG4gIGlmIChyZXNlcnZlZE1lc3NhZ2VQcm9wZXJ0aWVzLmhhcyhuYW1lKSkge1xuICAgIHJldHVybiBmYWxsYmFjayhuYW1lKTtcbiAgfVxuICByZXR1cm4gbmFtZTtcbn07XG52YXIgc2FmZU9iamVjdFByb3BlcnR5ID0gKG5hbWUpID0+IHtcbiAgaWYgKHJlc2VydmVkT2JqZWN0UHJvcGVydGllcy5oYXMobmFtZSkpIHtcbiAgICByZXR1cm4gZmFsbGJhY2sobmFtZSk7XG4gIH1cbiAgcmV0dXJuIG5hbWU7XG59O1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvQGJ1ZmJ1aWxkL3Byb3RvYnVmL2Rpc3QvZXNtL3ByaXZhdGUvZmllbGQuanNcbnZhciBJbnRlcm5hbE9uZW9mSW5mbyA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IobmFtZSkge1xuICAgIHRoaXMua2luZCA9IFwib25lb2ZcIjtcbiAgICB0aGlzLnJlcGVhdGVkID0gZmFsc2U7XG4gICAgdGhpcy5wYWNrZWQgPSBmYWxzZTtcbiAgICB0aGlzLm9wdCA9IGZhbHNlO1xuICAgIHRoaXMucmVxID0gZmFsc2U7XG4gICAgdGhpcy5kZWZhdWx0ID0gdm9pZCAwO1xuICAgIHRoaXMuZmllbGRzID0gW107XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmxvY2FsTmFtZSA9IGxvY2FsT25lb2ZOYW1lKG5hbWUpO1xuICB9XG4gIGFkZEZpZWxkKGZpZWxkKSB7XG4gICAgYXNzZXJ0KGZpZWxkLm9uZW9mID09PSB0aGlzLCBgZmllbGQgJHtmaWVsZC5uYW1lfSBub3Qgb25lIG9mICR7dGhpcy5uYW1lfWApO1xuICAgIHRoaXMuZmllbGRzLnB1c2goZmllbGQpO1xuICB9XG4gIGZpbmRGaWVsZChsb2NhbE5hbWUpIHtcbiAgICBpZiAoIXRoaXMuX2xvb2t1cCkge1xuICAgICAgdGhpcy5fbG9va3VwID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuX2xvb2t1cFt0aGlzLmZpZWxkc1tpXS5sb2NhbE5hbWVdID0gdGhpcy5maWVsZHNbaV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9sb29rdXBbbG9jYWxOYW1lXTtcbiAgfVxufTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0BidWZidWlsZC9wcm90b2J1Zi9kaXN0L2VzbS9wcml2YXRlL2ZpZWxkLW5vcm1hbGl6ZS5qc1xuZnVuY3Rpb24gbm9ybWFsaXplRmllbGRJbmZvcyhmaWVsZEluZm9zLCBwYWNrZWRCeURlZmF1bHQpIHtcbiAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XG4gIGNvbnN0IHIgPSBbXTtcbiAgbGV0IG87XG4gIGZvciAoY29uc3QgZmllbGQgb2YgdHlwZW9mIGZpZWxkSW5mb3MgPT0gXCJmdW5jdGlvblwiID8gZmllbGRJbmZvcygpIDogZmllbGRJbmZvcykge1xuICAgIGNvbnN0IGYgPSBmaWVsZDtcbiAgICBmLmxvY2FsTmFtZSA9IGxvY2FsRmllbGROYW1lKGZpZWxkLm5hbWUsIGZpZWxkLm9uZW9mICE9PSB2b2lkIDApO1xuICAgIGYuanNvbk5hbWUgPSAoX2EgPSBmaWVsZC5qc29uTmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmllbGRKc29uTmFtZShmaWVsZC5uYW1lKTtcbiAgICBmLnJlcGVhdGVkID0gKF9iID0gZmllbGQucmVwZWF0ZWQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGZhbHNlO1xuICAgIGlmIChmaWVsZC5raW5kID09IFwic2NhbGFyXCIpIHtcbiAgICAgIGYuTCA9IChfYyA9IGZpZWxkLkwpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IExvbmdUeXBlLkJJR0lOVDtcbiAgICB9XG4gICAgZi5kZWxpbWl0ZWQgPSAoX2QgPSBmaWVsZC5kZWxpbWl0ZWQpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IGZhbHNlO1xuICAgIGYucmVxID0gKF9lID0gZmllbGQucmVxKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBmYWxzZTtcbiAgICBmLm9wdCA9IChfZiA9IGZpZWxkLm9wdCkgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogZmFsc2U7XG4gICAgaWYgKGZpZWxkLnBhY2tlZCA9PT0gdm9pZCAwKSB7XG4gICAgICBpZiAocGFja2VkQnlEZWZhdWx0KSB7XG4gICAgICAgIGYucGFja2VkID0gZmllbGQua2luZCA9PSBcImVudW1cIiB8fCBmaWVsZC5raW5kID09IFwic2NhbGFyXCIgJiYgZmllbGQuVCAhPSBTY2FsYXJUeXBlLkJZVEVTICYmIGZpZWxkLlQgIT0gU2NhbGFyVHlwZS5TVFJJTkc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmLnBhY2tlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZmllbGQub25lb2YgIT09IHZvaWQgMCkge1xuICAgICAgY29uc3Qgb29uYW1lID0gdHlwZW9mIGZpZWxkLm9uZW9mID09IFwic3RyaW5nXCIgPyBmaWVsZC5vbmVvZiA6IGZpZWxkLm9uZW9mLm5hbWU7XG4gICAgICBpZiAoIW8gfHwgby5uYW1lICE9IG9vbmFtZSkge1xuICAgICAgICBvID0gbmV3IEludGVybmFsT25lb2ZJbmZvKG9vbmFtZSk7XG4gICAgICB9XG4gICAgICBmLm9uZW9mID0gbztcbiAgICAgIG8uYWRkRmllbGQoZik7XG4gICAgfVxuICAgIHIucHVzaChmKTtcbiAgfVxuICByZXR1cm4gcjtcbn1cblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0BidWZidWlsZC9wcm90b2J1Zi9kaXN0L2VzbS9wcm90bzMuanNcbnZhciBwcm90bzMgPSBtYWtlUHJvdG9SdW50aW1lKFxuICBcInByb3RvM1wiLFxuICAoZmllbGRzKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBJbnRlcm5hbEZpZWxkTGlzdChmaWVsZHMsIChzb3VyY2UpID0+IG5vcm1hbGl6ZUZpZWxkSW5mb3Moc291cmNlLCB0cnVlKSk7XG4gIH0sXG4gIC8vIFRPRE8gbWVyZ2Ugd2l0aCBwcm90bzIgYW5kIGluaXRFeHRlbnNpb25GaWVsZCwgYWxzbyBzZWUgaW5pdFBhcnRpYWwsIGVxdWFscywgY2xvbmVcbiAgKHRhcmdldCkgPT4ge1xuICAgIGZvciAoY29uc3QgbWVtYmVyIG9mIHRhcmdldC5nZXRUeXBlKCkuZmllbGRzLmJ5TWVtYmVyKCkpIHtcbiAgICAgIGlmIChtZW1iZXIub3B0KSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgbmFtZSA9IG1lbWJlci5sb2NhbE5hbWUsIHQgPSB0YXJnZXQ7XG4gICAgICBpZiAobWVtYmVyLnJlcGVhdGVkKSB7XG4gICAgICAgIHRbbmFtZV0gPSBbXTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBzd2l0Y2ggKG1lbWJlci5raW5kKSB7XG4gICAgICAgIGNhc2UgXCJvbmVvZlwiOlxuICAgICAgICAgIHRbbmFtZV0gPSB7IGNhc2U6IHZvaWQgMCB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiZW51bVwiOlxuICAgICAgICAgIHRbbmFtZV0gPSAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwibWFwXCI6XG4gICAgICAgICAgdFtuYW1lXSA9IHt9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwic2NhbGFyXCI6XG4gICAgICAgICAgdFtuYW1lXSA9IHNjYWxhclplcm9WYWx1ZShtZW1iZXIuVCwgbWVtYmVyLkwpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuKTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0BidWZidWlsZC9wcm90b2J1Zi9kaXN0L2VzbS9wcm90bzIuanNcbnZhciBwcm90bzIgPSBtYWtlUHJvdG9SdW50aW1lKFxuICBcInByb3RvMlwiLFxuICAoZmllbGRzKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBJbnRlcm5hbEZpZWxkTGlzdChmaWVsZHMsIChzb3VyY2UpID0+IG5vcm1hbGl6ZUZpZWxkSW5mb3Moc291cmNlLCBmYWxzZSkpO1xuICB9LFxuICAvLyBUT0RPIG1lcmdlIHdpdGggcHJvdG8zIGFuZCBpbml0RXh0ZW5zaW9uRmllbGQsIGFsc28gc2VlIGluaXRQYXJ0aWFsLCBlcXVhbHMsIGNsb25lXG4gICh0YXJnZXQpID0+IHtcbiAgICBmb3IgKGNvbnN0IG1lbWJlciBvZiB0YXJnZXQuZ2V0VHlwZSgpLmZpZWxkcy5ieU1lbWJlcigpKSB7XG4gICAgICBjb25zdCBuYW1lID0gbWVtYmVyLmxvY2FsTmFtZSwgdCA9IHRhcmdldDtcbiAgICAgIGlmIChtZW1iZXIucmVwZWF0ZWQpIHtcbiAgICAgICAgdFtuYW1lXSA9IFtdO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHN3aXRjaCAobWVtYmVyLmtpbmQpIHtcbiAgICAgICAgY2FzZSBcIm9uZW9mXCI6XG4gICAgICAgICAgdFtuYW1lXSA9IHsgY2FzZTogdm9pZCAwIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJtYXBcIjpcbiAgICAgICAgICB0W25hbWVdID0ge307XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4pO1xuXG4vLyAuLi9wcm90b2MvZGlzdC9ydGMvcnRwX3BhcmFtZXRlcnNfcGIuanNcbnZhciBQcm90b1J0Y3BGZWVkYmFjayA9IGNsYXNzIF9Qcm90b1J0Y3BGZWVkYmFjayBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBzdHJpbmcgdHlwZSA9IDE7XG4gICAqL1xuICB0eXBlID0gXCJcIjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogc3RyaW5nIHBhcmFtZXRlciA9IDI7XG4gICAqL1xuICBwYXJhbWV0ZXIgPSBcIlwiO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzMudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMztcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJQcm90b1J0Y3BGZWVkYmFja1wiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8zLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7XG4gICAgICBubzogMSxcbiAgICAgIG5hbWU6IFwidHlwZVwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDlcbiAgICAgIC8qIFNjYWxhclR5cGUuU1RSSU5HICovXG4gICAgfSxcbiAgICB7XG4gICAgICBubzogMixcbiAgICAgIG5hbWU6IFwicGFyYW1ldGVyXCIsXG4gICAgICBraW5kOiBcInNjYWxhclwiLFxuICAgICAgVDogOVxuICAgICAgLyogU2NhbGFyVHlwZS5TVFJJTkcgKi9cbiAgICB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb3RvUnRjcEZlZWRiYWNrKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb3RvUnRjcEZlZWRiYWNrKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb3RvUnRjcEZlZWRiYWNrKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMy51dGlsLmVxdWFscyhfUHJvdG9SdGNwRmVlZGJhY2ssIGEsIGIpO1xuICB9XG59O1xudmFyIFByb3RvQ29kZWNQYXJhbWV0ZXJzID0gY2xhc3MgX1Byb3RvQ29kZWNQYXJhbWV0ZXJzIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHN0cmluZyBtaW1lVHlwZSA9IDE7XG4gICAqL1xuICBtaW1lVHlwZSA9IFwiXCI7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IGludDMyIHBheWxvYWRUeXBlID0gMjtcbiAgICovXG4gIHBheWxvYWRUeXBlID0gMDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogaW50MzIgY2xvY2tSYXRlID0gMztcbiAgICovXG4gIGNsb2NrUmF0ZSA9IDA7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IGludDMyIGNoYW5uZWxzID0gNDtcbiAgICovXG4gIGNoYW5uZWxzID0gMDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogbWFwPHN0cmluZywgc3RyaW5nPiBwYXJhbWV0ZXJzID0gNjtcbiAgICovXG4gIHBhcmFtZXRlcnMgPSB7fTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVwZWF0ZWQgUHJvdG9SdGNwRmVlZGJhY2sgcnRjcEZlZWRiYWNrID0gNztcbiAgICovXG4gIHJ0Y3BGZWVkYmFjayA9IFtdO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzMudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMztcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJQcm90b0NvZGVjUGFyYW1ldGVyc1wiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8zLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7XG4gICAgICBubzogMSxcbiAgICAgIG5hbWU6IFwibWltZVR5cGVcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA5XG4gICAgICAvKiBTY2FsYXJUeXBlLlNUUklORyAqL1xuICAgIH0sXG4gICAge1xuICAgICAgbm86IDIsXG4gICAgICBuYW1lOiBcInBheWxvYWRUeXBlXCIsXG4gICAgICBraW5kOiBcInNjYWxhclwiLFxuICAgICAgVDogNVxuICAgICAgLyogU2NhbGFyVHlwZS5JTlQzMiAqL1xuICAgIH0sXG4gICAge1xuICAgICAgbm86IDMsXG4gICAgICBuYW1lOiBcImNsb2NrUmF0ZVwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDVcbiAgICAgIC8qIFNjYWxhclR5cGUuSU5UMzIgKi9cbiAgICB9LFxuICAgIHtcbiAgICAgIG5vOiA0LFxuICAgICAgbmFtZTogXCJjaGFubmVsc1wiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDVcbiAgICAgIC8qIFNjYWxhclR5cGUuSU5UMzIgKi9cbiAgICB9LFxuICAgIHsgbm86IDYsIG5hbWU6IFwicGFyYW1ldGVyc1wiLCBraW5kOiBcIm1hcFwiLCBLOiA5LCBWOiB7XG4gICAgICBraW5kOiBcInNjYWxhclwiLFxuICAgICAgVDogOVxuICAgICAgLyogU2NhbGFyVHlwZS5TVFJJTkcgKi9cbiAgICB9IH0sXG4gICAgeyBubzogNywgbmFtZTogXCJydGNwRmVlZGJhY2tcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFByb3RvUnRjcEZlZWRiYWNrLCByZXBlYXRlZDogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb3RvQ29kZWNQYXJhbWV0ZXJzKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb3RvQ29kZWNQYXJhbWV0ZXJzKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb3RvQ29kZWNQYXJhbWV0ZXJzKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMy51dGlsLmVxdWFscyhfUHJvdG9Db2RlY1BhcmFtZXRlcnMsIGEsIGIpO1xuICB9XG59O1xudmFyIFByb3RvSGVhZGVyRXh0ZW5zaW9uUGFyYW1ldGVycyA9IGNsYXNzIF9Qcm90b0hlYWRlckV4dGVuc2lvblBhcmFtZXRlcnMgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogc3RyaW5nIHVyaSA9IDE7XG4gICAqL1xuICB1cmkgPSBcIlwiO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBpbnQzMiBpZCA9IDI7XG4gICAqL1xuICBpZCA9IDA7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IGJvb2wgZW5jcnlwdCA9IDM7XG4gICAqL1xuICBlbmNyeXB0ID0gZmFsc2U7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IG1hcDxzdHJpbmcsIHN0cmluZz4gcGFyYW1ldGVycyA9IDQ7XG4gICAqL1xuICBwYXJhbWV0ZXJzID0ge307XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMy51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8zO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIlByb3RvSGVhZGVyRXh0ZW5zaW9uUGFyYW1ldGVyc1wiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8zLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7XG4gICAgICBubzogMSxcbiAgICAgIG5hbWU6IFwidXJpXCIsXG4gICAgICBraW5kOiBcInNjYWxhclwiLFxuICAgICAgVDogOVxuICAgICAgLyogU2NhbGFyVHlwZS5TVFJJTkcgKi9cbiAgICB9LFxuICAgIHtcbiAgICAgIG5vOiAyLFxuICAgICAgbmFtZTogXCJpZFwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDVcbiAgICAgIC8qIFNjYWxhclR5cGUuSU5UMzIgKi9cbiAgICB9LFxuICAgIHtcbiAgICAgIG5vOiAzLFxuICAgICAgbmFtZTogXCJlbmNyeXB0XCIsXG4gICAgICBraW5kOiBcInNjYWxhclwiLFxuICAgICAgVDogOFxuICAgICAgLyogU2NhbGFyVHlwZS5CT09MICovXG4gICAgfSxcbiAgICB7IG5vOiA0LCBuYW1lOiBcInBhcmFtZXRlcnNcIiwga2luZDogXCJtYXBcIiwgSzogOSwgVjoge1xuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDlcbiAgICAgIC8qIFNjYWxhclR5cGUuU1RSSU5HICovXG4gICAgfSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb3RvSGVhZGVyRXh0ZW5zaW9uUGFyYW1ldGVycygpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b0hlYWRlckV4dGVuc2lvblBhcmFtZXRlcnMoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvdG9IZWFkZXJFeHRlbnNpb25QYXJhbWV0ZXJzKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMy51dGlsLmVxdWFscyhfUHJvdG9IZWFkZXJFeHRlbnNpb25QYXJhbWV0ZXJzLCBhLCBiKTtcbiAgfVxufTtcbnZhciBQcm90b0VuY29kaW5ncyA9IGNsYXNzIF9Qcm90b0VuY29kaW5ncyBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBpbnQ2NCBzc3JjID0gMTtcbiAgICovXG4gIHNzcmMgPSBwcm90b0ludDY0Lnplcm87XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHN0cmluZyByaWQgPSAyO1xuICAgKi9cbiAgcmlkID0gXCJcIjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogaW50MzIgY29kZWNQYXlsb2FkVHlwZSA9IDM7XG4gICAqL1xuICBjb2RlY1BheWxvYWRUeXBlID0gMDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogUHJvdG9FbmNvZGluZ3MuUHJvdG9SVFggcnR4ID0gNDtcbiAgICovXG4gIHJ0eDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogYm9vbCBkdHggPSA1O1xuICAgKi9cbiAgZHR4ID0gZmFsc2U7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHN0cmluZyBzY2FsYWJpbGl0eU1vZGUgPSA2O1xuICAgKi9cbiAgc2NhbGFiaWxpdHlNb2RlID0gXCJcIjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogaW50MzIgc2NhbGVSZXNvbHV0aW9uRG93bkJ5ID0gNztcbiAgICovXG4gIHNjYWxlUmVzb2x1dGlvbkRvd25CeSA9IDA7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IGludDMyIG1heEJpdHJhdGUgPSA4O1xuICAgKi9cbiAgbWF4Qml0cmF0ZSA9IDA7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IGJvb2wgYWN0aXZlID0gOTtcbiAgICovXG4gIGFjdGl2ZSA9IGZhbHNlO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBpbnQzMiBtYXhGcmFtZXJhdGUgPSAxMDtcbiAgICovXG4gIG1heEZyYW1lcmF0ZSA9IDA7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMy51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8zO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIlByb3RvRW5jb2RpbmdzXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzMudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHtcbiAgICAgIG5vOiAxLFxuICAgICAgbmFtZTogXCJzc3JjXCIsXG4gICAgICBraW5kOiBcInNjYWxhclwiLFxuICAgICAgVDogM1xuICAgICAgLyogU2NhbGFyVHlwZS5JTlQ2NCAqL1xuICAgIH0sXG4gICAge1xuICAgICAgbm86IDIsXG4gICAgICBuYW1lOiBcInJpZFwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDlcbiAgICAgIC8qIFNjYWxhclR5cGUuU1RSSU5HICovXG4gICAgfSxcbiAgICB7XG4gICAgICBubzogMyxcbiAgICAgIG5hbWU6IFwiY29kZWNQYXlsb2FkVHlwZVwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDVcbiAgICAgIC8qIFNjYWxhclR5cGUuSU5UMzIgKi9cbiAgICB9LFxuICAgIHsgbm86IDQsIG5hbWU6IFwicnR4XCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBQcm90b0VuY29kaW5nc19Qcm90b1JUWCB9LFxuICAgIHtcbiAgICAgIG5vOiA1LFxuICAgICAgbmFtZTogXCJkdHhcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA4XG4gICAgICAvKiBTY2FsYXJUeXBlLkJPT0wgKi9cbiAgICB9LFxuICAgIHtcbiAgICAgIG5vOiA2LFxuICAgICAgbmFtZTogXCJzY2FsYWJpbGl0eU1vZGVcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA5XG4gICAgICAvKiBTY2FsYXJUeXBlLlNUUklORyAqL1xuICAgIH0sXG4gICAge1xuICAgICAgbm86IDcsXG4gICAgICBuYW1lOiBcInNjYWxlUmVzb2x1dGlvbkRvd25CeVwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDVcbiAgICAgIC8qIFNjYWxhclR5cGUuSU5UMzIgKi9cbiAgICB9LFxuICAgIHtcbiAgICAgIG5vOiA4LFxuICAgICAgbmFtZTogXCJtYXhCaXRyYXRlXCIsXG4gICAgICBraW5kOiBcInNjYWxhclwiLFxuICAgICAgVDogNVxuICAgICAgLyogU2NhbGFyVHlwZS5JTlQzMiAqL1xuICAgIH0sXG4gICAge1xuICAgICAgbm86IDksXG4gICAgICBuYW1lOiBcImFjdGl2ZVwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDhcbiAgICAgIC8qIFNjYWxhclR5cGUuQk9PTCAqL1xuICAgIH0sXG4gICAge1xuICAgICAgbm86IDEwLFxuICAgICAgbmFtZTogXCJtYXhGcmFtZXJhdGVcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA1XG4gICAgICAvKiBTY2FsYXJUeXBlLklOVDMyICovXG4gICAgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b0VuY29kaW5ncygpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b0VuY29kaW5ncygpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b0VuY29kaW5ncygpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzMudXRpbC5lcXVhbHMoX1Byb3RvRW5jb2RpbmdzLCBhLCBiKTtcbiAgfVxufTtcbnZhciBQcm90b0VuY29kaW5nc19Qcm90b1JUWCA9IGNsYXNzIF9Qcm90b0VuY29kaW5nc19Qcm90b1JUWCBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBpbnQ2NCBzc3JjID0gMTtcbiAgICovXG4gIHNzcmMgPSBwcm90b0ludDY0Lnplcm87XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMy51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8zO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIlByb3RvRW5jb2RpbmdzLlByb3RvUlRYXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzMudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHtcbiAgICAgIG5vOiAxLFxuICAgICAgbmFtZTogXCJzc3JjXCIsXG4gICAgICBraW5kOiBcInNjYWxhclwiLFxuICAgICAgVDogM1xuICAgICAgLyogU2NhbGFyVHlwZS5JTlQ2NCAqL1xuICAgIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvdG9FbmNvZGluZ3NfUHJvdG9SVFgoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvdG9FbmNvZGluZ3NfUHJvdG9SVFgoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvdG9FbmNvZGluZ3NfUHJvdG9SVFgoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8zLnV0aWwuZXF1YWxzKF9Qcm90b0VuY29kaW5nc19Qcm90b1JUWCwgYSwgYik7XG4gIH1cbn07XG52YXIgUnRjcFBhcmFtZXRlcnMgPSBjbGFzcyBfUnRjcFBhcmFtZXRlcnMgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogc3RyaW5nIGNuYW1lID0gMTtcbiAgICovXG4gIGNuYW1lID0gXCJcIjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogYm9vbCByZWR1Y2VkU2l6ZSA9IDI7XG4gICAqL1xuICByZWR1Y2VkU2l6ZSA9IGZhbHNlO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBib29sIG11eCA9IDM7XG4gICAqL1xuICBtdXggPSBmYWxzZTtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8zLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzM7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiUnRjcFBhcmFtZXRlcnNcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMy51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAge1xuICAgICAgbm86IDEsXG4gICAgICBuYW1lOiBcImNuYW1lXCIsXG4gICAgICBraW5kOiBcInNjYWxhclwiLFxuICAgICAgVDogOVxuICAgICAgLyogU2NhbGFyVHlwZS5TVFJJTkcgKi9cbiAgICB9LFxuICAgIHtcbiAgICAgIG5vOiAyLFxuICAgICAgbmFtZTogXCJyZWR1Y2VkU2l6ZVwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDhcbiAgICAgIC8qIFNjYWxhclR5cGUuQk9PTCAqL1xuICAgIH0sXG4gICAge1xuICAgICAgbm86IDMsXG4gICAgICBuYW1lOiBcIm11eFwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDhcbiAgICAgIC8qIFNjYWxhclR5cGUuQk9PTCAqL1xuICAgIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUnRjcFBhcmFtZXRlcnMoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUnRjcFBhcmFtZXRlcnMoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUnRjcFBhcmFtZXRlcnMoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8zLnV0aWwuZXF1YWxzKF9SdGNwUGFyYW1ldGVycywgYSwgYik7XG4gIH1cbn07XG52YXIgUHJvdG9SdHBQYXJhbWV0ZXJzID0gY2xhc3MgX1Byb3RvUnRwUGFyYW1ldGVycyBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBzdHJpbmcgbWlkID0gMTtcbiAgICovXG4gIG1pZCA9IFwiXCI7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcGVhdGVkIFByb3RvQ29kZWNQYXJhbWV0ZXJzIGNvZGVjcyA9IDI7XG4gICAqL1xuICBjb2RlY3MgPSBbXTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVwZWF0ZWQgUHJvdG9IZWFkZXJFeHRlbnNpb25QYXJhbWV0ZXJzIGhlYWRlckV4dGVuc2lvbnMgPSAzO1xuICAgKi9cbiAgaGVhZGVyRXh0ZW5zaW9ucyA9IFtdO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXBlYXRlZCBQcm90b0VuY29kaW5ncyBlbmNvZGluZ3MgPSA0O1xuICAgKi9cbiAgZW5jb2RpbmdzID0gW107XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IFJ0Y3BQYXJhbWV0ZXJzIHJ0Y3AgPSA1O1xuICAgKi9cbiAgcnRjcDtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8zLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzM7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiUHJvdG9SdHBQYXJhbWV0ZXJzXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzMudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHtcbiAgICAgIG5vOiAxLFxuICAgICAgbmFtZTogXCJtaWRcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA5XG4gICAgICAvKiBTY2FsYXJUeXBlLlNUUklORyAqL1xuICAgIH0sXG4gICAgeyBubzogMiwgbmFtZTogXCJjb2RlY3NcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFByb3RvQ29kZWNQYXJhbWV0ZXJzLCByZXBlYXRlZDogdHJ1ZSB9LFxuICAgIHsgbm86IDMsIG5hbWU6IFwiaGVhZGVyRXh0ZW5zaW9uc1wiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogUHJvdG9IZWFkZXJFeHRlbnNpb25QYXJhbWV0ZXJzLCByZXBlYXRlZDogdHJ1ZSB9LFxuICAgIHsgbm86IDQsIG5hbWU6IFwiZW5jb2RpbmdzXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBQcm90b0VuY29kaW5ncywgcmVwZWF0ZWQ6IHRydWUgfSxcbiAgICB7IG5vOiA1LCBuYW1lOiBcInJ0Y3BcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFJ0Y3BQYXJhbWV0ZXJzIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvdG9SdHBQYXJhbWV0ZXJzKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb3RvUnRwUGFyYW1ldGVycygpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b1J0cFBhcmFtZXRlcnMoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8zLnV0aWwuZXF1YWxzKF9Qcm90b1J0cFBhcmFtZXRlcnMsIGEsIGIpO1xuICB9XG59O1xuKGNsYXNzIF9Qcm90b1NydHBQYXJhbWV0ZXJzIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHN0cmluZyBjcnlwdG9TdWl0ZSA9IDE7XG4gICAqL1xuICBjcnlwdG9TdWl0ZSA9IFwiXCI7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHN0cmluZyBrZXlCYXNlNjQgPSAyO1xuICAgKi9cbiAga2V5QmFzZTY0ID0gXCJcIjtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8zLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzM7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiUHJvdG9TcnRwUGFyYW1ldGVyc1wiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8zLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7XG4gICAgICBubzogMSxcbiAgICAgIG5hbWU6IFwiY3J5cHRvU3VpdGVcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA5XG4gICAgICAvKiBTY2FsYXJUeXBlLlNUUklORyAqL1xuICAgIH0sXG4gICAge1xuICAgICAgbm86IDIsXG4gICAgICBuYW1lOiBcImtleUJhc2U2NFwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDlcbiAgICAgIC8qIFNjYWxhclR5cGUuU1RSSU5HICovXG4gICAgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b1NydHBQYXJhbWV0ZXJzKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb3RvU3J0cFBhcmFtZXRlcnMoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvdG9TcnRwUGFyYW1ldGVycygpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzMudXRpbC5lcXVhbHMoX1Byb3RvU3J0cFBhcmFtZXRlcnMsIGEsIGIpO1xuICB9XG59KTtcbihjbGFzcyBfUHJvdG9UcmFuc3BvcnRUdXBsZSBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBzdHJpbmcgbG9jYWxJcCA9IDE7XG4gICAqL1xuICBsb2NhbElwID0gXCJcIjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogaW50MzIgbG9jYWxQb3J0ID0gMjtcbiAgICovXG4gIGxvY2FsUG9ydCA9IDA7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHN0cmluZyByZW1vdGVJcCA9IDM7XG4gICAqL1xuICByZW1vdGVJcCA9IFwiXCI7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IGludDMyIHJlbW90ZVBvcnQgPSA0O1xuICAgKi9cbiAgcmVtb3RlUG9ydCA9IDA7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHN0cmluZyBwcm90b2NvbCA9IDU7XG4gICAqL1xuICBwcm90b2NvbCA9IFwiXCI7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHN0cmluZyBsb2NhbEFkZHJlc3MgPSA2O1xuICAgKi9cbiAgbG9jYWxBZGRyZXNzID0gXCJcIjtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8zLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzM7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiUHJvdG9UcmFuc3BvcnRUdXBsZVwiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8zLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7XG4gICAgICBubzogMSxcbiAgICAgIG5hbWU6IFwibG9jYWxJcFwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDlcbiAgICAgIC8qIFNjYWxhclR5cGUuU1RSSU5HICovXG4gICAgfSxcbiAgICB7XG4gICAgICBubzogMixcbiAgICAgIG5hbWU6IFwibG9jYWxQb3J0XCIsXG4gICAgICBraW5kOiBcInNjYWxhclwiLFxuICAgICAgVDogNVxuICAgICAgLyogU2NhbGFyVHlwZS5JTlQzMiAqL1xuICAgIH0sXG4gICAge1xuICAgICAgbm86IDMsXG4gICAgICBuYW1lOiBcInJlbW90ZUlwXCIsXG4gICAgICBraW5kOiBcInNjYWxhclwiLFxuICAgICAgVDogOVxuICAgICAgLyogU2NhbGFyVHlwZS5TVFJJTkcgKi9cbiAgICB9LFxuICAgIHtcbiAgICAgIG5vOiA0LFxuICAgICAgbmFtZTogXCJyZW1vdGVQb3J0XCIsXG4gICAgICBraW5kOiBcInNjYWxhclwiLFxuICAgICAgVDogNVxuICAgICAgLyogU2NhbGFyVHlwZS5JTlQzMiAqL1xuICAgIH0sXG4gICAge1xuICAgICAgbm86IDUsXG4gICAgICBuYW1lOiBcInByb3RvY29sXCIsXG4gICAgICBraW5kOiBcInNjYWxhclwiLFxuICAgICAgVDogOVxuICAgICAgLyogU2NhbGFyVHlwZS5TVFJJTkcgKi9cbiAgICB9LFxuICAgIHtcbiAgICAgIG5vOiA2LFxuICAgICAgbmFtZTogXCJsb2NhbEFkZHJlc3NcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA5XG4gICAgICAvKiBTY2FsYXJUeXBlLlNUUklORyAqL1xuICAgIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvdG9UcmFuc3BvcnRUdXBsZSgpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b1RyYW5zcG9ydFR1cGxlKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb3RvVHJhbnNwb3J0VHVwbGUoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8zLnV0aWwuZXF1YWxzKF9Qcm90b1RyYW5zcG9ydFR1cGxlLCBhLCBiKTtcbiAgfVxufSk7XG5cbmV4cG9ydCB7IE1lc3NhZ2UsIFByb3RvRW5jb2RpbmdzLCBQcm90b1J0cFBhcmFtZXRlcnMsIHByb3RvMiwgcHJvdG8zIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-DFNYORIF.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-E2DU7IIE.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-E2DU7IIE.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Permissions_default: () => (/* binding */ Permissions_default),\n/* harmony export */   checkPermissions: () => (/* binding */ checkPermissions),\n/* harmony export */   checkProducePermissions: () => (/* binding */ checkProducePermissions)\n/* harmony export */ });\n/* harmony import */ var _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-TOCFOGTC.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-TOCFOGTC.js\");\n/* harmony import */ var _chunk_BW2DGP4D_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-BW2DGP4D.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-BW2DGP4D.js\");\n\n\n\n// src/Permissions.ts\nvar logger = _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_0__.mainLogger.createSubLogger(\"Permissions\");\nvar Permissions = class _Permissions extends _chunk_BW2DGP4D_js__WEBPACK_IMPORTED_MODULE_1__.EnhancedEventEmitter {\n  /**\n   * Get the Singleton Instance of the Permissions Class.\n   */\n  static __instance;\n  /**\n   * Admin Access of the Room.\n   */\n  __admin = false;\n  /**\n   * Can Consume Media Stream of the Room from RemotePeers;\n   */\n  __canConsume = false;\n  /**\n   * Can Produce Media Stream to the Room\n   */\n  __canProduce = true;\n  /**\n   * Allowed Sources to Produce Media Stream to the Room\n   */\n  __canProduceSources = {\n    cam: true,\n    mic: true,\n    screen: true\n  };\n  /**\n   * Can Send Data to the Room, e.g. Chat Messages, update of avatar, name etc. to the room\n   */\n  __canSendData = false;\n  /**\n   * Can Receive Data from the Room, e.g. Chat Messages, update of avatar, name etc. from other Remote Peers.\n   */\n  __canRecvData = false;\n  /**\n   * Can Update Metadata of the Room, e.g. DisplayName, Avatar, etc.\n   */\n  __canUpdateMetadata = false;\n  /**\n   * Custom Role of the Peer in the Room.\n   */\n  __role = null;\n  /**\n   * Getter for the role of the peer.\n   */\n  get role() {\n    return this.__role;\n  }\n  set role(role) {\n    this.__role = role;\n  }\n  /**\n   * Get the Access Control List ( acl ) of the Local Peer in the Room.\n   */\n  get acl() {\n    return {\n      admin: this.__admin,\n      canConsume: this.__canConsume,\n      canProduce: this.__canProduce,\n      canProduceSources: this.__canProduceSources,\n      canSendData: this.__canSendData,\n      canRecvData: this.__canRecvData,\n      canUpdateMetadata: this.__canUpdateMetadata\n    };\n  }\n  /**\n   * Update the Permissions of the Local Peer in the Room. This will emit an event `updated` with the updated permissions.\n   *\n   * `NOTE: If the Peer is not an admin, then the permissions will not be updated on the server`\n   */\n  updatePermissions(permissions) {\n    logger.info(\"\\u{1F514} Updating Permissions\", permissions);\n    this.__admin = permissions.admin ?? this.__admin;\n    this.__canConsume = permissions.canConsume ?? this.__canConsume;\n    this.__canProduce = permissions.canProduce ?? this.__canProduce;\n    this.__canProduceSources = permissions.canProduceSources ?? this.__canProduceSources;\n    this.__canSendData = permissions.canSendData ?? this.__canSendData;\n    this.__canRecvData = permissions.canRecvData ?? this.__canRecvData;\n    this.__canUpdateMetadata = permissions.canUpdateMetadata ?? this.__canUpdateMetadata;\n  }\n  static createInstance() {\n    if (_Permissions.__instance) return _Permissions.__instance;\n    _Permissions.__instance = new _Permissions();\n    return _Permissions.__instance;\n  }\n  static getInstance() {\n    if (!_Permissions.__instance) {\n      throw new Error(\"Permissions Instance not created yet.\");\n    }\n    return _Permissions.__instance;\n  }\n  constructor() {\n    super();\n  }\n  reset() {\n    this.__admin = false;\n    this.__canConsume = false;\n    this.__canProduce = true;\n    this.__canProduceSources = {\n      cam: true,\n      mic: true,\n      screen: true\n    };\n    this.__canSendData = false;\n    this.__canRecvData = false;\n    this.__canUpdateMetadata = false;\n    this.__role = null;\n  }\n};\nvar checkPermissions = (permission) => {\n  return {\n    validate: (fn) => {\n      return (...args) => {\n        return new Promise((resolve, reject) => {\n          try {\n            const peerPermission = Permissions.getInstance().acl;\n            if (permission?.admin && !peerPermission.admin) {\n              throw new Error(\"Admin Access Required.\");\n            }\n            if (permission?.canConsume && !peerPermission.canConsume) {\n              throw new Error(\"Can Consume Access Required.\");\n            }\n            if (permission?.canProduce && !peerPermission.canProduce) {\n              throw new Error(\"Can Produce Access Required.\");\n            }\n            if (permission?.canProduceSources?.cam && !peerPermission.canProduceSources.cam) {\n              throw new Error(\"Produce Sources Access Required. for 'cam'\");\n            }\n            if (permission?.canProduceSources?.mic && !peerPermission.canProduceSources.mic) {\n              throw new Error(\"Produce Sources Access Required. for 'mic'\");\n            }\n            if (permission?.canProduceSources?.screen && !peerPermission.canProduceSources.screen) {\n              throw new Error(\"Produce Sources Access Required. for 'screen'\");\n            }\n            if (permission?.canSendData && !peerPermission.canSendData) {\n              throw new Error(\"Can Send Data Access Required.\");\n            }\n            if (permission?.canRecvData && !peerPermission.canRecvData) {\n              throw new Error(\"Can Recv Data Access Required.\");\n            }\n            fn(...args).then((data) => {\n              resolve(data);\n            }).catch((error) => {\n              reject(error);\n            });\n          } catch (error) {\n            logger.error(\"CheckPermissions Failed, Access Required\", error);\n            reject(error);\n          }\n        });\n      };\n    }\n  };\n};\nvar checkProducePermissions = (label) => {\n  const permissions = Permissions.getInstance().acl;\n  let error = false;\n  if (!permissions.canProduce) {\n    error = true;\n  }\n  if (label === \"video\" && !permissions.canProduceSources.cam) {\n    error = true;\n  } else if (label === \"audio\" && !permissions.canProduceSources.mic) {\n    error = true;\n  } else if (label.startsWith(\"screen-share\") && !permissions.canProduceSources.screen) {\n    error = true;\n  }\n  return error;\n};\nvar Permissions_default = Permissions;\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstRTJEVTdJSUUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBaUQ7QUFDVTs7QUFFM0Q7QUFDQSxhQUFhLDBEQUFVO0FBQ3ZCLDZDQUE2QyxvRUFBb0I7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLE9BQU87QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2IsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFMEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2tlbW9uLWdhbWUtZXRoaW5kaWEtMS8uL25vZGVfbW9kdWxlcy9AaHVkZGxlMDEvd2ViLWNvcmUvZGlzdC9jaHVuay1FMkRVN0lJRS5qcz8zMWUwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1haW5Mb2dnZXIgfSBmcm9tICcuL2NodW5rLVRPQ0ZPR1RDLmpzJztcbmltcG9ydCB7IEVuaGFuY2VkRXZlbnRFbWl0dGVyIH0gZnJvbSAnLi9jaHVuay1CVzJER1A0RC5qcyc7XG5cbi8vIHNyYy9QZXJtaXNzaW9ucy50c1xudmFyIGxvZ2dlciA9IG1haW5Mb2dnZXIuY3JlYXRlU3ViTG9nZ2VyKFwiUGVybWlzc2lvbnNcIik7XG52YXIgUGVybWlzc2lvbnMgPSBjbGFzcyBfUGVybWlzc2lvbnMgZXh0ZW5kcyBFbmhhbmNlZEV2ZW50RW1pdHRlciB7XG4gIC8qKlxuICAgKiBHZXQgdGhlIFNpbmdsZXRvbiBJbnN0YW5jZSBvZiB0aGUgUGVybWlzc2lvbnMgQ2xhc3MuXG4gICAqL1xuICBzdGF0aWMgX19pbnN0YW5jZTtcbiAgLyoqXG4gICAqIEFkbWluIEFjY2VzcyBvZiB0aGUgUm9vbS5cbiAgICovXG4gIF9fYWRtaW4gPSBmYWxzZTtcbiAgLyoqXG4gICAqIENhbiBDb25zdW1lIE1lZGlhIFN0cmVhbSBvZiB0aGUgUm9vbSBmcm9tIFJlbW90ZVBlZXJzO1xuICAgKi9cbiAgX19jYW5Db25zdW1lID0gZmFsc2U7XG4gIC8qKlxuICAgKiBDYW4gUHJvZHVjZSBNZWRpYSBTdHJlYW0gdG8gdGhlIFJvb21cbiAgICovXG4gIF9fY2FuUHJvZHVjZSA9IHRydWU7XG4gIC8qKlxuICAgKiBBbGxvd2VkIFNvdXJjZXMgdG8gUHJvZHVjZSBNZWRpYSBTdHJlYW0gdG8gdGhlIFJvb21cbiAgICovXG4gIF9fY2FuUHJvZHVjZVNvdXJjZXMgPSB7XG4gICAgY2FtOiB0cnVlLFxuICAgIG1pYzogdHJ1ZSxcbiAgICBzY3JlZW46IHRydWVcbiAgfTtcbiAgLyoqXG4gICAqIENhbiBTZW5kIERhdGEgdG8gdGhlIFJvb20sIGUuZy4gQ2hhdCBNZXNzYWdlcywgdXBkYXRlIG9mIGF2YXRhciwgbmFtZSBldGMuIHRvIHRoZSByb29tXG4gICAqL1xuICBfX2NhblNlbmREYXRhID0gZmFsc2U7XG4gIC8qKlxuICAgKiBDYW4gUmVjZWl2ZSBEYXRhIGZyb20gdGhlIFJvb20sIGUuZy4gQ2hhdCBNZXNzYWdlcywgdXBkYXRlIG9mIGF2YXRhciwgbmFtZSBldGMuIGZyb20gb3RoZXIgUmVtb3RlIFBlZXJzLlxuICAgKi9cbiAgX19jYW5SZWN2RGF0YSA9IGZhbHNlO1xuICAvKipcbiAgICogQ2FuIFVwZGF0ZSBNZXRhZGF0YSBvZiB0aGUgUm9vbSwgZS5nLiBEaXNwbGF5TmFtZSwgQXZhdGFyLCBldGMuXG4gICAqL1xuICBfX2NhblVwZGF0ZU1ldGFkYXRhID0gZmFsc2U7XG4gIC8qKlxuICAgKiBDdXN0b20gUm9sZSBvZiB0aGUgUGVlciBpbiB0aGUgUm9vbS5cbiAgICovXG4gIF9fcm9sZSA9IG51bGw7XG4gIC8qKlxuICAgKiBHZXR0ZXIgZm9yIHRoZSByb2xlIG9mIHRoZSBwZWVyLlxuICAgKi9cbiAgZ2V0IHJvbGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX19yb2xlO1xuICB9XG4gIHNldCByb2xlKHJvbGUpIHtcbiAgICB0aGlzLl9fcm9sZSA9IHJvbGU7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgQWNjZXNzIENvbnRyb2wgTGlzdCAoIGFjbCApIG9mIHRoZSBMb2NhbCBQZWVyIGluIHRoZSBSb29tLlxuICAgKi9cbiAgZ2V0IGFjbCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYWRtaW46IHRoaXMuX19hZG1pbixcbiAgICAgIGNhbkNvbnN1bWU6IHRoaXMuX19jYW5Db25zdW1lLFxuICAgICAgY2FuUHJvZHVjZTogdGhpcy5fX2NhblByb2R1Y2UsXG4gICAgICBjYW5Qcm9kdWNlU291cmNlczogdGhpcy5fX2NhblByb2R1Y2VTb3VyY2VzLFxuICAgICAgY2FuU2VuZERhdGE6IHRoaXMuX19jYW5TZW5kRGF0YSxcbiAgICAgIGNhblJlY3ZEYXRhOiB0aGlzLl9fY2FuUmVjdkRhdGEsXG4gICAgICBjYW5VcGRhdGVNZXRhZGF0YTogdGhpcy5fX2NhblVwZGF0ZU1ldGFkYXRhXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHRoZSBQZXJtaXNzaW9ucyBvZiB0aGUgTG9jYWwgUGVlciBpbiB0aGUgUm9vbS4gVGhpcyB3aWxsIGVtaXQgYW4gZXZlbnQgYHVwZGF0ZWRgIHdpdGggdGhlIHVwZGF0ZWQgcGVybWlzc2lvbnMuXG4gICAqXG4gICAqIGBOT1RFOiBJZiB0aGUgUGVlciBpcyBub3QgYW4gYWRtaW4sIHRoZW4gdGhlIHBlcm1pc3Npb25zIHdpbGwgbm90IGJlIHVwZGF0ZWQgb24gdGhlIHNlcnZlcmBcbiAgICovXG4gIHVwZGF0ZVBlcm1pc3Npb25zKHBlcm1pc3Npb25zKSB7XG4gICAgbG9nZ2VyLmluZm8oXCJcXHV7MUY1MTR9IFVwZGF0aW5nIFBlcm1pc3Npb25zXCIsIHBlcm1pc3Npb25zKTtcbiAgICB0aGlzLl9fYWRtaW4gPSBwZXJtaXNzaW9ucy5hZG1pbiA/PyB0aGlzLl9fYWRtaW47XG4gICAgdGhpcy5fX2NhbkNvbnN1bWUgPSBwZXJtaXNzaW9ucy5jYW5Db25zdW1lID8/IHRoaXMuX19jYW5Db25zdW1lO1xuICAgIHRoaXMuX19jYW5Qcm9kdWNlID0gcGVybWlzc2lvbnMuY2FuUHJvZHVjZSA/PyB0aGlzLl9fY2FuUHJvZHVjZTtcbiAgICB0aGlzLl9fY2FuUHJvZHVjZVNvdXJjZXMgPSBwZXJtaXNzaW9ucy5jYW5Qcm9kdWNlU291cmNlcyA/PyB0aGlzLl9fY2FuUHJvZHVjZVNvdXJjZXM7XG4gICAgdGhpcy5fX2NhblNlbmREYXRhID0gcGVybWlzc2lvbnMuY2FuU2VuZERhdGEgPz8gdGhpcy5fX2NhblNlbmREYXRhO1xuICAgIHRoaXMuX19jYW5SZWN2RGF0YSA9IHBlcm1pc3Npb25zLmNhblJlY3ZEYXRhID8/IHRoaXMuX19jYW5SZWN2RGF0YTtcbiAgICB0aGlzLl9fY2FuVXBkYXRlTWV0YWRhdGEgPSBwZXJtaXNzaW9ucy5jYW5VcGRhdGVNZXRhZGF0YSA/PyB0aGlzLl9fY2FuVXBkYXRlTWV0YWRhdGE7XG4gIH1cbiAgc3RhdGljIGNyZWF0ZUluc3RhbmNlKCkge1xuICAgIGlmIChfUGVybWlzc2lvbnMuX19pbnN0YW5jZSkgcmV0dXJuIF9QZXJtaXNzaW9ucy5fX2luc3RhbmNlO1xuICAgIF9QZXJtaXNzaW9ucy5fX2luc3RhbmNlID0gbmV3IF9QZXJtaXNzaW9ucygpO1xuICAgIHJldHVybiBfUGVybWlzc2lvbnMuX19pbnN0YW5jZTtcbiAgfVxuICBzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XG4gICAgaWYgKCFfUGVybWlzc2lvbnMuX19pbnN0YW5jZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGVybWlzc2lvbnMgSW5zdGFuY2Ugbm90IGNyZWF0ZWQgeWV0LlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIF9QZXJtaXNzaW9ucy5fX2luc3RhbmNlO1xuICB9XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gIH1cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5fX2FkbWluID0gZmFsc2U7XG4gICAgdGhpcy5fX2NhbkNvbnN1bWUgPSBmYWxzZTtcbiAgICB0aGlzLl9fY2FuUHJvZHVjZSA9IHRydWU7XG4gICAgdGhpcy5fX2NhblByb2R1Y2VTb3VyY2VzID0ge1xuICAgICAgY2FtOiB0cnVlLFxuICAgICAgbWljOiB0cnVlLFxuICAgICAgc2NyZWVuOiB0cnVlXG4gICAgfTtcbiAgICB0aGlzLl9fY2FuU2VuZERhdGEgPSBmYWxzZTtcbiAgICB0aGlzLl9fY2FuUmVjdkRhdGEgPSBmYWxzZTtcbiAgICB0aGlzLl9fY2FuVXBkYXRlTWV0YWRhdGEgPSBmYWxzZTtcbiAgICB0aGlzLl9fcm9sZSA9IG51bGw7XG4gIH1cbn07XG52YXIgY2hlY2tQZXJtaXNzaW9ucyA9IChwZXJtaXNzaW9uKSA9PiB7XG4gIHJldHVybiB7XG4gICAgdmFsaWRhdGU6IChmbikgPT4ge1xuICAgICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBlZXJQZXJtaXNzaW9uID0gUGVybWlzc2lvbnMuZ2V0SW5zdGFuY2UoKS5hY2w7XG4gICAgICAgICAgICBpZiAocGVybWlzc2lvbj8uYWRtaW4gJiYgIXBlZXJQZXJtaXNzaW9uLmFkbWluKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFkbWluIEFjY2VzcyBSZXF1aXJlZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGVybWlzc2lvbj8uY2FuQ29uc3VtZSAmJiAhcGVlclBlcm1pc3Npb24uY2FuQ29uc3VtZSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4gQ29uc3VtZSBBY2Nlc3MgUmVxdWlyZWQuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBlcm1pc3Npb24/LmNhblByb2R1Y2UgJiYgIXBlZXJQZXJtaXNzaW9uLmNhblByb2R1Y2UpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuIFByb2R1Y2UgQWNjZXNzIFJlcXVpcmVkLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwZXJtaXNzaW9uPy5jYW5Qcm9kdWNlU291cmNlcz8uY2FtICYmICFwZWVyUGVybWlzc2lvbi5jYW5Qcm9kdWNlU291cmNlcy5jYW0pIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvZHVjZSBTb3VyY2VzIEFjY2VzcyBSZXF1aXJlZC4gZm9yICdjYW0nXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBlcm1pc3Npb24/LmNhblByb2R1Y2VTb3VyY2VzPy5taWMgJiYgIXBlZXJQZXJtaXNzaW9uLmNhblByb2R1Y2VTb3VyY2VzLm1pYykge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9kdWNlIFNvdXJjZXMgQWNjZXNzIFJlcXVpcmVkLiBmb3IgJ21pYydcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGVybWlzc2lvbj8uY2FuUHJvZHVjZVNvdXJjZXM/LnNjcmVlbiAmJiAhcGVlclBlcm1pc3Npb24uY2FuUHJvZHVjZVNvdXJjZXMuc2NyZWVuKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb2R1Y2UgU291cmNlcyBBY2Nlc3MgUmVxdWlyZWQuIGZvciAnc2NyZWVuJ1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwZXJtaXNzaW9uPy5jYW5TZW5kRGF0YSAmJiAhcGVlclBlcm1pc3Npb24uY2FuU2VuZERhdGEpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuIFNlbmQgRGF0YSBBY2Nlc3MgUmVxdWlyZWQuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBlcm1pc3Npb24/LmNhblJlY3ZEYXRhICYmICFwZWVyUGVybWlzc2lvbi5jYW5SZWN2RGF0YSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4gUmVjdiBEYXRhIEFjY2VzcyBSZXF1aXJlZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmbiguLi5hcmdzKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgIHJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJDaGVja1Blcm1pc3Npb25zIEZhaWxlZCwgQWNjZXNzIFJlcXVpcmVkXCIsIGVycm9yKTtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufTtcbnZhciBjaGVja1Byb2R1Y2VQZXJtaXNzaW9ucyA9IChsYWJlbCkgPT4ge1xuICBjb25zdCBwZXJtaXNzaW9ucyA9IFBlcm1pc3Npb25zLmdldEluc3RhbmNlKCkuYWNsO1xuICBsZXQgZXJyb3IgPSBmYWxzZTtcbiAgaWYgKCFwZXJtaXNzaW9ucy5jYW5Qcm9kdWNlKSB7XG4gICAgZXJyb3IgPSB0cnVlO1xuICB9XG4gIGlmIChsYWJlbCA9PT0gXCJ2aWRlb1wiICYmICFwZXJtaXNzaW9ucy5jYW5Qcm9kdWNlU291cmNlcy5jYW0pIHtcbiAgICBlcnJvciA9IHRydWU7XG4gIH0gZWxzZSBpZiAobGFiZWwgPT09IFwiYXVkaW9cIiAmJiAhcGVybWlzc2lvbnMuY2FuUHJvZHVjZVNvdXJjZXMubWljKSB7XG4gICAgZXJyb3IgPSB0cnVlO1xuICB9IGVsc2UgaWYgKGxhYmVsLnN0YXJ0c1dpdGgoXCJzY3JlZW4tc2hhcmVcIikgJiYgIXBlcm1pc3Npb25zLmNhblByb2R1Y2VTb3VyY2VzLnNjcmVlbikge1xuICAgIGVycm9yID0gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZXJyb3I7XG59O1xudmFyIFBlcm1pc3Npb25zX2RlZmF1bHQgPSBQZXJtaXNzaW9ucztcblxuZXhwb3J0IHsgUGVybWlzc2lvbnNfZGVmYXVsdCwgY2hlY2tQZXJtaXNzaW9ucywgY2hlY2tQcm9kdWNlUGVybWlzc2lvbnMgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-E2DU7IIE.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-FIM2WZLS.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-FIM2WZLS.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deviceConstraints_default: () => (/* binding */ deviceConstraints_default)\n/* harmony export */ });\n/* harmony import */ var _chunk_Q4PETRM3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-Q4PETRM3.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-Q4PETRM3.js\");\n\n\n// src/constants/deviceConstraints.ts\nvar videoDefaultConstraints = {\n  video: {\n    ..._chunk_Q4PETRM3_js__WEBPACK_IMPORTED_MODULE_0__.VIDEO_CONSTRAINTS.hd\n  }\n};\nvar audioConstraints = {\n  audio: {\n    echoCancellation: true,\n    noiseSuppression: true\n  }\n};\nvar shareConstraints = {\n  video: {\n    displaySurface: \"monitor\",\n    logicalSurface: true,\n    cursor: true,\n    width: { ideal: 1920, max: 1920 },\n    height: { ideal: 1080, max: 1080 },\n    frameRate: { ideal: 25, max: 30 }\n  },\n  audio: {\n    echoCancellation: true,\n    noiseSuppression: true\n  }\n};\nvar defaultMediaConstraints = {\n  cam: videoDefaultConstraints,\n  mic: audioConstraints,\n  screen: shareConstraints\n};\nvar deviceConstraints_default = defaultMediaConstraints;\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstRklNMldaTFMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0Q7O0FBRXhEO0FBQ0E7QUFDQTtBQUNBLE9BQU8saUVBQWlCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSx3QkFBd0I7QUFDckMsY0FBYyx3QkFBd0I7QUFDdEMsaUJBQWlCO0FBQ2pCLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVxQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Bva2Vtb24tZ2FtZS1ldGhpbmRpYS0xLy4vbm9kZV9tb2R1bGVzL0BodWRkbGUwMS93ZWItY29yZS9kaXN0L2NodW5rLUZJTTJXWkxTLmpzP2VhMzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVklERU9fQ09OU1RSQUlOVFMgfSBmcm9tICcuL2NodW5rLVE0UEVUUk0zLmpzJztcblxuLy8gc3JjL2NvbnN0YW50cy9kZXZpY2VDb25zdHJhaW50cy50c1xudmFyIHZpZGVvRGVmYXVsdENvbnN0cmFpbnRzID0ge1xuICB2aWRlbzoge1xuICAgIC4uLlZJREVPX0NPTlNUUkFJTlRTLmhkXG4gIH1cbn07XG52YXIgYXVkaW9Db25zdHJhaW50cyA9IHtcbiAgYXVkaW86IHtcbiAgICBlY2hvQ2FuY2VsbGF0aW9uOiB0cnVlLFxuICAgIG5vaXNlU3VwcHJlc3Npb246IHRydWVcbiAgfVxufTtcbnZhciBzaGFyZUNvbnN0cmFpbnRzID0ge1xuICB2aWRlbzoge1xuICAgIGRpc3BsYXlTdXJmYWNlOiBcIm1vbml0b3JcIixcbiAgICBsb2dpY2FsU3VyZmFjZTogdHJ1ZSxcbiAgICBjdXJzb3I6IHRydWUsXG4gICAgd2lkdGg6IHsgaWRlYWw6IDE5MjAsIG1heDogMTkyMCB9LFxuICAgIGhlaWdodDogeyBpZGVhbDogMTA4MCwgbWF4OiAxMDgwIH0sXG4gICAgZnJhbWVSYXRlOiB7IGlkZWFsOiAyNSwgbWF4OiAzMCB9XG4gIH0sXG4gIGF1ZGlvOiB7XG4gICAgZWNob0NhbmNlbGxhdGlvbjogdHJ1ZSxcbiAgICBub2lzZVN1cHByZXNzaW9uOiB0cnVlXG4gIH1cbn07XG52YXIgZGVmYXVsdE1lZGlhQ29uc3RyYWludHMgPSB7XG4gIGNhbTogdmlkZW9EZWZhdWx0Q29uc3RyYWludHMsXG4gIG1pYzogYXVkaW9Db25zdHJhaW50cyxcbiAgc2NyZWVuOiBzaGFyZUNvbnN0cmFpbnRzXG59O1xudmFyIGRldmljZUNvbnN0cmFpbnRzX2RlZmF1bHQgPSBkZWZhdWx0TWVkaWFDb25zdHJhaW50cztcblxuZXhwb3J0IHsgZGV2aWNlQ29uc3RyYWludHNfZGVmYXVsdCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-FIM2WZLS.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-HDCV2PNW.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-HDCV2PNW.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DeviceHandler_default: () => (/* binding */ DeviceHandler_default)\n/* harmony export */ });\n/* harmony import */ var _chunk_FIM2WZLS_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-FIM2WZLS.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-FIM2WZLS.js\");\n/* harmony import */ var _chunk_WA3QABYS_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-WA3QABYS.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-WA3QABYS.js\");\n/* harmony import */ var _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-TOCFOGTC.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-TOCFOGTC.js\");\n/* harmony import */ var _chunk_BW2DGP4D_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunk-BW2DGP4D.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-BW2DGP4D.js\");\n\n\n\n\n\n// src/DeviceHandler.ts\nvar logger = _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_2__.mainLogger.createSubLogger(\"DeviceHandler\");\nvar CustomMediaKindToSystemKind = {\n  cam: \"videoinput\",\n  mic: \"audioinput\",\n  speaker: \"audiooutput\"\n};\nvar DeviceHandler = class extends _chunk_BW2DGP4D_js__WEBPACK_IMPORTED_MODULE_3__.EnhancedEventEmitter {\n  SCREEN_DEFAULT_DEVICE = \"monitor\";\n  /**\n   * User Selected Devices, If no device is selected, it will use the default device of the system\n   *\n   * is preffered device is null, it will use the default device of the system\n   *\n   * `NOTE: User has the ability to select a preferred device for each media kind`\n   */\n  __preferredDevices = /* @__PURE__ */ new Map([\n    [\"cam\", null],\n    [\"mic\", null],\n    [\"speaker\", null]\n  ]);\n  /**\n   * Map the media devices currently present in the system\n   */\n  __mediaDevicesInfo = /* @__PURE__ */ new Map([\n    [\"cam\", []],\n    [\"mic\", []],\n    [\"speaker\", []]\n  ]);\n  /**\n   * Get all the devices which are currently available in the system\n   */\n  get devices() {\n    return this.__mediaDevicesInfo;\n  }\n  get preferredDevices() {\n    return this.__preferredDevices;\n  }\n  /**\n   * Get all the devices which are currently available in the system, also updates the `__mediaDevicesInfo` record\n   *\n   * Can also query for a specific device kind `audioinput` | `videoinput` | `audiooutput`\n   *\n   * @param deviceKind `cam` | `mic` | `speaker` | `undefined`\n   * @returns - MediaDeviceInfo[] | null\n   *\n   * `NOTE`: Ask for MediaDevice Permission to get the right result for that device else it will return `null`\n   */\n  getMediaDevices = async (filterByDeviceKind) => {\n    logger.debug(\"\\u{1F4F9} Fetching Media Devices\");\n    const devices = await navigator.mediaDevices.enumerateDevices();\n    if (!filterByDeviceKind || filterByDeviceKind === \"device-change\") {\n      this.__setMediaDeviceInfo({ devices, update: \"all\" });\n    }\n    if (filterByDeviceKind === \"cam\" || filterByDeviceKind === \"mic\") {\n      this.__setMediaDeviceInfo({ devices, update: filterByDeviceKind });\n    }\n    const mediaDevices = devices.filter((device) => {\n      if (device.deviceId === \"\" || device.label === \"\") {\n        return false;\n      }\n      if (filterByDeviceKind && filterByDeviceKind !== \"device-change\") {\n        const systemDeviceKind = CustomMediaKindToSystemKind[filterByDeviceKind];\n        return device.kind === systemDeviceKind;\n      }\n      return true;\n    });\n    return mediaDevices;\n  };\n  /**\n   * Get the device from the given facing type of device\n   *\n   * This function is used for only RN\n   *\n   * @param facing - facing of the device { 'environment' | 'front' | 'undefined' }\n   * @param mediaDeviceKind - mediaDeviceKind for the device { 'audioinput' | 'videoinput' }\n   * @returns - deviceId: string | null\n   *\n   * `NOTE`: Ask for MediaDevice Permission to get the right result for that device else it will return `null`\n   */\n  getDeviceFromFacingMode = (facing, mediaDeviceKind) => {\n    const allDevices = this.__mediaDevicesInfo.get(mediaDeviceKind);\n    if (allDevices) {\n      const d = allDevices.find((device) => device.facing === facing);\n      if (d) {\n        if (mediaDeviceKind === \"cam\") {\n          return facing || d.deviceId;\n        }\n        return d.deviceId;\n      }\n    }\n    return null;\n  };\n  setPreferredDevice = (data) => {\n    const { deviceId, deviceKind } = data;\n    this.__preferredDevices.set(deviceKind, deviceId);\n    this.emit(\"preferred-device-change\", {\n      deviceId,\n      deviceKind\n    });\n  };\n  /**\n   * Fetches a stream of the screen of the device i.e the screen sharing stream\n   * based on the selected choice from the pop up returns the audio and video stream\n   * in one stream.\n   *\n   * `NOTE: This stream is not managed by the Huddle01 SDK, i.e. it will not be closed by the SDK`\n   * @returns\n   */\n  fetchScreen = async () => {\n    const constraints = _chunk_FIM2WZLS_js__WEBPACK_IMPORTED_MODULE_0__.deviceConstraints_default.screen;\n    try {\n      const stream = await navigator.mediaDevices.getDisplayMedia(constraints);\n      return { stream };\n    } catch (err) {\n      logger.error(err);\n      let error = {\n        message: \"Unknown Error\",\n        errorStack: err\n      };\n      if (!(0,_chunk_WA3QABYS_js__WEBPACK_IMPORTED_MODULE_1__.isReactNative)() && err instanceof DOMException) {\n        error = {\n          blocked: {\n            byDeviceMissing: err.name === \"NotFoundError\",\n            byDeviceInUse: err.name === \"OverconstrainedError\",\n            byPermissions: err.name === \"NotAllowedError\"\n          },\n          message: err.message\n        };\n      } else {\n        error = {\n          message: \"Screen Sharing Permission Denied\",\n          blocked: {\n            byPermissions: true,\n            byDeviceInUse: false,\n            byDeviceMissing: false\n          }\n        };\n      }\n      return {\n        stream: null,\n        error\n      };\n    }\n  };\n  /**\n   * Fetch the stream from the device for the given media kind, if no preferred device is found it will throw an error.\n   * by default the preferred device is the system default device\n   *\n   * `NOTE: If Preffered device is not found, it will use the system default device, if no default device is found it will throw an error`\n   * `Set the preferred device using setPreferredDevice()`\n   *\n   */\n  fetchStream = async (data) => {\n    const preferredDeviceId = this.__preferredDevices.get(data.mediaDeviceKind);\n    logger.info(\"\\u{1F4F9} Fetching Stream\", {\n      mediaDeviceKind: data.mediaDeviceKind,\n      preferredDeviceId\n    });\n    navigator.mediaDevices.ondevicechange = async () => {\n      const newMediaDevices = await this.getMediaDevices(\"device-change\");\n      for (const [deviceKind, deviceId] of this.__preferredDevices) {\n        const device = newMediaDevices.find((d) => d.deviceId === deviceId);\n        if (!device) {\n          this.setPreferredDevice({ deviceId: null, deviceKind });\n        }\n      }\n      this.emit(\"device-change\");\n    };\n    try {\n      let fetchStreamFunc;\n      if (typeof navigator === \"object\" && navigator.product === \"ReactNative\") {\n        fetchStreamFunc = this.__fetchStreamFromDeviceForRN;\n      } else {\n        fetchStreamFunc = this.__fetchStreamFromDeviceForWeb;\n      }\n      const { stream, deviceId } = await fetchStreamFunc({\n        deviceId: preferredDeviceId ?? void 0,\n        mediaKind: data.mediaDeviceKind === \"mic\" ? \"mic\" : \"cam\"\n      });\n      const track = data.mediaDeviceKind === \"mic\" ? stream.getAudioTracks()[0] : stream.getVideoTracks()[0];\n      if (!this.__preferredDevices.get(data.mediaDeviceKind)) {\n        this.setPreferredDevice({ deviceId, deviceKind: data.mediaDeviceKind });\n      }\n      return {\n        stream,\n        track,\n        deviceId\n      };\n    } catch (err) {\n      logger.error(err);\n      let error = {\n        message: \"Unknown Error\",\n        errorStack: err\n      };\n      if (!(0,_chunk_WA3QABYS_js__WEBPACK_IMPORTED_MODULE_1__.isReactNative)() && err instanceof DOMException) {\n        error = {\n          blocked: {\n            byDeviceMissing: err.name === \"NotFoundError\",\n            byDeviceInUse: err.name === \"OverconstrainedError\",\n            byPermissions: err.name === \"NotAllowedError\"\n          },\n          message: err.message\n        };\n      } else {\n        error = {\n          message: \"Media Permission Denied\",\n          blocked: {\n            byPermissions: true,\n            byDeviceInUse: false,\n            byDeviceMissing: false\n          }\n        };\n      }\n      return {\n        stream: null,\n        track: null,\n        deviceId: null,\n        error\n      };\n    }\n  };\n  fetchStreamByGroupId = async (data) => {\n    let constraints;\n    if (data.mediaDeviceKind === \"mic\") {\n      constraints = { audio: { groupId: data.groupId } };\n    } else {\n      constraints = { video: { groupId: data.groupId } };\n    }\n    const stream = await navigator.mediaDevices.getUserMedia(constraints);\n    return stream;\n  };\n  /**\n   * Fetch the stream from the device for the React Native Based Application\n   *\n   * `This stream is not managed by the Huddle01 SDK, i.e. it will not be closed by the SDK\n   * the user has to close it manually by calling {stream.getTracks().forEach(track => track.stop())}`\n   *\n   * NOTE: `using stopTrackOnClose = true` while producing will stop the track when producing is stopped\n   *\n   * @param data - { deviceId: \"front\" | \"back\" | \"audio\" | string; kind: \"audioinput\" | \"videoinput\" }\n   * @returns - { stream: MediaStream, deviceId: string }\n   */\n  __fetchStreamFromDeviceForRN = async (data) => {\n    const constraints = _chunk_FIM2WZLS_js__WEBPACK_IMPORTED_MODULE_0__.deviceConstraints_default[data.mediaKind];\n    let facingMode;\n    if (data.mediaKind === \"cam\") {\n      facingMode = data.deviceId === \"environment\" ? \"environment\" : \"front\";\n      constraints.video = Object.assign({}, constraints.video, {\n        facingMode\n      });\n    }\n    if (data.mediaKind === \"mic\") {\n      constraints.audio = Object.assign({}, constraints.audio, {\n        deviceId: data.deviceId\n      });\n    }\n    const stream = await navigator.mediaDevices.getUserMedia(constraints);\n    const streamDeviceId = this.getDeviceFromFacingMode(\n      facingMode,\n      data.mediaKind === \"mic\" ? \"mic\" : \"cam\"\n    );\n    const devices = await navigator.mediaDevices.enumerateDevices();\n    if (data.mediaKind === \"cam\" || data.mediaKind === \"mic\") {\n      this.emit(\"permission-granted\", { deviceKind: data.mediaKind });\n      this.__setMediaDeviceInfo({ devices, update: data.mediaKind });\n    }\n    if (!streamDeviceId) {\n      const tracks = stream.getTracks();\n      for (const track of tracks) {\n        track.stop();\n      }\n      throw new Error(\n        \"\\u274C No DeviceId found for this stream, this is a bug in the SDK, please report it to the developers\"\n      );\n    }\n    return {\n      stream,\n      deviceId: streamDeviceId\n    };\n  };\n  /**\n   * Fetch the stream from the device for the web\n   *\n   * `This stream is not managed by the Huddle01 SDK, i.e. it will not be closed by the SDK\n   * the user has to close it manually by calling {stream.getTracks().forEach(track => track.stop())}`\n   *\n   * NOTE: `using stopTrackOnClose = true` while producing will stop the track when producing is stopped\n   *\n   * @param data - { deviceId: string; kind: 'audio' | 'video' }\n   * @returns - { stream: MediaStream, deviceId: string }\n   */\n  __fetchStreamFromDeviceForWeb = async (data) => {\n    const constraints = Object.assign(\n      {},\n      _chunk_FIM2WZLS_js__WEBPACK_IMPORTED_MODULE_0__.deviceConstraints_default[data.mediaKind]\n    );\n    if (data.mediaKind === \"cam\" && data.deviceId) {\n      constraints.video = Object.assign({}, constraints.video, {\n        deviceId: data.deviceId\n      });\n    }\n    if (data.mediaKind === \"mic\" && data.deviceId) {\n      const micConstraint = {};\n      const devices2 = this.__mediaDevicesInfo.get(\"mic\");\n      if (data.deviceId === \"default\" && devices2 && devices2.length > 0) {\n        const device = devices2.find((d) => d.deviceId === data.deviceId);\n        if (device) {\n          micConstraint.groupId = device.groupId;\n        }\n      } else if (data?.deviceId?.length > 0) {\n        micConstraint.deviceId = {\n          exact: data.deviceId\n        };\n      }\n      constraints.audio = Object.assign({}, constraints.audio, micConstraint);\n    }\n    const stream = await navigator.mediaDevices.getUserMedia(constraints);\n    const streamDeviceId = stream.getTracks()[0].getSettings().deviceId;\n    const devices = await navigator.mediaDevices.enumerateDevices();\n    if (data.mediaKind === \"cam\" || data.mediaKind === \"mic\") {\n      this.emit(\"permission-granted\", { deviceKind: data.mediaKind });\n      this.__setMediaDeviceInfo({ devices, update: data.mediaKind });\n    }\n    if (!streamDeviceId) {\n      const tracks = stream.getTracks();\n      for (const track of tracks) {\n        track.stop();\n      }\n      throw new Error(\n        \"\\u274C No DeviceId found for this stream, this is a bug in the browser, please report it to the developers\"\n      );\n    }\n    return {\n      stream,\n      deviceId: data?.deviceId ?? streamDeviceId\n    };\n  };\n  /**\n   * @description Get the media permission for the given type\n   * @param data  { type: 'video' | 'audio' }\n   * @throws error { StreamPermissionsError }\n   * @example await getMediaPermission({ type: 'video' })\n   */\n  getMediaPermission = async (data) => {\n    const { mediaDeviceKind } = data;\n    try {\n      await this.getMediaDevices(mediaDeviceKind);\n      this.emit(\"permission-granted\", { deviceKind: mediaDeviceKind });\n      return {\n        permission: \"granted\"\n      };\n    } catch (err) {\n      let error = {\n        message: \"Unknown Error\",\n        errorStack: err\n      };\n      if (!(0,_chunk_WA3QABYS_js__WEBPACK_IMPORTED_MODULE_1__.isReactNative)() && err instanceof DOMException) {\n        error = {\n          blocked: {\n            byDeviceMissing: err.name === \"NotFoundError\",\n            byDeviceInUse: err.name === \"OverconstrainedError\",\n            byPermissions: err.name === \"NotAllowedError\"\n          },\n          message: err.message\n        };\n      } else {\n        error = {\n          message: \"Media Permission Denied\",\n          blocked: {\n            byPermissions: true,\n            byDeviceInUse: false,\n            byDeviceMissing: false\n          }\n        };\n      }\n      this.emit(\"permission-denied\", { deviceKind: mediaDeviceKind, error });\n      return {\n        permission: \"denied\",\n        error\n      };\n    }\n  };\n  stopStream = (stream) => {\n    if (!stream) return;\n    for (const track of stream.getTracks()) {\n      track.stop();\n    }\n  };\n  destroy = () => {\n    this.__preferredDevices.clear();\n    this.__mediaDevicesInfo.clear();\n    logger.info(\"\\u2705 Destroyed StreamHandler\");\n  };\n  /**\n   * Set the Media devices info based on the latest devices available in the system\n   */\n  __setMediaDeviceInfo = (data) => {\n    const { devices, update } = data;\n    const camDevices = [];\n    const micDevices = [];\n    const speakerDevices = [];\n    for (const device of devices) {\n      if (device.label === \"\" || device.deviceId === \"\") continue;\n      if (device.kind === \"videoinput\") camDevices.push(device);\n      if (device.kind === \"audioinput\") micDevices.push(device);\n      if (device.kind === \"audiooutput\") speakerDevices.push(device);\n    }\n    if (update === \"all\") {\n      this.__mediaDevicesInfo.set(\"cam\", camDevices);\n      this.__mediaDevicesInfo.set(\"mic\", micDevices);\n      this.__mediaDevicesInfo.set(\"speaker\", speakerDevices);\n    }\n    if (update === \"cam\") this.__mediaDevicesInfo.set(\"cam\", camDevices);\n    if (update === \"mic\") {\n      this.__mediaDevicesInfo.set(\"mic\", micDevices);\n      this.__mediaDevicesInfo.set(\"speaker\", speakerDevices);\n    }\n  };\n};\nvar DeviceHandler_default = DeviceHandler;\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstSERDVjJQTlcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBZ0U7QUFDWjtBQUNIO0FBQ1U7O0FBRTNEO0FBQ0EsYUFBYSwwREFBVTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLG9FQUFvQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLE9BQU87QUFDNUI7QUFDQTtBQUNBLGtDQUFrQyx3QkFBd0I7QUFDMUQ7QUFDQTtBQUNBLGtDQUFrQyxxQ0FBcUM7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUMsK0RBQStEO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksdUJBQXVCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlFQUF5QjtBQUNqRDtBQUNBO0FBQ0EsZUFBZTtBQUNmLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxpRUFBYTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0JBQWtCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVpQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Bva2Vtb24tZ2FtZS1ldGhpbmRpYS0xLy4vbm9kZV9tb2R1bGVzL0BodWRkbGUwMS93ZWItY29yZS9kaXN0L2NodW5rLUhEQ1YyUE5XLmpzPzk5NGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGV2aWNlQ29uc3RyYWludHNfZGVmYXVsdCB9IGZyb20gJy4vY2h1bmstRklNMldaTFMuanMnO1xuaW1wb3J0IHsgaXNSZWFjdE5hdGl2ZSB9IGZyb20gJy4vY2h1bmstV0EzUUFCWVMuanMnO1xuaW1wb3J0IHsgbWFpbkxvZ2dlciB9IGZyb20gJy4vY2h1bmstVE9DRk9HVEMuanMnO1xuaW1wb3J0IHsgRW5oYW5jZWRFdmVudEVtaXR0ZXIgfSBmcm9tICcuL2NodW5rLUJXMkRHUDRELmpzJztcblxuLy8gc3JjL0RldmljZUhhbmRsZXIudHNcbnZhciBsb2dnZXIgPSBtYWluTG9nZ2VyLmNyZWF0ZVN1YkxvZ2dlcihcIkRldmljZUhhbmRsZXJcIik7XG52YXIgQ3VzdG9tTWVkaWFLaW5kVG9TeXN0ZW1LaW5kID0ge1xuICBjYW06IFwidmlkZW9pbnB1dFwiLFxuICBtaWM6IFwiYXVkaW9pbnB1dFwiLFxuICBzcGVha2VyOiBcImF1ZGlvb3V0cHV0XCJcbn07XG52YXIgRGV2aWNlSGFuZGxlciA9IGNsYXNzIGV4dGVuZHMgRW5oYW5jZWRFdmVudEVtaXR0ZXIge1xuICBTQ1JFRU5fREVGQVVMVF9ERVZJQ0UgPSBcIm1vbml0b3JcIjtcbiAgLyoqXG4gICAqIFVzZXIgU2VsZWN0ZWQgRGV2aWNlcywgSWYgbm8gZGV2aWNlIGlzIHNlbGVjdGVkLCBpdCB3aWxsIHVzZSB0aGUgZGVmYXVsdCBkZXZpY2Ugb2YgdGhlIHN5c3RlbVxuICAgKlxuICAgKiBpcyBwcmVmZmVyZWQgZGV2aWNlIGlzIG51bGwsIGl0IHdpbGwgdXNlIHRoZSBkZWZhdWx0IGRldmljZSBvZiB0aGUgc3lzdGVtXG4gICAqXG4gICAqIGBOT1RFOiBVc2VyIGhhcyB0aGUgYWJpbGl0eSB0byBzZWxlY3QgYSBwcmVmZXJyZWQgZGV2aWNlIGZvciBlYWNoIG1lZGlhIGtpbmRgXG4gICAqL1xuICBfX3ByZWZlcnJlZERldmljZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcChbXG4gICAgW1wiY2FtXCIsIG51bGxdLFxuICAgIFtcIm1pY1wiLCBudWxsXSxcbiAgICBbXCJzcGVha2VyXCIsIG51bGxdXG4gIF0pO1xuICAvKipcbiAgICogTWFwIHRoZSBtZWRpYSBkZXZpY2VzIGN1cnJlbnRseSBwcmVzZW50IGluIHRoZSBzeXN0ZW1cbiAgICovXG4gIF9fbWVkaWFEZXZpY2VzSW5mbyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKFtcbiAgICBbXCJjYW1cIiwgW11dLFxuICAgIFtcIm1pY1wiLCBbXV0sXG4gICAgW1wic3BlYWtlclwiLCBbXV1cbiAgXSk7XG4gIC8qKlxuICAgKiBHZXQgYWxsIHRoZSBkZXZpY2VzIHdoaWNoIGFyZSBjdXJyZW50bHkgYXZhaWxhYmxlIGluIHRoZSBzeXN0ZW1cbiAgICovXG4gIGdldCBkZXZpY2VzKCkge1xuICAgIHJldHVybiB0aGlzLl9fbWVkaWFEZXZpY2VzSW5mbztcbiAgfVxuICBnZXQgcHJlZmVycmVkRGV2aWNlcygpIHtcbiAgICByZXR1cm4gdGhpcy5fX3ByZWZlcnJlZERldmljZXM7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbGwgdGhlIGRldmljZXMgd2hpY2ggYXJlIGN1cnJlbnRseSBhdmFpbGFibGUgaW4gdGhlIHN5c3RlbSwgYWxzbyB1cGRhdGVzIHRoZSBgX19tZWRpYURldmljZXNJbmZvYCByZWNvcmRcbiAgICpcbiAgICogQ2FuIGFsc28gcXVlcnkgZm9yIGEgc3BlY2lmaWMgZGV2aWNlIGtpbmQgYGF1ZGlvaW5wdXRgIHwgYHZpZGVvaW5wdXRgIHwgYGF1ZGlvb3V0cHV0YFxuICAgKlxuICAgKiBAcGFyYW0gZGV2aWNlS2luZCBgY2FtYCB8IGBtaWNgIHwgYHNwZWFrZXJgIHwgYHVuZGVmaW5lZGBcbiAgICogQHJldHVybnMgLSBNZWRpYURldmljZUluZm9bXSB8IG51bGxcbiAgICpcbiAgICogYE5PVEVgOiBBc2sgZm9yIE1lZGlhRGV2aWNlIFBlcm1pc3Npb24gdG8gZ2V0IHRoZSByaWdodCByZXN1bHQgZm9yIHRoYXQgZGV2aWNlIGVsc2UgaXQgd2lsbCByZXR1cm4gYG51bGxgXG4gICAqL1xuICBnZXRNZWRpYURldmljZXMgPSBhc3luYyAoZmlsdGVyQnlEZXZpY2VLaW5kKSA9PiB7XG4gICAgbG9nZ2VyLmRlYnVnKFwiXFx1ezFGNEY5fSBGZXRjaGluZyBNZWRpYSBEZXZpY2VzXCIpO1xuICAgIGNvbnN0IGRldmljZXMgPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKTtcbiAgICBpZiAoIWZpbHRlckJ5RGV2aWNlS2luZCB8fCBmaWx0ZXJCeURldmljZUtpbmQgPT09IFwiZGV2aWNlLWNoYW5nZVwiKSB7XG4gICAgICB0aGlzLl9fc2V0TWVkaWFEZXZpY2VJbmZvKHsgZGV2aWNlcywgdXBkYXRlOiBcImFsbFwiIH0pO1xuICAgIH1cbiAgICBpZiAoZmlsdGVyQnlEZXZpY2VLaW5kID09PSBcImNhbVwiIHx8IGZpbHRlckJ5RGV2aWNlS2luZCA9PT0gXCJtaWNcIikge1xuICAgICAgdGhpcy5fX3NldE1lZGlhRGV2aWNlSW5mbyh7IGRldmljZXMsIHVwZGF0ZTogZmlsdGVyQnlEZXZpY2VLaW5kIH0pO1xuICAgIH1cbiAgICBjb25zdCBtZWRpYURldmljZXMgPSBkZXZpY2VzLmZpbHRlcigoZGV2aWNlKSA9PiB7XG4gICAgICBpZiAoZGV2aWNlLmRldmljZUlkID09PSBcIlwiIHx8IGRldmljZS5sYWJlbCA9PT0gXCJcIikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoZmlsdGVyQnlEZXZpY2VLaW5kICYmIGZpbHRlckJ5RGV2aWNlS2luZCAhPT0gXCJkZXZpY2UtY2hhbmdlXCIpIHtcbiAgICAgICAgY29uc3Qgc3lzdGVtRGV2aWNlS2luZCA9IEN1c3RvbU1lZGlhS2luZFRvU3lzdGVtS2luZFtmaWx0ZXJCeURldmljZUtpbmRdO1xuICAgICAgICByZXR1cm4gZGV2aWNlLmtpbmQgPT09IHN5c3RlbURldmljZUtpbmQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gbWVkaWFEZXZpY2VzO1xuICB9O1xuICAvKipcbiAgICogR2V0IHRoZSBkZXZpY2UgZnJvbSB0aGUgZ2l2ZW4gZmFjaW5nIHR5cGUgb2YgZGV2aWNlXG4gICAqXG4gICAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBmb3Igb25seSBSTlxuICAgKlxuICAgKiBAcGFyYW0gZmFjaW5nIC0gZmFjaW5nIG9mIHRoZSBkZXZpY2UgeyAnZW52aXJvbm1lbnQnIHwgJ2Zyb250JyB8ICd1bmRlZmluZWQnIH1cbiAgICogQHBhcmFtIG1lZGlhRGV2aWNlS2luZCAtIG1lZGlhRGV2aWNlS2luZCBmb3IgdGhlIGRldmljZSB7ICdhdWRpb2lucHV0JyB8ICd2aWRlb2lucHV0JyB9XG4gICAqIEByZXR1cm5zIC0gZGV2aWNlSWQ6IHN0cmluZyB8IG51bGxcbiAgICpcbiAgICogYE5PVEVgOiBBc2sgZm9yIE1lZGlhRGV2aWNlIFBlcm1pc3Npb24gdG8gZ2V0IHRoZSByaWdodCByZXN1bHQgZm9yIHRoYXQgZGV2aWNlIGVsc2UgaXQgd2lsbCByZXR1cm4gYG51bGxgXG4gICAqL1xuICBnZXREZXZpY2VGcm9tRmFjaW5nTW9kZSA9IChmYWNpbmcsIG1lZGlhRGV2aWNlS2luZCkgPT4ge1xuICAgIGNvbnN0IGFsbERldmljZXMgPSB0aGlzLl9fbWVkaWFEZXZpY2VzSW5mby5nZXQobWVkaWFEZXZpY2VLaW5kKTtcbiAgICBpZiAoYWxsRGV2aWNlcykge1xuICAgICAgY29uc3QgZCA9IGFsbERldmljZXMuZmluZCgoZGV2aWNlKSA9PiBkZXZpY2UuZmFjaW5nID09PSBmYWNpbmcpO1xuICAgICAgaWYgKGQpIHtcbiAgICAgICAgaWYgKG1lZGlhRGV2aWNlS2luZCA9PT0gXCJjYW1cIikge1xuICAgICAgICAgIHJldHVybiBmYWNpbmcgfHwgZC5kZXZpY2VJZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZC5kZXZpY2VJZDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG4gIHNldFByZWZlcnJlZERldmljZSA9IChkYXRhKSA9PiB7XG4gICAgY29uc3QgeyBkZXZpY2VJZCwgZGV2aWNlS2luZCB9ID0gZGF0YTtcbiAgICB0aGlzLl9fcHJlZmVycmVkRGV2aWNlcy5zZXQoZGV2aWNlS2luZCwgZGV2aWNlSWQpO1xuICAgIHRoaXMuZW1pdChcInByZWZlcnJlZC1kZXZpY2UtY2hhbmdlXCIsIHtcbiAgICAgIGRldmljZUlkLFxuICAgICAgZGV2aWNlS2luZFxuICAgIH0pO1xuICB9O1xuICAvKipcbiAgICogRmV0Y2hlcyBhIHN0cmVhbSBvZiB0aGUgc2NyZWVuIG9mIHRoZSBkZXZpY2UgaS5lIHRoZSBzY3JlZW4gc2hhcmluZyBzdHJlYW1cbiAgICogYmFzZWQgb24gdGhlIHNlbGVjdGVkIGNob2ljZSBmcm9tIHRoZSBwb3AgdXAgcmV0dXJucyB0aGUgYXVkaW8gYW5kIHZpZGVvIHN0cmVhbVxuICAgKiBpbiBvbmUgc3RyZWFtLlxuICAgKlxuICAgKiBgTk9URTogVGhpcyBzdHJlYW0gaXMgbm90IG1hbmFnZWQgYnkgdGhlIEh1ZGRsZTAxIFNESywgaS5lLiBpdCB3aWxsIG5vdCBiZSBjbG9zZWQgYnkgdGhlIFNES2BcbiAgICogQHJldHVybnNcbiAgICovXG4gIGZldGNoU2NyZWVuID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGNvbnN0cmFpbnRzID0gZGV2aWNlQ29uc3RyYWludHNfZGVmYXVsdC5zY3JlZW47XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0RGlzcGxheU1lZGlhKGNvbnN0cmFpbnRzKTtcbiAgICAgIHJldHVybiB7IHN0cmVhbSB9O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgbG9nZ2VyLmVycm9yKGVycik7XG4gICAgICBsZXQgZXJyb3IgPSB7XG4gICAgICAgIG1lc3NhZ2U6IFwiVW5rbm93biBFcnJvclwiLFxuICAgICAgICBlcnJvclN0YWNrOiBlcnJcbiAgICAgIH07XG4gICAgICBpZiAoIWlzUmVhY3ROYXRpdmUoKSAmJiBlcnIgaW5zdGFuY2VvZiBET01FeGNlcHRpb24pIHtcbiAgICAgICAgZXJyb3IgPSB7XG4gICAgICAgICAgYmxvY2tlZDoge1xuICAgICAgICAgICAgYnlEZXZpY2VNaXNzaW5nOiBlcnIubmFtZSA9PT0gXCJOb3RGb3VuZEVycm9yXCIsXG4gICAgICAgICAgICBieURldmljZUluVXNlOiBlcnIubmFtZSA9PT0gXCJPdmVyY29uc3RyYWluZWRFcnJvclwiLFxuICAgICAgICAgICAgYnlQZXJtaXNzaW9uczogZXJyLm5hbWUgPT09IFwiTm90QWxsb3dlZEVycm9yXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlcnJvciA9IHtcbiAgICAgICAgICBtZXNzYWdlOiBcIlNjcmVlbiBTaGFyaW5nIFBlcm1pc3Npb24gRGVuaWVkXCIsXG4gICAgICAgICAgYmxvY2tlZDoge1xuICAgICAgICAgICAgYnlQZXJtaXNzaW9uczogdHJ1ZSxcbiAgICAgICAgICAgIGJ5RGV2aWNlSW5Vc2U6IGZhbHNlLFxuICAgICAgICAgICAgYnlEZXZpY2VNaXNzaW5nOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0cmVhbTogbnVsbCxcbiAgICAgICAgZXJyb3JcbiAgICAgIH07XG4gICAgfVxuICB9O1xuICAvKipcbiAgICogRmV0Y2ggdGhlIHN0cmVhbSBmcm9tIHRoZSBkZXZpY2UgZm9yIHRoZSBnaXZlbiBtZWRpYSBraW5kLCBpZiBubyBwcmVmZXJyZWQgZGV2aWNlIGlzIGZvdW5kIGl0IHdpbGwgdGhyb3cgYW4gZXJyb3IuXG4gICAqIGJ5IGRlZmF1bHQgdGhlIHByZWZlcnJlZCBkZXZpY2UgaXMgdGhlIHN5c3RlbSBkZWZhdWx0IGRldmljZVxuICAgKlxuICAgKiBgTk9URTogSWYgUHJlZmZlcmVkIGRldmljZSBpcyBub3QgZm91bmQsIGl0IHdpbGwgdXNlIHRoZSBzeXN0ZW0gZGVmYXVsdCBkZXZpY2UsIGlmIG5vIGRlZmF1bHQgZGV2aWNlIGlzIGZvdW5kIGl0IHdpbGwgdGhyb3cgYW4gZXJyb3JgXG4gICAqIGBTZXQgdGhlIHByZWZlcnJlZCBkZXZpY2UgdXNpbmcgc2V0UHJlZmVycmVkRGV2aWNlKClgXG4gICAqXG4gICAqL1xuICBmZXRjaFN0cmVhbSA9IGFzeW5jIChkYXRhKSA9PiB7XG4gICAgY29uc3QgcHJlZmVycmVkRGV2aWNlSWQgPSB0aGlzLl9fcHJlZmVycmVkRGV2aWNlcy5nZXQoZGF0YS5tZWRpYURldmljZUtpbmQpO1xuICAgIGxvZ2dlci5pbmZvKFwiXFx1ezFGNEY5fSBGZXRjaGluZyBTdHJlYW1cIiwge1xuICAgICAgbWVkaWFEZXZpY2VLaW5kOiBkYXRhLm1lZGlhRGV2aWNlS2luZCxcbiAgICAgIHByZWZlcnJlZERldmljZUlkXG4gICAgfSk7XG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5vbmRldmljZWNoYW5nZSA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG5ld01lZGlhRGV2aWNlcyA9IGF3YWl0IHRoaXMuZ2V0TWVkaWFEZXZpY2VzKFwiZGV2aWNlLWNoYW5nZVwiKTtcbiAgICAgIGZvciAoY29uc3QgW2RldmljZUtpbmQsIGRldmljZUlkXSBvZiB0aGlzLl9fcHJlZmVycmVkRGV2aWNlcykge1xuICAgICAgICBjb25zdCBkZXZpY2UgPSBuZXdNZWRpYURldmljZXMuZmluZCgoZCkgPT4gZC5kZXZpY2VJZCA9PT0gZGV2aWNlSWQpO1xuICAgICAgICBpZiAoIWRldmljZSkge1xuICAgICAgICAgIHRoaXMuc2V0UHJlZmVycmVkRGV2aWNlKHsgZGV2aWNlSWQ6IG51bGwsIGRldmljZUtpbmQgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuZW1pdChcImRldmljZS1jaGFuZ2VcIik7XG4gICAgfTtcbiAgICB0cnkge1xuICAgICAgbGV0IGZldGNoU3RyZWFtRnVuYztcbiAgICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSBcIm9iamVjdFwiICYmIG5hdmlnYXRvci5wcm9kdWN0ID09PSBcIlJlYWN0TmF0aXZlXCIpIHtcbiAgICAgICAgZmV0Y2hTdHJlYW1GdW5jID0gdGhpcy5fX2ZldGNoU3RyZWFtRnJvbURldmljZUZvclJOO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmV0Y2hTdHJlYW1GdW5jID0gdGhpcy5fX2ZldGNoU3RyZWFtRnJvbURldmljZUZvcldlYjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgc3RyZWFtLCBkZXZpY2VJZCB9ID0gYXdhaXQgZmV0Y2hTdHJlYW1GdW5jKHtcbiAgICAgICAgZGV2aWNlSWQ6IHByZWZlcnJlZERldmljZUlkID8/IHZvaWQgMCxcbiAgICAgICAgbWVkaWFLaW5kOiBkYXRhLm1lZGlhRGV2aWNlS2luZCA9PT0gXCJtaWNcIiA/IFwibWljXCIgOiBcImNhbVwiXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHRyYWNrID0gZGF0YS5tZWRpYURldmljZUtpbmQgPT09IFwibWljXCIgPyBzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXSA6IHN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdO1xuICAgICAgaWYgKCF0aGlzLl9fcHJlZmVycmVkRGV2aWNlcy5nZXQoZGF0YS5tZWRpYURldmljZUtpbmQpKSB7XG4gICAgICAgIHRoaXMuc2V0UHJlZmVycmVkRGV2aWNlKHsgZGV2aWNlSWQsIGRldmljZUtpbmQ6IGRhdGEubWVkaWFEZXZpY2VLaW5kIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RyZWFtLFxuICAgICAgICB0cmFjayxcbiAgICAgICAgZGV2aWNlSWRcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoZXJyKTtcbiAgICAgIGxldCBlcnJvciA9IHtcbiAgICAgICAgbWVzc2FnZTogXCJVbmtub3duIEVycm9yXCIsXG4gICAgICAgIGVycm9yU3RhY2s6IGVyclxuICAgICAgfTtcbiAgICAgIGlmICghaXNSZWFjdE5hdGl2ZSgpICYmIGVyciBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbikge1xuICAgICAgICBlcnJvciA9IHtcbiAgICAgICAgICBibG9ja2VkOiB7XG4gICAgICAgICAgICBieURldmljZU1pc3Npbmc6IGVyci5uYW1lID09PSBcIk5vdEZvdW5kRXJyb3JcIixcbiAgICAgICAgICAgIGJ5RGV2aWNlSW5Vc2U6IGVyci5uYW1lID09PSBcIk92ZXJjb25zdHJhaW5lZEVycm9yXCIsXG4gICAgICAgICAgICBieVBlcm1pc3Npb25zOiBlcnIubmFtZSA9PT0gXCJOb3RBbGxvd2VkRXJyb3JcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2VcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVycm9yID0ge1xuICAgICAgICAgIG1lc3NhZ2U6IFwiTWVkaWEgUGVybWlzc2lvbiBEZW5pZWRcIixcbiAgICAgICAgICBibG9ja2VkOiB7XG4gICAgICAgICAgICBieVBlcm1pc3Npb25zOiB0cnVlLFxuICAgICAgICAgICAgYnlEZXZpY2VJblVzZTogZmFsc2UsXG4gICAgICAgICAgICBieURldmljZU1pc3Npbmc6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RyZWFtOiBudWxsLFxuICAgICAgICB0cmFjazogbnVsbCxcbiAgICAgICAgZGV2aWNlSWQ6IG51bGwsXG4gICAgICAgIGVycm9yXG4gICAgICB9O1xuICAgIH1cbiAgfTtcbiAgZmV0Y2hTdHJlYW1CeUdyb3VwSWQgPSBhc3luYyAoZGF0YSkgPT4ge1xuICAgIGxldCBjb25zdHJhaW50cztcbiAgICBpZiAoZGF0YS5tZWRpYURldmljZUtpbmQgPT09IFwibWljXCIpIHtcbiAgICAgIGNvbnN0cmFpbnRzID0geyBhdWRpbzogeyBncm91cElkOiBkYXRhLmdyb3VwSWQgfSB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdHJhaW50cyA9IHsgdmlkZW86IHsgZ3JvdXBJZDogZGF0YS5ncm91cElkIH0gfTtcbiAgICB9XG4gICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpO1xuICAgIHJldHVybiBzdHJlYW07XG4gIH07XG4gIC8qKlxuICAgKiBGZXRjaCB0aGUgc3RyZWFtIGZyb20gdGhlIGRldmljZSBmb3IgdGhlIFJlYWN0IE5hdGl2ZSBCYXNlZCBBcHBsaWNhdGlvblxuICAgKlxuICAgKiBgVGhpcyBzdHJlYW0gaXMgbm90IG1hbmFnZWQgYnkgdGhlIEh1ZGRsZTAxIFNESywgaS5lLiBpdCB3aWxsIG5vdCBiZSBjbG9zZWQgYnkgdGhlIFNES1xuICAgKiB0aGUgdXNlciBoYXMgdG8gY2xvc2UgaXQgbWFudWFsbHkgYnkgY2FsbGluZyB7c3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4gdHJhY2suc3RvcCgpKX1gXG4gICAqXG4gICAqIE5PVEU6IGB1c2luZyBzdG9wVHJhY2tPbkNsb3NlID0gdHJ1ZWAgd2hpbGUgcHJvZHVjaW5nIHdpbGwgc3RvcCB0aGUgdHJhY2sgd2hlbiBwcm9kdWNpbmcgaXMgc3RvcHBlZFxuICAgKlxuICAgKiBAcGFyYW0gZGF0YSAtIHsgZGV2aWNlSWQ6IFwiZnJvbnRcIiB8IFwiYmFja1wiIHwgXCJhdWRpb1wiIHwgc3RyaW5nOyBraW5kOiBcImF1ZGlvaW5wdXRcIiB8IFwidmlkZW9pbnB1dFwiIH1cbiAgICogQHJldHVybnMgLSB7IHN0cmVhbTogTWVkaWFTdHJlYW0sIGRldmljZUlkOiBzdHJpbmcgfVxuICAgKi9cbiAgX19mZXRjaFN0cmVhbUZyb21EZXZpY2VGb3JSTiA9IGFzeW5jIChkYXRhKSA9PiB7XG4gICAgY29uc3QgY29uc3RyYWludHMgPSBkZXZpY2VDb25zdHJhaW50c19kZWZhdWx0W2RhdGEubWVkaWFLaW5kXTtcbiAgICBsZXQgZmFjaW5nTW9kZTtcbiAgICBpZiAoZGF0YS5tZWRpYUtpbmQgPT09IFwiY2FtXCIpIHtcbiAgICAgIGZhY2luZ01vZGUgPSBkYXRhLmRldmljZUlkID09PSBcImVudmlyb25tZW50XCIgPyBcImVudmlyb25tZW50XCIgOiBcImZyb250XCI7XG4gICAgICBjb25zdHJhaW50cy52aWRlbyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbnN0cmFpbnRzLnZpZGVvLCB7XG4gICAgICAgIGZhY2luZ01vZGVcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZGF0YS5tZWRpYUtpbmQgPT09IFwibWljXCIpIHtcbiAgICAgIGNvbnN0cmFpbnRzLmF1ZGlvID0gT2JqZWN0LmFzc2lnbih7fSwgY29uc3RyYWludHMuYXVkaW8sIHtcbiAgICAgICAgZGV2aWNlSWQ6IGRhdGEuZGV2aWNlSWRcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cyk7XG4gICAgY29uc3Qgc3RyZWFtRGV2aWNlSWQgPSB0aGlzLmdldERldmljZUZyb21GYWNpbmdNb2RlKFxuICAgICAgZmFjaW5nTW9kZSxcbiAgICAgIGRhdGEubWVkaWFLaW5kID09PSBcIm1pY1wiID8gXCJtaWNcIiA6IFwiY2FtXCJcbiAgICApO1xuICAgIGNvbnN0IGRldmljZXMgPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKTtcbiAgICBpZiAoZGF0YS5tZWRpYUtpbmQgPT09IFwiY2FtXCIgfHwgZGF0YS5tZWRpYUtpbmQgPT09IFwibWljXCIpIHtcbiAgICAgIHRoaXMuZW1pdChcInBlcm1pc3Npb24tZ3JhbnRlZFwiLCB7IGRldmljZUtpbmQ6IGRhdGEubWVkaWFLaW5kIH0pO1xuICAgICAgdGhpcy5fX3NldE1lZGlhRGV2aWNlSW5mbyh7IGRldmljZXMsIHVwZGF0ZTogZGF0YS5tZWRpYUtpbmQgfSk7XG4gICAgfVxuICAgIGlmICghc3RyZWFtRGV2aWNlSWQpIHtcbiAgICAgIGNvbnN0IHRyYWNrcyA9IHN0cmVhbS5nZXRUcmFja3MoKTtcbiAgICAgIGZvciAoY29uc3QgdHJhY2sgb2YgdHJhY2tzKSB7XG4gICAgICAgIHRyYWNrLnN0b3AoKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJcXHUyNzRDIE5vIERldmljZUlkIGZvdW5kIGZvciB0aGlzIHN0cmVhbSwgdGhpcyBpcyBhIGJ1ZyBpbiB0aGUgU0RLLCBwbGVhc2UgcmVwb3J0IGl0IHRvIHRoZSBkZXZlbG9wZXJzXCJcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBzdHJlYW0sXG4gICAgICBkZXZpY2VJZDogc3RyZWFtRGV2aWNlSWRcbiAgICB9O1xuICB9O1xuICAvKipcbiAgICogRmV0Y2ggdGhlIHN0cmVhbSBmcm9tIHRoZSBkZXZpY2UgZm9yIHRoZSB3ZWJcbiAgICpcbiAgICogYFRoaXMgc3RyZWFtIGlzIG5vdCBtYW5hZ2VkIGJ5IHRoZSBIdWRkbGUwMSBTREssIGkuZS4gaXQgd2lsbCBub3QgYmUgY2xvc2VkIGJ5IHRoZSBTREtcbiAgICogdGhlIHVzZXIgaGFzIHRvIGNsb3NlIGl0IG1hbnVhbGx5IGJ5IGNhbGxpbmcge3N0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHRyYWNrLnN0b3AoKSl9YFxuICAgKlxuICAgKiBOT1RFOiBgdXNpbmcgc3RvcFRyYWNrT25DbG9zZSA9IHRydWVgIHdoaWxlIHByb2R1Y2luZyB3aWxsIHN0b3AgdGhlIHRyYWNrIHdoZW4gcHJvZHVjaW5nIGlzIHN0b3BwZWRcbiAgICpcbiAgICogQHBhcmFtIGRhdGEgLSB7IGRldmljZUlkOiBzdHJpbmc7IGtpbmQ6ICdhdWRpbycgfCAndmlkZW8nIH1cbiAgICogQHJldHVybnMgLSB7IHN0cmVhbTogTWVkaWFTdHJlYW0sIGRldmljZUlkOiBzdHJpbmcgfVxuICAgKi9cbiAgX19mZXRjaFN0cmVhbUZyb21EZXZpY2VGb3JXZWIgPSBhc3luYyAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IGNvbnN0cmFpbnRzID0gT2JqZWN0LmFzc2lnbihcbiAgICAgIHt9LFxuICAgICAgZGV2aWNlQ29uc3RyYWludHNfZGVmYXVsdFtkYXRhLm1lZGlhS2luZF1cbiAgICApO1xuICAgIGlmIChkYXRhLm1lZGlhS2luZCA9PT0gXCJjYW1cIiAmJiBkYXRhLmRldmljZUlkKSB7XG4gICAgICBjb25zdHJhaW50cy52aWRlbyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbnN0cmFpbnRzLnZpZGVvLCB7XG4gICAgICAgIGRldmljZUlkOiBkYXRhLmRldmljZUlkXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGRhdGEubWVkaWFLaW5kID09PSBcIm1pY1wiICYmIGRhdGEuZGV2aWNlSWQpIHtcbiAgICAgIGNvbnN0IG1pY0NvbnN0cmFpbnQgPSB7fTtcbiAgICAgIGNvbnN0IGRldmljZXMyID0gdGhpcy5fX21lZGlhRGV2aWNlc0luZm8uZ2V0KFwibWljXCIpO1xuICAgICAgaWYgKGRhdGEuZGV2aWNlSWQgPT09IFwiZGVmYXVsdFwiICYmIGRldmljZXMyICYmIGRldmljZXMyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgZGV2aWNlID0gZGV2aWNlczIuZmluZCgoZCkgPT4gZC5kZXZpY2VJZCA9PT0gZGF0YS5kZXZpY2VJZCk7XG4gICAgICAgIGlmIChkZXZpY2UpIHtcbiAgICAgICAgICBtaWNDb25zdHJhaW50Lmdyb3VwSWQgPSBkZXZpY2UuZ3JvdXBJZDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChkYXRhPy5kZXZpY2VJZD8ubGVuZ3RoID4gMCkge1xuICAgICAgICBtaWNDb25zdHJhaW50LmRldmljZUlkID0ge1xuICAgICAgICAgIGV4YWN0OiBkYXRhLmRldmljZUlkXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBjb25zdHJhaW50cy5hdWRpbyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbnN0cmFpbnRzLmF1ZGlvLCBtaWNDb25zdHJhaW50KTtcbiAgICB9XG4gICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpO1xuICAgIGNvbnN0IHN0cmVhbURldmljZUlkID0gc3RyZWFtLmdldFRyYWNrcygpWzBdLmdldFNldHRpbmdzKCkuZGV2aWNlSWQ7XG4gICAgY29uc3QgZGV2aWNlcyA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpO1xuICAgIGlmIChkYXRhLm1lZGlhS2luZCA9PT0gXCJjYW1cIiB8fCBkYXRhLm1lZGlhS2luZCA9PT0gXCJtaWNcIikge1xuICAgICAgdGhpcy5lbWl0KFwicGVybWlzc2lvbi1ncmFudGVkXCIsIHsgZGV2aWNlS2luZDogZGF0YS5tZWRpYUtpbmQgfSk7XG4gICAgICB0aGlzLl9fc2V0TWVkaWFEZXZpY2VJbmZvKHsgZGV2aWNlcywgdXBkYXRlOiBkYXRhLm1lZGlhS2luZCB9KTtcbiAgICB9XG4gICAgaWYgKCFzdHJlYW1EZXZpY2VJZCkge1xuICAgICAgY29uc3QgdHJhY2tzID0gc3RyZWFtLmdldFRyYWNrcygpO1xuICAgICAgZm9yIChjb25zdCB0cmFjayBvZiB0cmFja3MpIHtcbiAgICAgICAgdHJhY2suc3RvcCgpO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIlxcdTI3NEMgTm8gRGV2aWNlSWQgZm91bmQgZm9yIHRoaXMgc3RyZWFtLCB0aGlzIGlzIGEgYnVnIGluIHRoZSBicm93c2VyLCBwbGVhc2UgcmVwb3J0IGl0IHRvIHRoZSBkZXZlbG9wZXJzXCJcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBzdHJlYW0sXG4gICAgICBkZXZpY2VJZDogZGF0YT8uZGV2aWNlSWQgPz8gc3RyZWFtRGV2aWNlSWRcbiAgICB9O1xuICB9O1xuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIEdldCB0aGUgbWVkaWEgcGVybWlzc2lvbiBmb3IgdGhlIGdpdmVuIHR5cGVcbiAgICogQHBhcmFtIGRhdGEgIHsgdHlwZTogJ3ZpZGVvJyB8ICdhdWRpbycgfVxuICAgKiBAdGhyb3dzIGVycm9yIHsgU3RyZWFtUGVybWlzc2lvbnNFcnJvciB9XG4gICAqIEBleGFtcGxlIGF3YWl0IGdldE1lZGlhUGVybWlzc2lvbih7IHR5cGU6ICd2aWRlbycgfSlcbiAgICovXG4gIGdldE1lZGlhUGVybWlzc2lvbiA9IGFzeW5jIChkYXRhKSA9PiB7XG4gICAgY29uc3QgeyBtZWRpYURldmljZUtpbmQgfSA9IGRhdGE7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuZ2V0TWVkaWFEZXZpY2VzKG1lZGlhRGV2aWNlS2luZCk7XG4gICAgICB0aGlzLmVtaXQoXCJwZXJtaXNzaW9uLWdyYW50ZWRcIiwgeyBkZXZpY2VLaW5kOiBtZWRpYURldmljZUtpbmQgfSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBwZXJtaXNzaW9uOiBcImdyYW50ZWRcIlxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGxldCBlcnJvciA9IHtcbiAgICAgICAgbWVzc2FnZTogXCJVbmtub3duIEVycm9yXCIsXG4gICAgICAgIGVycm9yU3RhY2s6IGVyclxuICAgICAgfTtcbiAgICAgIGlmICghaXNSZWFjdE5hdGl2ZSgpICYmIGVyciBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbikge1xuICAgICAgICBlcnJvciA9IHtcbiAgICAgICAgICBibG9ja2VkOiB7XG4gICAgICAgICAgICBieURldmljZU1pc3Npbmc6IGVyci5uYW1lID09PSBcIk5vdEZvdW5kRXJyb3JcIixcbiAgICAgICAgICAgIGJ5RGV2aWNlSW5Vc2U6IGVyci5uYW1lID09PSBcIk92ZXJjb25zdHJhaW5lZEVycm9yXCIsXG4gICAgICAgICAgICBieVBlcm1pc3Npb25zOiBlcnIubmFtZSA9PT0gXCJOb3RBbGxvd2VkRXJyb3JcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2VcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVycm9yID0ge1xuICAgICAgICAgIG1lc3NhZ2U6IFwiTWVkaWEgUGVybWlzc2lvbiBEZW5pZWRcIixcbiAgICAgICAgICBibG9ja2VkOiB7XG4gICAgICAgICAgICBieVBlcm1pc3Npb25zOiB0cnVlLFxuICAgICAgICAgICAgYnlEZXZpY2VJblVzZTogZmFsc2UsXG4gICAgICAgICAgICBieURldmljZU1pc3Npbmc6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgdGhpcy5lbWl0KFwicGVybWlzc2lvbi1kZW5pZWRcIiwgeyBkZXZpY2VLaW5kOiBtZWRpYURldmljZUtpbmQsIGVycm9yIH0pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGVybWlzc2lvbjogXCJkZW5pZWRcIixcbiAgICAgICAgZXJyb3JcbiAgICAgIH07XG4gICAgfVxuICB9O1xuICBzdG9wU3RyZWFtID0gKHN0cmVhbSkgPT4ge1xuICAgIGlmICghc3RyZWFtKSByZXR1cm47XG4gICAgZm9yIChjb25zdCB0cmFjayBvZiBzdHJlYW0uZ2V0VHJhY2tzKCkpIHtcbiAgICAgIHRyYWNrLnN0b3AoKTtcbiAgICB9XG4gIH07XG4gIGRlc3Ryb3kgPSAoKSA9PiB7XG4gICAgdGhpcy5fX3ByZWZlcnJlZERldmljZXMuY2xlYXIoKTtcbiAgICB0aGlzLl9fbWVkaWFEZXZpY2VzSW5mby5jbGVhcigpO1xuICAgIGxvZ2dlci5pbmZvKFwiXFx1MjcwNSBEZXN0cm95ZWQgU3RyZWFtSGFuZGxlclwiKTtcbiAgfTtcbiAgLyoqXG4gICAqIFNldCB0aGUgTWVkaWEgZGV2aWNlcyBpbmZvIGJhc2VkIG9uIHRoZSBsYXRlc3QgZGV2aWNlcyBhdmFpbGFibGUgaW4gdGhlIHN5c3RlbVxuICAgKi9cbiAgX19zZXRNZWRpYURldmljZUluZm8gPSAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHsgZGV2aWNlcywgdXBkYXRlIH0gPSBkYXRhO1xuICAgIGNvbnN0IGNhbURldmljZXMgPSBbXTtcbiAgICBjb25zdCBtaWNEZXZpY2VzID0gW107XG4gICAgY29uc3Qgc3BlYWtlckRldmljZXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGRldmljZSBvZiBkZXZpY2VzKSB7XG4gICAgICBpZiAoZGV2aWNlLmxhYmVsID09PSBcIlwiIHx8IGRldmljZS5kZXZpY2VJZCA9PT0gXCJcIikgY29udGludWU7XG4gICAgICBpZiAoZGV2aWNlLmtpbmQgPT09IFwidmlkZW9pbnB1dFwiKSBjYW1EZXZpY2VzLnB1c2goZGV2aWNlKTtcbiAgICAgIGlmIChkZXZpY2Uua2luZCA9PT0gXCJhdWRpb2lucHV0XCIpIG1pY0RldmljZXMucHVzaChkZXZpY2UpO1xuICAgICAgaWYgKGRldmljZS5raW5kID09PSBcImF1ZGlvb3V0cHV0XCIpIHNwZWFrZXJEZXZpY2VzLnB1c2goZGV2aWNlKTtcbiAgICB9XG4gICAgaWYgKHVwZGF0ZSA9PT0gXCJhbGxcIikge1xuICAgICAgdGhpcy5fX21lZGlhRGV2aWNlc0luZm8uc2V0KFwiY2FtXCIsIGNhbURldmljZXMpO1xuICAgICAgdGhpcy5fX21lZGlhRGV2aWNlc0luZm8uc2V0KFwibWljXCIsIG1pY0RldmljZXMpO1xuICAgICAgdGhpcy5fX21lZGlhRGV2aWNlc0luZm8uc2V0KFwic3BlYWtlclwiLCBzcGVha2VyRGV2aWNlcyk7XG4gICAgfVxuICAgIGlmICh1cGRhdGUgPT09IFwiY2FtXCIpIHRoaXMuX19tZWRpYURldmljZXNJbmZvLnNldChcImNhbVwiLCBjYW1EZXZpY2VzKTtcbiAgICBpZiAodXBkYXRlID09PSBcIm1pY1wiKSB7XG4gICAgICB0aGlzLl9fbWVkaWFEZXZpY2VzSW5mby5zZXQoXCJtaWNcIiwgbWljRGV2aWNlcyk7XG4gICAgICB0aGlzLl9fbWVkaWFEZXZpY2VzSW5mby5zZXQoXCJzcGVha2VyXCIsIHNwZWFrZXJEZXZpY2VzKTtcbiAgICB9XG4gIH07XG59O1xudmFyIERldmljZUhhbmRsZXJfZGVmYXVsdCA9IERldmljZUhhbmRsZXI7XG5cbmV4cG9ydCB7IERldmljZUhhbmRsZXJfZGVmYXVsdCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-HDCV2PNW.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-JSBRDJBE.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-JSBRDJBE.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   __commonJS: () => (/* binding */ __commonJS),\n/* harmony export */   __toESM: () => (/* binding */ __toESM)\n/* harmony export */ });\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstSlNCUkRKQkUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxhQUFhO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNEZBQTRGO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBLG1HQUFtRztBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSw4QkFBOEI7QUFDdkc7QUFDQTs7QUFFK0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2tlbW9uLWdhbWUtZXRoaW5kaWEtMS8uL25vZGVfbW9kdWxlcy9AaHVkZGxlMDEvd2ViLWNvcmUvZGlzdC9jaHVuay1KU0JSREpCRS5qcz84YTdkIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2NyZWF0ZSA9IE9iamVjdC5jcmVhdGU7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIF9fZ2V0T3duUHJvcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7XG52YXIgX19nZXRQcm90b09mID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19jb21tb25KUyA9IChjYiwgbW9kKSA9PiBmdW5jdGlvbiBfX3JlcXVpcmUoKSB7XG4gIHJldHVybiBtb2QgfHwgKDAsIGNiW19fZ2V0T3duUHJvcE5hbWVzKGNiKVswXV0pKChtb2QgPSB7IGV4cG9ydHM6IHt9IH0pLmV4cG9ydHMsIG1vZCksIG1vZC5leHBvcnRzO1xufTtcbnZhciBfX2NvcHlQcm9wcyA9ICh0bywgZnJvbSwgZXhjZXB0LCBkZXNjKSA9PiB7XG4gIGlmIChmcm9tICYmIHR5cGVvZiBmcm9tID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBmcm9tID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBmb3IgKGxldCBrZXkgb2YgX19nZXRPd25Qcm9wTmFtZXMoZnJvbSkpXG4gICAgICBpZiAoIV9faGFzT3duUHJvcC5jYWxsKHRvLCBrZXkpICYmIGtleSAhPT0gZXhjZXB0KVxuICAgICAgICBfX2RlZlByb3AodG8sIGtleSwgeyBnZXQ6ICgpID0+IGZyb21ba2V5XSwgZW51bWVyYWJsZTogIShkZXNjID0gX19nZXRPd25Qcm9wRGVzYyhmcm9tLCBrZXkpKSB8fCBkZXNjLmVudW1lcmFibGUgfSk7XG4gIH1cbiAgcmV0dXJuIHRvO1xufTtcbnZhciBfX3RvRVNNID0gKG1vZCwgaXNOb2RlTW9kZSwgdGFyZ2V0KSA9PiAodGFyZ2V0ID0gbW9kICE9IG51bGwgPyBfX2NyZWF0ZShfX2dldFByb3RvT2YobW9kKSkgOiB7fSwgX19jb3B5UHJvcHMoXG4gIC8vIElmIHRoZSBpbXBvcnRlciBpcyBpbiBub2RlIGNvbXBhdGliaWxpdHkgbW9kZSBvciB0aGlzIGlzIG5vdCBhbiBFU01cbiAgLy8gZmlsZSB0aGF0IGhhcyBiZWVuIGNvbnZlcnRlZCB0byBhIENvbW1vbkpTIGZpbGUgdXNpbmcgYSBCYWJlbC1cbiAgLy8gY29tcGF0aWJsZSB0cmFuc2Zvcm0gKGkuZS4gXCJfX2VzTW9kdWxlXCIgaGFzIG5vdCBiZWVuIHNldCksIHRoZW4gc2V0XG4gIC8vIFwiZGVmYXVsdFwiIHRvIHRoZSBDb21tb25KUyBcIm1vZHVsZS5leHBvcnRzXCIgZm9yIG5vZGUgY29tcGF0aWJpbGl0eS5cbiAgaXNOb2RlTW9kZSB8fCAhbW9kIHx8ICFtb2QuX19lc01vZHVsZSA/IF9fZGVmUHJvcCh0YXJnZXQsIFwiZGVmYXVsdFwiLCB7IHZhbHVlOiBtb2QsIGVudW1lcmFibGU6IHRydWUgfSkgOiB0YXJnZXQsXG4gIG1vZFxuKSk7XG5cbmV4cG9ydCB7IF9fY29tbW9uSlMsIF9fdG9FU00gfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-JSBRDJBE.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-M5LJTIV6.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-M5LJTIV6.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HuddleClient_default: () => (/* binding */ HuddleClient_default)\n/* harmony export */ });\n/* harmony import */ var _chunk_QACHVS7A_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-QACHVS7A.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-QACHVS7A.js\");\n/* harmony import */ var _chunk_BQEIAMKZ_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-BQEIAMKZ.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-BQEIAMKZ.js\");\n/* harmony import */ var _chunk_B7NPLGIE_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-B7NPLGIE.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-B7NPLGIE.js\");\n/* harmony import */ var _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunk-TOCFOGTC.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-TOCFOGTC.js\");\n\n\n\n\n\n// src/HuddleClient.ts\nvar logger = _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_3__.mainLogger.createSubLogger(\"HuddleClient\");\nvar HuddleClient = class {\n  /**\n   * Connection Manager Instance, Hanlder socket connection and stores information about the connection\n   */\n  __socket;\n  /**\n   * Room Instance, Handles the room and its connection\n   */\n  __room;\n  /**\n   * Local Peer Instance, Handles the local peer and its connection\n   */\n  __localPeer;\n  /**\n   * Project Id of the Huddle01 Project\n   */\n  projectId;\n  /**\n   * Returns the underlying socket connection\n   * @throws { Error } If the socket connection is not initialized\n   */\n  get socket() {\n    if (!this.__socket) {\n      throw new Error(\n        \"Socket Is Not Initialized, You need to connect to the Huddle01 Socket Servers first\"\n      );\n    }\n    return this.__socket;\n  }\n  /**\n   * Returns the room instance, throws an error if the room is not created\n   * @throws { Error } If the room is not created, Call createRoom() method before you can access the room\n   */\n  get room() {\n    return this.__room;\n  }\n  get localPeer() {\n    return this.__localPeer;\n  }\n  /**\n   * Room Id of the current room\n   */\n  get roomId() {\n    return this.room.roomId;\n  }\n  /**\n   * Set a new region for the Huddle01 Media Servers\n   */\n  setRegion = (region) => {\n    logger.info(\"Setting a new region, \", region);\n    this.socket.setRegion(region);\n  };\n  constructor(data) {\n    if (data.options?.logging) {\n      (0,_chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_3__.setLogLevel)(\"trace\");\n    }\n    logger.info(\"\\u2705 Initializing HuddleClient\");\n    this.projectId = data.projectId;\n    this.__socket = _chunk_B7NPLGIE_js__WEBPACK_IMPORTED_MODULE_2__.Socket_default.create(data.options?.wsPolyfill);\n    this.__room = _chunk_BQEIAMKZ_js__WEBPACK_IMPORTED_MODULE_1__.Room_default.create({\n      autoConsume: data.options?.autoConsume,\n      activeSpeakers: data.options?.activeSpeakers\n    });\n    this.__localPeer = _chunk_QACHVS7A_js__WEBPACK_IMPORTED_MODULE_0__.LocalPeer_default.create({\n      handlerFactory: data.options?.handlerFactory,\n      volatileMessages: data.options?.volatileMessaging\n    });\n    const isLocalDev = this.projectId === \"development\";\n    if (isLocalDev) {\n      logger.info(\"\\u{1F534} Local Development Mode\");\n      this.socket.enableLocalDev();\n    }\n    this.__socket.on(\"closed\", (code) => {\n      logger.info(\n        \"\\u{1F50C} Socket Connection closed, closing the room and LocalPeer\"\n      );\n      if (code === _chunk_B7NPLGIE_js__WEBPACK_IMPORTED_MODULE_2__.ESocketCloseCode.ROOM_CLOSED) {\n        this.room.close(\"CLOSED\");\n      } else if (code === _chunk_B7NPLGIE_js__WEBPACK_IMPORTED_MODULE_2__.ESocketCloseCode.ROOM_ENTRY_DENIED) {\n        this.room.close(\"DENIED\");\n      } else if (code === _chunk_B7NPLGIE_js__WEBPACK_IMPORTED_MODULE_2__.ESocketCloseCode.CONNECTION_EXPIRED) {\n        logger.info(\"\\u{1F514} Room closed due to connection expired\");\n        this.room.close(\"CONNECTION_EXPIRED\");\n      } else if (code === _chunk_B7NPLGIE_js__WEBPACK_IMPORTED_MODULE_2__.ESocketCloseCode.KICKED) {\n        this.room.close(\"KICKED\");\n      } else if (code === _chunk_B7NPLGIE_js__WEBPACK_IMPORTED_MODULE_2__.ESocketCloseCode.MAX_PEERS_REACHED) {\n        logger.info(\"\\u{1F514} Room closed due to max peers reached\");\n        this.room.close(\"MAX_PEERS_REACHED\");\n      } else if (code === _chunk_B7NPLGIE_js__WEBPACK_IMPORTED_MODULE_2__.ESocketCloseCode.ROOM_EXPIRED) {\n        logger.info(\"\\u{1F514} Room closed due to room expired\");\n        this.room.close(\"ROOM_EXPIRED\");\n      } else {\n        this.room.close();\n      }\n      this.localPeer.close();\n    });\n  }\n  /**\n   * Default method to connect to the Huddle01 Media Room.\n   *\n   * This method connects to socket, creates a room, and then connects to the room;\n   */\n  joinRoom = async (data) => {\n    logger.info(\"\\u{1F514} Joining the room with roomId,\", data.roomId);\n    if (this.socket.connectionState === \"connecting\") {\n      logger.warn(\n        \"\\u{1F514} Socket is already connecting, waiting for the connection to be established\"\n      );\n      return this.room;\n    }\n    if (this.room.state === \"connecting\") {\n      logger.warn(\"\\u{1F514} Room join already in progress\");\n      return this.room;\n    }\n    if (this.localPeer.joined) {\n      logger.warn(\"\\u{1F514} Already joined the room\");\n      return this.room;\n    }\n    try {\n      await this.socket.connect({ token: data.token });\n      const room = this.room.connect({ roomId: data.roomId });\n      return room;\n    } catch (error) {\n      logger.error(\"\\u{1F534} Error While Joining the Room\");\n      logger.error(error);\n      throw error;\n    }\n  };\n  /**\n   * Leave the room and disconnect from the socket\n   */\n  leaveRoom = () => {\n    logger.info(\"Leaving the room\");\n    this.socket.close(_chunk_B7NPLGIE_js__WEBPACK_IMPORTED_MODULE_2__.ESocketCloseCode.NORMAL_CLOSURE);\n  };\n  /**\n   * Close the room and disconnect from the socket\n   */\n  closeRoom = () => {\n    logger.info(\"Closing the room\");\n    this.socket.publish(\"closeRoom\", void 0);\n  };\n};\nvar HuddleClient_default = HuddleClient;\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstTTVMSlRJVjYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0Q7QUFDTDtBQUNvQjtBQUNUOztBQUU5RDtBQUNBLGFBQWEsMERBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sK0RBQVc7QUFDakI7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDhEQUFjO0FBQ2xDLGtCQUFrQiw0REFBWTtBQUM5QjtBQUNBO0FBQ0EsS0FBSztBQUNMLHVCQUF1QixpRUFBaUI7QUFDeEM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esc0JBQXNCLE9BQU87QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDQSxtQkFBbUIsZ0VBQWdCO0FBQ25DO0FBQ0EsUUFBUSxrQkFBa0IsZ0VBQWdCO0FBQzFDO0FBQ0EsUUFBUSxrQkFBa0IsZ0VBQWdCO0FBQzFDLHdCQUF3QixPQUFPO0FBQy9CO0FBQ0EsUUFBUSxrQkFBa0IsZ0VBQWdCO0FBQzFDO0FBQ0EsUUFBUSxrQkFBa0IsZ0VBQWdCO0FBQzFDLHdCQUF3QixPQUFPO0FBQy9CO0FBQ0EsUUFBUSxrQkFBa0IsZ0VBQWdCO0FBQzFDLHdCQUF3QixPQUFPO0FBQy9CO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixPQUFPO0FBQzNCO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsT0FBTztBQUM3QjtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsT0FBTztBQUM3QjtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsbUJBQW1CO0FBQ3JELHVDQUF1QyxxQkFBcUI7QUFDNUQ7QUFDQSxNQUFNO0FBQ04sdUJBQXVCLE9BQU87QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGdFQUFnQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFZ0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2tlbW9uLWdhbWUtZXRoaW5kaWEtMS8uL25vZGVfbW9kdWxlcy9AaHVkZGxlMDEvd2ViLWNvcmUvZGlzdC9jaHVuay1NNUxKVElWNi5qcz83OGIxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExvY2FsUGVlcl9kZWZhdWx0IH0gZnJvbSAnLi9jaHVuay1RQUNIVlM3QS5qcyc7XG5pbXBvcnQgeyBSb29tX2RlZmF1bHQgfSBmcm9tICcuL2NodW5rLUJRRUlBTUtaLmpzJztcbmltcG9ydCB7IFNvY2tldF9kZWZhdWx0LCBFU29ja2V0Q2xvc2VDb2RlIH0gZnJvbSAnLi9jaHVuay1CN05QTEdJRS5qcyc7XG5pbXBvcnQgeyBtYWluTG9nZ2VyLCBzZXRMb2dMZXZlbCB9IGZyb20gJy4vY2h1bmstVE9DRk9HVEMuanMnO1xuXG4vLyBzcmMvSHVkZGxlQ2xpZW50LnRzXG52YXIgbG9nZ2VyID0gbWFpbkxvZ2dlci5jcmVhdGVTdWJMb2dnZXIoXCJIdWRkbGVDbGllbnRcIik7XG52YXIgSHVkZGxlQ2xpZW50ID0gY2xhc3Mge1xuICAvKipcbiAgICogQ29ubmVjdGlvbiBNYW5hZ2VyIEluc3RhbmNlLCBIYW5sZGVyIHNvY2tldCBjb25uZWN0aW9uIGFuZCBzdG9yZXMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNvbm5lY3Rpb25cbiAgICovXG4gIF9fc29ja2V0O1xuICAvKipcbiAgICogUm9vbSBJbnN0YW5jZSwgSGFuZGxlcyB0aGUgcm9vbSBhbmQgaXRzIGNvbm5lY3Rpb25cbiAgICovXG4gIF9fcm9vbTtcbiAgLyoqXG4gICAqIExvY2FsIFBlZXIgSW5zdGFuY2UsIEhhbmRsZXMgdGhlIGxvY2FsIHBlZXIgYW5kIGl0cyBjb25uZWN0aW9uXG4gICAqL1xuICBfX2xvY2FsUGVlcjtcbiAgLyoqXG4gICAqIFByb2plY3QgSWQgb2YgdGhlIEh1ZGRsZTAxIFByb2plY3RcbiAgICovXG4gIHByb2plY3RJZDtcbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHVuZGVybHlpbmcgc29ja2V0IGNvbm5lY3Rpb25cbiAgICogQHRocm93cyB7IEVycm9yIH0gSWYgdGhlIHNvY2tldCBjb25uZWN0aW9uIGlzIG5vdCBpbml0aWFsaXplZFxuICAgKi9cbiAgZ2V0IHNvY2tldCgpIHtcbiAgICBpZiAoIXRoaXMuX19zb2NrZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJTb2NrZXQgSXMgTm90IEluaXRpYWxpemVkLCBZb3UgbmVlZCB0byBjb25uZWN0IHRvIHRoZSBIdWRkbGUwMSBTb2NrZXQgU2VydmVycyBmaXJzdFwiXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fX3NvY2tldDtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcm9vbSBpbnN0YW5jZSwgdGhyb3dzIGFuIGVycm9yIGlmIHRoZSByb29tIGlzIG5vdCBjcmVhdGVkXG4gICAqIEB0aHJvd3MgeyBFcnJvciB9IElmIHRoZSByb29tIGlzIG5vdCBjcmVhdGVkLCBDYWxsIGNyZWF0ZVJvb20oKSBtZXRob2QgYmVmb3JlIHlvdSBjYW4gYWNjZXNzIHRoZSByb29tXG4gICAqL1xuICBnZXQgcm9vbSgpIHtcbiAgICByZXR1cm4gdGhpcy5fX3Jvb207XG4gIH1cbiAgZ2V0IGxvY2FsUGVlcigpIHtcbiAgICByZXR1cm4gdGhpcy5fX2xvY2FsUGVlcjtcbiAgfVxuICAvKipcbiAgICogUm9vbSBJZCBvZiB0aGUgY3VycmVudCByb29tXG4gICAqL1xuICBnZXQgcm9vbUlkKCkge1xuICAgIHJldHVybiB0aGlzLnJvb20ucm9vbUlkO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgYSBuZXcgcmVnaW9uIGZvciB0aGUgSHVkZGxlMDEgTWVkaWEgU2VydmVyc1xuICAgKi9cbiAgc2V0UmVnaW9uID0gKHJlZ2lvbikgPT4ge1xuICAgIGxvZ2dlci5pbmZvKFwiU2V0dGluZyBhIG5ldyByZWdpb24sIFwiLCByZWdpb24pO1xuICAgIHRoaXMuc29ja2V0LnNldFJlZ2lvbihyZWdpb24pO1xuICB9O1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgaWYgKGRhdGEub3B0aW9ucz8ubG9nZ2luZykge1xuICAgICAgc2V0TG9nTGV2ZWwoXCJ0cmFjZVwiKTtcbiAgICB9XG4gICAgbG9nZ2VyLmluZm8oXCJcXHUyNzA1IEluaXRpYWxpemluZyBIdWRkbGVDbGllbnRcIik7XG4gICAgdGhpcy5wcm9qZWN0SWQgPSBkYXRhLnByb2plY3RJZDtcbiAgICB0aGlzLl9fc29ja2V0ID0gU29ja2V0X2RlZmF1bHQuY3JlYXRlKGRhdGEub3B0aW9ucz8ud3NQb2x5ZmlsbCk7XG4gICAgdGhpcy5fX3Jvb20gPSBSb29tX2RlZmF1bHQuY3JlYXRlKHtcbiAgICAgIGF1dG9Db25zdW1lOiBkYXRhLm9wdGlvbnM/LmF1dG9Db25zdW1lLFxuICAgICAgYWN0aXZlU3BlYWtlcnM6IGRhdGEub3B0aW9ucz8uYWN0aXZlU3BlYWtlcnNcbiAgICB9KTtcbiAgICB0aGlzLl9fbG9jYWxQZWVyID0gTG9jYWxQZWVyX2RlZmF1bHQuY3JlYXRlKHtcbiAgICAgIGhhbmRsZXJGYWN0b3J5OiBkYXRhLm9wdGlvbnM/LmhhbmRsZXJGYWN0b3J5LFxuICAgICAgdm9sYXRpbGVNZXNzYWdlczogZGF0YS5vcHRpb25zPy52b2xhdGlsZU1lc3NhZ2luZ1xuICAgIH0pO1xuICAgIGNvbnN0IGlzTG9jYWxEZXYgPSB0aGlzLnByb2plY3RJZCA9PT0gXCJkZXZlbG9wbWVudFwiO1xuICAgIGlmIChpc0xvY2FsRGV2KSB7XG4gICAgICBsb2dnZXIuaW5mbyhcIlxcdXsxRjUzNH0gTG9jYWwgRGV2ZWxvcG1lbnQgTW9kZVwiKTtcbiAgICAgIHRoaXMuc29ja2V0LmVuYWJsZUxvY2FsRGV2KCk7XG4gICAgfVxuICAgIHRoaXMuX19zb2NrZXQub24oXCJjbG9zZWRcIiwgKGNvZGUpID0+IHtcbiAgICAgIGxvZ2dlci5pbmZvKFxuICAgICAgICBcIlxcdXsxRjUwQ30gU29ja2V0IENvbm5lY3Rpb24gY2xvc2VkLCBjbG9zaW5nIHRoZSByb29tIGFuZCBMb2NhbFBlZXJcIlxuICAgICAgKTtcbiAgICAgIGlmIChjb2RlID09PSBFU29ja2V0Q2xvc2VDb2RlLlJPT01fQ0xPU0VEKSB7XG4gICAgICAgIHRoaXMucm9vbS5jbG9zZShcIkNMT1NFRFwiKTtcbiAgICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gRVNvY2tldENsb3NlQ29kZS5ST09NX0VOVFJZX0RFTklFRCkge1xuICAgICAgICB0aGlzLnJvb20uY2xvc2UoXCJERU5JRURcIik7XG4gICAgICB9IGVsc2UgaWYgKGNvZGUgPT09IEVTb2NrZXRDbG9zZUNvZGUuQ09OTkVDVElPTl9FWFBJUkVEKSB7XG4gICAgICAgIGxvZ2dlci5pbmZvKFwiXFx1ezFGNTE0fSBSb29tIGNsb3NlZCBkdWUgdG8gY29ubmVjdGlvbiBleHBpcmVkXCIpO1xuICAgICAgICB0aGlzLnJvb20uY2xvc2UoXCJDT05ORUNUSU9OX0VYUElSRURcIik7XG4gICAgICB9IGVsc2UgaWYgKGNvZGUgPT09IEVTb2NrZXRDbG9zZUNvZGUuS0lDS0VEKSB7XG4gICAgICAgIHRoaXMucm9vbS5jbG9zZShcIktJQ0tFRFwiKTtcbiAgICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gRVNvY2tldENsb3NlQ29kZS5NQVhfUEVFUlNfUkVBQ0hFRCkge1xuICAgICAgICBsb2dnZXIuaW5mbyhcIlxcdXsxRjUxNH0gUm9vbSBjbG9zZWQgZHVlIHRvIG1heCBwZWVycyByZWFjaGVkXCIpO1xuICAgICAgICB0aGlzLnJvb20uY2xvc2UoXCJNQVhfUEVFUlNfUkVBQ0hFRFwiKTtcbiAgICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gRVNvY2tldENsb3NlQ29kZS5ST09NX0VYUElSRUQpIHtcbiAgICAgICAgbG9nZ2VyLmluZm8oXCJcXHV7MUY1MTR9IFJvb20gY2xvc2VkIGR1ZSB0byByb29tIGV4cGlyZWRcIik7XG4gICAgICAgIHRoaXMucm9vbS5jbG9zZShcIlJPT01fRVhQSVJFRFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucm9vbS5jbG9zZSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5sb2NhbFBlZXIuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogRGVmYXVsdCBtZXRob2QgdG8gY29ubmVjdCB0byB0aGUgSHVkZGxlMDEgTWVkaWEgUm9vbS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgY29ubmVjdHMgdG8gc29ja2V0LCBjcmVhdGVzIGEgcm9vbSwgYW5kIHRoZW4gY29ubmVjdHMgdG8gdGhlIHJvb207XG4gICAqL1xuICBqb2luUm9vbSA9IGFzeW5jIChkYXRhKSA9PiB7XG4gICAgbG9nZ2VyLmluZm8oXCJcXHV7MUY1MTR9IEpvaW5pbmcgdGhlIHJvb20gd2l0aCByb29tSWQsXCIsIGRhdGEucm9vbUlkKTtcbiAgICBpZiAodGhpcy5zb2NrZXQuY29ubmVjdGlvblN0YXRlID09PSBcImNvbm5lY3RpbmdcIikge1xuICAgICAgbG9nZ2VyLndhcm4oXG4gICAgICAgIFwiXFx1ezFGNTE0fSBTb2NrZXQgaXMgYWxyZWFkeSBjb25uZWN0aW5nLCB3YWl0aW5nIGZvciB0aGUgY29ubmVjdGlvbiB0byBiZSBlc3RhYmxpc2hlZFwiXG4gICAgICApO1xuICAgICAgcmV0dXJuIHRoaXMucm9vbTtcbiAgICB9XG4gICAgaWYgKHRoaXMucm9vbS5zdGF0ZSA9PT0gXCJjb25uZWN0aW5nXCIpIHtcbiAgICAgIGxvZ2dlci53YXJuKFwiXFx1ezFGNTE0fSBSb29tIGpvaW4gYWxyZWFkeSBpbiBwcm9ncmVzc1wiKTtcbiAgICAgIHJldHVybiB0aGlzLnJvb207XG4gICAgfVxuICAgIGlmICh0aGlzLmxvY2FsUGVlci5qb2luZWQpIHtcbiAgICAgIGxvZ2dlci53YXJuKFwiXFx1ezFGNTE0fSBBbHJlYWR5IGpvaW5lZCB0aGUgcm9vbVwiKTtcbiAgICAgIHJldHVybiB0aGlzLnJvb207XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnNvY2tldC5jb25uZWN0KHsgdG9rZW46IGRhdGEudG9rZW4gfSk7XG4gICAgICBjb25zdCByb29tID0gdGhpcy5yb29tLmNvbm5lY3QoeyByb29tSWQ6IGRhdGEucm9vbUlkIH0pO1xuICAgICAgcmV0dXJuIHJvb207XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIlxcdXsxRjUzNH0gRXJyb3IgV2hpbGUgSm9pbmluZyB0aGUgUm9vbVwiKTtcbiAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH07XG4gIC8qKlxuICAgKiBMZWF2ZSB0aGUgcm9vbSBhbmQgZGlzY29ubmVjdCBmcm9tIHRoZSBzb2NrZXRcbiAgICovXG4gIGxlYXZlUm9vbSA9ICgpID0+IHtcbiAgICBsb2dnZXIuaW5mbyhcIkxlYXZpbmcgdGhlIHJvb21cIik7XG4gICAgdGhpcy5zb2NrZXQuY2xvc2UoRVNvY2tldENsb3NlQ29kZS5OT1JNQUxfQ0xPU1VSRSk7XG4gIH07XG4gIC8qKlxuICAgKiBDbG9zZSB0aGUgcm9vbSBhbmQgZGlzY29ubmVjdCBmcm9tIHRoZSBzb2NrZXRcbiAgICovXG4gIGNsb3NlUm9vbSA9ICgpID0+IHtcbiAgICBsb2dnZXIuaW5mbyhcIkNsb3NpbmcgdGhlIHJvb21cIik7XG4gICAgdGhpcy5zb2NrZXQucHVibGlzaChcImNsb3NlUm9vbVwiLCB2b2lkIDApO1xuICB9O1xufTtcbnZhciBIdWRkbGVDbGllbnRfZGVmYXVsdCA9IEh1ZGRsZUNsaWVudDtcblxuZXhwb3J0IHsgSHVkZGxlQ2xpZW50X2RlZmF1bHQgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-M5LJTIV6.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-MVJZAXK3.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-MVJZAXK3.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EnhancedMap: () => (/* binding */ EnhancedMap),\n/* harmony export */   defaultCompareFn: () => (/* binding */ defaultCompareFn)\n/* harmony export */ });\n// src/common-js/EnhancedMap.ts\nvar defaultCompareFn = (a, b) => {\n  if (a < b) {\n    return false;\n  }\n  if (a > b) {\n    return true;\n  }\n  return false;\n};\nvar EnhancedMap = class {\n  map;\n  compareFn;\n  getKey = (a, b) => {\n    const key = this.compareFn(a, b) ? `${a}_${b}` : `${b}_${a}`;\n    return key;\n  };\n  get size() {\n    return this.map.size;\n  }\n  get data() {\n    return this.map;\n  }\n  get = (a, b) => {\n    const key = this.getKey(a, b);\n    const value = this.map.get(key);\n    return value;\n  };\n  values = () => {\n    return this.map.values();\n  };\n  set = (a, b, value) => {\n    const key = this.getKey(a, b);\n    this.map.set(key, value);\n    return value;\n  };\n  delete = (a, b) => {\n    const key = this.getKey(a, b);\n    return this.map.delete(key);\n  };\n  has = (a, b) => {\n    const key = this.getKey(a, b);\n    return this.map.has(key);\n  };\n  clear = () => {\n    this.map.clear();\n  };\n  constructor(data) {\n    this.map = /* @__PURE__ */ new Map();\n    if (data.compareFn) this.compareFn = data.compareFn;\n    else this.compareFn = defaultCompareFn;\n  }\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstTVZKWkFYSzMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUU7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFeUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2tlbW9uLWdhbWUtZXRoaW5kaWEtMS8uL25vZGVfbW9kdWxlcy9AaHVkZGxlMDEvd2ViLWNvcmUvZGlzdC9jaHVuay1NVkpaQVhLMy5qcz80YzIwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9jb21tb24tanMvRW5oYW5jZWRNYXAudHNcbnZhciBkZWZhdWx0Q29tcGFyZUZuID0gKGEsIGIpID0+IHtcbiAgaWYgKGEgPCBiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChhID4gYikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG52YXIgRW5oYW5jZWRNYXAgPSBjbGFzcyB7XG4gIG1hcDtcbiAgY29tcGFyZUZuO1xuICBnZXRLZXkgPSAoYSwgYikgPT4ge1xuICAgIGNvbnN0IGtleSA9IHRoaXMuY29tcGFyZUZuKGEsIGIpID8gYCR7YX1fJHtifWAgOiBgJHtifV8ke2F9YDtcbiAgICByZXR1cm4ga2V5O1xuICB9O1xuICBnZXQgc2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAuc2l6ZTtcbiAgfVxuICBnZXQgZGF0YSgpIHtcbiAgICByZXR1cm4gdGhpcy5tYXA7XG4gIH1cbiAgZ2V0ID0gKGEsIGIpID0+IHtcbiAgICBjb25zdCBrZXkgPSB0aGlzLmdldEtleShhLCBiKTtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMubWFwLmdldChrZXkpO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcbiAgdmFsdWVzID0gKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLm1hcC52YWx1ZXMoKTtcbiAgfTtcbiAgc2V0ID0gKGEsIGIsIHZhbHVlKSA9PiB7XG4gICAgY29uc3Qga2V5ID0gdGhpcy5nZXRLZXkoYSwgYik7XG4gICAgdGhpcy5tYXAuc2V0KGtleSwgdmFsdWUpO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcbiAgZGVsZXRlID0gKGEsIGIpID0+IHtcbiAgICBjb25zdCBrZXkgPSB0aGlzLmdldEtleShhLCBiKTtcbiAgICByZXR1cm4gdGhpcy5tYXAuZGVsZXRlKGtleSk7XG4gIH07XG4gIGhhcyA9IChhLCBiKSA9PiB7XG4gICAgY29uc3Qga2V5ID0gdGhpcy5nZXRLZXkoYSwgYik7XG4gICAgcmV0dXJuIHRoaXMubWFwLmhhcyhrZXkpO1xuICB9O1xuICBjbGVhciA9ICgpID0+IHtcbiAgICB0aGlzLm1hcC5jbGVhcigpO1xuICB9O1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgdGhpcy5tYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgIGlmIChkYXRhLmNvbXBhcmVGbikgdGhpcy5jb21wYXJlRm4gPSBkYXRhLmNvbXBhcmVGbjtcbiAgICBlbHNlIHRoaXMuY29tcGFyZUZuID0gZGVmYXVsdENvbXBhcmVGbjtcbiAgfVxufTtcblxuZXhwb3J0IHsgRW5oYW5jZWRNYXAsIGRlZmF1bHRDb21wYXJlRm4gfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-MVJZAXK3.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-NTD5WULD.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-NTD5WULD.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConnectionParameterSchema: () => (/* binding */ ConnectionParameterSchema),\n/* harmony export */   DataMessageSchema: () => (/* binding */ DataMessageSchema),\n/* harmony export */   GeolocationSchema: () => (/* binding */ GeolocationSchema),\n/* harmony export */   VolatileDataMessageSchema: () => (/* binding */ VolatileDataMessageSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(ssr)/./node_modules/zod/lib/index.mjs\");\n\n\n// src/validators/common.validators.ts\nvar ConnectionParameterSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n  roomId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string({\n    required_error: \"Room id must provided\"\n  }),\n  token: zod__WEBPACK_IMPORTED_MODULE_0__.z.string({\n    required_error: \"Token must provided\"\n  })\n});\nvar GeolocationSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n  country: zod__WEBPACK_IMPORTED_MODULE_0__.z.string({\n    required_error: \"Country must provided\"\n  }),\n  latitude: zod__WEBPACK_IMPORTED_MODULE_0__.z.string({\n    required_error: \"Latitude must provided\"\n  }),\n  longitude: zod__WEBPACK_IMPORTED_MODULE_0__.z.string({\n    required_error: \"Longitude must provided\"\n  }),\n  region: zod__WEBPACK_IMPORTED_MODULE_0__.z.string({\n    required_error: \"Region must provided\"\n  }),\n  globalRegion: zod__WEBPACK_IMPORTED_MODULE_0__.z.string({\n    required_error: \"Global region must provided\"\n  }),\n  ip: zod__WEBPACK_IMPORTED_MODULE_0__.z.string({\n    required_error: \"IP must provided\"\n  })\n});\nvar VolatileDataMessageSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n  from: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  payload: zod__WEBPACK_IMPORTED_MODULE_0__.z.unknown(),\n  label: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n  to: zod__WEBPACK_IMPORTED_MODULE_0__.z.union([zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"*\"), zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string())]).optional()\n});\nvar DataMessageSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n  from: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  payload: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n  label: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstTlRENVdVTEQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0I7O0FBRXhCO0FBQ0EsZ0NBQWdDLGtDQUFDO0FBQ2pDLFVBQVUsa0NBQUM7QUFDWDtBQUNBLEdBQUc7QUFDSCxTQUFTLGtDQUFDO0FBQ1Y7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNELHdCQUF3QixrQ0FBQztBQUN6QixXQUFXLGtDQUFDO0FBQ1o7QUFDQSxHQUFHO0FBQ0gsWUFBWSxrQ0FBQztBQUNiO0FBQ0EsR0FBRztBQUNILGFBQWEsa0NBQUM7QUFDZDtBQUNBLEdBQUc7QUFDSCxVQUFVLGtDQUFDO0FBQ1g7QUFDQSxHQUFHO0FBQ0gsZ0JBQWdCLGtDQUFDO0FBQ2pCO0FBQ0EsR0FBRztBQUNILE1BQU0sa0NBQUM7QUFDUDtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0QsZ0NBQWdDLGtDQUFDO0FBQ2pDLFFBQVEsa0NBQUM7QUFDVCxXQUFXLGtDQUFDO0FBQ1osU0FBUyxrQ0FBQztBQUNWLE1BQU0sa0NBQUMsUUFBUSxrQ0FBQyxlQUFlLGtDQUFDLE9BQU8sa0NBQUM7QUFDeEMsQ0FBQztBQUNELHdCQUF3QixrQ0FBQztBQUN6QixRQUFRLGtDQUFDO0FBQ1QsV0FBVyxrQ0FBQztBQUNaLFNBQVMsa0NBQUM7QUFDVixDQUFDOztBQUVxRyIsInNvdXJjZXMiOlsid2VicGFjazovL3Bva2Vtb24tZ2FtZS1ldGhpbmRpYS0xLy4vbm9kZV9tb2R1bGVzL0BodWRkbGUwMS93ZWItY29yZS9kaXN0L2NodW5rLU5URDVXVUxELmpzPzIxZGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5cbi8vIHNyYy92YWxpZGF0b3JzL2NvbW1vbi52YWxpZGF0b3JzLnRzXG52YXIgQ29ubmVjdGlvblBhcmFtZXRlclNjaGVtYSA9IHoub2JqZWN0KHtcbiAgcm9vbUlkOiB6LnN0cmluZyh7XG4gICAgcmVxdWlyZWRfZXJyb3I6IFwiUm9vbSBpZCBtdXN0IHByb3ZpZGVkXCJcbiAgfSksXG4gIHRva2VuOiB6LnN0cmluZyh7XG4gICAgcmVxdWlyZWRfZXJyb3I6IFwiVG9rZW4gbXVzdCBwcm92aWRlZFwiXG4gIH0pXG59KTtcbnZhciBHZW9sb2NhdGlvblNjaGVtYSA9IHoub2JqZWN0KHtcbiAgY291bnRyeTogei5zdHJpbmcoe1xuICAgIHJlcXVpcmVkX2Vycm9yOiBcIkNvdW50cnkgbXVzdCBwcm92aWRlZFwiXG4gIH0pLFxuICBsYXRpdHVkZTogei5zdHJpbmcoe1xuICAgIHJlcXVpcmVkX2Vycm9yOiBcIkxhdGl0dWRlIG11c3QgcHJvdmlkZWRcIlxuICB9KSxcbiAgbG9uZ2l0dWRlOiB6LnN0cmluZyh7XG4gICAgcmVxdWlyZWRfZXJyb3I6IFwiTG9uZ2l0dWRlIG11c3QgcHJvdmlkZWRcIlxuICB9KSxcbiAgcmVnaW9uOiB6LnN0cmluZyh7XG4gICAgcmVxdWlyZWRfZXJyb3I6IFwiUmVnaW9uIG11c3QgcHJvdmlkZWRcIlxuICB9KSxcbiAgZ2xvYmFsUmVnaW9uOiB6LnN0cmluZyh7XG4gICAgcmVxdWlyZWRfZXJyb3I6IFwiR2xvYmFsIHJlZ2lvbiBtdXN0IHByb3ZpZGVkXCJcbiAgfSksXG4gIGlwOiB6LnN0cmluZyh7XG4gICAgcmVxdWlyZWRfZXJyb3I6IFwiSVAgbXVzdCBwcm92aWRlZFwiXG4gIH0pXG59KTtcbnZhciBWb2xhdGlsZURhdGFNZXNzYWdlU2NoZW1hID0gei5vYmplY3Qoe1xuICBmcm9tOiB6LnN0cmluZygpLFxuICBwYXlsb2FkOiB6LnVua25vd24oKSxcbiAgbGFiZWw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgdG86IHoudW5pb24oW3oubGl0ZXJhbChcIipcIiksIHouYXJyYXkoei5zdHJpbmcoKSldKS5vcHRpb25hbCgpXG59KTtcbnZhciBEYXRhTWVzc2FnZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgZnJvbTogei5zdHJpbmcoKSxcbiAgcGF5bG9hZDogei5zdHJpbmcoKSxcbiAgbGFiZWw6IHouc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG5cbmV4cG9ydCB7IENvbm5lY3Rpb25QYXJhbWV0ZXJTY2hlbWEsIERhdGFNZXNzYWdlU2NoZW1hLCBHZW9sb2NhdGlvblNjaGVtYSwgVm9sYXRpbGVEYXRhTWVzc2FnZVNjaGVtYSB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-NTD5WULD.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-OR44Z542.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-OR44Z542.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Transport_default: () => (/* binding */ Transport_default)\n/* harmony export */ });\n/* harmony import */ var _chunk_2OLUNNR5_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-2OLUNNR5.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-2OLUNNR5.js\");\n/* harmony import */ var _chunk_MVJZAXK3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-MVJZAXK3.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-MVJZAXK3.js\");\n/* harmony import */ var _chunk_B7NPLGIE_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-B7NPLGIE.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-B7NPLGIE.js\");\n/* harmony import */ var _chunk_YROZGIK5_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunk-YROZGIK5.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-YROZGIK5.js\");\n/* harmony import */ var _chunk_Q4PETRM3_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./chunk-Q4PETRM3.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-Q4PETRM3.js\");\n/* harmony import */ var _chunk_WA3QABYS_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./chunk-WA3QABYS.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-WA3QABYS.js\");\n/* harmony import */ var _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./chunk-TOCFOGTC.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-TOCFOGTC.js\");\n/* harmony import */ var _chunk_BW2DGP4D_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./chunk-BW2DGP4D.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-BW2DGP4D.js\");\n\n\n\n\n\n\n\n\n\n// src/Transport.ts\nvar logger = _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_6__.mainLogger.createSubLogger(\"Transport\");\nvar Transport = class _Transport extends _chunk_BW2DGP4D_js__WEBPACK_IMPORTED_MODULE_7__.EnhancedEventEmitter {\n  /**\n   * Peer Id, which handles the peer id.\n   */\n  peerId;\n  /**\n   *  MediaSoup Device Instance, which handles the browsers or mobile device init.\n   */\n  __device;\n  /**\n   * MediaSoup Transport Instance, which handles the media transport.\n   */\n  __mediasoupTransport;\n  /**\n   * Socket Instance, which handles the socket connection.\n   */\n  __socket;\n  /**\n   * Map of Producers, which handles the producers. ( Sending out Media Streams )\n   *\n   * `Mapped with {producerId => Producer}`\n   */\n  __producers = /* @__PURE__ */ new Map();\n  /**\n   * Map of DataProducers, which handles the dataProducers. ( Sending out Data )\n   *\n   * `Mapped with {label => DataProducer}`\n   */\n  __dataProducers = /* @__PURE__ */ new Map();\n  /**\n   * Map of DataConsumers, which handles the dataConsumers. ( Receiving Media Streams )\n   *\n   * `Mapped with {label:label => DataConsumer}`\n   */\n  __dataConsumers = /* @__PURE__ */ new Map();\n  /**\n   * Map of Consumers, which handles the consumers. ( Receiving Media Streams )\n   *\n   * `Mapped with {label:RemotePeerId => Consumer}`\n   */\n  __consumers = new _chunk_MVJZAXK3_js__WEBPACK_IMPORTED_MODULE_1__.EnhancedMap({});\n  /**\n   * Map of Identifiers to Producer Ids, which handles the mapping of identifiers to producer ids.\n   *\n   * `identifiers` are the unique identifiers for the stream, which is used to identify the stream.\n   */\n  labelToProducerId = /* @__PURE__ */ new Map();\n  /**\n   * Transport Type, which handles the transport type. ( `send | recv` )\n   */\n  transportType;\n  /**\n   * Pending Producer Tasks, which handles the pending producer tasks.\n   * callback function is necessary to be called when the producer is created\n   * on the server as well as on the client side.\n   */\n  __pendingProducerTasks = /* @__PURE__ */ new Map();\n  /**\n   * Debounce to handle concurrent request to restart Ice. Waits for some time before sending\n   * more requests to restart ice.\n   */\n  __iceRestartDebounce = false;\n  /**\n   * WebRTC Device whose APIs for Connection Creation is used.\n   */\n  get device() {\n    return this.__device;\n  }\n  /**\n   * WebRTC Connection, Which handles the producing and consuming of media.\n   */\n  get mediasoupTransport() {\n    return this.__mediasoupTransport;\n  }\n  /**\n   * WebRTC Connection State.\n   */\n  get connectionState() {\n    return this.__mediasoupTransport.connectionState;\n  }\n  /**\n   * Returns the Map of Producers, which handles the producers. ( Sending out Media Streams )\n   */\n  get producers() {\n    return this.__producers;\n  }\n  /**\n   * Returns the ids of the producers, which handles the producers. ( Sending out Media Streams )\n   */\n  get producerIds() {\n    const producerIds = Array.from(this.__producers.keys());\n    return producerIds;\n  }\n  /**\n   * Type of data which is supposed to be produced in the room. ( ArrayBuffer )\n   */\n  get dataProducers() {\n    return this.__dataProducers;\n  }\n  /**\n   * Type of data which is supposed to be consumed from the room. ( ArrayBuffer )\n   */\n  get dataConsumers() {\n    return this.__dataConsumers;\n  }\n  /**\n   * Entity which is supposed to consume the media stream. ( MediaStreamTrack )\n   */\n  get consumers() {\n    return this.__consumers;\n  }\n  /**\n   * Get a producer by its id ( ProducerId is generated by the Media Node )\n   * @param producerId - Producer Id of the producer to be fetched.\n   * @returns - Producer\n   * @throws - Throws an error if the producer is not found.\n   */\n  getProducerById(producerId) {\n    const producer = this.__producers.get(producerId);\n    if (!producer) throw new Error(\"Producer not found\");\n    return producer;\n  }\n  /**\n   * Get the consumer by label and peerId\n   * @param data\n   * @returns Consumer | null; Returns null if consumer is not found\n   */\n  getConsumer = (data) => {\n    const consumer = this.__consumers.get(data.label, data.peerId);\n    if (!consumer) {\n      return null;\n    }\n    return consumer;\n  };\n  /**\n   * Getter for the transport instance.\n   */\n  get transport() {\n    const transport = this.__mediasoupTransport;\n    if (!transport) throw new Error(\"Transport Not Initialized\");\n    return transport;\n  }\n  /**\n   * Every time a producer is created, it is added to the pending producer tasks.\n   * Upon ack from the Media Node the producer is resolved and removed from the pending producer tasks. ( Using resolvePendingProducerTask )\n   * This is done to handle concurrency in the producer creation.\n   * @param data - { label?: string, peerId: string, callback: ({ id }) => void }\n   * @returns - void\n   */\n  addPendingProducerTask = (data) => {\n    const key = `${data.peerId}-${data?.label}`;\n    logger.info(\"\\u{1F514} Adding Pending Producer Task, key\", key);\n    if (this.__pendingProducerTasks.has(key)) {\n      logger.debug(\"\\u{1F534} Producer Creation is Pending for key: \", key);\n      return;\n    }\n    this.__pendingProducerTasks.set(key, data.callback);\n  };\n  /**\n   * Every time a producer is created, it is added to the pending producer tasks.\n   * Upon ack from the Media Node the producer is resolved and removed from the pending producer tasks.\n   * This is done to handle concurrency in the producer creation.\n   * @param data - { label: string, peerId: string, id: string }\n   * @returns - void\n   */\n  resolvePendingProducerTask = (data) => {\n    const key = `${data.peerId}-${data.label}`;\n    logger.info(\"\\u{1F514} Resolving Pending Producer Task, key\", key);\n    const callback = this.__pendingProducerTasks.get(key);\n    if (!callback) {\n      logger.error(\"\\u{1F534} Producer Creation is not Pending for key: \", key);\n      return;\n    }\n    callback({ id: data.id });\n    this.__pendingProducerTasks.delete(key);\n  };\n  /**\n   * Creates a new Transport Instance, Transports are used to send and receive media streams or data.\n   * Transport for the SDK mean a WebRTC Connection.\n   * @param data\n   * @returns\n   */\n  static create = (data) => {\n    try {\n      logger.info(\n        `\\u{1F514} Creating Client Side Transport, type: ${data.transportType}`\n      );\n      const { transportType, device } = data;\n      const payload = {\n        id: data.sdpInfo.id,\n        iceParameters: data.sdpInfo.iceParameters,\n        iceCandidates: data.sdpInfo.iceCandidates,\n        iceServers: data.iceServers,\n        dtlsParameters: data.sdpInfo.dtlsParameters,\n        sctpParameters: data.sdpInfo.sctpParameters,\n        proprietaryConstraints: {},\n        appData: {}\n      };\n      const mediasoupTransport = transportType === \"send\" ? device.createSendTransport(payload) : device.createRecvTransport(payload);\n      const transport = new _Transport({\n        peerId: data.peerId,\n        device: data.device,\n        transportType: data.transportType,\n        mediasoupTransport\n      });\n      return transport;\n    } catch (error) {\n      logger.error(`\\u274C Transport.create(), type: ${data.transportType}`);\n      logger.error(error);\n      throw error;\n    }\n  };\n  constructor(data) {\n    super();\n    this.__socket = _chunk_B7NPLGIE_js__WEBPACK_IMPORTED_MODULE_2__.Socket_default.getInstance();\n    this.__device = data.device;\n    this.transportType = data.transportType;\n    this.__mediasoupTransport = data.mediasoupTransport;\n    this.__mediasoupTransport.on(\"connectionstatechange\", (state) => {\n      this.__connectionStateChangeHandler(state);\n    });\n    this.peerId = data.peerId;\n    this.__listenTransportConnect();\n    this.__listenTransportProduce();\n    if (this.transportType === \"send\") this.__listenTransportDataProduce();\n    logger.info(`\\u2705 ${data.transportType} Transport Initialized`);\n  }\n  /**\n   * Function to handle the event when transport is supposed to be connected. ( WebRTC )\n   */\n  __listenTransportConnect = () => {\n    this.__mediasoupTransport.on(\n      \"connect\",\n      ({ dtlsParameters }, callback, errback) => {\n        logger.info(\"\\u{1F514} Transport Connect Event Called\");\n        try {\n          this.once(\"connectTransportResponse\", () => {\n            callback();\n          });\n          this.__socket.publish(\"connectTransport\", {\n            dtlsParameters,\n            transportType: this.transportType\n          });\n        } catch (error) {\n          logger.error(\"\\u274C Error Transport Connect Event\");\n          logger.error(error);\n          errback(error);\n        }\n      }\n    );\n  };\n  /**\n   * Function to handle the event when media is supposed produced over a Transport ( WebRTC )\n   */\n  __listenTransportProduce = () => {\n    this.__mediasoupTransport.on(\n      \"produce\",\n      async ({ kind, rtpParameters, appData }, callback, errback) => {\n        logger.info(`\\u{1F514} ${this.transportType} Produce Event Called`);\n        try {\n          const label = appData?.label;\n          if (!label) throw new Error(\"\\u{1F534} Stream Identifier Not Found\");\n          const parsedProtoRtpParameters = (0,_chunk_2OLUNNR5_js__WEBPACK_IMPORTED_MODULE_0__.parseToProtoRtpParameters)(rtpParameters);\n          this.__socket.publish(\"produce\", {\n            rtpParameters: parsedProtoRtpParameters,\n            kind,\n            label,\n            appData,\n            paused: false\n          });\n          this.addPendingProducerTask({\n            peerId: this.peerId,\n            label,\n            callback\n          });\n        } catch (error) {\n          logger.error(\"\\u274C Error Transport Produce Event\");\n          logger.error(error);\n          errback(error);\n        }\n      }\n    );\n  };\n  /**\n   * Function to handle the event when data is supposed produced over a Transport ( WebRTC DataChannel )\n   */\n  __listenTransportDataProduce = () => {\n    logger.info(`\\u{1F514} producedata: ${this.transportType} `);\n    this.__mediasoupTransport.on(\n      \"producedata\",\n      async ({ label, appData, sctpStreamParameters, protocol }, callback, errback) => {\n        logger.info(`\\u{1F514} ${this.transportType} Produce Data Event Called`);\n        try {\n          this.__socket.publish(\"produceData\", {\n            transportId: this.__mediasoupTransport.id,\n            sctpStreamParameters,\n            label,\n            protocol,\n            appData\n          });\n          this.addPendingProducerTask({\n            peerId: this.peerId,\n            label,\n            callback\n          });\n        } catch (error) {\n          logger.error(\"\\u274C Error Transport Produce Data Event\");\n          logger.error(error);\n          errback(error);\n        }\n      }\n    );\n  };\n  /**\n   * Function to handle the producing of a media stream to the room.\n   * @param data - { stream: MediaStream, label: string, stopTrackOnClose: boolean, appData?: AppData }\n   * @returns - Producer\n   * NOTE: PrefferedCodec is optional, if not provided, H264 is used as the default codec.\n   * is device does not support the passed codec, an error is thrown.\n   */\n  produce = async (data) => {\n    const kind = (0,_chunk_WA3QABYS_js__WEBPACK_IMPORTED_MODULE_5__.getMediaStreamKind)(data.stream);\n    const track = (0,_chunk_WA3QABYS_js__WEBPACK_IMPORTED_MODULE_5__.getMediaTrack)({ stream: data.stream, kind });\n    logger.info(`\\u{1F514} Produce Called for kind: ${kind}, label: ${data.label}`);\n    try {\n      if (!this.__device.loaded) {\n        throw new Error(\"Device Not Loaded\");\n      }\n      if (!this.__device.rtpCapabilities.codecs) {\n        throw new Error(\"No Codecs Found\");\n      }\n      if (!this.__device.canProduce(kind)) {\n        throw new Error(`Device Cannot produce ${kind}`);\n      }\n      if (this.transportType !== \"send\") {\n        throw new Error(`Cannot produce on ${this.transportType} transport`);\n      }\n      const codecs = this.__device.rtpCapabilities?.codecs;\n      if (!codecs) {\n        throw new Error(\"\\u274C Device RTP Capabilities not found\");\n      }\n      const videoCodecMimeType = data.prefferedCodec ?? \"video/h264\";\n      const videoCodec = codecs.find(\n        (codec) => codec.mimeType.toLowerCase() === videoCodecMimeType\n      );\n      if (!videoCodec) {\n        throw new Error(\n          `\\u274C Preffered codec: ${data.prefferedCodec} not found on the device`\n        );\n      }\n      const codecViaMediaType = {\n        video: videoCodec,\n        \"screen-share-video\": videoCodec,\n        audio: void 0\n      };\n      const mediaType = data.label === \"screen-share-video\" ? \"screen-share-video\" : kind;\n      const mediasoupProducer = await this.__mediasoupTransport.produce({\n        track,\n        encodings: _chunk_Q4PETRM3_js__WEBPACK_IMPORTED_MODULE_4__.encodingViaMediaType[mediaType],\n        codecOptions: _chunk_Q4PETRM3_js__WEBPACK_IMPORTED_MODULE_4__.codecOptionsViaKind[kind],\n        codec: codecViaMediaType[mediaType],\n        stopTracks: data.stopTrackOnClose,\n        zeroRtpOnPause: true,\n        disableTrackOnPause: true,\n        appData: {\n          ...data.appData,\n          producerPeerId: this.peerId\n        }\n      });\n      mediasoupProducer.on(\"@close\", () => {\n        logger.info(\"\\u{1F514} Closing Producer\", {\n          label: data.label,\n          producerId: mediasoupProducer.id\n        });\n        this.__producers.delete(mediasoupProducer.id);\n        this.labelToProducerId.delete(data.label);\n      });\n      this.__producers.set(mediasoupProducer.id, mediasoupProducer);\n      this.labelToProducerId.set(data.label, mediasoupProducer.id);\n      logger.info(\n        `\\u{1F514} Client Side Producer Created sucessfully with label : ${data.label}`\n      );\n      return mediasoupProducer;\n    } catch (error) {\n      logger.error(\"\\u274C Error Transport Produce Event\");\n      logger.error(error);\n      throw error;\n    }\n  };\n  /**\n   * Function to handle the producing of a data stream to the room.\n   * @param data - { label: string, ordered?: boolean, maxRetransmits?: number, maxPacketLifeTime?: number }\n   * - `label` is the unique identifier for the data stream, Cannot use `bot` which is reserved.\n   * - `ordered` is the boolean value to determine if the data should be ordered or not, or reliably.\n   * - `maxRetransmits` When ordered is false indicates the maximum number of times a packet will be retransmitted.\n   * - `maxPacketLifeTime` When ordered is false indicates the time (in milliseconds) after which a SCTP packet will stop being retransmitted.\n   * @returns - DataProducer\n   */\n  produceData = async (options) => {\n    logger.info(`\\u{1F514} Produce Data Called for label: ${options.label}`);\n    try {\n      if (this.transportType !== \"send\") {\n        throw new Error(\n          `Cannot produceData on ${this.transportType} transport`\n        );\n      }\n      const label = this.dataProducers.get(options.label);\n      if (label) {\n        throw new Error(\n          `DataProducer with label ${options.label} already exists, please close it before creating a new one`\n        );\n      }\n      if (!this.__device.loaded) {\n        throw new Error(\"Device Not Loaded\");\n      }\n      if (!this.__device.sctpCapabilities) {\n        throw new Error(\"No SCTP Capabilities Found\");\n      }\n      const dataProducer = await this.__mediasoupTransport.produceData({\n        label: options.label,\n        ordered: options.ordered ?? false,\n        maxPacketLifeTime: options.maxPacketLifeTime,\n        maxRetransmits: options.maxRetransmits\n      });\n      dataProducer.on(\"open\", () => {\n        logger.info(\"\\u2705 DataProducer opened\", options);\n      });\n      dataProducer.on(\"@close\", () => {\n        logger.info(\"\\u{1F514} Closing DataProducer\", {\n          label: options.label,\n          dataProducerId: dataProducer.id\n        });\n        this.__dataProducers.delete(dataProducer.label);\n      });\n      dataProducer.on(\"transportclose\", () => {\n        this.__dataProducers.delete(dataProducer.label);\n      });\n      this.__dataProducers.set(dataProducer.label, dataProducer);\n      logger.info(\n        `\\u{1F514} Client Side DataProducer Created sucessfully with label : ${options.label}`\n      );\n      return dataProducer;\n    } catch (error) {\n      logger.error(\"\\u274C Error Transport Produce Data Event\", error);\n      throw error;\n    }\n  };\n  /**\n   * @description - Close the data producer by label\n   * @param label - Label of the data producer to be closed\n   */\n  closeDataProducer = (label) => {\n    const dataProducer = this.__dataProducers.get(label);\n    dataProducer?.close();\n    this.__dataProducers.delete(label);\n    logger.info(`\\u{1F514} DataProducer with label ${label} closed`);\n  };\n  /**\n   * Consume means to receive the media stream from the room. ( MediaStreamTrack )\n   * Using WebRTC Connection to receive the media stream.\n   * @param data - { producerPeerId: string, kind: string, rtpParameters: any, appData?: AppData }\n   * @returns - { consumer: Consumer, mediaSoupConsumer: mediasoup.types.Consumer }\n   */\n  consume = async (data) => {\n    const { label, producerPeerId, kind } = data;\n    logger.info(\n      `\\u{1F514} Consume Called for ${kind} from remote peer ${producerPeerId}`\n    );\n    try {\n      if (this.transportType !== \"recv\") {\n        throw new Error(`Cannot consume on ${this.transportType} transport`);\n      }\n      if (!this.__device.loaded) {\n        throw new Error(\"Device Not Loaded\");\n      }\n      if (!this.__device.rtpCapabilities.codecs) {\n        throw new Error(\"No Codecs Found\");\n      }\n      const parsedRtpParameters = (0,_chunk_2OLUNNR5_js__WEBPACK_IMPORTED_MODULE_0__.parseRtpParameters)(data.rtpParameters);\n      const consumer = _chunk_YROZGIK5_js__WEBPACK_IMPORTED_MODULE_3__.Consumer_default.create({\n        producerId: data.producerId,\n        producerPaused: data.producerPaused ?? false,\n        producerPeerId,\n        label\n      });\n      const mediaSoupConsumer = await this.__mediasoupTransport.consume({\n        id: data.consumerId,\n        rtpParameters: parsedRtpParameters,\n        kind: data.kind,\n        producerId: data.producerId,\n        appData: data.appData\n      });\n      mediaSoupConsumer.on(\"@close\", () => {\n        this.__consumers.delete(label, producerPeerId);\n      });\n      mediaSoupConsumer.on(\"transportclose\", () => {\n        this.closeConsumer({ label, peerId: producerPeerId });\n      });\n      mediaSoupConsumer.on(\"trackended\", () => {\n        this.closeConsumer({ label, peerId: producerPeerId });\n      });\n      this.__consumers.set(consumer.label, consumer.producerPeerId, consumer);\n      consumer.setMediaSoupConsumer(mediaSoupConsumer);\n      return { consumer, mediaSoupConsumer };\n    } catch (error) {\n      logger.error(error);\n      throw new Error(\"\\u274C Error calling consume()\");\n    }\n  };\n  /**\n   * Consume means to receive the data stream from the room. ( ArrayBuffer )\n   * Using WebRTC Connection to receive the data stream.\n   * @param data - { label: string, appData?: AppData, dataProducerId: string, protocol: string, id: string, peerId: string, sctpStreamParameters: any }\n   * @returns - DataConsumer\n   */\n  consumeData = async (data) => {\n    const {\n      label,\n      appData,\n      dataProducerId,\n      protocol,\n      id,\n      peerId,\n      sctpStreamParameters\n    } = data;\n    logger.info(\n      `\\u{1F514} ConsumeData from producer ${peerId} consumerIdFromServer:${id}`\n    );\n    try {\n      if (this.transportType !== \"recv\") {\n        throw new Error(`Cannot consume on ${this.transportType} transport`);\n      }\n      if (!this.__device.loaded) {\n        throw new Error(\"Device Not Loaded\");\n      }\n      if (!this.__device.rtpCapabilities.codecs) {\n        throw new Error(\"No Codecs Found\");\n      }\n      const dataConsumer = await this.transport.consumeData({\n        id,\n        dataProducerId,\n        sctpStreamParameters: {\n          ...sctpStreamParameters,\n          maxPacketLifeTime: sctpStreamParameters.maxPacketLifeTime === 0 ? void 0 : sctpStreamParameters.maxPacketLifeTime,\n          maxRetransmits: sctpStreamParameters.maxRetransmits === 0 ? void 0 : sctpStreamParameters.maxRetransmits\n        },\n        label,\n        protocol,\n        appData\n      });\n      dataConsumer.on(\"open\", () => {\n        logger.info(`\\u2705 DataConsumer with ${label} opened`);\n      });\n      dataConsumer.on(\"close\", () => {\n        logger.warn(`\\u2705 DataConsumer with ${label} closed`);\n        dataConsumer.close();\n        dataConsumer.removeAllListeners();\n        this.__dataConsumers.delete(label);\n      });\n      dataConsumer.on(\"transportclose\", () => {\n        console.info(`\\u2705 DataConsumer with ${label} closed`);\n        dataConsumer.close();\n        dataConsumer.removeAllListeners();\n        this.__dataConsumers.delete(label);\n      });\n      dataConsumer.on(\"error\", (error) => {\n        logger.error(`\\u2705 DataConsumer \"error\": ${error} closed`);\n        dataConsumer.close();\n        dataConsumer.removeAllListeners();\n        this.__dataConsumers.delete(label);\n      });\n      this.__dataConsumers.set(label, dataConsumer);\n      return dataConsumer;\n    } catch (error) {\n      logger.error(error);\n      throw new Error(\"\\u274C Error calling consumeData()\");\n    }\n  };\n  /**\n   * Close the consumer by label and peerId\n   * @param data - { label: string, peerId: string }\n   */\n  closeConsumer = (data) => {\n    const consumer = this.getConsumer(data);\n    consumer?.close();\n    this.__consumers.delete(data.label, data.peerId);\n  };\n  /**\n   * Close the underlying transport\n   * @param data - { retries: number }\n   * @returns - void\n   */\n  close = async (data) => {\n    try {\n      if (data.retries <= 0) {\n        logger.error(\"\\u274C Error closing transport, max retries exceeded\");\n        return;\n      }\n      logger.info(`\\u{1F514} Closing ${this.transportType} transport`);\n      this.__mediasoupTransport.close();\n      this.__producers.clear();\n      this.__consumers.clear();\n      this.__dataProducers.clear();\n      this.__dataConsumers.clear();\n      logger.info(`\\u2705 ${this.transportType} transport closed`);\n    } catch (error) {\n      logger.error(\"\\u274C Error closing transport\");\n      logger.error(error);\n      logger.error(\"Retrying...\");\n      this.close({ retries: data.retries - 1 });\n    }\n  };\n  /**\n   * WebRTC Connection is prone to connection state changes, as its a peer to peer connection.\n   * This function handles the connection state changes. and re establishes the connection if it is lost.\n   * @param state - ConnectionState\n   */\n  __connectionStateChangeHandler = (state) => {\n    try {\n      logger.debug(\n        `\\u{1F514} ${this.transportType} Transport Connection State Changed, state: ${state}`\n      );\n      const transportType = this.transportType;\n      const handler = {\n        connected: () => {\n          logger.debug(`\\u{1F514} ${this.transportType} Transport Connected`);\n        },\n        disconnected: () => {\n          if (this.__iceRestartDebounce) return;\n          this.__iceRestartDebounce = true;\n          this.__socket.publish(\"restartTransportIce\", {\n            transportId: this.__mediasoupTransport.id,\n            transportType\n          });\n          setTimeout(() => {\n            this.__iceRestartDebounce = false;\n          }, 3e3);\n          logger.debug(`\\u{1F514} ${transportType} Transport Disconnected`);\n        },\n        failed: () => {\n          logger.debug(`\\u{1F514} ${transportType} Transport Failed`);\n        },\n        connecting: () => {\n          logger.debug(`\\u{1F514} ${transportType} Transport Connecting`);\n        },\n        closed: () => {\n          logger.debug(`\\u{1F514} ${transportType} Transport closed`);\n        },\n        new: () => {\n          logger.debug(`\\u{1F514} ${transportType} Transport new`);\n        }\n      };\n      handler[state]();\n    } catch (err) {\n      logger.error(\"\\u274C Error in connectionStateChangeHandler\");\n      logger.error(err);\n    }\n  };\n};\nvar Transport_default = Transport;\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstT1I0NFo1NDIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQW9GO0FBQ2xDO0FBQ0c7QUFDRTtBQUN5QjtBQUNSO0FBQ3ZCO0FBQ1U7O0FBRTNEO0FBQ0EsYUFBYSwwREFBVTtBQUN2Qix5Q0FBeUMsb0VBQW9CO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHVCQUF1QjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHNCQUFzQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDRCQUE0QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLCtCQUErQjtBQUNsRDtBQUNBLG9CQUFvQiwyREFBVyxHQUFHO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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O0FBQ047QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDJCQUEyQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksT0FBTyxFQUFFLG9CQUFvQiw2Q0FBNkMsTUFBTTtBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixPQUFPLEVBQUUsb0JBQW9CO0FBQ3hELFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFdBQVc7QUFDWCwyQkFBMkIsT0FBTyxFQUFFLGVBQWU7QUFDbkQsU0FBUztBQUNUO0FBQ0EsMkJBQTJCLE9BQU8sRUFBRSxlQUFlO0FBQ25ELFNBQVM7QUFDVDtBQUNBLDJCQUEyQixPQUFPLEVBQUUsZUFBZTtBQUNuRCxTQUFTO0FBQ1Q7QUFDQSwyQkFBMkIsT0FBTyxFQUFFLGVBQWU7QUFDbkQsU0FBUztBQUNUO0FBQ0EsMkJBQTJCLE9BQU8sRUFBRSxlQUFlO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9rZW1vbi1nYW1lLWV0aGluZGlhLTEvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstT1I0NFo1NDIuanM/NjE0YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZVRvUHJvdG9SdHBQYXJhbWV0ZXJzLCBwYXJzZVJ0cFBhcmFtZXRlcnMgfSBmcm9tICcuL2NodW5rLTJPTFVOTlI1LmpzJztcbmltcG9ydCB7IEVuaGFuY2VkTWFwIH0gZnJvbSAnLi9jaHVuay1NVkpaQVhLMy5qcyc7XG5pbXBvcnQgeyBTb2NrZXRfZGVmYXVsdCB9IGZyb20gJy4vY2h1bmstQjdOUExHSUUuanMnO1xuaW1wb3J0IHsgQ29uc3VtZXJfZGVmYXVsdCB9IGZyb20gJy4vY2h1bmstWVJPWkdJSzUuanMnO1xuaW1wb3J0IHsgZW5jb2RpbmdWaWFNZWRpYVR5cGUsIGNvZGVjT3B0aW9uc1ZpYUtpbmQgfSBmcm9tICcuL2NodW5rLVE0UEVUUk0zLmpzJztcbmltcG9ydCB7IGdldE1lZGlhU3RyZWFtS2luZCwgZ2V0TWVkaWFUcmFjayB9IGZyb20gJy4vY2h1bmstV0EzUUFCWVMuanMnO1xuaW1wb3J0IHsgbWFpbkxvZ2dlciB9IGZyb20gJy4vY2h1bmstVE9DRk9HVEMuanMnO1xuaW1wb3J0IHsgRW5oYW5jZWRFdmVudEVtaXR0ZXIgfSBmcm9tICcuL2NodW5rLUJXMkRHUDRELmpzJztcblxuLy8gc3JjL1RyYW5zcG9ydC50c1xudmFyIGxvZ2dlciA9IG1haW5Mb2dnZXIuY3JlYXRlU3ViTG9nZ2VyKFwiVHJhbnNwb3J0XCIpO1xudmFyIFRyYW5zcG9ydCA9IGNsYXNzIF9UcmFuc3BvcnQgZXh0ZW5kcyBFbmhhbmNlZEV2ZW50RW1pdHRlciB7XG4gIC8qKlxuICAgKiBQZWVyIElkLCB3aGljaCBoYW5kbGVzIHRoZSBwZWVyIGlkLlxuICAgKi9cbiAgcGVlcklkO1xuICAvKipcbiAgICogIE1lZGlhU291cCBEZXZpY2UgSW5zdGFuY2UsIHdoaWNoIGhhbmRsZXMgdGhlIGJyb3dzZXJzIG9yIG1vYmlsZSBkZXZpY2UgaW5pdC5cbiAgICovXG4gIF9fZGV2aWNlO1xuICAvKipcbiAgICogTWVkaWFTb3VwIFRyYW5zcG9ydCBJbnN0YW5jZSwgd2hpY2ggaGFuZGxlcyB0aGUgbWVkaWEgdHJhbnNwb3J0LlxuICAgKi9cbiAgX19tZWRpYXNvdXBUcmFuc3BvcnQ7XG4gIC8qKlxuICAgKiBTb2NrZXQgSW5zdGFuY2UsIHdoaWNoIGhhbmRsZXMgdGhlIHNvY2tldCBjb25uZWN0aW9uLlxuICAgKi9cbiAgX19zb2NrZXQ7XG4gIC8qKlxuICAgKiBNYXAgb2YgUHJvZHVjZXJzLCB3aGljaCBoYW5kbGVzIHRoZSBwcm9kdWNlcnMuICggU2VuZGluZyBvdXQgTWVkaWEgU3RyZWFtcyApXG4gICAqXG4gICAqIGBNYXBwZWQgd2l0aCB7cHJvZHVjZXJJZCA9PiBQcm9kdWNlcn1gXG4gICAqL1xuICBfX3Byb2R1Y2VycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIC8qKlxuICAgKiBNYXAgb2YgRGF0YVByb2R1Y2Vycywgd2hpY2ggaGFuZGxlcyB0aGUgZGF0YVByb2R1Y2Vycy4gKCBTZW5kaW5nIG91dCBEYXRhIClcbiAgICpcbiAgICogYE1hcHBlZCB3aXRoIHtsYWJlbCA9PiBEYXRhUHJvZHVjZXJ9YFxuICAgKi9cbiAgX19kYXRhUHJvZHVjZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgLyoqXG4gICAqIE1hcCBvZiBEYXRhQ29uc3VtZXJzLCB3aGljaCBoYW5kbGVzIHRoZSBkYXRhQ29uc3VtZXJzLiAoIFJlY2VpdmluZyBNZWRpYSBTdHJlYW1zIClcbiAgICpcbiAgICogYE1hcHBlZCB3aXRoIHtsYWJlbDpsYWJlbCA9PiBEYXRhQ29uc3VtZXJ9YFxuICAgKi9cbiAgX19kYXRhQ29uc3VtZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgLyoqXG4gICAqIE1hcCBvZiBDb25zdW1lcnMsIHdoaWNoIGhhbmRsZXMgdGhlIGNvbnN1bWVycy4gKCBSZWNlaXZpbmcgTWVkaWEgU3RyZWFtcyApXG4gICAqXG4gICAqIGBNYXBwZWQgd2l0aCB7bGFiZWw6UmVtb3RlUGVlcklkID0+IENvbnN1bWVyfWBcbiAgICovXG4gIF9fY29uc3VtZXJzID0gbmV3IEVuaGFuY2VkTWFwKHt9KTtcbiAgLyoqXG4gICAqIE1hcCBvZiBJZGVudGlmaWVycyB0byBQcm9kdWNlciBJZHMsIHdoaWNoIGhhbmRsZXMgdGhlIG1hcHBpbmcgb2YgaWRlbnRpZmllcnMgdG8gcHJvZHVjZXIgaWRzLlxuICAgKlxuICAgKiBgaWRlbnRpZmllcnNgIGFyZSB0aGUgdW5pcXVlIGlkZW50aWZpZXJzIGZvciB0aGUgc3RyZWFtLCB3aGljaCBpcyB1c2VkIHRvIGlkZW50aWZ5IHRoZSBzdHJlYW0uXG4gICAqL1xuICBsYWJlbFRvUHJvZHVjZXJJZCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIC8qKlxuICAgKiBUcmFuc3BvcnQgVHlwZSwgd2hpY2ggaGFuZGxlcyB0aGUgdHJhbnNwb3J0IHR5cGUuICggYHNlbmQgfCByZWN2YCApXG4gICAqL1xuICB0cmFuc3BvcnRUeXBlO1xuICAvKipcbiAgICogUGVuZGluZyBQcm9kdWNlciBUYXNrcywgd2hpY2ggaGFuZGxlcyB0aGUgcGVuZGluZyBwcm9kdWNlciB0YXNrcy5cbiAgICogY2FsbGJhY2sgZnVuY3Rpb24gaXMgbmVjZXNzYXJ5IHRvIGJlIGNhbGxlZCB3aGVuIHRoZSBwcm9kdWNlciBpcyBjcmVhdGVkXG4gICAqIG9uIHRoZSBzZXJ2ZXIgYXMgd2VsbCBhcyBvbiB0aGUgY2xpZW50IHNpZGUuXG4gICAqL1xuICBfX3BlbmRpbmdQcm9kdWNlclRhc2tzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgLyoqXG4gICAqIERlYm91bmNlIHRvIGhhbmRsZSBjb25jdXJyZW50IHJlcXVlc3QgdG8gcmVzdGFydCBJY2UuIFdhaXRzIGZvciBzb21lIHRpbWUgYmVmb3JlIHNlbmRpbmdcbiAgICogbW9yZSByZXF1ZXN0cyB0byByZXN0YXJ0IGljZS5cbiAgICovXG4gIF9faWNlUmVzdGFydERlYm91bmNlID0gZmFsc2U7XG4gIC8qKlxuICAgKiBXZWJSVEMgRGV2aWNlIHdob3NlIEFQSXMgZm9yIENvbm5lY3Rpb24gQ3JlYXRpb24gaXMgdXNlZC5cbiAgICovXG4gIGdldCBkZXZpY2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX19kZXZpY2U7XG4gIH1cbiAgLyoqXG4gICAqIFdlYlJUQyBDb25uZWN0aW9uLCBXaGljaCBoYW5kbGVzIHRoZSBwcm9kdWNpbmcgYW5kIGNvbnN1bWluZyBvZiBtZWRpYS5cbiAgICovXG4gIGdldCBtZWRpYXNvdXBUcmFuc3BvcnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX19tZWRpYXNvdXBUcmFuc3BvcnQ7XG4gIH1cbiAgLyoqXG4gICAqIFdlYlJUQyBDb25uZWN0aW9uIFN0YXRlLlxuICAgKi9cbiAgZ2V0IGNvbm5lY3Rpb25TdGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fX21lZGlhc291cFRyYW5zcG9ydC5jb25uZWN0aW9uU3RhdGU7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIE1hcCBvZiBQcm9kdWNlcnMsIHdoaWNoIGhhbmRsZXMgdGhlIHByb2R1Y2Vycy4gKCBTZW5kaW5nIG91dCBNZWRpYSBTdHJlYW1zIClcbiAgICovXG4gIGdldCBwcm9kdWNlcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX19wcm9kdWNlcnM7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGlkcyBvZiB0aGUgcHJvZHVjZXJzLCB3aGljaCBoYW5kbGVzIHRoZSBwcm9kdWNlcnMuICggU2VuZGluZyBvdXQgTWVkaWEgU3RyZWFtcyApXG4gICAqL1xuICBnZXQgcHJvZHVjZXJJZHMoKSB7XG4gICAgY29uc3QgcHJvZHVjZXJJZHMgPSBBcnJheS5mcm9tKHRoaXMuX19wcm9kdWNlcnMua2V5cygpKTtcbiAgICByZXR1cm4gcHJvZHVjZXJJZHM7XG4gIH1cbiAgLyoqXG4gICAqIFR5cGUgb2YgZGF0YSB3aGljaCBpcyBzdXBwb3NlZCB0byBiZSBwcm9kdWNlZCBpbiB0aGUgcm9vbS4gKCBBcnJheUJ1ZmZlciApXG4gICAqL1xuICBnZXQgZGF0YVByb2R1Y2VycygpIHtcbiAgICByZXR1cm4gdGhpcy5fX2RhdGFQcm9kdWNlcnM7XG4gIH1cbiAgLyoqXG4gICAqIFR5cGUgb2YgZGF0YSB3aGljaCBpcyBzdXBwb3NlZCB0byBiZSBjb25zdW1lZCBmcm9tIHRoZSByb29tLiAoIEFycmF5QnVmZmVyIClcbiAgICovXG4gIGdldCBkYXRhQ29uc3VtZXJzKCkge1xuICAgIHJldHVybiB0aGlzLl9fZGF0YUNvbnN1bWVycztcbiAgfVxuICAvKipcbiAgICogRW50aXR5IHdoaWNoIGlzIHN1cHBvc2VkIHRvIGNvbnN1bWUgdGhlIG1lZGlhIHN0cmVhbS4gKCBNZWRpYVN0cmVhbVRyYWNrIClcbiAgICovXG4gIGdldCBjb25zdW1lcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX19jb25zdW1lcnM7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhIHByb2R1Y2VyIGJ5IGl0cyBpZCAoIFByb2R1Y2VySWQgaXMgZ2VuZXJhdGVkIGJ5IHRoZSBNZWRpYSBOb2RlIClcbiAgICogQHBhcmFtIHByb2R1Y2VySWQgLSBQcm9kdWNlciBJZCBvZiB0aGUgcHJvZHVjZXIgdG8gYmUgZmV0Y2hlZC5cbiAgICogQHJldHVybnMgLSBQcm9kdWNlclxuICAgKiBAdGhyb3dzIC0gVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBwcm9kdWNlciBpcyBub3QgZm91bmQuXG4gICAqL1xuICBnZXRQcm9kdWNlckJ5SWQocHJvZHVjZXJJZCkge1xuICAgIGNvbnN0IHByb2R1Y2VyID0gdGhpcy5fX3Byb2R1Y2Vycy5nZXQocHJvZHVjZXJJZCk7XG4gICAgaWYgKCFwcm9kdWNlcikgdGhyb3cgbmV3IEVycm9yKFwiUHJvZHVjZXIgbm90IGZvdW5kXCIpO1xuICAgIHJldHVybiBwcm9kdWNlcjtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBjb25zdW1lciBieSBsYWJlbCBhbmQgcGVlcklkXG4gICAqIEBwYXJhbSBkYXRhXG4gICAqIEByZXR1cm5zIENvbnN1bWVyIHwgbnVsbDsgUmV0dXJucyBudWxsIGlmIGNvbnN1bWVyIGlzIG5vdCBmb3VuZFxuICAgKi9cbiAgZ2V0Q29uc3VtZXIgPSAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IGNvbnN1bWVyID0gdGhpcy5fX2NvbnN1bWVycy5nZXQoZGF0YS5sYWJlbCwgZGF0YS5wZWVySWQpO1xuICAgIGlmICghY29uc3VtZXIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gY29uc3VtZXI7XG4gIH07XG4gIC8qKlxuICAgKiBHZXR0ZXIgZm9yIHRoZSB0cmFuc3BvcnQgaW5zdGFuY2UuXG4gICAqL1xuICBnZXQgdHJhbnNwb3J0KCkge1xuICAgIGNvbnN0IHRyYW5zcG9ydCA9IHRoaXMuX19tZWRpYXNvdXBUcmFuc3BvcnQ7XG4gICAgaWYgKCF0cmFuc3BvcnQpIHRocm93IG5ldyBFcnJvcihcIlRyYW5zcG9ydCBOb3QgSW5pdGlhbGl6ZWRcIik7XG4gICAgcmV0dXJuIHRyYW5zcG9ydDtcbiAgfVxuICAvKipcbiAgICogRXZlcnkgdGltZSBhIHByb2R1Y2VyIGlzIGNyZWF0ZWQsIGl0IGlzIGFkZGVkIHRvIHRoZSBwZW5kaW5nIHByb2R1Y2VyIHRhc2tzLlxuICAgKiBVcG9uIGFjayBmcm9tIHRoZSBNZWRpYSBOb2RlIHRoZSBwcm9kdWNlciBpcyByZXNvbHZlZCBhbmQgcmVtb3ZlZCBmcm9tIHRoZSBwZW5kaW5nIHByb2R1Y2VyIHRhc2tzLiAoIFVzaW5nIHJlc29sdmVQZW5kaW5nUHJvZHVjZXJUYXNrIClcbiAgICogVGhpcyBpcyBkb25lIHRvIGhhbmRsZSBjb25jdXJyZW5jeSBpbiB0aGUgcHJvZHVjZXIgY3JlYXRpb24uXG4gICAqIEBwYXJhbSBkYXRhIC0geyBsYWJlbD86IHN0cmluZywgcGVlcklkOiBzdHJpbmcsIGNhbGxiYWNrOiAoeyBpZCB9KSA9PiB2b2lkIH1cbiAgICogQHJldHVybnMgLSB2b2lkXG4gICAqL1xuICBhZGRQZW5kaW5nUHJvZHVjZXJUYXNrID0gKGRhdGEpID0+IHtcbiAgICBjb25zdCBrZXkgPSBgJHtkYXRhLnBlZXJJZH0tJHtkYXRhPy5sYWJlbH1gO1xuICAgIGxvZ2dlci5pbmZvKFwiXFx1ezFGNTE0fSBBZGRpbmcgUGVuZGluZyBQcm9kdWNlciBUYXNrLCBrZXlcIiwga2V5KTtcbiAgICBpZiAodGhpcy5fX3BlbmRpbmdQcm9kdWNlclRhc2tzLmhhcyhrZXkpKSB7XG4gICAgICBsb2dnZXIuZGVidWcoXCJcXHV7MUY1MzR9IFByb2R1Y2VyIENyZWF0aW9uIGlzIFBlbmRpbmcgZm9yIGtleTogXCIsIGtleSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX19wZW5kaW5nUHJvZHVjZXJUYXNrcy5zZXQoa2V5LCBkYXRhLmNhbGxiYWNrKTtcbiAgfTtcbiAgLyoqXG4gICAqIEV2ZXJ5IHRpbWUgYSBwcm9kdWNlciBpcyBjcmVhdGVkLCBpdCBpcyBhZGRlZCB0byB0aGUgcGVuZGluZyBwcm9kdWNlciB0YXNrcy5cbiAgICogVXBvbiBhY2sgZnJvbSB0aGUgTWVkaWEgTm9kZSB0aGUgcHJvZHVjZXIgaXMgcmVzb2x2ZWQgYW5kIHJlbW92ZWQgZnJvbSB0aGUgcGVuZGluZyBwcm9kdWNlciB0YXNrcy5cbiAgICogVGhpcyBpcyBkb25lIHRvIGhhbmRsZSBjb25jdXJyZW5jeSBpbiB0aGUgcHJvZHVjZXIgY3JlYXRpb24uXG4gICAqIEBwYXJhbSBkYXRhIC0geyBsYWJlbDogc3RyaW5nLCBwZWVySWQ6IHN0cmluZywgaWQ6IHN0cmluZyB9XG4gICAqIEByZXR1cm5zIC0gdm9pZFxuICAgKi9cbiAgcmVzb2x2ZVBlbmRpbmdQcm9kdWNlclRhc2sgPSAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IGtleSA9IGAke2RhdGEucGVlcklkfS0ke2RhdGEubGFiZWx9YDtcbiAgICBsb2dnZXIuaW5mbyhcIlxcdXsxRjUxNH0gUmVzb2x2aW5nIFBlbmRpbmcgUHJvZHVjZXIgVGFzaywga2V5XCIsIGtleSk7XG4gICAgY29uc3QgY2FsbGJhY2sgPSB0aGlzLl9fcGVuZGluZ1Byb2R1Y2VyVGFza3MuZ2V0KGtleSk7XG4gICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1ezFGNTM0fSBQcm9kdWNlciBDcmVhdGlvbiBpcyBub3QgUGVuZGluZyBmb3Iga2V5OiBcIiwga2V5KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2FsbGJhY2soeyBpZDogZGF0YS5pZCB9KTtcbiAgICB0aGlzLl9fcGVuZGluZ1Byb2R1Y2VyVGFza3MuZGVsZXRlKGtleSk7XG4gIH07XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IFRyYW5zcG9ydCBJbnN0YW5jZSwgVHJhbnNwb3J0cyBhcmUgdXNlZCB0byBzZW5kIGFuZCByZWNlaXZlIG1lZGlhIHN0cmVhbXMgb3IgZGF0YS5cbiAgICogVHJhbnNwb3J0IGZvciB0aGUgU0RLIG1lYW4gYSBXZWJSVEMgQ29ubmVjdGlvbi5cbiAgICogQHBhcmFtIGRhdGFcbiAgICogQHJldHVybnNcbiAgICovXG4gIHN0YXRpYyBjcmVhdGUgPSAoZGF0YSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBsb2dnZXIuaW5mbyhcbiAgICAgICAgYFxcdXsxRjUxNH0gQ3JlYXRpbmcgQ2xpZW50IFNpZGUgVHJhbnNwb3J0LCB0eXBlOiAke2RhdGEudHJhbnNwb3J0VHlwZX1gXG4gICAgICApO1xuICAgICAgY29uc3QgeyB0cmFuc3BvcnRUeXBlLCBkZXZpY2UgfSA9IGRhdGE7XG4gICAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgICBpZDogZGF0YS5zZHBJbmZvLmlkLFxuICAgICAgICBpY2VQYXJhbWV0ZXJzOiBkYXRhLnNkcEluZm8uaWNlUGFyYW1ldGVycyxcbiAgICAgICAgaWNlQ2FuZGlkYXRlczogZGF0YS5zZHBJbmZvLmljZUNhbmRpZGF0ZXMsXG4gICAgICAgIGljZVNlcnZlcnM6IGRhdGEuaWNlU2VydmVycyxcbiAgICAgICAgZHRsc1BhcmFtZXRlcnM6IGRhdGEuc2RwSW5mby5kdGxzUGFyYW1ldGVycyxcbiAgICAgICAgc2N0cFBhcmFtZXRlcnM6IGRhdGEuc2RwSW5mby5zY3RwUGFyYW1ldGVycyxcbiAgICAgICAgcHJvcHJpZXRhcnlDb25zdHJhaW50czoge30sXG4gICAgICAgIGFwcERhdGE6IHt9XG4gICAgICB9O1xuICAgICAgY29uc3QgbWVkaWFzb3VwVHJhbnNwb3J0ID0gdHJhbnNwb3J0VHlwZSA9PT0gXCJzZW5kXCIgPyBkZXZpY2UuY3JlYXRlU2VuZFRyYW5zcG9ydChwYXlsb2FkKSA6IGRldmljZS5jcmVhdGVSZWN2VHJhbnNwb3J0KHBheWxvYWQpO1xuICAgICAgY29uc3QgdHJhbnNwb3J0ID0gbmV3IF9UcmFuc3BvcnQoe1xuICAgICAgICBwZWVySWQ6IGRhdGEucGVlcklkLFxuICAgICAgICBkZXZpY2U6IGRhdGEuZGV2aWNlLFxuICAgICAgICB0cmFuc3BvcnRUeXBlOiBkYXRhLnRyYW5zcG9ydFR5cGUsXG4gICAgICAgIG1lZGlhc291cFRyYW5zcG9ydFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdHJhbnNwb3J0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoYFxcdTI3NEMgVHJhbnNwb3J0LmNyZWF0ZSgpLCB0eXBlOiAke2RhdGEudHJhbnNwb3J0VHlwZX1gKTtcbiAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH07XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX19zb2NrZXQgPSBTb2NrZXRfZGVmYXVsdC5nZXRJbnN0YW5jZSgpO1xuICAgIHRoaXMuX19kZXZpY2UgPSBkYXRhLmRldmljZTtcbiAgICB0aGlzLnRyYW5zcG9ydFR5cGUgPSBkYXRhLnRyYW5zcG9ydFR5cGU7XG4gICAgdGhpcy5fX21lZGlhc291cFRyYW5zcG9ydCA9IGRhdGEubWVkaWFzb3VwVHJhbnNwb3J0O1xuICAgIHRoaXMuX19tZWRpYXNvdXBUcmFuc3BvcnQub24oXCJjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIiwgKHN0YXRlKSA9PiB7XG4gICAgICB0aGlzLl9fY29ubmVjdGlvblN0YXRlQ2hhbmdlSGFuZGxlcihzdGF0ZSk7XG4gICAgfSk7XG4gICAgdGhpcy5wZWVySWQgPSBkYXRhLnBlZXJJZDtcbiAgICB0aGlzLl9fbGlzdGVuVHJhbnNwb3J0Q29ubmVjdCgpO1xuICAgIHRoaXMuX19saXN0ZW5UcmFuc3BvcnRQcm9kdWNlKCk7XG4gICAgaWYgKHRoaXMudHJhbnNwb3J0VHlwZSA9PT0gXCJzZW5kXCIpIHRoaXMuX19saXN0ZW5UcmFuc3BvcnREYXRhUHJvZHVjZSgpO1xuICAgIGxvZ2dlci5pbmZvKGBcXHUyNzA1ICR7ZGF0YS50cmFuc3BvcnRUeXBlfSBUcmFuc3BvcnQgSW5pdGlhbGl6ZWRgKTtcbiAgfVxuICAvKipcbiAgICogRnVuY3Rpb24gdG8gaGFuZGxlIHRoZSBldmVudCB3aGVuIHRyYW5zcG9ydCBpcyBzdXBwb3NlZCB0byBiZSBjb25uZWN0ZWQuICggV2ViUlRDIClcbiAgICovXG4gIF9fbGlzdGVuVHJhbnNwb3J0Q29ubmVjdCA9ICgpID0+IHtcbiAgICB0aGlzLl9fbWVkaWFzb3VwVHJhbnNwb3J0Lm9uKFxuICAgICAgXCJjb25uZWN0XCIsXG4gICAgICAoeyBkdGxzUGFyYW1ldGVycyB9LCBjYWxsYmFjaywgZXJyYmFjaykgPT4ge1xuICAgICAgICBsb2dnZXIuaW5mbyhcIlxcdXsxRjUxNH0gVHJhbnNwb3J0IENvbm5lY3QgRXZlbnQgQ2FsbGVkXCIpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMub25jZShcImNvbm5lY3RUcmFuc3BvcnRSZXNwb25zZVwiLCAoKSA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMuX19zb2NrZXQucHVibGlzaChcImNvbm5lY3RUcmFuc3BvcnRcIiwge1xuICAgICAgICAgICAgZHRsc1BhcmFtZXRlcnMsXG4gICAgICAgICAgICB0cmFuc3BvcnRUeXBlOiB0aGlzLnRyYW5zcG9ydFR5cGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIEVycm9yIFRyYW5zcG9ydCBDb25uZWN0IEV2ZW50XCIpO1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICAgICAgZXJyYmFjayhlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9O1xuICAvKipcbiAgICogRnVuY3Rpb24gdG8gaGFuZGxlIHRoZSBldmVudCB3aGVuIG1lZGlhIGlzIHN1cHBvc2VkIHByb2R1Y2VkIG92ZXIgYSBUcmFuc3BvcnQgKCBXZWJSVEMgKVxuICAgKi9cbiAgX19saXN0ZW5UcmFuc3BvcnRQcm9kdWNlID0gKCkgPT4ge1xuICAgIHRoaXMuX19tZWRpYXNvdXBUcmFuc3BvcnQub24oXG4gICAgICBcInByb2R1Y2VcIixcbiAgICAgIGFzeW5jICh7IGtpbmQsIHJ0cFBhcmFtZXRlcnMsIGFwcERhdGEgfSwgY2FsbGJhY2ssIGVycmJhY2spID0+IHtcbiAgICAgICAgbG9nZ2VyLmluZm8oYFxcdXsxRjUxNH0gJHt0aGlzLnRyYW5zcG9ydFR5cGV9IFByb2R1Y2UgRXZlbnQgQ2FsbGVkYCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgbGFiZWwgPSBhcHBEYXRhPy5sYWJlbDtcbiAgICAgICAgICBpZiAoIWxhYmVsKSB0aHJvdyBuZXcgRXJyb3IoXCJcXHV7MUY1MzR9IFN0cmVhbSBJZGVudGlmaWVyIE5vdCBGb3VuZFwiKTtcbiAgICAgICAgICBjb25zdCBwYXJzZWRQcm90b1J0cFBhcmFtZXRlcnMgPSBwYXJzZVRvUHJvdG9SdHBQYXJhbWV0ZXJzKHJ0cFBhcmFtZXRlcnMpO1xuICAgICAgICAgIHRoaXMuX19zb2NrZXQucHVibGlzaChcInByb2R1Y2VcIiwge1xuICAgICAgICAgICAgcnRwUGFyYW1ldGVyczogcGFyc2VkUHJvdG9SdHBQYXJhbWV0ZXJzLFxuICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgIGxhYmVsLFxuICAgICAgICAgICAgYXBwRGF0YSxcbiAgICAgICAgICAgIHBhdXNlZDogZmFsc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLmFkZFBlbmRpbmdQcm9kdWNlclRhc2soe1xuICAgICAgICAgICAgcGVlcklkOiB0aGlzLnBlZXJJZCxcbiAgICAgICAgICAgIGxhYmVsLFxuICAgICAgICAgICAgY2FsbGJhY2tcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIEVycm9yIFRyYW5zcG9ydCBQcm9kdWNlIEV2ZW50XCIpO1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICAgICAgZXJyYmFjayhlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9O1xuICAvKipcbiAgICogRnVuY3Rpb24gdG8gaGFuZGxlIHRoZSBldmVudCB3aGVuIGRhdGEgaXMgc3VwcG9zZWQgcHJvZHVjZWQgb3ZlciBhIFRyYW5zcG9ydCAoIFdlYlJUQyBEYXRhQ2hhbm5lbCApXG4gICAqL1xuICBfX2xpc3RlblRyYW5zcG9ydERhdGFQcm9kdWNlID0gKCkgPT4ge1xuICAgIGxvZ2dlci5pbmZvKGBcXHV7MUY1MTR9IHByb2R1Y2VkYXRhOiAke3RoaXMudHJhbnNwb3J0VHlwZX0gYCk7XG4gICAgdGhpcy5fX21lZGlhc291cFRyYW5zcG9ydC5vbihcbiAgICAgIFwicHJvZHVjZWRhdGFcIixcbiAgICAgIGFzeW5jICh7IGxhYmVsLCBhcHBEYXRhLCBzY3RwU3RyZWFtUGFyYW1ldGVycywgcHJvdG9jb2wgfSwgY2FsbGJhY2ssIGVycmJhY2spID0+IHtcbiAgICAgICAgbG9nZ2VyLmluZm8oYFxcdXsxRjUxNH0gJHt0aGlzLnRyYW5zcG9ydFR5cGV9IFByb2R1Y2UgRGF0YSBFdmVudCBDYWxsZWRgKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLl9fc29ja2V0LnB1Ymxpc2goXCJwcm9kdWNlRGF0YVwiLCB7XG4gICAgICAgICAgICB0cmFuc3BvcnRJZDogdGhpcy5fX21lZGlhc291cFRyYW5zcG9ydC5pZCxcbiAgICAgICAgICAgIHNjdHBTdHJlYW1QYXJhbWV0ZXJzLFxuICAgICAgICAgICAgbGFiZWwsXG4gICAgICAgICAgICBwcm90b2NvbCxcbiAgICAgICAgICAgIGFwcERhdGFcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLmFkZFBlbmRpbmdQcm9kdWNlclRhc2soe1xuICAgICAgICAgICAgcGVlcklkOiB0aGlzLnBlZXJJZCxcbiAgICAgICAgICAgIGxhYmVsLFxuICAgICAgICAgICAgY2FsbGJhY2tcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIEVycm9yIFRyYW5zcG9ydCBQcm9kdWNlIERhdGEgRXZlbnRcIik7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgICAgICBlcnJiYWNrKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gIH07XG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0byBoYW5kbGUgdGhlIHByb2R1Y2luZyBvZiBhIG1lZGlhIHN0cmVhbSB0byB0aGUgcm9vbS5cbiAgICogQHBhcmFtIGRhdGEgLSB7IHN0cmVhbTogTWVkaWFTdHJlYW0sIGxhYmVsOiBzdHJpbmcsIHN0b3BUcmFja09uQ2xvc2U6IGJvb2xlYW4sIGFwcERhdGE/OiBBcHBEYXRhIH1cbiAgICogQHJldHVybnMgLSBQcm9kdWNlclxuICAgKiBOT1RFOiBQcmVmZmVyZWRDb2RlYyBpcyBvcHRpb25hbCwgaWYgbm90IHByb3ZpZGVkLCBIMjY0IGlzIHVzZWQgYXMgdGhlIGRlZmF1bHQgY29kZWMuXG4gICAqIGlzIGRldmljZSBkb2VzIG5vdCBzdXBwb3J0IHRoZSBwYXNzZWQgY29kZWMsIGFuIGVycm9yIGlzIHRocm93bi5cbiAgICovXG4gIHByb2R1Y2UgPSBhc3luYyAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IGtpbmQgPSBnZXRNZWRpYVN0cmVhbUtpbmQoZGF0YS5zdHJlYW0pO1xuICAgIGNvbnN0IHRyYWNrID0gZ2V0TWVkaWFUcmFjayh7IHN0cmVhbTogZGF0YS5zdHJlYW0sIGtpbmQgfSk7XG4gICAgbG9nZ2VyLmluZm8oYFxcdXsxRjUxNH0gUHJvZHVjZSBDYWxsZWQgZm9yIGtpbmQ6ICR7a2luZH0sIGxhYmVsOiAke2RhdGEubGFiZWx9YCk7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghdGhpcy5fX2RldmljZS5sb2FkZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGV2aWNlIE5vdCBMb2FkZWRcIik7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuX19kZXZpY2UucnRwQ2FwYWJpbGl0aWVzLmNvZGVjcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBDb2RlY3MgRm91bmRcIik7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuX19kZXZpY2UuY2FuUHJvZHVjZShraW5kKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERldmljZSBDYW5ub3QgcHJvZHVjZSAke2tpbmR9YCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy50cmFuc3BvcnRUeXBlICE9PSBcInNlbmRcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBwcm9kdWNlIG9uICR7dGhpcy50cmFuc3BvcnRUeXBlfSB0cmFuc3BvcnRgKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNvZGVjcyA9IHRoaXMuX19kZXZpY2UucnRwQ2FwYWJpbGl0aWVzPy5jb2RlY3M7XG4gICAgICBpZiAoIWNvZGVjcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcXHUyNzRDIERldmljZSBSVFAgQ2FwYWJpbGl0aWVzIG5vdCBmb3VuZFwiKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHZpZGVvQ29kZWNNaW1lVHlwZSA9IGRhdGEucHJlZmZlcmVkQ29kZWMgPz8gXCJ2aWRlby9oMjY0XCI7XG4gICAgICBjb25zdCB2aWRlb0NvZGVjID0gY29kZWNzLmZpbmQoXG4gICAgICAgIChjb2RlYykgPT4gY29kZWMubWltZVR5cGUudG9Mb3dlckNhc2UoKSA9PT0gdmlkZW9Db2RlY01pbWVUeXBlXG4gICAgICApO1xuICAgICAgaWYgKCF2aWRlb0NvZGVjKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgXFx1Mjc0QyBQcmVmZmVyZWQgY29kZWM6ICR7ZGF0YS5wcmVmZmVyZWRDb2RlY30gbm90IGZvdW5kIG9uIHRoZSBkZXZpY2VgXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb25zdCBjb2RlY1ZpYU1lZGlhVHlwZSA9IHtcbiAgICAgICAgdmlkZW86IHZpZGVvQ29kZWMsXG4gICAgICAgIFwic2NyZWVuLXNoYXJlLXZpZGVvXCI6IHZpZGVvQ29kZWMsXG4gICAgICAgIGF1ZGlvOiB2b2lkIDBcbiAgICAgIH07XG4gICAgICBjb25zdCBtZWRpYVR5cGUgPSBkYXRhLmxhYmVsID09PSBcInNjcmVlbi1zaGFyZS12aWRlb1wiID8gXCJzY3JlZW4tc2hhcmUtdmlkZW9cIiA6IGtpbmQ7XG4gICAgICBjb25zdCBtZWRpYXNvdXBQcm9kdWNlciA9IGF3YWl0IHRoaXMuX19tZWRpYXNvdXBUcmFuc3BvcnQucHJvZHVjZSh7XG4gICAgICAgIHRyYWNrLFxuICAgICAgICBlbmNvZGluZ3M6IGVuY29kaW5nVmlhTWVkaWFUeXBlW21lZGlhVHlwZV0sXG4gICAgICAgIGNvZGVjT3B0aW9uczogY29kZWNPcHRpb25zVmlhS2luZFtraW5kXSxcbiAgICAgICAgY29kZWM6IGNvZGVjVmlhTWVkaWFUeXBlW21lZGlhVHlwZV0sXG4gICAgICAgIHN0b3BUcmFja3M6IGRhdGEuc3RvcFRyYWNrT25DbG9zZSxcbiAgICAgICAgemVyb1J0cE9uUGF1c2U6IHRydWUsXG4gICAgICAgIGRpc2FibGVUcmFja09uUGF1c2U6IHRydWUsXG4gICAgICAgIGFwcERhdGE6IHtcbiAgICAgICAgICAuLi5kYXRhLmFwcERhdGEsXG4gICAgICAgICAgcHJvZHVjZXJQZWVySWQ6IHRoaXMucGVlcklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgbWVkaWFzb3VwUHJvZHVjZXIub24oXCJAY2xvc2VcIiwgKCkgPT4ge1xuICAgICAgICBsb2dnZXIuaW5mbyhcIlxcdXsxRjUxNH0gQ2xvc2luZyBQcm9kdWNlclwiLCB7XG4gICAgICAgICAgbGFiZWw6IGRhdGEubGFiZWwsXG4gICAgICAgICAgcHJvZHVjZXJJZDogbWVkaWFzb3VwUHJvZHVjZXIuaWRcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX19wcm9kdWNlcnMuZGVsZXRlKG1lZGlhc291cFByb2R1Y2VyLmlkKTtcbiAgICAgICAgdGhpcy5sYWJlbFRvUHJvZHVjZXJJZC5kZWxldGUoZGF0YS5sYWJlbCk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuX19wcm9kdWNlcnMuc2V0KG1lZGlhc291cFByb2R1Y2VyLmlkLCBtZWRpYXNvdXBQcm9kdWNlcik7XG4gICAgICB0aGlzLmxhYmVsVG9Qcm9kdWNlcklkLnNldChkYXRhLmxhYmVsLCBtZWRpYXNvdXBQcm9kdWNlci5pZCk7XG4gICAgICBsb2dnZXIuaW5mbyhcbiAgICAgICAgYFxcdXsxRjUxNH0gQ2xpZW50IFNpZGUgUHJvZHVjZXIgQ3JlYXRlZCBzdWNlc3NmdWxseSB3aXRoIGxhYmVsIDogJHtkYXRhLmxhYmVsfWBcbiAgICAgICk7XG4gICAgICByZXR1cm4gbWVkaWFzb3VwUHJvZHVjZXI7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgRXJyb3IgVHJhbnNwb3J0IFByb2R1Y2UgRXZlbnRcIik7XG4gICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9O1xuICAvKipcbiAgICogRnVuY3Rpb24gdG8gaGFuZGxlIHRoZSBwcm9kdWNpbmcgb2YgYSBkYXRhIHN0cmVhbSB0byB0aGUgcm9vbS5cbiAgICogQHBhcmFtIGRhdGEgLSB7IGxhYmVsOiBzdHJpbmcsIG9yZGVyZWQ/OiBib29sZWFuLCBtYXhSZXRyYW5zbWl0cz86IG51bWJlciwgbWF4UGFja2V0TGlmZVRpbWU/OiBudW1iZXIgfVxuICAgKiAtIGBsYWJlbGAgaXMgdGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgZGF0YSBzdHJlYW0sIENhbm5vdCB1c2UgYGJvdGAgd2hpY2ggaXMgcmVzZXJ2ZWQuXG4gICAqIC0gYG9yZGVyZWRgIGlzIHRoZSBib29sZWFuIHZhbHVlIHRvIGRldGVybWluZSBpZiB0aGUgZGF0YSBzaG91bGQgYmUgb3JkZXJlZCBvciBub3QsIG9yIHJlbGlhYmx5LlxuICAgKiAtIGBtYXhSZXRyYW5zbWl0c2AgV2hlbiBvcmRlcmVkIGlzIGZhbHNlIGluZGljYXRlcyB0aGUgbWF4aW11bSBudW1iZXIgb2YgdGltZXMgYSBwYWNrZXQgd2lsbCBiZSByZXRyYW5zbWl0dGVkLlxuICAgKiAtIGBtYXhQYWNrZXRMaWZlVGltZWAgV2hlbiBvcmRlcmVkIGlzIGZhbHNlIGluZGljYXRlcyB0aGUgdGltZSAoaW4gbWlsbGlzZWNvbmRzKSBhZnRlciB3aGljaCBhIFNDVFAgcGFja2V0IHdpbGwgc3RvcCBiZWluZyByZXRyYW5zbWl0dGVkLlxuICAgKiBAcmV0dXJucyAtIERhdGFQcm9kdWNlclxuICAgKi9cbiAgcHJvZHVjZURhdGEgPSBhc3luYyAob3B0aW9ucykgPT4ge1xuICAgIGxvZ2dlci5pbmZvKGBcXHV7MUY1MTR9IFByb2R1Y2UgRGF0YSBDYWxsZWQgZm9yIGxhYmVsOiAke29wdGlvbnMubGFiZWx9YCk7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0aGlzLnRyYW5zcG9ydFR5cGUgIT09IFwic2VuZFwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgQ2Fubm90IHByb2R1Y2VEYXRhIG9uICR7dGhpcy50cmFuc3BvcnRUeXBlfSB0cmFuc3BvcnRgXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb25zdCBsYWJlbCA9IHRoaXMuZGF0YVByb2R1Y2Vycy5nZXQob3B0aW9ucy5sYWJlbCk7XG4gICAgICBpZiAobGFiZWwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBEYXRhUHJvZHVjZXIgd2l0aCBsYWJlbCAke29wdGlvbnMubGFiZWx9IGFscmVhZHkgZXhpc3RzLCBwbGVhc2UgY2xvc2UgaXQgYmVmb3JlIGNyZWF0aW5nIGEgbmV3IG9uZWBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5fX2RldmljZS5sb2FkZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGV2aWNlIE5vdCBMb2FkZWRcIik7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuX19kZXZpY2Uuc2N0cENhcGFiaWxpdGllcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBTQ1RQIENhcGFiaWxpdGllcyBGb3VuZFwiKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGRhdGFQcm9kdWNlciA9IGF3YWl0IHRoaXMuX19tZWRpYXNvdXBUcmFuc3BvcnQucHJvZHVjZURhdGEoe1xuICAgICAgICBsYWJlbDogb3B0aW9ucy5sYWJlbCxcbiAgICAgICAgb3JkZXJlZDogb3B0aW9ucy5vcmRlcmVkID8/IGZhbHNlLFxuICAgICAgICBtYXhQYWNrZXRMaWZlVGltZTogb3B0aW9ucy5tYXhQYWNrZXRMaWZlVGltZSxcbiAgICAgICAgbWF4UmV0cmFuc21pdHM6IG9wdGlvbnMubWF4UmV0cmFuc21pdHNcbiAgICAgIH0pO1xuICAgICAgZGF0YVByb2R1Y2VyLm9uKFwib3BlblwiLCAoKSA9PiB7XG4gICAgICAgIGxvZ2dlci5pbmZvKFwiXFx1MjcwNSBEYXRhUHJvZHVjZXIgb3BlbmVkXCIsIG9wdGlvbnMpO1xuICAgICAgfSk7XG4gICAgICBkYXRhUHJvZHVjZXIub24oXCJAY2xvc2VcIiwgKCkgPT4ge1xuICAgICAgICBsb2dnZXIuaW5mbyhcIlxcdXsxRjUxNH0gQ2xvc2luZyBEYXRhUHJvZHVjZXJcIiwge1xuICAgICAgICAgIGxhYmVsOiBvcHRpb25zLmxhYmVsLFxuICAgICAgICAgIGRhdGFQcm9kdWNlcklkOiBkYXRhUHJvZHVjZXIuaWRcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX19kYXRhUHJvZHVjZXJzLmRlbGV0ZShkYXRhUHJvZHVjZXIubGFiZWwpO1xuICAgICAgfSk7XG4gICAgICBkYXRhUHJvZHVjZXIub24oXCJ0cmFuc3BvcnRjbG9zZVwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX19kYXRhUHJvZHVjZXJzLmRlbGV0ZShkYXRhUHJvZHVjZXIubGFiZWwpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLl9fZGF0YVByb2R1Y2Vycy5zZXQoZGF0YVByb2R1Y2VyLmxhYmVsLCBkYXRhUHJvZHVjZXIpO1xuICAgICAgbG9nZ2VyLmluZm8oXG4gICAgICAgIGBcXHV7MUY1MTR9IENsaWVudCBTaWRlIERhdGFQcm9kdWNlciBDcmVhdGVkIHN1Y2Vzc2Z1bGx5IHdpdGggbGFiZWwgOiAke29wdGlvbnMubGFiZWx9YFxuICAgICAgKTtcbiAgICAgIHJldHVybiBkYXRhUHJvZHVjZXI7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgRXJyb3IgVHJhbnNwb3J0IFByb2R1Y2UgRGF0YSBFdmVudFwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH07XG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gLSBDbG9zZSB0aGUgZGF0YSBwcm9kdWNlciBieSBsYWJlbFxuICAgKiBAcGFyYW0gbGFiZWwgLSBMYWJlbCBvZiB0aGUgZGF0YSBwcm9kdWNlciB0byBiZSBjbG9zZWRcbiAgICovXG4gIGNsb3NlRGF0YVByb2R1Y2VyID0gKGxhYmVsKSA9PiB7XG4gICAgY29uc3QgZGF0YVByb2R1Y2VyID0gdGhpcy5fX2RhdGFQcm9kdWNlcnMuZ2V0KGxhYmVsKTtcbiAgICBkYXRhUHJvZHVjZXI/LmNsb3NlKCk7XG4gICAgdGhpcy5fX2RhdGFQcm9kdWNlcnMuZGVsZXRlKGxhYmVsKTtcbiAgICBsb2dnZXIuaW5mbyhgXFx1ezFGNTE0fSBEYXRhUHJvZHVjZXIgd2l0aCBsYWJlbCAke2xhYmVsfSBjbG9zZWRgKTtcbiAgfTtcbiAgLyoqXG4gICAqIENvbnN1bWUgbWVhbnMgdG8gcmVjZWl2ZSB0aGUgbWVkaWEgc3RyZWFtIGZyb20gdGhlIHJvb20uICggTWVkaWFTdHJlYW1UcmFjayApXG4gICAqIFVzaW5nIFdlYlJUQyBDb25uZWN0aW9uIHRvIHJlY2VpdmUgdGhlIG1lZGlhIHN0cmVhbS5cbiAgICogQHBhcmFtIGRhdGEgLSB7IHByb2R1Y2VyUGVlcklkOiBzdHJpbmcsIGtpbmQ6IHN0cmluZywgcnRwUGFyYW1ldGVyczogYW55LCBhcHBEYXRhPzogQXBwRGF0YSB9XG4gICAqIEByZXR1cm5zIC0geyBjb25zdW1lcjogQ29uc3VtZXIsIG1lZGlhU291cENvbnN1bWVyOiBtZWRpYXNvdXAudHlwZXMuQ29uc3VtZXIgfVxuICAgKi9cbiAgY29uc3VtZSA9IGFzeW5jIChkYXRhKSA9PiB7XG4gICAgY29uc3QgeyBsYWJlbCwgcHJvZHVjZXJQZWVySWQsIGtpbmQgfSA9IGRhdGE7XG4gICAgbG9nZ2VyLmluZm8oXG4gICAgICBgXFx1ezFGNTE0fSBDb25zdW1lIENhbGxlZCBmb3IgJHtraW5kfSBmcm9tIHJlbW90ZSBwZWVyICR7cHJvZHVjZXJQZWVySWR9YFxuICAgICk7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0aGlzLnRyYW5zcG9ydFR5cGUgIT09IFwicmVjdlwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNvbnN1bWUgb24gJHt0aGlzLnRyYW5zcG9ydFR5cGV9IHRyYW5zcG9ydGApO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLl9fZGV2aWNlLmxvYWRlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEZXZpY2UgTm90IExvYWRlZFwiKTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5fX2RldmljZS5ydHBDYXBhYmlsaXRpZXMuY29kZWNzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIENvZGVjcyBGb3VuZFwiKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhcnNlZFJ0cFBhcmFtZXRlcnMgPSBwYXJzZVJ0cFBhcmFtZXRlcnMoZGF0YS5ydHBQYXJhbWV0ZXJzKTtcbiAgICAgIGNvbnN0IGNvbnN1bWVyID0gQ29uc3VtZXJfZGVmYXVsdC5jcmVhdGUoe1xuICAgICAgICBwcm9kdWNlcklkOiBkYXRhLnByb2R1Y2VySWQsXG4gICAgICAgIHByb2R1Y2VyUGF1c2VkOiBkYXRhLnByb2R1Y2VyUGF1c2VkID8/IGZhbHNlLFxuICAgICAgICBwcm9kdWNlclBlZXJJZCxcbiAgICAgICAgbGFiZWxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgbWVkaWFTb3VwQ29uc3VtZXIgPSBhd2FpdCB0aGlzLl9fbWVkaWFzb3VwVHJhbnNwb3J0LmNvbnN1bWUoe1xuICAgICAgICBpZDogZGF0YS5jb25zdW1lcklkLFxuICAgICAgICBydHBQYXJhbWV0ZXJzOiBwYXJzZWRSdHBQYXJhbWV0ZXJzLFxuICAgICAgICBraW5kOiBkYXRhLmtpbmQsXG4gICAgICAgIHByb2R1Y2VySWQ6IGRhdGEucHJvZHVjZXJJZCxcbiAgICAgICAgYXBwRGF0YTogZGF0YS5hcHBEYXRhXG4gICAgICB9KTtcbiAgICAgIG1lZGlhU291cENvbnN1bWVyLm9uKFwiQGNsb3NlXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fX2NvbnN1bWVycy5kZWxldGUobGFiZWwsIHByb2R1Y2VyUGVlcklkKTtcbiAgICAgIH0pO1xuICAgICAgbWVkaWFTb3VwQ29uc3VtZXIub24oXCJ0cmFuc3BvcnRjbG9zZVwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xvc2VDb25zdW1lcih7IGxhYmVsLCBwZWVySWQ6IHByb2R1Y2VyUGVlcklkIH0pO1xuICAgICAgfSk7XG4gICAgICBtZWRpYVNvdXBDb25zdW1lci5vbihcInRyYWNrZW5kZWRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLmNsb3NlQ29uc3VtZXIoeyBsYWJlbCwgcGVlcklkOiBwcm9kdWNlclBlZXJJZCB9KTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fX2NvbnN1bWVycy5zZXQoY29uc3VtZXIubGFiZWwsIGNvbnN1bWVyLnByb2R1Y2VyUGVlcklkLCBjb25zdW1lcik7XG4gICAgICBjb25zdW1lci5zZXRNZWRpYVNvdXBDb25zdW1lcihtZWRpYVNvdXBDb25zdW1lcik7XG4gICAgICByZXR1cm4geyBjb25zdW1lciwgbWVkaWFTb3VwQ29uc3VtZXIgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlxcdTI3NEMgRXJyb3IgY2FsbGluZyBjb25zdW1lKClcIik7XG4gICAgfVxuICB9O1xuICAvKipcbiAgICogQ29uc3VtZSBtZWFucyB0byByZWNlaXZlIHRoZSBkYXRhIHN0cmVhbSBmcm9tIHRoZSByb29tLiAoIEFycmF5QnVmZmVyIClcbiAgICogVXNpbmcgV2ViUlRDIENvbm5lY3Rpb24gdG8gcmVjZWl2ZSB0aGUgZGF0YSBzdHJlYW0uXG4gICAqIEBwYXJhbSBkYXRhIC0geyBsYWJlbDogc3RyaW5nLCBhcHBEYXRhPzogQXBwRGF0YSwgZGF0YVByb2R1Y2VySWQ6IHN0cmluZywgcHJvdG9jb2w6IHN0cmluZywgaWQ6IHN0cmluZywgcGVlcklkOiBzdHJpbmcsIHNjdHBTdHJlYW1QYXJhbWV0ZXJzOiBhbnkgfVxuICAgKiBAcmV0dXJucyAtIERhdGFDb25zdW1lclxuICAgKi9cbiAgY29uc3VtZURhdGEgPSBhc3luYyAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIGxhYmVsLFxuICAgICAgYXBwRGF0YSxcbiAgICAgIGRhdGFQcm9kdWNlcklkLFxuICAgICAgcHJvdG9jb2wsXG4gICAgICBpZCxcbiAgICAgIHBlZXJJZCxcbiAgICAgIHNjdHBTdHJlYW1QYXJhbWV0ZXJzXG4gICAgfSA9IGRhdGE7XG4gICAgbG9nZ2VyLmluZm8oXG4gICAgICBgXFx1ezFGNTE0fSBDb25zdW1lRGF0YSBmcm9tIHByb2R1Y2VyICR7cGVlcklkfSBjb25zdW1lcklkRnJvbVNlcnZlcjoke2lkfWBcbiAgICApO1xuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy50cmFuc3BvcnRUeXBlICE9PSBcInJlY3ZcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBjb25zdW1lIG9uICR7dGhpcy50cmFuc3BvcnRUeXBlfSB0cmFuc3BvcnRgKTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5fX2RldmljZS5sb2FkZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGV2aWNlIE5vdCBMb2FkZWRcIik7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuX19kZXZpY2UucnRwQ2FwYWJpbGl0aWVzLmNvZGVjcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBDb2RlY3MgRm91bmRcIik7XG4gICAgICB9XG4gICAgICBjb25zdCBkYXRhQ29uc3VtZXIgPSBhd2FpdCB0aGlzLnRyYW5zcG9ydC5jb25zdW1lRGF0YSh7XG4gICAgICAgIGlkLFxuICAgICAgICBkYXRhUHJvZHVjZXJJZCxcbiAgICAgICAgc2N0cFN0cmVhbVBhcmFtZXRlcnM6IHtcbiAgICAgICAgICAuLi5zY3RwU3RyZWFtUGFyYW1ldGVycyxcbiAgICAgICAgICBtYXhQYWNrZXRMaWZlVGltZTogc2N0cFN0cmVhbVBhcmFtZXRlcnMubWF4UGFja2V0TGlmZVRpbWUgPT09IDAgPyB2b2lkIDAgOiBzY3RwU3RyZWFtUGFyYW1ldGVycy5tYXhQYWNrZXRMaWZlVGltZSxcbiAgICAgICAgICBtYXhSZXRyYW5zbWl0czogc2N0cFN0cmVhbVBhcmFtZXRlcnMubWF4UmV0cmFuc21pdHMgPT09IDAgPyB2b2lkIDAgOiBzY3RwU3RyZWFtUGFyYW1ldGVycy5tYXhSZXRyYW5zbWl0c1xuICAgICAgICB9LFxuICAgICAgICBsYWJlbCxcbiAgICAgICAgcHJvdG9jb2wsXG4gICAgICAgIGFwcERhdGFcbiAgICAgIH0pO1xuICAgICAgZGF0YUNvbnN1bWVyLm9uKFwib3BlblwiLCAoKSA9PiB7XG4gICAgICAgIGxvZ2dlci5pbmZvKGBcXHUyNzA1IERhdGFDb25zdW1lciB3aXRoICR7bGFiZWx9IG9wZW5lZGApO1xuICAgICAgfSk7XG4gICAgICBkYXRhQ29uc3VtZXIub24oXCJjbG9zZVwiLCAoKSA9PiB7XG4gICAgICAgIGxvZ2dlci53YXJuKGBcXHUyNzA1IERhdGFDb25zdW1lciB3aXRoICR7bGFiZWx9IGNsb3NlZGApO1xuICAgICAgICBkYXRhQ29uc3VtZXIuY2xvc2UoKTtcbiAgICAgICAgZGF0YUNvbnN1bWVyLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9fZGF0YUNvbnN1bWVycy5kZWxldGUobGFiZWwpO1xuICAgICAgfSk7XG4gICAgICBkYXRhQ29uc3VtZXIub24oXCJ0cmFuc3BvcnRjbG9zZVwiLCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhgXFx1MjcwNSBEYXRhQ29uc3VtZXIgd2l0aCAke2xhYmVsfSBjbG9zZWRgKTtcbiAgICAgICAgZGF0YUNvbnN1bWVyLmNsb3NlKCk7XG4gICAgICAgIGRhdGFDb25zdW1lci5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5fX2RhdGFDb25zdW1lcnMuZGVsZXRlKGxhYmVsKTtcbiAgICAgIH0pO1xuICAgICAgZGF0YUNvbnN1bWVyLm9uKFwiZXJyb3JcIiwgKGVycm9yKSA9PiB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihgXFx1MjcwNSBEYXRhQ29uc3VtZXIgXCJlcnJvclwiOiAke2Vycm9yfSBjbG9zZWRgKTtcbiAgICAgICAgZGF0YUNvbnN1bWVyLmNsb3NlKCk7XG4gICAgICAgIGRhdGFDb25zdW1lci5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5fX2RhdGFDb25zdW1lcnMuZGVsZXRlKGxhYmVsKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fX2RhdGFDb25zdW1lcnMuc2V0KGxhYmVsLCBkYXRhQ29uc3VtZXIpO1xuICAgICAgcmV0dXJuIGRhdGFDb25zdW1lcjtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlxcdTI3NEMgRXJyb3IgY2FsbGluZyBjb25zdW1lRGF0YSgpXCIpO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIENsb3NlIHRoZSBjb25zdW1lciBieSBsYWJlbCBhbmQgcGVlcklkXG4gICAqIEBwYXJhbSBkYXRhIC0geyBsYWJlbDogc3RyaW5nLCBwZWVySWQ6IHN0cmluZyB9XG4gICAqL1xuICBjbG9zZUNvbnN1bWVyID0gKGRhdGEpID0+IHtcbiAgICBjb25zdCBjb25zdW1lciA9IHRoaXMuZ2V0Q29uc3VtZXIoZGF0YSk7XG4gICAgY29uc3VtZXI/LmNsb3NlKCk7XG4gICAgdGhpcy5fX2NvbnN1bWVycy5kZWxldGUoZGF0YS5sYWJlbCwgZGF0YS5wZWVySWQpO1xuICB9O1xuICAvKipcbiAgICogQ2xvc2UgdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0XG4gICAqIEBwYXJhbSBkYXRhIC0geyByZXRyaWVzOiBudW1iZXIgfVxuICAgKiBAcmV0dXJucyAtIHZvaWRcbiAgICovXG4gIGNsb3NlID0gYXN5bmMgKGRhdGEpID0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKGRhdGEucmV0cmllcyA8PSAwKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgRXJyb3IgY2xvc2luZyB0cmFuc3BvcnQsIG1heCByZXRyaWVzIGV4Y2VlZGVkXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBsb2dnZXIuaW5mbyhgXFx1ezFGNTE0fSBDbG9zaW5nICR7dGhpcy50cmFuc3BvcnRUeXBlfSB0cmFuc3BvcnRgKTtcbiAgICAgIHRoaXMuX19tZWRpYXNvdXBUcmFuc3BvcnQuY2xvc2UoKTtcbiAgICAgIHRoaXMuX19wcm9kdWNlcnMuY2xlYXIoKTtcbiAgICAgIHRoaXMuX19jb25zdW1lcnMuY2xlYXIoKTtcbiAgICAgIHRoaXMuX19kYXRhUHJvZHVjZXJzLmNsZWFyKCk7XG4gICAgICB0aGlzLl9fZGF0YUNvbnN1bWVycy5jbGVhcigpO1xuICAgICAgbG9nZ2VyLmluZm8oYFxcdTI3MDUgJHt0aGlzLnRyYW5zcG9ydFR5cGV9IHRyYW5zcG9ydCBjbG9zZWRgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBjbG9zaW5nIHRyYW5zcG9ydFwiKTtcbiAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJSZXRyeWluZy4uLlwiKTtcbiAgICAgIHRoaXMuY2xvc2UoeyByZXRyaWVzOiBkYXRhLnJldHJpZXMgLSAxIH0pO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIFdlYlJUQyBDb25uZWN0aW9uIGlzIHByb25lIHRvIGNvbm5lY3Rpb24gc3RhdGUgY2hhbmdlcywgYXMgaXRzIGEgcGVlciB0byBwZWVyIGNvbm5lY3Rpb24uXG4gICAqIFRoaXMgZnVuY3Rpb24gaGFuZGxlcyB0aGUgY29ubmVjdGlvbiBzdGF0ZSBjaGFuZ2VzLiBhbmQgcmUgZXN0YWJsaXNoZXMgdGhlIGNvbm5lY3Rpb24gaWYgaXQgaXMgbG9zdC5cbiAgICogQHBhcmFtIHN0YXRlIC0gQ29ubmVjdGlvblN0YXRlXG4gICAqL1xuICBfX2Nvbm5lY3Rpb25TdGF0ZUNoYW5nZUhhbmRsZXIgPSAoc3RhdGUpID0+IHtcbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICBgXFx1ezFGNTE0fSAke3RoaXMudHJhbnNwb3J0VHlwZX0gVHJhbnNwb3J0IENvbm5lY3Rpb24gU3RhdGUgQ2hhbmdlZCwgc3RhdGU6ICR7c3RhdGV9YFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHRyYW5zcG9ydFR5cGUgPSB0aGlzLnRyYW5zcG9ydFR5cGU7XG4gICAgICBjb25zdCBoYW5kbGVyID0ge1xuICAgICAgICBjb25uZWN0ZWQ6ICgpID0+IHtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoYFxcdXsxRjUxNH0gJHt0aGlzLnRyYW5zcG9ydFR5cGV9IFRyYW5zcG9ydCBDb25uZWN0ZWRgKTtcbiAgICAgICAgfSxcbiAgICAgICAgZGlzY29ubmVjdGVkOiAoKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuX19pY2VSZXN0YXJ0RGVib3VuY2UpIHJldHVybjtcbiAgICAgICAgICB0aGlzLl9faWNlUmVzdGFydERlYm91bmNlID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLl9fc29ja2V0LnB1Ymxpc2goXCJyZXN0YXJ0VHJhbnNwb3J0SWNlXCIsIHtcbiAgICAgICAgICAgIHRyYW5zcG9ydElkOiB0aGlzLl9fbWVkaWFzb3VwVHJhbnNwb3J0LmlkLFxuICAgICAgICAgICAgdHJhbnNwb3J0VHlwZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fX2ljZVJlc3RhcnREZWJvdW5jZSA9IGZhbHNlO1xuICAgICAgICAgIH0sIDNlMyk7XG4gICAgICAgICAgbG9nZ2VyLmRlYnVnKGBcXHV7MUY1MTR9ICR7dHJhbnNwb3J0VHlwZX0gVHJhbnNwb3J0IERpc2Nvbm5lY3RlZGApO1xuICAgICAgICB9LFxuICAgICAgICBmYWlsZWQ6ICgpID0+IHtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoYFxcdXsxRjUxNH0gJHt0cmFuc3BvcnRUeXBlfSBUcmFuc3BvcnQgRmFpbGVkYCk7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbm5lY3Rpbmc6ICgpID0+IHtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoYFxcdXsxRjUxNH0gJHt0cmFuc3BvcnRUeXBlfSBUcmFuc3BvcnQgQ29ubmVjdGluZ2ApO1xuICAgICAgICB9LFxuICAgICAgICBjbG9zZWQ6ICgpID0+IHtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoYFxcdXsxRjUxNH0gJHt0cmFuc3BvcnRUeXBlfSBUcmFuc3BvcnQgY2xvc2VkYCk7XG4gICAgICAgIH0sXG4gICAgICAgIG5ldzogKCkgPT4ge1xuICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgXFx1ezFGNTE0fSAke3RyYW5zcG9ydFR5cGV9IFRyYW5zcG9ydCBuZXdgKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGhhbmRsZXJbc3RhdGVdKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIEVycm9yIGluIGNvbm5lY3Rpb25TdGF0ZUNoYW5nZUhhbmRsZXJcIik7XG4gICAgICBsb2dnZXIuZXJyb3IoZXJyKTtcbiAgICB9XG4gIH07XG59O1xudmFyIFRyYW5zcG9ydF9kZWZhdWx0ID0gVHJhbnNwb3J0O1xuXG5leHBvcnQgeyBUcmFuc3BvcnRfZGVmYXVsdCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-OR44Z542.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-P6ECWQ7C.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-P6ECWQ7C.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-Q4PETRM3.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-Q4PETRM3.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PC_PROPRIETARY_CONSTRAINTS: () => (/* binding */ PC_PROPRIETARY_CONSTRAINTS),\n/* harmony export */   SCREEN_SHARING_SVC_ENCODINGS: () => (/* binding */ SCREEN_SHARING_SVC_ENCODINGS),\n/* harmony export */   VIDEO_CONSTRAINTS: () => (/* binding */ VIDEO_CONSTRAINTS),\n/* harmony export */   WEBCAM_KSVC_ENCODINGS: () => (/* binding */ WEBCAM_KSVC_ENCODINGS),\n/* harmony export */   WEBCAM_SIMULCAST_ENCODINGS: () => (/* binding */ WEBCAM_SIMULCAST_ENCODINGS),\n/* harmony export */   codecOptionsViaKind: () => (/* binding */ codecOptionsViaKind),\n/* harmony export */   encodingViaMediaType: () => (/* binding */ encodingViaMediaType)\n/* harmony export */ });\n// src/constants/rtpConstants.ts\nvar VIDEO_CONSTRAINTS = {\n  qvga: { width: { ideal: 320 }, height: { ideal: 240 } },\n  vga: { width: { ideal: 640 }, height: { ideal: 480 } },\n  hd: { width: { ideal: 1280 }, height: { ideal: 720 } },\n  fHd: { width: { ideal: 1920 }, height: { ideal: 1080 } },\n  qHd: { width: { ideal: 4096 }, height: { ideal: 2160 } }\n};\nvar PC_PROPRIETARY_CONSTRAINTS = {\n  optional: [{ googDscp: true }]\n};\nvar WEBCAM_SIMULCAST_ENCODINGS = [\n  {\n    scaleResolutionDownBy: 4,\n    maxBitrate: 3e5,\n    // 300kbps\n    rid: \"r0\",\n    scalabilityMode: \"S1T3\",\n    maxFramerate: 15\n  },\n  {\n    scaleResolutionDownBy: 2,\n    maxBitrate: 6e5,\n    // 600kbps\n    rid: \"r1\",\n    scalabilityMode: \"S1T3\",\n    maxFramerate: 30\n  },\n  {\n    scaleResolutionDownBy: 1,\n    maxBitrate: 9e6,\n    // 900kbps\n    rid: \"r2\",\n    scalabilityMode: \"S1T3\",\n    maxFramerate: 30\n  }\n];\nvar SCREEN_SHARING_SVC_ENCODINGS = [\n  { scalabilityMode: \"S3T3\", dtx: true }\n];\nvar encodingViaMediaType = {\n  video: WEBCAM_SIMULCAST_ENCODINGS,\n  \"screen-share-video\": void 0,\n  audio: [{ maxBitrate: 128e3 }]\n};\nvar codecOptionsViaKind = {\n  audio: { opusStereo: true, opusFec: true, opusDtx: true },\n  video: { videoGoogleStartBitrate: 1e3 }\n};\nvar WEBCAM_KSVC_ENCODINGS = [{ scalabilityMode: \"S3T3_KEY\" }];\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstUTRQRVRSTTMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQSxVQUFVLFNBQVMsWUFBWSxZQUFZLGNBQWM7QUFDekQsU0FBUyxTQUFTLFlBQVksWUFBWSxjQUFjO0FBQ3hELFFBQVEsU0FBUyxhQUFhLFlBQVksY0FBYztBQUN4RCxTQUFTLFNBQVMsYUFBYSxZQUFZLGVBQWU7QUFDMUQsU0FBUyxTQUFTLGFBQWEsWUFBWTtBQUMzQztBQUNBO0FBQ0EsZUFBZSxnQkFBZ0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxtQkFBbUI7QUFDL0I7QUFDQTtBQUNBLFdBQVcsZ0RBQWdEO0FBQzNELFdBQVc7QUFDWDtBQUNBLCtCQUErQiw2QkFBNkI7O0FBRXlIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9rZW1vbi1nYW1lLWV0aGluZGlhLTEvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstUTRQRVRSTTMuanM/NWI2YyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29uc3RhbnRzL3J0cENvbnN0YW50cy50c1xudmFyIFZJREVPX0NPTlNUUkFJTlRTID0ge1xuICBxdmdhOiB7IHdpZHRoOiB7IGlkZWFsOiAzMjAgfSwgaGVpZ2h0OiB7IGlkZWFsOiAyNDAgfSB9LFxuICB2Z2E6IHsgd2lkdGg6IHsgaWRlYWw6IDY0MCB9LCBoZWlnaHQ6IHsgaWRlYWw6IDQ4MCB9IH0sXG4gIGhkOiB7IHdpZHRoOiB7IGlkZWFsOiAxMjgwIH0sIGhlaWdodDogeyBpZGVhbDogNzIwIH0gfSxcbiAgZkhkOiB7IHdpZHRoOiB7IGlkZWFsOiAxOTIwIH0sIGhlaWdodDogeyBpZGVhbDogMTA4MCB9IH0sXG4gIHFIZDogeyB3aWR0aDogeyBpZGVhbDogNDA5NiB9LCBoZWlnaHQ6IHsgaWRlYWw6IDIxNjAgfSB9XG59O1xudmFyIFBDX1BST1BSSUVUQVJZX0NPTlNUUkFJTlRTID0ge1xuICBvcHRpb25hbDogW3sgZ29vZ0RzY3A6IHRydWUgfV1cbn07XG52YXIgV0VCQ0FNX1NJTVVMQ0FTVF9FTkNPRElOR1MgPSBbXG4gIHtcbiAgICBzY2FsZVJlc29sdXRpb25Eb3duQnk6IDQsXG4gICAgbWF4Qml0cmF0ZTogM2U1LFxuICAgIC8vIDMwMGticHNcbiAgICByaWQ6IFwicjBcIixcbiAgICBzY2FsYWJpbGl0eU1vZGU6IFwiUzFUM1wiLFxuICAgIG1heEZyYW1lcmF0ZTogMTVcbiAgfSxcbiAge1xuICAgIHNjYWxlUmVzb2x1dGlvbkRvd25CeTogMixcbiAgICBtYXhCaXRyYXRlOiA2ZTUsXG4gICAgLy8gNjAwa2Jwc1xuICAgIHJpZDogXCJyMVwiLFxuICAgIHNjYWxhYmlsaXR5TW9kZTogXCJTMVQzXCIsXG4gICAgbWF4RnJhbWVyYXRlOiAzMFxuICB9LFxuICB7XG4gICAgc2NhbGVSZXNvbHV0aW9uRG93bkJ5OiAxLFxuICAgIG1heEJpdHJhdGU6IDllNixcbiAgICAvLyA5MDBrYnBzXG4gICAgcmlkOiBcInIyXCIsXG4gICAgc2NhbGFiaWxpdHlNb2RlOiBcIlMxVDNcIixcbiAgICBtYXhGcmFtZXJhdGU6IDMwXG4gIH1cbl07XG52YXIgU0NSRUVOX1NIQVJJTkdfU1ZDX0VOQ09ESU5HUyA9IFtcbiAgeyBzY2FsYWJpbGl0eU1vZGU6IFwiUzNUM1wiLCBkdHg6IHRydWUgfVxuXTtcbnZhciBlbmNvZGluZ1ZpYU1lZGlhVHlwZSA9IHtcbiAgdmlkZW86IFdFQkNBTV9TSU1VTENBU1RfRU5DT0RJTkdTLFxuICBcInNjcmVlbi1zaGFyZS12aWRlb1wiOiB2b2lkIDAsXG4gIGF1ZGlvOiBbeyBtYXhCaXRyYXRlOiAxMjhlMyB9XVxufTtcbnZhciBjb2RlY09wdGlvbnNWaWFLaW5kID0ge1xuICBhdWRpbzogeyBvcHVzU3RlcmVvOiB0cnVlLCBvcHVzRmVjOiB0cnVlLCBvcHVzRHR4OiB0cnVlIH0sXG4gIHZpZGVvOiB7IHZpZGVvR29vZ2xlU3RhcnRCaXRyYXRlOiAxZTMgfVxufTtcbnZhciBXRUJDQU1fS1NWQ19FTkNPRElOR1MgPSBbeyBzY2FsYWJpbGl0eU1vZGU6IFwiUzNUM19LRVlcIiB9XTtcblxuZXhwb3J0IHsgUENfUFJPUFJJRVRBUllfQ09OU1RSQUlOVFMsIFNDUkVFTl9TSEFSSU5HX1NWQ19FTkNPRElOR1MsIFZJREVPX0NPTlNUUkFJTlRTLCBXRUJDQU1fS1NWQ19FTkNPRElOR1MsIFdFQkNBTV9TSU1VTENBU1RfRU5DT0RJTkdTLCBjb2RlY09wdGlvbnNWaWFLaW5kLCBlbmNvZGluZ1ZpYU1lZGlhVHlwZSB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-Q4PETRM3.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-QACHVS7A.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-QACHVS7A.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LocalPeer_default: () => (/* binding */ LocalPeer_default),\n/* harmony export */   RemotePeer_default: () => (/* binding */ RemotePeer_default)\n/* harmony export */ });\n/* harmony import */ var _chunk_OR44Z542_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-OR44Z542.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-OR44Z542.js\");\n/* harmony import */ var _chunk_2OLUNNR5_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-2OLUNNR5.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-2OLUNNR5.js\");\n/* harmony import */ var _chunk_WBDUVCNE_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-WBDUVCNE.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-WBDUVCNE.js\");\n/* harmony import */ var _chunk_BQEIAMKZ_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunk-BQEIAMKZ.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-BQEIAMKZ.js\");\n/* harmony import */ var _chunk_B7NPLGIE_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./chunk-B7NPLGIE.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-B7NPLGIE.js\");\n/* harmony import */ var _chunk_6MHHX2FW_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./chunk-6MHHX2FW.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-6MHHX2FW.js\");\n/* harmony import */ var _chunk_HDCV2PNW_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./chunk-HDCV2PNW.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-HDCV2PNW.js\");\n/* harmony import */ var _chunk_WA3QABYS_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./chunk-WA3QABYS.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-WA3QABYS.js\");\n/* harmony import */ var _chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./chunk-E2DU7IIE.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-E2DU7IIE.js\");\n/* harmony import */ var _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./chunk-TOCFOGTC.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-TOCFOGTC.js\");\n/* harmony import */ var _chunk_BW2DGP4D_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./chunk-BW2DGP4D.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-BW2DGP4D.js\");\n/* harmony import */ var mediasoup_client__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! mediasoup-client */ \"(ssr)/./node_modules/mediasoup-client/lib/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar logger = _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_9__.mainLogger.createSubLogger(\"LocalPeer\");\nvar MAX_DATA_MESSAGE_SIZE = 1 * 1024;\nvar LocalPeer = class _LocalPeer extends _chunk_BW2DGP4D_js__WEBPACK_IMPORTED_MODULE_10__.EnhancedEventEmitter {\n  /**\n   * LocalPeer Instance, Singleton class, only one instance of this class can be created\n   */\n  static __instance = null;\n  /**\n   * PeerId of the current client, specific to the Local Peer who joined the meeting\n   *\n   * `NOTE: Until you dont join the room, this will be *null*`\n   */\n  peerId = null;\n  /**\n   * Current Devices of the current client\n   * e.g. Chrome, Firefox, Safari, ReactNative\n   */\n  __device = null;\n  /**\n   * custom handler factory for device, required when using aiortc client or something custom\n   */\n  __handlerFactory;\n  /**\n   * SendTransport handles the sending of media from the client to the server\n   */\n  __sendTransport = null;\n  /**\n   * RecvTransport handles the receiving of media from the server to the client\n   */\n  __recvTransport = null;\n  /**\n   * Returns the room instance, throws an error if the room is not created\n   *\n   * @throws { Error } If the room is not created, Call createRoom() method before you can access the room in the LocalPeer\n   */\n  get room() {\n    const room = _chunk_BQEIAMKZ_js__WEBPACK_IMPORTED_MODULE_3__.Room_default.getInstance();\n    if (!room) throw new Error(\"\\u274C Room Not Initialized\");\n    return room;\n  }\n  /**\n   * Returns the underlying socket connection\n   * @throws { Error } If the socket connection is not initialized\n   */\n  get socket() {\n    const socket = _chunk_B7NPLGIE_js__WEBPACK_IMPORTED_MODULE_4__.Socket_default.getInstance();\n    if (!socket) throw new Error(\"\\u274C Socket Not Initialized\");\n    return socket;\n  }\n  /**\n   * Remote Peers Map, Stores all the remote peers\n   */\n  get __remotePeers() {\n    return this.room.remotePeers;\n  }\n  /**\n   * Turn Server used for this client\n   */\n  __turn = [\n    {\n      username: \"test-turn\",\n      urls: \"turn:turn.huddle01.com:443?transport=udp\",\n      credential: \"test-turn\"\n    },\n    {\n      username: \"test-turn\",\n      urls: \"turn:turn.huddle01.com:443?transport=tcp\",\n      credential: \"test-turn\"\n    }\n  ];\n  /**\n   * Get the current device ( chrome, firefox, safari, reactnative ) for this client\n   *\n   * @throws { Error } If the device is not initialized\n   */\n  get device() {\n    if (!this.__device) throw new Error(\"Device Not Initialized\");\n    const loaded = this.__device.loaded;\n    if (!loaded) throw new Error(\"Device Not Loaded\");\n    return this.__device;\n  }\n  // !important\n  // Consumer creation tasks awaiting to be processed.\n  // Stores the lables of the pending consumers { producerId: string ==> Promise<Consumer> }\n  __pendingConsumerTasks = /* @__PURE__ */ new Map();\n  // !important\n  // Producer creation tasks awaiting to be processed.\n  // Stores the lables of the pending producers { label: string }\n  // Used to handle transport callbacks most important;\n  __pendingProducerTasks = /* @__PURE__ */ new Map();\n  // !important\n  // Map to store pending tasks, Stores the label and the promise of the task\n  __pendingTasks = /* @__PURE__ */ new Map();\n  /**\n   * Pending Transport Tasks, Stores the transportType and the promise of the transport\n   *\n   * `NOTE: Useful to check if the transport is already being created and pause all producing\n   * and consuming until the transport is created`\n   */\n  __pendingTransportTasks = /* @__PURE__ */ new Map();\n  /**\n   * Stores all the pending fetching stream tasks which are awaiting to be processed\n   * If fetching called multiple times at once, it will handle the concurrency issues\n   */\n  __pendingFetchingStream = /* @__PURE__ */ new Map();\n  /**\n   * Stores all the pending produce tasks which are awaiting to be processed\n   * Mostly used when the room is not joined and produce functionality needs to be handled\n   *\n   * Cases such as socket experiencing a reconnect and produce is called.\n   * Or in the cases where room is not joined and enableVideo or enableAudio is called\n   */\n  __waitingToProduce = /* @__PURE__ */ new Map();\n  /**\n   * Stores all the pending consume tasks which are waiting for recv transport to be re-connected\n   */\n  __waitingToConsume = [];\n  /**\n   * DeviceHandler Instance, Handles the media devices for this client\n   * e.g. Camera, Microphone\n   */\n  deviceHandler = new _chunk_HDCV2PNW_js__WEBPACK_IMPORTED_MODULE_6__.DeviceHandler_default();\n  /**\n   * ActiveStream Map holds MediaStream as Value and Key as Label\n   */\n  __activeStreams = /* @__PURE__ */ new Map();\n  /**\n   * Handle the Client Side Permission for the Local Peer.\n   */\n  __permissions = _chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_8__.Permissions_default.createInstance();\n  /**\n   * Stores the Metadata for the Local Peer.\n   */\n  __metadata = null;\n  /**\n   * Variable to check if the user has joined the room\n   */\n  joined = false;\n  /**\n   * Variable to know if Volatile Messaging is enabled for the LocalPeer,\n   * when using Volatile Messaging, the messages are sent over UDP using WebRTC\n   * which makes the messages faster but not reliable and have much higher rate limit\n   * and lower Latency.\n   */\n  __volatileMessaging = false;\n  /**\n   * Return the labels of the Media Stream that the Local Peer is producing to the room\n   */\n  get labels() {\n    const sendTransport = this.__sendTransport;\n    if (sendTransport) {\n      const labels = Array.from(sendTransport.labelToProducerId.keys());\n      return labels;\n    }\n    return [];\n  }\n  /**\n   * Get the Permissions of the Local Peer. (e.g canProduce, canConsume, canSendData, canRecvData etc)\n   */\n  get permissions() {\n    const acl = this.__permissions.acl;\n    return acl;\n  }\n  /**\n   * Get the Role of the Local Peer.\n   */\n  get role() {\n    return this.__permissions.role;\n  }\n  /**\n   * Returns the token of the current socket connection, specific to the Local Peer who joined the meeting\n   */\n  get token() {\n    return this.socket.token;\n  }\n  /**\n   * Returns the roomId of the current joined room.\n   */\n  get roomId() {\n    return this.room.roomId;\n  }\n  /**\n   * Returns the SendTransport\n   * @returns { Transport } SendTransport\n   * @throws { Error } If the SendTransport is not initialized\n   */\n  get sendTransport() {\n    if (!this.__sendTransport)\n      throw new Error(\"Send Transport Not Initialized\");\n    return this.__sendTransport;\n  }\n  /**\n   * Returns the recvTransport\n   * @returns { Transport } recvTransport\n   * @throws { Error } If the recvTransport is not initialized\n   */\n  get recvTransport() {\n    if (!this.__recvTransport)\n      throw new Error(\"Recv Transport Not Initialized\");\n    return this.__recvTransport;\n  }\n  /**\n   * Returns the metadata associated to the LocalPeer\n   */\n  getMetadata() {\n    const data = JSON.parse(this.__metadata || \"{}\");\n    return data;\n  }\n  /**\n   * getStream returns the stream with the given label\n   */\n  getStream = (data) => {\n    const stream = this.__activeStreams.get(data.label);\n    if (stream === void 0) {\n      return null;\n    }\n    return stream;\n  };\n  /**\n   * Updates the metadata associated to the LocalPeer, Triggers the `metadata-updated` event\n   * @param metadata\n   */\n  __updateMetadata = (metadata) => {\n    this.__metadata = metadata;\n    const parse = JSON.parse(metadata);\n    this.emit(\"metadata-updated\", {\n      metadata: parse\n    });\n  };\n  /**\n   * Returns the producer with the given label\n   * @param label - Identifier of the producer\n   * @returns { Producer } Producer\n   * @returns { null } If the producer is not found\n   */\n  getProducerWithLabel = (label) => {\n    try {\n      const producerId = this.__sendTransport?.labelToProducerId.get(label);\n      if (!producerId) {\n        throw new Error(\"\\u274C Producer Not Found\");\n      }\n      const producer = this.sendTransport.getProducerById(producerId);\n      return producer;\n    } catch (error) {\n      logger.error(\"\\u274C Cannot Find Producer With Identifier: \", label);\n      logger.error(error);\n      return null;\n    }\n  };\n  /**\n   * Registers the event handlers for the socket connection\n   * @param socket - Socket Instance\n   */\n  __registerHandlerEvents = (socket) => {\n    const keys = Object.keys(this.__handler);\n    for (const key of keys) {\n      try {\n        const fn = this.__handler[key];\n        if (fn) socket.subscribe(key, fn);\n      } catch (error) {\n        logger.error(`\\u274C Error Registered For Event: ${key}`);\n        logger.error(error);\n      }\n    }\n    logger.info(\"\\u2705 LocalPeerEventHandler Registered\");\n  };\n  /**\n   * Can be used to check which `direction` of webRTC connection is currently active for the peer.\n   *\n   * **NOTE: Peers with role as Bot will not have `recv` transport;**\n   * @param transportType\n   */\n  transportExists = (transportType) => {\n    if (transportType === \"recv\") {\n      return this.__recvTransport;\n    }\n    return this.__sendTransport;\n  };\n  static create(options) {\n    if (_LocalPeer.__instance) {\n      return _LocalPeer.__instance;\n    }\n    _LocalPeer.__instance = new _LocalPeer(options);\n    return _LocalPeer.__instance;\n  }\n  static getInstance() {\n    if (!_LocalPeer.__instance) {\n      throw new Error(\"LocalPeer not initialized\");\n    }\n    return _LocalPeer.__instance;\n  }\n  constructor(options) {\n    super();\n    this.__registerHandlerEvents(this.socket);\n    if (options.handlerFactory) {\n      this.__handlerFactory = options?.handlerFactory;\n    }\n    this.__volatileMessaging = options.volatileMessages ?? false;\n    this.__registerInternalListeners();\n  }\n  /**\n   * Destroy the current peer, closes all the transports, producers and consumers\n   *\n   * @param code - Close Code\n   */\n  close = () => {\n    this.__device = null;\n    this.joined = false;\n    if (typeof navigator !== \"undefined\" && navigator.mediaDevices) {\n      navigator.mediaDevices.ondevicechange = null;\n    }\n    this.__pendingConsumerTasks.clear();\n    this.__pendingProducerTasks.clear();\n    this.__pendingTransportTasks.clear();\n    this.__pendingFetchingStream.clear();\n    this.__waitingToProduce.clear();\n    for (const stream of this.__activeStreams.values()) {\n      for (const track of stream.getTracks()) track.stop();\n    }\n    this.deviceHandler.destroy();\n    if (this.__sendTransport) {\n      this.__sendTransport.close({ retries: 3 });\n    }\n    if (this.__recvTransport) {\n      this.__recvTransport.close({ retries: 3 });\n    }\n    this.__sendTransport = null;\n    this.__recvTransport = null;\n    this.__permissions.reset();\n    this.emit(\"permissions-updated\", {\n      permissions: this.permissions,\n      role: this.role ?? \"\"\n    });\n  };\n  /**\n   * Produce a stream with a given label and appData to all the Remote Peers\n   *\n   * `canProduce must be true to produce a stream`\n   *\n   * `NOTE: This will notify all the RemotePeers that this producer has started producing and they should start consuming it if they want to`\n   *\n   * @param data - Data to produce a stream\n   *  - `label` - Unique Identifier for the stream ( string )\n   *  - `stream` - MediaStream to produce ( MediaStream )\n   *  - `stopTrackOnClose` - If true, it will stop the track when the producer is closed using stopProducing ( boolean )\n   *  - `appData` - Application level custom data which can be added to the producer for the LocalPeer, this data will be available in the producer object and can be used only by the LocalPeer. ( Unknown Object )\n   *  - `prefferedCodec` - Preferred Codec to be used for the stream ( SupportedCodecs ), make sure the codec is supported by the device ( 'Browser' or 'ReactNative' )\n   *\n   * @summary This function is used to produce a stream with a given label and appData to all the Remote Peers if the send transport is not initialised\n   * it will create a send transport and then produce the stream with the given label and appData to all the Remote Peers\n   *\n   * Send Transport is a secure channel which is used to send media from LocalPeer to all the RemotePeers in the room\n   *\n   * `localPeer.on('new-producer', ({label: string; producer: Producer}) => {})`\n   *\n   *  @throws { Error } If Failed to produce, Reason will be in the error message,\n   * @throws { Error } if `prefferedCodec` is not supported by the Device ( 'Browser' or 'ReactNative' )\n   */\n  produce = (0,_chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_8__.checkPermissions)({\n    canProduce: true\n  }).validate(\n    async (data) => {\n      try {\n        const error = (0,_chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_8__.checkProducePermissions)(data.label);\n        if (error) {\n          throw new Error(\"Access Denied: Cannot Produce\");\n        }\n        const track = data.stream.getTracks()[0];\n        if (track) {\n          track.addEventListener(\"ended\", () => {\n            this.stopProducing({ label: data.label });\n            if (data.label === \"screen-share-audio\") {\n              this.stopProducing({ label: \"screen-share-video\" });\n            }\n          });\n        }\n        if (!this.joined || this.__sendTransport && this.__sendTransport?.connectionState !== \"connected\" && this.__sendTransport?.connectionState !== \"new\") {\n          return new Promise((resolve) => {\n            const fn = async () => {\n              const producer2 = await this.produce(data).then((data2) => {\n                resolve(data2);\n                return data2;\n              }).finally(() => {\n                this.__pendingProducerTasks.delete(data.label);\n              });\n              return producer2;\n            };\n            this.__waitingToProduce.set(data.label, fn);\n          });\n        }\n        const { stream } = data;\n        const producerPromise = this.__pendingProducerTasks.get(data.label);\n        if (producerPromise) {\n          logger.info(\n            \"\\u{1F514} Producer Task Already Pending for this label \",\n            data.label\n          );\n          const producer2 = await producerPromise;\n          return producer2;\n        }\n        if (!this.__sendTransport) {\n          await this.__createTransportOnServer({\n            transportType: \"send\"\n          });\n        }\n        const ongoingPromise = this.__pendingProducerTasks.get(data.label);\n        if (ongoingPromise) {\n          const producer2 = await ongoingPromise;\n          return producer2;\n        }\n        const promise = this.__createProducer({\n          stream,\n          label: data.label,\n          appData: { ...data.appData, label: data.label },\n          prefferedCodec: data.prefferedCodec,\n          stopTrackOnClose: data.stopTrackOnClose\n        });\n        this.__pendingProducerTasks.set(data.label, promise);\n        const producer = await promise.catch(() => {\n          logger.error(\"\\u274C Error Create Producer Failed\");\n          throw new Error(\"\\u274C Error Create Producer Failed\");\n        }).finally(() => {\n          this.__pendingProducerTasks.delete(data.label);\n        });\n        return producer;\n      } catch (error) {\n        this.stopProducing({ label: data.label });\n        throw new Error(\"\\u274C Error Producing Stream, Can't Produce\");\n      }\n    }\n  );\n  /**\n   * Enables the local web cam and starts producing the stream with the label `video`\n   * @param customVideoStream (Optional) Custom Video Stream to produce, if not provided it will fetch the stream from the device\n   * @param prefferedCodec (Optional) Preferred Codec to be used for the stream ( SupportedCodecs ), make sure the codec is supported by the device ( 'Browser' or 'ReactNative' )\n   *\n   * @summary This functions handle the producing of media streams to all the remote peers in the room.\n   * it enables the local web cam fetches the stream opens you web cam indicator light on the device\n   * upon successfull fetching of the stream it produces the stream with the label `video` and `stopTrackOnClose: true` to all the remote peers in the room.\n   * when closing using disableVideo it will stop the local track and close the producer which will notify all the RemotePeers that this producer has stopped producing\n   * and they should stop consuming it.\n   *\n   * `NOTE: You can only produce to a room when you have joined the room, if you try to produce before joining the room it will throw an error`\n   *\n   * @throws { Error } If the stream is not found\n   * @throws { Error } If Preffered Codec is not supported by the Device ( 'Browser' or 'ReactNative' )\n   * @throws { Error } If Failed to produce, Reason will be in the error message\n   */\n  enableVideo = (0,_chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_8__.checkPermissions)({\n    canProduce: true,\n    canProduceSources: { cam: true }\n  }).validate(\n    async (data) => {\n      try {\n        const existingStream = this.__activeStreams.get(\"video\");\n        if (existingStream) {\n          logger.warn(\"\\u{1F514} Cam Stream Already Enabled\");\n          return;\n        }\n        let stream;\n        if (data?.customVideoStream) {\n          stream = data?.customVideoStream;\n        } else {\n          const ongoingStreamPromise = this.__pendingFetchingStream.get(\"cam\");\n          if (ongoingStreamPromise) {\n            await ongoingStreamPromise;\n          } else {\n            const streamPromise = this.deviceHandler.fetchStream({\n              mediaDeviceKind: \"cam\"\n            });\n            this.__pendingFetchingStream.set(\"cam\", streamPromise);\n          }\n          const pendingPromise = this.__pendingFetchingStream.get(\"cam\");\n          if (!pendingPromise) {\n            logger.info(\"\\u{1F514} Pending Promise Not Found\");\n            return;\n          }\n          const { stream: fetchedStream, error } = await pendingPromise;\n          if (error) {\n            logger.error(\"\\u274C Error Fetching Stream From Device\");\n            logger.error(error);\n            throw new Error(\"\\u274C Error Fetching Stream From Device\");\n          }\n          if (!fetchedStream) {\n            logger.error(\"\\u274C Stream Not Found, cannot do enableVideo\");\n            throw new Error(\"\\u274C Stream Not Found\");\n          }\n          stream = fetchedStream;\n        }\n        this.__activeStreams.set(\"video\", stream);\n        this.emit(\"stream-fetched\", {\n          mediaKind: \"cam\",\n          label: \"video\",\n          stream\n        });\n        this.produce({\n          label: \"video\",\n          stream,\n          appData: {\n            producerPeerId: this.peerId\n          },\n          stopTrackOnClose: true,\n          prefferedCodec: data?.prefferedCodec\n        }).then(() => {\n          this.__pendingProducerTasks.delete(\"video\");\n        }).catch((error) => {\n          logger.error(\"\\u274C Error Producing Video\");\n          this.deviceHandler.stopStream(this.__activeStreams.get(\"video\"));\n          this.__activeStreams.delete(\"video\");\n          this.__pendingFetchingStream.delete(\"cam\");\n          logger.error(error);\n        });\n        this.__pendingFetchingStream.delete(\"cam\");\n        return stream;\n      } catch (error) {\n        logger.error(\"\\u274C Error Enabling Video\", error);\n        this.deviceHandler.stopStream(this.__activeStreams.get(\"video\"));\n        this.__activeStreams.delete(\"video\");\n        this.__pendingFetchingStream.delete(\"cam\");\n        throw error;\n      }\n    }\n  );\n  /**\n   * Enables the local screen share  and starts producing the screen sharing stream\n   *\n   * @param prefferedCodec (Optional) Preferred Codec to be used for the stream ( SupportedCodecs ), make sure the codec is supported by the device ( 'Browser' or 'ReactNative' )\n   *\n   *`NOTE: You can only produce to a room when you have joined the room, if you try to produce before joining the room it will fetch the stream and start producing when you join the room`\n   *\n   * @summary This functions handle the producing of media streams to all the remote peers in the room.\n   * it enables the local mic fetches the stream opens you mic active indicator light on the device\n   * upon successfull fetching of the stream it produces the stream with the label `audio` and `stopTrackOnClose: true` to all the remote peers in the room.\n   * when closing using `disableAudio` it will stop the local audio track and close the producer which will notify all the RemotePeers that this producer has stopped producing\n   * and they should stop consuming it.\n   *\n   * @throws { Error } If Preffered Codec is not supported by the Device ( 'Browser' or 'ReactNative' )\n   * @throws { Error } If Failed to produce, Reason will be in the error message\n   */\n  startScreenShare = (0,_chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_8__.checkPermissions)({\n    canProduce: true,\n    canProduceSources: { screen: true }\n  }).validate(async (data) => {\n    try {\n      const existingStream = this.__activeStreams.get(\"screen-share\");\n      if (existingStream) {\n        logger.warn(\"\\u{1F514} Screen Stream Already Enabled\");\n        return;\n      }\n      const onGoingStreamPromise = this.__pendingFetchingStream.get(\"screen-share\");\n      if (onGoingStreamPromise) {\n        await onGoingStreamPromise;\n      } else {\n        const streamPromise = this.deviceHandler.fetchScreen();\n        this.__pendingFetchingStream.set(\"screen-share\", streamPromise);\n      }\n      const pendingPromise = this.__pendingFetchingStream.get(\"screen-share\");\n      if (!pendingPromise) {\n        logger.info(\"\\u{1F514} Pending Screen Share Promise Not Found\");\n        return;\n      }\n      const { stream, error } = await pendingPromise;\n      if (error) {\n        logger.error(\"\\u274C Error Fetching Screen Share Stream From Device\");\n        logger.error(error);\n        throw new Error(\"\\u274C Error Fetching Screen ShareStream From Device\");\n      }\n      if (!stream) {\n        logger.error(\"\\u274C Stream Not Found, cannot do startScreenShare\");\n        throw new Error(\"\\u274C Stream Not Found, cannot do startScreenShare\");\n      }\n      this.__activeStreams.set(\"screen-share\", stream);\n      this.emit(\"stream-fetched\", {\n        mediaKind: \"screen\",\n        label: \"screen-share\",\n        stream\n      });\n      const videoTrack = stream.getVideoTracks()?.[0];\n      const audioTrack = stream.getAudioTracks()?.[0];\n      const videoProduce = async () => {\n        return this.produce({\n          label: \"screen-share-video\",\n          stream: new MediaStream([videoTrack]),\n          appData: {\n            producerPeerId: this.peerId\n          },\n          stopTrackOnClose: true,\n          prefferedCodec: data?.prefferedCodec\n        });\n      };\n      const audioProduce = async () => {\n        return this.produce({\n          label: \"screen-share-audio\",\n          stream: new MediaStream([audioTrack]),\n          appData: {\n            producerPeerId: this.peerId\n          },\n          stopTrackOnClose: true\n        });\n      };\n      if (videoTrack) {\n        videoProduce().then(() => {\n          this.__pendingProducerTasks.delete(\"screen-share-video\");\n        }).catch((error2) => {\n          logger.error(\"\\u274C Error Producing Screen Share Video\");\n          this.deviceHandler.stopStream(\n            this.__activeStreams.get(\"screen-share\")\n          );\n          this.__activeStreams.delete(\"screen-share\");\n          logger.error(error2);\n        });\n      }\n      if (audioTrack) {\n        audioProduce().then(() => {\n          this.__pendingProducerTasks.delete(\"screen-share-audio\");\n        }).catch((error2) => {\n          logger.error(\"\\u274C Error Producing Audio\");\n          this.deviceHandler.stopStream(\n            this.__activeStreams.get(\"screen-share\")\n          );\n          this.__activeStreams.delete(\"screen-share\");\n          logger.error(error2);\n        });\n      }\n      this.__pendingFetchingStream.delete(\"screen-share\");\n      return stream;\n    } catch (error) {\n      logger.error(\"\\u274C Error Enabling Screen Share\");\n      logger.error(error);\n      this.deviceHandler.stopStream(this.__activeStreams.get(\"screen-share\"));\n      this.__activeStreams.delete(\"screen-share\");\n      this.__pendingFetchingStream.delete(\"screen-share\");\n      throw error;\n    }\n  });\n  /**\n   * Enables the local mic and starts producing the stream with the label `audio`\n   * @param customVideoStream (Optional) Custom Video Stream to produce, if not provided it will fetch the stream from the device\n   * @param prefferedCodec (Optional) Preferred Codec to be used for the stream ( SupportedCodecs ), make sure the codec is supported by the device ( 'Browser' or 'ReactNative' )\n   *\n   * @summary This functions handle the producing of media streams to all the remote peers in the room.\n   * it enables the local mic fetches the stream opens you mic active indicator light on the device\n   * upon successfull fetching of the stream it produces the stream with the label `audio` and `stopTrackOnClose: true` to all the remote peers in the room.\n   * when closing using `disableAudio` it will stop the local audio track and close the producer which will notify all the RemotePeers that this producer has stopped producing\n   * and they should stop consuming it.\n   *\n   * `NOTE: You can only produce to a room when you have joined the room, if you try to produce before joining the room it will fetch the stream and start producing when you join the room`\n   *\n   * @throws { Error } If the stream is not found\n   * @throws { Error } If Preffered Codec is not supported by the Device ( 'Browser' or 'ReactNative' )\n   * @throws { Error } If Failed to produce, Reason will be in the error message\n   */\n  enableAudio = (0,_chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_8__.checkPermissions)({\n    canProduce: true,\n    canProduceSources: { mic: true }\n  }).validate(\n    async (data) => {\n      try {\n        const existingStream = this.__activeStreams.get(\"audio\");\n        if (existingStream) {\n          logger.warn(\"\\u{1F514} Mic Stream Already Enabled\");\n          return;\n        }\n        let stream;\n        if (data?.customAudioStream) {\n          stream = data?.customAudioStream;\n        } else {\n          const ongoingStreamPromise = this.__pendingFetchingStream.get(\"mic\");\n          if (ongoingStreamPromise) {\n            await ongoingStreamPromise;\n          } else {\n            const streamPromise = this.deviceHandler.fetchStream({\n              mediaDeviceKind: \"mic\"\n            });\n            this.__pendingFetchingStream.set(\"mic\", streamPromise);\n          }\n          const pendingPromise = this.__pendingFetchingStream.get(\"mic\");\n          if (!pendingPromise) {\n            logger.info(\"\\u{1F514} Pending Mic Promise Not Found\");\n            return;\n          }\n          const { stream: fetchedStream, error } = await pendingPromise;\n          if (error) {\n            logger.error(\"\\u274C Error Fetching Stream From Device\");\n            logger.error(error);\n            throw new Error(\"\\u274C Error Fetching Stream From Device\");\n          }\n          if (!fetchedStream) {\n            logger.error(\"\\u274C Stream Not Found, cannot do enableAudio\");\n            throw new Error(\"\\u274C Stream Not Found\");\n          }\n          stream = fetchedStream;\n        }\n        this.__activeStreams.set(\"audio\", stream);\n        this.emit(\"stream-fetched\", {\n          mediaKind: \"mic\",\n          stream,\n          label: \"audio\"\n        });\n        this.produce({\n          label: \"audio\",\n          stream,\n          appData: {\n            producerPeerId: this.peerId\n          },\n          stopTrackOnClose: true,\n          prefferedCodec: data?.prefferedCodec\n        }).then(() => {\n          this.__pendingProducerTasks.delete(\"audio\");\n        }).catch((error) => {\n          logger.error(\"\\u274C Error Producing Audio\");\n          this.deviceHandler.stopStream(this.__activeStreams.get(\"audio\"));\n          this.__activeStreams.delete(\"audio\");\n          logger.error(error);\n        });\n        this.__pendingFetchingStream.delete(\"mic\");\n        return stream;\n      } catch (error) {\n        logger.error(\"\\u274C Error Enabling Audio\");\n        logger.error(error);\n        this.deviceHandler.stopStream(this.__activeStreams.get(\"audio\"));\n        this.__activeStreams.delete(\"audio\");\n        this.__pendingFetchingStream.delete(\"mic\");\n        throw error;\n      }\n    }\n  );\n  /**\n   * Stops the underlying producing of a stream for a particular label\n   *\n   * `NOTE: This will notify all the RemotePeers that this producer has stopped producing and they should stop consuming it.`\n   *\n   * @param data Data to stop producing { label: string }\n   */\n  stopProducing = (data) => {\n    this.__waitingToProduce.delete(data.label);\n    this.__pendingProducerTasks.delete(data.label);\n    let closedStream = false;\n    const producer = this.getProducerWithLabel(data.label);\n    if (producer) {\n      if (!producer.closed) producer.close();\n      closedStream = true;\n      this.socket.publish(\"closeProducer\", {\n        producerId: producer.id\n      });\n    }\n    const closedStreamLabel = data.label.startsWith(\"screen-share\") ? \"screen-share\" : data.label;\n    const stream = this.__activeStreams.get(closedStreamLabel);\n    if (stream) {\n      this.deviceHandler.stopStream(stream);\n      this.__activeStreams.delete(closedStreamLabel);\n      closedStream = true;\n    }\n    if (closedStream) {\n      this.emit(\"stream-closed\", {\n        label: data.label,\n        reason: {\n          code: 1200,\n          tag: \"STREAM_CLOSED\",\n          message: \"Stopped Streaming\"\n        }\n      });\n    }\n  };\n  /**\n   * Stops the underlying producing of a camera stream, stops the local track and closes the producer\n   *\n   * `NOTE: This will notify all the RemotePeers that this producer has stopped producing and they should stop consuming it. if you have joined the room, else it will just close the stream`\n   *\n   * @param data Data to stop producing { label: string }\n   */\n  disableVideo = async () => {\n    this.stopProducing({\n      label: \"video\"\n    });\n  };\n  /**\n   * Replaces the current video stream with the new stream\n   *\n   * if you have produced a stream with label `video` or used the default function `enableVideo` and you want to replace it with a new stream\n   * @param stream - New Video Stream\n   */\n  replaceVideoStream = async (stream) => {\n    await this.replaceStream({\n      label: \"video\",\n      newStream: stream\n    });\n  };\n  /**\n   * Changes the Video source to the given deviceId, sets the preferred cam device as the given deviceId\n   * @param deviceId\n   */\n  changeVideoSource = async (deviceId) => {\n    this.deviceHandler.setPreferredDevice({\n      deviceId,\n      deviceKind: \"cam\"\n    });\n    const stream = this.__activeStreams.get(\"video\");\n    if (!stream) {\n      return;\n    }\n    const { stream: newStream } = await this.deviceHandler.fetchStream({\n      mediaDeviceKind: \"cam\"\n    });\n    if (!newStream) return;\n    await this.replaceVideoStream(newStream);\n  };\n  /**\n   * Replaces the current audio stream with the new stream\n   * if you have produced a stream with label `audio` or used the default function `enableAudio` and you want to replace it with a new stream\n   * @param stream - New Audio Stream\n   *\n   */\n  replaceAudioStream = async (stream) => {\n    await this.replaceStream({\n      label: \"audio\",\n      newStream: stream\n    });\n  };\n  /**\n   * Replace the current stream with the new stream based on the label used to produce the stream\n   *\n   * @example\n   * For Video\n   * await localPeer.replaceStream({\n   *  label: 'video',\n   *  newStream: newStream\n   * })\n   *\n   * If any custom label used\n   * await localPeer.replaceStream({\n   *  label: 'custom',\n   *  newStream: newStream\n   * })\n   *\n   * @param data - { label: string, newStream: MediaStream }\n   * @throws { Error } - If replace Stream failed\n   */\n  replaceStream = async (data) => {\n    logger.info(`\\u{1F514} Replacing ${data.label} Stream `);\n    const producer = this.getProducerWithLabel(data.label);\n    const track = data.newStream.getTracks()[0];\n    if (track) {\n      track.addEventListener(\"ended\", () => {\n        this.stopProducing({ label: data.label });\n      });\n    }\n    if (producer) {\n      if (producer.paused) {\n        track.enabled = false;\n      }\n      await producer.replaceTrack({ track });\n    }\n    const closedStreamLabel = data.label.startsWith(\"screen-share\") ? \"screen-share\" : data.label;\n    const prevStream = this.__activeStreams.get(closedStreamLabel);\n    if (prevStream && !this.__waitingToProduce.has(closedStreamLabel)) {\n      this.deviceHandler.stopStream(prevStream);\n      this.__activeStreams.delete(closedStreamLabel);\n      this.__activeStreams.set(closedStreamLabel, data.newStream);\n    } else if (prevStream && this.__waitingToProduce.has(closedStreamLabel)) {\n      for (const track2 of prevStream.getTracks()) {\n        prevStream.removeTrack(track2);\n        track2.stop();\n      }\n      for (const track2 of data.newStream.getTracks()) {\n        prevStream.addTrack(track2);\n      }\n    }\n    const mediaDeviceKind = (0,_chunk_WA3QABYS_js__WEBPACK_IMPORTED_MODULE_7__.getMediaDeviceKind)(track);\n    this.emit(\"stream-fetched\", {\n      label: data.label,\n      stream: data.newStream,\n      mediaKind: mediaDeviceKind\n    });\n  };\n  /**\n   * Changes the Audio source to the given deviceId, sets the preferred mic device as the given deviceId\n   * @param deviceId\n   */\n  changeAudioSource = async (deviceId) => {\n    this.deviceHandler.setPreferredDevice({\n      deviceId,\n      deviceKind: \"mic\"\n    });\n    const stream = this.__activeStreams.get(\"audio\");\n    if (!stream) {\n      return;\n    }\n    const { stream: newStream } = await this.deviceHandler.fetchStream({\n      mediaDeviceKind: \"mic\"\n    });\n    if (!newStream) return;\n    await this.replaceAudioStream(newStream);\n  };\n  /**\n   * Stops the underlying producing of a microphone stream, stops the local track and closes the producer\n   *\n   * `NOTE: This will notify all the RemotePeers that this producer has stopped producing and they should stop consuming it.`\n   */\n  disableAudio = async () => {\n    this.stopProducing({\n      label: \"audio\"\n    });\n  };\n  /**\n   * Pauses the audio stream, pauses the underlying producer but does not stop the local track - useful when user has joined the room and wants to pause the audio stream which is faster than disabling the audio stream\n   *\n   * `NOTE: Only use this function when peer has joined the room else use disableAudio, The LocalPeer will not be producing any audio stream but the local track will still be active, you can resume the audio stream using resumeAudio or stop the audio stream using disableAudio`\n   *\n   * @throws Error - If Pausing Audio Failed, it will disable the audio stream, and throw an error\n   */\n  pauseAudio = async () => {\n    try {\n      logger.debug(\"\\u{1F514} Pausing Audio Stream\");\n      const audioStream = this.__activeStreams.get(\"audio\");\n      if (!audioStream) {\n        logger.error(\n          \"\\u274C No Audio Stream Found, use enableAudio to enable audio first before pausing\"\n        );\n        return;\n      }\n      const track = audioStream.getAudioTracks()[0];\n      if (!track) {\n        logger.error(\n          \"\\u274C No Audio Track Found, use enableAudio to enable audio first before pausing\"\n        );\n        return;\n      }\n      const producer = this.getProducerWithLabel(\"audio\");\n      if (!producer) {\n        throw new Error(\"\\u274C Cannot Pause Audio, Producer not found\");\n      }\n      producer.pause();\n      this.socket.publish(\"pauseProducer\", {\n        producerId: producer.id\n      });\n      this.emit(\"stream-paused\", {\n        label: \"audio\",\n        mediaKind: \"mic\"\n      });\n    } catch (error) {\n      logger.error(\"Error Pausing Audio\", error);\n      await this.disableAudio();\n      throw error;\n    }\n  };\n  /**\n   * Resumes the audio stream, resumes the underlying producer and starts producing the audio stream - useful when user has `joined the room` and wants to resume the audio stream\n   *\n   * `Note: Works only if the audio stream is paused using pauseAudio`\n   *\n   * @throws Error - If Resuming Audio Failed, it will disable the audio stream, and throw an error\n   */\n  resumeAudio = async () => {\n    try {\n      logger.debug(\"\\u{1F514} Resuming Audio Stream\");\n      const audioStream = this.__activeStreams.get(\"audio\");\n      if (!audioStream) {\n        logger.error(\n          \"\\u274C No Audio Stream Found, use enableAudio to enable audio first before resuming\"\n        );\n        return;\n      }\n      const track = audioStream.getAudioTracks()[0];\n      if (!track) {\n        logger.error(\n          \"\\u274C No Audio Track Found, use enableAudio to enable audio first before resuming\"\n        );\n        return;\n      }\n      const producer = this.getProducerWithLabel(\"audio\");\n      if (!producer) {\n        throw new Error(\"\\u274C Cannot Resume Audio, Producer not found\");\n      }\n      producer.resume();\n      this.socket.publish(\"resumeProducer\", {\n        producerId: producer.id\n      });\n      this.emit(\"stream-playable\", {\n        label: \"audio\",\n        producer\n      });\n    } catch (error) {\n      logger.error(\"Error Resuming Audio\", error);\n      await this.disableAudio();\n      throw error;\n    }\n  };\n  /**\n   * Stops the underlying producing of a screen-share stream, stops the local track and closes the producer\n   *\n   * `NOTE: This will notify all the RemotePeers that this producer has stopped producing and they should stop consuming it. if you have joined the room, else it will just close the stream`\n   */\n  stopScreenShare = async () => {\n    try {\n      this.stopProducing({\n        label: \"screen-share-video\"\n      });\n      this.stopProducing({\n        label: \"screen-share-audio\"\n      });\n    } catch (error) {\n      logger.error(\"Error Disabling Screen Share\", error);\n    }\n  };\n  /**\n   * Consumes a stream with the producerId and peerId of the RemotePeer, appData is application level custom data which\n   * can be added to the consumer for the LocalPeer, this data will be available in the consumer object and can be used only by the LocalPeer.\n   *\n   * `NOTE: This will not notify the RemotePeers that you are consuming a stream, you have to notify them manually`\n   * @summary Every time a RemotePeer is producing a Media in the Room, LocalPeer will be notified about it and it will be able to consume it.\n   * Consuming is a process where the media is received from the RemotePeer and the stream can be played on the LocalPeers device.\n   *\n   * To get the consumer back you can use\n   *\n   * const remotePeer = this.room.getRemotePeerById(data.peerId);\n   *\n   * `remotePeer.on('stream-playable', ({ label: string; consumer: Consumer }) => {})`\n   *\n   * @param data - {peerId: string, label: string, appData: Record<string, unknown>}\n   * @throws { Error } - If Consuming Stream Failed\n   */\n  consume = (0,_chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_8__.checkPermissions)({\n    canConsume: true\n  }).validate(\n    async (data) => {\n      const remotePeer = this.__remotePeers.get(data.peerId);\n      if (!remotePeer) {\n        throw new Error(`Remote Peer Not Found with PeerId ${data.peerId}`);\n      }\n      const labelData = remotePeer.getLabelData(data.label);\n      if (!labelData) {\n        throw new Error(\n          `Remote Peer is not producing with Label ${data.label}`\n        );\n      }\n      const consumerExists = remotePeer.getConsumer(data.label);\n      if (consumerExists?.consuming) {\n        logger.warn(\"\\u{1F514} Consumer Already Exists with label \", data.label);\n        return consumerExists;\n      }\n      const pendingPromise = this.__pendingConsumerTasks.get(\n        labelData?.producerId\n      );\n      if (pendingPromise) {\n        logger.warn(\n          `\\u{1F514} Consumer Task Pending to be Consumed with label ${data.label}, Returning`\n        );\n        const consumer2 = await pendingPromise;\n        return consumer2;\n      }\n      logger.info(\"\\u{1F514} Consuming Stream with label \", data.label);\n      if (!this.__recvTransport) {\n        logger.info(\n          \"\\u{1F514} Recv Transport Not Initialized, Creaitng RecvTransport\"\n        );\n        await this.__createTransportOnServer({\n          transportType: \"recv\"\n        });\n      }\n      const consumerPromise = new Promise((resolve, reject) => {\n        const resolveConsumer = (streamData) => {\n          if (streamData.label === data.label) {\n            remotePeer.off(\"stream-playable\", resolveConsumer);\n            remotePeer.off(\"stream-available\", resolveConsumer);\n            const consumer2 = remotePeer.getConsumer(data.label);\n            if (!consumer2) {\n              reject(new Error(\"\\u274C Consumer Not Found\"));\n            } else {\n              if (consumer2.paused) {\n                remotePeer.emit(\"stream-paused\", {\n                  label: data.label,\n                  peerId: consumer2.producerPeerId,\n                  producerId: consumer2.producerId\n                });\n              }\n              resolve(consumer2);\n            }\n          }\n        };\n        remotePeer.once(\"stream-playable\", resolveConsumer);\n        remotePeer.once(\"stream-available\", resolveConsumer);\n        this.socket.publish(\"consume\", {\n          appData: data.appData,\n          producerId: labelData.producerId,\n          producerPeerId: data.peerId\n        });\n      });\n      this.__pendingConsumerTasks.set(labelData.producerId, consumerPromise);\n      const consumer = await consumerPromise.catch((error) => {\n        logger.error(\"\\u274C Error Consuming Stream\");\n        logger.error(error);\n        throw error;\n      }).finally(() => {\n        this.__pendingConsumerTasks.delete(labelData.producerId);\n      });\n      return consumer;\n    }\n  );\n  /**\n   * Stops the underlying consuming of a stream for a particular label\n   *\n   * `NOTE: This does not notify the remote peers that you are not consuming a stream`\n   *\n   * @param data\n   */\n  stopConsuming = (data) => {\n    const remotePeer = this.room.getRemotePeerById(data.peerId);\n    if (!remotePeer.hasLabel(data.label)) {\n      logger.error(\n        `\\u274C Remote Peer is not producing anything with label: ${data.label}`\n      );\n      return;\n    }\n    const consumer = this.recvTransport.getConsumer(data);\n    if (!consumer) {\n      logger.error(\"\\u274C Consumer Not Found\", data);\n      return;\n    }\n    if (!consumer.consuming) {\n      logger.error(\"\\u274C You are not Consuming any Stream, Consumer Not Found\");\n      return;\n    }\n    const consumerId = consumer.id;\n    if (!consumerId) {\n      logger.error(\"\\u274C ConsumerId Not Found\");\n      return;\n    }\n    this.socket.publish(\"closeConsumer\", {\n      consumerId: consumer.id\n    });\n    remotePeer.emit(\"stream-closed\", {\n      label: data.label\n    });\n    this.recvTransport.closeConsumer(data);\n  };\n  /**\n   * Activate Sending and Receving Volatile Messages, which uses WebRTC DataChannels over UDP\n   * to send messages to the RemotePeers in the Room, this is faster than sending messages over WebSockets and has much lower Rate Limiting\n   * Prefer using this for sending burst messages to the RemotePeers in the Room\n   * @returns { ok: boolean, error?: Error } - error will be present if failed to activate volatile messaging\n   */\n  __activateVolatileMessaging = async () => {\n    try {\n      logger.info(\"\\u{1F514} Activating Volatile Messages\");\n      const ongoingTask = this.__pendingTasks.get(\"volatileMessaging\");\n      if (ongoingTask) {\n        logger.debug(\"\\u{1F514} Already Activating Volatile Message\");\n        await ongoingTask;\n        return {\n          ok: true\n        };\n      }\n      const botDataConsumer = this.__sendTransport?.dataConsumers.get(\"bot\");\n      if (botDataConsumer) {\n        logger.debug(\"\\u{1F514} Bot Data Consumer Already Exists\");\n        return {\n          ok: true\n        };\n      }\n      const ongoingActiveSpeakerPromise = this.__pendingTasks.get(\"volatileMessaging\");\n      if (ongoingActiveSpeakerPromise) {\n        logger.debug(\"\\u{1F514} Bot Data Consumer Task Pending\");\n        await ongoingActiveSpeakerPromise;\n        return {\n          ok: true\n        };\n      }\n      const fn = async () => {\n        if (!this.__recvTransport) {\n          await this.__createTransportOnServer({\n            transportType: \"recv\"\n          });\n        }\n        if (!this.__sendTransport) {\n          await this.__createTransportOnServer({\n            transportType: \"send\"\n          });\n        }\n        await this.__createDataProducer({\n          label: \"bot\",\n          maxRetransmits: 3,\n          ordered: false\n        });\n      };\n      const promise = fn();\n      this.__pendingTasks.set(\"volatileMessaging\", promise);\n      await promise;\n      return {\n        ok: true\n      };\n    } catch (error) {\n      logger.error(\n        \"\\u274C Error Activating Speakers Notification Functionality\",\n        error\n      );\n      return {\n        ok: false,\n        error: new Error(\n          `Error: Activating Speakers Notification Functionality, ${error}`\n        )\n      };\n    }\n  };\n  /**\n   * Send Data Gives the functionality to send data to other remote peers or the whole room,\n   * NOTE: This will be sent over WebSockets which are over TCP which will be slower and can be rate limited.\n   * @returns { success: boolean, error?: string } - error will be present if failed to send data\n   */\n  sendData = (0,_chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_8__.checkPermissions)({\n    canSendData: true\n  }).validate(\n    async (data) => {\n      try {\n        if ((0,_chunk_WA3QABYS_js__WEBPACK_IMPORTED_MODULE_7__.estimateSize)(data.payload) > MAX_DATA_MESSAGE_SIZE) {\n          logger.error(\"\\u274C Data message exceeds 1kb in size\");\n          return {\n            success: false,\n            error: \"Data message exceeds 1kb in size\"\n          };\n        }\n        const parsedTo = data.to === \"*\" ? [\"*\"] : data.to;\n        this.socket.publish(\"sendData\", {\n          to: parsedTo,\n          payload: data.payload,\n          label: data.label\n        });\n        return {\n          success: true\n        };\n      } catch (error) {\n        logger.error(\"\\u274C Error Sending Data\");\n        logger.error(error);\n        return {\n          success: false,\n          error: \"Error Sending Data\"\n        };\n      }\n    }\n  );\n  /**\n   * Send Volatile Data Gives the functionality to send data to other remote peers or the whole room,\n   * NOTE: This will be sent over WebRTC DataChannels which are over UDP which will be faster and can be rate limited.\n   * @returns { ok: boolean } - if the volatile data was sent, cannot guarantee if the data was received as its over UDP\n   */\n  sendVolatileData = (0,_chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_8__.checkPermissions)({\n    canSendData: true\n  }).validate(async (data) => {\n    try {\n      if (!this.joined) {\n        throw new Error(\n          \"\\u274C Cannot Send Volatile Data, You have not joined the room yet\"\n        );\n      }\n      if (!this.peerId) {\n        throw new Error(\"\\u274C Cannot Send Volatile Data, PeerId Not Found\");\n      }\n      if ((0,_chunk_WA3QABYS_js__WEBPACK_IMPORTED_MODULE_7__.estimateSize)(data) > MAX_DATA_MESSAGE_SIZE) {\n        logger.error(\"\\u274C Data message exceeds 1kb in size\");\n        return;\n      }\n      this.room.bot?.sendData({\n        from: this.peerId,\n        label: data.label,\n        payload: data.payload,\n        to: \"*\"\n      });\n    } catch (error) {\n      logger.error(\"\\u274C Error Sending Volatile Data\", error);\n    }\n  });\n  /**\n   * Send Message to update the metadata of the Local Peer\n   *\n   * `NOTE: This will notify every user in the room about the metadata update`\n   *\n   * @emits `localPeer.on(metadata-updated)` on succesful metadata update\n   *\n   * @throws { Error } - if unable to update Metadata for the peer.\n   */\n  updateMetadata = (0,_chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_8__.checkPermissions)({\n    canUpdateMetadata: true\n  }).validate(async (data) => {\n    if (!this.joined) {\n      logger.error(\n        \"\\u274C Cannot Update Metadata, You have not joined the room yet\"\n      );\n      return;\n    }\n    const peerId = this.peerId;\n    if (!peerId) {\n      logger.error(\"\\u274C Cannot Update Metadata, PeerId Not Found\");\n      return;\n    }\n    const newMetadata = JSON.stringify(data);\n    this.socket.publish(\"updatePeerMetadata\", {\n      peerId,\n      metadata: newMetadata\n    });\n  });\n  /**\n   * Update the role of the Remote Peer in the Room, this will emit an event `updated` with the updated role.\n   *\n   * @emits `localPeer.on('role-updated') in case role update was successful.\n   */\n  updateRole = (data) => {\n    try {\n      if (!this.joined) {\n        throw new Error(\n          \"\\u274C Cannot Update Role, You have not joined the room yet\"\n        );\n      }\n      if (data.role === this.role) {\n        logger.warn(\"\\u{1F514} Peer Role is already set to\", data.role);\n        return;\n      }\n      if (!this.peerId) {\n        logger.error(\n          \"\\u274C Cannot Update Role, PeerId Not Found, (You have not joined the room yet)\"\n        );\n        return;\n      }\n      this.socket.publish(\"updatePeerRole\", {\n        peerId: this.peerId,\n        role: data.role,\n        options: data.options\n      });\n    } catch (error) {\n      logger.error(\"\\u{1F514} Error Updating Role\", data);\n      logger.error(error);\n    }\n  };\n  __handler = {\n    error: (data) => {\n      logger.error(\"\\u274C Error Event\");\n      logger.error(data);\n    },\n    /**\n     * When Huddle01 Node has successfully accepted the connection request\n     * it sents back some usefull metadata for the client to use\n     * at this point the socket is assumed to the connected and the localPeer is ready to join the room\n     *\n     * @param data - Data from server { peerId }\n     */\n    hello: (data) => {\n      logger.info(\"\\u2705 Hello From Server, Connection Success\", data);\n      const { acl, peerId } = data;\n      this.peerId = peerId;\n      this.room.sessionId = data.sessionId;\n      this.__permissions.updatePermissions(data.acl);\n      if (data.role) this.__permissions.role = data.role;\n      this.emit(\"permissions-updated\", {\n        permissions: acl,\n        role: data.role\n      });\n      if (data.metadata) {\n        this.__updateMetadata(data.metadata);\n      }\n    },\n    waitingRoom: (data) => {\n      logger.info(\"\\u{1F514} Waiting Room\", data);\n      this.room.emit(\"room-waiting\", data);\n    },\n    /**\n     * @description Uponn successful joining of the room, the server sends back some usefull metadata such as remotePeers in the room.\n     * @emits \"room-joined\" - When the client has successfully joined the room.\n     * @emits \"join-error\" - When the client has failed to join the room.\n     * @param data - Data from server { roomId, roomInfo, routerRTPCapabilities, turnServer }\n     */\n    connectRoomResponse: async (data) => {\n      logger.info(\"\\u2705 Join Success Event\");\n      try {\n        const { roomInfo, routerRTPCapabilities, turnServers } = data;\n        this.room.config = roomInfo.config;\n        this.room.metadata = roomInfo.metadata ?? \"{}\";\n        this.room.stats.startTime = roomInfo.startTime;\n        const deviceType = (0,mediasoup_client__WEBPACK_IMPORTED_MODULE_11__.detectDevice)();\n        if (!deviceType && !this.__handlerFactory) {\n          logger.error(\n            \"\\u274C Device is not supported, valid devices are : 'Chrome111' | 'Chrome74' | 'Chrome70' | 'Chrome67' | 'Chrome55' | 'Firefox60' | 'Safari12' | 'Safari11' | 'Edge11' | 'ReactNativeUnifiedPlan' | 'ReactNative'\"\n          );\n          throw new Error(\"\\u274C Device is not supported\");\n        }\n        this.__device = new mediasoup_client__WEBPACK_IMPORTED_MODULE_11__.Device({\n          handlerName: deviceType,\n          handlerFactory: this.__handlerFactory\n        });\n        const parsedRouterRtpCapabilites = (0,_chunk_2OLUNNR5_js__WEBPACK_IMPORTED_MODULE_1__.parseRouterRtpCapabilities)({\n          codecs: routerRTPCapabilities.codecs,\n          headerExtensions: routerRTPCapabilities.headerExtensions\n        });\n        await this.__device.load({\n          routerRtpCapabilities: parsedRouterRtpCapabilites\n        });\n        if (!this.device.loaded) {\n          throw new Error(\"\\u274C Cannot Load Device\");\n        }\n        this.emit(\"device-created\", { device: this.__device });\n        this.__setRemotePeers(roomInfo);\n        this.__setLobbyPeers(roomInfo);\n        if (turnServers?.length) {\n          logger.info(\"\\u{1F514} Setting Turn Server\", turnServers);\n          this.__turn = [...turnServers, ...this.__turn];\n        }\n        this.room.state = \"connected\";\n        this.joined = true;\n        this.room.emit(\"room-joined\");\n      } catch (error) {\n        logger.error(\"\\u274C Error Joining Room\");\n        logger.error(error);\n        this.room.emit(\"room-joined-failed\", {\n          message: \"\\u274C Error Joining Room\",\n          status: \"ROOM_ERRORED\"\n        });\n      }\n      this.__handleWaitingToProduce();\n    },\n    /**\n     * @description update the remote peers in the room , remove the remote peers which are not in the room anymore\n     * @param roomInfo\n     */\n    syncMeetingStateResponse: async (data) => {\n      try {\n        logger.info(\"\\u2705 Client recovered after reconnecting\", data);\n        const { peers: latestPeers } = data.roomInfo;\n        const latestPeersSet = new Set(latestPeers.map((p) => p.peerId));\n        for (const [peerId, peer] of this.__remotePeers.entries()) {\n          if (!latestPeersSet.has(peerId)) {\n            for (const label of peer.labels) {\n              this.__closeRemotePeerConsumer({\n                peerId,\n                label\n              });\n            }\n            peer.close();\n            this.__remotePeers.delete(peerId);\n            this.room.emit(\"peer-left\", {\n              peerId,\n              metadata: peer.getMetadata(),\n              role: peer.role\n            });\n            continue;\n          }\n          const latestPeerInfo = latestPeers.find((p) => p.peerId === peerId);\n          if (!latestPeerInfo) continue;\n          const newProducerSet = new Set(\n            latestPeerInfo.producers.map((p) => p.label)\n          );\n          for (const label of peer.labels) {\n            if (!newProducerSet.has(label)) {\n              this.__closeRemotePeerConsumer({ peerId, label });\n            }\n          }\n          const currentProducerSet = new Set(peer.producerIds);\n          for (const producer of latestPeerInfo.producers) {\n            const addLabelData = () => {\n              return peer._addLabelData({\n                producerId: producer.id,\n                label: producer.label\n              });\n            };\n            if (!currentProducerSet.has(producer.id)) {\n              if (!this.__recvTransport || this.__recvTransport.connectionState === \"new\" || this.__recvTransport.connectionState === \"connected\") {\n                addLabelData();\n              } else {\n                this.__waitingToConsume.push(addLabelData);\n              }\n            } else {\n              const consumer = peer.getConsumer(producer.label);\n              const val = producer.paused ? consumer?.pause() : consumer?.resume();\n              if (val && producer.paused) {\n                peer.emit(\"stream-paused\", {\n                  label: producer.label,\n                  peerId,\n                  producerId: producer.id\n                });\n              } else if (val && !producer.paused && consumer) {\n                peer.emit(\"stream-playable\", {\n                  consumer,\n                  label: producer.label\n                });\n              }\n            }\n          }\n        }\n        const filteredPeers = latestPeers.filter(\n          (latestPeer) => !this.__remotePeers.has(latestPeer.peerId) && latestPeer.peerId !== this.peerId\n        ).values();\n        for (const latestPeer of filteredPeers) {\n          const remotePeer = new RemotePeer_default({\n            peerId: latestPeer.peerId,\n            role: latestPeer.role,\n            metadata: latestPeer.metadata\n          });\n          this.__remotePeers.set(latestPeer.peerId, remotePeer);\n          const remoteProducers = latestPeer.producers;\n          for (const p of remoteProducers) {\n            const addLabelData = () => {\n              return remotePeer._addLabelData({\n                producerId: p.id,\n                label: p.label\n              });\n            };\n            if (!this.__recvTransport || this.__recvTransport.connectionState === \"new\" || this.__recvTransport.connectionState === \"connected\") {\n              addLabelData();\n            } else {\n              this.__waitingToConsume.push(addLabelData);\n            }\n          }\n          this.room.emit(\"new-peer-joined\", { peer: remotePeer });\n        }\n      } catch (error) {\n        logger.error(\"\\u274C Error Syncing Meeting State, Can't Recover\");\n        logger.error(error);\n      }\n    },\n    /**\n     * Upon creation of server side transport, the server sends back some usefull metadata for the client to use\n     * to create a client side transport, i.e. `send | recv` Transport.\n     * @param data - Data from server { transportSDPInfo, transportType }\n     */\n    createTransportOnClient: async (data) => {\n      try {\n        const device = this.device;\n        if (!this.peerId) {\n          throw new Error(\n            \"\\u274C Cannot Create Transport, No PeerId Found for the user.\"\n          );\n        }\n        const transport = _chunk_OR44Z542_js__WEBPACK_IMPORTED_MODULE_0__.Transport_default.create({\n          device,\n          peerId: this.peerId,\n          socket: this.socket,\n          sdpInfo: data.transportSDPInfo,\n          iceServers: this.__turn,\n          transportType: data.transportType\n        });\n        if (transport.transportType === \"send\") {\n          this.__sendTransport = transport;\n          this.__sendTransport.mediasoupTransport.on(\n            \"connectionstatechange\",\n            (connectionState) => {\n              if (connectionState === \"connected\") {\n                this.__handleWaitingToProduce();\n              }\n            }\n          );\n          this.emit(\"new-send-transport\", {\n            transport\n          });\n        }\n        if (transport.transportType === \"recv\") {\n          this.__recvTransport = transport;\n          this.__recvTransport.mediasoupTransport.on(\n            \"connectionstatechange\",\n            (connectionState) => {\n              if (connectionState === \"connected\") {\n                this.__handleWaitingToConsume();\n              }\n            }\n          );\n          this.emit(\"new-recv-transport\", {\n            transport\n          });\n        }\n      } catch (error) {\n        logger.error(\n          \"\\u274C Error Creating MediasoupTransport On Client, transportType\",\n          data.transportType\n        );\n        logger.error(error);\n      }\n    },\n    /**\n     * !Important\n     * When the server has successfully connected the transport, it sends a ack back to the client\n     * which handles the callback() function which triggers the process of creation of producer and consumer\n     * for reference see: packages/nezuko/src/Transport.ts\n     * @param data\n     */\n    connectTransportResponse: async (data) => {\n      logger.info(\n        `\\u2705 Connect ${data.transportType} Transport On Server Response`\n      );\n      try {\n        const transportType = data.transportType;\n        const transport = transportType === \"send\" ? this.__sendTransport : this.__recvTransport;\n        if (!transport) {\n          throw new Error(`${transportType} Transport Not Initialized`);\n        }\n        transport.emit(\"connectTransportResponse\");\n      } catch (error) {\n        logger.error(\"\\u274C Error Connecting Transport On Server Response\");\n        logger.error(error);\n      }\n    },\n    produceResponse: async (data) => {\n      logger.info(\"\\u2705 Produce Response\", data);\n      try {\n        const { peerId, producerId, label } = data;\n        if (peerId === this.peerId) {\n          this.sendTransport.resolvePendingProducerTask({\n            id: producerId,\n            label,\n            peerId\n          });\n        } else {\n          const remotePeer = this.room.getRemotePeerById(peerId);\n          if (!this.__recvTransport || this.__recvTransport.connectionState === \"new\" || this.__recvTransport.connectionState === \"connected\") {\n            remotePeer._addLabelData({\n              producerId,\n              label\n            });\n          } else {\n            this.__waitingToConsume.push(\n              () => remotePeer._addLabelData({\n                producerId,\n                label\n              })\n            );\n          }\n        }\n      } catch (error) {\n        logger.error(\"\\u274C Error Produce Response\");\n        logger.error(error);\n      }\n    },\n    consumeResponse: async (data) => {\n      logger.info(\"\\u2705 Consume Response\", data);\n      try {\n        const remotePeer = this.room.getRemotePeerById(data.producerPeerId);\n        if (!remotePeer.hasLabel(data.label)) {\n          logger.error(\"\\u274C Remote Peer is not producing this label\", {\n            label: data.label\n          });\n          throw new Error(\n            `\\u274C Remote Peer is not producing this label: ${data.label}`\n          );\n        }\n        const { consumer } = await this.recvTransport.consume({\n          ...data,\n          kind: data.kind,\n          producerPaused: data?.producerPaused ?? false,\n          rtpParameters: {\n            codecs: data.rtpParameters.codecs,\n            mid: data.rtpParameters.mid,\n            encodings: data.rtpParameters.encodings,\n            headerExtensions: data.rtpParameters.headerExtensions,\n            rtcp: data.rtpParameters.rtcp\n          }\n        });\n        this.socket.publish(\"resumeConsumer\", {\n          consumerId: data.consumerId,\n          producerPeerId: data.producerPeerId\n        });\n        if (data?.producerPaused === false) {\n          consumer.resume();\n          this.room.emit(\"stream-added\", {\n            label: consumer.label,\n            peerId: data.producerPeerId\n          });\n          remotePeer.emit(\"stream-playable\", {\n            consumer,\n            label: consumer.label\n          });\n        } else {\n          consumer.pause();\n          remotePeer.emit(\"stream-available\", {\n            label: data.label,\n            labelData: {\n              producerId: data.producerId\n            }\n          });\n        }\n      } catch (error) {\n        logger.error(\"\\u274C Error Consume Response\");\n        logger.error(error);\n        this.__pendingConsumerTasks.delete(data.producerId);\n      }\n    },\n    resumeProducerSuccess: async (data) => {\n      try {\n        logger.info(\"\\u2705 Producer Resumed\", data);\n        if (data.peerId === this.peerId) return;\n        const { peerId, label } = data;\n        const remotePeer = this.room.getRemotePeerById(peerId);\n        const consumer = this.recvTransport.getConsumer({ label, peerId });\n        if (consumer && consumer.producerId === data.producerId) {\n          consumer?.resume();\n          remotePeer.emit(\"stream-playable\", {\n            label,\n            consumer\n          });\n        }\n      } catch (error) {\n        logger.error(\"\\u274C Error Resuming Producer\", error);\n      }\n    },\n    pauseProducerSuccess: async (data) => {\n      try {\n        logger.info(\"\\u2705 Producer Paused\", data);\n        if (data.peerId === this.peerId) return;\n        const { peerId, label, producerId } = data;\n        const remotePeer = this.room.getRemotePeerById(peerId);\n        const consumer = this.recvTransport.getConsumer({ label, peerId });\n        if (consumer && consumer.producerId === producerId) {\n          consumer?.pause();\n          remotePeer.emit(\"stream-paused\", {\n            label,\n            producerId,\n            peerId\n          });\n        }\n      } catch (error) {\n        logger.error(\"\\u274C Error Pausing Producer\", error);\n      }\n    },\n    closeProducerSuccess: async (data) => {\n      logger.info(\"\\u2705 Producer Closed\", data);\n      if (this.peerId === data.peerId) return;\n      const { peerId, label } = data;\n      try {\n        this.__closeRemotePeerConsumer({\n          peerId,\n          label\n        });\n      } catch (err) {\n        logger.error(\"\\u274C Error Closing Producer\");\n        logger.error(err);\n      }\n    },\n    closeConsumerSuccess: async (data) => {\n      logger.info(\"\\u2705 Consumer Closed, \", data);\n    },\n    restartTransportIceResponse: async (data) => {\n      const { transportType, iceParameters } = data;\n      logger.info(\"\\u2705 Restart Transport Ice Response \", transportType);\n      const transport = transportType === \"send\" ? this.__sendTransport : this.__recvTransport;\n      if (!transport) {\n        logger.error(`\\u274C ${transportType} Transport Not Found`);\n        return;\n      }\n      try {\n        await transport.mediasoupTransport.restartIce({\n          iceParameters\n        });\n        logger.info(\"\\u2705 Restarted Ice for type: \", transportType);\n        this.emit(\"ice-transport-restarted\");\n      } catch (error) {\n        logger.error(\"\\u274C Error Restarting Ice for type: \", transportType);\n        logger.error(error);\n      }\n    },\n    consumeDataResponse: async (data) => {\n      logger.info(\"\\u2705 Consume Data Response, label\", data.label);\n      try {\n        const {\n          id,\n          peerId,\n          dataProducerId,\n          label,\n          protocol,\n          sctpStreamParameters\n        } = data;\n        if (label === \"bot\") {\n          const dataProducer = this.sendTransport.dataProducers.get(\"bot\");\n          const dataConsumer = await this.recvTransport.consumeData({\n            id,\n            dataProducerId,\n            label,\n            peerId,\n            protocol,\n            sctpStreamParameters,\n            appData: {}\n          });\n          const bot = new _chunk_6MHHX2FW_js__WEBPACK_IMPORTED_MODULE_5__.Bot_default({ dataConsumer, dataProducer });\n          const defaultSize = this.room.defaultActiveSpeakerSize;\n          this.room.bot = bot;\n          if (this.room.defaultActiveSpeakerSize > 0) {\n            this.room.activeSpeakers = new _chunk_WBDUVCNE_js__WEBPACK_IMPORTED_MODULE_2__.ActiveSpeakers_default({\n              bot,\n              size: defaultSize\n            });\n          }\n          this.__pendingTasks.delete(\"volatileMessaging\");\n        }\n      } catch (error) {\n        logger.error(\"\\u274C Error: Consume Data Response\", error);\n      }\n    },\n    produceDataResponse: async (data) => {\n      logger.info(\"\\u2705 Produce Data Response consumerIdFromServer\", data.id);\n      try {\n        const { peerId, dataProducerId, label } = data;\n        if (peerId === this.peerId) {\n          this.sendTransport.resolvePendingProducerTask({\n            id: dataProducerId,\n            label,\n            peerId\n          });\n          const ongoinProducerTask = this.__pendingTasks.get(\"volatileMessaging\");\n          await ongoinProducerTask;\n          if (label === \"bot\") {\n            console.info(\n              \"\\u{1F514} Bot Data Producer Created, Label 'bot'\",\n              this.sendTransport.dataProducers\n            );\n            const dataProducer = this.sendTransport.dataProducers.get(\"bot\");\n            const dataConsumer = await this.recvTransport.consumeData({\n              id: data.id,\n              dataProducerId,\n              peerId,\n              label,\n              protocol: data.protocol,\n              sctpStreamParameters: data.sctpStreamParameters,\n              appData: {}\n            });\n            const defaultSize = this.room.defaultActiveSpeakerSize;\n            this.room.bot = new _chunk_6MHHX2FW_js__WEBPACK_IMPORTED_MODULE_5__.Bot_default({ dataConsumer, dataProducer });\n            if (this.room.defaultActiveSpeakerSize > 0) {\n              this.room.activeSpeakers = new _chunk_WBDUVCNE_js__WEBPACK_IMPORTED_MODULE_2__.ActiveSpeakers_default({\n                bot: this.room.bot,\n                size: defaultSize\n              });\n            }\n            this.__pendingTasks.delete(\"volatileMessaging\");\n          }\n          return;\n        }\n        return;\n      } catch (error) {\n        logger.error(\"\\u274C Error Produce Data Response\");\n        logger.error({ error });\n      }\n    },\n    newPeerJoined: (data) => {\n      if (this.peerId === data.peerId) return;\n      logger.info(\"\\u2705 New Peer Joined\", { data });\n      try {\n        const { peerId, role, metadata } = data;\n        if (!peerId) {\n          return;\n        }\n        const remotePeer = new RemotePeer_default({\n          peerId,\n          role,\n          metadata\n        });\n        this.__remotePeers.set(peerId, remotePeer);\n        const lobbyPeers = this.room.lobbyPeersMap;\n        if (lobbyPeers.has(peerId)) {\n          lobbyPeers.delete(peerId);\n          this.room.lobbyPeersMap = lobbyPeers;\n        }\n        this.room.emit(\"new-peer-joined\", { peer: remotePeer });\n      } catch (error) {\n        logger.error(\"\\u274C Error New Peer Joined\");\n        logger.error(error);\n      }\n    },\n    newLobbyPeer: (data) => {\n      try {\n        logger.info(\"\\u2705 New Lobby Peer\", { data });\n        const parsedData = data;\n        this.room.newlobbyPeers = [parsedData];\n      } catch (error) {\n        logger.error(\"\\u274C Error New Lobby Peer\");\n        logger.error(error);\n      }\n    },\n    newPermissions: (data) => {\n      try {\n        const parsedData = data.acl;\n        this.__permissions.updatePermissions(parsedData);\n        this.emit(\"permissions-updated\", {\n          permissions: this.permissions\n        });\n      } catch (error) {\n        logger.error(\"\\u274C Error Updating Permissions\");\n        logger.error(error);\n      }\n    },\n    newRoomControls: (data) => {\n      logger.info(\"\\u2705 Received New Room Controls\", { data });\n      try {\n        const { controls } = data;\n        this.room.config = controls;\n        this.room.emit(\"room-controls-updated\");\n      } catch (error) {\n        logger.error(\"\\u274C Error Updating Room Controls\");\n        logger.error(error);\n      }\n    },\n    newPeerRole: (data) => {\n      logger.info(\"\\u2705 Received New Peer's Role\", { data });\n      try {\n        const { peerId, role } = data;\n        if (peerId === this.peerId) {\n          logger.info(\"\\u2705 Updating Local Peer's Role\");\n          this.__permissions.role = role;\n          this.emit(\"role-updated\", {\n            role\n          });\n          return;\n        }\n        const remotePeer = this.room.getRemotePeerById(peerId);\n        const prevRole = remotePeer.role ?? \"\";\n        remotePeer.role = role;\n        this.room.emit(\"room-role-updated\", {\n          peerId,\n          newRole: role,\n          prevRole\n        });\n      } catch (error) {\n        logger.error(\"\\u274C Error Updating Peer's Role\");\n        logger.error(error);\n      }\n    },\n    roomClosedProducers: (data) => {\n      logger.info(\"\\u2705 Received Room's Closed Producers\", { data });\n      try {\n        const { producers, reason } = data;\n        for (const producer of producers) {\n          const { label, peerId } = producer;\n          if (peerId === this.peerId && label) {\n            this.stopProducing({ label });\n            continue;\n          }\n          try {\n            const remotePeer = this.room.getRemotePeerById(peerId);\n            const consumer = this.recvTransport.getConsumer({\n              label,\n              peerId\n            });\n            if (consumer) {\n              this.recvTransport.closeConsumer({ label, peerId });\n              remotePeer._removeLabelData(label);\n              this.room.emit(\"stream-closed\", {\n                label,\n                peerId\n              });\n            }\n          } catch (error) {\n            logger.error(\"\\u274C Error Closing Producer\");\n            logger.error(error);\n          }\n        }\n        this.room.emit(\"room-notification\", {\n          code: reason?.code ?? 4004,\n          message: reason?.message ?? \"Room Closed\",\n          tag: reason?.tag ?? \"ROOM_CLOSED\"\n        });\n      } catch (error) {\n        logger.error(\"\\u274C Error Updating Room's Closed Producers\");\n        logger.error(error);\n      }\n    },\n    receiveData: (data) => {\n      logger.info(\"\\u2705 Received Data\", { data });\n      try {\n        const { from, label, payload } = data;\n        this.emit(\"receive-data\", {\n          from,\n          label,\n          payload\n        });\n      } catch (error) {\n        logger.error(\"\\u274C Error Receive Data\");\n        logger.error(error);\n      }\n    },\n    peerMetadataUpdated: (data) => {\n      try {\n        logger.info(\"\\u2705 Metadata Updated\", { data });\n        const { peerId, metadata } = data;\n        if (this.peerId === peerId) {\n          this.__updateMetadata(metadata);\n          return;\n        }\n        const remotePeer = this.room.getRemotePeerById(peerId);\n        remotePeer.metadata = JSON.parse(metadata);\n      } catch (error) {\n        logger.error(\"\\u274C Error Updating Metadata\");\n        logger.error(error);\n      }\n    },\n    roomMetadataUpdated: (data) => {\n      logger.info(\"\\u2705 Room Metadata Updated\", { data });\n      try {\n        const { metadata } = data;\n        this.room.metadata = metadata;\n      } catch (error) {\n        logger.error(\"\\u274C Error Updating Room Metadata\");\n        logger.error(error);\n      }\n    },\n    peerLeft: (data) => {\n      logger.info(\"\\u2705 Peer Left\", { peerId: data.peerId });\n      try {\n        const { peerId } = data;\n        const remotePeer = this.room.getRemotePeerById(peerId);\n        const labels = remotePeer.labels;\n        for (const label of labels) {\n          this.__closeRemotePeerConsumer({\n            peerId: remotePeer.peerId,\n            label\n          });\n        }\n        remotePeer.close();\n        this.__remotePeers.delete(peerId);\n        this.room.emit(\"peer-left\", {\n          peerId,\n          metadata: remotePeer.getMetadata(),\n          role: remotePeer.role\n        });\n      } catch (error) {\n        logger.error(\"\\u274C Error Peer Left\");\n        logger.error(error);\n      }\n    },\n    lobbyPeerLeft: (data) => {\n      logger.info(\"\\u2705 Lobby Peer Left\", { peerId: data.peerId });\n      try {\n        const { peerId } = data;\n        const lobbyPeers = this.room.lobbyPeersMap;\n        if (lobbyPeers.has(peerId)) {\n          lobbyPeers.delete(peerId);\n          this.room.lobbyPeersMap = lobbyPeers;\n        }\n      } catch (error) {\n        logger.error(\"\\u274C Error Lobby Peer's Left\");\n        logger.error(error);\n      }\n    }\n  };\n  /**\n   * @description Registers the important internal listeners for the client, events such as reconnected, room-joined etc.\n   */\n  __registerInternalListeners = () => {\n    this.room.on(\"room-joined\", () => {\n      if (this.__volatileMessaging || this.room.defaultActiveSpeakerSize > 0) {\n        this.__activateVolatileMessaging().catch((error) => {\n          logger.error(\n            \"\\u{1F534} Error while activating active speakers notification\",\n            error\n          );\n        });\n      }\n    });\n    this.socket.on(\"reconnected\", () => {\n      if (!this.joined) {\n        logger.info(\"\\u{1F514} Peer Reconnected, Peer Can Join Room\", {\n          roomState: this.room.state\n        });\n        if (this.roomId && this.room.state === \"connecting\") {\n          this.room.connect({ roomId: this.roomId });\n        }\n        return;\n      }\n      logger.info(\"\\u{1F514} LocalPeer Reconnected, Syncing Meeting States\");\n      this.__syncMeetingState();\n      if (this.__sendTransport) {\n        this.socket.publish(\"restartTransportIce\", {\n          transportId: this.__sendTransport.mediasoupTransport.id,\n          transportType: \"send\"\n        });\n      }\n      if (this.__recvTransport) {\n        this.socket.publish(\"restartTransportIce\", {\n          transportId: this.__recvTransport.mediasoupTransport.id,\n          transportType: \"recv\"\n        });\n      }\n    });\n  };\n  /**\n   * @description Creates a Producer, if send transport is not initialized, it creates one and then creates a producer\n   * @param data - Data to create a producer { label, stream, stopTrackOnClose, appData }\n   * @returns - Producer\n   */\n  __createProducer = async (data) => {\n    if (!this.__sendTransport) {\n      throw new Error(\"\\u274C Send Transport Not Initialized, Internal Error\");\n    }\n    const producer = await this.__sendTransport.produce({\n      stream: data.stream,\n      stopTrackOnClose: data.stopTrackOnClose ?? true,\n      label: data.label,\n      prefferedCodec: data.prefferedCodec,\n      appData: {\n        ...data.appData,\n        label: data.label\n      }\n    });\n    producer.on(\"transportclose\", () => {\n      this.stopProducing({ label: data.label });\n    });\n    if (!data.stream?.active) {\n      logger.error(\"\\u274C Stream is not active, Closing Producer\");\n      throw new Error(\"\\u274C Stream is not active, Closing Producer\");\n    }\n    this.emit(\"stream-playable\", {\n      label: data.label,\n      producer\n    });\n    return producer;\n  };\n  /**\n   * @description Create a DataProducer on the server, Data Producer is used to send data other than Media stream to the server\n   * @throws Error if DataProducer cannot be created\n   * @param data\n   */\n  __createDataProducer = async (data) => {\n    try {\n      if (!this.__sendTransport) {\n        throw new Error(\"\\u274C Send Transport Not Initialized, Internal Error\");\n      }\n      const dataProducer = await this.__sendTransport.produceData(data);\n      dataProducer.on(\"transportclose\", () => {\n        logger.info(\"\\u{1F514} Data Producer's Transport Closed\");\n      });\n      dataProducer.on(\"bufferedamountlow\", () => {\n        logger.info(\"\\u{1F514} Data Producer Buffered Amount Low\");\n      });\n      dataProducer.on(\"@close\", () => {\n        logger.info(\"\\u{1F514} Data Producer Closed\");\n      });\n      return dataProducer;\n    } catch (error) {\n      if (error instanceof Error) {\n        throw error;\n      }\n      logger.error(\"\\u274C Error Creating Data Producer\", error);\n      throw new Error(\"\\u274C Error Creating Data Producer\");\n    }\n  };\n  /**\n   * Create WebRTC Transport (Send/Recv) on Server\n   * @throws Error if Transport cannot be created\n   * @param data - Transport Data { transportType }\n   * @returns - Transport ( WebRTC Transport )\n   */\n  __createTransportOnServer = async (data) => {\n    const pendingPromise = this.__pendingTransportTasks.get(data.transportType);\n    if (pendingPromise) {\n      logger.info(\n        `\\u{1F514} Transport Task Already Pending for this transportType ${data.transportType}`\n      );\n      return pendingPromise;\n    }\n    const { transportType } = data;\n    const promise = new Promise((resolve, reject) => {\n      const handleNewTransport = (data2) => {\n        if (data2.transport.transportType === transportType) {\n          this.__pendingTransportTasks.delete(transportType);\n          resolve(data2.transport);\n        }\n      };\n      if (transportType === \"send\") {\n        this.once(\"new-send-transport\", handleNewTransport);\n      }\n      if (transportType === \"recv\") {\n        this.once(\"new-recv-transport\", handleNewTransport);\n      }\n      const device = this.device;\n      const transport = data.transportType === \"send\" ? this.__sendTransport : this.__recvTransport;\n      if (transport) {\n        reject(\n          new Error(`\\u274C Transport Already Initialized, type: ${transportType}`)\n        );\n      }\n      logger.info(`\\u{1F514} Creating ${data.transportType} Transport On Server`);\n      this.socket.publish(\"createTransport\", {\n        sctpCapabilities: device.sctpCapabilities,\n        transportType: data.transportType\n      });\n    });\n    this.__pendingTransportTasks.set(data.transportType, promise);\n    return promise;\n  };\n  /**\n   * Sets the Remote Peers in the Room\n   * @param roomInfo\n   */\n  __setRemotePeers = (roomInfo) => {\n    const { peers } = roomInfo;\n    for (const peer of peers) {\n      if (peer.peerId === this.peerId) continue;\n      const remotePeer = new RemotePeer_default({\n        peerId: peer.peerId,\n        metadata: peer.metadata,\n        role: peer.role\n      });\n      const producers = peer.producers;\n      this.__remotePeers.set(peer.peerId, remotePeer);\n      producers.map((p) => {\n        if (!this.__recvTransport || this.__recvTransport.connectionState === \"new\" || this.__recvTransport.connectionState === \"connected\") {\n          remotePeer._addLabelData({\n            producerId: p.id,\n            label: p.label\n          });\n        } else {\n          this.__waitingToConsume.push(\n            () => remotePeer._addLabelData({\n              producerId: p.id,\n              label: p.label\n            })\n          );\n        }\n      });\n    }\n  };\n  /**\n   * Sets the Lobby Peers in the Room\n   * @param roomInfo - RoomInfo\n   */\n  __setLobbyPeers = (roomInfo) => {\n    const { lobbyPeers } = roomInfo;\n    this.room.newlobbyPeers = lobbyPeers;\n  };\n  /**\n   * Helper Function to close the consumer of a remote peer\n   * @param data - Data to close the consumer { peerId, label }\n   */\n  __closeRemotePeerConsumer = (data) => {\n    try {\n      const { peerId, label } = data;\n      const remotePeer = this.room.getRemotePeerById(peerId);\n      remotePeer._removeLabelData(label);\n      const consumer = this.recvTransport.getConsumer({\n        label,\n        peerId\n      });\n      if (consumer) {\n        this.recvTransport.closeConsumer({ label, peerId });\n      }\n      this.room.emit(\"stream-closed\", {\n        label,\n        peerId: data.peerId\n      });\n    } catch (error) {\n      logger.error(\"\\u274C Error Closing Remote Peer's Consumer\");\n      logger.error(error);\n    }\n  };\n  /**\n   * !important\n   * Handler Function to handle the waiting to produce tasks when user is joining\n   * the room with active stream, check if the user has valid permissions and based on\n   * that allows the user to produce the stream\n   */\n  __handleWaitingToProduce = () => {\n    try {\n      const permissions = this.permissions;\n      const closeStream = (label) => {\n        const stream = this.__activeStreams.get(label);\n        if (stream) {\n          this.deviceHandler.stopStream(stream);\n          this.__activeStreams.delete(label);\n          this.emit(\"stream-closed\", {\n            label,\n            reason: {\n              code: 4444,\n              message: \"User's Permissions Denied\",\n              tag: \"CLOSED_BY_ADMIN\"\n            }\n          });\n        }\n        this.__waitingToProduce.delete(label);\n      };\n      if (!permissions.canProduce) {\n        for (const [label, _] of this.__waitingToProduce) {\n          closeStream(label);\n        }\n        this.__waitingToProduce.clear();\n        return;\n      }\n      for (const [label, pendingStreamTask] of this.__waitingToProduce) {\n        if (label === \"video\" && !permissions.canProduceSources.cam) {\n          closeStream(label);\n          continue;\n        }\n        if (label === \"audio\" && !permissions.canProduceSources.mic) {\n          closeStream(label);\n          continue;\n        }\n        pendingStreamTask().catch((error) => {\n          logger.error(\n            \"\\u274C Error Producing Stream which was waiting to be produced with label :\",\n            label\n          );\n          logger.error(error);\n          closeStream(label);\n        });\n      }\n      this.__waitingToProduce.clear();\n    } catch (error) {\n      logger.error(\"\\u274C Error Handling Waiting To Produce\");\n      logger.error(error);\n    }\n  };\n  /**\n   * Invoke the waiting to consume tasks and clear the waiting to consume array\n   */\n  __handleWaitingToConsume = () => {\n    for (const consumeTask of this.__waitingToConsume) {\n      consumeTask().catch(() => {\n        logger.error(\"Unable to Consume after ice restart\");\n      });\n    }\n    this.__waitingToConsume = [];\n  };\n  /**\n   * SyncMeetingState - Sync the Meeting State with the server, information such as new remote peer, change in producers etc.\n   */\n  __syncMeetingState = () => {\n    try {\n      const localProducerIds = this.__sendTransport?.producerIds ?? [];\n      this.socket.publish(\"syncMeetingState\", {\n        localProducerIds\n      });\n    } catch (error) {\n      logger.error(\"\\u274C Error Syncing Meeting State\", error);\n    }\n  };\n};\nvar LocalPeer_default = LocalPeer;\n\n// src/RemotePeer.ts\nvar logger2 = _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_9__.mainLogger.createSubLogger(\"RemotePeer\");\nvar RemotePeer = class extends _chunk_BW2DGP4D_js__WEBPACK_IMPORTED_MODULE_10__.EnhancedEventEmitter {\n  /**\n   * peerId of the remote peer, this is unique for each peer\n   */\n  peerId;\n  /**\n   * Stores the Metadata for the Remote Peer.\n   */\n  __metadata = \"{}\";\n  /**\n   * Stores the Role of the Remote Peer.\n   */\n  __role = null;\n  /**\n   * Labels are the unique identifier for the media stream that the remote peer is producing\n   */\n  __labelsToProducerId = /* @__PURE__ */ new Map();\n  /**\n   * Returns the list of labels that the remote peer is producing\n   */\n  get labels() {\n    return Array.from(this.__labelsToProducerId.keys());\n  }\n  get producerIds() {\n    return Array.from(this.__labelsToProducerId.values()).map(\n      (labelData) => labelData.producerId\n    );\n  }\n  /**\n   * Role of the Peer.\n   * @returns The Role of the Peer which if passed in the options when creating the token\n   */\n  get role() {\n    if (!this.__role) return null;\n    return this.__role;\n  }\n  set role(role) {\n    this.__role = role;\n    this.emit(\"role-updated\", {\n      role\n    });\n  }\n  /**\n   * Checks if the remote peer is producing the label\n   * @param label - Label to check if the remote peer is producing\n   * @returns - Returns true if the remote peer is producing the label\n   */\n  hasLabel(label) {\n    return this.__labelsToProducerId.has(label);\n  }\n  /**\n   * Returns the data associated to the label, this is the producerId\n   *\n   * @returns\n   * producerId - Unique identifier for the producer\n   */\n  getLabelData(label) {\n    return this.__labelsToProducerId.get(label);\n  }\n  /**\n   * Get the associated consumer for the label\n   * @param label - Unique identifier for the consumer e.g. `video` | `audio` | `screen-share-video` | string\n   * @returns Consumer | null\n   */\n  getConsumer(label) {\n    try {\n      const localPeer = LocalPeer_default.getInstance();\n      const consumer = localPeer.recvTransport.getConsumer({\n        label,\n        peerId: this.peerId\n      });\n      return consumer;\n    } catch (error) {\n      return null;\n    }\n  }\n  /**\n   * Returns the metadata associated to the RemotePeer\n   */\n  getMetadata() {\n    return this.__metadata;\n  }\n  /**\n   * Setter function to update the Remote Peer Metadata\n   *\n   * `NOTE: This will NOT notify other Remote Peers of the update`\n   */\n  set metadata(data) {\n    this.__metadata = data;\n    this.emit(\"metadata-updated\", {\n      metadata: data\n    });\n  }\n  /**\n   * Update the Permissions of the Remote Peer in the Room. This will emit an event `updated` with the updated permissions.\n   */\n  updatePermissions = (0,_chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_8__.checkPermissions)({\n    admin: true\n  }).validate(async (data) => {\n    try {\n      logger2.info(\"\\u{1F514} Updating Permissions\", data);\n      const localPeer = LocalPeer_default.getInstance();\n      const socket = localPeer.socket;\n      socket.publish(\"updatePeerPermission\", {\n        peerId: this.peerId,\n        permissions: data\n      });\n    } catch (error) {\n      logger2.error(\"\\u{1F514} Error Updating Permissions\");\n      logger2.error(error);\n    }\n  });\n  /**\n   * Update the role of the Remote Peer in the Room, this will emit an event `updated` with the updated role.\n   * @throws { Error } If the Peer Calling this function is not an `admin` then it will throw an error.\n   */\n  updateRole = (0,_chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_8__.checkPermissions)({\n    admin: true\n  }).validate(\n    async (data) => {\n      try {\n        logger2.info(\"\\u{1F514} Updating Peer Role\", data);\n        if (data.role === this.__role) {\n          logger2.warn(\"\\u{1F514} Role is already set to\", data.role);\n          return;\n        }\n        const localPeer = LocalPeer_default.getInstance();\n        const socket = localPeer.socket;\n        socket.publish(\"updatePeerRole\", {\n          peerId: this.peerId,\n          role: data.role,\n          options: data.options\n        });\n      } catch (error) {\n        logger2.error(\"\\u{1F514} Error Updating Role\", data);\n        logger2.error(error);\n      }\n    }\n  );\n  /**\n   * Removes all the states of the remote peer and clears memory;\n   *\n   * `NOTE`: You need to close consumers using the `recvTransport.closeConsumer` of the local peer\n   */\n  close = () => {\n    logger2.info(\"Closing Remote Peer\");\n    this.removeAllListeners();\n  };\n  constructor(data) {\n    super();\n    this.peerId = data.peerId;\n    if (data.metadata) {\n      this.metadata = JSON.parse(data.metadata);\n    }\n    if (data.role) {\n      this.__role = data.role;\n    }\n  }\n  /**\n   * @protected\n   * Add a New Label to the Remote Peer and associate it with the ProducerId\n   *\n   * `NOTE: This is used internally by the Peer`\n   *\n   * @param data - Data to add the new label `label` and the `producerId` to associate it with\n   */\n  _addLabelData = async (data) => {\n    const { label, producerId } = data;\n    this.__labelsToProducerId.set(label, { producerId });\n    try {\n      const autoConsume = _chunk_BQEIAMKZ_js__WEBPACK_IMPORTED_MODULE_3__.Room_default.getInstance().autoConsume;\n      const localPeer = LocalPeer_default.getInstance();\n      if (autoConsume) {\n        await localPeer.consume({\n          appData: {},\n          label,\n          peerId: this.peerId\n        });\n      } else {\n        this.emit(\"stream-available\", {\n          label,\n          labelData: {\n            producerId\n          }\n        });\n      }\n    } catch (error) {\n      logger2.error(\"\\u274C Error While Consuming\", {\n        label,\n        peerId: this.peerId\n      });\n      logger2.error(error);\n      this.emit(\"stream-available\", {\n        label,\n        labelData: {\n          producerId\n        }\n      });\n    }\n  };\n  /**\n   * @protected\n   * Remove a Label from the Remote Peer and emit a `stream-closed` event\n   *\n   * `NOTE: This is used internally by the Peer`\n   *\n   * @param data - Data to remove the label from the Remote Peer\n   */\n  _removeLabelData = (label, reason) => {\n    this.__labelsToProducerId.delete(label);\n    this.emit(\"stream-closed\", {\n      label,\n      reason\n    });\n  };\n};\nvar RemotePeer_default = RemotePeer;\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstUUFDSFZTN0EuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0Q7QUFDUztBQUNKO0FBQ1Y7QUFDRTtBQUNIO0FBQ1U7QUFDVztBQUM4QjtBQUNwRDtBQUNVO0FBQ0g7O0FBRXhELGFBQWEsMERBQVU7QUFDdkI7QUFDQSx5Q0FBeUMscUVBQW9CO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0EsaUJBQWlCLDREQUFZO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBLG1CQUFtQiw4REFBYztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0Esa0RBQWtEO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNC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QjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG9CQUFvQjtBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLHFCQUFxQjtBQUNyQixlQUFlLFFBQVE7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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksb0JBQW9CO0FBQ2hDLDJDQUEyQyxZQUFZO0FBQ3ZEO0FBQ0EsMEJBQTBCLDREQUFZO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsU0FBUztBQUNULFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFaUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2tlbW9uLWdhbWUtZXRoaW5kaWEtMS8uL25vZGVfbW9kdWxlcy9AaHVkZGxlMDEvd2ViLWNvcmUvZGlzdC9jaHVuay1RQUNIVlM3QS5qcz80YzI4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRyYW5zcG9ydF9kZWZhdWx0IH0gZnJvbSAnLi9jaHVuay1PUjQ0WjU0Mi5qcyc7XG5pbXBvcnQgeyBwYXJzZVJvdXRlclJ0cENhcGFiaWxpdGllcyB9IGZyb20gJy4vY2h1bmstMk9MVU5OUjUuanMnO1xuaW1wb3J0IHsgQWN0aXZlU3BlYWtlcnNfZGVmYXVsdCB9IGZyb20gJy4vY2h1bmstV0JEVVZDTkUuanMnO1xuaW1wb3J0IHsgUm9vbV9kZWZhdWx0IH0gZnJvbSAnLi9jaHVuay1CUUVJQU1LWi5qcyc7XG5pbXBvcnQgeyBTb2NrZXRfZGVmYXVsdCB9IGZyb20gJy4vY2h1bmstQjdOUExHSUUuanMnO1xuaW1wb3J0IHsgQm90X2RlZmF1bHQgfSBmcm9tICcuL2NodW5rLTZNSEhYMkZXLmpzJztcbmltcG9ydCB7IERldmljZUhhbmRsZXJfZGVmYXVsdCB9IGZyb20gJy4vY2h1bmstSERDVjJQTlcuanMnO1xuaW1wb3J0IHsgZ2V0TWVkaWFEZXZpY2VLaW5kLCBlc3RpbWF0ZVNpemUgfSBmcm9tICcuL2NodW5rLVdBM1FBQllTLmpzJztcbmltcG9ydCB7IFBlcm1pc3Npb25zX2RlZmF1bHQsIGNoZWNrUGVybWlzc2lvbnMsIGNoZWNrUHJvZHVjZVBlcm1pc3Npb25zIH0gZnJvbSAnLi9jaHVuay1FMkRVN0lJRS5qcyc7XG5pbXBvcnQgeyBtYWluTG9nZ2VyIH0gZnJvbSAnLi9jaHVuay1UT0NGT0dUQy5qcyc7XG5pbXBvcnQgeyBFbmhhbmNlZEV2ZW50RW1pdHRlciB9IGZyb20gJy4vY2h1bmstQlcyREdQNEQuanMnO1xuaW1wb3J0IHsgZGV0ZWN0RGV2aWNlLCBEZXZpY2UgfSBmcm9tICdtZWRpYXNvdXAtY2xpZW50JztcblxudmFyIGxvZ2dlciA9IG1haW5Mb2dnZXIuY3JlYXRlU3ViTG9nZ2VyKFwiTG9jYWxQZWVyXCIpO1xudmFyIE1BWF9EQVRBX01FU1NBR0VfU0laRSA9IDEgKiAxMDI0O1xudmFyIExvY2FsUGVlciA9IGNsYXNzIF9Mb2NhbFBlZXIgZXh0ZW5kcyBFbmhhbmNlZEV2ZW50RW1pdHRlciB7XG4gIC8qKlxuICAgKiBMb2NhbFBlZXIgSW5zdGFuY2UsIFNpbmdsZXRvbiBjbGFzcywgb25seSBvbmUgaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBjYW4gYmUgY3JlYXRlZFxuICAgKi9cbiAgc3RhdGljIF9faW5zdGFuY2UgPSBudWxsO1xuICAvKipcbiAgICogUGVlcklkIG9mIHRoZSBjdXJyZW50IGNsaWVudCwgc3BlY2lmaWMgdG8gdGhlIExvY2FsIFBlZXIgd2hvIGpvaW5lZCB0aGUgbWVldGluZ1xuICAgKlxuICAgKiBgTk9URTogVW50aWwgeW91IGRvbnQgam9pbiB0aGUgcm9vbSwgdGhpcyB3aWxsIGJlICpudWxsKmBcbiAgICovXG4gIHBlZXJJZCA9IG51bGw7XG4gIC8qKlxuICAgKiBDdXJyZW50IERldmljZXMgb2YgdGhlIGN1cnJlbnQgY2xpZW50XG4gICAqIGUuZy4gQ2hyb21lLCBGaXJlZm94LCBTYWZhcmksIFJlYWN0TmF0aXZlXG4gICAqL1xuICBfX2RldmljZSA9IG51bGw7XG4gIC8qKlxuICAgKiBjdXN0b20gaGFuZGxlciBmYWN0b3J5IGZvciBkZXZpY2UsIHJlcXVpcmVkIHdoZW4gdXNpbmcgYWlvcnRjIGNsaWVudCBvciBzb21ldGhpbmcgY3VzdG9tXG4gICAqL1xuICBfX2hhbmRsZXJGYWN0b3J5O1xuICAvKipcbiAgICogU2VuZFRyYW5zcG9ydCBoYW5kbGVzIHRoZSBzZW5kaW5nIG9mIG1lZGlhIGZyb20gdGhlIGNsaWVudCB0byB0aGUgc2VydmVyXG4gICAqL1xuICBfX3NlbmRUcmFuc3BvcnQgPSBudWxsO1xuICAvKipcbiAgICogUmVjdlRyYW5zcG9ydCBoYW5kbGVzIHRoZSByZWNlaXZpbmcgb2YgbWVkaWEgZnJvbSB0aGUgc2VydmVyIHRvIHRoZSBjbGllbnRcbiAgICovXG4gIF9fcmVjdlRyYW5zcG9ydCA9IG51bGw7XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSByb29tIGluc3RhbmNlLCB0aHJvd3MgYW4gZXJyb3IgaWYgdGhlIHJvb20gaXMgbm90IGNyZWF0ZWRcbiAgICpcbiAgICogQHRocm93cyB7IEVycm9yIH0gSWYgdGhlIHJvb20gaXMgbm90IGNyZWF0ZWQsIENhbGwgY3JlYXRlUm9vbSgpIG1ldGhvZCBiZWZvcmUgeW91IGNhbiBhY2Nlc3MgdGhlIHJvb20gaW4gdGhlIExvY2FsUGVlclxuICAgKi9cbiAgZ2V0IHJvb20oKSB7XG4gICAgY29uc3Qgcm9vbSA9IFJvb21fZGVmYXVsdC5nZXRJbnN0YW5jZSgpO1xuICAgIGlmICghcm9vbSkgdGhyb3cgbmV3IEVycm9yKFwiXFx1Mjc0QyBSb29tIE5vdCBJbml0aWFsaXplZFwiKTtcbiAgICByZXR1cm4gcm9vbTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdW5kZXJseWluZyBzb2NrZXQgY29ubmVjdGlvblxuICAgKiBAdGhyb3dzIHsgRXJyb3IgfSBJZiB0aGUgc29ja2V0IGNvbm5lY3Rpb24gaXMgbm90IGluaXRpYWxpemVkXG4gICAqL1xuICBnZXQgc29ja2V0KCkge1xuICAgIGNvbnN0IHNvY2tldCA9IFNvY2tldF9kZWZhdWx0LmdldEluc3RhbmNlKCk7XG4gICAgaWYgKCFzb2NrZXQpIHRocm93IG5ldyBFcnJvcihcIlxcdTI3NEMgU29ja2V0IE5vdCBJbml0aWFsaXplZFwiKTtcbiAgICByZXR1cm4gc29ja2V0O1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdGUgUGVlcnMgTWFwLCBTdG9yZXMgYWxsIHRoZSByZW1vdGUgcGVlcnNcbiAgICovXG4gIGdldCBfX3JlbW90ZVBlZXJzKCkge1xuICAgIHJldHVybiB0aGlzLnJvb20ucmVtb3RlUGVlcnM7XG4gIH1cbiAgLyoqXG4gICAqIFR1cm4gU2VydmVyIHVzZWQgZm9yIHRoaXMgY2xpZW50XG4gICAqL1xuICBfX3R1cm4gPSBbXG4gICAge1xuICAgICAgdXNlcm5hbWU6IFwidGVzdC10dXJuXCIsXG4gICAgICB1cmxzOiBcInR1cm46dHVybi5odWRkbGUwMS5jb206NDQzP3RyYW5zcG9ydD11ZHBcIixcbiAgICAgIGNyZWRlbnRpYWw6IFwidGVzdC10dXJuXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIHVzZXJuYW1lOiBcInRlc3QtdHVyblwiLFxuICAgICAgdXJsczogXCJ0dXJuOnR1cm4uaHVkZGxlMDEuY29tOjQ0Mz90cmFuc3BvcnQ9dGNwXCIsXG4gICAgICBjcmVkZW50aWFsOiBcInRlc3QtdHVyblwiXG4gICAgfVxuICBdO1xuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IGRldmljZSAoIGNocm9tZSwgZmlyZWZveCwgc2FmYXJpLCByZWFjdG5hdGl2ZSApIGZvciB0aGlzIGNsaWVudFxuICAgKlxuICAgKiBAdGhyb3dzIHsgRXJyb3IgfSBJZiB0aGUgZGV2aWNlIGlzIG5vdCBpbml0aWFsaXplZFxuICAgKi9cbiAgZ2V0IGRldmljZSgpIHtcbiAgICBpZiAoIXRoaXMuX19kZXZpY2UpIHRocm93IG5ldyBFcnJvcihcIkRldmljZSBOb3QgSW5pdGlhbGl6ZWRcIik7XG4gICAgY29uc3QgbG9hZGVkID0gdGhpcy5fX2RldmljZS5sb2FkZWQ7XG4gICAgaWYgKCFsb2FkZWQpIHRocm93IG5ldyBFcnJvcihcIkRldmljZSBOb3QgTG9hZGVkXCIpO1xuICAgIHJldHVybiB0aGlzLl9fZGV2aWNlO1xuICB9XG4gIC8vICFpbXBvcnRhbnRcbiAgLy8gQ29uc3VtZXIgY3JlYXRpb24gdGFza3MgYXdhaXRpbmcgdG8gYmUgcHJvY2Vzc2VkLlxuICAvLyBTdG9yZXMgdGhlIGxhYmxlcyBvZiB0aGUgcGVuZGluZyBjb25zdW1lcnMgeyBwcm9kdWNlcklkOiBzdHJpbmcgPT0+IFByb21pc2U8Q29uc3VtZXI+IH1cbiAgX19wZW5kaW5nQ29uc3VtZXJUYXNrcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIC8vICFpbXBvcnRhbnRcbiAgLy8gUHJvZHVjZXIgY3JlYXRpb24gdGFza3MgYXdhaXRpbmcgdG8gYmUgcHJvY2Vzc2VkLlxuICAvLyBTdG9yZXMgdGhlIGxhYmxlcyBvZiB0aGUgcGVuZGluZyBwcm9kdWNlcnMgeyBsYWJlbDogc3RyaW5nIH1cbiAgLy8gVXNlZCB0byBoYW5kbGUgdHJhbnNwb3J0IGNhbGxiYWNrcyBtb3N0IGltcG9ydGFudDtcbiAgX19wZW5kaW5nUHJvZHVjZXJUYXNrcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIC8vICFpbXBvcnRhbnRcbiAgLy8gTWFwIHRvIHN0b3JlIHBlbmRpbmcgdGFza3MsIFN0b3JlcyB0aGUgbGFiZWwgYW5kIHRoZSBwcm9taXNlIG9mIHRoZSB0YXNrXG4gIF9fcGVuZGluZ1Rhc2tzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgLyoqXG4gICAqIFBlbmRpbmcgVHJhbnNwb3J0IFRhc2tzLCBTdG9yZXMgdGhlIHRyYW5zcG9ydFR5cGUgYW5kIHRoZSBwcm9taXNlIG9mIHRoZSB0cmFuc3BvcnRcbiAgICpcbiAgICogYE5PVEU6IFVzZWZ1bCB0byBjaGVjayBpZiB0aGUgdHJhbnNwb3J0IGlzIGFscmVhZHkgYmVpbmcgY3JlYXRlZCBhbmQgcGF1c2UgYWxsIHByb2R1Y2luZ1xuICAgKiBhbmQgY29uc3VtaW5nIHVudGlsIHRoZSB0cmFuc3BvcnQgaXMgY3JlYXRlZGBcbiAgICovXG4gIF9fcGVuZGluZ1RyYW5zcG9ydFRhc2tzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgLyoqXG4gICAqIFN0b3JlcyBhbGwgdGhlIHBlbmRpbmcgZmV0Y2hpbmcgc3RyZWFtIHRhc2tzIHdoaWNoIGFyZSBhd2FpdGluZyB0byBiZSBwcm9jZXNzZWRcbiAgICogSWYgZmV0Y2hpbmcgY2FsbGVkIG11bHRpcGxlIHRpbWVzIGF0IG9uY2UsIGl0IHdpbGwgaGFuZGxlIHRoZSBjb25jdXJyZW5jeSBpc3N1ZXNcbiAgICovXG4gIF9fcGVuZGluZ0ZldGNoaW5nU3RyZWFtID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgLyoqXG4gICAqIFN0b3JlcyBhbGwgdGhlIHBlbmRpbmcgcHJvZHVjZSB0YXNrcyB3aGljaCBhcmUgYXdhaXRpbmcgdG8gYmUgcHJvY2Vzc2VkXG4gICAqIE1vc3RseSB1c2VkIHdoZW4gdGhlIHJvb20gaXMgbm90IGpvaW5lZCBhbmQgcHJvZHVjZSBmdW5jdGlvbmFsaXR5IG5lZWRzIHRvIGJlIGhhbmRsZWRcbiAgICpcbiAgICogQ2FzZXMgc3VjaCBhcyBzb2NrZXQgZXhwZXJpZW5jaW5nIGEgcmVjb25uZWN0IGFuZCBwcm9kdWNlIGlzIGNhbGxlZC5cbiAgICogT3IgaW4gdGhlIGNhc2VzIHdoZXJlIHJvb20gaXMgbm90IGpvaW5lZCBhbmQgZW5hYmxlVmlkZW8gb3IgZW5hYmxlQXVkaW8gaXMgY2FsbGVkXG4gICAqL1xuICBfX3dhaXRpbmdUb1Byb2R1Y2UgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAvKipcbiAgICogU3RvcmVzIGFsbCB0aGUgcGVuZGluZyBjb25zdW1lIHRhc2tzIHdoaWNoIGFyZSB3YWl0aW5nIGZvciByZWN2IHRyYW5zcG9ydCB0byBiZSByZS1jb25uZWN0ZWRcbiAgICovXG4gIF9fd2FpdGluZ1RvQ29uc3VtZSA9IFtdO1xuICAvKipcbiAgICogRGV2aWNlSGFuZGxlciBJbnN0YW5jZSwgSGFuZGxlcyB0aGUgbWVkaWEgZGV2aWNlcyBmb3IgdGhpcyBjbGllbnRcbiAgICogZS5nLiBDYW1lcmEsIE1pY3JvcGhvbmVcbiAgICovXG4gIGRldmljZUhhbmRsZXIgPSBuZXcgRGV2aWNlSGFuZGxlcl9kZWZhdWx0KCk7XG4gIC8qKlxuICAgKiBBY3RpdmVTdHJlYW0gTWFwIGhvbGRzIE1lZGlhU3RyZWFtIGFzIFZhbHVlIGFuZCBLZXkgYXMgTGFiZWxcbiAgICovXG4gIF9fYWN0aXZlU3RyZWFtcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIC8qKlxuICAgKiBIYW5kbGUgdGhlIENsaWVudCBTaWRlIFBlcm1pc3Npb24gZm9yIHRoZSBMb2NhbCBQZWVyLlxuICAgKi9cbiAgX19wZXJtaXNzaW9ucyA9IFBlcm1pc3Npb25zX2RlZmF1bHQuY3JlYXRlSW5zdGFuY2UoKTtcbiAgLyoqXG4gICAqIFN0b3JlcyB0aGUgTWV0YWRhdGEgZm9yIHRoZSBMb2NhbCBQZWVyLlxuICAgKi9cbiAgX19tZXRhZGF0YSA9IG51bGw7XG4gIC8qKlxuICAgKiBWYXJpYWJsZSB0byBjaGVjayBpZiB0aGUgdXNlciBoYXMgam9pbmVkIHRoZSByb29tXG4gICAqL1xuICBqb2luZWQgPSBmYWxzZTtcbiAgLyoqXG4gICAqIFZhcmlhYmxlIHRvIGtub3cgaWYgVm9sYXRpbGUgTWVzc2FnaW5nIGlzIGVuYWJsZWQgZm9yIHRoZSBMb2NhbFBlZXIsXG4gICAqIHdoZW4gdXNpbmcgVm9sYXRpbGUgTWVzc2FnaW5nLCB0aGUgbWVzc2FnZXMgYXJlIHNlbnQgb3ZlciBVRFAgdXNpbmcgV2ViUlRDXG4gICAqIHdoaWNoIG1ha2VzIHRoZSBtZXNzYWdlcyBmYXN0ZXIgYnV0IG5vdCByZWxpYWJsZSBhbmQgaGF2ZSBtdWNoIGhpZ2hlciByYXRlIGxpbWl0XG4gICAqIGFuZCBsb3dlciBMYXRlbmN5LlxuICAgKi9cbiAgX192b2xhdGlsZU1lc3NhZ2luZyA9IGZhbHNlO1xuICAvKipcbiAgICogUmV0dXJuIHRoZSBsYWJlbHMgb2YgdGhlIE1lZGlhIFN0cmVhbSB0aGF0IHRoZSBMb2NhbCBQZWVyIGlzIHByb2R1Y2luZyB0byB0aGUgcm9vbVxuICAgKi9cbiAgZ2V0IGxhYmVscygpIHtcbiAgICBjb25zdCBzZW5kVHJhbnNwb3J0ID0gdGhpcy5fX3NlbmRUcmFuc3BvcnQ7XG4gICAgaWYgKHNlbmRUcmFuc3BvcnQpIHtcbiAgICAgIGNvbnN0IGxhYmVscyA9IEFycmF5LmZyb20oc2VuZFRyYW5zcG9ydC5sYWJlbFRvUHJvZHVjZXJJZC5rZXlzKCkpO1xuICAgICAgcmV0dXJuIGxhYmVscztcbiAgICB9XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIFBlcm1pc3Npb25zIG9mIHRoZSBMb2NhbCBQZWVyLiAoZS5nIGNhblByb2R1Y2UsIGNhbkNvbnN1bWUsIGNhblNlbmREYXRhLCBjYW5SZWN2RGF0YSBldGMpXG4gICAqL1xuICBnZXQgcGVybWlzc2lvbnMoKSB7XG4gICAgY29uc3QgYWNsID0gdGhpcy5fX3Blcm1pc3Npb25zLmFjbDtcbiAgICByZXR1cm4gYWNsO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIFJvbGUgb2YgdGhlIExvY2FsIFBlZXIuXG4gICAqL1xuICBnZXQgcm9sZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fX3Blcm1pc3Npb25zLnJvbGU7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHRva2VuIG9mIHRoZSBjdXJyZW50IHNvY2tldCBjb25uZWN0aW9uLCBzcGVjaWZpYyB0byB0aGUgTG9jYWwgUGVlciB3aG8gam9pbmVkIHRoZSBtZWV0aW5nXG4gICAqL1xuICBnZXQgdG9rZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMuc29ja2V0LnRva2VuO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSByb29tSWQgb2YgdGhlIGN1cnJlbnQgam9pbmVkIHJvb20uXG4gICAqL1xuICBnZXQgcm9vbUlkKCkge1xuICAgIHJldHVybiB0aGlzLnJvb20ucm9vbUlkO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBTZW5kVHJhbnNwb3J0XG4gICAqIEByZXR1cm5zIHsgVHJhbnNwb3J0IH0gU2VuZFRyYW5zcG9ydFxuICAgKiBAdGhyb3dzIHsgRXJyb3IgfSBJZiB0aGUgU2VuZFRyYW5zcG9ydCBpcyBub3QgaW5pdGlhbGl6ZWRcbiAgICovXG4gIGdldCBzZW5kVHJhbnNwb3J0KCkge1xuICAgIGlmICghdGhpcy5fX3NlbmRUcmFuc3BvcnQpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTZW5kIFRyYW5zcG9ydCBOb3QgSW5pdGlhbGl6ZWRcIik7XG4gICAgcmV0dXJuIHRoaXMuX19zZW5kVHJhbnNwb3J0O1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSByZWN2VHJhbnNwb3J0XG4gICAqIEByZXR1cm5zIHsgVHJhbnNwb3J0IH0gcmVjdlRyYW5zcG9ydFxuICAgKiBAdGhyb3dzIHsgRXJyb3IgfSBJZiB0aGUgcmVjdlRyYW5zcG9ydCBpcyBub3QgaW5pdGlhbGl6ZWRcbiAgICovXG4gIGdldCByZWN2VHJhbnNwb3J0KCkge1xuICAgIGlmICghdGhpcy5fX3JlY3ZUcmFuc3BvcnQpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZWN2IFRyYW5zcG9ydCBOb3QgSW5pdGlhbGl6ZWRcIik7XG4gICAgcmV0dXJuIHRoaXMuX19yZWN2VHJhbnNwb3J0O1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBtZXRhZGF0YSBhc3NvY2lhdGVkIHRvIHRoZSBMb2NhbFBlZXJcbiAgICovXG4gIGdldE1ldGFkYXRhKCkge1xuICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHRoaXMuX19tZXRhZGF0YSB8fCBcInt9XCIpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIC8qKlxuICAgKiBnZXRTdHJlYW0gcmV0dXJucyB0aGUgc3RyZWFtIHdpdGggdGhlIGdpdmVuIGxhYmVsXG4gICAqL1xuICBnZXRTdHJlYW0gPSAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMuX19hY3RpdmVTdHJlYW1zLmdldChkYXRhLmxhYmVsKTtcbiAgICBpZiAoc3RyZWFtID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gc3RyZWFtO1xuICB9O1xuICAvKipcbiAgICogVXBkYXRlcyB0aGUgbWV0YWRhdGEgYXNzb2NpYXRlZCB0byB0aGUgTG9jYWxQZWVyLCBUcmlnZ2VycyB0aGUgYG1ldGFkYXRhLXVwZGF0ZWRgIGV2ZW50XG4gICAqIEBwYXJhbSBtZXRhZGF0YVxuICAgKi9cbiAgX191cGRhdGVNZXRhZGF0YSA9IChtZXRhZGF0YSkgPT4ge1xuICAgIHRoaXMuX19tZXRhZGF0YSA9IG1ldGFkYXRhO1xuICAgIGNvbnN0IHBhcnNlID0gSlNPTi5wYXJzZShtZXRhZGF0YSk7XG4gICAgdGhpcy5lbWl0KFwibWV0YWRhdGEtdXBkYXRlZFwiLCB7XG4gICAgICBtZXRhZGF0YTogcGFyc2VcbiAgICB9KTtcbiAgfTtcbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHByb2R1Y2VyIHdpdGggdGhlIGdpdmVuIGxhYmVsXG4gICAqIEBwYXJhbSBsYWJlbCAtIElkZW50aWZpZXIgb2YgdGhlIHByb2R1Y2VyXG4gICAqIEByZXR1cm5zIHsgUHJvZHVjZXIgfSBQcm9kdWNlclxuICAgKiBAcmV0dXJucyB7IG51bGwgfSBJZiB0aGUgcHJvZHVjZXIgaXMgbm90IGZvdW5kXG4gICAqL1xuICBnZXRQcm9kdWNlcldpdGhMYWJlbCA9IChsYWJlbCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwcm9kdWNlcklkID0gdGhpcy5fX3NlbmRUcmFuc3BvcnQ/LmxhYmVsVG9Qcm9kdWNlcklkLmdldChsYWJlbCk7XG4gICAgICBpZiAoIXByb2R1Y2VySWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiXFx1Mjc0QyBQcm9kdWNlciBOb3QgRm91bmRcIik7XG4gICAgICB9XG4gICAgICBjb25zdCBwcm9kdWNlciA9IHRoaXMuc2VuZFRyYW5zcG9ydC5nZXRQcm9kdWNlckJ5SWQocHJvZHVjZXJJZCk7XG4gICAgICByZXR1cm4gcHJvZHVjZXI7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgQ2Fubm90IEZpbmQgUHJvZHVjZXIgV2l0aCBJZGVudGlmaWVyOiBcIiwgbGFiZWwpO1xuICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIFJlZ2lzdGVycyB0aGUgZXZlbnQgaGFuZGxlcnMgZm9yIHRoZSBzb2NrZXQgY29ubmVjdGlvblxuICAgKiBAcGFyYW0gc29ja2V0IC0gU29ja2V0IEluc3RhbmNlXG4gICAqL1xuICBfX3JlZ2lzdGVySGFuZGxlckV2ZW50cyA9IChzb2NrZXQpID0+IHtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5fX2hhbmRsZXIpO1xuICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGZuID0gdGhpcy5fX2hhbmRsZXJba2V5XTtcbiAgICAgICAgaWYgKGZuKSBzb2NrZXQuc3Vic2NyaWJlKGtleSwgZm4pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKGBcXHUyNzRDIEVycm9yIFJlZ2lzdGVyZWQgRm9yIEV2ZW50OiAke2tleX1gKTtcbiAgICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgbG9nZ2VyLmluZm8oXCJcXHUyNzA1IExvY2FsUGVlckV2ZW50SGFuZGxlciBSZWdpc3RlcmVkXCIpO1xuICB9O1xuICAvKipcbiAgICogQ2FuIGJlIHVzZWQgdG8gY2hlY2sgd2hpY2ggYGRpcmVjdGlvbmAgb2Ygd2ViUlRDIGNvbm5lY3Rpb24gaXMgY3VycmVudGx5IGFjdGl2ZSBmb3IgdGhlIHBlZXIuXG4gICAqXG4gICAqICoqTk9URTogUGVlcnMgd2l0aCByb2xlIGFzIEJvdCB3aWxsIG5vdCBoYXZlIGByZWN2YCB0cmFuc3BvcnQ7KipcbiAgICogQHBhcmFtIHRyYW5zcG9ydFR5cGVcbiAgICovXG4gIHRyYW5zcG9ydEV4aXN0cyA9ICh0cmFuc3BvcnRUeXBlKSA9PiB7XG4gICAgaWYgKHRyYW5zcG9ydFR5cGUgPT09IFwicmVjdlwiKSB7XG4gICAgICByZXR1cm4gdGhpcy5fX3JlY3ZUcmFuc3BvcnQ7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9fc2VuZFRyYW5zcG9ydDtcbiAgfTtcbiAgc3RhdGljIGNyZWF0ZShvcHRpb25zKSB7XG4gICAgaWYgKF9Mb2NhbFBlZXIuX19pbnN0YW5jZSkge1xuICAgICAgcmV0dXJuIF9Mb2NhbFBlZXIuX19pbnN0YW5jZTtcbiAgICB9XG4gICAgX0xvY2FsUGVlci5fX2luc3RhbmNlID0gbmV3IF9Mb2NhbFBlZXIob3B0aW9ucyk7XG4gICAgcmV0dXJuIF9Mb2NhbFBlZXIuX19pbnN0YW5jZTtcbiAgfVxuICBzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XG4gICAgaWYgKCFfTG9jYWxQZWVyLl9faW5zdGFuY2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkxvY2FsUGVlciBub3QgaW5pdGlhbGl6ZWRcIik7XG4gICAgfVxuICAgIHJldHVybiBfTG9jYWxQZWVyLl9faW5zdGFuY2U7XG4gIH1cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fX3JlZ2lzdGVySGFuZGxlckV2ZW50cyh0aGlzLnNvY2tldCk7XG4gICAgaWYgKG9wdGlvbnMuaGFuZGxlckZhY3RvcnkpIHtcbiAgICAgIHRoaXMuX19oYW5kbGVyRmFjdG9yeSA9IG9wdGlvbnM/LmhhbmRsZXJGYWN0b3J5O1xuICAgIH1cbiAgICB0aGlzLl9fdm9sYXRpbGVNZXNzYWdpbmcgPSBvcHRpb25zLnZvbGF0aWxlTWVzc2FnZXMgPz8gZmFsc2U7XG4gICAgdGhpcy5fX3JlZ2lzdGVySW50ZXJuYWxMaXN0ZW5lcnMoKTtcbiAgfVxuICAvKipcbiAgICogRGVzdHJveSB0aGUgY3VycmVudCBwZWVyLCBjbG9zZXMgYWxsIHRoZSB0cmFuc3BvcnRzLCBwcm9kdWNlcnMgYW5kIGNvbnN1bWVyc1xuICAgKlxuICAgKiBAcGFyYW0gY29kZSAtIENsb3NlIENvZGVcbiAgICovXG4gIGNsb3NlID0gKCkgPT4ge1xuICAgIHRoaXMuX19kZXZpY2UgPSBudWxsO1xuICAgIHRoaXMuam9pbmVkID0gZmFsc2U7XG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiYgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcykge1xuICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5vbmRldmljZWNoYW5nZSA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuX19wZW5kaW5nQ29uc3VtZXJUYXNrcy5jbGVhcigpO1xuICAgIHRoaXMuX19wZW5kaW5nUHJvZHVjZXJUYXNrcy5jbGVhcigpO1xuICAgIHRoaXMuX19wZW5kaW5nVHJhbnNwb3J0VGFza3MuY2xlYXIoKTtcbiAgICB0aGlzLl9fcGVuZGluZ0ZldGNoaW5nU3RyZWFtLmNsZWFyKCk7XG4gICAgdGhpcy5fX3dhaXRpbmdUb1Byb2R1Y2UuY2xlYXIoKTtcbiAgICBmb3IgKGNvbnN0IHN0cmVhbSBvZiB0aGlzLl9fYWN0aXZlU3RyZWFtcy52YWx1ZXMoKSkge1xuICAgICAgZm9yIChjb25zdCB0cmFjayBvZiBzdHJlYW0uZ2V0VHJhY2tzKCkpIHRyYWNrLnN0b3AoKTtcbiAgICB9XG4gICAgdGhpcy5kZXZpY2VIYW5kbGVyLmRlc3Ryb3koKTtcbiAgICBpZiAodGhpcy5fX3NlbmRUcmFuc3BvcnQpIHtcbiAgICAgIHRoaXMuX19zZW5kVHJhbnNwb3J0LmNsb3NlKHsgcmV0cmllczogMyB9KTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX19yZWN2VHJhbnNwb3J0KSB7XG4gICAgICB0aGlzLl9fcmVjdlRyYW5zcG9ydC5jbG9zZSh7IHJldHJpZXM6IDMgfSk7XG4gICAgfVxuICAgIHRoaXMuX19zZW5kVHJhbnNwb3J0ID0gbnVsbDtcbiAgICB0aGlzLl9fcmVjdlRyYW5zcG9ydCA9IG51bGw7XG4gICAgdGhpcy5fX3Blcm1pc3Npb25zLnJlc2V0KCk7XG4gICAgdGhpcy5lbWl0KFwicGVybWlzc2lvbnMtdXBkYXRlZFwiLCB7XG4gICAgICBwZXJtaXNzaW9uczogdGhpcy5wZXJtaXNzaW9ucyxcbiAgICAgIHJvbGU6IHRoaXMucm9sZSA/PyBcIlwiXG4gICAgfSk7XG4gIH07XG4gIC8qKlxuICAgKiBQcm9kdWNlIGEgc3RyZWFtIHdpdGggYSBnaXZlbiBsYWJlbCBhbmQgYXBwRGF0YSB0byBhbGwgdGhlIFJlbW90ZSBQZWVyc1xuICAgKlxuICAgKiBgY2FuUHJvZHVjZSBtdXN0IGJlIHRydWUgdG8gcHJvZHVjZSBhIHN0cmVhbWBcbiAgICpcbiAgICogYE5PVEU6IFRoaXMgd2lsbCBub3RpZnkgYWxsIHRoZSBSZW1vdGVQZWVycyB0aGF0IHRoaXMgcHJvZHVjZXIgaGFzIHN0YXJ0ZWQgcHJvZHVjaW5nIGFuZCB0aGV5IHNob3VsZCBzdGFydCBjb25zdW1pbmcgaXQgaWYgdGhleSB3YW50IHRvYFxuICAgKlxuICAgKiBAcGFyYW0gZGF0YSAtIERhdGEgdG8gcHJvZHVjZSBhIHN0cmVhbVxuICAgKiAgLSBgbGFiZWxgIC0gVW5pcXVlIElkZW50aWZpZXIgZm9yIHRoZSBzdHJlYW0gKCBzdHJpbmcgKVxuICAgKiAgLSBgc3RyZWFtYCAtIE1lZGlhU3RyZWFtIHRvIHByb2R1Y2UgKCBNZWRpYVN0cmVhbSApXG4gICAqICAtIGBzdG9wVHJhY2tPbkNsb3NlYCAtIElmIHRydWUsIGl0IHdpbGwgc3RvcCB0aGUgdHJhY2sgd2hlbiB0aGUgcHJvZHVjZXIgaXMgY2xvc2VkIHVzaW5nIHN0b3BQcm9kdWNpbmcgKCBib29sZWFuIClcbiAgICogIC0gYGFwcERhdGFgIC0gQXBwbGljYXRpb24gbGV2ZWwgY3VzdG9tIGRhdGEgd2hpY2ggY2FuIGJlIGFkZGVkIHRvIHRoZSBwcm9kdWNlciBmb3IgdGhlIExvY2FsUGVlciwgdGhpcyBkYXRhIHdpbGwgYmUgYXZhaWxhYmxlIGluIHRoZSBwcm9kdWNlciBvYmplY3QgYW5kIGNhbiBiZSB1c2VkIG9ubHkgYnkgdGhlIExvY2FsUGVlci4gKCBVbmtub3duIE9iamVjdCApXG4gICAqICAtIGBwcmVmZmVyZWRDb2RlY2AgLSBQcmVmZXJyZWQgQ29kZWMgdG8gYmUgdXNlZCBmb3IgdGhlIHN0cmVhbSAoIFN1cHBvcnRlZENvZGVjcyApLCBtYWtlIHN1cmUgdGhlIGNvZGVjIGlzIHN1cHBvcnRlZCBieSB0aGUgZGV2aWNlICggJ0Jyb3dzZXInIG9yICdSZWFjdE5hdGl2ZScgKVxuICAgKlxuICAgKiBAc3VtbWFyeSBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gcHJvZHVjZSBhIHN0cmVhbSB3aXRoIGEgZ2l2ZW4gbGFiZWwgYW5kIGFwcERhdGEgdG8gYWxsIHRoZSBSZW1vdGUgUGVlcnMgaWYgdGhlIHNlbmQgdHJhbnNwb3J0IGlzIG5vdCBpbml0aWFsaXNlZFxuICAgKiBpdCB3aWxsIGNyZWF0ZSBhIHNlbmQgdHJhbnNwb3J0IGFuZCB0aGVuIHByb2R1Y2UgdGhlIHN0cmVhbSB3aXRoIHRoZSBnaXZlbiBsYWJlbCBhbmQgYXBwRGF0YSB0byBhbGwgdGhlIFJlbW90ZSBQZWVyc1xuICAgKlxuICAgKiBTZW5kIFRyYW5zcG9ydCBpcyBhIHNlY3VyZSBjaGFubmVsIHdoaWNoIGlzIHVzZWQgdG8gc2VuZCBtZWRpYSBmcm9tIExvY2FsUGVlciB0byBhbGwgdGhlIFJlbW90ZVBlZXJzIGluIHRoZSByb29tXG4gICAqXG4gICAqIGBsb2NhbFBlZXIub24oJ25ldy1wcm9kdWNlcicsICh7bGFiZWw6IHN0cmluZzsgcHJvZHVjZXI6IFByb2R1Y2VyfSkgPT4ge30pYFxuICAgKlxuICAgKiAgQHRocm93cyB7IEVycm9yIH0gSWYgRmFpbGVkIHRvIHByb2R1Y2UsIFJlYXNvbiB3aWxsIGJlIGluIHRoZSBlcnJvciBtZXNzYWdlLFxuICAgKiBAdGhyb3dzIHsgRXJyb3IgfSBpZiBgcHJlZmZlcmVkQ29kZWNgIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIERldmljZSAoICdCcm93c2VyJyBvciAnUmVhY3ROYXRpdmUnIClcbiAgICovXG4gIHByb2R1Y2UgPSBjaGVja1Blcm1pc3Npb25zKHtcbiAgICBjYW5Qcm9kdWNlOiB0cnVlXG4gIH0pLnZhbGlkYXRlKFxuICAgIGFzeW5jIChkYXRhKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBlcnJvciA9IGNoZWNrUHJvZHVjZVBlcm1pc3Npb25zKGRhdGEubGFiZWwpO1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBY2Nlc3MgRGVuaWVkOiBDYW5ub3QgUHJvZHVjZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0cmFjayA9IGRhdGEuc3RyZWFtLmdldFRyYWNrcygpWzBdO1xuICAgICAgICBpZiAodHJhY2spIHtcbiAgICAgICAgICB0cmFjay5hZGRFdmVudExpc3RlbmVyKFwiZW5kZWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdG9wUHJvZHVjaW5nKHsgbGFiZWw6IGRhdGEubGFiZWwgfSk7XG4gICAgICAgICAgICBpZiAoZGF0YS5sYWJlbCA9PT0gXCJzY3JlZW4tc2hhcmUtYXVkaW9cIikge1xuICAgICAgICAgICAgICB0aGlzLnN0b3BQcm9kdWNpbmcoeyBsYWJlbDogXCJzY3JlZW4tc2hhcmUtdmlkZW9cIiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuam9pbmVkIHx8IHRoaXMuX19zZW5kVHJhbnNwb3J0ICYmIHRoaXMuX19zZW5kVHJhbnNwb3J0Py5jb25uZWN0aW9uU3RhdGUgIT09IFwiY29ubmVjdGVkXCIgJiYgdGhpcy5fX3NlbmRUcmFuc3BvcnQ/LmNvbm5lY3Rpb25TdGF0ZSAhPT0gXCJuZXdcIikge1xuICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZm4gPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHByb2R1Y2VyMiA9IGF3YWl0IHRoaXMucHJvZHVjZShkYXRhKS50aGVuKChkYXRhMikgPT4ge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YTIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhMjtcbiAgICAgICAgICAgICAgfSkuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fX3BlbmRpbmdQcm9kdWNlclRhc2tzLmRlbGV0ZShkYXRhLmxhYmVsKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHJldHVybiBwcm9kdWNlcjI7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5fX3dhaXRpbmdUb1Byb2R1Y2Uuc2V0KGRhdGEubGFiZWwsIGZuKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHN0cmVhbSB9ID0gZGF0YTtcbiAgICAgICAgY29uc3QgcHJvZHVjZXJQcm9taXNlID0gdGhpcy5fX3BlbmRpbmdQcm9kdWNlclRhc2tzLmdldChkYXRhLmxhYmVsKTtcbiAgICAgICAgaWYgKHByb2R1Y2VyUHJvbWlzZSkge1xuICAgICAgICAgIGxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgXCJcXHV7MUY1MTR9IFByb2R1Y2VyIFRhc2sgQWxyZWFkeSBQZW5kaW5nIGZvciB0aGlzIGxhYmVsIFwiLFxuICAgICAgICAgICAgZGF0YS5sYWJlbFxuICAgICAgICAgICk7XG4gICAgICAgICAgY29uc3QgcHJvZHVjZXIyID0gYXdhaXQgcHJvZHVjZXJQcm9taXNlO1xuICAgICAgICAgIHJldHVybiBwcm9kdWNlcjI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9fc2VuZFRyYW5zcG9ydCkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuX19jcmVhdGVUcmFuc3BvcnRPblNlcnZlcih7XG4gICAgICAgICAgICB0cmFuc3BvcnRUeXBlOiBcInNlbmRcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9uZ29pbmdQcm9taXNlID0gdGhpcy5fX3BlbmRpbmdQcm9kdWNlclRhc2tzLmdldChkYXRhLmxhYmVsKTtcbiAgICAgICAgaWYgKG9uZ29pbmdQcm9taXNlKSB7XG4gICAgICAgICAgY29uc3QgcHJvZHVjZXIyID0gYXdhaXQgb25nb2luZ1Byb21pc2U7XG4gICAgICAgICAgcmV0dXJuIHByb2R1Y2VyMjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5fX2NyZWF0ZVByb2R1Y2VyKHtcbiAgICAgICAgICBzdHJlYW0sXG4gICAgICAgICAgbGFiZWw6IGRhdGEubGFiZWwsXG4gICAgICAgICAgYXBwRGF0YTogeyAuLi5kYXRhLmFwcERhdGEsIGxhYmVsOiBkYXRhLmxhYmVsIH0sXG4gICAgICAgICAgcHJlZmZlcmVkQ29kZWM6IGRhdGEucHJlZmZlcmVkQ29kZWMsXG4gICAgICAgICAgc3RvcFRyYWNrT25DbG9zZTogZGF0YS5zdG9wVHJhY2tPbkNsb3NlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9fcGVuZGluZ1Byb2R1Y2VyVGFza3Muc2V0KGRhdGEubGFiZWwsIHByb21pc2UpO1xuICAgICAgICBjb25zdCBwcm9kdWNlciA9IGF3YWl0IHByb21pc2UuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgRXJyb3IgQ3JlYXRlIFByb2R1Y2VyIEZhaWxlZFwiKTtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcXHUyNzRDIEVycm9yIENyZWF0ZSBQcm9kdWNlciBGYWlsZWRcIik7XG4gICAgICAgIH0pLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuX19wZW5kaW5nUHJvZHVjZXJUYXNrcy5kZWxldGUoZGF0YS5sYWJlbCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcHJvZHVjZXI7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aGlzLnN0b3BQcm9kdWNpbmcoeyBsYWJlbDogZGF0YS5sYWJlbCB9KTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiXFx1Mjc0QyBFcnJvciBQcm9kdWNpbmcgU3RyZWFtLCBDYW4ndCBQcm9kdWNlXCIpO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbiAgLyoqXG4gICAqIEVuYWJsZXMgdGhlIGxvY2FsIHdlYiBjYW0gYW5kIHN0YXJ0cyBwcm9kdWNpbmcgdGhlIHN0cmVhbSB3aXRoIHRoZSBsYWJlbCBgdmlkZW9gXG4gICAqIEBwYXJhbSBjdXN0b21WaWRlb1N0cmVhbSAoT3B0aW9uYWwpIEN1c3RvbSBWaWRlbyBTdHJlYW0gdG8gcHJvZHVjZSwgaWYgbm90IHByb3ZpZGVkIGl0IHdpbGwgZmV0Y2ggdGhlIHN0cmVhbSBmcm9tIHRoZSBkZXZpY2VcbiAgICogQHBhcmFtIHByZWZmZXJlZENvZGVjIChPcHRpb25hbCkgUHJlZmVycmVkIENvZGVjIHRvIGJlIHVzZWQgZm9yIHRoZSBzdHJlYW0gKCBTdXBwb3J0ZWRDb2RlY3MgKSwgbWFrZSBzdXJlIHRoZSBjb2RlYyBpcyBzdXBwb3J0ZWQgYnkgdGhlIGRldmljZSAoICdCcm93c2VyJyBvciAnUmVhY3ROYXRpdmUnIClcbiAgICpcbiAgICogQHN1bW1hcnkgVGhpcyBmdW5jdGlvbnMgaGFuZGxlIHRoZSBwcm9kdWNpbmcgb2YgbWVkaWEgc3RyZWFtcyB0byBhbGwgdGhlIHJlbW90ZSBwZWVycyBpbiB0aGUgcm9vbS5cbiAgICogaXQgZW5hYmxlcyB0aGUgbG9jYWwgd2ViIGNhbSBmZXRjaGVzIHRoZSBzdHJlYW0gb3BlbnMgeW91IHdlYiBjYW0gaW5kaWNhdG9yIGxpZ2h0IG9uIHRoZSBkZXZpY2VcbiAgICogdXBvbiBzdWNjZXNzZnVsbCBmZXRjaGluZyBvZiB0aGUgc3RyZWFtIGl0IHByb2R1Y2VzIHRoZSBzdHJlYW0gd2l0aCB0aGUgbGFiZWwgYHZpZGVvYCBhbmQgYHN0b3BUcmFja09uQ2xvc2U6IHRydWVgIHRvIGFsbCB0aGUgcmVtb3RlIHBlZXJzIGluIHRoZSByb29tLlxuICAgKiB3aGVuIGNsb3NpbmcgdXNpbmcgZGlzYWJsZVZpZGVvIGl0IHdpbGwgc3RvcCB0aGUgbG9jYWwgdHJhY2sgYW5kIGNsb3NlIHRoZSBwcm9kdWNlciB3aGljaCB3aWxsIG5vdGlmeSBhbGwgdGhlIFJlbW90ZVBlZXJzIHRoYXQgdGhpcyBwcm9kdWNlciBoYXMgc3RvcHBlZCBwcm9kdWNpbmdcbiAgICogYW5kIHRoZXkgc2hvdWxkIHN0b3AgY29uc3VtaW5nIGl0LlxuICAgKlxuICAgKiBgTk9URTogWW91IGNhbiBvbmx5IHByb2R1Y2UgdG8gYSByb29tIHdoZW4geW91IGhhdmUgam9pbmVkIHRoZSByb29tLCBpZiB5b3UgdHJ5IHRvIHByb2R1Y2UgYmVmb3JlIGpvaW5pbmcgdGhlIHJvb20gaXQgd2lsbCB0aHJvdyBhbiBlcnJvcmBcbiAgICpcbiAgICogQHRocm93cyB7IEVycm9yIH0gSWYgdGhlIHN0cmVhbSBpcyBub3QgZm91bmRcbiAgICogQHRocm93cyB7IEVycm9yIH0gSWYgUHJlZmZlcmVkIENvZGVjIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIERldmljZSAoICdCcm93c2VyJyBvciAnUmVhY3ROYXRpdmUnIClcbiAgICogQHRocm93cyB7IEVycm9yIH0gSWYgRmFpbGVkIHRvIHByb2R1Y2UsIFJlYXNvbiB3aWxsIGJlIGluIHRoZSBlcnJvciBtZXNzYWdlXG4gICAqL1xuICBlbmFibGVWaWRlbyA9IGNoZWNrUGVybWlzc2lvbnMoe1xuICAgIGNhblByb2R1Y2U6IHRydWUsXG4gICAgY2FuUHJvZHVjZVNvdXJjZXM6IHsgY2FtOiB0cnVlIH1cbiAgfSkudmFsaWRhdGUoXG4gICAgYXN5bmMgKGRhdGEpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nU3RyZWFtID0gdGhpcy5fX2FjdGl2ZVN0cmVhbXMuZ2V0KFwidmlkZW9cIik7XG4gICAgICAgIGlmIChleGlzdGluZ1N0cmVhbSkge1xuICAgICAgICAgIGxvZ2dlci53YXJuKFwiXFx1ezFGNTE0fSBDYW0gU3RyZWFtIEFscmVhZHkgRW5hYmxlZFwiKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN0cmVhbTtcbiAgICAgICAgaWYgKGRhdGE/LmN1c3RvbVZpZGVvU3RyZWFtKSB7XG4gICAgICAgICAgc3RyZWFtID0gZGF0YT8uY3VzdG9tVmlkZW9TdHJlYW07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgb25nb2luZ1N0cmVhbVByb21pc2UgPSB0aGlzLl9fcGVuZGluZ0ZldGNoaW5nU3RyZWFtLmdldChcImNhbVwiKTtcbiAgICAgICAgICBpZiAob25nb2luZ1N0cmVhbVByb21pc2UpIHtcbiAgICAgICAgICAgIGF3YWl0IG9uZ29pbmdTdHJlYW1Qcm9taXNlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzdHJlYW1Qcm9taXNlID0gdGhpcy5kZXZpY2VIYW5kbGVyLmZldGNoU3RyZWFtKHtcbiAgICAgICAgICAgICAgbWVkaWFEZXZpY2VLaW5kOiBcImNhbVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX19wZW5kaW5nRmV0Y2hpbmdTdHJlYW0uc2V0KFwiY2FtXCIsIHN0cmVhbVByb21pc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBwZW5kaW5nUHJvbWlzZSA9IHRoaXMuX19wZW5kaW5nRmV0Y2hpbmdTdHJlYW0uZ2V0KFwiY2FtXCIpO1xuICAgICAgICAgIGlmICghcGVuZGluZ1Byb21pc2UpIHtcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKFwiXFx1ezFGNTE0fSBQZW5kaW5nIFByb21pc2UgTm90IEZvdW5kXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCB7IHN0cmVhbTogZmV0Y2hlZFN0cmVhbSwgZXJyb3IgfSA9IGF3YWl0IHBlbmRpbmdQcm9taXNlO1xuICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBGZXRjaGluZyBTdHJlYW0gRnJvbSBEZXZpY2VcIik7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiXFx1Mjc0QyBFcnJvciBGZXRjaGluZyBTdHJlYW0gRnJvbSBEZXZpY2VcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghZmV0Y2hlZFN0cmVhbSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1Mjc0QyBTdHJlYW0gTm90IEZvdW5kLCBjYW5ub3QgZG8gZW5hYmxlVmlkZW9cIik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcXHUyNzRDIFN0cmVhbSBOb3QgRm91bmRcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN0cmVhbSA9IGZldGNoZWRTdHJlYW07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fX2FjdGl2ZVN0cmVhbXMuc2V0KFwidmlkZW9cIiwgc3RyZWFtKTtcbiAgICAgICAgdGhpcy5lbWl0KFwic3RyZWFtLWZldGNoZWRcIiwge1xuICAgICAgICAgIG1lZGlhS2luZDogXCJjYW1cIixcbiAgICAgICAgICBsYWJlbDogXCJ2aWRlb1wiLFxuICAgICAgICAgIHN0cmVhbVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wcm9kdWNlKHtcbiAgICAgICAgICBsYWJlbDogXCJ2aWRlb1wiLFxuICAgICAgICAgIHN0cmVhbSxcbiAgICAgICAgICBhcHBEYXRhOiB7XG4gICAgICAgICAgICBwcm9kdWNlclBlZXJJZDogdGhpcy5wZWVySWRcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN0b3BUcmFja09uQ2xvc2U6IHRydWUsXG4gICAgICAgICAgcHJlZmZlcmVkQ29kZWM6IGRhdGE/LnByZWZmZXJlZENvZGVjXG4gICAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHRoaXMuX19wZW5kaW5nUHJvZHVjZXJUYXNrcy5kZWxldGUoXCJ2aWRlb1wiKTtcbiAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBQcm9kdWNpbmcgVmlkZW9cIik7XG4gICAgICAgICAgdGhpcy5kZXZpY2VIYW5kbGVyLnN0b3BTdHJlYW0odGhpcy5fX2FjdGl2ZVN0cmVhbXMuZ2V0KFwidmlkZW9cIikpO1xuICAgICAgICAgIHRoaXMuX19hY3RpdmVTdHJlYW1zLmRlbGV0ZShcInZpZGVvXCIpO1xuICAgICAgICAgIHRoaXMuX19wZW5kaW5nRmV0Y2hpbmdTdHJlYW0uZGVsZXRlKFwiY2FtXCIpO1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9fcGVuZGluZ0ZldGNoaW5nU3RyZWFtLmRlbGV0ZShcImNhbVwiKTtcbiAgICAgICAgcmV0dXJuIHN0cmVhbTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgRXJyb3IgRW5hYmxpbmcgVmlkZW9cIiwgZXJyb3IpO1xuICAgICAgICB0aGlzLmRldmljZUhhbmRsZXIuc3RvcFN0cmVhbSh0aGlzLl9fYWN0aXZlU3RyZWFtcy5nZXQoXCJ2aWRlb1wiKSk7XG4gICAgICAgIHRoaXMuX19hY3RpdmVTdHJlYW1zLmRlbGV0ZShcInZpZGVvXCIpO1xuICAgICAgICB0aGlzLl9fcGVuZGluZ0ZldGNoaW5nU3RyZWFtLmRlbGV0ZShcImNhbVwiKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICApO1xuICAvKipcbiAgICogRW5hYmxlcyB0aGUgbG9jYWwgc2NyZWVuIHNoYXJlICBhbmQgc3RhcnRzIHByb2R1Y2luZyB0aGUgc2NyZWVuIHNoYXJpbmcgc3RyZWFtXG4gICAqXG4gICAqIEBwYXJhbSBwcmVmZmVyZWRDb2RlYyAoT3B0aW9uYWwpIFByZWZlcnJlZCBDb2RlYyB0byBiZSB1c2VkIGZvciB0aGUgc3RyZWFtICggU3VwcG9ydGVkQ29kZWNzICksIG1ha2Ugc3VyZSB0aGUgY29kZWMgaXMgc3VwcG9ydGVkIGJ5IHRoZSBkZXZpY2UgKCAnQnJvd3Nlcicgb3IgJ1JlYWN0TmF0aXZlJyApXG4gICAqXG4gICAqYE5PVEU6IFlvdSBjYW4gb25seSBwcm9kdWNlIHRvIGEgcm9vbSB3aGVuIHlvdSBoYXZlIGpvaW5lZCB0aGUgcm9vbSwgaWYgeW91IHRyeSB0byBwcm9kdWNlIGJlZm9yZSBqb2luaW5nIHRoZSByb29tIGl0IHdpbGwgZmV0Y2ggdGhlIHN0cmVhbSBhbmQgc3RhcnQgcHJvZHVjaW5nIHdoZW4geW91IGpvaW4gdGhlIHJvb21gXG4gICAqXG4gICAqIEBzdW1tYXJ5IFRoaXMgZnVuY3Rpb25zIGhhbmRsZSB0aGUgcHJvZHVjaW5nIG9mIG1lZGlhIHN0cmVhbXMgdG8gYWxsIHRoZSByZW1vdGUgcGVlcnMgaW4gdGhlIHJvb20uXG4gICAqIGl0IGVuYWJsZXMgdGhlIGxvY2FsIG1pYyBmZXRjaGVzIHRoZSBzdHJlYW0gb3BlbnMgeW91IG1pYyBhY3RpdmUgaW5kaWNhdG9yIGxpZ2h0IG9uIHRoZSBkZXZpY2VcbiAgICogdXBvbiBzdWNjZXNzZnVsbCBmZXRjaGluZyBvZiB0aGUgc3RyZWFtIGl0IHByb2R1Y2VzIHRoZSBzdHJlYW0gd2l0aCB0aGUgbGFiZWwgYGF1ZGlvYCBhbmQgYHN0b3BUcmFja09uQ2xvc2U6IHRydWVgIHRvIGFsbCB0aGUgcmVtb3RlIHBlZXJzIGluIHRoZSByb29tLlxuICAgKiB3aGVuIGNsb3NpbmcgdXNpbmcgYGRpc2FibGVBdWRpb2AgaXQgd2lsbCBzdG9wIHRoZSBsb2NhbCBhdWRpbyB0cmFjayBhbmQgY2xvc2UgdGhlIHByb2R1Y2VyIHdoaWNoIHdpbGwgbm90aWZ5IGFsbCB0aGUgUmVtb3RlUGVlcnMgdGhhdCB0aGlzIHByb2R1Y2VyIGhhcyBzdG9wcGVkIHByb2R1Y2luZ1xuICAgKiBhbmQgdGhleSBzaG91bGQgc3RvcCBjb25zdW1pbmcgaXQuXG4gICAqXG4gICAqIEB0aHJvd3MgeyBFcnJvciB9IElmIFByZWZmZXJlZCBDb2RlYyBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBEZXZpY2UgKCAnQnJvd3Nlcicgb3IgJ1JlYWN0TmF0aXZlJyApXG4gICAqIEB0aHJvd3MgeyBFcnJvciB9IElmIEZhaWxlZCB0byBwcm9kdWNlLCBSZWFzb24gd2lsbCBiZSBpbiB0aGUgZXJyb3IgbWVzc2FnZVxuICAgKi9cbiAgc3RhcnRTY3JlZW5TaGFyZSA9IGNoZWNrUGVybWlzc2lvbnMoe1xuICAgIGNhblByb2R1Y2U6IHRydWUsXG4gICAgY2FuUHJvZHVjZVNvdXJjZXM6IHsgc2NyZWVuOiB0cnVlIH1cbiAgfSkudmFsaWRhdGUoYXN5bmMgKGRhdGEpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZXhpc3RpbmdTdHJlYW0gPSB0aGlzLl9fYWN0aXZlU3RyZWFtcy5nZXQoXCJzY3JlZW4tc2hhcmVcIik7XG4gICAgICBpZiAoZXhpc3RpbmdTdHJlYW0pIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oXCJcXHV7MUY1MTR9IFNjcmVlbiBTdHJlYW0gQWxyZWFkeSBFbmFibGVkXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBvbkdvaW5nU3RyZWFtUHJvbWlzZSA9IHRoaXMuX19wZW5kaW5nRmV0Y2hpbmdTdHJlYW0uZ2V0KFwic2NyZWVuLXNoYXJlXCIpO1xuICAgICAgaWYgKG9uR29pbmdTdHJlYW1Qcm9taXNlKSB7XG4gICAgICAgIGF3YWl0IG9uR29pbmdTdHJlYW1Qcm9taXNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc3RyZWFtUHJvbWlzZSA9IHRoaXMuZGV2aWNlSGFuZGxlci5mZXRjaFNjcmVlbigpO1xuICAgICAgICB0aGlzLl9fcGVuZGluZ0ZldGNoaW5nU3RyZWFtLnNldChcInNjcmVlbi1zaGFyZVwiLCBzdHJlYW1Qcm9taXNlKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBlbmRpbmdQcm9taXNlID0gdGhpcy5fX3BlbmRpbmdGZXRjaGluZ1N0cmVhbS5nZXQoXCJzY3JlZW4tc2hhcmVcIik7XG4gICAgICBpZiAoIXBlbmRpbmdQcm9taXNlKSB7XG4gICAgICAgIGxvZ2dlci5pbmZvKFwiXFx1ezFGNTE0fSBQZW5kaW5nIFNjcmVlbiBTaGFyZSBQcm9taXNlIE5vdCBGb3VuZFwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBzdHJlYW0sIGVycm9yIH0gPSBhd2FpdCBwZW5kaW5nUHJvbWlzZTtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIEVycm9yIEZldGNoaW5nIFNjcmVlbiBTaGFyZSBTdHJlYW0gRnJvbSBEZXZpY2VcIik7XG4gICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlxcdTI3NEMgRXJyb3IgRmV0Y2hpbmcgU2NyZWVuIFNoYXJlU3RyZWFtIEZyb20gRGV2aWNlXCIpO1xuICAgICAgfVxuICAgICAgaWYgKCFzdHJlYW0pIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1Mjc0QyBTdHJlYW0gTm90IEZvdW5kLCBjYW5ub3QgZG8gc3RhcnRTY3JlZW5TaGFyZVwiKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiXFx1Mjc0QyBTdHJlYW0gTm90IEZvdW5kLCBjYW5ub3QgZG8gc3RhcnRTY3JlZW5TaGFyZVwiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX19hY3RpdmVTdHJlYW1zLnNldChcInNjcmVlbi1zaGFyZVwiLCBzdHJlYW0pO1xuICAgICAgdGhpcy5lbWl0KFwic3RyZWFtLWZldGNoZWRcIiwge1xuICAgICAgICBtZWRpYUtpbmQ6IFwic2NyZWVuXCIsXG4gICAgICAgIGxhYmVsOiBcInNjcmVlbi1zaGFyZVwiLFxuICAgICAgICBzdHJlYW1cbiAgICAgIH0pO1xuICAgICAgY29uc3QgdmlkZW9UcmFjayA9IHN0cmVhbS5nZXRWaWRlb1RyYWNrcygpPy5bMF07XG4gICAgICBjb25zdCBhdWRpb1RyYWNrID0gc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCk/LlswXTtcbiAgICAgIGNvbnN0IHZpZGVvUHJvZHVjZSA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvZHVjZSh7XG4gICAgICAgICAgbGFiZWw6IFwic2NyZWVuLXNoYXJlLXZpZGVvXCIsXG4gICAgICAgICAgc3RyZWFtOiBuZXcgTWVkaWFTdHJlYW0oW3ZpZGVvVHJhY2tdKSxcbiAgICAgICAgICBhcHBEYXRhOiB7XG4gICAgICAgICAgICBwcm9kdWNlclBlZXJJZDogdGhpcy5wZWVySWRcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN0b3BUcmFja09uQ2xvc2U6IHRydWUsXG4gICAgICAgICAgcHJlZmZlcmVkQ29kZWM6IGRhdGE/LnByZWZmZXJlZENvZGVjXG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICAgIGNvbnN0IGF1ZGlvUHJvZHVjZSA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvZHVjZSh7XG4gICAgICAgICAgbGFiZWw6IFwic2NyZWVuLXNoYXJlLWF1ZGlvXCIsXG4gICAgICAgICAgc3RyZWFtOiBuZXcgTWVkaWFTdHJlYW0oW2F1ZGlvVHJhY2tdKSxcbiAgICAgICAgICBhcHBEYXRhOiB7XG4gICAgICAgICAgICBwcm9kdWNlclBlZXJJZDogdGhpcy5wZWVySWRcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN0b3BUcmFja09uQ2xvc2U6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgaWYgKHZpZGVvVHJhY2spIHtcbiAgICAgICAgdmlkZW9Qcm9kdWNlKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5fX3BlbmRpbmdQcm9kdWNlclRhc2tzLmRlbGV0ZShcInNjcmVlbi1zaGFyZS12aWRlb1wiKTtcbiAgICAgICAgfSkuY2F0Y2goKGVycm9yMikgPT4ge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgRXJyb3IgUHJvZHVjaW5nIFNjcmVlbiBTaGFyZSBWaWRlb1wiKTtcbiAgICAgICAgICB0aGlzLmRldmljZUhhbmRsZXIuc3RvcFN0cmVhbShcbiAgICAgICAgICAgIHRoaXMuX19hY3RpdmVTdHJlYW1zLmdldChcInNjcmVlbi1zaGFyZVwiKVxuICAgICAgICAgICk7XG4gICAgICAgICAgdGhpcy5fX2FjdGl2ZVN0cmVhbXMuZGVsZXRlKFwic2NyZWVuLXNoYXJlXCIpO1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcjIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChhdWRpb1RyYWNrKSB7XG4gICAgICAgIGF1ZGlvUHJvZHVjZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHRoaXMuX19wZW5kaW5nUHJvZHVjZXJUYXNrcy5kZWxldGUoXCJzY3JlZW4tc2hhcmUtYXVkaW9cIik7XG4gICAgICAgIH0pLmNhdGNoKChlcnJvcjIpID0+IHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIEVycm9yIFByb2R1Y2luZyBBdWRpb1wiKTtcbiAgICAgICAgICB0aGlzLmRldmljZUhhbmRsZXIuc3RvcFN0cmVhbShcbiAgICAgICAgICAgIHRoaXMuX19hY3RpdmVTdHJlYW1zLmdldChcInNjcmVlbi1zaGFyZVwiKVxuICAgICAgICAgICk7XG4gICAgICAgICAgdGhpcy5fX2FjdGl2ZVN0cmVhbXMuZGVsZXRlKFwic2NyZWVuLXNoYXJlXCIpO1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcjIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX19wZW5kaW5nRmV0Y2hpbmdTdHJlYW0uZGVsZXRlKFwic2NyZWVuLXNoYXJlXCIpO1xuICAgICAgcmV0dXJuIHN0cmVhbTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBFbmFibGluZyBTY3JlZW4gU2hhcmVcIik7XG4gICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgdGhpcy5kZXZpY2VIYW5kbGVyLnN0b3BTdHJlYW0odGhpcy5fX2FjdGl2ZVN0cmVhbXMuZ2V0KFwic2NyZWVuLXNoYXJlXCIpKTtcbiAgICAgIHRoaXMuX19hY3RpdmVTdHJlYW1zLmRlbGV0ZShcInNjcmVlbi1zaGFyZVwiKTtcbiAgICAgIHRoaXMuX19wZW5kaW5nRmV0Y2hpbmdTdHJlYW0uZGVsZXRlKFwic2NyZWVuLXNoYXJlXCIpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9KTtcbiAgLyoqXG4gICAqIEVuYWJsZXMgdGhlIGxvY2FsIG1pYyBhbmQgc3RhcnRzIHByb2R1Y2luZyB0aGUgc3RyZWFtIHdpdGggdGhlIGxhYmVsIGBhdWRpb2BcbiAgICogQHBhcmFtIGN1c3RvbVZpZGVvU3RyZWFtIChPcHRpb25hbCkgQ3VzdG9tIFZpZGVvIFN0cmVhbSB0byBwcm9kdWNlLCBpZiBub3QgcHJvdmlkZWQgaXQgd2lsbCBmZXRjaCB0aGUgc3RyZWFtIGZyb20gdGhlIGRldmljZVxuICAgKiBAcGFyYW0gcHJlZmZlcmVkQ29kZWMgKE9wdGlvbmFsKSBQcmVmZXJyZWQgQ29kZWMgdG8gYmUgdXNlZCBmb3IgdGhlIHN0cmVhbSAoIFN1cHBvcnRlZENvZGVjcyApLCBtYWtlIHN1cmUgdGhlIGNvZGVjIGlzIHN1cHBvcnRlZCBieSB0aGUgZGV2aWNlICggJ0Jyb3dzZXInIG9yICdSZWFjdE5hdGl2ZScgKVxuICAgKlxuICAgKiBAc3VtbWFyeSBUaGlzIGZ1bmN0aW9ucyBoYW5kbGUgdGhlIHByb2R1Y2luZyBvZiBtZWRpYSBzdHJlYW1zIHRvIGFsbCB0aGUgcmVtb3RlIHBlZXJzIGluIHRoZSByb29tLlxuICAgKiBpdCBlbmFibGVzIHRoZSBsb2NhbCBtaWMgZmV0Y2hlcyB0aGUgc3RyZWFtIG9wZW5zIHlvdSBtaWMgYWN0aXZlIGluZGljYXRvciBsaWdodCBvbiB0aGUgZGV2aWNlXG4gICAqIHVwb24gc3VjY2Vzc2Z1bGwgZmV0Y2hpbmcgb2YgdGhlIHN0cmVhbSBpdCBwcm9kdWNlcyB0aGUgc3RyZWFtIHdpdGggdGhlIGxhYmVsIGBhdWRpb2AgYW5kIGBzdG9wVHJhY2tPbkNsb3NlOiB0cnVlYCB0byBhbGwgdGhlIHJlbW90ZSBwZWVycyBpbiB0aGUgcm9vbS5cbiAgICogd2hlbiBjbG9zaW5nIHVzaW5nIGBkaXNhYmxlQXVkaW9gIGl0IHdpbGwgc3RvcCB0aGUgbG9jYWwgYXVkaW8gdHJhY2sgYW5kIGNsb3NlIHRoZSBwcm9kdWNlciB3aGljaCB3aWxsIG5vdGlmeSBhbGwgdGhlIFJlbW90ZVBlZXJzIHRoYXQgdGhpcyBwcm9kdWNlciBoYXMgc3RvcHBlZCBwcm9kdWNpbmdcbiAgICogYW5kIHRoZXkgc2hvdWxkIHN0b3AgY29uc3VtaW5nIGl0LlxuICAgKlxuICAgKiBgTk9URTogWW91IGNhbiBvbmx5IHByb2R1Y2UgdG8gYSByb29tIHdoZW4geW91IGhhdmUgam9pbmVkIHRoZSByb29tLCBpZiB5b3UgdHJ5IHRvIHByb2R1Y2UgYmVmb3JlIGpvaW5pbmcgdGhlIHJvb20gaXQgd2lsbCBmZXRjaCB0aGUgc3RyZWFtIGFuZCBzdGFydCBwcm9kdWNpbmcgd2hlbiB5b3Ugam9pbiB0aGUgcm9vbWBcbiAgICpcbiAgICogQHRocm93cyB7IEVycm9yIH0gSWYgdGhlIHN0cmVhbSBpcyBub3QgZm91bmRcbiAgICogQHRocm93cyB7IEVycm9yIH0gSWYgUHJlZmZlcmVkIENvZGVjIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIERldmljZSAoICdCcm93c2VyJyBvciAnUmVhY3ROYXRpdmUnIClcbiAgICogQHRocm93cyB7IEVycm9yIH0gSWYgRmFpbGVkIHRvIHByb2R1Y2UsIFJlYXNvbiB3aWxsIGJlIGluIHRoZSBlcnJvciBtZXNzYWdlXG4gICAqL1xuICBlbmFibGVBdWRpbyA9IGNoZWNrUGVybWlzc2lvbnMoe1xuICAgIGNhblByb2R1Y2U6IHRydWUsXG4gICAgY2FuUHJvZHVjZVNvdXJjZXM6IHsgbWljOiB0cnVlIH1cbiAgfSkudmFsaWRhdGUoXG4gICAgYXN5bmMgKGRhdGEpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nU3RyZWFtID0gdGhpcy5fX2FjdGl2ZVN0cmVhbXMuZ2V0KFwiYXVkaW9cIik7XG4gICAgICAgIGlmIChleGlzdGluZ1N0cmVhbSkge1xuICAgICAgICAgIGxvZ2dlci53YXJuKFwiXFx1ezFGNTE0fSBNaWMgU3RyZWFtIEFscmVhZHkgRW5hYmxlZFwiKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN0cmVhbTtcbiAgICAgICAgaWYgKGRhdGE/LmN1c3RvbUF1ZGlvU3RyZWFtKSB7XG4gICAgICAgICAgc3RyZWFtID0gZGF0YT8uY3VzdG9tQXVkaW9TdHJlYW07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgb25nb2luZ1N0cmVhbVByb21pc2UgPSB0aGlzLl9fcGVuZGluZ0ZldGNoaW5nU3RyZWFtLmdldChcIm1pY1wiKTtcbiAgICAgICAgICBpZiAob25nb2luZ1N0cmVhbVByb21pc2UpIHtcbiAgICAgICAgICAgIGF3YWl0IG9uZ29pbmdTdHJlYW1Qcm9taXNlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzdHJlYW1Qcm9taXNlID0gdGhpcy5kZXZpY2VIYW5kbGVyLmZldGNoU3RyZWFtKHtcbiAgICAgICAgICAgICAgbWVkaWFEZXZpY2VLaW5kOiBcIm1pY1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX19wZW5kaW5nRmV0Y2hpbmdTdHJlYW0uc2V0KFwibWljXCIsIHN0cmVhbVByb21pc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBwZW5kaW5nUHJvbWlzZSA9IHRoaXMuX19wZW5kaW5nRmV0Y2hpbmdTdHJlYW0uZ2V0KFwibWljXCIpO1xuICAgICAgICAgIGlmICghcGVuZGluZ1Byb21pc2UpIHtcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKFwiXFx1ezFGNTE0fSBQZW5kaW5nIE1pYyBQcm9taXNlIE5vdCBGb3VuZFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgeyBzdHJlYW06IGZldGNoZWRTdHJlYW0sIGVycm9yIH0gPSBhd2FpdCBwZW5kaW5nUHJvbWlzZTtcbiAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgRXJyb3IgRmV0Y2hpbmcgU3RyZWFtIEZyb20gRGV2aWNlXCIpO1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlxcdTI3NEMgRXJyb3IgRmV0Y2hpbmcgU3RyZWFtIEZyb20gRGV2aWNlXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWZldGNoZWRTdHJlYW0pIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgU3RyZWFtIE5vdCBGb3VuZCwgY2Fubm90IGRvIGVuYWJsZUF1ZGlvXCIpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiXFx1Mjc0QyBTdHJlYW0gTm90IEZvdW5kXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzdHJlYW0gPSBmZXRjaGVkU3RyZWFtO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX19hY3RpdmVTdHJlYW1zLnNldChcImF1ZGlvXCIsIHN0cmVhbSk7XG4gICAgICAgIHRoaXMuZW1pdChcInN0cmVhbS1mZXRjaGVkXCIsIHtcbiAgICAgICAgICBtZWRpYUtpbmQ6IFwibWljXCIsXG4gICAgICAgICAgc3RyZWFtLFxuICAgICAgICAgIGxhYmVsOiBcImF1ZGlvXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucHJvZHVjZSh7XG4gICAgICAgICAgbGFiZWw6IFwiYXVkaW9cIixcbiAgICAgICAgICBzdHJlYW0sXG4gICAgICAgICAgYXBwRGF0YToge1xuICAgICAgICAgICAgcHJvZHVjZXJQZWVySWQ6IHRoaXMucGVlcklkXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzdG9wVHJhY2tPbkNsb3NlOiB0cnVlLFxuICAgICAgICAgIHByZWZmZXJlZENvZGVjOiBkYXRhPy5wcmVmZmVyZWRDb2RlY1xuICAgICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICB0aGlzLl9fcGVuZGluZ1Byb2R1Y2VyVGFza3MuZGVsZXRlKFwiYXVkaW9cIik7XG4gICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgRXJyb3IgUHJvZHVjaW5nIEF1ZGlvXCIpO1xuICAgICAgICAgIHRoaXMuZGV2aWNlSGFuZGxlci5zdG9wU3RyZWFtKHRoaXMuX19hY3RpdmVTdHJlYW1zLmdldChcImF1ZGlvXCIpKTtcbiAgICAgICAgICB0aGlzLl9fYWN0aXZlU3RyZWFtcy5kZWxldGUoXCJhdWRpb1wiKTtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fX3BlbmRpbmdGZXRjaGluZ1N0cmVhbS5kZWxldGUoXCJtaWNcIik7XG4gICAgICAgIHJldHVybiBzdHJlYW07XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIEVycm9yIEVuYWJsaW5nIEF1ZGlvXCIpO1xuICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICB0aGlzLmRldmljZUhhbmRsZXIuc3RvcFN0cmVhbSh0aGlzLl9fYWN0aXZlU3RyZWFtcy5nZXQoXCJhdWRpb1wiKSk7XG4gICAgICAgIHRoaXMuX19hY3RpdmVTdHJlYW1zLmRlbGV0ZShcImF1ZGlvXCIpO1xuICAgICAgICB0aGlzLl9fcGVuZGluZ0ZldGNoaW5nU3RyZWFtLmRlbGV0ZShcIm1pY1wiKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICApO1xuICAvKipcbiAgICogU3RvcHMgdGhlIHVuZGVybHlpbmcgcHJvZHVjaW5nIG9mIGEgc3RyZWFtIGZvciBhIHBhcnRpY3VsYXIgbGFiZWxcbiAgICpcbiAgICogYE5PVEU6IFRoaXMgd2lsbCBub3RpZnkgYWxsIHRoZSBSZW1vdGVQZWVycyB0aGF0IHRoaXMgcHJvZHVjZXIgaGFzIHN0b3BwZWQgcHJvZHVjaW5nIGFuZCB0aGV5IHNob3VsZCBzdG9wIGNvbnN1bWluZyBpdC5gXG4gICAqXG4gICAqIEBwYXJhbSBkYXRhIERhdGEgdG8gc3RvcCBwcm9kdWNpbmcgeyBsYWJlbDogc3RyaW5nIH1cbiAgICovXG4gIHN0b3BQcm9kdWNpbmcgPSAoZGF0YSkgPT4ge1xuICAgIHRoaXMuX193YWl0aW5nVG9Qcm9kdWNlLmRlbGV0ZShkYXRhLmxhYmVsKTtcbiAgICB0aGlzLl9fcGVuZGluZ1Byb2R1Y2VyVGFza3MuZGVsZXRlKGRhdGEubGFiZWwpO1xuICAgIGxldCBjbG9zZWRTdHJlYW0gPSBmYWxzZTtcbiAgICBjb25zdCBwcm9kdWNlciA9IHRoaXMuZ2V0UHJvZHVjZXJXaXRoTGFiZWwoZGF0YS5sYWJlbCk7XG4gICAgaWYgKHByb2R1Y2VyKSB7XG4gICAgICBpZiAoIXByb2R1Y2VyLmNsb3NlZCkgcHJvZHVjZXIuY2xvc2UoKTtcbiAgICAgIGNsb3NlZFN0cmVhbSA9IHRydWU7XG4gICAgICB0aGlzLnNvY2tldC5wdWJsaXNoKFwiY2xvc2VQcm9kdWNlclwiLCB7XG4gICAgICAgIHByb2R1Y2VySWQ6IHByb2R1Y2VyLmlkXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgY2xvc2VkU3RyZWFtTGFiZWwgPSBkYXRhLmxhYmVsLnN0YXJ0c1dpdGgoXCJzY3JlZW4tc2hhcmVcIikgPyBcInNjcmVlbi1zaGFyZVwiIDogZGF0YS5sYWJlbDtcbiAgICBjb25zdCBzdHJlYW0gPSB0aGlzLl9fYWN0aXZlU3RyZWFtcy5nZXQoY2xvc2VkU3RyZWFtTGFiZWwpO1xuICAgIGlmIChzdHJlYW0pIHtcbiAgICAgIHRoaXMuZGV2aWNlSGFuZGxlci5zdG9wU3RyZWFtKHN0cmVhbSk7XG4gICAgICB0aGlzLl9fYWN0aXZlU3RyZWFtcy5kZWxldGUoY2xvc2VkU3RyZWFtTGFiZWwpO1xuICAgICAgY2xvc2VkU3RyZWFtID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGNsb3NlZFN0cmVhbSkge1xuICAgICAgdGhpcy5lbWl0KFwic3RyZWFtLWNsb3NlZFwiLCB7XG4gICAgICAgIGxhYmVsOiBkYXRhLmxhYmVsLFxuICAgICAgICByZWFzb246IHtcbiAgICAgICAgICBjb2RlOiAxMjAwLFxuICAgICAgICAgIHRhZzogXCJTVFJFQU1fQ0xPU0VEXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJTdG9wcGVkIFN0cmVhbWluZ1wiXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIFN0b3BzIHRoZSB1bmRlcmx5aW5nIHByb2R1Y2luZyBvZiBhIGNhbWVyYSBzdHJlYW0sIHN0b3BzIHRoZSBsb2NhbCB0cmFjayBhbmQgY2xvc2VzIHRoZSBwcm9kdWNlclxuICAgKlxuICAgKiBgTk9URTogVGhpcyB3aWxsIG5vdGlmeSBhbGwgdGhlIFJlbW90ZVBlZXJzIHRoYXQgdGhpcyBwcm9kdWNlciBoYXMgc3RvcHBlZCBwcm9kdWNpbmcgYW5kIHRoZXkgc2hvdWxkIHN0b3AgY29uc3VtaW5nIGl0LiBpZiB5b3UgaGF2ZSBqb2luZWQgdGhlIHJvb20sIGVsc2UgaXQgd2lsbCBqdXN0IGNsb3NlIHRoZSBzdHJlYW1gXG4gICAqXG4gICAqIEBwYXJhbSBkYXRhIERhdGEgdG8gc3RvcCBwcm9kdWNpbmcgeyBsYWJlbDogc3RyaW5nIH1cbiAgICovXG4gIGRpc2FibGVWaWRlbyA9IGFzeW5jICgpID0+IHtcbiAgICB0aGlzLnN0b3BQcm9kdWNpbmcoe1xuICAgICAgbGFiZWw6IFwidmlkZW9cIlxuICAgIH0pO1xuICB9O1xuICAvKipcbiAgICogUmVwbGFjZXMgdGhlIGN1cnJlbnQgdmlkZW8gc3RyZWFtIHdpdGggdGhlIG5ldyBzdHJlYW1cbiAgICpcbiAgICogaWYgeW91IGhhdmUgcHJvZHVjZWQgYSBzdHJlYW0gd2l0aCBsYWJlbCBgdmlkZW9gIG9yIHVzZWQgdGhlIGRlZmF1bHQgZnVuY3Rpb24gYGVuYWJsZVZpZGVvYCBhbmQgeW91IHdhbnQgdG8gcmVwbGFjZSBpdCB3aXRoIGEgbmV3IHN0cmVhbVxuICAgKiBAcGFyYW0gc3RyZWFtIC0gTmV3IFZpZGVvIFN0cmVhbVxuICAgKi9cbiAgcmVwbGFjZVZpZGVvU3RyZWFtID0gYXN5bmMgKHN0cmVhbSkgPT4ge1xuICAgIGF3YWl0IHRoaXMucmVwbGFjZVN0cmVhbSh7XG4gICAgICBsYWJlbDogXCJ2aWRlb1wiLFxuICAgICAgbmV3U3RyZWFtOiBzdHJlYW1cbiAgICB9KTtcbiAgfTtcbiAgLyoqXG4gICAqIENoYW5nZXMgdGhlIFZpZGVvIHNvdXJjZSB0byB0aGUgZ2l2ZW4gZGV2aWNlSWQsIHNldHMgdGhlIHByZWZlcnJlZCBjYW0gZGV2aWNlIGFzIHRoZSBnaXZlbiBkZXZpY2VJZFxuICAgKiBAcGFyYW0gZGV2aWNlSWRcbiAgICovXG4gIGNoYW5nZVZpZGVvU291cmNlID0gYXN5bmMgKGRldmljZUlkKSA9PiB7XG4gICAgdGhpcy5kZXZpY2VIYW5kbGVyLnNldFByZWZlcnJlZERldmljZSh7XG4gICAgICBkZXZpY2VJZCxcbiAgICAgIGRldmljZUtpbmQ6IFwiY2FtXCJcbiAgICB9KTtcbiAgICBjb25zdCBzdHJlYW0gPSB0aGlzLl9fYWN0aXZlU3RyZWFtcy5nZXQoXCJ2aWRlb1wiKTtcbiAgICBpZiAoIXN0cmVhbSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7IHN0cmVhbTogbmV3U3RyZWFtIH0gPSBhd2FpdCB0aGlzLmRldmljZUhhbmRsZXIuZmV0Y2hTdHJlYW0oe1xuICAgICAgbWVkaWFEZXZpY2VLaW5kOiBcImNhbVwiXG4gICAgfSk7XG4gICAgaWYgKCFuZXdTdHJlYW0pIHJldHVybjtcbiAgICBhd2FpdCB0aGlzLnJlcGxhY2VWaWRlb1N0cmVhbShuZXdTdHJlYW0pO1xuICB9O1xuICAvKipcbiAgICogUmVwbGFjZXMgdGhlIGN1cnJlbnQgYXVkaW8gc3RyZWFtIHdpdGggdGhlIG5ldyBzdHJlYW1cbiAgICogaWYgeW91IGhhdmUgcHJvZHVjZWQgYSBzdHJlYW0gd2l0aCBsYWJlbCBgYXVkaW9gIG9yIHVzZWQgdGhlIGRlZmF1bHQgZnVuY3Rpb24gYGVuYWJsZUF1ZGlvYCBhbmQgeW91IHdhbnQgdG8gcmVwbGFjZSBpdCB3aXRoIGEgbmV3IHN0cmVhbVxuICAgKiBAcGFyYW0gc3RyZWFtIC0gTmV3IEF1ZGlvIFN0cmVhbVxuICAgKlxuICAgKi9cbiAgcmVwbGFjZUF1ZGlvU3RyZWFtID0gYXN5bmMgKHN0cmVhbSkgPT4ge1xuICAgIGF3YWl0IHRoaXMucmVwbGFjZVN0cmVhbSh7XG4gICAgICBsYWJlbDogXCJhdWRpb1wiLFxuICAgICAgbmV3U3RyZWFtOiBzdHJlYW1cbiAgICB9KTtcbiAgfTtcbiAgLyoqXG4gICAqIFJlcGxhY2UgdGhlIGN1cnJlbnQgc3RyZWFtIHdpdGggdGhlIG5ldyBzdHJlYW0gYmFzZWQgb24gdGhlIGxhYmVsIHVzZWQgdG8gcHJvZHVjZSB0aGUgc3RyZWFtXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIEZvciBWaWRlb1xuICAgKiBhd2FpdCBsb2NhbFBlZXIucmVwbGFjZVN0cmVhbSh7XG4gICAqICBsYWJlbDogJ3ZpZGVvJyxcbiAgICogIG5ld1N0cmVhbTogbmV3U3RyZWFtXG4gICAqIH0pXG4gICAqXG4gICAqIElmIGFueSBjdXN0b20gbGFiZWwgdXNlZFxuICAgKiBhd2FpdCBsb2NhbFBlZXIucmVwbGFjZVN0cmVhbSh7XG4gICAqICBsYWJlbDogJ2N1c3RvbScsXG4gICAqICBuZXdTdHJlYW06IG5ld1N0cmVhbVxuICAgKiB9KVxuICAgKlxuICAgKiBAcGFyYW0gZGF0YSAtIHsgbGFiZWw6IHN0cmluZywgbmV3U3RyZWFtOiBNZWRpYVN0cmVhbSB9XG4gICAqIEB0aHJvd3MgeyBFcnJvciB9IC0gSWYgcmVwbGFjZSBTdHJlYW0gZmFpbGVkXG4gICAqL1xuICByZXBsYWNlU3RyZWFtID0gYXN5bmMgKGRhdGEpID0+IHtcbiAgICBsb2dnZXIuaW5mbyhgXFx1ezFGNTE0fSBSZXBsYWNpbmcgJHtkYXRhLmxhYmVsfSBTdHJlYW0gYCk7XG4gICAgY29uc3QgcHJvZHVjZXIgPSB0aGlzLmdldFByb2R1Y2VyV2l0aExhYmVsKGRhdGEubGFiZWwpO1xuICAgIGNvbnN0IHRyYWNrID0gZGF0YS5uZXdTdHJlYW0uZ2V0VHJhY2tzKClbMF07XG4gICAgaWYgKHRyYWNrKSB7XG4gICAgICB0cmFjay5hZGRFdmVudExpc3RlbmVyKFwiZW5kZWRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLnN0b3BQcm9kdWNpbmcoeyBsYWJlbDogZGF0YS5sYWJlbCB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAocHJvZHVjZXIpIHtcbiAgICAgIGlmIChwcm9kdWNlci5wYXVzZWQpIHtcbiAgICAgICAgdHJhY2suZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgYXdhaXQgcHJvZHVjZXIucmVwbGFjZVRyYWNrKHsgdHJhY2sgfSk7XG4gICAgfVxuICAgIGNvbnN0IGNsb3NlZFN0cmVhbUxhYmVsID0gZGF0YS5sYWJlbC5zdGFydHNXaXRoKFwic2NyZWVuLXNoYXJlXCIpID8gXCJzY3JlZW4tc2hhcmVcIiA6IGRhdGEubGFiZWw7XG4gICAgY29uc3QgcHJldlN0cmVhbSA9IHRoaXMuX19hY3RpdmVTdHJlYW1zLmdldChjbG9zZWRTdHJlYW1MYWJlbCk7XG4gICAgaWYgKHByZXZTdHJlYW0gJiYgIXRoaXMuX193YWl0aW5nVG9Qcm9kdWNlLmhhcyhjbG9zZWRTdHJlYW1MYWJlbCkpIHtcbiAgICAgIHRoaXMuZGV2aWNlSGFuZGxlci5zdG9wU3RyZWFtKHByZXZTdHJlYW0pO1xuICAgICAgdGhpcy5fX2FjdGl2ZVN0cmVhbXMuZGVsZXRlKGNsb3NlZFN0cmVhbUxhYmVsKTtcbiAgICAgIHRoaXMuX19hY3RpdmVTdHJlYW1zLnNldChjbG9zZWRTdHJlYW1MYWJlbCwgZGF0YS5uZXdTdHJlYW0pO1xuICAgIH0gZWxzZSBpZiAocHJldlN0cmVhbSAmJiB0aGlzLl9fd2FpdGluZ1RvUHJvZHVjZS5oYXMoY2xvc2VkU3RyZWFtTGFiZWwpKSB7XG4gICAgICBmb3IgKGNvbnN0IHRyYWNrMiBvZiBwcmV2U3RyZWFtLmdldFRyYWNrcygpKSB7XG4gICAgICAgIHByZXZTdHJlYW0ucmVtb3ZlVHJhY2sodHJhY2syKTtcbiAgICAgICAgdHJhY2syLnN0b3AoKTtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgdHJhY2syIG9mIGRhdGEubmV3U3RyZWFtLmdldFRyYWNrcygpKSB7XG4gICAgICAgIHByZXZTdHJlYW0uYWRkVHJhY2sodHJhY2syKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbWVkaWFEZXZpY2VLaW5kID0gZ2V0TWVkaWFEZXZpY2VLaW5kKHRyYWNrKTtcbiAgICB0aGlzLmVtaXQoXCJzdHJlYW0tZmV0Y2hlZFwiLCB7XG4gICAgICBsYWJlbDogZGF0YS5sYWJlbCxcbiAgICAgIHN0cmVhbTogZGF0YS5uZXdTdHJlYW0sXG4gICAgICBtZWRpYUtpbmQ6IG1lZGlhRGV2aWNlS2luZFxuICAgIH0pO1xuICB9O1xuICAvKipcbiAgICogQ2hhbmdlcyB0aGUgQXVkaW8gc291cmNlIHRvIHRoZSBnaXZlbiBkZXZpY2VJZCwgc2V0cyB0aGUgcHJlZmVycmVkIG1pYyBkZXZpY2UgYXMgdGhlIGdpdmVuIGRldmljZUlkXG4gICAqIEBwYXJhbSBkZXZpY2VJZFxuICAgKi9cbiAgY2hhbmdlQXVkaW9Tb3VyY2UgPSBhc3luYyAoZGV2aWNlSWQpID0+IHtcbiAgICB0aGlzLmRldmljZUhhbmRsZXIuc2V0UHJlZmVycmVkRGV2aWNlKHtcbiAgICAgIGRldmljZUlkLFxuICAgICAgZGV2aWNlS2luZDogXCJtaWNcIlxuICAgIH0pO1xuICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMuX19hY3RpdmVTdHJlYW1zLmdldChcImF1ZGlvXCIpO1xuICAgIGlmICghc3RyZWFtKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgc3RyZWFtOiBuZXdTdHJlYW0gfSA9IGF3YWl0IHRoaXMuZGV2aWNlSGFuZGxlci5mZXRjaFN0cmVhbSh7XG4gICAgICBtZWRpYURldmljZUtpbmQ6IFwibWljXCJcbiAgICB9KTtcbiAgICBpZiAoIW5ld1N0cmVhbSkgcmV0dXJuO1xuICAgIGF3YWl0IHRoaXMucmVwbGFjZUF1ZGlvU3RyZWFtKG5ld1N0cmVhbSk7XG4gIH07XG4gIC8qKlxuICAgKiBTdG9wcyB0aGUgdW5kZXJseWluZyBwcm9kdWNpbmcgb2YgYSBtaWNyb3Bob25lIHN0cmVhbSwgc3RvcHMgdGhlIGxvY2FsIHRyYWNrIGFuZCBjbG9zZXMgdGhlIHByb2R1Y2VyXG4gICAqXG4gICAqIGBOT1RFOiBUaGlzIHdpbGwgbm90aWZ5IGFsbCB0aGUgUmVtb3RlUGVlcnMgdGhhdCB0aGlzIHByb2R1Y2VyIGhhcyBzdG9wcGVkIHByb2R1Y2luZyBhbmQgdGhleSBzaG91bGQgc3RvcCBjb25zdW1pbmcgaXQuYFxuICAgKi9cbiAgZGlzYWJsZUF1ZGlvID0gYXN5bmMgKCkgPT4ge1xuICAgIHRoaXMuc3RvcFByb2R1Y2luZyh7XG4gICAgICBsYWJlbDogXCJhdWRpb1wiXG4gICAgfSk7XG4gIH07XG4gIC8qKlxuICAgKiBQYXVzZXMgdGhlIGF1ZGlvIHN0cmVhbSwgcGF1c2VzIHRoZSB1bmRlcmx5aW5nIHByb2R1Y2VyIGJ1dCBkb2VzIG5vdCBzdG9wIHRoZSBsb2NhbCB0cmFjayAtIHVzZWZ1bCB3aGVuIHVzZXIgaGFzIGpvaW5lZCB0aGUgcm9vbSBhbmQgd2FudHMgdG8gcGF1c2UgdGhlIGF1ZGlvIHN0cmVhbSB3aGljaCBpcyBmYXN0ZXIgdGhhbiBkaXNhYmxpbmcgdGhlIGF1ZGlvIHN0cmVhbVxuICAgKlxuICAgKiBgTk9URTogT25seSB1c2UgdGhpcyBmdW5jdGlvbiB3aGVuIHBlZXIgaGFzIGpvaW5lZCB0aGUgcm9vbSBlbHNlIHVzZSBkaXNhYmxlQXVkaW8sIFRoZSBMb2NhbFBlZXIgd2lsbCBub3QgYmUgcHJvZHVjaW5nIGFueSBhdWRpbyBzdHJlYW0gYnV0IHRoZSBsb2NhbCB0cmFjayB3aWxsIHN0aWxsIGJlIGFjdGl2ZSwgeW91IGNhbiByZXN1bWUgdGhlIGF1ZGlvIHN0cmVhbSB1c2luZyByZXN1bWVBdWRpbyBvciBzdG9wIHRoZSBhdWRpbyBzdHJlYW0gdXNpbmcgZGlzYWJsZUF1ZGlvYFxuICAgKlxuICAgKiBAdGhyb3dzIEVycm9yIC0gSWYgUGF1c2luZyBBdWRpbyBGYWlsZWQsIGl0IHdpbGwgZGlzYWJsZSB0aGUgYXVkaW8gc3RyZWFtLCBhbmQgdGhyb3cgYW4gZXJyb3JcbiAgICovXG4gIHBhdXNlQXVkaW8gPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhcIlxcdXsxRjUxNH0gUGF1c2luZyBBdWRpbyBTdHJlYW1cIik7XG4gICAgICBjb25zdCBhdWRpb1N0cmVhbSA9IHRoaXMuX19hY3RpdmVTdHJlYW1zLmdldChcImF1ZGlvXCIpO1xuICAgICAgaWYgKCFhdWRpb1N0cmVhbSkge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgICAgXCJcXHUyNzRDIE5vIEF1ZGlvIFN0cmVhbSBGb3VuZCwgdXNlIGVuYWJsZUF1ZGlvIHRvIGVuYWJsZSBhdWRpbyBmaXJzdCBiZWZvcmUgcGF1c2luZ1wiXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRyYWNrID0gYXVkaW9TdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXTtcbiAgICAgIGlmICghdHJhY2spIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICAgIFwiXFx1Mjc0QyBObyBBdWRpbyBUcmFjayBGb3VuZCwgdXNlIGVuYWJsZUF1ZGlvIHRvIGVuYWJsZSBhdWRpbyBmaXJzdCBiZWZvcmUgcGF1c2luZ1wiXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHByb2R1Y2VyID0gdGhpcy5nZXRQcm9kdWNlcldpdGhMYWJlbChcImF1ZGlvXCIpO1xuICAgICAgaWYgKCFwcm9kdWNlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcXHUyNzRDIENhbm5vdCBQYXVzZSBBdWRpbywgUHJvZHVjZXIgbm90IGZvdW5kXCIpO1xuICAgICAgfVxuICAgICAgcHJvZHVjZXIucGF1c2UoKTtcbiAgICAgIHRoaXMuc29ja2V0LnB1Ymxpc2goXCJwYXVzZVByb2R1Y2VyXCIsIHtcbiAgICAgICAgcHJvZHVjZXJJZDogcHJvZHVjZXIuaWRcbiAgICAgIH0pO1xuICAgICAgdGhpcy5lbWl0KFwic3RyZWFtLXBhdXNlZFwiLCB7XG4gICAgICAgIGxhYmVsOiBcImF1ZGlvXCIsXG4gICAgICAgIG1lZGlhS2luZDogXCJtaWNcIlxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yIFBhdXNpbmcgQXVkaW9cIiwgZXJyb3IpO1xuICAgICAgYXdhaXQgdGhpcy5kaXNhYmxlQXVkaW8oKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIFJlc3VtZXMgdGhlIGF1ZGlvIHN0cmVhbSwgcmVzdW1lcyB0aGUgdW5kZXJseWluZyBwcm9kdWNlciBhbmQgc3RhcnRzIHByb2R1Y2luZyB0aGUgYXVkaW8gc3RyZWFtIC0gdXNlZnVsIHdoZW4gdXNlciBoYXMgYGpvaW5lZCB0aGUgcm9vbWAgYW5kIHdhbnRzIHRvIHJlc3VtZSB0aGUgYXVkaW8gc3RyZWFtXG4gICAqXG4gICAqIGBOb3RlOiBXb3JrcyBvbmx5IGlmIHRoZSBhdWRpbyBzdHJlYW0gaXMgcGF1c2VkIHVzaW5nIHBhdXNlQXVkaW9gXG4gICAqXG4gICAqIEB0aHJvd3MgRXJyb3IgLSBJZiBSZXN1bWluZyBBdWRpbyBGYWlsZWQsIGl0IHdpbGwgZGlzYWJsZSB0aGUgYXVkaW8gc3RyZWFtLCBhbmQgdGhyb3cgYW4gZXJyb3JcbiAgICovXG4gIHJlc3VtZUF1ZGlvID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBsb2dnZXIuZGVidWcoXCJcXHV7MUY1MTR9IFJlc3VtaW5nIEF1ZGlvIFN0cmVhbVwiKTtcbiAgICAgIGNvbnN0IGF1ZGlvU3RyZWFtID0gdGhpcy5fX2FjdGl2ZVN0cmVhbXMuZ2V0KFwiYXVkaW9cIik7XG4gICAgICBpZiAoIWF1ZGlvU3RyZWFtKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcbiAgICAgICAgICBcIlxcdTI3NEMgTm8gQXVkaW8gU3RyZWFtIEZvdW5kLCB1c2UgZW5hYmxlQXVkaW8gdG8gZW5hYmxlIGF1ZGlvIGZpcnN0IGJlZm9yZSByZXN1bWluZ1wiXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRyYWNrID0gYXVkaW9TdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXTtcbiAgICAgIGlmICghdHJhY2spIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICAgIFwiXFx1Mjc0QyBObyBBdWRpbyBUcmFjayBGb3VuZCwgdXNlIGVuYWJsZUF1ZGlvIHRvIGVuYWJsZSBhdWRpbyBmaXJzdCBiZWZvcmUgcmVzdW1pbmdcIlxuICAgICAgICApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBwcm9kdWNlciA9IHRoaXMuZ2V0UHJvZHVjZXJXaXRoTGFiZWwoXCJhdWRpb1wiKTtcbiAgICAgIGlmICghcHJvZHVjZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiXFx1Mjc0QyBDYW5ub3QgUmVzdW1lIEF1ZGlvLCBQcm9kdWNlciBub3QgZm91bmRcIik7XG4gICAgICB9XG4gICAgICBwcm9kdWNlci5yZXN1bWUoKTtcbiAgICAgIHRoaXMuc29ja2V0LnB1Ymxpc2goXCJyZXN1bWVQcm9kdWNlclwiLCB7XG4gICAgICAgIHByb2R1Y2VySWQ6IHByb2R1Y2VyLmlkXG4gICAgICB9KTtcbiAgICAgIHRoaXMuZW1pdChcInN0cmVhbS1wbGF5YWJsZVwiLCB7XG4gICAgICAgIGxhYmVsOiBcImF1ZGlvXCIsXG4gICAgICAgIHByb2R1Y2VyXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgUmVzdW1pbmcgQXVkaW9cIiwgZXJyb3IpO1xuICAgICAgYXdhaXQgdGhpcy5kaXNhYmxlQXVkaW8oKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIFN0b3BzIHRoZSB1bmRlcmx5aW5nIHByb2R1Y2luZyBvZiBhIHNjcmVlbi1zaGFyZSBzdHJlYW0sIHN0b3BzIHRoZSBsb2NhbCB0cmFjayBhbmQgY2xvc2VzIHRoZSBwcm9kdWNlclxuICAgKlxuICAgKiBgTk9URTogVGhpcyB3aWxsIG5vdGlmeSBhbGwgdGhlIFJlbW90ZVBlZXJzIHRoYXQgdGhpcyBwcm9kdWNlciBoYXMgc3RvcHBlZCBwcm9kdWNpbmcgYW5kIHRoZXkgc2hvdWxkIHN0b3AgY29uc3VtaW5nIGl0LiBpZiB5b3UgaGF2ZSBqb2luZWQgdGhlIHJvb20sIGVsc2UgaXQgd2lsbCBqdXN0IGNsb3NlIHRoZSBzdHJlYW1gXG4gICAqL1xuICBzdG9wU2NyZWVuU2hhcmUgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuc3RvcFByb2R1Y2luZyh7XG4gICAgICAgIGxhYmVsOiBcInNjcmVlbi1zaGFyZS12aWRlb1wiXG4gICAgICB9KTtcbiAgICAgIHRoaXMuc3RvcFByb2R1Y2luZyh7XG4gICAgICAgIGxhYmVsOiBcInNjcmVlbi1zaGFyZS1hdWRpb1wiXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3IgRGlzYWJsaW5nIFNjcmVlbiBTaGFyZVwiLCBlcnJvcik7XG4gICAgfVxuICB9O1xuICAvKipcbiAgICogQ29uc3VtZXMgYSBzdHJlYW0gd2l0aCB0aGUgcHJvZHVjZXJJZCBhbmQgcGVlcklkIG9mIHRoZSBSZW1vdGVQZWVyLCBhcHBEYXRhIGlzIGFwcGxpY2F0aW9uIGxldmVsIGN1c3RvbSBkYXRhIHdoaWNoXG4gICAqIGNhbiBiZSBhZGRlZCB0byB0aGUgY29uc3VtZXIgZm9yIHRoZSBMb2NhbFBlZXIsIHRoaXMgZGF0YSB3aWxsIGJlIGF2YWlsYWJsZSBpbiB0aGUgY29uc3VtZXIgb2JqZWN0IGFuZCBjYW4gYmUgdXNlZCBvbmx5IGJ5IHRoZSBMb2NhbFBlZXIuXG4gICAqXG4gICAqIGBOT1RFOiBUaGlzIHdpbGwgbm90IG5vdGlmeSB0aGUgUmVtb3RlUGVlcnMgdGhhdCB5b3UgYXJlIGNvbnN1bWluZyBhIHN0cmVhbSwgeW91IGhhdmUgdG8gbm90aWZ5IHRoZW0gbWFudWFsbHlgXG4gICAqIEBzdW1tYXJ5IEV2ZXJ5IHRpbWUgYSBSZW1vdGVQZWVyIGlzIHByb2R1Y2luZyBhIE1lZGlhIGluIHRoZSBSb29tLCBMb2NhbFBlZXIgd2lsbCBiZSBub3RpZmllZCBhYm91dCBpdCBhbmQgaXQgd2lsbCBiZSBhYmxlIHRvIGNvbnN1bWUgaXQuXG4gICAqIENvbnN1bWluZyBpcyBhIHByb2Nlc3Mgd2hlcmUgdGhlIG1lZGlhIGlzIHJlY2VpdmVkIGZyb20gdGhlIFJlbW90ZVBlZXIgYW5kIHRoZSBzdHJlYW0gY2FuIGJlIHBsYXllZCBvbiB0aGUgTG9jYWxQZWVycyBkZXZpY2UuXG4gICAqXG4gICAqIFRvIGdldCB0aGUgY29uc3VtZXIgYmFjayB5b3UgY2FuIHVzZVxuICAgKlxuICAgKiBjb25zdCByZW1vdGVQZWVyID0gdGhpcy5yb29tLmdldFJlbW90ZVBlZXJCeUlkKGRhdGEucGVlcklkKTtcbiAgICpcbiAgICogYHJlbW90ZVBlZXIub24oJ3N0cmVhbS1wbGF5YWJsZScsICh7IGxhYmVsOiBzdHJpbmc7IGNvbnN1bWVyOiBDb25zdW1lciB9KSA9PiB7fSlgXG4gICAqXG4gICAqIEBwYXJhbSBkYXRhIC0ge3BlZXJJZDogc3RyaW5nLCBsYWJlbDogc3RyaW5nLCBhcHBEYXRhOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPn1cbiAgICogQHRocm93cyB7IEVycm9yIH0gLSBJZiBDb25zdW1pbmcgU3RyZWFtIEZhaWxlZFxuICAgKi9cbiAgY29uc3VtZSA9IGNoZWNrUGVybWlzc2lvbnMoe1xuICAgIGNhbkNvbnN1bWU6IHRydWVcbiAgfSkudmFsaWRhdGUoXG4gICAgYXN5bmMgKGRhdGEpID0+IHtcbiAgICAgIGNvbnN0IHJlbW90ZVBlZXIgPSB0aGlzLl9fcmVtb3RlUGVlcnMuZ2V0KGRhdGEucGVlcklkKTtcbiAgICAgIGlmICghcmVtb3RlUGVlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFJlbW90ZSBQZWVyIE5vdCBGb3VuZCB3aXRoIFBlZXJJZCAke2RhdGEucGVlcklkfWApO1xuICAgICAgfVxuICAgICAgY29uc3QgbGFiZWxEYXRhID0gcmVtb3RlUGVlci5nZXRMYWJlbERhdGEoZGF0YS5sYWJlbCk7XG4gICAgICBpZiAoIWxhYmVsRGF0YSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYFJlbW90ZSBQZWVyIGlzIG5vdCBwcm9kdWNpbmcgd2l0aCBMYWJlbCAke2RhdGEubGFiZWx9YFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3QgY29uc3VtZXJFeGlzdHMgPSByZW1vdGVQZWVyLmdldENvbnN1bWVyKGRhdGEubGFiZWwpO1xuICAgICAgaWYgKGNvbnN1bWVyRXhpc3RzPy5jb25zdW1pbmcpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oXCJcXHV7MUY1MTR9IENvbnN1bWVyIEFscmVhZHkgRXhpc3RzIHdpdGggbGFiZWwgXCIsIGRhdGEubGFiZWwpO1xuICAgICAgICByZXR1cm4gY29uc3VtZXJFeGlzdHM7XG4gICAgICB9XG4gICAgICBjb25zdCBwZW5kaW5nUHJvbWlzZSA9IHRoaXMuX19wZW5kaW5nQ29uc3VtZXJUYXNrcy5nZXQoXG4gICAgICAgIGxhYmVsRGF0YT8ucHJvZHVjZXJJZFxuICAgICAgKTtcbiAgICAgIGlmIChwZW5kaW5nUHJvbWlzZSkge1xuICAgICAgICBsb2dnZXIud2FybihcbiAgICAgICAgICBgXFx1ezFGNTE0fSBDb25zdW1lciBUYXNrIFBlbmRpbmcgdG8gYmUgQ29uc3VtZWQgd2l0aCBsYWJlbCAke2RhdGEubGFiZWx9LCBSZXR1cm5pbmdgXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGNvbnN1bWVyMiA9IGF3YWl0IHBlbmRpbmdQcm9taXNlO1xuICAgICAgICByZXR1cm4gY29uc3VtZXIyO1xuICAgICAgfVxuICAgICAgbG9nZ2VyLmluZm8oXCJcXHV7MUY1MTR9IENvbnN1bWluZyBTdHJlYW0gd2l0aCBsYWJlbCBcIiwgZGF0YS5sYWJlbCk7XG4gICAgICBpZiAoIXRoaXMuX19yZWN2VHJhbnNwb3J0KSB7XG4gICAgICAgIGxvZ2dlci5pbmZvKFxuICAgICAgICAgIFwiXFx1ezFGNTE0fSBSZWN2IFRyYW5zcG9ydCBOb3QgSW5pdGlhbGl6ZWQsIENyZWFpdG5nIFJlY3ZUcmFuc3BvcnRcIlxuICAgICAgICApO1xuICAgICAgICBhd2FpdCB0aGlzLl9fY3JlYXRlVHJhbnNwb3J0T25TZXJ2ZXIoe1xuICAgICAgICAgIHRyYW5zcG9ydFR5cGU6IFwicmVjdlwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgY29uc3VtZXJQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCByZXNvbHZlQ29uc3VtZXIgPSAoc3RyZWFtRGF0YSkgPT4ge1xuICAgICAgICAgIGlmIChzdHJlYW1EYXRhLmxhYmVsID09PSBkYXRhLmxhYmVsKSB7XG4gICAgICAgICAgICByZW1vdGVQZWVyLm9mZihcInN0cmVhbS1wbGF5YWJsZVwiLCByZXNvbHZlQ29uc3VtZXIpO1xuICAgICAgICAgICAgcmVtb3RlUGVlci5vZmYoXCJzdHJlYW0tYXZhaWxhYmxlXCIsIHJlc29sdmVDb25zdW1lcik7XG4gICAgICAgICAgICBjb25zdCBjb25zdW1lcjIgPSByZW1vdGVQZWVyLmdldENvbnN1bWVyKGRhdGEubGFiZWwpO1xuICAgICAgICAgICAgaWYgKCFjb25zdW1lcjIpIHtcbiAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIlxcdTI3NEMgQ29uc3VtZXIgTm90IEZvdW5kXCIpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmIChjb25zdW1lcjIucGF1c2VkKSB7XG4gICAgICAgICAgICAgICAgcmVtb3RlUGVlci5lbWl0KFwic3RyZWFtLXBhdXNlZFwiLCB7XG4gICAgICAgICAgICAgICAgICBsYWJlbDogZGF0YS5sYWJlbCxcbiAgICAgICAgICAgICAgICAgIHBlZXJJZDogY29uc3VtZXIyLnByb2R1Y2VyUGVlcklkLFxuICAgICAgICAgICAgICAgICAgcHJvZHVjZXJJZDogY29uc3VtZXIyLnByb2R1Y2VySWRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXNvbHZlKGNvbnN1bWVyMik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZW1vdGVQZWVyLm9uY2UoXCJzdHJlYW0tcGxheWFibGVcIiwgcmVzb2x2ZUNvbnN1bWVyKTtcbiAgICAgICAgcmVtb3RlUGVlci5vbmNlKFwic3RyZWFtLWF2YWlsYWJsZVwiLCByZXNvbHZlQ29uc3VtZXIpO1xuICAgICAgICB0aGlzLnNvY2tldC5wdWJsaXNoKFwiY29uc3VtZVwiLCB7XG4gICAgICAgICAgYXBwRGF0YTogZGF0YS5hcHBEYXRhLFxuICAgICAgICAgIHByb2R1Y2VySWQ6IGxhYmVsRGF0YS5wcm9kdWNlcklkLFxuICAgICAgICAgIHByb2R1Y2VyUGVlcklkOiBkYXRhLnBlZXJJZFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fX3BlbmRpbmdDb25zdW1lclRhc2tzLnNldChsYWJlbERhdGEucHJvZHVjZXJJZCwgY29uc3VtZXJQcm9taXNlKTtcbiAgICAgIGNvbnN0IGNvbnN1bWVyID0gYXdhaXQgY29uc3VtZXJQcm9taXNlLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIEVycm9yIENvbnN1bWluZyBTdHJlYW1cIik7XG4gICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfSkuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHRoaXMuX19wZW5kaW5nQ29uc3VtZXJUYXNrcy5kZWxldGUobGFiZWxEYXRhLnByb2R1Y2VySWQpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gY29uc3VtZXI7XG4gICAgfVxuICApO1xuICAvKipcbiAgICogU3RvcHMgdGhlIHVuZGVybHlpbmcgY29uc3VtaW5nIG9mIGEgc3RyZWFtIGZvciBhIHBhcnRpY3VsYXIgbGFiZWxcbiAgICpcbiAgICogYE5PVEU6IFRoaXMgZG9lcyBub3Qgbm90aWZ5IHRoZSByZW1vdGUgcGVlcnMgdGhhdCB5b3UgYXJlIG5vdCBjb25zdW1pbmcgYSBzdHJlYW1gXG4gICAqXG4gICAqIEBwYXJhbSBkYXRhXG4gICAqL1xuICBzdG9wQ29uc3VtaW5nID0gKGRhdGEpID0+IHtcbiAgICBjb25zdCByZW1vdGVQZWVyID0gdGhpcy5yb29tLmdldFJlbW90ZVBlZXJCeUlkKGRhdGEucGVlcklkKTtcbiAgICBpZiAoIXJlbW90ZVBlZXIuaGFzTGFiZWwoZGF0YS5sYWJlbCkpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcbiAgICAgICAgYFxcdTI3NEMgUmVtb3RlIFBlZXIgaXMgbm90IHByb2R1Y2luZyBhbnl0aGluZyB3aXRoIGxhYmVsOiAke2RhdGEubGFiZWx9YFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY29uc3VtZXIgPSB0aGlzLnJlY3ZUcmFuc3BvcnQuZ2V0Q29uc3VtZXIoZGF0YSk7XG4gICAgaWYgKCFjb25zdW1lcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1Mjc0QyBDb25zdW1lciBOb3QgRm91bmRcIiwgZGF0YSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghY29uc3VtZXIuY29uc3VtaW5nKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIFlvdSBhcmUgbm90IENvbnN1bWluZyBhbnkgU3RyZWFtLCBDb25zdW1lciBOb3QgRm91bmRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNvbnN1bWVySWQgPSBjb25zdW1lci5pZDtcbiAgICBpZiAoIWNvbnN1bWVySWQpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgQ29uc3VtZXJJZCBOb3QgRm91bmRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc29ja2V0LnB1Ymxpc2goXCJjbG9zZUNvbnN1bWVyXCIsIHtcbiAgICAgIGNvbnN1bWVySWQ6IGNvbnN1bWVyLmlkXG4gICAgfSk7XG4gICAgcmVtb3RlUGVlci5lbWl0KFwic3RyZWFtLWNsb3NlZFwiLCB7XG4gICAgICBsYWJlbDogZGF0YS5sYWJlbFxuICAgIH0pO1xuICAgIHRoaXMucmVjdlRyYW5zcG9ydC5jbG9zZUNvbnN1bWVyKGRhdGEpO1xuICB9O1xuICAvKipcbiAgICogQWN0aXZhdGUgU2VuZGluZyBhbmQgUmVjZXZpbmcgVm9sYXRpbGUgTWVzc2FnZXMsIHdoaWNoIHVzZXMgV2ViUlRDIERhdGFDaGFubmVscyBvdmVyIFVEUFxuICAgKiB0byBzZW5kIG1lc3NhZ2VzIHRvIHRoZSBSZW1vdGVQZWVycyBpbiB0aGUgUm9vbSwgdGhpcyBpcyBmYXN0ZXIgdGhhbiBzZW5kaW5nIG1lc3NhZ2VzIG92ZXIgV2ViU29ja2V0cyBhbmQgaGFzIG11Y2ggbG93ZXIgUmF0ZSBMaW1pdGluZ1xuICAgKiBQcmVmZXIgdXNpbmcgdGhpcyBmb3Igc2VuZGluZyBidXJzdCBtZXNzYWdlcyB0byB0aGUgUmVtb3RlUGVlcnMgaW4gdGhlIFJvb21cbiAgICogQHJldHVybnMgeyBvazogYm9vbGVhbiwgZXJyb3I/OiBFcnJvciB9IC0gZXJyb3Igd2lsbCBiZSBwcmVzZW50IGlmIGZhaWxlZCB0byBhY3RpdmF0ZSB2b2xhdGlsZSBtZXNzYWdpbmdcbiAgICovXG4gIF9fYWN0aXZhdGVWb2xhdGlsZU1lc3NhZ2luZyA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmluZm8oXCJcXHV7MUY1MTR9IEFjdGl2YXRpbmcgVm9sYXRpbGUgTWVzc2FnZXNcIik7XG4gICAgICBjb25zdCBvbmdvaW5nVGFzayA9IHRoaXMuX19wZW5kaW5nVGFza3MuZ2V0KFwidm9sYXRpbGVNZXNzYWdpbmdcIik7XG4gICAgICBpZiAob25nb2luZ1Rhc2spIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKFwiXFx1ezFGNTE0fSBBbHJlYWR5IEFjdGl2YXRpbmcgVm9sYXRpbGUgTWVzc2FnZVwiKTtcbiAgICAgICAgYXdhaXQgb25nb2luZ1Rhc2s7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgb2s6IHRydWVcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJvdERhdGFDb25zdW1lciA9IHRoaXMuX19zZW5kVHJhbnNwb3J0Py5kYXRhQ29uc3VtZXJzLmdldChcImJvdFwiKTtcbiAgICAgIGlmIChib3REYXRhQ29uc3VtZXIpIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKFwiXFx1ezFGNTE0fSBCb3QgRGF0YSBDb25zdW1lciBBbHJlYWR5IEV4aXN0c1wiKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBvazogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY29uc3Qgb25nb2luZ0FjdGl2ZVNwZWFrZXJQcm9taXNlID0gdGhpcy5fX3BlbmRpbmdUYXNrcy5nZXQoXCJ2b2xhdGlsZU1lc3NhZ2luZ1wiKTtcbiAgICAgIGlmIChvbmdvaW5nQWN0aXZlU3BlYWtlclByb21pc2UpIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKFwiXFx1ezFGNTE0fSBCb3QgRGF0YSBDb25zdW1lciBUYXNrIFBlbmRpbmdcIik7XG4gICAgICAgIGF3YWl0IG9uZ29pbmdBY3RpdmVTcGVha2VyUHJvbWlzZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBvazogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY29uc3QgZm4gPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5fX3JlY3ZUcmFuc3BvcnQpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLl9fY3JlYXRlVHJhbnNwb3J0T25TZXJ2ZXIoe1xuICAgICAgICAgICAgdHJhbnNwb3J0VHlwZTogXCJyZWN2XCJcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX19zZW5kVHJhbnNwb3J0KSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5fX2NyZWF0ZVRyYW5zcG9ydE9uU2VydmVyKHtcbiAgICAgICAgICAgIHRyYW5zcG9ydFR5cGU6IFwic2VuZFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5fX2NyZWF0ZURhdGFQcm9kdWNlcih7XG4gICAgICAgICAgbGFiZWw6IFwiYm90XCIsXG4gICAgICAgICAgbWF4UmV0cmFuc21pdHM6IDMsXG4gICAgICAgICAgb3JkZXJlZDogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgY29uc3QgcHJvbWlzZSA9IGZuKCk7XG4gICAgICB0aGlzLl9fcGVuZGluZ1Rhc2tzLnNldChcInZvbGF0aWxlTWVzc2FnaW5nXCIsIHByb21pc2UpO1xuICAgICAgYXdhaXQgcHJvbWlzZTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG9rOiB0cnVlXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgIFwiXFx1Mjc0QyBFcnJvciBBY3RpdmF0aW5nIFNwZWFrZXJzIE5vdGlmaWNhdGlvbiBGdW5jdGlvbmFsaXR5XCIsXG4gICAgICAgIGVycm9yXG4gICAgICApO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICBlcnJvcjogbmV3IEVycm9yKFxuICAgICAgICAgIGBFcnJvcjogQWN0aXZhdGluZyBTcGVha2VycyBOb3RpZmljYXRpb24gRnVuY3Rpb25hbGl0eSwgJHtlcnJvcn1gXG4gICAgICAgIClcbiAgICAgIH07XG4gICAgfVxuICB9O1xuICAvKipcbiAgICogU2VuZCBEYXRhIEdpdmVzIHRoZSBmdW5jdGlvbmFsaXR5IHRvIHNlbmQgZGF0YSB0byBvdGhlciByZW1vdGUgcGVlcnMgb3IgdGhlIHdob2xlIHJvb20sXG4gICAqIE5PVEU6IFRoaXMgd2lsbCBiZSBzZW50IG92ZXIgV2ViU29ja2V0cyB3aGljaCBhcmUgb3ZlciBUQ1Agd2hpY2ggd2lsbCBiZSBzbG93ZXIgYW5kIGNhbiBiZSByYXRlIGxpbWl0ZWQuXG4gICAqIEByZXR1cm5zIHsgc3VjY2VzczogYm9vbGVhbiwgZXJyb3I/OiBzdHJpbmcgfSAtIGVycm9yIHdpbGwgYmUgcHJlc2VudCBpZiBmYWlsZWQgdG8gc2VuZCBkYXRhXG4gICAqL1xuICBzZW5kRGF0YSA9IGNoZWNrUGVybWlzc2lvbnMoe1xuICAgIGNhblNlbmREYXRhOiB0cnVlXG4gIH0pLnZhbGlkYXRlKFxuICAgIGFzeW5jIChkYXRhKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoZXN0aW1hdGVTaXplKGRhdGEucGF5bG9hZCkgPiBNQVhfREFUQV9NRVNTQUdFX1NJWkUpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIERhdGEgbWVzc2FnZSBleGNlZWRzIDFrYiBpbiBzaXplXCIpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBcIkRhdGEgbWVzc2FnZSBleGNlZWRzIDFrYiBpbiBzaXplXCJcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFRvID0gZGF0YS50byA9PT0gXCIqXCIgPyBbXCIqXCJdIDogZGF0YS50bztcbiAgICAgICAgdGhpcy5zb2NrZXQucHVibGlzaChcInNlbmREYXRhXCIsIHtcbiAgICAgICAgICB0bzogcGFyc2VkVG8sXG4gICAgICAgICAgcGF5bG9hZDogZGF0YS5wYXlsb2FkLFxuICAgICAgICAgIGxhYmVsOiBkYXRhLmxhYmVsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWVcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgRXJyb3IgU2VuZGluZyBEYXRhXCIpO1xuICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBcIkVycm9yIFNlbmRpbmcgRGF0YVwiXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICApO1xuICAvKipcbiAgICogU2VuZCBWb2xhdGlsZSBEYXRhIEdpdmVzIHRoZSBmdW5jdGlvbmFsaXR5IHRvIHNlbmQgZGF0YSB0byBvdGhlciByZW1vdGUgcGVlcnMgb3IgdGhlIHdob2xlIHJvb20sXG4gICAqIE5PVEU6IFRoaXMgd2lsbCBiZSBzZW50IG92ZXIgV2ViUlRDIERhdGFDaGFubmVscyB3aGljaCBhcmUgb3ZlciBVRFAgd2hpY2ggd2lsbCBiZSBmYXN0ZXIgYW5kIGNhbiBiZSByYXRlIGxpbWl0ZWQuXG4gICAqIEByZXR1cm5zIHsgb2s6IGJvb2xlYW4gfSAtIGlmIHRoZSB2b2xhdGlsZSBkYXRhIHdhcyBzZW50LCBjYW5ub3QgZ3VhcmFudGVlIGlmIHRoZSBkYXRhIHdhcyByZWNlaXZlZCBhcyBpdHMgb3ZlciBVRFBcbiAgICovXG4gIHNlbmRWb2xhdGlsZURhdGEgPSBjaGVja1Blcm1pc3Npb25zKHtcbiAgICBjYW5TZW5kRGF0YTogdHJ1ZVxuICB9KS52YWxpZGF0ZShhc3luYyAoZGF0YSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXRoaXMuam9pbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBcIlxcdTI3NEMgQ2Fubm90IFNlbmQgVm9sYXRpbGUgRGF0YSwgWW91IGhhdmUgbm90IGpvaW5lZCB0aGUgcm9vbSB5ZXRcIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLnBlZXJJZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcXHUyNzRDIENhbm5vdCBTZW5kIFZvbGF0aWxlIERhdGEsIFBlZXJJZCBOb3QgRm91bmRcIik7XG4gICAgICB9XG4gICAgICBpZiAoZXN0aW1hdGVTaXplKGRhdGEpID4gTUFYX0RBVEFfTUVTU0FHRV9TSVpFKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgRGF0YSBtZXNzYWdlIGV4Y2VlZHMgMWtiIGluIHNpemVcIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMucm9vbS5ib3Q/LnNlbmREYXRhKHtcbiAgICAgICAgZnJvbTogdGhpcy5wZWVySWQsXG4gICAgICAgIGxhYmVsOiBkYXRhLmxhYmVsLFxuICAgICAgICBwYXlsb2FkOiBkYXRhLnBheWxvYWQsXG4gICAgICAgIHRvOiBcIipcIlxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgRXJyb3IgU2VuZGluZyBWb2xhdGlsZSBEYXRhXCIsIGVycm9yKTtcbiAgICB9XG4gIH0pO1xuICAvKipcbiAgICogU2VuZCBNZXNzYWdlIHRvIHVwZGF0ZSB0aGUgbWV0YWRhdGEgb2YgdGhlIExvY2FsIFBlZXJcbiAgICpcbiAgICogYE5PVEU6IFRoaXMgd2lsbCBub3RpZnkgZXZlcnkgdXNlciBpbiB0aGUgcm9vbSBhYm91dCB0aGUgbWV0YWRhdGEgdXBkYXRlYFxuICAgKlxuICAgKiBAZW1pdHMgYGxvY2FsUGVlci5vbihtZXRhZGF0YS11cGRhdGVkKWAgb24gc3VjY2VzZnVsIG1ldGFkYXRhIHVwZGF0ZVxuICAgKlxuICAgKiBAdGhyb3dzIHsgRXJyb3IgfSAtIGlmIHVuYWJsZSB0byB1cGRhdGUgTWV0YWRhdGEgZm9yIHRoZSBwZWVyLlxuICAgKi9cbiAgdXBkYXRlTWV0YWRhdGEgPSBjaGVja1Blcm1pc3Npb25zKHtcbiAgICBjYW5VcGRhdGVNZXRhZGF0YTogdHJ1ZVxuICB9KS52YWxpZGF0ZShhc3luYyAoZGF0YSkgPT4ge1xuICAgIGlmICghdGhpcy5qb2luZWQpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcbiAgICAgICAgXCJcXHUyNzRDIENhbm5vdCBVcGRhdGUgTWV0YWRhdGEsIFlvdSBoYXZlIG5vdCBqb2luZWQgdGhlIHJvb20geWV0XCJcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHBlZXJJZCA9IHRoaXMucGVlcklkO1xuICAgIGlmICghcGVlcklkKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIENhbm5vdCBVcGRhdGUgTWV0YWRhdGEsIFBlZXJJZCBOb3QgRm91bmRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG5ld01ldGFkYXRhID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgdGhpcy5zb2NrZXQucHVibGlzaChcInVwZGF0ZVBlZXJNZXRhZGF0YVwiLCB7XG4gICAgICBwZWVySWQsXG4gICAgICBtZXRhZGF0YTogbmV3TWV0YWRhdGFcbiAgICB9KTtcbiAgfSk7XG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHJvbGUgb2YgdGhlIFJlbW90ZSBQZWVyIGluIHRoZSBSb29tLCB0aGlzIHdpbGwgZW1pdCBhbiBldmVudCBgdXBkYXRlZGAgd2l0aCB0aGUgdXBkYXRlZCByb2xlLlxuICAgKlxuICAgKiBAZW1pdHMgYGxvY2FsUGVlci5vbigncm9sZS11cGRhdGVkJykgaW4gY2FzZSByb2xlIHVwZGF0ZSB3YXMgc3VjY2Vzc2Z1bC5cbiAgICovXG4gIHVwZGF0ZVJvbGUgPSAoZGF0YSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXRoaXMuam9pbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBcIlxcdTI3NEMgQ2Fubm90IFVwZGF0ZSBSb2xlLCBZb3UgaGF2ZSBub3Qgam9pbmVkIHRoZSByb29tIHlldFwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAoZGF0YS5yb2xlID09PSB0aGlzLnJvbGUpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oXCJcXHV7MUY1MTR9IFBlZXIgUm9sZSBpcyBhbHJlYWR5IHNldCB0b1wiLCBkYXRhLnJvbGUpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMucGVlcklkKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcbiAgICAgICAgICBcIlxcdTI3NEMgQ2Fubm90IFVwZGF0ZSBSb2xlLCBQZWVySWQgTm90IEZvdW5kLCAoWW91IGhhdmUgbm90IGpvaW5lZCB0aGUgcm9vbSB5ZXQpXCJcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5zb2NrZXQucHVibGlzaChcInVwZGF0ZVBlZXJSb2xlXCIsIHtcbiAgICAgICAgcGVlcklkOiB0aGlzLnBlZXJJZCxcbiAgICAgICAgcm9sZTogZGF0YS5yb2xlLFxuICAgICAgICBvcHRpb25zOiBkYXRhLm9wdGlvbnNcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJcXHV7MUY1MTR9IEVycm9yIFVwZGF0aW5nIFJvbGVcIiwgZGF0YSk7XG4gICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfTtcbiAgX19oYW5kbGVyID0ge1xuICAgIGVycm9yOiAoZGF0YSkgPT4ge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBFdmVudFwiKTtcbiAgICAgIGxvZ2dlci5lcnJvcihkYXRhKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFdoZW4gSHVkZGxlMDEgTm9kZSBoYXMgc3VjY2Vzc2Z1bGx5IGFjY2VwdGVkIHRoZSBjb25uZWN0aW9uIHJlcXVlc3RcbiAgICAgKiBpdCBzZW50cyBiYWNrIHNvbWUgdXNlZnVsbCBtZXRhZGF0YSBmb3IgdGhlIGNsaWVudCB0byB1c2VcbiAgICAgKiBhdCB0aGlzIHBvaW50IHRoZSBzb2NrZXQgaXMgYXNzdW1lZCB0byB0aGUgY29ubmVjdGVkIGFuZCB0aGUgbG9jYWxQZWVyIGlzIHJlYWR5IHRvIGpvaW4gdGhlIHJvb21cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhIC0gRGF0YSBmcm9tIHNlcnZlciB7IHBlZXJJZCB9XG4gICAgICovXG4gICAgaGVsbG86IChkYXRhKSA9PiB7XG4gICAgICBsb2dnZXIuaW5mbyhcIlxcdTI3MDUgSGVsbG8gRnJvbSBTZXJ2ZXIsIENvbm5lY3Rpb24gU3VjY2Vzc1wiLCBkYXRhKTtcbiAgICAgIGNvbnN0IHsgYWNsLCBwZWVySWQgfSA9IGRhdGE7XG4gICAgICB0aGlzLnBlZXJJZCA9IHBlZXJJZDtcbiAgICAgIHRoaXMucm9vbS5zZXNzaW9uSWQgPSBkYXRhLnNlc3Npb25JZDtcbiAgICAgIHRoaXMuX19wZXJtaXNzaW9ucy51cGRhdGVQZXJtaXNzaW9ucyhkYXRhLmFjbCk7XG4gICAgICBpZiAoZGF0YS5yb2xlKSB0aGlzLl9fcGVybWlzc2lvbnMucm9sZSA9IGRhdGEucm9sZTtcbiAgICAgIHRoaXMuZW1pdChcInBlcm1pc3Npb25zLXVwZGF0ZWRcIiwge1xuICAgICAgICBwZXJtaXNzaW9uczogYWNsLFxuICAgICAgICByb2xlOiBkYXRhLnJvbGVcbiAgICAgIH0pO1xuICAgICAgaWYgKGRhdGEubWV0YWRhdGEpIHtcbiAgICAgICAgdGhpcy5fX3VwZGF0ZU1ldGFkYXRhKGRhdGEubWV0YWRhdGEpO1xuICAgICAgfVxuICAgIH0sXG4gICAgd2FpdGluZ1Jvb206IChkYXRhKSA9PiB7XG4gICAgICBsb2dnZXIuaW5mbyhcIlxcdXsxRjUxNH0gV2FpdGluZyBSb29tXCIsIGRhdGEpO1xuICAgICAgdGhpcy5yb29tLmVtaXQoXCJyb29tLXdhaXRpbmdcIiwgZGF0YSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gVXBvbm4gc3VjY2Vzc2Z1bCBqb2luaW5nIG9mIHRoZSByb29tLCB0aGUgc2VydmVyIHNlbmRzIGJhY2sgc29tZSB1c2VmdWxsIG1ldGFkYXRhIHN1Y2ggYXMgcmVtb3RlUGVlcnMgaW4gdGhlIHJvb20uXG4gICAgICogQGVtaXRzIFwicm9vbS1qb2luZWRcIiAtIFdoZW4gdGhlIGNsaWVudCBoYXMgc3VjY2Vzc2Z1bGx5IGpvaW5lZCB0aGUgcm9vbS5cbiAgICAgKiBAZW1pdHMgXCJqb2luLWVycm9yXCIgLSBXaGVuIHRoZSBjbGllbnQgaGFzIGZhaWxlZCB0byBqb2luIHRoZSByb29tLlxuICAgICAqIEBwYXJhbSBkYXRhIC0gRGF0YSBmcm9tIHNlcnZlciB7IHJvb21JZCwgcm9vbUluZm8sIHJvdXRlclJUUENhcGFiaWxpdGllcywgdHVyblNlcnZlciB9XG4gICAgICovXG4gICAgY29ubmVjdFJvb21SZXNwb25zZTogYXN5bmMgKGRhdGEpID0+IHtcbiAgICAgIGxvZ2dlci5pbmZvKFwiXFx1MjcwNSBKb2luIFN1Y2Nlc3MgRXZlbnRcIik7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IHJvb21JbmZvLCByb3V0ZXJSVFBDYXBhYmlsaXRpZXMsIHR1cm5TZXJ2ZXJzIH0gPSBkYXRhO1xuICAgICAgICB0aGlzLnJvb20uY29uZmlnID0gcm9vbUluZm8uY29uZmlnO1xuICAgICAgICB0aGlzLnJvb20ubWV0YWRhdGEgPSByb29tSW5mby5tZXRhZGF0YSA/PyBcInt9XCI7XG4gICAgICAgIHRoaXMucm9vbS5zdGF0cy5zdGFydFRpbWUgPSByb29tSW5mby5zdGFydFRpbWU7XG4gICAgICAgIGNvbnN0IGRldmljZVR5cGUgPSBkZXRlY3REZXZpY2UoKTtcbiAgICAgICAgaWYgKCFkZXZpY2VUeXBlICYmICF0aGlzLl9faGFuZGxlckZhY3RvcnkpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgICAgICBcIlxcdTI3NEMgRGV2aWNlIGlzIG5vdCBzdXBwb3J0ZWQsIHZhbGlkIGRldmljZXMgYXJlIDogJ0Nocm9tZTExMScgfCAnQ2hyb21lNzQnIHwgJ0Nocm9tZTcwJyB8ICdDaHJvbWU2NycgfCAnQ2hyb21lNTUnIHwgJ0ZpcmVmb3g2MCcgfCAnU2FmYXJpMTInIHwgJ1NhZmFyaTExJyB8ICdFZGdlMTEnIHwgJ1JlYWN0TmF0aXZlVW5pZmllZFBsYW4nIHwgJ1JlYWN0TmF0aXZlJ1wiXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcXHUyNzRDIERldmljZSBpcyBub3Qgc3VwcG9ydGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX19kZXZpY2UgPSBuZXcgRGV2aWNlKHtcbiAgICAgICAgICBoYW5kbGVyTmFtZTogZGV2aWNlVHlwZSxcbiAgICAgICAgICBoYW5kbGVyRmFjdG9yeTogdGhpcy5fX2hhbmRsZXJGYWN0b3J5XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwYXJzZWRSb3V0ZXJSdHBDYXBhYmlsaXRlcyA9IHBhcnNlUm91dGVyUnRwQ2FwYWJpbGl0aWVzKHtcbiAgICAgICAgICBjb2RlY3M6IHJvdXRlclJUUENhcGFiaWxpdGllcy5jb2RlY3MsXG4gICAgICAgICAgaGVhZGVyRXh0ZW5zaW9uczogcm91dGVyUlRQQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnNcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMuX19kZXZpY2UubG9hZCh7XG4gICAgICAgICAgcm91dGVyUnRwQ2FwYWJpbGl0aWVzOiBwYXJzZWRSb3V0ZXJSdHBDYXBhYmlsaXRlc1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCF0aGlzLmRldmljZS5sb2FkZWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcXHUyNzRDIENhbm5vdCBMb2FkIERldmljZVwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtaXQoXCJkZXZpY2UtY3JlYXRlZFwiLCB7IGRldmljZTogdGhpcy5fX2RldmljZSB9KTtcbiAgICAgICAgdGhpcy5fX3NldFJlbW90ZVBlZXJzKHJvb21JbmZvKTtcbiAgICAgICAgdGhpcy5fX3NldExvYmJ5UGVlcnMocm9vbUluZm8pO1xuICAgICAgICBpZiAodHVyblNlcnZlcnM/Lmxlbmd0aCkge1xuICAgICAgICAgIGxvZ2dlci5pbmZvKFwiXFx1ezFGNTE0fSBTZXR0aW5nIFR1cm4gU2VydmVyXCIsIHR1cm5TZXJ2ZXJzKTtcbiAgICAgICAgICB0aGlzLl9fdHVybiA9IFsuLi50dXJuU2VydmVycywgLi4udGhpcy5fX3R1cm5dO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucm9vbS5zdGF0ZSA9IFwiY29ubmVjdGVkXCI7XG4gICAgICAgIHRoaXMuam9pbmVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yb29tLmVtaXQoXCJyb29tLWpvaW5lZFwiKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgRXJyb3IgSm9pbmluZyBSb29tXCIpO1xuICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICB0aGlzLnJvb20uZW1pdChcInJvb20tam9pbmVkLWZhaWxlZFwiLCB7XG4gICAgICAgICAgbWVzc2FnZTogXCJcXHUyNzRDIEVycm9yIEpvaW5pbmcgUm9vbVwiLFxuICAgICAgICAgIHN0YXR1czogXCJST09NX0VSUk9SRURcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX19oYW5kbGVXYWl0aW5nVG9Qcm9kdWNlKCk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gdXBkYXRlIHRoZSByZW1vdGUgcGVlcnMgaW4gdGhlIHJvb20gLCByZW1vdmUgdGhlIHJlbW90ZSBwZWVycyB3aGljaCBhcmUgbm90IGluIHRoZSByb29tIGFueW1vcmVcbiAgICAgKiBAcGFyYW0gcm9vbUluZm9cbiAgICAgKi9cbiAgICBzeW5jTWVldGluZ1N0YXRlUmVzcG9uc2U6IGFzeW5jIChkYXRhKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBsb2dnZXIuaW5mbyhcIlxcdTI3MDUgQ2xpZW50IHJlY292ZXJlZCBhZnRlciByZWNvbm5lY3RpbmdcIiwgZGF0YSk7XG4gICAgICAgIGNvbnN0IHsgcGVlcnM6IGxhdGVzdFBlZXJzIH0gPSBkYXRhLnJvb21JbmZvO1xuICAgICAgICBjb25zdCBsYXRlc3RQZWVyc1NldCA9IG5ldyBTZXQobGF0ZXN0UGVlcnMubWFwKChwKSA9PiBwLnBlZXJJZCkpO1xuICAgICAgICBmb3IgKGNvbnN0IFtwZWVySWQsIHBlZXJdIG9mIHRoaXMuX19yZW1vdGVQZWVycy5lbnRyaWVzKCkpIHtcbiAgICAgICAgICBpZiAoIWxhdGVzdFBlZXJzU2V0LmhhcyhwZWVySWQpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxhYmVsIG9mIHBlZXIubGFiZWxzKSB7XG4gICAgICAgICAgICAgIHRoaXMuX19jbG9zZVJlbW90ZVBlZXJDb25zdW1lcih7XG4gICAgICAgICAgICAgICAgcGVlcklkLFxuICAgICAgICAgICAgICAgIGxhYmVsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGVlci5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5fX3JlbW90ZVBlZXJzLmRlbGV0ZShwZWVySWQpO1xuICAgICAgICAgICAgdGhpcy5yb29tLmVtaXQoXCJwZWVyLWxlZnRcIiwge1xuICAgICAgICAgICAgICBwZWVySWQsXG4gICAgICAgICAgICAgIG1ldGFkYXRhOiBwZWVyLmdldE1ldGFkYXRhKCksXG4gICAgICAgICAgICAgIHJvbGU6IHBlZXIucm9sZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgbGF0ZXN0UGVlckluZm8gPSBsYXRlc3RQZWVycy5maW5kKChwKSA9PiBwLnBlZXJJZCA9PT0gcGVlcklkKTtcbiAgICAgICAgICBpZiAoIWxhdGVzdFBlZXJJbmZvKSBjb250aW51ZTtcbiAgICAgICAgICBjb25zdCBuZXdQcm9kdWNlclNldCA9IG5ldyBTZXQoXG4gICAgICAgICAgICBsYXRlc3RQZWVySW5mby5wcm9kdWNlcnMubWFwKChwKSA9PiBwLmxhYmVsKVxuICAgICAgICAgICk7XG4gICAgICAgICAgZm9yIChjb25zdCBsYWJlbCBvZiBwZWVyLmxhYmVscykge1xuICAgICAgICAgICAgaWYgKCFuZXdQcm9kdWNlclNldC5oYXMobGFiZWwpKSB7XG4gICAgICAgICAgICAgIHRoaXMuX19jbG9zZVJlbW90ZVBlZXJDb25zdW1lcih7IHBlZXJJZCwgbGFiZWwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGN1cnJlbnRQcm9kdWNlclNldCA9IG5ldyBTZXQocGVlci5wcm9kdWNlcklkcyk7XG4gICAgICAgICAgZm9yIChjb25zdCBwcm9kdWNlciBvZiBsYXRlc3RQZWVySW5mby5wcm9kdWNlcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGFkZExhYmVsRGF0YSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHBlZXIuX2FkZExhYmVsRGF0YSh7XG4gICAgICAgICAgICAgICAgcHJvZHVjZXJJZDogcHJvZHVjZXIuaWQsXG4gICAgICAgICAgICAgICAgbGFiZWw6IHByb2R1Y2VyLmxhYmVsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghY3VycmVudFByb2R1Y2VyU2V0Lmhhcyhwcm9kdWNlci5pZCkpIHtcbiAgICAgICAgICAgICAgaWYgKCF0aGlzLl9fcmVjdlRyYW5zcG9ydCB8fCB0aGlzLl9fcmVjdlRyYW5zcG9ydC5jb25uZWN0aW9uU3RhdGUgPT09IFwibmV3XCIgfHwgdGhpcy5fX3JlY3ZUcmFuc3BvcnQuY29ubmVjdGlvblN0YXRlID09PSBcImNvbm5lY3RlZFwiKSB7XG4gICAgICAgICAgICAgICAgYWRkTGFiZWxEYXRhKCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fX3dhaXRpbmdUb0NvbnN1bWUucHVzaChhZGRMYWJlbERhdGEpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zdCBjb25zdW1lciA9IHBlZXIuZ2V0Q29uc3VtZXIocHJvZHVjZXIubGFiZWwpO1xuICAgICAgICAgICAgICBjb25zdCB2YWwgPSBwcm9kdWNlci5wYXVzZWQgPyBjb25zdW1lcj8ucGF1c2UoKSA6IGNvbnN1bWVyPy5yZXN1bWUoKTtcbiAgICAgICAgICAgICAgaWYgKHZhbCAmJiBwcm9kdWNlci5wYXVzZWQpIHtcbiAgICAgICAgICAgICAgICBwZWVyLmVtaXQoXCJzdHJlYW0tcGF1c2VkXCIsIHtcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiBwcm9kdWNlci5sYWJlbCxcbiAgICAgICAgICAgICAgICAgIHBlZXJJZCxcbiAgICAgICAgICAgICAgICAgIHByb2R1Y2VySWQ6IHByb2R1Y2VyLmlkXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsICYmICFwcm9kdWNlci5wYXVzZWQgJiYgY29uc3VtZXIpIHtcbiAgICAgICAgICAgICAgICBwZWVyLmVtaXQoXCJzdHJlYW0tcGxheWFibGVcIiwge1xuICAgICAgICAgICAgICAgICAgY29uc3VtZXIsXG4gICAgICAgICAgICAgICAgICBsYWJlbDogcHJvZHVjZXIubGFiZWxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaWx0ZXJlZFBlZXJzID0gbGF0ZXN0UGVlcnMuZmlsdGVyKFxuICAgICAgICAgIChsYXRlc3RQZWVyKSA9PiAhdGhpcy5fX3JlbW90ZVBlZXJzLmhhcyhsYXRlc3RQZWVyLnBlZXJJZCkgJiYgbGF0ZXN0UGVlci5wZWVySWQgIT09IHRoaXMucGVlcklkXG4gICAgICAgICkudmFsdWVzKCk7XG4gICAgICAgIGZvciAoY29uc3QgbGF0ZXN0UGVlciBvZiBmaWx0ZXJlZFBlZXJzKSB7XG4gICAgICAgICAgY29uc3QgcmVtb3RlUGVlciA9IG5ldyBSZW1vdGVQZWVyX2RlZmF1bHQoe1xuICAgICAgICAgICAgcGVlcklkOiBsYXRlc3RQZWVyLnBlZXJJZCxcbiAgICAgICAgICAgIHJvbGU6IGxhdGVzdFBlZXIucm9sZSxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBsYXRlc3RQZWVyLm1ldGFkYXRhXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5fX3JlbW90ZVBlZXJzLnNldChsYXRlc3RQZWVyLnBlZXJJZCwgcmVtb3RlUGVlcik7XG4gICAgICAgICAgY29uc3QgcmVtb3RlUHJvZHVjZXJzID0gbGF0ZXN0UGVlci5wcm9kdWNlcnM7XG4gICAgICAgICAgZm9yIChjb25zdCBwIG9mIHJlbW90ZVByb2R1Y2Vycykge1xuICAgICAgICAgICAgY29uc3QgYWRkTGFiZWxEYXRhID0gKCkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gcmVtb3RlUGVlci5fYWRkTGFiZWxEYXRhKHtcbiAgICAgICAgICAgICAgICBwcm9kdWNlcklkOiBwLmlkLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBwLmxhYmVsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghdGhpcy5fX3JlY3ZUcmFuc3BvcnQgfHwgdGhpcy5fX3JlY3ZUcmFuc3BvcnQuY29ubmVjdGlvblN0YXRlID09PSBcIm5ld1wiIHx8IHRoaXMuX19yZWN2VHJhbnNwb3J0LmNvbm5lY3Rpb25TdGF0ZSA9PT0gXCJjb25uZWN0ZWRcIikge1xuICAgICAgICAgICAgICBhZGRMYWJlbERhdGEoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuX193YWl0aW5nVG9Db25zdW1lLnB1c2goYWRkTGFiZWxEYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5yb29tLmVtaXQoXCJuZXctcGVlci1qb2luZWRcIiwgeyBwZWVyOiByZW1vdGVQZWVyIH0pO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIEVycm9yIFN5bmNpbmcgTWVldGluZyBTdGF0ZSwgQ2FuJ3QgUmVjb3ZlclwiKTtcbiAgICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFVwb24gY3JlYXRpb24gb2Ygc2VydmVyIHNpZGUgdHJhbnNwb3J0LCB0aGUgc2VydmVyIHNlbmRzIGJhY2sgc29tZSB1c2VmdWxsIG1ldGFkYXRhIGZvciB0aGUgY2xpZW50IHRvIHVzZVxuICAgICAqIHRvIGNyZWF0ZSBhIGNsaWVudCBzaWRlIHRyYW5zcG9ydCwgaS5lLiBgc2VuZCB8IHJlY3ZgIFRyYW5zcG9ydC5cbiAgICAgKiBAcGFyYW0gZGF0YSAtIERhdGEgZnJvbSBzZXJ2ZXIgeyB0cmFuc3BvcnRTRFBJbmZvLCB0cmFuc3BvcnRUeXBlIH1cbiAgICAgKi9cbiAgICBjcmVhdGVUcmFuc3BvcnRPbkNsaWVudDogYXN5bmMgKGRhdGEpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGRldmljZSA9IHRoaXMuZGV2aWNlO1xuICAgICAgICBpZiAoIXRoaXMucGVlcklkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgXCJcXHUyNzRDIENhbm5vdCBDcmVhdGUgVHJhbnNwb3J0LCBObyBQZWVySWQgRm91bmQgZm9yIHRoZSB1c2VyLlwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0cmFuc3BvcnQgPSBUcmFuc3BvcnRfZGVmYXVsdC5jcmVhdGUoe1xuICAgICAgICAgIGRldmljZSxcbiAgICAgICAgICBwZWVySWQ6IHRoaXMucGVlcklkLFxuICAgICAgICAgIHNvY2tldDogdGhpcy5zb2NrZXQsXG4gICAgICAgICAgc2RwSW5mbzogZGF0YS50cmFuc3BvcnRTRFBJbmZvLFxuICAgICAgICAgIGljZVNlcnZlcnM6IHRoaXMuX190dXJuLFxuICAgICAgICAgIHRyYW5zcG9ydFR5cGU6IGRhdGEudHJhbnNwb3J0VHlwZVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRyYW5zcG9ydC50cmFuc3BvcnRUeXBlID09PSBcInNlbmRcIikge1xuICAgICAgICAgIHRoaXMuX19zZW5kVHJhbnNwb3J0ID0gdHJhbnNwb3J0O1xuICAgICAgICAgIHRoaXMuX19zZW5kVHJhbnNwb3J0Lm1lZGlhc291cFRyYW5zcG9ydC5vbihcbiAgICAgICAgICAgIFwiY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIsXG4gICAgICAgICAgICAoY29ubmVjdGlvblN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uU3RhdGUgPT09IFwiY29ubmVjdGVkXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9faGFuZGxlV2FpdGluZ1RvUHJvZHVjZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLmVtaXQoXCJuZXctc2VuZC10cmFuc3BvcnRcIiwge1xuICAgICAgICAgICAgdHJhbnNwb3J0XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYW5zcG9ydC50cmFuc3BvcnRUeXBlID09PSBcInJlY3ZcIikge1xuICAgICAgICAgIHRoaXMuX19yZWN2VHJhbnNwb3J0ID0gdHJhbnNwb3J0O1xuICAgICAgICAgIHRoaXMuX19yZWN2VHJhbnNwb3J0Lm1lZGlhc291cFRyYW5zcG9ydC5vbihcbiAgICAgICAgICAgIFwiY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIsXG4gICAgICAgICAgICAoY29ubmVjdGlvblN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uU3RhdGUgPT09IFwiY29ubmVjdGVkXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9faGFuZGxlV2FpdGluZ1RvQ29uc3VtZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLmVtaXQoXCJuZXctcmVjdi10cmFuc3BvcnRcIiwge1xuICAgICAgICAgICAgdHJhbnNwb3J0XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcbiAgICAgICAgICBcIlxcdTI3NEMgRXJyb3IgQ3JlYXRpbmcgTWVkaWFzb3VwVHJhbnNwb3J0IE9uIENsaWVudCwgdHJhbnNwb3J0VHlwZVwiLFxuICAgICAgICAgIGRhdGEudHJhbnNwb3J0VHlwZVxuICAgICAgICApO1xuICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogIUltcG9ydGFudFxuICAgICAqIFdoZW4gdGhlIHNlcnZlciBoYXMgc3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZCB0aGUgdHJhbnNwb3J0LCBpdCBzZW5kcyBhIGFjayBiYWNrIHRvIHRoZSBjbGllbnRcbiAgICAgKiB3aGljaCBoYW5kbGVzIHRoZSBjYWxsYmFjaygpIGZ1bmN0aW9uIHdoaWNoIHRyaWdnZXJzIHRoZSBwcm9jZXNzIG9mIGNyZWF0aW9uIG9mIHByb2R1Y2VyIGFuZCBjb25zdW1lclxuICAgICAqIGZvciByZWZlcmVuY2Ugc2VlOiBwYWNrYWdlcy9uZXp1a28vc3JjL1RyYW5zcG9ydC50c1xuICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICovXG4gICAgY29ubmVjdFRyYW5zcG9ydFJlc3BvbnNlOiBhc3luYyAoZGF0YSkgPT4ge1xuICAgICAgbG9nZ2VyLmluZm8oXG4gICAgICAgIGBcXHUyNzA1IENvbm5lY3QgJHtkYXRhLnRyYW5zcG9ydFR5cGV9IFRyYW5zcG9ydCBPbiBTZXJ2ZXIgUmVzcG9uc2VgXG4gICAgICApO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdHJhbnNwb3J0VHlwZSA9IGRhdGEudHJhbnNwb3J0VHlwZTtcbiAgICAgICAgY29uc3QgdHJhbnNwb3J0ID0gdHJhbnNwb3J0VHlwZSA9PT0gXCJzZW5kXCIgPyB0aGlzLl9fc2VuZFRyYW5zcG9ydCA6IHRoaXMuX19yZWN2VHJhbnNwb3J0O1xuICAgICAgICBpZiAoIXRyYW5zcG9ydCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHt0cmFuc3BvcnRUeXBlfSBUcmFuc3BvcnQgTm90IEluaXRpYWxpemVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJhbnNwb3J0LmVtaXQoXCJjb25uZWN0VHJhbnNwb3J0UmVzcG9uc2VcIik7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIEVycm9yIENvbm5lY3RpbmcgVHJhbnNwb3J0IE9uIFNlcnZlciBSZXNwb25zZVwiKTtcbiAgICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHByb2R1Y2VSZXNwb25zZTogYXN5bmMgKGRhdGEpID0+IHtcbiAgICAgIGxvZ2dlci5pbmZvKFwiXFx1MjcwNSBQcm9kdWNlIFJlc3BvbnNlXCIsIGRhdGEpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBwZWVySWQsIHByb2R1Y2VySWQsIGxhYmVsIH0gPSBkYXRhO1xuICAgICAgICBpZiAocGVlcklkID09PSB0aGlzLnBlZXJJZCkge1xuICAgICAgICAgIHRoaXMuc2VuZFRyYW5zcG9ydC5yZXNvbHZlUGVuZGluZ1Byb2R1Y2VyVGFzayh7XG4gICAgICAgICAgICBpZDogcHJvZHVjZXJJZCxcbiAgICAgICAgICAgIGxhYmVsLFxuICAgICAgICAgICAgcGVlcklkXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgcmVtb3RlUGVlciA9IHRoaXMucm9vbS5nZXRSZW1vdGVQZWVyQnlJZChwZWVySWQpO1xuICAgICAgICAgIGlmICghdGhpcy5fX3JlY3ZUcmFuc3BvcnQgfHwgdGhpcy5fX3JlY3ZUcmFuc3BvcnQuY29ubmVjdGlvblN0YXRlID09PSBcIm5ld1wiIHx8IHRoaXMuX19yZWN2VHJhbnNwb3J0LmNvbm5lY3Rpb25TdGF0ZSA9PT0gXCJjb25uZWN0ZWRcIikge1xuICAgICAgICAgICAgcmVtb3RlUGVlci5fYWRkTGFiZWxEYXRhKHtcbiAgICAgICAgICAgICAgcHJvZHVjZXJJZCxcbiAgICAgICAgICAgICAgbGFiZWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9fd2FpdGluZ1RvQ29uc3VtZS5wdXNoKFxuICAgICAgICAgICAgICAoKSA9PiByZW1vdGVQZWVyLl9hZGRMYWJlbERhdGEoe1xuICAgICAgICAgICAgICAgIHByb2R1Y2VySWQsXG4gICAgICAgICAgICAgICAgbGFiZWxcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIEVycm9yIFByb2R1Y2UgUmVzcG9uc2VcIik7XG4gICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICB9XG4gICAgfSxcbiAgICBjb25zdW1lUmVzcG9uc2U6IGFzeW5jIChkYXRhKSA9PiB7XG4gICAgICBsb2dnZXIuaW5mbyhcIlxcdTI3MDUgQ29uc3VtZSBSZXNwb25zZVwiLCBkYXRhKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlbW90ZVBlZXIgPSB0aGlzLnJvb20uZ2V0UmVtb3RlUGVlckJ5SWQoZGF0YS5wcm9kdWNlclBlZXJJZCk7XG4gICAgICAgIGlmICghcmVtb3RlUGVlci5oYXNMYWJlbChkYXRhLmxhYmVsKSkge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgUmVtb3RlIFBlZXIgaXMgbm90IHByb2R1Y2luZyB0aGlzIGxhYmVsXCIsIHtcbiAgICAgICAgICAgIGxhYmVsOiBkYXRhLmxhYmVsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYFxcdTI3NEMgUmVtb3RlIFBlZXIgaXMgbm90IHByb2R1Y2luZyB0aGlzIGxhYmVsOiAke2RhdGEubGFiZWx9YFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBjb25zdW1lciB9ID0gYXdhaXQgdGhpcy5yZWN2VHJhbnNwb3J0LmNvbnN1bWUoe1xuICAgICAgICAgIC4uLmRhdGEsXG4gICAgICAgICAga2luZDogZGF0YS5raW5kLFxuICAgICAgICAgIHByb2R1Y2VyUGF1c2VkOiBkYXRhPy5wcm9kdWNlclBhdXNlZCA/PyBmYWxzZSxcbiAgICAgICAgICBydHBQYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICBjb2RlY3M6IGRhdGEucnRwUGFyYW1ldGVycy5jb2RlY3MsXG4gICAgICAgICAgICBtaWQ6IGRhdGEucnRwUGFyYW1ldGVycy5taWQsXG4gICAgICAgICAgICBlbmNvZGluZ3M6IGRhdGEucnRwUGFyYW1ldGVycy5lbmNvZGluZ3MsXG4gICAgICAgICAgICBoZWFkZXJFeHRlbnNpb25zOiBkYXRhLnJ0cFBhcmFtZXRlcnMuaGVhZGVyRXh0ZW5zaW9ucyxcbiAgICAgICAgICAgIHJ0Y3A6IGRhdGEucnRwUGFyYW1ldGVycy5ydGNwXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zb2NrZXQucHVibGlzaChcInJlc3VtZUNvbnN1bWVyXCIsIHtcbiAgICAgICAgICBjb25zdW1lcklkOiBkYXRhLmNvbnN1bWVySWQsXG4gICAgICAgICAgcHJvZHVjZXJQZWVySWQ6IGRhdGEucHJvZHVjZXJQZWVySWRcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChkYXRhPy5wcm9kdWNlclBhdXNlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBjb25zdW1lci5yZXN1bWUoKTtcbiAgICAgICAgICB0aGlzLnJvb20uZW1pdChcInN0cmVhbS1hZGRlZFwiLCB7XG4gICAgICAgICAgICBsYWJlbDogY29uc3VtZXIubGFiZWwsXG4gICAgICAgICAgICBwZWVySWQ6IGRhdGEucHJvZHVjZXJQZWVySWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZW1vdGVQZWVyLmVtaXQoXCJzdHJlYW0tcGxheWFibGVcIiwge1xuICAgICAgICAgICAgY29uc3VtZXIsXG4gICAgICAgICAgICBsYWJlbDogY29uc3VtZXIubGFiZWxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdW1lci5wYXVzZSgpO1xuICAgICAgICAgIHJlbW90ZVBlZXIuZW1pdChcInN0cmVhbS1hdmFpbGFibGVcIiwge1xuICAgICAgICAgICAgbGFiZWw6IGRhdGEubGFiZWwsXG4gICAgICAgICAgICBsYWJlbERhdGE6IHtcbiAgICAgICAgICAgICAgcHJvZHVjZXJJZDogZGF0YS5wcm9kdWNlcklkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgRXJyb3IgQ29uc3VtZSBSZXNwb25zZVwiKTtcbiAgICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgICAgdGhpcy5fX3BlbmRpbmdDb25zdW1lclRhc2tzLmRlbGV0ZShkYXRhLnByb2R1Y2VySWQpO1xuICAgICAgfVxuICAgIH0sXG4gICAgcmVzdW1lUHJvZHVjZXJTdWNjZXNzOiBhc3luYyAoZGF0YSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbG9nZ2VyLmluZm8oXCJcXHUyNzA1IFByb2R1Y2VyIFJlc3VtZWRcIiwgZGF0YSk7XG4gICAgICAgIGlmIChkYXRhLnBlZXJJZCA9PT0gdGhpcy5wZWVySWQpIHJldHVybjtcbiAgICAgICAgY29uc3QgeyBwZWVySWQsIGxhYmVsIH0gPSBkYXRhO1xuICAgICAgICBjb25zdCByZW1vdGVQZWVyID0gdGhpcy5yb29tLmdldFJlbW90ZVBlZXJCeUlkKHBlZXJJZCk7XG4gICAgICAgIGNvbnN0IGNvbnN1bWVyID0gdGhpcy5yZWN2VHJhbnNwb3J0LmdldENvbnN1bWVyKHsgbGFiZWwsIHBlZXJJZCB9KTtcbiAgICAgICAgaWYgKGNvbnN1bWVyICYmIGNvbnN1bWVyLnByb2R1Y2VySWQgPT09IGRhdGEucHJvZHVjZXJJZCkge1xuICAgICAgICAgIGNvbnN1bWVyPy5yZXN1bWUoKTtcbiAgICAgICAgICByZW1vdGVQZWVyLmVtaXQoXCJzdHJlYW0tcGxheWFibGVcIiwge1xuICAgICAgICAgICAgbGFiZWwsXG4gICAgICAgICAgICBjb25zdW1lclxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIEVycm9yIFJlc3VtaW5nIFByb2R1Y2VyXCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHBhdXNlUHJvZHVjZXJTdWNjZXNzOiBhc3luYyAoZGF0YSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbG9nZ2VyLmluZm8oXCJcXHUyNzA1IFByb2R1Y2VyIFBhdXNlZFwiLCBkYXRhKTtcbiAgICAgICAgaWYgKGRhdGEucGVlcklkID09PSB0aGlzLnBlZXJJZCkgcmV0dXJuO1xuICAgICAgICBjb25zdCB7IHBlZXJJZCwgbGFiZWwsIHByb2R1Y2VySWQgfSA9IGRhdGE7XG4gICAgICAgIGNvbnN0IHJlbW90ZVBlZXIgPSB0aGlzLnJvb20uZ2V0UmVtb3RlUGVlckJ5SWQocGVlcklkKTtcbiAgICAgICAgY29uc3QgY29uc3VtZXIgPSB0aGlzLnJlY3ZUcmFuc3BvcnQuZ2V0Q29uc3VtZXIoeyBsYWJlbCwgcGVlcklkIH0pO1xuICAgICAgICBpZiAoY29uc3VtZXIgJiYgY29uc3VtZXIucHJvZHVjZXJJZCA9PT0gcHJvZHVjZXJJZCkge1xuICAgICAgICAgIGNvbnN1bWVyPy5wYXVzZSgpO1xuICAgICAgICAgIHJlbW90ZVBlZXIuZW1pdChcInN0cmVhbS1wYXVzZWRcIiwge1xuICAgICAgICAgICAgbGFiZWwsXG4gICAgICAgICAgICBwcm9kdWNlcklkLFxuICAgICAgICAgICAgcGVlcklkXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgRXJyb3IgUGF1c2luZyBQcm9kdWNlclwiLCBlcnJvcik7XG4gICAgICB9XG4gICAgfSxcbiAgICBjbG9zZVByb2R1Y2VyU3VjY2VzczogYXN5bmMgKGRhdGEpID0+IHtcbiAgICAgIGxvZ2dlci5pbmZvKFwiXFx1MjcwNSBQcm9kdWNlciBDbG9zZWRcIiwgZGF0YSk7XG4gICAgICBpZiAodGhpcy5wZWVySWQgPT09IGRhdGEucGVlcklkKSByZXR1cm47XG4gICAgICBjb25zdCB7IHBlZXJJZCwgbGFiZWwgfSA9IGRhdGE7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLl9fY2xvc2VSZW1vdGVQZWVyQ29uc3VtZXIoe1xuICAgICAgICAgIHBlZXJJZCxcbiAgICAgICAgICBsYWJlbFxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIEVycm9yIENsb3NpbmcgUHJvZHVjZXJcIik7XG4gICAgICAgIGxvZ2dlci5lcnJvcihlcnIpO1xuICAgICAgfVxuICAgIH0sXG4gICAgY2xvc2VDb25zdW1lclN1Y2Nlc3M6IGFzeW5jIChkYXRhKSA9PiB7XG4gICAgICBsb2dnZXIuaW5mbyhcIlxcdTI3MDUgQ29uc3VtZXIgQ2xvc2VkLCBcIiwgZGF0YSk7XG4gICAgfSxcbiAgICByZXN0YXJ0VHJhbnNwb3J0SWNlUmVzcG9uc2U6IGFzeW5jIChkYXRhKSA9PiB7XG4gICAgICBjb25zdCB7IHRyYW5zcG9ydFR5cGUsIGljZVBhcmFtZXRlcnMgfSA9IGRhdGE7XG4gICAgICBsb2dnZXIuaW5mbyhcIlxcdTI3MDUgUmVzdGFydCBUcmFuc3BvcnQgSWNlIFJlc3BvbnNlIFwiLCB0cmFuc3BvcnRUeXBlKTtcbiAgICAgIGNvbnN0IHRyYW5zcG9ydCA9IHRyYW5zcG9ydFR5cGUgPT09IFwic2VuZFwiID8gdGhpcy5fX3NlbmRUcmFuc3BvcnQgOiB0aGlzLl9fcmVjdlRyYW5zcG9ydDtcbiAgICAgIGlmICghdHJhbnNwb3J0KSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihgXFx1Mjc0QyAke3RyYW5zcG9ydFR5cGV9IFRyYW5zcG9ydCBOb3QgRm91bmRgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdHJhbnNwb3J0Lm1lZGlhc291cFRyYW5zcG9ydC5yZXN0YXJ0SWNlKHtcbiAgICAgICAgICBpY2VQYXJhbWV0ZXJzXG4gICAgICAgIH0pO1xuICAgICAgICBsb2dnZXIuaW5mbyhcIlxcdTI3MDUgUmVzdGFydGVkIEljZSBmb3IgdHlwZTogXCIsIHRyYW5zcG9ydFR5cGUpO1xuICAgICAgICB0aGlzLmVtaXQoXCJpY2UtdHJhbnNwb3J0LXJlc3RhcnRlZFwiKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgRXJyb3IgUmVzdGFydGluZyBJY2UgZm9yIHR5cGU6IFwiLCB0cmFuc3BvcnRUeXBlKTtcbiAgICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGNvbnN1bWVEYXRhUmVzcG9uc2U6IGFzeW5jIChkYXRhKSA9PiB7XG4gICAgICBsb2dnZXIuaW5mbyhcIlxcdTI3MDUgQ29uc3VtZSBEYXRhIFJlc3BvbnNlLCBsYWJlbFwiLCBkYXRhLmxhYmVsKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBwZWVySWQsXG4gICAgICAgICAgZGF0YVByb2R1Y2VySWQsXG4gICAgICAgICAgbGFiZWwsXG4gICAgICAgICAgcHJvdG9jb2wsXG4gICAgICAgICAgc2N0cFN0cmVhbVBhcmFtZXRlcnNcbiAgICAgICAgfSA9IGRhdGE7XG4gICAgICAgIGlmIChsYWJlbCA9PT0gXCJib3RcIikge1xuICAgICAgICAgIGNvbnN0IGRhdGFQcm9kdWNlciA9IHRoaXMuc2VuZFRyYW5zcG9ydC5kYXRhUHJvZHVjZXJzLmdldChcImJvdFwiKTtcbiAgICAgICAgICBjb25zdCBkYXRhQ29uc3VtZXIgPSBhd2FpdCB0aGlzLnJlY3ZUcmFuc3BvcnQuY29uc3VtZURhdGEoe1xuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBkYXRhUHJvZHVjZXJJZCxcbiAgICAgICAgICAgIGxhYmVsLFxuICAgICAgICAgICAgcGVlcklkLFxuICAgICAgICAgICAgcHJvdG9jb2wsXG4gICAgICAgICAgICBzY3RwU3RyZWFtUGFyYW1ldGVycyxcbiAgICAgICAgICAgIGFwcERhdGE6IHt9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc3QgYm90ID0gbmV3IEJvdF9kZWZhdWx0KHsgZGF0YUNvbnN1bWVyLCBkYXRhUHJvZHVjZXIgfSk7XG4gICAgICAgICAgY29uc3QgZGVmYXVsdFNpemUgPSB0aGlzLnJvb20uZGVmYXVsdEFjdGl2ZVNwZWFrZXJTaXplO1xuICAgICAgICAgIHRoaXMucm9vbS5ib3QgPSBib3Q7XG4gICAgICAgICAgaWYgKHRoaXMucm9vbS5kZWZhdWx0QWN0aXZlU3BlYWtlclNpemUgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnJvb20uYWN0aXZlU3BlYWtlcnMgPSBuZXcgQWN0aXZlU3BlYWtlcnNfZGVmYXVsdCh7XG4gICAgICAgICAgICAgIGJvdCxcbiAgICAgICAgICAgICAgc2l6ZTogZGVmYXVsdFNpemVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLl9fcGVuZGluZ1Rhc2tzLmRlbGV0ZShcInZvbGF0aWxlTWVzc2FnaW5nXCIpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIEVycm9yOiBDb25zdW1lIERhdGEgUmVzcG9uc2VcIiwgZXJyb3IpO1xuICAgICAgfVxuICAgIH0sXG4gICAgcHJvZHVjZURhdGFSZXNwb25zZTogYXN5bmMgKGRhdGEpID0+IHtcbiAgICAgIGxvZ2dlci5pbmZvKFwiXFx1MjcwNSBQcm9kdWNlIERhdGEgUmVzcG9uc2UgY29uc3VtZXJJZEZyb21TZXJ2ZXJcIiwgZGF0YS5pZCk7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IHBlZXJJZCwgZGF0YVByb2R1Y2VySWQsIGxhYmVsIH0gPSBkYXRhO1xuICAgICAgICBpZiAocGVlcklkID09PSB0aGlzLnBlZXJJZCkge1xuICAgICAgICAgIHRoaXMuc2VuZFRyYW5zcG9ydC5yZXNvbHZlUGVuZGluZ1Byb2R1Y2VyVGFzayh7XG4gICAgICAgICAgICBpZDogZGF0YVByb2R1Y2VySWQsXG4gICAgICAgICAgICBsYWJlbCxcbiAgICAgICAgICAgIHBlZXJJZFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnN0IG9uZ29pblByb2R1Y2VyVGFzayA9IHRoaXMuX19wZW5kaW5nVGFza3MuZ2V0KFwidm9sYXRpbGVNZXNzYWdpbmdcIik7XG4gICAgICAgICAgYXdhaXQgb25nb2luUHJvZHVjZXJUYXNrO1xuICAgICAgICAgIGlmIChsYWJlbCA9PT0gXCJib3RcIikge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKFxuICAgICAgICAgICAgICBcIlxcdXsxRjUxNH0gQm90IERhdGEgUHJvZHVjZXIgQ3JlYXRlZCwgTGFiZWwgJ2JvdCdcIixcbiAgICAgICAgICAgICAgdGhpcy5zZW5kVHJhbnNwb3J0LmRhdGFQcm9kdWNlcnNcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBkYXRhUHJvZHVjZXIgPSB0aGlzLnNlbmRUcmFuc3BvcnQuZGF0YVByb2R1Y2Vycy5nZXQoXCJib3RcIik7XG4gICAgICAgICAgICBjb25zdCBkYXRhQ29uc3VtZXIgPSBhd2FpdCB0aGlzLnJlY3ZUcmFuc3BvcnQuY29uc3VtZURhdGEoe1xuICAgICAgICAgICAgICBpZDogZGF0YS5pZCxcbiAgICAgICAgICAgICAgZGF0YVByb2R1Y2VySWQsXG4gICAgICAgICAgICAgIHBlZXJJZCxcbiAgICAgICAgICAgICAgbGFiZWwsXG4gICAgICAgICAgICAgIHByb3RvY29sOiBkYXRhLnByb3RvY29sLFxuICAgICAgICAgICAgICBzY3RwU3RyZWFtUGFyYW1ldGVyczogZGF0YS5zY3RwU3RyZWFtUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgYXBwRGF0YToge31cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgZGVmYXVsdFNpemUgPSB0aGlzLnJvb20uZGVmYXVsdEFjdGl2ZVNwZWFrZXJTaXplO1xuICAgICAgICAgICAgdGhpcy5yb29tLmJvdCA9IG5ldyBCb3RfZGVmYXVsdCh7IGRhdGFDb25zdW1lciwgZGF0YVByb2R1Y2VyIH0pO1xuICAgICAgICAgICAgaWYgKHRoaXMucm9vbS5kZWZhdWx0QWN0aXZlU3BlYWtlclNpemUgPiAwKSB7XG4gICAgICAgICAgICAgIHRoaXMucm9vbS5hY3RpdmVTcGVha2VycyA9IG5ldyBBY3RpdmVTcGVha2Vyc19kZWZhdWx0KHtcbiAgICAgICAgICAgICAgICBib3Q6IHRoaXMucm9vbS5ib3QsXG4gICAgICAgICAgICAgICAgc2l6ZTogZGVmYXVsdFNpemVcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9fcGVuZGluZ1Rhc2tzLmRlbGV0ZShcInZvbGF0aWxlTWVzc2FnaW5nXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBQcm9kdWNlIERhdGEgUmVzcG9uc2VcIik7XG4gICAgICAgIGxvZ2dlci5lcnJvcih7IGVycm9yIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgbmV3UGVlckpvaW5lZDogKGRhdGEpID0+IHtcbiAgICAgIGlmICh0aGlzLnBlZXJJZCA9PT0gZGF0YS5wZWVySWQpIHJldHVybjtcbiAgICAgIGxvZ2dlci5pbmZvKFwiXFx1MjcwNSBOZXcgUGVlciBKb2luZWRcIiwgeyBkYXRhIH0pO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBwZWVySWQsIHJvbGUsIG1ldGFkYXRhIH0gPSBkYXRhO1xuICAgICAgICBpZiAoIXBlZXJJZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZW1vdGVQZWVyID0gbmV3IFJlbW90ZVBlZXJfZGVmYXVsdCh7XG4gICAgICAgICAgcGVlcklkLFxuICAgICAgICAgIHJvbGUsXG4gICAgICAgICAgbWV0YWRhdGFcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX19yZW1vdGVQZWVycy5zZXQocGVlcklkLCByZW1vdGVQZWVyKTtcbiAgICAgICAgY29uc3QgbG9iYnlQZWVycyA9IHRoaXMucm9vbS5sb2JieVBlZXJzTWFwO1xuICAgICAgICBpZiAobG9iYnlQZWVycy5oYXMocGVlcklkKSkge1xuICAgICAgICAgIGxvYmJ5UGVlcnMuZGVsZXRlKHBlZXJJZCk7XG4gICAgICAgICAgdGhpcy5yb29tLmxvYmJ5UGVlcnNNYXAgPSBsb2JieVBlZXJzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucm9vbS5lbWl0KFwibmV3LXBlZXItam9pbmVkXCIsIHsgcGVlcjogcmVtb3RlUGVlciB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgRXJyb3IgTmV3IFBlZXIgSm9pbmVkXCIpO1xuICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgIH0sXG4gICAgbmV3TG9iYnlQZWVyOiAoZGF0YSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbG9nZ2VyLmluZm8oXCJcXHUyNzA1IE5ldyBMb2JieSBQZWVyXCIsIHsgZGF0YSB9KTtcbiAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMucm9vbS5uZXdsb2JieVBlZXJzID0gW3BhcnNlZERhdGFdO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBOZXcgTG9iYnkgUGVlclwiKTtcbiAgICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIG5ld1Blcm1pc3Npb25zOiAoZGF0YSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IGRhdGEuYWNsO1xuICAgICAgICB0aGlzLl9fcGVybWlzc2lvbnMudXBkYXRlUGVybWlzc2lvbnMocGFyc2VkRGF0YSk7XG4gICAgICAgIHRoaXMuZW1pdChcInBlcm1pc3Npb25zLXVwZGF0ZWRcIiwge1xuICAgICAgICAgIHBlcm1pc3Npb25zOiB0aGlzLnBlcm1pc3Npb25zXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBVcGRhdGluZyBQZXJtaXNzaW9uc1wiKTtcbiAgICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIG5ld1Jvb21Db250cm9sczogKGRhdGEpID0+IHtcbiAgICAgIGxvZ2dlci5pbmZvKFwiXFx1MjcwNSBSZWNlaXZlZCBOZXcgUm9vbSBDb250cm9sc1wiLCB7IGRhdGEgfSk7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGNvbnRyb2xzIH0gPSBkYXRhO1xuICAgICAgICB0aGlzLnJvb20uY29uZmlnID0gY29udHJvbHM7XG4gICAgICAgIHRoaXMucm9vbS5lbWl0KFwicm9vbS1jb250cm9scy11cGRhdGVkXCIpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBVcGRhdGluZyBSb29tIENvbnRyb2xzXCIpO1xuICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgIH0sXG4gICAgbmV3UGVlclJvbGU6IChkYXRhKSA9PiB7XG4gICAgICBsb2dnZXIuaW5mbyhcIlxcdTI3MDUgUmVjZWl2ZWQgTmV3IFBlZXIncyBSb2xlXCIsIHsgZGF0YSB9KTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgcGVlcklkLCByb2xlIH0gPSBkYXRhO1xuICAgICAgICBpZiAocGVlcklkID09PSB0aGlzLnBlZXJJZCkge1xuICAgICAgICAgIGxvZ2dlci5pbmZvKFwiXFx1MjcwNSBVcGRhdGluZyBMb2NhbCBQZWVyJ3MgUm9sZVwiKTtcbiAgICAgICAgICB0aGlzLl9fcGVybWlzc2lvbnMucm9sZSA9IHJvbGU7XG4gICAgICAgICAgdGhpcy5lbWl0KFwicm9sZS11cGRhdGVkXCIsIHtcbiAgICAgICAgICAgIHJvbGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVtb3RlUGVlciA9IHRoaXMucm9vbS5nZXRSZW1vdGVQZWVyQnlJZChwZWVySWQpO1xuICAgICAgICBjb25zdCBwcmV2Um9sZSA9IHJlbW90ZVBlZXIucm9sZSA/PyBcIlwiO1xuICAgICAgICByZW1vdGVQZWVyLnJvbGUgPSByb2xlO1xuICAgICAgICB0aGlzLnJvb20uZW1pdChcInJvb20tcm9sZS11cGRhdGVkXCIsIHtcbiAgICAgICAgICBwZWVySWQsXG4gICAgICAgICAgbmV3Um9sZTogcm9sZSxcbiAgICAgICAgICBwcmV2Um9sZVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgRXJyb3IgVXBkYXRpbmcgUGVlcidzIFJvbGVcIik7XG4gICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICB9XG4gICAgfSxcbiAgICByb29tQ2xvc2VkUHJvZHVjZXJzOiAoZGF0YSkgPT4ge1xuICAgICAgbG9nZ2VyLmluZm8oXCJcXHUyNzA1IFJlY2VpdmVkIFJvb20ncyBDbG9zZWQgUHJvZHVjZXJzXCIsIHsgZGF0YSB9KTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgcHJvZHVjZXJzLCByZWFzb24gfSA9IGRhdGE7XG4gICAgICAgIGZvciAoY29uc3QgcHJvZHVjZXIgb2YgcHJvZHVjZXJzKSB7XG4gICAgICAgICAgY29uc3QgeyBsYWJlbCwgcGVlcklkIH0gPSBwcm9kdWNlcjtcbiAgICAgICAgICBpZiAocGVlcklkID09PSB0aGlzLnBlZXJJZCAmJiBsYWJlbCkge1xuICAgICAgICAgICAgdGhpcy5zdG9wUHJvZHVjaW5nKHsgbGFiZWwgfSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlbW90ZVBlZXIgPSB0aGlzLnJvb20uZ2V0UmVtb3RlUGVlckJ5SWQocGVlcklkKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnN1bWVyID0gdGhpcy5yZWN2VHJhbnNwb3J0LmdldENvbnN1bWVyKHtcbiAgICAgICAgICAgICAgbGFiZWwsXG4gICAgICAgICAgICAgIHBlZXJJZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY29uc3VtZXIpIHtcbiAgICAgICAgICAgICAgdGhpcy5yZWN2VHJhbnNwb3J0LmNsb3NlQ29uc3VtZXIoeyBsYWJlbCwgcGVlcklkIH0pO1xuICAgICAgICAgICAgICByZW1vdGVQZWVyLl9yZW1vdmVMYWJlbERhdGEobGFiZWwpO1xuICAgICAgICAgICAgICB0aGlzLnJvb20uZW1pdChcInN0cmVhbS1jbG9zZWRcIiwge1xuICAgICAgICAgICAgICAgIGxhYmVsLFxuICAgICAgICAgICAgICAgIHBlZXJJZFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBDbG9zaW5nIFByb2R1Y2VyXCIpO1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yb29tLmVtaXQoXCJyb29tLW5vdGlmaWNhdGlvblwiLCB7XG4gICAgICAgICAgY29kZTogcmVhc29uPy5jb2RlID8/IDQwMDQsXG4gICAgICAgICAgbWVzc2FnZTogcmVhc29uPy5tZXNzYWdlID8/IFwiUm9vbSBDbG9zZWRcIixcbiAgICAgICAgICB0YWc6IHJlYXNvbj8udGFnID8/IFwiUk9PTV9DTE9TRURcIlxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgRXJyb3IgVXBkYXRpbmcgUm9vbSdzIENsb3NlZCBQcm9kdWNlcnNcIik7XG4gICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICB9XG4gICAgfSxcbiAgICByZWNlaXZlRGF0YTogKGRhdGEpID0+IHtcbiAgICAgIGxvZ2dlci5pbmZvKFwiXFx1MjcwNSBSZWNlaXZlZCBEYXRhXCIsIHsgZGF0YSB9KTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgZnJvbSwgbGFiZWwsIHBheWxvYWQgfSA9IGRhdGE7XG4gICAgICAgIHRoaXMuZW1pdChcInJlY2VpdmUtZGF0YVwiLCB7XG4gICAgICAgICAgZnJvbSxcbiAgICAgICAgICBsYWJlbCxcbiAgICAgICAgICBwYXlsb2FkXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBSZWNlaXZlIERhdGFcIik7XG4gICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICB9XG4gICAgfSxcbiAgICBwZWVyTWV0YWRhdGFVcGRhdGVkOiAoZGF0YSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbG9nZ2VyLmluZm8oXCJcXHUyNzA1IE1ldGFkYXRhIFVwZGF0ZWRcIiwgeyBkYXRhIH0pO1xuICAgICAgICBjb25zdCB7IHBlZXJJZCwgbWV0YWRhdGEgfSA9IGRhdGE7XG4gICAgICAgIGlmICh0aGlzLnBlZXJJZCA9PT0gcGVlcklkKSB7XG4gICAgICAgICAgdGhpcy5fX3VwZGF0ZU1ldGFkYXRhKG1ldGFkYXRhKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVtb3RlUGVlciA9IHRoaXMucm9vbS5nZXRSZW1vdGVQZWVyQnlJZChwZWVySWQpO1xuICAgICAgICByZW1vdGVQZWVyLm1ldGFkYXRhID0gSlNPTi5wYXJzZShtZXRhZGF0YSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIEVycm9yIFVwZGF0aW5nIE1ldGFkYXRhXCIpO1xuICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgIH0sXG4gICAgcm9vbU1ldGFkYXRhVXBkYXRlZDogKGRhdGEpID0+IHtcbiAgICAgIGxvZ2dlci5pbmZvKFwiXFx1MjcwNSBSb29tIE1ldGFkYXRhIFVwZGF0ZWRcIiwgeyBkYXRhIH0pO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBtZXRhZGF0YSB9ID0gZGF0YTtcbiAgICAgICAgdGhpcy5yb29tLm1ldGFkYXRhID0gbWV0YWRhdGE7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIEVycm9yIFVwZGF0aW5nIFJvb20gTWV0YWRhdGFcIik7XG4gICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICB9XG4gICAgfSxcbiAgICBwZWVyTGVmdDogKGRhdGEpID0+IHtcbiAgICAgIGxvZ2dlci5pbmZvKFwiXFx1MjcwNSBQZWVyIExlZnRcIiwgeyBwZWVySWQ6IGRhdGEucGVlcklkIH0pO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBwZWVySWQgfSA9IGRhdGE7XG4gICAgICAgIGNvbnN0IHJlbW90ZVBlZXIgPSB0aGlzLnJvb20uZ2V0UmVtb3RlUGVlckJ5SWQocGVlcklkKTtcbiAgICAgICAgY29uc3QgbGFiZWxzID0gcmVtb3RlUGVlci5sYWJlbHM7XG4gICAgICAgIGZvciAoY29uc3QgbGFiZWwgb2YgbGFiZWxzKSB7XG4gICAgICAgICAgdGhpcy5fX2Nsb3NlUmVtb3RlUGVlckNvbnN1bWVyKHtcbiAgICAgICAgICAgIHBlZXJJZDogcmVtb3RlUGVlci5wZWVySWQsXG4gICAgICAgICAgICBsYWJlbFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJlbW90ZVBlZXIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5fX3JlbW90ZVBlZXJzLmRlbGV0ZShwZWVySWQpO1xuICAgICAgICB0aGlzLnJvb20uZW1pdChcInBlZXItbGVmdFwiLCB7XG4gICAgICAgICAgcGVlcklkLFxuICAgICAgICAgIG1ldGFkYXRhOiByZW1vdGVQZWVyLmdldE1ldGFkYXRhKCksXG4gICAgICAgICAgcm9sZTogcmVtb3RlUGVlci5yb2xlXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBQZWVyIExlZnRcIik7XG4gICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICB9XG4gICAgfSxcbiAgICBsb2JieVBlZXJMZWZ0OiAoZGF0YSkgPT4ge1xuICAgICAgbG9nZ2VyLmluZm8oXCJcXHUyNzA1IExvYmJ5IFBlZXIgTGVmdFwiLCB7IHBlZXJJZDogZGF0YS5wZWVySWQgfSk7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IHBlZXJJZCB9ID0gZGF0YTtcbiAgICAgICAgY29uc3QgbG9iYnlQZWVycyA9IHRoaXMucm9vbS5sb2JieVBlZXJzTWFwO1xuICAgICAgICBpZiAobG9iYnlQZWVycy5oYXMocGVlcklkKSkge1xuICAgICAgICAgIGxvYmJ5UGVlcnMuZGVsZXRlKHBlZXJJZCk7XG4gICAgICAgICAgdGhpcy5yb29tLmxvYmJ5UGVlcnNNYXAgPSBsb2JieVBlZXJzO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJcXHUyNzRDIEVycm9yIExvYmJ5IFBlZXIncyBMZWZ0XCIpO1xuICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBSZWdpc3RlcnMgdGhlIGltcG9ydGFudCBpbnRlcm5hbCBsaXN0ZW5lcnMgZm9yIHRoZSBjbGllbnQsIGV2ZW50cyBzdWNoIGFzIHJlY29ubmVjdGVkLCByb29tLWpvaW5lZCBldGMuXG4gICAqL1xuICBfX3JlZ2lzdGVySW50ZXJuYWxMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgdGhpcy5yb29tLm9uKFwicm9vbS1qb2luZWRcIiwgKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX192b2xhdGlsZU1lc3NhZ2luZyB8fCB0aGlzLnJvb20uZGVmYXVsdEFjdGl2ZVNwZWFrZXJTaXplID4gMCkge1xuICAgICAgICB0aGlzLl9fYWN0aXZhdGVWb2xhdGlsZU1lc3NhZ2luZygpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihcbiAgICAgICAgICAgIFwiXFx1ezFGNTM0fSBFcnJvciB3aGlsZSBhY3RpdmF0aW5nIGFjdGl2ZSBzcGVha2VycyBub3RpZmljYXRpb25cIixcbiAgICAgICAgICAgIGVycm9yXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5zb2NrZXQub24oXCJyZWNvbm5lY3RlZFwiLCAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMuam9pbmVkKSB7XG4gICAgICAgIGxvZ2dlci5pbmZvKFwiXFx1ezFGNTE0fSBQZWVyIFJlY29ubmVjdGVkLCBQZWVyIENhbiBKb2luIFJvb21cIiwge1xuICAgICAgICAgIHJvb21TdGF0ZTogdGhpcy5yb29tLnN0YXRlXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy5yb29tSWQgJiYgdGhpcy5yb29tLnN0YXRlID09PSBcImNvbm5lY3RpbmdcIikge1xuICAgICAgICAgIHRoaXMucm9vbS5jb25uZWN0KHsgcm9vbUlkOiB0aGlzLnJvb21JZCB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBsb2dnZXIuaW5mbyhcIlxcdXsxRjUxNH0gTG9jYWxQZWVyIFJlY29ubmVjdGVkLCBTeW5jaW5nIE1lZXRpbmcgU3RhdGVzXCIpO1xuICAgICAgdGhpcy5fX3N5bmNNZWV0aW5nU3RhdGUoKTtcbiAgICAgIGlmICh0aGlzLl9fc2VuZFRyYW5zcG9ydCkge1xuICAgICAgICB0aGlzLnNvY2tldC5wdWJsaXNoKFwicmVzdGFydFRyYW5zcG9ydEljZVwiLCB7XG4gICAgICAgICAgdHJhbnNwb3J0SWQ6IHRoaXMuX19zZW5kVHJhbnNwb3J0Lm1lZGlhc291cFRyYW5zcG9ydC5pZCxcbiAgICAgICAgICB0cmFuc3BvcnRUeXBlOiBcInNlbmRcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9fcmVjdlRyYW5zcG9ydCkge1xuICAgICAgICB0aGlzLnNvY2tldC5wdWJsaXNoKFwicmVzdGFydFRyYW5zcG9ydEljZVwiLCB7XG4gICAgICAgICAgdHJhbnNwb3J0SWQ6IHRoaXMuX19yZWN2VHJhbnNwb3J0Lm1lZGlhc291cFRyYW5zcG9ydC5pZCxcbiAgICAgICAgICB0cmFuc3BvcnRUeXBlOiBcInJlY3ZcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBDcmVhdGVzIGEgUHJvZHVjZXIsIGlmIHNlbmQgdHJhbnNwb3J0IGlzIG5vdCBpbml0aWFsaXplZCwgaXQgY3JlYXRlcyBvbmUgYW5kIHRoZW4gY3JlYXRlcyBhIHByb2R1Y2VyXG4gICAqIEBwYXJhbSBkYXRhIC0gRGF0YSB0byBjcmVhdGUgYSBwcm9kdWNlciB7IGxhYmVsLCBzdHJlYW0sIHN0b3BUcmFja09uQ2xvc2UsIGFwcERhdGEgfVxuICAgKiBAcmV0dXJucyAtIFByb2R1Y2VyXG4gICAqL1xuICBfX2NyZWF0ZVByb2R1Y2VyID0gYXN5bmMgKGRhdGEpID0+IHtcbiAgICBpZiAoIXRoaXMuX19zZW5kVHJhbnNwb3J0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcXHUyNzRDIFNlbmQgVHJhbnNwb3J0IE5vdCBJbml0aWFsaXplZCwgSW50ZXJuYWwgRXJyb3JcIik7XG4gICAgfVxuICAgIGNvbnN0IHByb2R1Y2VyID0gYXdhaXQgdGhpcy5fX3NlbmRUcmFuc3BvcnQucHJvZHVjZSh7XG4gICAgICBzdHJlYW06IGRhdGEuc3RyZWFtLFxuICAgICAgc3RvcFRyYWNrT25DbG9zZTogZGF0YS5zdG9wVHJhY2tPbkNsb3NlID8/IHRydWUsXG4gICAgICBsYWJlbDogZGF0YS5sYWJlbCxcbiAgICAgIHByZWZmZXJlZENvZGVjOiBkYXRhLnByZWZmZXJlZENvZGVjLFxuICAgICAgYXBwRGF0YToge1xuICAgICAgICAuLi5kYXRhLmFwcERhdGEsXG4gICAgICAgIGxhYmVsOiBkYXRhLmxhYmVsXG4gICAgICB9XG4gICAgfSk7XG4gICAgcHJvZHVjZXIub24oXCJ0cmFuc3BvcnRjbG9zZVwiLCAoKSA9PiB7XG4gICAgICB0aGlzLnN0b3BQcm9kdWNpbmcoeyBsYWJlbDogZGF0YS5sYWJlbCB9KTtcbiAgICB9KTtcbiAgICBpZiAoIWRhdGEuc3RyZWFtPy5hY3RpdmUpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgU3RyZWFtIGlzIG5vdCBhY3RpdmUsIENsb3NpbmcgUHJvZHVjZXJcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcXHUyNzRDIFN0cmVhbSBpcyBub3QgYWN0aXZlLCBDbG9zaW5nIFByb2R1Y2VyXCIpO1xuICAgIH1cbiAgICB0aGlzLmVtaXQoXCJzdHJlYW0tcGxheWFibGVcIiwge1xuICAgICAgbGFiZWw6IGRhdGEubGFiZWwsXG4gICAgICBwcm9kdWNlclxuICAgIH0pO1xuICAgIHJldHVybiBwcm9kdWNlcjtcbiAgfTtcbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBDcmVhdGUgYSBEYXRhUHJvZHVjZXIgb24gdGhlIHNlcnZlciwgRGF0YSBQcm9kdWNlciBpcyB1c2VkIHRvIHNlbmQgZGF0YSBvdGhlciB0aGFuIE1lZGlhIHN0cmVhbSB0byB0aGUgc2VydmVyXG4gICAqIEB0aHJvd3MgRXJyb3IgaWYgRGF0YVByb2R1Y2VyIGNhbm5vdCBiZSBjcmVhdGVkXG4gICAqIEBwYXJhbSBkYXRhXG4gICAqL1xuICBfX2NyZWF0ZURhdGFQcm9kdWNlciA9IGFzeW5jIChkYXRhKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghdGhpcy5fX3NlbmRUcmFuc3BvcnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiXFx1Mjc0QyBTZW5kIFRyYW5zcG9ydCBOb3QgSW5pdGlhbGl6ZWQsIEludGVybmFsIEVycm9yXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgZGF0YVByb2R1Y2VyID0gYXdhaXQgdGhpcy5fX3NlbmRUcmFuc3BvcnQucHJvZHVjZURhdGEoZGF0YSk7XG4gICAgICBkYXRhUHJvZHVjZXIub24oXCJ0cmFuc3BvcnRjbG9zZVwiLCAoKSA9PiB7XG4gICAgICAgIGxvZ2dlci5pbmZvKFwiXFx1ezFGNTE0fSBEYXRhIFByb2R1Y2VyJ3MgVHJhbnNwb3J0IENsb3NlZFwiKTtcbiAgICAgIH0pO1xuICAgICAgZGF0YVByb2R1Y2VyLm9uKFwiYnVmZmVyZWRhbW91bnRsb3dcIiwgKCkgPT4ge1xuICAgICAgICBsb2dnZXIuaW5mbyhcIlxcdXsxRjUxNH0gRGF0YSBQcm9kdWNlciBCdWZmZXJlZCBBbW91bnQgTG93XCIpO1xuICAgICAgfSk7XG4gICAgICBkYXRhUHJvZHVjZXIub24oXCJAY2xvc2VcIiwgKCkgPT4ge1xuICAgICAgICBsb2dnZXIuaW5mbyhcIlxcdXsxRjUxNH0gRGF0YSBQcm9kdWNlciBDbG9zZWRcIik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkYXRhUHJvZHVjZXI7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBDcmVhdGluZyBEYXRhIFByb2R1Y2VyXCIsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlxcdTI3NEMgRXJyb3IgQ3JlYXRpbmcgRGF0YSBQcm9kdWNlclwiKTtcbiAgICB9XG4gIH07XG4gIC8qKlxuICAgKiBDcmVhdGUgV2ViUlRDIFRyYW5zcG9ydCAoU2VuZC9SZWN2KSBvbiBTZXJ2ZXJcbiAgICogQHRocm93cyBFcnJvciBpZiBUcmFuc3BvcnQgY2Fubm90IGJlIGNyZWF0ZWRcbiAgICogQHBhcmFtIGRhdGEgLSBUcmFuc3BvcnQgRGF0YSB7IHRyYW5zcG9ydFR5cGUgfVxuICAgKiBAcmV0dXJucyAtIFRyYW5zcG9ydCAoIFdlYlJUQyBUcmFuc3BvcnQgKVxuICAgKi9cbiAgX19jcmVhdGVUcmFuc3BvcnRPblNlcnZlciA9IGFzeW5jIChkYXRhKSA9PiB7XG4gICAgY29uc3QgcGVuZGluZ1Byb21pc2UgPSB0aGlzLl9fcGVuZGluZ1RyYW5zcG9ydFRhc2tzLmdldChkYXRhLnRyYW5zcG9ydFR5cGUpO1xuICAgIGlmIChwZW5kaW5nUHJvbWlzZSkge1xuICAgICAgbG9nZ2VyLmluZm8oXG4gICAgICAgIGBcXHV7MUY1MTR9IFRyYW5zcG9ydCBUYXNrIEFscmVhZHkgUGVuZGluZyBmb3IgdGhpcyB0cmFuc3BvcnRUeXBlICR7ZGF0YS50cmFuc3BvcnRUeXBlfWBcbiAgICAgICk7XG4gICAgICByZXR1cm4gcGVuZGluZ1Byb21pc2U7XG4gICAgfVxuICAgIGNvbnN0IHsgdHJhbnNwb3J0VHlwZSB9ID0gZGF0YTtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgaGFuZGxlTmV3VHJhbnNwb3J0ID0gKGRhdGEyKSA9PiB7XG4gICAgICAgIGlmIChkYXRhMi50cmFuc3BvcnQudHJhbnNwb3J0VHlwZSA9PT0gdHJhbnNwb3J0VHlwZSkge1xuICAgICAgICAgIHRoaXMuX19wZW5kaW5nVHJhbnNwb3J0VGFza3MuZGVsZXRlKHRyYW5zcG9ydFR5cGUpO1xuICAgICAgICAgIHJlc29sdmUoZGF0YTIudHJhbnNwb3J0KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGlmICh0cmFuc3BvcnRUeXBlID09PSBcInNlbmRcIikge1xuICAgICAgICB0aGlzLm9uY2UoXCJuZXctc2VuZC10cmFuc3BvcnRcIiwgaGFuZGxlTmV3VHJhbnNwb3J0KTtcbiAgICAgIH1cbiAgICAgIGlmICh0cmFuc3BvcnRUeXBlID09PSBcInJlY3ZcIikge1xuICAgICAgICB0aGlzLm9uY2UoXCJuZXctcmVjdi10cmFuc3BvcnRcIiwgaGFuZGxlTmV3VHJhbnNwb3J0KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGRldmljZSA9IHRoaXMuZGV2aWNlO1xuICAgICAgY29uc3QgdHJhbnNwb3J0ID0gZGF0YS50cmFuc3BvcnRUeXBlID09PSBcInNlbmRcIiA/IHRoaXMuX19zZW5kVHJhbnNwb3J0IDogdGhpcy5fX3JlY3ZUcmFuc3BvcnQ7XG4gICAgICBpZiAodHJhbnNwb3J0KSB7XG4gICAgICAgIHJlamVjdChcbiAgICAgICAgICBuZXcgRXJyb3IoYFxcdTI3NEMgVHJhbnNwb3J0IEFscmVhZHkgSW5pdGlhbGl6ZWQsIHR5cGU6ICR7dHJhbnNwb3J0VHlwZX1gKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgbG9nZ2VyLmluZm8oYFxcdXsxRjUxNH0gQ3JlYXRpbmcgJHtkYXRhLnRyYW5zcG9ydFR5cGV9IFRyYW5zcG9ydCBPbiBTZXJ2ZXJgKTtcbiAgICAgIHRoaXMuc29ja2V0LnB1Ymxpc2goXCJjcmVhdGVUcmFuc3BvcnRcIiwge1xuICAgICAgICBzY3RwQ2FwYWJpbGl0aWVzOiBkZXZpY2Uuc2N0cENhcGFiaWxpdGllcyxcbiAgICAgICAgdHJhbnNwb3J0VHlwZTogZGF0YS50cmFuc3BvcnRUeXBlXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICB0aGlzLl9fcGVuZGluZ1RyYW5zcG9ydFRhc2tzLnNldChkYXRhLnRyYW5zcG9ydFR5cGUsIHByb21pc2UpO1xuICAgIHJldHVybiBwcm9taXNlO1xuICB9O1xuICAvKipcbiAgICogU2V0cyB0aGUgUmVtb3RlIFBlZXJzIGluIHRoZSBSb29tXG4gICAqIEBwYXJhbSByb29tSW5mb1xuICAgKi9cbiAgX19zZXRSZW1vdGVQZWVycyA9IChyb29tSW5mbykgPT4ge1xuICAgIGNvbnN0IHsgcGVlcnMgfSA9IHJvb21JbmZvO1xuICAgIGZvciAoY29uc3QgcGVlciBvZiBwZWVycykge1xuICAgICAgaWYgKHBlZXIucGVlcklkID09PSB0aGlzLnBlZXJJZCkgY29udGludWU7XG4gICAgICBjb25zdCByZW1vdGVQZWVyID0gbmV3IFJlbW90ZVBlZXJfZGVmYXVsdCh7XG4gICAgICAgIHBlZXJJZDogcGVlci5wZWVySWQsXG4gICAgICAgIG1ldGFkYXRhOiBwZWVyLm1ldGFkYXRhLFxuICAgICAgICByb2xlOiBwZWVyLnJvbGVcbiAgICAgIH0pO1xuICAgICAgY29uc3QgcHJvZHVjZXJzID0gcGVlci5wcm9kdWNlcnM7XG4gICAgICB0aGlzLl9fcmVtb3RlUGVlcnMuc2V0KHBlZXIucGVlcklkLCByZW1vdGVQZWVyKTtcbiAgICAgIHByb2R1Y2Vycy5tYXAoKHApID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLl9fcmVjdlRyYW5zcG9ydCB8fCB0aGlzLl9fcmVjdlRyYW5zcG9ydC5jb25uZWN0aW9uU3RhdGUgPT09IFwibmV3XCIgfHwgdGhpcy5fX3JlY3ZUcmFuc3BvcnQuY29ubmVjdGlvblN0YXRlID09PSBcImNvbm5lY3RlZFwiKSB7XG4gICAgICAgICAgcmVtb3RlUGVlci5fYWRkTGFiZWxEYXRhKHtcbiAgICAgICAgICAgIHByb2R1Y2VySWQ6IHAuaWQsXG4gICAgICAgICAgICBsYWJlbDogcC5sYWJlbFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX193YWl0aW5nVG9Db25zdW1lLnB1c2goXG4gICAgICAgICAgICAoKSA9PiByZW1vdGVQZWVyLl9hZGRMYWJlbERhdGEoe1xuICAgICAgICAgICAgICBwcm9kdWNlcklkOiBwLmlkLFxuICAgICAgICAgICAgICBsYWJlbDogcC5sYWJlbFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBMb2JieSBQZWVycyBpbiB0aGUgUm9vbVxuICAgKiBAcGFyYW0gcm9vbUluZm8gLSBSb29tSW5mb1xuICAgKi9cbiAgX19zZXRMb2JieVBlZXJzID0gKHJvb21JbmZvKSA9PiB7XG4gICAgY29uc3QgeyBsb2JieVBlZXJzIH0gPSByb29tSW5mbztcbiAgICB0aGlzLnJvb20ubmV3bG9iYnlQZWVycyA9IGxvYmJ5UGVlcnM7XG4gIH07XG4gIC8qKlxuICAgKiBIZWxwZXIgRnVuY3Rpb24gdG8gY2xvc2UgdGhlIGNvbnN1bWVyIG9mIGEgcmVtb3RlIHBlZXJcbiAgICogQHBhcmFtIGRhdGEgLSBEYXRhIHRvIGNsb3NlIHRoZSBjb25zdW1lciB7IHBlZXJJZCwgbGFiZWwgfVxuICAgKi9cbiAgX19jbG9zZVJlbW90ZVBlZXJDb25zdW1lciA9IChkYXRhKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgcGVlcklkLCBsYWJlbCB9ID0gZGF0YTtcbiAgICAgIGNvbnN0IHJlbW90ZVBlZXIgPSB0aGlzLnJvb20uZ2V0UmVtb3RlUGVlckJ5SWQocGVlcklkKTtcbiAgICAgIHJlbW90ZVBlZXIuX3JlbW92ZUxhYmVsRGF0YShsYWJlbCk7XG4gICAgICBjb25zdCBjb25zdW1lciA9IHRoaXMucmVjdlRyYW5zcG9ydC5nZXRDb25zdW1lcih7XG4gICAgICAgIGxhYmVsLFxuICAgICAgICBwZWVySWRcbiAgICAgIH0pO1xuICAgICAgaWYgKGNvbnN1bWVyKSB7XG4gICAgICAgIHRoaXMucmVjdlRyYW5zcG9ydC5jbG9zZUNvbnN1bWVyKHsgbGFiZWwsIHBlZXJJZCB9KTtcbiAgICAgIH1cbiAgICAgIHRoaXMucm9vbS5lbWl0KFwic3RyZWFtLWNsb3NlZFwiLCB7XG4gICAgICAgIGxhYmVsLFxuICAgICAgICBwZWVySWQ6IGRhdGEucGVlcklkXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBDbG9zaW5nIFJlbW90ZSBQZWVyJ3MgQ29uc3VtZXJcIik7XG4gICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqICFpbXBvcnRhbnRcbiAgICogSGFuZGxlciBGdW5jdGlvbiB0byBoYW5kbGUgdGhlIHdhaXRpbmcgdG8gcHJvZHVjZSB0YXNrcyB3aGVuIHVzZXIgaXMgam9pbmluZ1xuICAgKiB0aGUgcm9vbSB3aXRoIGFjdGl2ZSBzdHJlYW0sIGNoZWNrIGlmIHRoZSB1c2VyIGhhcyB2YWxpZCBwZXJtaXNzaW9ucyBhbmQgYmFzZWQgb25cbiAgICogdGhhdCBhbGxvd3MgdGhlIHVzZXIgdG8gcHJvZHVjZSB0aGUgc3RyZWFtXG4gICAqL1xuICBfX2hhbmRsZVdhaXRpbmdUb1Byb2R1Y2UgPSAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBlcm1pc3Npb25zID0gdGhpcy5wZXJtaXNzaW9ucztcbiAgICAgIGNvbnN0IGNsb3NlU3RyZWFtID0gKGxhYmVsKSA9PiB7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMuX19hY3RpdmVTdHJlYW1zLmdldChsYWJlbCk7XG4gICAgICAgIGlmIChzdHJlYW0pIHtcbiAgICAgICAgICB0aGlzLmRldmljZUhhbmRsZXIuc3RvcFN0cmVhbShzdHJlYW0pO1xuICAgICAgICAgIHRoaXMuX19hY3RpdmVTdHJlYW1zLmRlbGV0ZShsYWJlbCk7XG4gICAgICAgICAgdGhpcy5lbWl0KFwic3RyZWFtLWNsb3NlZFwiLCB7XG4gICAgICAgICAgICBsYWJlbCxcbiAgICAgICAgICAgIHJlYXNvbjoge1xuICAgICAgICAgICAgICBjb2RlOiA0NDQ0LFxuICAgICAgICAgICAgICBtZXNzYWdlOiBcIlVzZXIncyBQZXJtaXNzaW9ucyBEZW5pZWRcIixcbiAgICAgICAgICAgICAgdGFnOiBcIkNMT1NFRF9CWV9BRE1JTlwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fX3dhaXRpbmdUb1Byb2R1Y2UuZGVsZXRlKGxhYmVsKTtcbiAgICAgIH07XG4gICAgICBpZiAoIXBlcm1pc3Npb25zLmNhblByb2R1Y2UpIHtcbiAgICAgICAgZm9yIChjb25zdCBbbGFiZWwsIF9dIG9mIHRoaXMuX193YWl0aW5nVG9Qcm9kdWNlKSB7XG4gICAgICAgICAgY2xvc2VTdHJlYW0obGFiZWwpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX193YWl0aW5nVG9Qcm9kdWNlLmNsZWFyKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgW2xhYmVsLCBwZW5kaW5nU3RyZWFtVGFza10gb2YgdGhpcy5fX3dhaXRpbmdUb1Byb2R1Y2UpIHtcbiAgICAgICAgaWYgKGxhYmVsID09PSBcInZpZGVvXCIgJiYgIXBlcm1pc3Npb25zLmNhblByb2R1Y2VTb3VyY2VzLmNhbSkge1xuICAgICAgICAgIGNsb3NlU3RyZWFtKGxhYmVsKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGFiZWwgPT09IFwiYXVkaW9cIiAmJiAhcGVybWlzc2lvbnMuY2FuUHJvZHVjZVNvdXJjZXMubWljKSB7XG4gICAgICAgICAgY2xvc2VTdHJlYW0obGFiZWwpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHBlbmRpbmdTdHJlYW1UYXNrKCkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICAgICAgXCJcXHUyNzRDIEVycm9yIFByb2R1Y2luZyBTdHJlYW0gd2hpY2ggd2FzIHdhaXRpbmcgdG8gYmUgcHJvZHVjZWQgd2l0aCBsYWJlbCA6XCIsXG4gICAgICAgICAgICBsYWJlbFxuICAgICAgICAgICk7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgICAgICBjbG9zZVN0cmVhbShsYWJlbCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5fX3dhaXRpbmdUb1Byb2R1Y2UuY2xlYXIoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiXFx1Mjc0QyBFcnJvciBIYW5kbGluZyBXYWl0aW5nIFRvIFByb2R1Y2VcIik7XG4gICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIEludm9rZSB0aGUgd2FpdGluZyB0byBjb25zdW1lIHRhc2tzIGFuZCBjbGVhciB0aGUgd2FpdGluZyB0byBjb25zdW1lIGFycmF5XG4gICAqL1xuICBfX2hhbmRsZVdhaXRpbmdUb0NvbnN1bWUgPSAoKSA9PiB7XG4gICAgZm9yIChjb25zdCBjb25zdW1lVGFzayBvZiB0aGlzLl9fd2FpdGluZ1RvQ29uc3VtZSkge1xuICAgICAgY29uc3VtZVRhc2soKS5jYXRjaCgoKSA9PiB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIlVuYWJsZSB0byBDb25zdW1lIGFmdGVyIGljZSByZXN0YXJ0XCIpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuX193YWl0aW5nVG9Db25zdW1lID0gW107XG4gIH07XG4gIC8qKlxuICAgKiBTeW5jTWVldGluZ1N0YXRlIC0gU3luYyB0aGUgTWVldGluZyBTdGF0ZSB3aXRoIHRoZSBzZXJ2ZXIsIGluZm9ybWF0aW9uIHN1Y2ggYXMgbmV3IHJlbW90ZSBwZWVyLCBjaGFuZ2UgaW4gcHJvZHVjZXJzIGV0Yy5cbiAgICovXG4gIF9fc3luY01lZXRpbmdTdGF0ZSA9ICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbG9jYWxQcm9kdWNlcklkcyA9IHRoaXMuX19zZW5kVHJhbnNwb3J0Py5wcm9kdWNlcklkcyA/PyBbXTtcbiAgICAgIHRoaXMuc29ja2V0LnB1Ymxpc2goXCJzeW5jTWVldGluZ1N0YXRlXCIsIHtcbiAgICAgICAgbG9jYWxQcm9kdWNlcklkc1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgRXJyb3IgU3luY2luZyBNZWV0aW5nIFN0YXRlXCIsIGVycm9yKTtcbiAgICB9XG4gIH07XG59O1xudmFyIExvY2FsUGVlcl9kZWZhdWx0ID0gTG9jYWxQZWVyO1xuXG4vLyBzcmMvUmVtb3RlUGVlci50c1xudmFyIGxvZ2dlcjIgPSBtYWluTG9nZ2VyLmNyZWF0ZVN1YkxvZ2dlcihcIlJlbW90ZVBlZXJcIik7XG52YXIgUmVtb3RlUGVlciA9IGNsYXNzIGV4dGVuZHMgRW5oYW5jZWRFdmVudEVtaXR0ZXIge1xuICAvKipcbiAgICogcGVlcklkIG9mIHRoZSByZW1vdGUgcGVlciwgdGhpcyBpcyB1bmlxdWUgZm9yIGVhY2ggcGVlclxuICAgKi9cbiAgcGVlcklkO1xuICAvKipcbiAgICogU3RvcmVzIHRoZSBNZXRhZGF0YSBmb3IgdGhlIFJlbW90ZSBQZWVyLlxuICAgKi9cbiAgX19tZXRhZGF0YSA9IFwie31cIjtcbiAgLyoqXG4gICAqIFN0b3JlcyB0aGUgUm9sZSBvZiB0aGUgUmVtb3RlIFBlZXIuXG4gICAqL1xuICBfX3JvbGUgPSBudWxsO1xuICAvKipcbiAgICogTGFiZWxzIGFyZSB0aGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBtZWRpYSBzdHJlYW0gdGhhdCB0aGUgcmVtb3RlIHBlZXIgaXMgcHJvZHVjaW5nXG4gICAqL1xuICBfX2xhYmVsc1RvUHJvZHVjZXJJZCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBsaXN0IG9mIGxhYmVscyB0aGF0IHRoZSByZW1vdGUgcGVlciBpcyBwcm9kdWNpbmdcbiAgICovXG4gIGdldCBsYWJlbHMoKSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5fX2xhYmVsc1RvUHJvZHVjZXJJZC5rZXlzKCkpO1xuICB9XG4gIGdldCBwcm9kdWNlcklkcygpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLl9fbGFiZWxzVG9Qcm9kdWNlcklkLnZhbHVlcygpKS5tYXAoXG4gICAgICAobGFiZWxEYXRhKSA9PiBsYWJlbERhdGEucHJvZHVjZXJJZFxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIFJvbGUgb2YgdGhlIFBlZXIuXG4gICAqIEByZXR1cm5zIFRoZSBSb2xlIG9mIHRoZSBQZWVyIHdoaWNoIGlmIHBhc3NlZCBpbiB0aGUgb3B0aW9ucyB3aGVuIGNyZWF0aW5nIHRoZSB0b2tlblxuICAgKi9cbiAgZ2V0IHJvbGUoKSB7XG4gICAgaWYgKCF0aGlzLl9fcm9sZSkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHRoaXMuX19yb2xlO1xuICB9XG4gIHNldCByb2xlKHJvbGUpIHtcbiAgICB0aGlzLl9fcm9sZSA9IHJvbGU7XG4gICAgdGhpcy5lbWl0KFwicm9sZS11cGRhdGVkXCIsIHtcbiAgICAgIHJvbGVcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSByZW1vdGUgcGVlciBpcyBwcm9kdWNpbmcgdGhlIGxhYmVsXG4gICAqIEBwYXJhbSBsYWJlbCAtIExhYmVsIHRvIGNoZWNrIGlmIHRoZSByZW1vdGUgcGVlciBpcyBwcm9kdWNpbmdcbiAgICogQHJldHVybnMgLSBSZXR1cm5zIHRydWUgaWYgdGhlIHJlbW90ZSBwZWVyIGlzIHByb2R1Y2luZyB0aGUgbGFiZWxcbiAgICovXG4gIGhhc0xhYmVsKGxhYmVsKSB7XG4gICAgcmV0dXJuIHRoaXMuX19sYWJlbHNUb1Byb2R1Y2VySWQuaGFzKGxhYmVsKTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZGF0YSBhc3NvY2lhdGVkIHRvIHRoZSBsYWJlbCwgdGhpcyBpcyB0aGUgcHJvZHVjZXJJZFxuICAgKlxuICAgKiBAcmV0dXJuc1xuICAgKiBwcm9kdWNlcklkIC0gVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBwcm9kdWNlclxuICAgKi9cbiAgZ2V0TGFiZWxEYXRhKGxhYmVsKSB7XG4gICAgcmV0dXJuIHRoaXMuX19sYWJlbHNUb1Byb2R1Y2VySWQuZ2V0KGxhYmVsKTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBhc3NvY2lhdGVkIGNvbnN1bWVyIGZvciB0aGUgbGFiZWxcbiAgICogQHBhcmFtIGxhYmVsIC0gVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBjb25zdW1lciBlLmcuIGB2aWRlb2AgfCBgYXVkaW9gIHwgYHNjcmVlbi1zaGFyZS12aWRlb2AgfCBzdHJpbmdcbiAgICogQHJldHVybnMgQ29uc3VtZXIgfCBudWxsXG4gICAqL1xuICBnZXRDb25zdW1lcihsYWJlbCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBsb2NhbFBlZXIgPSBMb2NhbFBlZXJfZGVmYXVsdC5nZXRJbnN0YW5jZSgpO1xuICAgICAgY29uc3QgY29uc3VtZXIgPSBsb2NhbFBlZXIucmVjdlRyYW5zcG9ydC5nZXRDb25zdW1lcih7XG4gICAgICAgIGxhYmVsLFxuICAgICAgICBwZWVySWQ6IHRoaXMucGVlcklkXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBjb25zdW1lcjtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBtZXRhZGF0YSBhc3NvY2lhdGVkIHRvIHRoZSBSZW1vdGVQZWVyXG4gICAqL1xuICBnZXRNZXRhZGF0YSgpIHtcbiAgICByZXR1cm4gdGhpcy5fX21ldGFkYXRhO1xuICB9XG4gIC8qKlxuICAgKiBTZXR0ZXIgZnVuY3Rpb24gdG8gdXBkYXRlIHRoZSBSZW1vdGUgUGVlciBNZXRhZGF0YVxuICAgKlxuICAgKiBgTk9URTogVGhpcyB3aWxsIE5PVCBub3RpZnkgb3RoZXIgUmVtb3RlIFBlZXJzIG9mIHRoZSB1cGRhdGVgXG4gICAqL1xuICBzZXQgbWV0YWRhdGEoZGF0YSkge1xuICAgIHRoaXMuX19tZXRhZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5lbWl0KFwibWV0YWRhdGEtdXBkYXRlZFwiLCB7XG4gICAgICBtZXRhZGF0YTogZGF0YVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIFBlcm1pc3Npb25zIG9mIHRoZSBSZW1vdGUgUGVlciBpbiB0aGUgUm9vbS4gVGhpcyB3aWxsIGVtaXQgYW4gZXZlbnQgYHVwZGF0ZWRgIHdpdGggdGhlIHVwZGF0ZWQgcGVybWlzc2lvbnMuXG4gICAqL1xuICB1cGRhdGVQZXJtaXNzaW9ucyA9IGNoZWNrUGVybWlzc2lvbnMoe1xuICAgIGFkbWluOiB0cnVlXG4gIH0pLnZhbGlkYXRlKGFzeW5jIChkYXRhKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGxvZ2dlcjIuaW5mbyhcIlxcdXsxRjUxNH0gVXBkYXRpbmcgUGVybWlzc2lvbnNcIiwgZGF0YSk7XG4gICAgICBjb25zdCBsb2NhbFBlZXIgPSBMb2NhbFBlZXJfZGVmYXVsdC5nZXRJbnN0YW5jZSgpO1xuICAgICAgY29uc3Qgc29ja2V0ID0gbG9jYWxQZWVyLnNvY2tldDtcbiAgICAgIHNvY2tldC5wdWJsaXNoKFwidXBkYXRlUGVlclBlcm1pc3Npb25cIiwge1xuICAgICAgICBwZWVySWQ6IHRoaXMucGVlcklkLFxuICAgICAgICBwZXJtaXNzaW9uczogZGF0YVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlcjIuZXJyb3IoXCJcXHV7MUY1MTR9IEVycm9yIFVwZGF0aW5nIFBlcm1pc3Npb25zXCIpO1xuICAgICAgbG9nZ2VyMi5lcnJvcihlcnJvcik7XG4gICAgfVxuICB9KTtcbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgcm9sZSBvZiB0aGUgUmVtb3RlIFBlZXIgaW4gdGhlIFJvb20sIHRoaXMgd2lsbCBlbWl0IGFuIGV2ZW50IGB1cGRhdGVkYCB3aXRoIHRoZSB1cGRhdGVkIHJvbGUuXG4gICAqIEB0aHJvd3MgeyBFcnJvciB9IElmIHRoZSBQZWVyIENhbGxpbmcgdGhpcyBmdW5jdGlvbiBpcyBub3QgYW4gYGFkbWluYCB0aGVuIGl0IHdpbGwgdGhyb3cgYW4gZXJyb3IuXG4gICAqL1xuICB1cGRhdGVSb2xlID0gY2hlY2tQZXJtaXNzaW9ucyh7XG4gICAgYWRtaW46IHRydWVcbiAgfSkudmFsaWRhdGUoXG4gICAgYXN5bmMgKGRhdGEpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGxvZ2dlcjIuaW5mbyhcIlxcdXsxRjUxNH0gVXBkYXRpbmcgUGVlciBSb2xlXCIsIGRhdGEpO1xuICAgICAgICBpZiAoZGF0YS5yb2xlID09PSB0aGlzLl9fcm9sZSkge1xuICAgICAgICAgIGxvZ2dlcjIud2FybihcIlxcdXsxRjUxNH0gUm9sZSBpcyBhbHJlYWR5IHNldCB0b1wiLCBkYXRhLnJvbGUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsb2NhbFBlZXIgPSBMb2NhbFBlZXJfZGVmYXVsdC5nZXRJbnN0YW5jZSgpO1xuICAgICAgICBjb25zdCBzb2NrZXQgPSBsb2NhbFBlZXIuc29ja2V0O1xuICAgICAgICBzb2NrZXQucHVibGlzaChcInVwZGF0ZVBlZXJSb2xlXCIsIHtcbiAgICAgICAgICBwZWVySWQ6IHRoaXMucGVlcklkLFxuICAgICAgICAgIHJvbGU6IGRhdGEucm9sZSxcbiAgICAgICAgICBvcHRpb25zOiBkYXRhLm9wdGlvbnNcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIyLmVycm9yKFwiXFx1ezFGNTE0fSBFcnJvciBVcGRhdGluZyBSb2xlXCIsIGRhdGEpO1xuICAgICAgICBsb2dnZXIyLmVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG4gIC8qKlxuICAgKiBSZW1vdmVzIGFsbCB0aGUgc3RhdGVzIG9mIHRoZSByZW1vdGUgcGVlciBhbmQgY2xlYXJzIG1lbW9yeTtcbiAgICpcbiAgICogYE5PVEVgOiBZb3UgbmVlZCB0byBjbG9zZSBjb25zdW1lcnMgdXNpbmcgdGhlIGByZWN2VHJhbnNwb3J0LmNsb3NlQ29uc3VtZXJgIG9mIHRoZSBsb2NhbCBwZWVyXG4gICAqL1xuICBjbG9zZSA9ICgpID0+IHtcbiAgICBsb2dnZXIyLmluZm8oXCJDbG9zaW5nIFJlbW90ZSBQZWVyXCIpO1xuICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gIH07XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMucGVlcklkID0gZGF0YS5wZWVySWQ7XG4gICAgaWYgKGRhdGEubWV0YWRhdGEpIHtcbiAgICAgIHRoaXMubWV0YWRhdGEgPSBKU09OLnBhcnNlKGRhdGEubWV0YWRhdGEpO1xuICAgIH1cbiAgICBpZiAoZGF0YS5yb2xlKSB7XG4gICAgICB0aGlzLl9fcm9sZSA9IGRhdGEucm9sZTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQWRkIGEgTmV3IExhYmVsIHRvIHRoZSBSZW1vdGUgUGVlciBhbmQgYXNzb2NpYXRlIGl0IHdpdGggdGhlIFByb2R1Y2VySWRcbiAgICpcbiAgICogYE5PVEU6IFRoaXMgaXMgdXNlZCBpbnRlcm5hbGx5IGJ5IHRoZSBQZWVyYFxuICAgKlxuICAgKiBAcGFyYW0gZGF0YSAtIERhdGEgdG8gYWRkIHRoZSBuZXcgbGFiZWwgYGxhYmVsYCBhbmQgdGhlIGBwcm9kdWNlcklkYCB0byBhc3NvY2lhdGUgaXQgd2l0aFxuICAgKi9cbiAgX2FkZExhYmVsRGF0YSA9IGFzeW5jIChkYXRhKSA9PiB7XG4gICAgY29uc3QgeyBsYWJlbCwgcHJvZHVjZXJJZCB9ID0gZGF0YTtcbiAgICB0aGlzLl9fbGFiZWxzVG9Qcm9kdWNlcklkLnNldChsYWJlbCwgeyBwcm9kdWNlcklkIH0pO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhdXRvQ29uc3VtZSA9IFJvb21fZGVmYXVsdC5nZXRJbnN0YW5jZSgpLmF1dG9Db25zdW1lO1xuICAgICAgY29uc3QgbG9jYWxQZWVyID0gTG9jYWxQZWVyX2RlZmF1bHQuZ2V0SW5zdGFuY2UoKTtcbiAgICAgIGlmIChhdXRvQ29uc3VtZSkge1xuICAgICAgICBhd2FpdCBsb2NhbFBlZXIuY29uc3VtZSh7XG4gICAgICAgICAgYXBwRGF0YToge30sXG4gICAgICAgICAgbGFiZWwsXG4gICAgICAgICAgcGVlcklkOiB0aGlzLnBlZXJJZFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZW1pdChcInN0cmVhbS1hdmFpbGFibGVcIiwge1xuICAgICAgICAgIGxhYmVsLFxuICAgICAgICAgIGxhYmVsRGF0YToge1xuICAgICAgICAgICAgcHJvZHVjZXJJZFxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlcjIuZXJyb3IoXCJcXHUyNzRDIEVycm9yIFdoaWxlIENvbnN1bWluZ1wiLCB7XG4gICAgICAgIGxhYmVsLFxuICAgICAgICBwZWVySWQ6IHRoaXMucGVlcklkXG4gICAgICB9KTtcbiAgICAgIGxvZ2dlcjIuZXJyb3IoZXJyb3IpO1xuICAgICAgdGhpcy5lbWl0KFwic3RyZWFtLWF2YWlsYWJsZVwiLCB7XG4gICAgICAgIGxhYmVsLFxuICAgICAgICBsYWJlbERhdGE6IHtcbiAgICAgICAgICBwcm9kdWNlcklkXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogUmVtb3ZlIGEgTGFiZWwgZnJvbSB0aGUgUmVtb3RlIFBlZXIgYW5kIGVtaXQgYSBgc3RyZWFtLWNsb3NlZGAgZXZlbnRcbiAgICpcbiAgICogYE5PVEU6IFRoaXMgaXMgdXNlZCBpbnRlcm5hbGx5IGJ5IHRoZSBQZWVyYFxuICAgKlxuICAgKiBAcGFyYW0gZGF0YSAtIERhdGEgdG8gcmVtb3ZlIHRoZSBsYWJlbCBmcm9tIHRoZSBSZW1vdGUgUGVlclxuICAgKi9cbiAgX3JlbW92ZUxhYmVsRGF0YSA9IChsYWJlbCwgcmVhc29uKSA9PiB7XG4gICAgdGhpcy5fX2xhYmVsc1RvUHJvZHVjZXJJZC5kZWxldGUobGFiZWwpO1xuICAgIHRoaXMuZW1pdChcInN0cmVhbS1jbG9zZWRcIiwge1xuICAgICAgbGFiZWwsXG4gICAgICByZWFzb25cbiAgICB9KTtcbiAgfTtcbn07XG52YXIgUmVtb3RlUGVlcl9kZWZhdWx0ID0gUmVtb3RlUGVlcjtcblxuZXhwb3J0IHsgTG9jYWxQZWVyX2RlZmF1bHQsIFJlbW90ZVBlZXJfZGVmYXVsdCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-QACHVS7A.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-SJ5FMYZU.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-SJ5FMYZU.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppData: () => (/* binding */ AppData),\n/* harmony export */   Permissions: () => (/* binding */ Permissions),\n/* harmony export */   ProtoIceParameters: () => (/* binding */ ProtoIceParameters),\n/* harmony export */   ProtoRequestEvent: () => (/* binding */ ProtoRequestEvent),\n/* harmony export */   ProtoSctpStreamParameters: () => (/* binding */ ProtoSctpStreamParameters),\n/* harmony export */   ProtoTransportSDPInfo: () => (/* binding */ ProtoTransportSDPInfo),\n/* harmony export */   Request: () => (/* binding */ Request)\n/* harmony export */ });\n/* harmony import */ var _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-DFNYORIF.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-DFNYORIF.js\");\n\n\n// ../protoc/dist/rtc/sctp_capabilities_pb.js\nvar ProtoNumSctpStreams = class _ProtoNumSctpStreams extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * Initially requested number of outgoing SCTP streams\n   *\n   * @generated from field: int32 OS = 1;\n   */\n  OS = 0;\n  /**\n   * Maximum number of incoming SCTP streams\n   *\n   * @generated from field: int32 MIS = 2;\n   */\n  MIS = 0;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3;\n  static typeName = \"ProtoNumSctpStreams\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.newFieldList(() => [\n    {\n      no: 1,\n      name: \"OS\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    },\n    {\n      no: 2,\n      name: \"MIS\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProtoNumSctpStreams().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProtoNumSctpStreams().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProtoNumSctpStreams().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.equals(_ProtoNumSctpStreams, a, b);\n  }\n};\nvar ProtoSctpCapabilities = class _ProtoSctpCapabilities extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: ProtoNumSctpStreams numStreams = 1;\n   */\n  numStreams;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3;\n  static typeName = \"ProtoSctpCapabilities\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.newFieldList(() => [\n    { no: 1, name: \"numStreams\", kind: \"message\", T: ProtoNumSctpStreams }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProtoSctpCapabilities().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProtoSctpCapabilities().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProtoSctpCapabilities().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.equals(_ProtoSctpCapabilities, a, b);\n  }\n};\n\n// ../protoc/dist/rtc/sdp_info_pb.js\nvar ProtoDtlsFingerPrints = class _ProtoDtlsFingerPrints extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: string algorithm = 1;\n   */\n  algorithm = \"\";\n  /**\n   * @generated from field: string value = 2;\n   */\n  value = \"\";\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3;\n  static typeName = \"ProtoDtlsFingerPrints\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.newFieldList(() => [\n    {\n      no: 1,\n      name: \"algorithm\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 2,\n      name: \"value\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProtoDtlsFingerPrints().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProtoDtlsFingerPrints().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProtoDtlsFingerPrints().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.equals(_ProtoDtlsFingerPrints, a, b);\n  }\n};\nvar ProtoIceParameters = class _ProtoIceParameters extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: string usernameFragment = 1;\n   */\n  usernameFragment = \"\";\n  /**\n   * @generated from field: string password = 2;\n   */\n  password = \"\";\n  /**\n   * @generated from field: bool iceLite = 3;\n   */\n  iceLite = false;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3;\n  static typeName = \"ProtoIceParameters\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.newFieldList(() => [\n    {\n      no: 1,\n      name: \"usernameFragment\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 2,\n      name: \"password\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 3,\n      name: \"iceLite\",\n      kind: \"scalar\",\n      T: 8\n      /* ScalarType.BOOL */\n    }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProtoIceParameters().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProtoIceParameters().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProtoIceParameters().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.equals(_ProtoIceParameters, a, b);\n  }\n};\nvar ProtoIceCandidates = class _ProtoIceCandidates extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: string foundation = 1;\n   */\n  foundation = \"\";\n  /**\n   * @generated from field: int32 priority = 2;\n   */\n  priority = 0;\n  /**\n   * @generated from field: string ip = 3;\n   */\n  ip = \"\";\n  /**\n   * @generated from field: int32 port = 4;\n   */\n  port = 0;\n  /**\n   * @generated from field: string type = 5;\n   */\n  type = \"\";\n  /**\n   * @generated from field: string protocol = 6;\n   */\n  protocol = \"\";\n  /**\n   * @generated from field: string tcpType = 7;\n   */\n  tcpType = \"\";\n  /**\n   * @generated from field: string address = 8;\n   */\n  address = \"\";\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3;\n  static typeName = \"ProtoIceCandidates\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.newFieldList(() => [\n    {\n      no: 1,\n      name: \"foundation\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 2,\n      name: \"priority\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    },\n    {\n      no: 3,\n      name: \"ip\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 4,\n      name: \"port\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    },\n    {\n      no: 5,\n      name: \"type\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 6,\n      name: \"protocol\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 7,\n      name: \"tcpType\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    {\n      no: 8,\n      name: \"address\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProtoIceCandidates().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProtoIceCandidates().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProtoIceCandidates().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.equals(_ProtoIceCandidates, a, b);\n  }\n};\nvar ProtoDtlsParameters = class _ProtoDtlsParameters extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: string role = 1;\n   */\n  role = \"\";\n  /**\n   * @generated from field: repeated ProtoDtlsFingerPrints fingerprints = 2;\n   */\n  fingerprints = [];\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3;\n  static typeName = \"ProtoDtlsParameters\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.newFieldList(() => [\n    {\n      no: 1,\n      name: \"role\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    { no: 2, name: \"fingerprints\", kind: \"message\", T: ProtoDtlsFingerPrints, repeated: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProtoDtlsParameters().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProtoDtlsParameters().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProtoDtlsParameters().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.equals(_ProtoDtlsParameters, a, b);\n  }\n};\nvar ProtoSctpParameters = class _ProtoSctpParameters extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: int32 port = 1;\n   */\n  port = 0;\n  /**\n   * @generated from field: int32 OS = 2;\n   */\n  OS = 0;\n  /**\n   * @generated from field: int32 MIS = 3;\n   */\n  MIS = 0;\n  /**\n   * @generated from field: int32 maxMessageSize = 4;\n   */\n  maxMessageSize = 0;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3;\n  static typeName = \"ProtoSctpParameters\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.newFieldList(() => [\n    {\n      no: 1,\n      name: \"port\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    },\n    {\n      no: 2,\n      name: \"OS\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    },\n    {\n      no: 3,\n      name: \"MIS\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    },\n    {\n      no: 4,\n      name: \"maxMessageSize\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProtoSctpParameters().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProtoSctpParameters().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProtoSctpParameters().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.equals(_ProtoSctpParameters, a, b);\n  }\n};\nvar ProtoTransportSDPInfo = class _ProtoTransportSDPInfo extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: string id = 1;\n   */\n  id = \"\";\n  /**\n   * @generated from field: repeated ProtoIceCandidates iceCandidates = 2;\n   */\n  iceCandidates = [];\n  /**\n   * @generated from field: ProtoIceParameters iceParameters = 3;\n   */\n  iceParameters;\n  /**\n   * @generated from field: ProtoDtlsParameters dtlsParameters = 4;\n   */\n  dtlsParameters;\n  /**\n   * @generated from field: ProtoSctpParameters sctpParameters = 5;\n   */\n  sctpParameters;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3;\n  static typeName = \"ProtoTransportSDPInfo\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.newFieldList(() => [\n    {\n      no: 1,\n      name: \"id\",\n      kind: \"scalar\",\n      T: 9\n      /* ScalarType.STRING */\n    },\n    { no: 2, name: \"iceCandidates\", kind: \"message\", T: ProtoIceCandidates, repeated: true },\n    { no: 3, name: \"iceParameters\", kind: \"message\", T: ProtoIceParameters },\n    { no: 4, name: \"dtlsParameters\", kind: \"message\", T: ProtoDtlsParameters },\n    { no: 5, name: \"sctpParameters\", kind: \"message\", T: ProtoSctpParameters }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProtoTransportSDPInfo().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProtoTransportSDPInfo().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProtoTransportSDPInfo().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.equals(_ProtoTransportSDPInfo, a, b);\n  }\n};\n\n// ../protoc/dist/client/app_data_pb.js\nvar Value = class _Value extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from oneof Value.value_type\n   */\n  valueType = { case: void 0 };\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"Value\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"string_value\", kind: \"scalar\", T: 9, oneof: \"value_type\" },\n    { no: 2, name: \"int_value\", kind: \"scalar\", T: 5, oneof: \"value_type\" },\n    { no: 3, name: \"float_value\", kind: \"scalar\", T: 2, oneof: \"value_type\" }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _Value().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _Value().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _Value().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_Value, a, b);\n  }\n};\nvar AppData = class _AppData extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: map<string, Value> appData = 1;\n   */\n  appData = {};\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"AppData\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"appData\", kind: \"map\", K: 9, V: { kind: \"message\", T: Value } }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _AppData().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _AppData().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _AppData().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_AppData, a, b);\n  }\n};\n\n// ../protoc/dist/rtc/sctp_stream_parameters_pb.js\nvar ProtoSctpStreamParameters = class _ProtoSctpStreamParameters extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: int32 streamId = 1;\n   */\n  streamId = 0;\n  /**\n   * @generated from field: bool ordered = 2;\n   */\n  ordered = false;\n  /**\n   * @generated from field: int32 maxPacketLifeTime = 3;\n   */\n  maxPacketLifeTime = 0;\n  /**\n   * @generated from field: int32 maxRetransmits = 4;\n   */\n  maxRetransmits = 0;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3;\n  static typeName = \"ProtoSctpStreamParameters\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.newFieldList(() => [\n    {\n      no: 1,\n      name: \"streamId\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    },\n    {\n      no: 2,\n      name: \"ordered\",\n      kind: \"scalar\",\n      T: 8\n      /* ScalarType.BOOL */\n    },\n    {\n      no: 3,\n      name: \"maxPacketLifeTime\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    },\n    {\n      no: 4,\n      name: \"maxRetransmits\",\n      kind: \"scalar\",\n      T: 5\n      /* ScalarType.INT32 */\n    }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProtoSctpStreamParameters().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProtoSctpStreamParameters().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProtoSctpStreamParameters().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto3.util.equals(_ProtoSctpStreamParameters, a, b);\n  }\n};\n\n// ../protoc/dist/client/room_control_pb.js\nvar ProduceSources = class _ProduceSources extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required bool mic = 1;\n   */\n  mic;\n  /**\n   * @generated from field: required bool cam = 2;\n   */\n  cam;\n  /**\n   * @generated from field: required bool screen = 3;\n   */\n  screen;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"ProduceSources\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"mic\", kind: \"scalar\", T: 8, req: true },\n    { no: 2, name: \"cam\", kind: \"scalar\", T: 8, req: true },\n    { no: 3, name: \"screen\", kind: \"scalar\", T: 8, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProduceSources().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProduceSources().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProduceSources().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_ProduceSources, a, b);\n  }\n};\nvar RoomControlType = class _RoomControlType extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string type = 1;\n   */\n  type;\n  /**\n   * @generated from field: required bool value = 5;\n   */\n  value;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"RoomControlType\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"type\", kind: \"scalar\", T: 9, req: true },\n    { no: 5, name: \"value\", kind: \"scalar\", T: 8, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _RoomControlType().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _RoomControlType().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _RoomControlType().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_RoomControlType, a, b);\n  }\n};\nvar ProduceSourcesControl = class _ProduceSourcesControl extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string type = 1;\n   */\n  type;\n  /**\n   * @generated from field: required ProduceSources value = 2;\n   */\n  value;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"ProduceSourcesControl\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"type\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"value\", kind: \"message\", T: ProduceSources, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProduceSourcesControl().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProduceSourcesControl().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProduceSourcesControl().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_ProduceSourcesControl, a, b);\n  }\n};\n\n// ../protoc/dist/client/permissions_pb.js\nvar Permissions = class _Permissions extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required bool admin = 1;\n   */\n  admin;\n  /**\n   * @generated from field: required bool canConsume = 2;\n   */\n  canConsume;\n  /**\n   * @generated from field: required bool canProduce = 3;\n   */\n  canProduce;\n  /**\n   * @generated from field: required Permissions.ProduceSources canProduceSources = 4;\n   */\n  canProduceSources;\n  /**\n   * @generated from field: required bool canSendData = 5;\n   */\n  canSendData;\n  /**\n   * @generated from field: required bool canRecvData = 6;\n   */\n  canRecvData;\n  /**\n   * @generated from field: required bool canUpdateMetadata = 7;\n   */\n  canUpdateMetadata;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"Permissions\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"admin\", kind: \"scalar\", T: 8, req: true },\n    { no: 2, name: \"canConsume\", kind: \"scalar\", T: 8, req: true },\n    { no: 3, name: \"canProduce\", kind: \"scalar\", T: 8, req: true },\n    { no: 4, name: \"canProduceSources\", kind: \"message\", T: Permissions_ProduceSources, req: true },\n    { no: 5, name: \"canSendData\", kind: \"scalar\", T: 8, req: true },\n    { no: 6, name: \"canRecvData\", kind: \"scalar\", T: 8, req: true },\n    { no: 7, name: \"canUpdateMetadata\", kind: \"scalar\", T: 8, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _Permissions().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _Permissions().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _Permissions().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_Permissions, a, b);\n  }\n};\nvar Permissions_ProduceSources = class _Permissions_ProduceSources extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required bool cam = 1;\n   */\n  cam;\n  /**\n   * @generated from field: required bool mic = 2;\n   */\n  mic;\n  /**\n   * @generated from field: required bool screen = 3;\n   */\n  screen;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"Permissions.ProduceSources\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"cam\", kind: \"scalar\", T: 8, req: true },\n    { no: 2, name: \"mic\", kind: \"scalar\", T: 8, req: true },\n    { no: 3, name: \"screen\", kind: \"scalar\", T: 8, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _Permissions_ProduceSources().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _Permissions_ProduceSources().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _Permissions_ProduceSources().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_Permissions_ProduceSources, a, b);\n  }\n};\n\n// ../protoc/dist/client/request_pb.js\n(class _TestEvent extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string name = 1;\n   */\n  name;\n  /**\n   * @generated from field: required string payload = 2;\n   */\n  payload;\n  /**\n   * @generated from field: optional string from = 3;\n   */\n  from;\n  /**\n   * @generated from field: optional string to = 4;\n   */\n  to;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"TestEvent\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"name\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"payload\", kind: \"scalar\", T: 9, req: true },\n    { no: 3, name: \"from\", kind: \"scalar\", T: 9, opt: true },\n    { no: 4, name: \"to\", kind: \"scalar\", T: 9, opt: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _TestEvent().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _TestEvent().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _TestEvent().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_TestEvent, a, b);\n  }\n});\nvar ConnectRoom = class _ConnectRoom extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string roomId = 1;\n   */\n  roomId;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"ConnectRoom\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"roomId\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ConnectRoom().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ConnectRoom().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ConnectRoom().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_ConnectRoom, a, b);\n  }\n};\nvar CreateTransport = class _CreateTransport extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required ProtoSctpCapabilities sctpCapabilities = 1;\n   */\n  sctpCapabilities;\n  /**\n   * @generated from field: required string transportType = 2;\n   */\n  transportType;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"CreateTransport\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"sctpCapabilities\", kind: \"message\", T: ProtoSctpCapabilities, req: true },\n    { no: 2, name: \"transportType\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _CreateTransport().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _CreateTransport().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _CreateTransport().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_CreateTransport, a, b);\n  }\n};\nvar ConnectTransport = class _ConnectTransport extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string transportType = 1;\n   */\n  transportType;\n  /**\n   * @generated from field: required ProtoDtlsParameters dtlsParameters = 2;\n   */\n  dtlsParameters;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"ConnectTransport\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"transportType\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"dtlsParameters\", kind: \"message\", T: ProtoDtlsParameters, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ConnectTransport().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ConnectTransport().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ConnectTransport().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_ConnectTransport, a, b);\n  }\n};\nvar CreateDataConsumer = class _CreateDataConsumer extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string label = 1;\n   */\n  label;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"CreateDataConsumer\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"label\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _CreateDataConsumer().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _CreateDataConsumer().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _CreateDataConsumer().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_CreateDataConsumer, a, b);\n  }\n};\nvar Produce = class _Produce extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string label = 1;\n   */\n  label;\n  /**\n   * @generated from field: required string kind = 2;\n   */\n  kind;\n  /**\n   * @generated from field: required ProtoRtpParameters rtpParameters = 3;\n   */\n  rtpParameters;\n  /**\n   * @generated from field: required bool paused = 4;\n   */\n  paused;\n  /**\n   * @generated from field: optional AppData appData = 5;\n   */\n  appData;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"Produce\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"label\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"kind\", kind: \"scalar\", T: 9, req: true },\n    { no: 3, name: \"rtpParameters\", kind: \"message\", T: _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.ProtoRtpParameters, req: true },\n    { no: 4, name: \"paused\", kind: \"scalar\", T: 8, req: true },\n    { no: 5, name: \"appData\", kind: \"message\", T: AppData, opt: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _Produce().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _Produce().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _Produce().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_Produce, a, b);\n  }\n};\nvar ProduceData = class _ProduceData extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string transportId = 1;\n   */\n  transportId;\n  /**\n   * @generated from field: required ProtoSctpStreamParameters sctpStreamParameters = 2;\n   */\n  sctpStreamParameters;\n  /**\n   * @generated from field: required string label = 3;\n   */\n  label;\n  /**\n   * @generated from field: optional string protocol = 4;\n   */\n  protocol;\n  /**\n   * @generated from field: optional AppData appData = 5;\n   */\n  appData;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"ProduceData\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"transportId\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"sctpStreamParameters\", kind: \"message\", T: ProtoSctpStreamParameters, req: true },\n    { no: 3, name: \"label\", kind: \"scalar\", T: 9, req: true },\n    { no: 4, name: \"protocol\", kind: \"scalar\", T: 9, opt: true },\n    { no: 5, name: \"appData\", kind: \"message\", T: AppData, opt: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ProduceData().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ProduceData().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ProduceData().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_ProduceData, a, b);\n  }\n};\nvar Consume = class _Consume extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string producerPeerId = 1;\n   */\n  producerPeerId;\n  /**\n   * @generated from field: required string producerId = 2;\n   */\n  producerId;\n  /**\n   * @generated from field: optional AppData appData = 3;\n   */\n  appData;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"Consume\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"producerPeerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"producerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 3, name: \"appData\", kind: \"message\", T: AppData, opt: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _Consume().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _Consume().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _Consume().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_Consume, a, b);\n  }\n};\nvar CloseProducer = class _CloseProducer extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string producerId = 1;\n   */\n  producerId;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"CloseProducer\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"producerId\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _CloseProducer().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _CloseProducer().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _CloseProducer().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_CloseProducer, a, b);\n  }\n};\nvar PauseProducer = class _PauseProducer extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string producerId = 1;\n   */\n  producerId;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"PauseProducer\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"producerId\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _PauseProducer().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _PauseProducer().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _PauseProducer().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_PauseProducer, a, b);\n  }\n};\nvar ResumeProducer = class _ResumeProducer extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string producerId = 1;\n   */\n  producerId;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"ResumeProducer\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"producerId\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ResumeProducer().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ResumeProducer().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ResumeProducer().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_ResumeProducer, a, b);\n  }\n};\nvar CloseConsumer = class _CloseConsumer extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string consumerId = 1;\n   */\n  consumerId;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"CloseConsumer\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"consumerId\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _CloseConsumer().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _CloseConsumer().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _CloseConsumer().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_CloseConsumer, a, b);\n  }\n};\nvar ResumeConsumer = class _ResumeConsumer extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string consumerId = 1;\n   */\n  consumerId;\n  /**\n   * @generated from field: required string producerPeerId = 2;\n   */\n  producerPeerId;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"ResumeConsumer\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"consumerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"producerPeerId\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ResumeConsumer().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ResumeConsumer().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ResumeConsumer().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_ResumeConsumer, a, b);\n  }\n};\nvar SyncMeetingState = class _SyncMeetingState extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: repeated string localProducerIds = 1;\n   */\n  localProducerIds = [];\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"SyncMeetingState\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"localProducerIds\", kind: \"scalar\", T: 9, repeated: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _SyncMeetingState().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _SyncMeetingState().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _SyncMeetingState().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_SyncMeetingState, a, b);\n  }\n};\nvar RestartTransportIce = class _RestartTransportIce extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string transportType = 1;\n   */\n  transportType;\n  /**\n   * @generated from field: required string transportId = 2;\n   */\n  transportId;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"RestartTransportIce\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"transportType\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"transportId\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _RestartTransportIce().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _RestartTransportIce().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _RestartTransportIce().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_RestartTransportIce, a, b);\n  }\n};\nvar SendData = class _SendData extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: repeated string to = 1;\n   */\n  to = [];\n  /**\n   * @generated from field: optional string label = 2;\n   */\n  label;\n  /**\n   * @generated from field: required string payload = 3;\n   */\n  payload;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"SendData\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"to\", kind: \"scalar\", T: 9, repeated: true },\n    { no: 2, name: \"label\", kind: \"scalar\", T: 9, opt: true },\n    { no: 3, name: \"payload\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _SendData().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _SendData().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _SendData().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_SendData, a, b);\n  }\n};\nvar UpdateRoomControls = class _UpdateRoomControls extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from oneof UpdateRoomControls.control\n   */\n  control = { case: void 0 };\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"UpdateRoomControls\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"room_control\", kind: \"message\", T: RoomControlType, oneof: \"control\" },\n    { no: 2, name: \"produce_sources_control\", kind: \"message\", T: ProduceSourcesControl, oneof: \"control\" }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _UpdateRoomControls().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _UpdateRoomControls().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _UpdateRoomControls().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_UpdateRoomControls, a, b);\n  }\n};\nvar UpdatePeerPermission = class _UpdatePeerPermission extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string peerId = 1;\n   */\n  peerId;\n  /**\n   * @generated from field: optional Permissions permissions = 2;\n   */\n  permissions;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"UpdatePeerPermission\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"peerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"permissions\", kind: \"message\", T: Permissions, opt: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _UpdatePeerPermission().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _UpdatePeerPermission().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _UpdatePeerPermission().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_UpdatePeerPermission, a, b);\n  }\n};\nvar ActivateSpeakerNotification = class _ActivateSpeakerNotification extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: optional int32 size = 1;\n   */\n  size;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"ActivateSpeakerNotification\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"size\", kind: \"scalar\", T: 5, opt: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _ActivateSpeakerNotification().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _ActivateSpeakerNotification().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _ActivateSpeakerNotification().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_ActivateSpeakerNotification, a, b);\n  }\n};\nvar UpdatePeerRole = class _UpdatePeerRole extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string peerId = 1;\n   */\n  peerId;\n  /**\n   * @generated from field: required string role = 2;\n   */\n  role;\n  /**\n   * @generated from field: optional UpdatePeerRole.Options options = 3;\n   */\n  options;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"UpdatePeerRole\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"peerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"role\", kind: \"scalar\", T: 9, req: true },\n    { no: 3, name: \"options\", kind: \"message\", T: UpdatePeerRole_Options, opt: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _UpdatePeerRole().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _UpdatePeerRole().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _UpdatePeerRole().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_UpdatePeerRole, a, b);\n  }\n};\nvar UpdatePeerRole_Options = class _UpdatePeerRole_Options extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: optional Permissions custom = 1;\n   */\n  custom;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"UpdatePeerRole.Options\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"custom\", kind: \"message\", T: Permissions, opt: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _UpdatePeerRole_Options().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _UpdatePeerRole_Options().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _UpdatePeerRole_Options().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_UpdatePeerRole_Options, a, b);\n  }\n};\nvar UpdatePeerMetadata = class _UpdatePeerMetadata extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string peerId = 1;\n   */\n  peerId;\n  /**\n   * @generated from field: required string metadata = 2;\n   */\n  metadata;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"UpdatePeerMetadata\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"peerId\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"metadata\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _UpdatePeerMetadata().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _UpdatePeerMetadata().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _UpdatePeerMetadata().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_UpdatePeerMetadata, a, b);\n  }\n};\nvar UpdateRoomMetadata = class _UpdateRoomMetadata extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string metadata = 1;\n   */\n  metadata;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"UpdateRoomMetadata\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"metadata\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _UpdateRoomMetadata().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _UpdateRoomMetadata().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _UpdateRoomMetadata().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_UpdateRoomMetadata, a, b);\n  }\n};\nvar CloseStreamOfLabel = class _CloseStreamOfLabel extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string label = 1;\n   */\n  label;\n  /**\n   * @generated from field: repeated string peerIds = 2;\n   */\n  peerIds = [];\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"CloseStreamOfLabel\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"label\", kind: \"scalar\", T: 9, req: true },\n    { no: 2, name: \"peerIds\", kind: \"scalar\", T: 9, repeated: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _CloseStreamOfLabel().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _CloseStreamOfLabel().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _CloseStreamOfLabel().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_CloseStreamOfLabel, a, b);\n  }\n};\nvar AcceptLobbyPeer = class _AcceptLobbyPeer extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string peerId = 1;\n   */\n  peerId;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"AcceptLobbyPeer\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"peerId\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _AcceptLobbyPeer().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _AcceptLobbyPeer().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _AcceptLobbyPeer().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_AcceptLobbyPeer, a, b);\n  }\n};\nvar DenyLobbyPeer = class _DenyLobbyPeer extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string peerId = 1;\n   */\n  peerId;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"DenyLobbyPeer\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"peerId\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _DenyLobbyPeer().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _DenyLobbyPeer().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _DenyLobbyPeer().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_DenyLobbyPeer, a, b);\n  }\n};\nvar KickPeer = class _KickPeer extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from field: required string peerId = 1;\n   */\n  peerId;\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"KickPeer\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 1, name: \"peerId\", kind: \"scalar\", T: 9, req: true }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _KickPeer().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _KickPeer().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _KickPeer().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_KickPeer, a, b);\n  }\n};\nvar CloseRoom = class _CloseRoom extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"CloseRoom\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => []);\n  static fromBinary(bytes, options) {\n    return new _CloseRoom().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _CloseRoom().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _CloseRoom().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_CloseRoom, a, b);\n  }\n};\nvar Request = class _Request extends _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.Message {\n  /**\n   * @generated from oneof Request.request\n   */\n  request = { case: void 0 };\n  constructor(data) {\n    super();\n    _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.initPartial(data, this);\n  }\n  static runtime = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2;\n  static typeName = \"Request\";\n  static fields = _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.newFieldList(() => [\n    { no: 2, name: \"connect_room\", kind: \"message\", T: ConnectRoom, oneof: \"request\" },\n    { no: 3, name: \"create_transport\", kind: \"message\", T: CreateTransport, oneof: \"request\" },\n    { no: 4, name: \"connect_transport\", kind: \"message\", T: ConnectTransport, oneof: \"request\" },\n    { no: 25, name: \"create_data_consumer\", kind: \"message\", T: CreateDataConsumer, oneof: \"request\" },\n    { no: 5, name: \"produce\", kind: \"message\", T: Produce, oneof: \"request\" },\n    { no: 6, name: \"produce_data\", kind: \"message\", T: ProduceData, oneof: \"request\" },\n    { no: 7, name: \"consume\", kind: \"message\", T: Consume, oneof: \"request\" },\n    { no: 8, name: \"close_producer\", kind: \"message\", T: CloseProducer, oneof: \"request\" },\n    { no: 26, name: \"pause_producer\", kind: \"message\", T: PauseProducer, oneof: \"request\" },\n    { no: 27, name: \"resume_producer\", kind: \"message\", T: ResumeProducer, oneof: \"request\" },\n    { no: 9, name: \"close_consumer\", kind: \"message\", T: CloseConsumer, oneof: \"request\" },\n    { no: 10, name: \"resume_consumer\", kind: \"message\", T: ResumeConsumer, oneof: \"request\" },\n    { no: 11, name: \"sync_meeting_state\", kind: \"message\", T: SyncMeetingState, oneof: \"request\" },\n    { no: 12, name: \"restart_transport_ice\", kind: \"message\", T: RestartTransportIce, oneof: \"request\" },\n    { no: 13, name: \"send_data\", kind: \"message\", T: SendData, oneof: \"request\" },\n    { no: 14, name: \"update_room_controls\", kind: \"message\", T: UpdateRoomControls, oneof: \"request\" },\n    { no: 15, name: \"update_peer_permission\", kind: \"message\", T: UpdatePeerPermission, oneof: \"request\" },\n    { no: 16, name: \"activate_speaker_notification\", kind: \"message\", T: ActivateSpeakerNotification, oneof: \"request\" },\n    { no: 17, name: \"update_peer_role\", kind: \"message\", T: UpdatePeerRole, oneof: \"request\" },\n    { no: 18, name: \"update_peer_metadata\", kind: \"message\", T: UpdatePeerMetadata, oneof: \"request\" },\n    { no: 19, name: \"update_room_metadata\", kind: \"message\", T: UpdateRoomMetadata, oneof: \"request\" },\n    { no: 20, name: \"close_stream_of_label\", kind: \"message\", T: CloseStreamOfLabel, oneof: \"request\" },\n    { no: 21, name: \"accept_lobby_peer\", kind: \"message\", T: AcceptLobbyPeer, oneof: \"request\" },\n    { no: 22, name: \"deny_lobby_peer\", kind: \"message\", T: DenyLobbyPeer, oneof: \"request\" },\n    { no: 23, name: \"kick_peer\", kind: \"message\", T: KickPeer, oneof: \"request\" },\n    { no: 24, name: \"close_room\", kind: \"message\", T: CloseRoom, oneof: \"request\" }\n  ]);\n  static fromBinary(bytes, options) {\n    return new _Request().fromBinary(bytes, options);\n  }\n  static fromJson(jsonValue, options) {\n    return new _Request().fromJson(jsonValue, options);\n  }\n  static fromJsonString(jsonString, options) {\n    return new _Request().fromJsonString(jsonString, options);\n  }\n  static equals(a, b) {\n    return _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_0__.proto2.util.equals(_Request, a, b);\n  }\n};\n\n// src/request.events.ts\nvar ProtoRequestEvent = {\n  acceptLobbyPeer: AcceptLobbyPeer,\n  activateSpeakerNotification: ActivateSpeakerNotification,\n  createDataConsumer: CreateDataConsumer,\n  closeConsumer: CloseConsumer,\n  pauseProducer: PauseProducer,\n  resumeProducer: ResumeProducer,\n  closeProducer: CloseProducer,\n  closeRoom: CloseRoom,\n  connectRoom: ConnectRoom,\n  closeStreamOfLabel: CloseStreamOfLabel,\n  connectTransport: ConnectTransport,\n  consume: Consume,\n  createTransport: CreateTransport,\n  denyLobbyPeer: DenyLobbyPeer,\n  kickPeer: KickPeer,\n  produce: Produce,\n  produceData: ProduceData,\n  restartTransportIce: RestartTransportIce,\n  resumeConsumer: ResumeConsumer,\n  sendData: SendData,\n  syncMeetingState: SyncMeetingState,\n  updatePeerMetadata: UpdatePeerMetadata,\n  updatePeerPermission: UpdatePeerPermission,\n  updatePeerRole: UpdatePeerRole,\n  updateRoomControls: UpdateRoomControls,\n  updateRoomMetadata: UpdateRoomMetadata\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstU0o1Rk1ZWlUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBa0Y7O0FBRWxGO0FBQ0EsNkRBQTZELHVEQUFPO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNEQUFNO0FBQ1Y7QUFDQSxtQkFBbUIsc0RBQU07QUFDekI7QUFDQSxrQkFBa0Isc0RBQU07QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsc0RBQU07QUFDakI7QUFDQTtBQUNBLGlFQUFpRSx1REFBTztBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNEQUFNO0FBQ1Y7QUFDQSxtQkFBbUIsc0RBQU07QUFDekI7QUFDQSxrQkFBa0Isc0RBQU07QUFDeEIsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHNEQUFNO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQSxpRUFBaUUsdURBQU87QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNEQUFNO0FBQ1Y7QUFDQSxtQkFBbUIsc0RBQU07QUFDekI7QUFDQSxrQkFBa0Isc0RBQU07QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsc0RBQU07QUFDakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVrSSIsInNvdXJjZXMiOlsid2VicGFjazovL3Bva2Vtb24tZ2FtZS1ldGhpbmRpYS0xLy4vbm9kZV9tb2R1bGVzL0BodWRkbGUwMS93ZWItY29yZS9kaXN0L2NodW5rLVNKNUZNWVpVLmpzPzE3ODgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWVzc2FnZSwgcHJvdG8zLCBwcm90bzIsIFByb3RvUnRwUGFyYW1ldGVycyB9IGZyb20gJy4vY2h1bmstREZOWU9SSUYuanMnO1xuXG4vLyAuLi9wcm90b2MvZGlzdC9ydGMvc2N0cF9jYXBhYmlsaXRpZXNfcGIuanNcbnZhciBQcm90b051bVNjdHBTdHJlYW1zID0gY2xhc3MgX1Byb3RvTnVtU2N0cFN0cmVhbXMgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEluaXRpYWxseSByZXF1ZXN0ZWQgbnVtYmVyIG9mIG91dGdvaW5nIFNDVFAgc3RyZWFtc1xuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IGludDMyIE9TID0gMTtcbiAgICovXG4gIE9TID0gMDtcbiAgLyoqXG4gICAqIE1heGltdW0gbnVtYmVyIG9mIGluY29taW5nIFNDVFAgc3RyZWFtc1xuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IGludDMyIE1JUyA9IDI7XG4gICAqL1xuICBNSVMgPSAwO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzMudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMztcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJQcm90b051bVNjdHBTdHJlYW1zXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzMudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHtcbiAgICAgIG5vOiAxLFxuICAgICAgbmFtZTogXCJPU1wiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDVcbiAgICAgIC8qIFNjYWxhclR5cGUuSU5UMzIgKi9cbiAgICB9LFxuICAgIHtcbiAgICAgIG5vOiAyLFxuICAgICAgbmFtZTogXCJNSVNcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA1XG4gICAgICAvKiBTY2FsYXJUeXBlLklOVDMyICovXG4gICAgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b051bVNjdHBTdHJlYW1zKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb3RvTnVtU2N0cFN0cmVhbXMoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvdG9OdW1TY3RwU3RyZWFtcygpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzMudXRpbC5lcXVhbHMoX1Byb3RvTnVtU2N0cFN0cmVhbXMsIGEsIGIpO1xuICB9XG59O1xudmFyIFByb3RvU2N0cENhcGFiaWxpdGllcyA9IGNsYXNzIF9Qcm90b1NjdHBDYXBhYmlsaXRpZXMgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogUHJvdG9OdW1TY3RwU3RyZWFtcyBudW1TdHJlYW1zID0gMTtcbiAgICovXG4gIG51bVN0cmVhbXM7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMy51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8zO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIlByb3RvU2N0cENhcGFiaWxpdGllc1wiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8zLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcIm51bVN0cmVhbXNcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFByb3RvTnVtU2N0cFN0cmVhbXMgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b1NjdHBDYXBhYmlsaXRpZXMoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvdG9TY3RwQ2FwYWJpbGl0aWVzKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb3RvU2N0cENhcGFiaWxpdGllcygpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzMudXRpbC5lcXVhbHMoX1Byb3RvU2N0cENhcGFiaWxpdGllcywgYSwgYik7XG4gIH1cbn07XG5cbi8vIC4uL3Byb3RvYy9kaXN0L3J0Yy9zZHBfaW5mb19wYi5qc1xudmFyIFByb3RvRHRsc0ZpbmdlclByaW50cyA9IGNsYXNzIF9Qcm90b0R0bHNGaW5nZXJQcmludHMgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogc3RyaW5nIGFsZ29yaXRobSA9IDE7XG4gICAqL1xuICBhbGdvcml0aG0gPSBcIlwiO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBzdHJpbmcgdmFsdWUgPSAyO1xuICAgKi9cbiAgdmFsdWUgPSBcIlwiO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzMudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMztcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJQcm90b0R0bHNGaW5nZXJQcmludHNcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMy51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAge1xuICAgICAgbm86IDEsXG4gICAgICBuYW1lOiBcImFsZ29yaXRobVwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDlcbiAgICAgIC8qIFNjYWxhclR5cGUuU1RSSU5HICovXG4gICAgfSxcbiAgICB7XG4gICAgICBubzogMixcbiAgICAgIG5hbWU6IFwidmFsdWVcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA5XG4gICAgICAvKiBTY2FsYXJUeXBlLlNUUklORyAqL1xuICAgIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvdG9EdGxzRmluZ2VyUHJpbnRzKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb3RvRHRsc0ZpbmdlclByaW50cygpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b0R0bHNGaW5nZXJQcmludHMoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8zLnV0aWwuZXF1YWxzKF9Qcm90b0R0bHNGaW5nZXJQcmludHMsIGEsIGIpO1xuICB9XG59O1xudmFyIFByb3RvSWNlUGFyYW1ldGVycyA9IGNsYXNzIF9Qcm90b0ljZVBhcmFtZXRlcnMgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogc3RyaW5nIHVzZXJuYW1lRnJhZ21lbnQgPSAxO1xuICAgKi9cbiAgdXNlcm5hbWVGcmFnbWVudCA9IFwiXCI7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHN0cmluZyBwYXNzd29yZCA9IDI7XG4gICAqL1xuICBwYXNzd29yZCA9IFwiXCI7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IGJvb2wgaWNlTGl0ZSA9IDM7XG4gICAqL1xuICBpY2VMaXRlID0gZmFsc2U7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMy51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8zO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIlByb3RvSWNlUGFyYW1ldGVyc1wiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8zLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7XG4gICAgICBubzogMSxcbiAgICAgIG5hbWU6IFwidXNlcm5hbWVGcmFnbWVudFwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDlcbiAgICAgIC8qIFNjYWxhclR5cGUuU1RSSU5HICovXG4gICAgfSxcbiAgICB7XG4gICAgICBubzogMixcbiAgICAgIG5hbWU6IFwicGFzc3dvcmRcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA5XG4gICAgICAvKiBTY2FsYXJUeXBlLlNUUklORyAqL1xuICAgIH0sXG4gICAge1xuICAgICAgbm86IDMsXG4gICAgICBuYW1lOiBcImljZUxpdGVcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA4XG4gICAgICAvKiBTY2FsYXJUeXBlLkJPT0wgKi9cbiAgICB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb3RvSWNlUGFyYW1ldGVycygpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b0ljZVBhcmFtZXRlcnMoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvdG9JY2VQYXJhbWV0ZXJzKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMy51dGlsLmVxdWFscyhfUHJvdG9JY2VQYXJhbWV0ZXJzLCBhLCBiKTtcbiAgfVxufTtcbnZhciBQcm90b0ljZUNhbmRpZGF0ZXMgPSBjbGFzcyBfUHJvdG9JY2VDYW5kaWRhdGVzIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHN0cmluZyBmb3VuZGF0aW9uID0gMTtcbiAgICovXG4gIGZvdW5kYXRpb24gPSBcIlwiO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBpbnQzMiBwcmlvcml0eSA9IDI7XG4gICAqL1xuICBwcmlvcml0eSA9IDA7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHN0cmluZyBpcCA9IDM7XG4gICAqL1xuICBpcCA9IFwiXCI7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IGludDMyIHBvcnQgPSA0O1xuICAgKi9cbiAgcG9ydCA9IDA7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHN0cmluZyB0eXBlID0gNTtcbiAgICovXG4gIHR5cGUgPSBcIlwiO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBzdHJpbmcgcHJvdG9jb2wgPSA2O1xuICAgKi9cbiAgcHJvdG9jb2wgPSBcIlwiO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBzdHJpbmcgdGNwVHlwZSA9IDc7XG4gICAqL1xuICB0Y3BUeXBlID0gXCJcIjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogc3RyaW5nIGFkZHJlc3MgPSA4O1xuICAgKi9cbiAgYWRkcmVzcyA9IFwiXCI7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMy51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8zO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIlByb3RvSWNlQ2FuZGlkYXRlc1wiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8zLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7XG4gICAgICBubzogMSxcbiAgICAgIG5hbWU6IFwiZm91bmRhdGlvblwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDlcbiAgICAgIC8qIFNjYWxhclR5cGUuU1RSSU5HICovXG4gICAgfSxcbiAgICB7XG4gICAgICBubzogMixcbiAgICAgIG5hbWU6IFwicHJpb3JpdHlcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA1XG4gICAgICAvKiBTY2FsYXJUeXBlLklOVDMyICovXG4gICAgfSxcbiAgICB7XG4gICAgICBubzogMyxcbiAgICAgIG5hbWU6IFwiaXBcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA5XG4gICAgICAvKiBTY2FsYXJUeXBlLlNUUklORyAqL1xuICAgIH0sXG4gICAge1xuICAgICAgbm86IDQsXG4gICAgICBuYW1lOiBcInBvcnRcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA1XG4gICAgICAvKiBTY2FsYXJUeXBlLklOVDMyICovXG4gICAgfSxcbiAgICB7XG4gICAgICBubzogNSxcbiAgICAgIG5hbWU6IFwidHlwZVwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDlcbiAgICAgIC8qIFNjYWxhclR5cGUuU1RSSU5HICovXG4gICAgfSxcbiAgICB7XG4gICAgICBubzogNixcbiAgICAgIG5hbWU6IFwicHJvdG9jb2xcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA5XG4gICAgICAvKiBTY2FsYXJUeXBlLlNUUklORyAqL1xuICAgIH0sXG4gICAge1xuICAgICAgbm86IDcsXG4gICAgICBuYW1lOiBcInRjcFR5cGVcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA5XG4gICAgICAvKiBTY2FsYXJUeXBlLlNUUklORyAqL1xuICAgIH0sXG4gICAge1xuICAgICAgbm86IDgsXG4gICAgICBuYW1lOiBcImFkZHJlc3NcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA5XG4gICAgICAvKiBTY2FsYXJUeXBlLlNUUklORyAqL1xuICAgIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvdG9JY2VDYW5kaWRhdGVzKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb3RvSWNlQ2FuZGlkYXRlcygpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b0ljZUNhbmRpZGF0ZXMoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8zLnV0aWwuZXF1YWxzKF9Qcm90b0ljZUNhbmRpZGF0ZXMsIGEsIGIpO1xuICB9XG59O1xudmFyIFByb3RvRHRsc1BhcmFtZXRlcnMgPSBjbGFzcyBfUHJvdG9EdGxzUGFyYW1ldGVycyBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBzdHJpbmcgcm9sZSA9IDE7XG4gICAqL1xuICByb2xlID0gXCJcIjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVwZWF0ZWQgUHJvdG9EdGxzRmluZ2VyUHJpbnRzIGZpbmdlcnByaW50cyA9IDI7XG4gICAqL1xuICBmaW5nZXJwcmludHMgPSBbXTtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8zLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzM7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiUHJvdG9EdGxzUGFyYW1ldGVyc1wiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8zLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7XG4gICAgICBubzogMSxcbiAgICAgIG5hbWU6IFwicm9sZVwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDlcbiAgICAgIC8qIFNjYWxhclR5cGUuU1RSSU5HICovXG4gICAgfSxcbiAgICB7IG5vOiAyLCBuYW1lOiBcImZpbmdlcnByaW50c1wiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogUHJvdG9EdGxzRmluZ2VyUHJpbnRzLCByZXBlYXRlZDogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb3RvRHRsc1BhcmFtZXRlcnMoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvdG9EdGxzUGFyYW1ldGVycygpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b0R0bHNQYXJhbWV0ZXJzKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMy51dGlsLmVxdWFscyhfUHJvdG9EdGxzUGFyYW1ldGVycywgYSwgYik7XG4gIH1cbn07XG52YXIgUHJvdG9TY3RwUGFyYW1ldGVycyA9IGNsYXNzIF9Qcm90b1NjdHBQYXJhbWV0ZXJzIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IGludDMyIHBvcnQgPSAxO1xuICAgKi9cbiAgcG9ydCA9IDA7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IGludDMyIE9TID0gMjtcbiAgICovXG4gIE9TID0gMDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogaW50MzIgTUlTID0gMztcbiAgICovXG4gIE1JUyA9IDA7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IGludDMyIG1heE1lc3NhZ2VTaXplID0gNDtcbiAgICovXG4gIG1heE1lc3NhZ2VTaXplID0gMDtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8zLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzM7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiUHJvdG9TY3RwUGFyYW1ldGVyc1wiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8zLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7XG4gICAgICBubzogMSxcbiAgICAgIG5hbWU6IFwicG9ydFwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDVcbiAgICAgIC8qIFNjYWxhclR5cGUuSU5UMzIgKi9cbiAgICB9LFxuICAgIHtcbiAgICAgIG5vOiAyLFxuICAgICAgbmFtZTogXCJPU1wiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDVcbiAgICAgIC8qIFNjYWxhclR5cGUuSU5UMzIgKi9cbiAgICB9LFxuICAgIHtcbiAgICAgIG5vOiAzLFxuICAgICAgbmFtZTogXCJNSVNcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA1XG4gICAgICAvKiBTY2FsYXJUeXBlLklOVDMyICovXG4gICAgfSxcbiAgICB7XG4gICAgICBubzogNCxcbiAgICAgIG5hbWU6IFwibWF4TWVzc2FnZVNpemVcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA1XG4gICAgICAvKiBTY2FsYXJUeXBlLklOVDMyICovXG4gICAgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b1NjdHBQYXJhbWV0ZXJzKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb3RvU2N0cFBhcmFtZXRlcnMoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvdG9TY3RwUGFyYW1ldGVycygpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzMudXRpbC5lcXVhbHMoX1Byb3RvU2N0cFBhcmFtZXRlcnMsIGEsIGIpO1xuICB9XG59O1xudmFyIFByb3RvVHJhbnNwb3J0U0RQSW5mbyA9IGNsYXNzIF9Qcm90b1RyYW5zcG9ydFNEUEluZm8gZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogc3RyaW5nIGlkID0gMTtcbiAgICovXG4gIGlkID0gXCJcIjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVwZWF0ZWQgUHJvdG9JY2VDYW5kaWRhdGVzIGljZUNhbmRpZGF0ZXMgPSAyO1xuICAgKi9cbiAgaWNlQ2FuZGlkYXRlcyA9IFtdO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBQcm90b0ljZVBhcmFtZXRlcnMgaWNlUGFyYW1ldGVycyA9IDM7XG4gICAqL1xuICBpY2VQYXJhbWV0ZXJzO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBQcm90b0R0bHNQYXJhbWV0ZXJzIGR0bHNQYXJhbWV0ZXJzID0gNDtcbiAgICovXG4gIGR0bHNQYXJhbWV0ZXJzO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBQcm90b1NjdHBQYXJhbWV0ZXJzIHNjdHBQYXJhbWV0ZXJzID0gNTtcbiAgICovXG4gIHNjdHBQYXJhbWV0ZXJzO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzMudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMztcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJQcm90b1RyYW5zcG9ydFNEUEluZm9cIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMy51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAge1xuICAgICAgbm86IDEsXG4gICAgICBuYW1lOiBcImlkXCIsXG4gICAgICBraW5kOiBcInNjYWxhclwiLFxuICAgICAgVDogOVxuICAgICAgLyogU2NhbGFyVHlwZS5TVFJJTkcgKi9cbiAgICB9LFxuICAgIHsgbm86IDIsIG5hbWU6IFwiaWNlQ2FuZGlkYXRlc1wiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogUHJvdG9JY2VDYW5kaWRhdGVzLCByZXBlYXRlZDogdHJ1ZSB9LFxuICAgIHsgbm86IDMsIG5hbWU6IFwiaWNlUGFyYW1ldGVyc1wiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogUHJvdG9JY2VQYXJhbWV0ZXJzIH0sXG4gICAgeyBubzogNCwgbmFtZTogXCJkdGxzUGFyYW1ldGVyc1wiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogUHJvdG9EdGxzUGFyYW1ldGVycyB9LFxuICAgIHsgbm86IDUsIG5hbWU6IFwic2N0cFBhcmFtZXRlcnNcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFByb3RvU2N0cFBhcmFtZXRlcnMgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b1RyYW5zcG9ydFNEUEluZm8oKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvdG9UcmFuc3BvcnRTRFBJbmZvKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb3RvVHJhbnNwb3J0U0RQSW5mbygpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzMudXRpbC5lcXVhbHMoX1Byb3RvVHJhbnNwb3J0U0RQSW5mbywgYSwgYik7XG4gIH1cbn07XG5cbi8vIC4uL3Byb3RvYy9kaXN0L2NsaWVudC9hcHBfZGF0YV9wYi5qc1xudmFyIFZhbHVlID0gY2xhc3MgX1ZhbHVlIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gb25lb2YgVmFsdWUudmFsdWVfdHlwZVxuICAgKi9cbiAgdmFsdWVUeXBlID0geyBjYXNlOiB2b2lkIDAgfTtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiVmFsdWVcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMi51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAgeyBubzogMSwgbmFtZTogXCJzdHJpbmdfdmFsdWVcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgb25lb2Y6IFwidmFsdWVfdHlwZVwiIH0sXG4gICAgeyBubzogMiwgbmFtZTogXCJpbnRfdmFsdWVcIiwga2luZDogXCJzY2FsYXJcIiwgVDogNSwgb25lb2Y6IFwidmFsdWVfdHlwZVwiIH0sXG4gICAgeyBubzogMywgbmFtZTogXCJmbG9hdF92YWx1ZVwiLCBraW5kOiBcInNjYWxhclwiLCBUOiAyLCBvbmVvZjogXCJ2YWx1ZV90eXBlXCIgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9WYWx1ZSgpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9WYWx1ZSgpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9WYWx1ZSgpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX1ZhbHVlLCBhLCBiKTtcbiAgfVxufTtcbnZhciBBcHBEYXRhID0gY2xhc3MgX0FwcERhdGEgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogbWFwPHN0cmluZywgVmFsdWU+IGFwcERhdGEgPSAxO1xuICAgKi9cbiAgYXBwRGF0YSA9IHt9O1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJBcHBEYXRhXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwiYXBwRGF0YVwiLCBraW5kOiBcIm1hcFwiLCBLOiA5LCBWOiB7IGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBWYWx1ZSB9IH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfQXBwRGF0YSgpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9BcHBEYXRhKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0FwcERhdGEoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9BcHBEYXRhLCBhLCBiKTtcbiAgfVxufTtcblxuLy8gLi4vcHJvdG9jL2Rpc3QvcnRjL3NjdHBfc3RyZWFtX3BhcmFtZXRlcnNfcGIuanNcbnZhciBQcm90b1NjdHBTdHJlYW1QYXJhbWV0ZXJzID0gY2xhc3MgX1Byb3RvU2N0cFN0cmVhbVBhcmFtZXRlcnMgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogaW50MzIgc3RyZWFtSWQgPSAxO1xuICAgKi9cbiAgc3RyZWFtSWQgPSAwO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBib29sIG9yZGVyZWQgPSAyO1xuICAgKi9cbiAgb3JkZXJlZCA9IGZhbHNlO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBpbnQzMiBtYXhQYWNrZXRMaWZlVGltZSA9IDM7XG4gICAqL1xuICBtYXhQYWNrZXRMaWZlVGltZSA9IDA7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IGludDMyIG1heFJldHJhbnNtaXRzID0gNDtcbiAgICovXG4gIG1heFJldHJhbnNtaXRzID0gMDtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8zLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzM7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiUHJvdG9TY3RwU3RyZWFtUGFyYW1ldGVyc1wiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8zLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7XG4gICAgICBubzogMSxcbiAgICAgIG5hbWU6IFwic3RyZWFtSWRcIixcbiAgICAgIGtpbmQ6IFwic2NhbGFyXCIsXG4gICAgICBUOiA1XG4gICAgICAvKiBTY2FsYXJUeXBlLklOVDMyICovXG4gICAgfSxcbiAgICB7XG4gICAgICBubzogMixcbiAgICAgIG5hbWU6IFwib3JkZXJlZFwiLFxuICAgICAga2luZDogXCJzY2FsYXJcIixcbiAgICAgIFQ6IDhcbiAgICAgIC8qIFNjYWxhclR5cGUuQk9PTCAqL1xuICAgIH0sXG4gICAge1xuICAgICAgbm86IDMsXG4gICAgICBuYW1lOiBcIm1heFBhY2tldExpZmVUaW1lXCIsXG4gICAgICBraW5kOiBcInNjYWxhclwiLFxuICAgICAgVDogNVxuICAgICAgLyogU2NhbGFyVHlwZS5JTlQzMiAqL1xuICAgIH0sXG4gICAge1xuICAgICAgbm86IDQsXG4gICAgICBuYW1lOiBcIm1heFJldHJhbnNtaXRzXCIsXG4gICAgICBraW5kOiBcInNjYWxhclwiLFxuICAgICAgVDogNVxuICAgICAgLyogU2NhbGFyVHlwZS5JTlQzMiAqL1xuICAgIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvdG9TY3RwU3RyZWFtUGFyYW1ldGVycygpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm90b1NjdHBTdHJlYW1QYXJhbWV0ZXJzKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb3RvU2N0cFN0cmVhbVBhcmFtZXRlcnMoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8zLnV0aWwuZXF1YWxzKF9Qcm90b1NjdHBTdHJlYW1QYXJhbWV0ZXJzLCBhLCBiKTtcbiAgfVxufTtcblxuLy8gLi4vcHJvdG9jL2Rpc3QvY2xpZW50L3Jvb21fY29udHJvbF9wYi5qc1xudmFyIFByb2R1Y2VTb3VyY2VzID0gY2xhc3MgX1Byb2R1Y2VTb3VyY2VzIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIGJvb2wgbWljID0gMTtcbiAgICovXG4gIG1pYztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgYm9vbCBjYW0gPSAyO1xuICAgKi9cbiAgY2FtO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBib29sIHNjcmVlbiA9IDM7XG4gICAqL1xuICBzY3JlZW47XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIlByb2R1Y2VTb3VyY2VzXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwibWljXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDgsIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDIsIG5hbWU6IFwiY2FtXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDgsIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDMsIG5hbWU6IFwic2NyZWVuXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDgsIHJlcTogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb2R1Y2VTb3VyY2VzKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb2R1Y2VTb3VyY2VzKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb2R1Y2VTb3VyY2VzKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfUHJvZHVjZVNvdXJjZXMsIGEsIGIpO1xuICB9XG59O1xudmFyIFJvb21Db250cm9sVHlwZSA9IGNsYXNzIF9Sb29tQ29udHJvbFR5cGUgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIHR5cGUgPSAxO1xuICAgKi9cbiAgdHlwZTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgYm9vbCB2YWx1ZSA9IDU7XG4gICAqL1xuICB2YWx1ZTtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiUm9vbUNvbnRyb2xUeXBlXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwidHlwZVwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiA1LCBuYW1lOiBcInZhbHVlXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDgsIHJlcTogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Jvb21Db250cm9sVHlwZSgpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Sb29tQ29udHJvbFR5cGUoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUm9vbUNvbnRyb2xUeXBlKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfUm9vbUNvbnRyb2xUeXBlLCBhLCBiKTtcbiAgfVxufTtcbnZhciBQcm9kdWNlU291cmNlc0NvbnRyb2wgPSBjbGFzcyBfUHJvZHVjZVNvdXJjZXNDb250cm9sIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyB0eXBlID0gMTtcbiAgICovXG4gIHR5cGU7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIFByb2R1Y2VTb3VyY2VzIHZhbHVlID0gMjtcbiAgICovXG4gIHZhbHVlO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJQcm9kdWNlU291cmNlc0NvbnRyb2xcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMi51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAgeyBubzogMSwgbmFtZTogXCJ0eXBlXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDIsIG5hbWU6IFwidmFsdWVcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFByb2R1Y2VTb3VyY2VzLCByZXE6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm9kdWNlU291cmNlc0NvbnRyb2woKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvZHVjZVNvdXJjZXNDb250cm9sKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb2R1Y2VTb3VyY2VzQ29udHJvbCgpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX1Byb2R1Y2VTb3VyY2VzQ29udHJvbCwgYSwgYik7XG4gIH1cbn07XG5cbi8vIC4uL3Byb3RvYy9kaXN0L2NsaWVudC9wZXJtaXNzaW9uc19wYi5qc1xudmFyIFBlcm1pc3Npb25zID0gY2xhc3MgX1Blcm1pc3Npb25zIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIGJvb2wgYWRtaW4gPSAxO1xuICAgKi9cbiAgYWRtaW47XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIGJvb2wgY2FuQ29uc3VtZSA9IDI7XG4gICAqL1xuICBjYW5Db25zdW1lO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBib29sIGNhblByb2R1Y2UgPSAzO1xuICAgKi9cbiAgY2FuUHJvZHVjZTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgUGVybWlzc2lvbnMuUHJvZHVjZVNvdXJjZXMgY2FuUHJvZHVjZVNvdXJjZXMgPSA0O1xuICAgKi9cbiAgY2FuUHJvZHVjZVNvdXJjZXM7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIGJvb2wgY2FuU2VuZERhdGEgPSA1O1xuICAgKi9cbiAgY2FuU2VuZERhdGE7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIGJvb2wgY2FuUmVjdkRhdGEgPSA2O1xuICAgKi9cbiAgY2FuUmVjdkRhdGE7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIGJvb2wgY2FuVXBkYXRlTWV0YWRhdGEgPSA3O1xuICAgKi9cbiAgY2FuVXBkYXRlTWV0YWRhdGE7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIlBlcm1pc3Npb25zXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwiYWRtaW5cIiwga2luZDogXCJzY2FsYXJcIiwgVDogOCwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogMiwgbmFtZTogXCJjYW5Db25zdW1lXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDgsIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDMsIG5hbWU6IFwiY2FuUHJvZHVjZVwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA4LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiA0LCBuYW1lOiBcImNhblByb2R1Y2VTb3VyY2VzXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBQZXJtaXNzaW9uc19Qcm9kdWNlU291cmNlcywgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogNSwgbmFtZTogXCJjYW5TZW5kRGF0YVwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA4LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiA2LCBuYW1lOiBcImNhblJlY3ZEYXRhXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDgsIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDcsIG5hbWU6IFwiY2FuVXBkYXRlTWV0YWRhdGFcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOCwgcmVxOiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUGVybWlzc2lvbnMoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUGVybWlzc2lvbnMoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUGVybWlzc2lvbnMoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9QZXJtaXNzaW9ucywgYSwgYik7XG4gIH1cbn07XG52YXIgUGVybWlzc2lvbnNfUHJvZHVjZVNvdXJjZXMgPSBjbGFzcyBfUGVybWlzc2lvbnNfUHJvZHVjZVNvdXJjZXMgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgYm9vbCBjYW0gPSAxO1xuICAgKi9cbiAgY2FtO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBib29sIG1pYyA9IDI7XG4gICAqL1xuICBtaWM7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIGJvb2wgc2NyZWVuID0gMztcbiAgICovXG4gIHNjcmVlbjtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiUGVybWlzc2lvbnMuUHJvZHVjZVNvdXJjZXNcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMi51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAgeyBubzogMSwgbmFtZTogXCJjYW1cIiwga2luZDogXCJzY2FsYXJcIiwgVDogOCwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogMiwgbmFtZTogXCJtaWNcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOCwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogMywgbmFtZTogXCJzY3JlZW5cIiwga2luZDogXCJzY2FsYXJcIiwgVDogOCwgcmVxOiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUGVybWlzc2lvbnNfUHJvZHVjZVNvdXJjZXMoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUGVybWlzc2lvbnNfUHJvZHVjZVNvdXJjZXMoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUGVybWlzc2lvbnNfUHJvZHVjZVNvdXJjZXMoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9QZXJtaXNzaW9uc19Qcm9kdWNlU291cmNlcywgYSwgYik7XG4gIH1cbn07XG5cbi8vIC4uL3Byb3RvYy9kaXN0L2NsaWVudC9yZXF1ZXN0X3BiLmpzXG4oY2xhc3MgX1Rlc3RFdmVudCBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgbmFtZSA9IDE7XG4gICAqL1xuICBuYW1lO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgcGF5bG9hZCA9IDI7XG4gICAqL1xuICBwYXlsb2FkO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBvcHRpb25hbCBzdHJpbmcgZnJvbSA9IDM7XG4gICAqL1xuICBmcm9tO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBvcHRpb25hbCBzdHJpbmcgdG8gPSA0O1xuICAgKi9cbiAgdG87XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIlRlc3RFdmVudFwiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcIm5hbWVcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogMiwgbmFtZTogXCJwYXlsb2FkXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDMsIG5hbWU6IFwiZnJvbVwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCBvcHQ6IHRydWUgfSxcbiAgICB7IG5vOiA0LCBuYW1lOiBcInRvXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIG9wdDogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Rlc3RFdmVudCgpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9UZXN0RXZlbnQoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfVGVzdEV2ZW50KCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfVGVzdEV2ZW50LCBhLCBiKTtcbiAgfVxufSk7XG52YXIgQ29ubmVjdFJvb20gPSBjbGFzcyBfQ29ubmVjdFJvb20gZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIHJvb21JZCA9IDE7XG4gICAqL1xuICByb29tSWQ7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIkNvbm5lY3RSb29tXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwicm9vbUlkXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0Nvbm5lY3RSb29tKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0Nvbm5lY3RSb29tKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0Nvbm5lY3RSb29tKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfQ29ubmVjdFJvb20sIGEsIGIpO1xuICB9XG59O1xudmFyIENyZWF0ZVRyYW5zcG9ydCA9IGNsYXNzIF9DcmVhdGVUcmFuc3BvcnQgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgUHJvdG9TY3RwQ2FwYWJpbGl0aWVzIHNjdHBDYXBhYmlsaXRpZXMgPSAxO1xuICAgKi9cbiAgc2N0cENhcGFiaWxpdGllcztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIHRyYW5zcG9ydFR5cGUgPSAyO1xuICAgKi9cbiAgdHJhbnNwb3J0VHlwZTtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiQ3JlYXRlVHJhbnNwb3J0XCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwic2N0cENhcGFiaWxpdGllc1wiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogUHJvdG9TY3RwQ2FwYWJpbGl0aWVzLCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAyLCBuYW1lOiBcInRyYW5zcG9ydFR5cGVcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfQ3JlYXRlVHJhbnNwb3J0KCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0NyZWF0ZVRyYW5zcG9ydCgpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9DcmVhdGVUcmFuc3BvcnQoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9DcmVhdGVUcmFuc3BvcnQsIGEsIGIpO1xuICB9XG59O1xudmFyIENvbm5lY3RUcmFuc3BvcnQgPSBjbGFzcyBfQ29ubmVjdFRyYW5zcG9ydCBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgdHJhbnNwb3J0VHlwZSA9IDE7XG4gICAqL1xuICB0cmFuc3BvcnRUeXBlO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBQcm90b0R0bHNQYXJhbWV0ZXJzIGR0bHNQYXJhbWV0ZXJzID0gMjtcbiAgICovXG4gIGR0bHNQYXJhbWV0ZXJzO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJDb25uZWN0VHJhbnNwb3J0XCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwidHJhbnNwb3J0VHlwZVwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAyLCBuYW1lOiBcImR0bHNQYXJhbWV0ZXJzXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBQcm90b0R0bHNQYXJhbWV0ZXJzLCByZXE6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Db25uZWN0VHJhbnNwb3J0KCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0Nvbm5lY3RUcmFuc3BvcnQoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfQ29ubmVjdFRyYW5zcG9ydCgpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX0Nvbm5lY3RUcmFuc3BvcnQsIGEsIGIpO1xuICB9XG59O1xudmFyIENyZWF0ZURhdGFDb25zdW1lciA9IGNsYXNzIF9DcmVhdGVEYXRhQ29uc3VtZXIgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIGxhYmVsID0gMTtcbiAgICovXG4gIGxhYmVsO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJDcmVhdGVEYXRhQ29uc3VtZXJcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMi51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAgeyBubzogMSwgbmFtZTogXCJsYWJlbFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9DcmVhdGVEYXRhQ29uc3VtZXIoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfQ3JlYXRlRGF0YUNvbnN1bWVyKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0NyZWF0ZURhdGFDb25zdW1lcigpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX0NyZWF0ZURhdGFDb25zdW1lciwgYSwgYik7XG4gIH1cbn07XG52YXIgUHJvZHVjZSA9IGNsYXNzIF9Qcm9kdWNlIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBsYWJlbCA9IDE7XG4gICAqL1xuICBsYWJlbDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIGtpbmQgPSAyO1xuICAgKi9cbiAga2luZDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgUHJvdG9SdHBQYXJhbWV0ZXJzIHJ0cFBhcmFtZXRlcnMgPSAzO1xuICAgKi9cbiAgcnRwUGFyYW1ldGVycztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgYm9vbCBwYXVzZWQgPSA0O1xuICAgKi9cbiAgcGF1c2VkO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBvcHRpb25hbCBBcHBEYXRhIGFwcERhdGEgPSA1O1xuICAgKi9cbiAgYXBwRGF0YTtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiUHJvZHVjZVwiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcImxhYmVsXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDIsIG5hbWU6IFwia2luZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAzLCBuYW1lOiBcInJ0cFBhcmFtZXRlcnNcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFByb3RvUnRwUGFyYW1ldGVycywgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogNCwgbmFtZTogXCJwYXVzZWRcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOCwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogNSwgbmFtZTogXCJhcHBEYXRhXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBBcHBEYXRhLCBvcHQ6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Qcm9kdWNlKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb2R1Y2UoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUHJvZHVjZSgpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX1Byb2R1Y2UsIGEsIGIpO1xuICB9XG59O1xudmFyIFByb2R1Y2VEYXRhID0gY2xhc3MgX1Byb2R1Y2VEYXRhIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyB0cmFuc3BvcnRJZCA9IDE7XG4gICAqL1xuICB0cmFuc3BvcnRJZDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgUHJvdG9TY3RwU3RyZWFtUGFyYW1ldGVycyBzY3RwU3RyZWFtUGFyYW1ldGVycyA9IDI7XG4gICAqL1xuICBzY3RwU3RyZWFtUGFyYW1ldGVycztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIGxhYmVsID0gMztcbiAgICovXG4gIGxhYmVsO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBvcHRpb25hbCBzdHJpbmcgcHJvdG9jb2wgPSA0O1xuICAgKi9cbiAgcHJvdG9jb2w7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IG9wdGlvbmFsIEFwcERhdGEgYXBwRGF0YSA9IDU7XG4gICAqL1xuICBhcHBEYXRhO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJQcm9kdWNlRGF0YVwiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcInRyYW5zcG9ydElkXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDIsIG5hbWU6IFwic2N0cFN0cmVhbVBhcmFtZXRlcnNcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFByb3RvU2N0cFN0cmVhbVBhcmFtZXRlcnMsIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDMsIG5hbWU6IFwibGFiZWxcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogNCwgbmFtZTogXCJwcm90b2NvbFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCBvcHQ6IHRydWUgfSxcbiAgICB7IG5vOiA1LCBuYW1lOiBcImFwcERhdGFcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IEFwcERhdGEsIG9wdDogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb2R1Y2VEYXRhKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb2R1Y2VEYXRhKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Byb2R1Y2VEYXRhKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfUHJvZHVjZURhdGEsIGEsIGIpO1xuICB9XG59O1xudmFyIENvbnN1bWUgPSBjbGFzcyBfQ29uc3VtZSBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgcHJvZHVjZXJQZWVySWQgPSAxO1xuICAgKi9cbiAgcHJvZHVjZXJQZWVySWQ7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBwcm9kdWNlcklkID0gMjtcbiAgICovXG4gIHByb2R1Y2VySWQ7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IG9wdGlvbmFsIEFwcERhdGEgYXBwRGF0YSA9IDM7XG4gICAqL1xuICBhcHBEYXRhO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJDb25zdW1lXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwicHJvZHVjZXJQZWVySWRcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogMiwgbmFtZTogXCJwcm9kdWNlcklkXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDMsIG5hbWU6IFwiYXBwRGF0YVwiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogQXBwRGF0YSwgb3B0OiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfQ29uc3VtZSgpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9Db25zdW1lKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0NvbnN1bWUoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9Db25zdW1lLCBhLCBiKTtcbiAgfVxufTtcbnZhciBDbG9zZVByb2R1Y2VyID0gY2xhc3MgX0Nsb3NlUHJvZHVjZXIgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIHByb2R1Y2VySWQgPSAxO1xuICAgKi9cbiAgcHJvZHVjZXJJZDtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiQ2xvc2VQcm9kdWNlclwiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcInByb2R1Y2VySWRcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfQ2xvc2VQcm9kdWNlcigpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9DbG9zZVByb2R1Y2VyKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0Nsb3NlUHJvZHVjZXIoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9DbG9zZVByb2R1Y2VyLCBhLCBiKTtcbiAgfVxufTtcbnZhciBQYXVzZVByb2R1Y2VyID0gY2xhc3MgX1BhdXNlUHJvZHVjZXIgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIHByb2R1Y2VySWQgPSAxO1xuICAgKi9cbiAgcHJvZHVjZXJJZDtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiUGF1c2VQcm9kdWNlclwiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcInByb2R1Y2VySWRcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUGF1c2VQcm9kdWNlcigpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9QYXVzZVByb2R1Y2VyKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1BhdXNlUHJvZHVjZXIoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9QYXVzZVByb2R1Y2VyLCBhLCBiKTtcbiAgfVxufTtcbnZhciBSZXN1bWVQcm9kdWNlciA9IGNsYXNzIF9SZXN1bWVQcm9kdWNlciBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgcHJvZHVjZXJJZCA9IDE7XG4gICAqL1xuICBwcm9kdWNlcklkO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJSZXN1bWVQcm9kdWNlclwiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcInByb2R1Y2VySWRcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUmVzdW1lUHJvZHVjZXIoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUmVzdW1lUHJvZHVjZXIoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUmVzdW1lUHJvZHVjZXIoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9SZXN1bWVQcm9kdWNlciwgYSwgYik7XG4gIH1cbn07XG52YXIgQ2xvc2VDb25zdW1lciA9IGNsYXNzIF9DbG9zZUNvbnN1bWVyIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBjb25zdW1lcklkID0gMTtcbiAgICovXG4gIGNvbnN1bWVySWQ7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIkNsb3NlQ29uc3VtZXJcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMi51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAgeyBubzogMSwgbmFtZTogXCJjb25zdW1lcklkXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0Nsb3NlQ29uc3VtZXIoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfQ2xvc2VDb25zdW1lcigpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9DbG9zZUNvbnN1bWVyKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfQ2xvc2VDb25zdW1lciwgYSwgYik7XG4gIH1cbn07XG52YXIgUmVzdW1lQ29uc3VtZXIgPSBjbGFzcyBfUmVzdW1lQ29uc3VtZXIgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIGNvbnN1bWVySWQgPSAxO1xuICAgKi9cbiAgY29uc3VtZXJJZDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIHByb2R1Y2VyUGVlcklkID0gMjtcbiAgICovXG4gIHByb2R1Y2VyUGVlcklkO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJSZXN1bWVDb25zdW1lclwiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcImNvbnN1bWVySWRcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogMiwgbmFtZTogXCJwcm9kdWNlclBlZXJJZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9SZXN1bWVDb25zdW1lcigpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9SZXN1bWVDb25zdW1lcigpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9SZXN1bWVDb25zdW1lcigpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX1Jlc3VtZUNvbnN1bWVyLCBhLCBiKTtcbiAgfVxufTtcbnZhciBTeW5jTWVldGluZ1N0YXRlID0gY2xhc3MgX1N5bmNNZWV0aW5nU3RhdGUgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVwZWF0ZWQgc3RyaW5nIGxvY2FsUHJvZHVjZXJJZHMgPSAxO1xuICAgKi9cbiAgbG9jYWxQcm9kdWNlcklkcyA9IFtdO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJTeW5jTWVldGluZ1N0YXRlXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwibG9jYWxQcm9kdWNlcklkc1wiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXBlYXRlZDogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1N5bmNNZWV0aW5nU3RhdGUoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfU3luY01lZXRpbmdTdGF0ZSgpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9TeW5jTWVldGluZ1N0YXRlKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfU3luY01lZXRpbmdTdGF0ZSwgYSwgYik7XG4gIH1cbn07XG52YXIgUmVzdGFydFRyYW5zcG9ydEljZSA9IGNsYXNzIF9SZXN0YXJ0VHJhbnNwb3J0SWNlIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyB0cmFuc3BvcnRUeXBlID0gMTtcbiAgICovXG4gIHRyYW5zcG9ydFR5cGU7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyB0cmFuc3BvcnRJZCA9IDI7XG4gICAqL1xuICB0cmFuc3BvcnRJZDtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiUmVzdGFydFRyYW5zcG9ydEljZVwiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcInRyYW5zcG9ydFR5cGVcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogMiwgbmFtZTogXCJ0cmFuc3BvcnRJZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9SZXN0YXJ0VHJhbnNwb3J0SWNlKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1Jlc3RhcnRUcmFuc3BvcnRJY2UoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUmVzdGFydFRyYW5zcG9ydEljZSgpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX1Jlc3RhcnRUcmFuc3BvcnRJY2UsIGEsIGIpO1xuICB9XG59O1xudmFyIFNlbmREYXRhID0gY2xhc3MgX1NlbmREYXRhIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcGVhdGVkIHN0cmluZyB0byA9IDE7XG4gICAqL1xuICB0byA9IFtdO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBvcHRpb25hbCBzdHJpbmcgbGFiZWwgPSAyO1xuICAgKi9cbiAgbGFiZWw7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBwYXlsb2FkID0gMztcbiAgICovXG4gIHBheWxvYWQ7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIlNlbmREYXRhXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwidG9cIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVwZWF0ZWQ6IHRydWUgfSxcbiAgICB7IG5vOiAyLCBuYW1lOiBcImxhYmVsXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIG9wdDogdHJ1ZSB9LFxuICAgIHsgbm86IDMsIG5hbWU6IFwicGF5bG9hZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9TZW5kRGF0YSgpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9TZW5kRGF0YSgpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9TZW5kRGF0YSgpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX1NlbmREYXRhLCBhLCBiKTtcbiAgfVxufTtcbnZhciBVcGRhdGVSb29tQ29udHJvbHMgPSBjbGFzcyBfVXBkYXRlUm9vbUNvbnRyb2xzIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gb25lb2YgVXBkYXRlUm9vbUNvbnRyb2xzLmNvbnRyb2xcbiAgICovXG4gIGNvbnRyb2wgPSB7IGNhc2U6IHZvaWQgMCB9O1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJVcGRhdGVSb29tQ29udHJvbHNcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMi51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAgeyBubzogMSwgbmFtZTogXCJyb29tX2NvbnRyb2xcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFJvb21Db250cm9sVHlwZSwgb25lb2Y6IFwiY29udHJvbFwiIH0sXG4gICAgeyBubzogMiwgbmFtZTogXCJwcm9kdWNlX3NvdXJjZXNfY29udHJvbFwiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogUHJvZHVjZVNvdXJjZXNDb250cm9sLCBvbmVvZjogXCJjb250cm9sXCIgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9VcGRhdGVSb29tQ29udHJvbHMoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfVXBkYXRlUm9vbUNvbnRyb2xzKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1VwZGF0ZVJvb21Db250cm9scygpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX1VwZGF0ZVJvb21Db250cm9scywgYSwgYik7XG4gIH1cbn07XG52YXIgVXBkYXRlUGVlclBlcm1pc3Npb24gPSBjbGFzcyBfVXBkYXRlUGVlclBlcm1pc3Npb24gZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIHBlZXJJZCA9IDE7XG4gICAqL1xuICBwZWVySWQ7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IG9wdGlvbmFsIFBlcm1pc3Npb25zIHBlcm1pc3Npb25zID0gMjtcbiAgICovXG4gIHBlcm1pc3Npb25zO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJVcGRhdGVQZWVyUGVybWlzc2lvblwiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcInBlZXJJZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfSxcbiAgICB7IG5vOiAyLCBuYW1lOiBcInBlcm1pc3Npb25zXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBQZXJtaXNzaW9ucywgb3B0OiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfVXBkYXRlUGVlclBlcm1pc3Npb24oKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfVXBkYXRlUGVlclBlcm1pc3Npb24oKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfVXBkYXRlUGVlclBlcm1pc3Npb24oKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9VcGRhdGVQZWVyUGVybWlzc2lvbiwgYSwgYik7XG4gIH1cbn07XG52YXIgQWN0aXZhdGVTcGVha2VyTm90aWZpY2F0aW9uID0gY2xhc3MgX0FjdGl2YXRlU3BlYWtlck5vdGlmaWNhdGlvbiBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBvcHRpb25hbCBpbnQzMiBzaXplID0gMTtcbiAgICovXG4gIHNpemU7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIkFjdGl2YXRlU3BlYWtlck5vdGlmaWNhdGlvblwiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcInNpemVcIiwga2luZDogXCJzY2FsYXJcIiwgVDogNSwgb3B0OiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfQWN0aXZhdGVTcGVha2VyTm90aWZpY2F0aW9uKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0FjdGl2YXRlU3BlYWtlck5vdGlmaWNhdGlvbigpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9BY3RpdmF0ZVNwZWFrZXJOb3RpZmljYXRpb24oKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9BY3RpdmF0ZVNwZWFrZXJOb3RpZmljYXRpb24sIGEsIGIpO1xuICB9XG59O1xudmFyIFVwZGF0ZVBlZXJSb2xlID0gY2xhc3MgX1VwZGF0ZVBlZXJSb2xlIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBwZWVySWQgPSAxO1xuICAgKi9cbiAgcGVlcklkO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgcm9sZSA9IDI7XG4gICAqL1xuICByb2xlO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiBvcHRpb25hbCBVcGRhdGVQZWVyUm9sZS5PcHRpb25zIG9wdGlvbnMgPSAzO1xuICAgKi9cbiAgb3B0aW9ucztcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiVXBkYXRlUGVlclJvbGVcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMi51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAgeyBubzogMSwgbmFtZTogXCJwZWVySWRcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogMiwgbmFtZTogXCJyb2xlXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDMsIG5hbWU6IFwib3B0aW9uc1wiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogVXBkYXRlUGVlclJvbGVfT3B0aW9ucywgb3B0OiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfVXBkYXRlUGVlclJvbGUoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfVXBkYXRlUGVlclJvbGUoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfVXBkYXRlUGVlclJvbGUoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9VcGRhdGVQZWVyUm9sZSwgYSwgYik7XG4gIH1cbn07XG52YXIgVXBkYXRlUGVlclJvbGVfT3B0aW9ucyA9IGNsYXNzIF9VcGRhdGVQZWVyUm9sZV9PcHRpb25zIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IG9wdGlvbmFsIFBlcm1pc3Npb25zIGN1c3RvbSA9IDE7XG4gICAqL1xuICBjdXN0b207XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIlVwZGF0ZVBlZXJSb2xlLk9wdGlvbnNcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMi51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAgeyBubzogMSwgbmFtZTogXCJjdXN0b21cIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFBlcm1pc3Npb25zLCBvcHQ6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9VcGRhdGVQZWVyUm9sZV9PcHRpb25zKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1VwZGF0ZVBlZXJSb2xlX09wdGlvbnMoKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfVXBkYXRlUGVlclJvbGVfT3B0aW9ucygpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX1VwZGF0ZVBlZXJSb2xlX09wdGlvbnMsIGEsIGIpO1xuICB9XG59O1xudmFyIFVwZGF0ZVBlZXJNZXRhZGF0YSA9IGNsYXNzIF9VcGRhdGVQZWVyTWV0YWRhdGEgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIHBlZXJJZCA9IDE7XG4gICAqL1xuICBwZWVySWQ7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBtZXRhZGF0YSA9IDI7XG4gICAqL1xuICBtZXRhZGF0YTtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiVXBkYXRlUGVlck1ldGFkYXRhXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwicGVlcklkXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9LFxuICAgIHsgbm86IDIsIG5hbWU6IFwibWV0YWRhdGFcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfVXBkYXRlUGVlck1ldGFkYXRhKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1VwZGF0ZVBlZXJNZXRhZGF0YSgpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9VcGRhdGVQZWVyTWV0YWRhdGEoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9VcGRhdGVQZWVyTWV0YWRhdGEsIGEsIGIpO1xuICB9XG59O1xudmFyIFVwZGF0ZVJvb21NZXRhZGF0YSA9IGNsYXNzIF9VcGRhdGVSb29tTWV0YWRhdGEgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIG1ldGFkYXRhID0gMTtcbiAgICovXG4gIG1ldGFkYXRhO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJVcGRhdGVSb29tTWV0YWRhdGFcIjtcbiAgc3RhdGljIGZpZWxkcyA9IHByb3RvMi51dGlsLm5ld0ZpZWxkTGlzdCgoKSA9PiBbXG4gICAgeyBubzogMSwgbmFtZTogXCJtZXRhZGF0YVwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9VcGRhdGVSb29tTWV0YWRhdGEoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfVXBkYXRlUm9vbU1ldGFkYXRhKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1VwZGF0ZVJvb21NZXRhZGF0YSgpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX1VwZGF0ZVJvb21NZXRhZGF0YSwgYSwgYik7XG4gIH1cbn07XG52YXIgQ2xvc2VTdHJlYW1PZkxhYmVsID0gY2xhc3MgX0Nsb3NlU3RyZWFtT2ZMYWJlbCBleHRlbmRzIE1lc3NhZ2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIGZpZWxkOiByZXF1aXJlZCBzdHJpbmcgbGFiZWwgPSAxO1xuICAgKi9cbiAgbGFiZWw7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcGVhdGVkIHN0cmluZyBwZWVySWRzID0gMjtcbiAgICovXG4gIHBlZXJJZHMgPSBbXTtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiQ2xvc2VTdHJlYW1PZkxhYmVsXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwibGFiZWxcIiwga2luZDogXCJzY2FsYXJcIiwgVDogOSwgcmVxOiB0cnVlIH0sXG4gICAgeyBubzogMiwgbmFtZTogXCJwZWVySWRzXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcGVhdGVkOiB0cnVlIH1cbiAgXSk7XG4gIHN0YXRpYyBmcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfQ2xvc2VTdHJlYW1PZkxhYmVsKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0Nsb3NlU3RyZWFtT2ZMYWJlbCgpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9DbG9zZVN0cmVhbU9mTGFiZWwoKS5mcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICByZXR1cm4gcHJvdG8yLnV0aWwuZXF1YWxzKF9DbG9zZVN0cmVhbU9mTGFiZWwsIGEsIGIpO1xuICB9XG59O1xudmFyIEFjY2VwdExvYmJ5UGVlciA9IGNsYXNzIF9BY2NlcHRMb2JieVBlZXIgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIHBlZXJJZCA9IDE7XG4gICAqL1xuICBwZWVySWQ7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIkFjY2VwdExvYmJ5UGVlclwiO1xuICBzdGF0aWMgZmllbGRzID0gcHJvdG8yLnV0aWwubmV3RmllbGRMaXN0KCgpID0+IFtcbiAgICB7IG5vOiAxLCBuYW1lOiBcInBlZXJJZFwiLCBraW5kOiBcInNjYWxhclwiLCBUOiA5LCByZXE6IHRydWUgfVxuICBdKTtcbiAgc3RhdGljIGZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9BY2NlcHRMb2JieVBlZXIoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfQWNjZXB0TG9iYnlQZWVyKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0FjY2VwdExvYmJ5UGVlcigpLmZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBwcm90bzIudXRpbC5lcXVhbHMoX0FjY2VwdExvYmJ5UGVlciwgYSwgYik7XG4gIH1cbn07XG52YXIgRGVueUxvYmJ5UGVlciA9IGNsYXNzIF9EZW55TG9iYnlQZWVyIGV4dGVuZHMgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gZmllbGQ6IHJlcXVpcmVkIHN0cmluZyBwZWVySWQgPSAxO1xuICAgKi9cbiAgcGVlcklkO1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJEZW55TG9iYnlQZWVyXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwicGVlcklkXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0RlbnlMb2JieVBlZXIoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfRGVueUxvYmJ5UGVlcigpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9EZW55TG9iYnlQZWVyKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfRGVueUxvYmJ5UGVlciwgYSwgYik7XG4gIH1cbn07XG52YXIgS2lja1BlZXIgPSBjbGFzcyBfS2lja1BlZXIgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBmaWVsZDogcmVxdWlyZWQgc3RyaW5nIHBlZXJJZCA9IDE7XG4gICAqL1xuICBwZWVySWQ7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHByb3RvMi51dGlsLmluaXRQYXJ0aWFsKGRhdGEsIHRoaXMpO1xuICB9XG4gIHN0YXRpYyBydW50aW1lID0gcHJvdG8yO1xuICBzdGF0aWMgdHlwZU5hbWUgPSBcIktpY2tQZWVyXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDEsIG5hbWU6IFwicGVlcklkXCIsIGtpbmQ6IFwic2NhbGFyXCIsIFQ6IDksIHJlcTogdHJ1ZSB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0tpY2tQZWVyKCkuZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0tpY2tQZWVyKCkuZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0tpY2tQZWVyKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfS2lja1BlZXIsIGEsIGIpO1xuICB9XG59O1xudmFyIENsb3NlUm9vbSA9IGNsYXNzIF9DbG9zZVJvb20gZXh0ZW5kcyBNZXNzYWdlIHtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgcHJvdG8yLnV0aWwuaW5pdFBhcnRpYWwoZGF0YSwgdGhpcyk7XG4gIH1cbiAgc3RhdGljIHJ1bnRpbWUgPSBwcm90bzI7XG4gIHN0YXRpYyB0eXBlTmFtZSA9IFwiQ2xvc2VSb29tXCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW10pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX0Nsb3NlUm9vbSgpLmZyb21CaW5hcnkoYnl0ZXMsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9DbG9zZVJvb20oKS5mcm9tSnNvbihqc29uVmFsdWUsIG9wdGlvbnMpO1xuICB9XG4gIHN0YXRpYyBmcm9tSnNvblN0cmluZyhqc29uU3RyaW5nLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfQ2xvc2VSb29tKCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfQ2xvc2VSb29tLCBhLCBiKTtcbiAgfVxufTtcbnZhciBSZXF1ZXN0ID0gY2xhc3MgX1JlcXVlc3QgZXh0ZW5kcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBvbmVvZiBSZXF1ZXN0LnJlcXVlc3RcbiAgICovXG4gIHJlcXVlc3QgPSB7IGNhc2U6IHZvaWQgMCB9O1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICBwcm90bzIudXRpbC5pbml0UGFydGlhbChkYXRhLCB0aGlzKTtcbiAgfVxuICBzdGF0aWMgcnVudGltZSA9IHByb3RvMjtcbiAgc3RhdGljIHR5cGVOYW1lID0gXCJSZXF1ZXN0XCI7XG4gIHN0YXRpYyBmaWVsZHMgPSBwcm90bzIudXRpbC5uZXdGaWVsZExpc3QoKCkgPT4gW1xuICAgIHsgbm86IDIsIG5hbWU6IFwiY29ubmVjdF9yb29tXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBDb25uZWN0Um9vbSwgb25lb2Y6IFwicmVxdWVzdFwiIH0sXG4gICAgeyBubzogMywgbmFtZTogXCJjcmVhdGVfdHJhbnNwb3J0XCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBDcmVhdGVUcmFuc3BvcnQsIG9uZW9mOiBcInJlcXVlc3RcIiB9LFxuICAgIHsgbm86IDQsIG5hbWU6IFwiY29ubmVjdF90cmFuc3BvcnRcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IENvbm5lY3RUcmFuc3BvcnQsIG9uZW9mOiBcInJlcXVlc3RcIiB9LFxuICAgIHsgbm86IDI1LCBuYW1lOiBcImNyZWF0ZV9kYXRhX2NvbnN1bWVyXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBDcmVhdGVEYXRhQ29uc3VtZXIsIG9uZW9mOiBcInJlcXVlc3RcIiB9LFxuICAgIHsgbm86IDUsIG5hbWU6IFwicHJvZHVjZVwiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogUHJvZHVjZSwgb25lb2Y6IFwicmVxdWVzdFwiIH0sXG4gICAgeyBubzogNiwgbmFtZTogXCJwcm9kdWNlX2RhdGFcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFByb2R1Y2VEYXRhLCBvbmVvZjogXCJyZXF1ZXN0XCIgfSxcbiAgICB7IG5vOiA3LCBuYW1lOiBcImNvbnN1bWVcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IENvbnN1bWUsIG9uZW9mOiBcInJlcXVlc3RcIiB9LFxuICAgIHsgbm86IDgsIG5hbWU6IFwiY2xvc2VfcHJvZHVjZXJcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IENsb3NlUHJvZHVjZXIsIG9uZW9mOiBcInJlcXVlc3RcIiB9LFxuICAgIHsgbm86IDI2LCBuYW1lOiBcInBhdXNlX3Byb2R1Y2VyXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBQYXVzZVByb2R1Y2VyLCBvbmVvZjogXCJyZXF1ZXN0XCIgfSxcbiAgICB7IG5vOiAyNywgbmFtZTogXCJyZXN1bWVfcHJvZHVjZXJcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFJlc3VtZVByb2R1Y2VyLCBvbmVvZjogXCJyZXF1ZXN0XCIgfSxcbiAgICB7IG5vOiA5LCBuYW1lOiBcImNsb3NlX2NvbnN1bWVyXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBDbG9zZUNvbnN1bWVyLCBvbmVvZjogXCJyZXF1ZXN0XCIgfSxcbiAgICB7IG5vOiAxMCwgbmFtZTogXCJyZXN1bWVfY29uc3VtZXJcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFJlc3VtZUNvbnN1bWVyLCBvbmVvZjogXCJyZXF1ZXN0XCIgfSxcbiAgICB7IG5vOiAxMSwgbmFtZTogXCJzeW5jX21lZXRpbmdfc3RhdGVcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFN5bmNNZWV0aW5nU3RhdGUsIG9uZW9mOiBcInJlcXVlc3RcIiB9LFxuICAgIHsgbm86IDEyLCBuYW1lOiBcInJlc3RhcnRfdHJhbnNwb3J0X2ljZVwiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogUmVzdGFydFRyYW5zcG9ydEljZSwgb25lb2Y6IFwicmVxdWVzdFwiIH0sXG4gICAgeyBubzogMTMsIG5hbWU6IFwic2VuZF9kYXRhXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBTZW5kRGF0YSwgb25lb2Y6IFwicmVxdWVzdFwiIH0sXG4gICAgeyBubzogMTQsIG5hbWU6IFwidXBkYXRlX3Jvb21fY29udHJvbHNcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFVwZGF0ZVJvb21Db250cm9scywgb25lb2Y6IFwicmVxdWVzdFwiIH0sXG4gICAgeyBubzogMTUsIG5hbWU6IFwidXBkYXRlX3BlZXJfcGVybWlzc2lvblwiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogVXBkYXRlUGVlclBlcm1pc3Npb24sIG9uZW9mOiBcInJlcXVlc3RcIiB9LFxuICAgIHsgbm86IDE2LCBuYW1lOiBcImFjdGl2YXRlX3NwZWFrZXJfbm90aWZpY2F0aW9uXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBBY3RpdmF0ZVNwZWFrZXJOb3RpZmljYXRpb24sIG9uZW9mOiBcInJlcXVlc3RcIiB9LFxuICAgIHsgbm86IDE3LCBuYW1lOiBcInVwZGF0ZV9wZWVyX3JvbGVcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IFVwZGF0ZVBlZXJSb2xlLCBvbmVvZjogXCJyZXF1ZXN0XCIgfSxcbiAgICB7IG5vOiAxOCwgbmFtZTogXCJ1cGRhdGVfcGVlcl9tZXRhZGF0YVwiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogVXBkYXRlUGVlck1ldGFkYXRhLCBvbmVvZjogXCJyZXF1ZXN0XCIgfSxcbiAgICB7IG5vOiAxOSwgbmFtZTogXCJ1cGRhdGVfcm9vbV9tZXRhZGF0YVwiLCBraW5kOiBcIm1lc3NhZ2VcIiwgVDogVXBkYXRlUm9vbU1ldGFkYXRhLCBvbmVvZjogXCJyZXF1ZXN0XCIgfSxcbiAgICB7IG5vOiAyMCwgbmFtZTogXCJjbG9zZV9zdHJlYW1fb2ZfbGFiZWxcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IENsb3NlU3RyZWFtT2ZMYWJlbCwgb25lb2Y6IFwicmVxdWVzdFwiIH0sXG4gICAgeyBubzogMjEsIG5hbWU6IFwiYWNjZXB0X2xvYmJ5X3BlZXJcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IEFjY2VwdExvYmJ5UGVlciwgb25lb2Y6IFwicmVxdWVzdFwiIH0sXG4gICAgeyBubzogMjIsIG5hbWU6IFwiZGVueV9sb2JieV9wZWVyXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBEZW55TG9iYnlQZWVyLCBvbmVvZjogXCJyZXF1ZXN0XCIgfSxcbiAgICB7IG5vOiAyMywgbmFtZTogXCJraWNrX3BlZXJcIiwga2luZDogXCJtZXNzYWdlXCIsIFQ6IEtpY2tQZWVyLCBvbmVvZjogXCJyZXF1ZXN0XCIgfSxcbiAgICB7IG5vOiAyNCwgbmFtZTogXCJjbG9zZV9yb29tXCIsIGtpbmQ6IFwibWVzc2FnZVwiLCBUOiBDbG9zZVJvb20sIG9uZW9mOiBcInJlcXVlc3RcIiB9XG4gIF0pO1xuICBzdGF0aWMgZnJvbUJpbmFyeShieXRlcywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgX1JlcXVlc3QoKS5mcm9tQmluYXJ5KGJ5dGVzLCBvcHRpb25zKTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvblZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBfUmVxdWVzdCgpLmZyb21Kc29uKGpzb25WYWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGZyb21Kc29uU3RyaW5nKGpzb25TdHJpbmcsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IF9SZXF1ZXN0KCkuZnJvbUpzb25TdHJpbmcoanNvblN0cmluZywgb3B0aW9ucyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIHByb3RvMi51dGlsLmVxdWFscyhfUmVxdWVzdCwgYSwgYik7XG4gIH1cbn07XG5cbi8vIHNyYy9yZXF1ZXN0LmV2ZW50cy50c1xudmFyIFByb3RvUmVxdWVzdEV2ZW50ID0ge1xuICBhY2NlcHRMb2JieVBlZXI6IEFjY2VwdExvYmJ5UGVlcixcbiAgYWN0aXZhdGVTcGVha2VyTm90aWZpY2F0aW9uOiBBY3RpdmF0ZVNwZWFrZXJOb3RpZmljYXRpb24sXG4gIGNyZWF0ZURhdGFDb25zdW1lcjogQ3JlYXRlRGF0YUNvbnN1bWVyLFxuICBjbG9zZUNvbnN1bWVyOiBDbG9zZUNvbnN1bWVyLFxuICBwYXVzZVByb2R1Y2VyOiBQYXVzZVByb2R1Y2VyLFxuICByZXN1bWVQcm9kdWNlcjogUmVzdW1lUHJvZHVjZXIsXG4gIGNsb3NlUHJvZHVjZXI6IENsb3NlUHJvZHVjZXIsXG4gIGNsb3NlUm9vbTogQ2xvc2VSb29tLFxuICBjb25uZWN0Um9vbTogQ29ubmVjdFJvb20sXG4gIGNsb3NlU3RyZWFtT2ZMYWJlbDogQ2xvc2VTdHJlYW1PZkxhYmVsLFxuICBjb25uZWN0VHJhbnNwb3J0OiBDb25uZWN0VHJhbnNwb3J0LFxuICBjb25zdW1lOiBDb25zdW1lLFxuICBjcmVhdGVUcmFuc3BvcnQ6IENyZWF0ZVRyYW5zcG9ydCxcbiAgZGVueUxvYmJ5UGVlcjogRGVueUxvYmJ5UGVlcixcbiAga2lja1BlZXI6IEtpY2tQZWVyLFxuICBwcm9kdWNlOiBQcm9kdWNlLFxuICBwcm9kdWNlRGF0YTogUHJvZHVjZURhdGEsXG4gIHJlc3RhcnRUcmFuc3BvcnRJY2U6IFJlc3RhcnRUcmFuc3BvcnRJY2UsXG4gIHJlc3VtZUNvbnN1bWVyOiBSZXN1bWVDb25zdW1lcixcbiAgc2VuZERhdGE6IFNlbmREYXRhLFxuICBzeW5jTWVldGluZ1N0YXRlOiBTeW5jTWVldGluZ1N0YXRlLFxuICB1cGRhdGVQZWVyTWV0YWRhdGE6IFVwZGF0ZVBlZXJNZXRhZGF0YSxcbiAgdXBkYXRlUGVlclBlcm1pc3Npb246IFVwZGF0ZVBlZXJQZXJtaXNzaW9uLFxuICB1cGRhdGVQZWVyUm9sZTogVXBkYXRlUGVlclJvbGUsXG4gIHVwZGF0ZVJvb21Db250cm9sczogVXBkYXRlUm9vbUNvbnRyb2xzLFxuICB1cGRhdGVSb29tTWV0YWRhdGE6IFVwZGF0ZVJvb21NZXRhZGF0YVxufTtcblxuZXhwb3J0IHsgQXBwRGF0YSwgUGVybWlzc2lvbnMsIFByb3RvSWNlUGFyYW1ldGVycywgUHJvdG9SZXF1ZXN0RXZlbnQsIFByb3RvU2N0cFN0cmVhbVBhcmFtZXRlcnMsIFByb3RvVHJhbnNwb3J0U0RQSW5mbywgUmVxdWVzdCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-SJ5FMYZU.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-TOCFOGTC.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-TOCFOGTC.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createLogger: () => (/* binding */ createLogger),\n/* harmony export */   mainLogger: () => (/* binding */ mainLogger),\n/* harmony export */   setLogLevel: () => (/* binding */ setLogLevel),\n/* harmony export */   setLoggerFactory: () => (/* binding */ setLoggerFactory)\n/* harmony export */ });\n// src/logger.ts\nvar COLORS = {\n  black: \"\\x1B[30m\",\n  red: \"\\x1B[31m\",\n  green: \"\\x1B[32m\",\n  yellow: \"\\x1B[33m\",\n  blue: \"\\x1B[34m\",\n  magenta: \"\\x1B[35m\",\n  cyan: \"\\x1B[36m\",\n  white: \"\\x1B[37m\",\n  default: \"\\x1B[39m\"\n};\nvar defaultLevel = \"error\";\nvar created = Date.now();\nfunction createDefaultLoggerFactory() {\n  return () => {\n    const trace = (...args) => {\n      console.trace(...args);\n    };\n    const debug = (...args) => {\n      console.debug(...args);\n    };\n    const info = (...args) => {\n      console.info(...args);\n    };\n    const warn = (...args) => {\n      console.warn(...args);\n    };\n    const error = (...args) => {\n      console.error(...args);\n    };\n    return {\n      trace,\n      debug,\n      info,\n      warn,\n      error\n    };\n  };\n}\nvar wrapLogger = (logger, moduleName, logLevel) => {\n  let isTrace = false;\n  let isDebug = false;\n  let isInfo = false;\n  let isWarning = false;\n  let isError = false;\n  let _level = logLevel;\n  let _logger = logger;\n  const tracePrefix = `${COLORS.magenta}[TRACE]${COLORS.default} ${moduleName}`;\n  const debugPrefix = `${COLORS.cyan}[DEBUG]${COLORS.default} ${moduleName}`;\n  const infoPrefix = `${COLORS.green}[INFO]${COLORS.default} ${moduleName}`;\n  const warnPrefix = `${COLORS.yellow}[WARN]${COLORS.default} ${moduleName}`;\n  const errorPrefix = `${COLORS.red}[ERROR]${COLORS.default} ${moduleName}`;\n  const result = new class {\n    init() {\n      isTrace = [\"trace\"].includes(_level ?? defaultLevel);\n      isDebug = [\"trace\", \"debug\"].includes(_level ?? defaultLevel);\n      isInfo = [\"trace\", \"debug\", \"info\"].includes(_level ?? defaultLevel);\n      isWarning = [\"trace\", \"debug\", \"info\", \"warn\"].includes(\n        _level ?? defaultLevel\n      );\n      isError = [\"trace\", \"debug\", \"info\", \"warn\", \"error\"].includes(\n        _level ?? defaultLevel\n      );\n    }\n    get logger() {\n      return _logger;\n    }\n    set logger(value) {\n      _logger = value;\n    }\n    get level() {\n      return _level;\n    }\n    set level(value) {\n      _level = value;\n    }\n    // biome-ignore lint/suspicious/noExplicitAny: need any\n    trace(...args) {\n      if (isTrace) {\n        const elapsedInMs = `${COLORS.magenta}+${Date.now() - created}ms${COLORS.default}`;\n        logger.trace(tracePrefix, ...args, elapsedInMs);\n      }\n    }\n    // biome-ignore lint/suspicious/noExplicitAny: need any\n    debug(...args) {\n      if (isDebug) {\n        const elapsedInMs = `${COLORS.magenta}+${Date.now() - created}ms${COLORS.default}`;\n        logger.debug(debugPrefix, ...args, elapsedInMs);\n      }\n    }\n    // biome-ignore lint/suspicious/noExplicitAny: need any\n    info(...args) {\n      if (isInfo) {\n        const elapsedInMs = `${COLORS.magenta}+${Date.now() - created}ms${COLORS.default}`;\n        logger.info(infoPrefix, ...args, elapsedInMs);\n      }\n    }\n    // biome-ignore lint/suspicious/noExplicitAny: need any\n    warn(...args) {\n      if (isWarning) {\n        const elapsedInMs = `${COLORS.magenta}+${Date.now() - created}ms${COLORS.default}`;\n        logger.warn(warnPrefix, ...args, elapsedInMs);\n      }\n    }\n    // biome-ignore lint/suspicious/noExplicitAny: need any\n    error(...args) {\n      if (isError) {\n        const elapsedInMs = `${COLORS.magenta}+${Date.now() - created}ms${COLORS.default}`;\n        logger.error(errorPrefix, ...args, elapsedInMs);\n      }\n    }\n  }();\n  return result;\n};\nvar actualLoggerFactory = createDefaultLoggerFactory();\nvar loggers = /* @__PURE__ */ new Map();\nvar createLogger = (moduleName, logLevel) => {\n  let wrappedLogger = loggers.get(moduleName);\n  if (!wrappedLogger) {\n    const logger = actualLoggerFactory();\n    wrappedLogger = wrapLogger(logger, moduleName, logLevel ?? defaultLevel);\n    loggers.set(moduleName, wrappedLogger);\n  } else {\n    wrappedLogger.level = logLevel ?? defaultLevel;\n  }\n  wrappedLogger.init();\n  return wrappedLogger;\n};\nvar setLogLevel = (level) => {\n  defaultLevel = level;\n  for (const [moduleName] of Array.from(loggers.entries())) {\n    loggers.set(moduleName, createLogger(moduleName, level));\n  }\n};\nvar setLoggerFactory = (loggerFactory) => {\n  actualLoggerFactory = loggerFactory;\n  for (const [moduleName, logger] of Array.from(loggers.entries())) {\n    loggers.set(moduleName, createLogger(moduleName, logger.level));\n  }\n};\nvar mainLogger = {\n  createSubLogger: (moduleName) => createLogger(`HuddleWebCore:${moduleName}`)\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstVE9DRk9HVEMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixlQUFlLFNBQVMsZ0JBQWdCLEVBQUUsV0FBVztBQUM5RSx5QkFBeUIsWUFBWSxTQUFTLGdCQUFnQixFQUFFLFdBQVc7QUFDM0Usd0JBQXdCLGFBQWEsUUFBUSxnQkFBZ0IsRUFBRSxXQUFXO0FBQzFFLHdCQUF3QixjQUFjLFFBQVEsZ0JBQWdCLEVBQUUsV0FBVztBQUMzRSx5QkFBeUIsV0FBVyxTQUFTLGdCQUFnQixFQUFFLFdBQVc7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGVBQWUsR0FBRyxxQkFBcUIsSUFBSSxlQUFlO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixlQUFlLEdBQUcscUJBQXFCLElBQUksZUFBZTtBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsZUFBZSxHQUFHLHFCQUFxQixJQUFJLGVBQWU7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGVBQWUsR0FBRyxxQkFBcUIsSUFBSSxlQUFlO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixlQUFlLEdBQUcscUJBQXFCLElBQUksZUFBZTtBQUN6RjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLFdBQVc7QUFDNUU7O0FBRW1FIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9rZW1vbi1nYW1lLWV0aGluZGlhLTEvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstVE9DRk9HVEMuanM/MGQzMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvbG9nZ2VyLnRzXG52YXIgQ09MT1JTID0ge1xuICBibGFjazogXCJcXHgxQlszMG1cIixcbiAgcmVkOiBcIlxceDFCWzMxbVwiLFxuICBncmVlbjogXCJcXHgxQlszMm1cIixcbiAgeWVsbG93OiBcIlxceDFCWzMzbVwiLFxuICBibHVlOiBcIlxceDFCWzM0bVwiLFxuICBtYWdlbnRhOiBcIlxceDFCWzM1bVwiLFxuICBjeWFuOiBcIlxceDFCWzM2bVwiLFxuICB3aGl0ZTogXCJcXHgxQlszN21cIixcbiAgZGVmYXVsdDogXCJcXHgxQlszOW1cIlxufTtcbnZhciBkZWZhdWx0TGV2ZWwgPSBcImVycm9yXCI7XG52YXIgY3JlYXRlZCA9IERhdGUubm93KCk7XG5mdW5jdGlvbiBjcmVhdGVEZWZhdWx0TG9nZ2VyRmFjdG9yeSgpIHtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBjb25zdCB0cmFjZSA9ICguLi5hcmdzKSA9PiB7XG4gICAgICBjb25zb2xlLnRyYWNlKC4uLmFyZ3MpO1xuICAgIH07XG4gICAgY29uc3QgZGVidWcgPSAoLi4uYXJncykgPT4ge1xuICAgICAgY29uc29sZS5kZWJ1ZyguLi5hcmdzKTtcbiAgICB9O1xuICAgIGNvbnN0IGluZm8gPSAoLi4uYXJncykgPT4ge1xuICAgICAgY29uc29sZS5pbmZvKC4uLmFyZ3MpO1xuICAgIH07XG4gICAgY29uc3Qgd2FybiA9ICguLi5hcmdzKSA9PiB7XG4gICAgICBjb25zb2xlLndhcm4oLi4uYXJncyk7XG4gICAgfTtcbiAgICBjb25zdCBlcnJvciA9ICguLi5hcmdzKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKC4uLmFyZ3MpO1xuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgIHRyYWNlLFxuICAgICAgZGVidWcsXG4gICAgICBpbmZvLFxuICAgICAgd2FybixcbiAgICAgIGVycm9yXG4gICAgfTtcbiAgfTtcbn1cbnZhciB3cmFwTG9nZ2VyID0gKGxvZ2dlciwgbW9kdWxlTmFtZSwgbG9nTGV2ZWwpID0+IHtcbiAgbGV0IGlzVHJhY2UgPSBmYWxzZTtcbiAgbGV0IGlzRGVidWcgPSBmYWxzZTtcbiAgbGV0IGlzSW5mbyA9IGZhbHNlO1xuICBsZXQgaXNXYXJuaW5nID0gZmFsc2U7XG4gIGxldCBpc0Vycm9yID0gZmFsc2U7XG4gIGxldCBfbGV2ZWwgPSBsb2dMZXZlbDtcbiAgbGV0IF9sb2dnZXIgPSBsb2dnZXI7XG4gIGNvbnN0IHRyYWNlUHJlZml4ID0gYCR7Q09MT1JTLm1hZ2VudGF9W1RSQUNFXSR7Q09MT1JTLmRlZmF1bHR9ICR7bW9kdWxlTmFtZX1gO1xuICBjb25zdCBkZWJ1Z1ByZWZpeCA9IGAke0NPTE9SUy5jeWFufVtERUJVR10ke0NPTE9SUy5kZWZhdWx0fSAke21vZHVsZU5hbWV9YDtcbiAgY29uc3QgaW5mb1ByZWZpeCA9IGAke0NPTE9SUy5ncmVlbn1bSU5GT10ke0NPTE9SUy5kZWZhdWx0fSAke21vZHVsZU5hbWV9YDtcbiAgY29uc3Qgd2FyblByZWZpeCA9IGAke0NPTE9SUy55ZWxsb3d9W1dBUk5dJHtDT0xPUlMuZGVmYXVsdH0gJHttb2R1bGVOYW1lfWA7XG4gIGNvbnN0IGVycm9yUHJlZml4ID0gYCR7Q09MT1JTLnJlZH1bRVJST1JdJHtDT0xPUlMuZGVmYXVsdH0gJHttb2R1bGVOYW1lfWA7XG4gIGNvbnN0IHJlc3VsdCA9IG5ldyBjbGFzcyB7XG4gICAgaW5pdCgpIHtcbiAgICAgIGlzVHJhY2UgPSBbXCJ0cmFjZVwiXS5pbmNsdWRlcyhfbGV2ZWwgPz8gZGVmYXVsdExldmVsKTtcbiAgICAgIGlzRGVidWcgPSBbXCJ0cmFjZVwiLCBcImRlYnVnXCJdLmluY2x1ZGVzKF9sZXZlbCA/PyBkZWZhdWx0TGV2ZWwpO1xuICAgICAgaXNJbmZvID0gW1widHJhY2VcIiwgXCJkZWJ1Z1wiLCBcImluZm9cIl0uaW5jbHVkZXMoX2xldmVsID8/IGRlZmF1bHRMZXZlbCk7XG4gICAgICBpc1dhcm5pbmcgPSBbXCJ0cmFjZVwiLCBcImRlYnVnXCIsIFwiaW5mb1wiLCBcIndhcm5cIl0uaW5jbHVkZXMoXG4gICAgICAgIF9sZXZlbCA/PyBkZWZhdWx0TGV2ZWxcbiAgICAgICk7XG4gICAgICBpc0Vycm9yID0gW1widHJhY2VcIiwgXCJkZWJ1Z1wiLCBcImluZm9cIiwgXCJ3YXJuXCIsIFwiZXJyb3JcIl0uaW5jbHVkZXMoXG4gICAgICAgIF9sZXZlbCA/PyBkZWZhdWx0TGV2ZWxcbiAgICAgICk7XG4gICAgfVxuICAgIGdldCBsb2dnZXIoKSB7XG4gICAgICByZXR1cm4gX2xvZ2dlcjtcbiAgICB9XG4gICAgc2V0IGxvZ2dlcih2YWx1ZSkge1xuICAgICAgX2xvZ2dlciA9IHZhbHVlO1xuICAgIH1cbiAgICBnZXQgbGV2ZWwoKSB7XG4gICAgICByZXR1cm4gX2xldmVsO1xuICAgIH1cbiAgICBzZXQgbGV2ZWwodmFsdWUpIHtcbiAgICAgIF9sZXZlbCA9IHZhbHVlO1xuICAgIH1cbiAgICAvLyBiaW9tZS1pZ25vcmUgbGludC9zdXNwaWNpb3VzL25vRXhwbGljaXRBbnk6IG5lZWQgYW55XG4gICAgdHJhY2UoLi4uYXJncykge1xuICAgICAgaWYgKGlzVHJhY2UpIHtcbiAgICAgICAgY29uc3QgZWxhcHNlZEluTXMgPSBgJHtDT0xPUlMubWFnZW50YX0rJHtEYXRlLm5vdygpIC0gY3JlYXRlZH1tcyR7Q09MT1JTLmRlZmF1bHR9YDtcbiAgICAgICAgbG9nZ2VyLnRyYWNlKHRyYWNlUHJlZml4LCAuLi5hcmdzLCBlbGFwc2VkSW5Ncyk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGJpb21lLWlnbm9yZSBsaW50L3N1c3BpY2lvdXMvbm9FeHBsaWNpdEFueTogbmVlZCBhbnlcbiAgICBkZWJ1ZyguLi5hcmdzKSB7XG4gICAgICBpZiAoaXNEZWJ1Zykge1xuICAgICAgICBjb25zdCBlbGFwc2VkSW5NcyA9IGAke0NPTE9SUy5tYWdlbnRhfSske0RhdGUubm93KCkgLSBjcmVhdGVkfW1zJHtDT0xPUlMuZGVmYXVsdH1gO1xuICAgICAgICBsb2dnZXIuZGVidWcoZGVidWdQcmVmaXgsIC4uLmFyZ3MsIGVsYXBzZWRJbk1zKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gYmlvbWUtaWdub3JlIGxpbnQvc3VzcGljaW91cy9ub0V4cGxpY2l0QW55OiBuZWVkIGFueVxuICAgIGluZm8oLi4uYXJncykge1xuICAgICAgaWYgKGlzSW5mbykge1xuICAgICAgICBjb25zdCBlbGFwc2VkSW5NcyA9IGAke0NPTE9SUy5tYWdlbnRhfSske0RhdGUubm93KCkgLSBjcmVhdGVkfW1zJHtDT0xPUlMuZGVmYXVsdH1gO1xuICAgICAgICBsb2dnZXIuaW5mbyhpbmZvUHJlZml4LCAuLi5hcmdzLCBlbGFwc2VkSW5Ncyk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGJpb21lLWlnbm9yZSBsaW50L3N1c3BpY2lvdXMvbm9FeHBsaWNpdEFueTogbmVlZCBhbnlcbiAgICB3YXJuKC4uLmFyZ3MpIHtcbiAgICAgIGlmIChpc1dhcm5pbmcpIHtcbiAgICAgICAgY29uc3QgZWxhcHNlZEluTXMgPSBgJHtDT0xPUlMubWFnZW50YX0rJHtEYXRlLm5vdygpIC0gY3JlYXRlZH1tcyR7Q09MT1JTLmRlZmF1bHR9YDtcbiAgICAgICAgbG9nZ2VyLndhcm4od2FyblByZWZpeCwgLi4uYXJncywgZWxhcHNlZEluTXMpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBiaW9tZS1pZ25vcmUgbGludC9zdXNwaWNpb3VzL25vRXhwbGljaXRBbnk6IG5lZWQgYW55XG4gICAgZXJyb3IoLi4uYXJncykge1xuICAgICAgaWYgKGlzRXJyb3IpIHtcbiAgICAgICAgY29uc3QgZWxhcHNlZEluTXMgPSBgJHtDT0xPUlMubWFnZW50YX0rJHtEYXRlLm5vdygpIC0gY3JlYXRlZH1tcyR7Q09MT1JTLmRlZmF1bHR9YDtcbiAgICAgICAgbG9nZ2VyLmVycm9yKGVycm9yUHJlZml4LCAuLi5hcmdzLCBlbGFwc2VkSW5Ncyk7XG4gICAgICB9XG4gICAgfVxuICB9KCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xudmFyIGFjdHVhbExvZ2dlckZhY3RvcnkgPSBjcmVhdGVEZWZhdWx0TG9nZ2VyRmFjdG9yeSgpO1xudmFyIGxvZ2dlcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xudmFyIGNyZWF0ZUxvZ2dlciA9IChtb2R1bGVOYW1lLCBsb2dMZXZlbCkgPT4ge1xuICBsZXQgd3JhcHBlZExvZ2dlciA9IGxvZ2dlcnMuZ2V0KG1vZHVsZU5hbWUpO1xuICBpZiAoIXdyYXBwZWRMb2dnZXIpIHtcbiAgICBjb25zdCBsb2dnZXIgPSBhY3R1YWxMb2dnZXJGYWN0b3J5KCk7XG4gICAgd3JhcHBlZExvZ2dlciA9IHdyYXBMb2dnZXIobG9nZ2VyLCBtb2R1bGVOYW1lLCBsb2dMZXZlbCA/PyBkZWZhdWx0TGV2ZWwpO1xuICAgIGxvZ2dlcnMuc2V0KG1vZHVsZU5hbWUsIHdyYXBwZWRMb2dnZXIpO1xuICB9IGVsc2Uge1xuICAgIHdyYXBwZWRMb2dnZXIubGV2ZWwgPSBsb2dMZXZlbCA/PyBkZWZhdWx0TGV2ZWw7XG4gIH1cbiAgd3JhcHBlZExvZ2dlci5pbml0KCk7XG4gIHJldHVybiB3cmFwcGVkTG9nZ2VyO1xufTtcbnZhciBzZXRMb2dMZXZlbCA9IChsZXZlbCkgPT4ge1xuICBkZWZhdWx0TGV2ZWwgPSBsZXZlbDtcbiAgZm9yIChjb25zdCBbbW9kdWxlTmFtZV0gb2YgQXJyYXkuZnJvbShsb2dnZXJzLmVudHJpZXMoKSkpIHtcbiAgICBsb2dnZXJzLnNldChtb2R1bGVOYW1lLCBjcmVhdGVMb2dnZXIobW9kdWxlTmFtZSwgbGV2ZWwpKTtcbiAgfVxufTtcbnZhciBzZXRMb2dnZXJGYWN0b3J5ID0gKGxvZ2dlckZhY3RvcnkpID0+IHtcbiAgYWN0dWFsTG9nZ2VyRmFjdG9yeSA9IGxvZ2dlckZhY3Rvcnk7XG4gIGZvciAoY29uc3QgW21vZHVsZU5hbWUsIGxvZ2dlcl0gb2YgQXJyYXkuZnJvbShsb2dnZXJzLmVudHJpZXMoKSkpIHtcbiAgICBsb2dnZXJzLnNldChtb2R1bGVOYW1lLCBjcmVhdGVMb2dnZXIobW9kdWxlTmFtZSwgbG9nZ2VyLmxldmVsKSk7XG4gIH1cbn07XG52YXIgbWFpbkxvZ2dlciA9IHtcbiAgY3JlYXRlU3ViTG9nZ2VyOiAobW9kdWxlTmFtZSkgPT4gY3JlYXRlTG9nZ2VyKGBIdWRkbGVXZWJDb3JlOiR7bW9kdWxlTmFtZX1gKVxufTtcblxuZXhwb3J0IHsgY3JlYXRlTG9nZ2VyLCBtYWluTG9nZ2VyLCBzZXRMb2dMZXZlbCwgc2V0TG9nZ2VyRmFjdG9yeSB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-TOCFOGTC.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-UNAM3CMB.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-UNAM3CMB.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RetryAbortError: () => (/* binding */ RetryAbortError),\n/* harmony export */   apiCallWithRetry: () => (/* binding */ apiCallWithRetry)\n/* harmony export */ });\n/* harmony import */ var _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-TOCFOGTC.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-TOCFOGTC.js\");\n\n\n// src/helpers/apiUtils.ts\nvar logger = _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_0__.mainLogger.createSubLogger(\"apiUtils\");\nvar defaultRetryConfig = {\n  maxRetries: 3,\n  initialDelay: 1e3,\n  factor: 2,\n  jitter: true\n};\nvar RetryAbortError = class extends Error {\n  constructor(message) {\n    super(message);\n    this.name = \"RetryAbortError\";\n  }\n};\nasync function apiCallWithRetry(apiCall, config = {}, abortSignal) {\n  const retryConfig = {\n    ...defaultRetryConfig,\n    ...config\n  };\n  let delay = retryConfig.initialDelay ?? defaultRetryConfig.initialDelay;\n  for (let attempt = 0; attempt <= retryConfig.maxRetries; attempt++) {\n    try {\n      if (abortSignal?.aborted) {\n        throw new RetryAbortError(\"API call aborted\");\n      }\n      return await apiCall();\n    } catch (error) {\n      if (error instanceof RetryAbortError) {\n        logger.warn(\"API call aborted\", error);\n        throw error;\n      }\n      if (attempt === retryConfig.maxRetries) {\n        logger.error(\n          `API call failed after ${retryConfig.maxRetries} retries`,\n          error\n        );\n        throw error;\n      }\n      logger.warn(`API call attempt ${attempt + 1} failed. Retrying...`, error);\n      const factor = retryConfig.factor ?? defaultRetryConfig.factor;\n      if (retryConfig.jitter) {\n        delay = Math.random() * delay * (factor ?? 2);\n      } else {\n        delay *= factor;\n      }\n      await new Promise((resolve, reject) => {\n        const timeoutId = setTimeout(resolve, delay);\n        if (abortSignal) {\n          abortSignal.addEventListener(\"abort\", () => {\n            clearTimeout(timeoutId);\n            reject(new RetryAbortError(\"API call aborted during delay\"));\n          });\n        }\n      });\n    }\n  }\n  throw new Error(\"Unexpected error: all retries exhausted\");\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstVU5BTTNDTUIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlEOztBQUVqRDtBQUNBLGFBQWEsMERBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9EO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsbUNBQW1DO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHdCQUF3QjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxhQUFhO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUU2QyIsInNvdXJjZXMiOlsid2VicGFjazovL3Bva2Vtb24tZ2FtZS1ldGhpbmRpYS0xLy4vbm9kZV9tb2R1bGVzL0BodWRkbGUwMS93ZWItY29yZS9kaXN0L2NodW5rLVVOQU0zQ01CLmpzP2U5MjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWFpbkxvZ2dlciB9IGZyb20gJy4vY2h1bmstVE9DRk9HVEMuanMnO1xuXG4vLyBzcmMvaGVscGVycy9hcGlVdGlscy50c1xudmFyIGxvZ2dlciA9IG1haW5Mb2dnZXIuY3JlYXRlU3ViTG9nZ2VyKFwiYXBpVXRpbHNcIik7XG52YXIgZGVmYXVsdFJldHJ5Q29uZmlnID0ge1xuICBtYXhSZXRyaWVzOiAzLFxuICBpbml0aWFsRGVsYXk6IDFlMyxcbiAgZmFjdG9yOiAyLFxuICBqaXR0ZXI6IHRydWVcbn07XG52YXIgUmV0cnlBYm9ydEVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSBcIlJldHJ5QWJvcnRFcnJvclwiO1xuICB9XG59O1xuYXN5bmMgZnVuY3Rpb24gYXBpQ2FsbFdpdGhSZXRyeShhcGlDYWxsLCBjb25maWcgPSB7fSwgYWJvcnRTaWduYWwpIHtcbiAgY29uc3QgcmV0cnlDb25maWcgPSB7XG4gICAgLi4uZGVmYXVsdFJldHJ5Q29uZmlnLFxuICAgIC4uLmNvbmZpZ1xuICB9O1xuICBsZXQgZGVsYXkgPSByZXRyeUNvbmZpZy5pbml0aWFsRGVsYXkgPz8gZGVmYXVsdFJldHJ5Q29uZmlnLmluaXRpYWxEZWxheTtcbiAgZm9yIChsZXQgYXR0ZW1wdCA9IDA7IGF0dGVtcHQgPD0gcmV0cnlDb25maWcubWF4UmV0cmllczsgYXR0ZW1wdCsrKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChhYm9ydFNpZ25hbD8uYWJvcnRlZCkge1xuICAgICAgICB0aHJvdyBuZXcgUmV0cnlBYm9ydEVycm9yKFwiQVBJIGNhbGwgYWJvcnRlZFwiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhd2FpdCBhcGlDYWxsKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFJldHJ5QWJvcnRFcnJvcikge1xuICAgICAgICBsb2dnZXIud2FybihcIkFQSSBjYWxsIGFib3J0ZWRcIiwgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICAgIGlmIChhdHRlbXB0ID09PSByZXRyeUNvbmZpZy5tYXhSZXRyaWVzKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcbiAgICAgICAgICBgQVBJIGNhbGwgZmFpbGVkIGFmdGVyICR7cmV0cnlDb25maWcubWF4UmV0cmllc30gcmV0cmllc2AsXG4gICAgICAgICAgZXJyb3JcbiAgICAgICAgKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgICBsb2dnZXIud2FybihgQVBJIGNhbGwgYXR0ZW1wdCAke2F0dGVtcHQgKyAxfSBmYWlsZWQuIFJldHJ5aW5nLi4uYCwgZXJyb3IpO1xuICAgICAgY29uc3QgZmFjdG9yID0gcmV0cnlDb25maWcuZmFjdG9yID8/IGRlZmF1bHRSZXRyeUNvbmZpZy5mYWN0b3I7XG4gICAgICBpZiAocmV0cnlDb25maWcuaml0dGVyKSB7XG4gICAgICAgIGRlbGF5ID0gTWF0aC5yYW5kb20oKSAqIGRlbGF5ICogKGZhY3RvciA/PyAyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlbGF5ICo9IGZhY3RvcjtcbiAgICAgIH1cbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheSk7XG4gICAgICAgIGlmIChhYm9ydFNpZ25hbCkge1xuICAgICAgICAgIGFib3J0U2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCAoKSA9PiB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICAgIHJlamVjdChuZXcgUmV0cnlBYm9ydEVycm9yKFwiQVBJIGNhbGwgYWJvcnRlZCBkdXJpbmcgZGVsYXlcIikpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBlcnJvcjogYWxsIHJldHJpZXMgZXhoYXVzdGVkXCIpO1xufVxuXG5leHBvcnQgeyBSZXRyeUFib3J0RXJyb3IsIGFwaUNhbGxXaXRoUmV0cnkgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-UNAM3CMB.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-WA3QABYS.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-WA3QABYS.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   estimateSize: () => (/* binding */ estimateSize),\n/* harmony export */   getMediaDeviceKind: () => (/* binding */ getMediaDeviceKind),\n/* harmony export */   getMediaStreamKind: () => (/* binding */ getMediaStreamKind),\n/* harmony export */   getMediaTrack: () => (/* binding */ getMediaTrack),\n/* harmony export */   isBrowser: () => (/* binding */ isBrowser),\n/* harmony export */   isNode: () => (/* binding */ isNode),\n/* harmony export */   isReactNative: () => (/* binding */ isReactNative)\n/* harmony export */ });\n// src/helpers/index.ts\nvar getMediaStreamKind = (stream) => {\n  let kind = null;\n  const tracks = stream.getTracks();\n  for (const track of tracks) {\n    if (track.kind === \"audio\") {\n      kind = \"audio\";\n      break;\n    }\n    if (track.kind === \"video\") {\n      kind = \"video\";\n      break;\n    }\n  }\n  if (!kind) {\n    throw new Error(\"Stream Kind Not Found\");\n  }\n  return kind;\n};\nvar getMediaDeviceKind = (track) => {\n  if (track.kind === \"audio\") {\n    return \"mic\";\n  }\n  if (track.kind === \"video\") {\n    const settings = track.getSettings();\n    if (settings.displaySurface) {\n      return \"screen\";\n    }\n    return \"cam\";\n  }\n  return \"cam\";\n};\nvar getMediaTrack = (data) => {\n  const { stream, kind } = data;\n  const tracks = stream.getTracks();\n  for (const track of tracks) {\n    if (track.kind === kind) {\n      return track;\n    }\n  }\n  throw new Error(\"Track Not Found\");\n};\nvar estimateSize = (obj) => {\n  const str = JSON.stringify(obj);\n  return new TextEncoder().encode(str).length;\n};\nvar isBrowser = () => typeof window !== \"undefined\";\nvar isNode = () => typeof global !== \"undefined\";\nvar isReactNative = () => typeof navigator !== \"undefined\" && navigator.product === \"ReactNative\";\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstV0EzUUFCWVMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsZUFBZTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWlIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9rZW1vbi1nYW1lLWV0aGluZGlhLTEvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstV0EzUUFCWVMuanM/MzRiNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvaGVscGVycy9pbmRleC50c1xudmFyIGdldE1lZGlhU3RyZWFtS2luZCA9IChzdHJlYW0pID0+IHtcbiAgbGV0IGtpbmQgPSBudWxsO1xuICBjb25zdCB0cmFja3MgPSBzdHJlYW0uZ2V0VHJhY2tzKCk7XG4gIGZvciAoY29uc3QgdHJhY2sgb2YgdHJhY2tzKSB7XG4gICAgaWYgKHRyYWNrLmtpbmQgPT09IFwiYXVkaW9cIikge1xuICAgICAga2luZCA9IFwiYXVkaW9cIjtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAodHJhY2sua2luZCA9PT0gXCJ2aWRlb1wiKSB7XG4gICAgICBraW5kID0gXCJ2aWRlb1wiO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGlmICgha2luZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlN0cmVhbSBLaW5kIE5vdCBGb3VuZFwiKTtcbiAgfVxuICByZXR1cm4ga2luZDtcbn07XG52YXIgZ2V0TWVkaWFEZXZpY2VLaW5kID0gKHRyYWNrKSA9PiB7XG4gIGlmICh0cmFjay5raW5kID09PSBcImF1ZGlvXCIpIHtcbiAgICByZXR1cm4gXCJtaWNcIjtcbiAgfVxuICBpZiAodHJhY2sua2luZCA9PT0gXCJ2aWRlb1wiKSB7XG4gICAgY29uc3Qgc2V0dGluZ3MgPSB0cmFjay5nZXRTZXR0aW5ncygpO1xuICAgIGlmIChzZXR0aW5ncy5kaXNwbGF5U3VyZmFjZSkge1xuICAgICAgcmV0dXJuIFwic2NyZWVuXCI7XG4gICAgfVxuICAgIHJldHVybiBcImNhbVwiO1xuICB9XG4gIHJldHVybiBcImNhbVwiO1xufTtcbnZhciBnZXRNZWRpYVRyYWNrID0gKGRhdGEpID0+IHtcbiAgY29uc3QgeyBzdHJlYW0sIGtpbmQgfSA9IGRhdGE7XG4gIGNvbnN0IHRyYWNrcyA9IHN0cmVhbS5nZXRUcmFja3MoKTtcbiAgZm9yIChjb25zdCB0cmFjayBvZiB0cmFja3MpIHtcbiAgICBpZiAodHJhY2sua2luZCA9PT0ga2luZCkge1xuICAgICAgcmV0dXJuIHRyYWNrO1xuICAgIH1cbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoXCJUcmFjayBOb3QgRm91bmRcIik7XG59O1xudmFyIGVzdGltYXRlU2l6ZSA9IChvYmopID0+IHtcbiAgY29uc3Qgc3RyID0gSlNPTi5zdHJpbmdpZnkob2JqKTtcbiAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzdHIpLmxlbmd0aDtcbn07XG52YXIgaXNCcm93c2VyID0gKCkgPT4gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIjtcbnZhciBpc05vZGUgPSAoKSA9PiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiO1xudmFyIGlzUmVhY3ROYXRpdmUgPSAoKSA9PiB0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiICYmIG5hdmlnYXRvci5wcm9kdWN0ID09PSBcIlJlYWN0TmF0aXZlXCI7XG5cbmV4cG9ydCB7IGVzdGltYXRlU2l6ZSwgZ2V0TWVkaWFEZXZpY2VLaW5kLCBnZXRNZWRpYVN0cmVhbUtpbmQsIGdldE1lZGlhVHJhY2ssIGlzQnJvd3NlciwgaXNOb2RlLCBpc1JlYWN0TmF0aXZlIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-WA3QABYS.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-WBDUVCNE.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-WBDUVCNE.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ActiveSpeakers_default: () => (/* binding */ ActiveSpeakers_default)\n/* harmony export */ });\n/* harmony import */ var _chunk_BQEIAMKZ_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-BQEIAMKZ.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-BQEIAMKZ.js\");\n/* harmony import */ var _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-TOCFOGTC.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-TOCFOGTC.js\");\n/* harmony import */ var _chunk_BW2DGP4D_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-BW2DGP4D.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-BW2DGP4D.js\");\n\n\n\n\n// src/ActiveSpeakers.ts\nvar logger = _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_1__.mainLogger.createSubLogger(\"ActiveSpeakers\");\nvar ActiveSpeakers = class extends _chunk_BW2DGP4D_js__WEBPACK_IMPORTED_MODULE_2__.EnhancedEventEmitter {\n  /**\n   * Room instance.\n   */\n  __room = _chunk_BQEIAMKZ_js__WEBPACK_IMPORTED_MODULE_0__.Room_default.getInstance();\n  /**\n   * Bot instance which has the data producer connected directly to the room bot.\n   * This is used to handle all the states of the room and its functionality.\n   */\n  __bot;\n  /**\n   * Is the notification active.\n   */\n  __active;\n  /**\n   * Is the notification active.\n   */\n  get active() {\n    return this.__active;\n  }\n  /**\n   * Maximum number of entries in the list.\n   */\n  MAX_SIZE = 20;\n  /**\n   * Size by which the active speakers list will be notified.\n   * `note: default size is 8`\n   */\n  __size;\n  /**\n   * Size by which the active speakers list will be notified.\n   */\n  get size() {\n    return this.__size;\n  }\n  /**\n   * Array of ActiveSpeakers ordered by volume.\n   */\n  __activePeerIds = [];\n  get activePeerIds() {\n    return this.__activePeerIds;\n  }\n  /**\n   * Update the number of peerIds to notify.\n   * @param size\n   */\n  updateSize = (size) => {\n    logger.info(\"\\u{1F514} Updating Active Speaker Size to\", size);\n    if (size > this.MAX_SIZE) {\n      logger.error(\n        \"\\u{1F514} Active Speaker Size cannot be greater than\",\n        this.MAX_SIZE\n      );\n      return;\n    }\n    this.__size = size;\n  };\n  /**\n   * Handle all the events emitted by the bot.\n   */\n  __handleBotEvents = () => {\n    this.__bot.on(\"active-speakers-change\", this.__handleActiveSpeakerChange);\n  };\n  /**\n   * Emit the active speakers change event.\n   * @param data - Data containing the peerIds of the active speakers.\n   */\n  __handleActiveSpeakerChange = (data) => {\n    try {\n      const { peerIds } = data;\n      this.__activePeerIds = peerIds;\n      const slicedPeerData = peerIds.slice(0, this.__size);\n      this.__room.emit(\"active-speakers-change\", {\n        peerIds: slicedPeerData ?? [],\n        dominantSpeaker: peerIds?.[0] ?? \"\"\n      });\n    } catch (error) {\n      logger.error(\"Error: Handling New Active Speakers Notification\", error);\n      logger.error(error);\n    }\n  };\n  constructor(data) {\n    super();\n    this.__bot = data.bot;\n    this.__size = data?.size ?? 8;\n    this.__active = true;\n    this.__handleBotEvents();\n  }\n  /**\n   * Close the active speakers instance.\n   */\n  close = () => {\n    this.__active = false;\n    this.__bot.off(\"active-speakers-change\", this.__handleActiveSpeakerChange);\n  };\n};\nvar ActiveSpeakers_default = ActiveSpeakers;\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstV0JEVVZDTkUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFtRDtBQUNGO0FBQ1U7O0FBRTNEO0FBQ0EsYUFBYSwwREFBVTtBQUN2QixtQ0FBbUMsb0VBQW9CO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLFdBQVcsNERBQVk7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLE9BQU87QUFDM0I7QUFDQTtBQUNBLFlBQVksT0FBTztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLFVBQVU7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFa0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2tlbW9uLWdhbWUtZXRoaW5kaWEtMS8uL25vZGVfbW9kdWxlcy9AaHVkZGxlMDEvd2ViLWNvcmUvZGlzdC9jaHVuay1XQkRVVkNORS5qcz8wZjJiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvb21fZGVmYXVsdCB9IGZyb20gJy4vY2h1bmstQlFFSUFNS1ouanMnO1xuaW1wb3J0IHsgbWFpbkxvZ2dlciB9IGZyb20gJy4vY2h1bmstVE9DRk9HVEMuanMnO1xuaW1wb3J0IHsgRW5oYW5jZWRFdmVudEVtaXR0ZXIgfSBmcm9tICcuL2NodW5rLUJXMkRHUDRELmpzJztcblxuLy8gc3JjL0FjdGl2ZVNwZWFrZXJzLnRzXG52YXIgbG9nZ2VyID0gbWFpbkxvZ2dlci5jcmVhdGVTdWJMb2dnZXIoXCJBY3RpdmVTcGVha2Vyc1wiKTtcbnZhciBBY3RpdmVTcGVha2VycyA9IGNsYXNzIGV4dGVuZHMgRW5oYW5jZWRFdmVudEVtaXR0ZXIge1xuICAvKipcbiAgICogUm9vbSBpbnN0YW5jZS5cbiAgICovXG4gIF9fcm9vbSA9IFJvb21fZGVmYXVsdC5nZXRJbnN0YW5jZSgpO1xuICAvKipcbiAgICogQm90IGluc3RhbmNlIHdoaWNoIGhhcyB0aGUgZGF0YSBwcm9kdWNlciBjb25uZWN0ZWQgZGlyZWN0bHkgdG8gdGhlIHJvb20gYm90LlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gaGFuZGxlIGFsbCB0aGUgc3RhdGVzIG9mIHRoZSByb29tIGFuZCBpdHMgZnVuY3Rpb25hbGl0eS5cbiAgICovXG4gIF9fYm90O1xuICAvKipcbiAgICogSXMgdGhlIG5vdGlmaWNhdGlvbiBhY3RpdmUuXG4gICAqL1xuICBfX2FjdGl2ZTtcbiAgLyoqXG4gICAqIElzIHRoZSBub3RpZmljYXRpb24gYWN0aXZlLlxuICAgKi9cbiAgZ2V0IGFjdGl2ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fX2FjdGl2ZTtcbiAgfVxuICAvKipcbiAgICogTWF4aW11bSBudW1iZXIgb2YgZW50cmllcyBpbiB0aGUgbGlzdC5cbiAgICovXG4gIE1BWF9TSVpFID0gMjA7XG4gIC8qKlxuICAgKiBTaXplIGJ5IHdoaWNoIHRoZSBhY3RpdmUgc3BlYWtlcnMgbGlzdCB3aWxsIGJlIG5vdGlmaWVkLlxuICAgKiBgbm90ZTogZGVmYXVsdCBzaXplIGlzIDhgXG4gICAqL1xuICBfX3NpemU7XG4gIC8qKlxuICAgKiBTaXplIGJ5IHdoaWNoIHRoZSBhY3RpdmUgc3BlYWtlcnMgbGlzdCB3aWxsIGJlIG5vdGlmaWVkLlxuICAgKi9cbiAgZ2V0IHNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX19zaXplO1xuICB9XG4gIC8qKlxuICAgKiBBcnJheSBvZiBBY3RpdmVTcGVha2VycyBvcmRlcmVkIGJ5IHZvbHVtZS5cbiAgICovXG4gIF9fYWN0aXZlUGVlcklkcyA9IFtdO1xuICBnZXQgYWN0aXZlUGVlcklkcygpIHtcbiAgICByZXR1cm4gdGhpcy5fX2FjdGl2ZVBlZXJJZHM7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgbnVtYmVyIG9mIHBlZXJJZHMgdG8gbm90aWZ5LlxuICAgKiBAcGFyYW0gc2l6ZVxuICAgKi9cbiAgdXBkYXRlU2l6ZSA9IChzaXplKSA9PiB7XG4gICAgbG9nZ2VyLmluZm8oXCJcXHV7MUY1MTR9IFVwZGF0aW5nIEFjdGl2ZSBTcGVha2VyIFNpemUgdG9cIiwgc2l6ZSk7XG4gICAgaWYgKHNpemUgPiB0aGlzLk1BWF9TSVpFKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgIFwiXFx1ezFGNTE0fSBBY3RpdmUgU3BlYWtlciBTaXplIGNhbm5vdCBiZSBncmVhdGVyIHRoYW5cIixcbiAgICAgICAgdGhpcy5NQVhfU0laRVxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fX3NpemUgPSBzaXplO1xuICB9O1xuICAvKipcbiAgICogSGFuZGxlIGFsbCB0aGUgZXZlbnRzIGVtaXR0ZWQgYnkgdGhlIGJvdC5cbiAgICovXG4gIF9faGFuZGxlQm90RXZlbnRzID0gKCkgPT4ge1xuICAgIHRoaXMuX19ib3Qub24oXCJhY3RpdmUtc3BlYWtlcnMtY2hhbmdlXCIsIHRoaXMuX19oYW5kbGVBY3RpdmVTcGVha2VyQ2hhbmdlKTtcbiAgfTtcbiAgLyoqXG4gICAqIEVtaXQgdGhlIGFjdGl2ZSBzcGVha2VycyBjaGFuZ2UgZXZlbnQuXG4gICAqIEBwYXJhbSBkYXRhIC0gRGF0YSBjb250YWluaW5nIHRoZSBwZWVySWRzIG9mIHRoZSBhY3RpdmUgc3BlYWtlcnMuXG4gICAqL1xuICBfX2hhbmRsZUFjdGl2ZVNwZWFrZXJDaGFuZ2UgPSAoZGF0YSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHBlZXJJZHMgfSA9IGRhdGE7XG4gICAgICB0aGlzLl9fYWN0aXZlUGVlcklkcyA9IHBlZXJJZHM7XG4gICAgICBjb25zdCBzbGljZWRQZWVyRGF0YSA9IHBlZXJJZHMuc2xpY2UoMCwgdGhpcy5fX3NpemUpO1xuICAgICAgdGhpcy5fX3Jvb20uZW1pdChcImFjdGl2ZS1zcGVha2Vycy1jaGFuZ2VcIiwge1xuICAgICAgICBwZWVySWRzOiBzbGljZWRQZWVyRGF0YSA/PyBbXSxcbiAgICAgICAgZG9taW5hbnRTcGVha2VyOiBwZWVySWRzPy5bMF0gPz8gXCJcIlxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIkVycm9yOiBIYW5kbGluZyBOZXcgQWN0aXZlIFNwZWFrZXJzIE5vdGlmaWNhdGlvblwiLCBlcnJvcik7XG4gICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfTtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fX2JvdCA9IGRhdGEuYm90O1xuICAgIHRoaXMuX19zaXplID0gZGF0YT8uc2l6ZSA/PyA4O1xuICAgIHRoaXMuX19hY3RpdmUgPSB0cnVlO1xuICAgIHRoaXMuX19oYW5kbGVCb3RFdmVudHMoKTtcbiAgfVxuICAvKipcbiAgICogQ2xvc2UgdGhlIGFjdGl2ZSBzcGVha2VycyBpbnN0YW5jZS5cbiAgICovXG4gIGNsb3NlID0gKCkgPT4ge1xuICAgIHRoaXMuX19hY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLl9fYm90Lm9mZihcImFjdGl2ZS1zcGVha2Vycy1jaGFuZ2VcIiwgdGhpcy5fX2hhbmRsZUFjdGl2ZVNwZWFrZXJDaGFuZ2UpO1xuICB9O1xufTtcbnZhciBBY3RpdmVTcGVha2Vyc19kZWZhdWx0ID0gQWN0aXZlU3BlYWtlcnM7XG5cbmV4cG9ydCB7IEFjdGl2ZVNwZWFrZXJzX2RlZmF1bHQgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-WBDUVCNE.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/chunk-YROZGIK5.js":
/*!****************************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/chunk-YROZGIK5.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Consumer_default: () => (/* binding */ Consumer_default)\n/* harmony export */ });\n/* harmony import */ var _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-TOCFOGTC.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-TOCFOGTC.js\");\n/* harmony import */ var _chunk_BW2DGP4D_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-BW2DGP4D.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-BW2DGP4D.js\");\n\n\n\n// src/Consumer.ts\nvar logger = _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_0__.mainLogger.createSubLogger(\"Consumer\");\nvar Consumer = class _Consumer extends _chunk_BW2DGP4D_js__WEBPACK_IMPORTED_MODULE_1__.EnhancedEventEmitter {\n  /**\n   * ProducerId of the Consumer, this is the id of the Media Entity which is responsible for producing the media in the room.\n   */\n  producerId;\n  /**\n   * PeerId of the Producer, this is the peerId of the Peer which is responsible for producing the media in the room.\n   */\n  producerPeerId;\n  /**\n   * Label of the Consumer, this is the label of the Media Entity which is responsible for producing the media in the room.\n   */\n  label;\n  /**\n   * Flag to check if the Producer which is being consumed by the Consumer is paused.\n   * @remarks If the Producer is paused, the Consumer will not be able to consume the media.\n   * @default false\n   */\n  __producerPaused = false;\n  /**\n   * Flag to check if the Consumer is consuming a media, if `true` then the Consumer is consuming a media.\n   * Consuming Means the incoming media stream is being consumed by the Remote Peer if the Remote Peer is Producing any media.\n   * @default false\n   */\n  __consuming = false;\n  /**\n   * Flag to check if the Consumer is consuming a media, if `true` then the Consumer is consuming a media.\n   *\n   * @default false\n   *\n   * @remarks\n   * There are two ways a Peer can Consume any media produced in the room.\n   * - Automatically consume the media streams of the remote peers by setting the `autoConsume` flag to `true` in the `Room`.\n   * - Using the `consume` function inside the `LocalPeer` instance. `localPeer.consume({ peerId, label: \"video\", appData: {} });`\n   */\n  get consuming() {\n    return this.__consuming;\n  }\n  /**\n   * Flag to check if the Producer which is being consumed by the Consumer is paused.\n   * @remarks If the Producer is paused, the Consumer will not be able to consume the media.\n   * @default false\n   */\n  get producerPaused() {\n    return this.__producerPaused;\n  }\n  /**\n   * mediasoupConsumer instance, this is the instance of the mediasoupConsumer which is responsible for consuming the media in the room.\n   * @remarks This is a private property and should not be accessed directly.\n   *\n   * Every Consumer is created without a mediasoupConsumer, when the peer starts to consume the media, the mediasoupConsumer is set.\n   */\n  #mediasoupConsumer = null;\n  /**\n   * Getter for the id for the mediaSoupConsumer, which is also the id of the Consumer for the RemotePeer.\n   */\n  get id() {\n    return this.#mediasoupConsumer?.id;\n  }\n  /**\n   *\n   * @param consumer Sets the mediasoupConsumer for the Consumer\n   */\n  setMediaSoupConsumer(consumer) {\n    if (this.consuming) {\n      throw new Error(\"Consumer is already consuming\");\n    }\n    if (this.#mediasoupConsumer) {\n      throw new Error(\"Consumer already has a mediasoupConsumer\");\n    }\n    this.#mediasoupConsumer = consumer;\n  }\n  /**\n   * Getter for the mediasoupConsumer id, which is also the id of the Consumer for the RemotePeer. it is only available when the Consumer is consuming a media.\n   *\n   * @remarks\n   * There are two ways a Peer can Consume any media produced in the room.\n   * - Automatically consume the media streams of the remote peers by setting the `autoConsume` flag to `true` in the `Room`.\n   * - Using the `consume` function inside the `LocalPeer` instance. `localPeer.consume({ peerId, label: \"video\", appData: {} });`\n   */\n  get consumerId() {\n    return this.#mediasoupConsumer?.id;\n  }\n  /**\n   * Get the Track of the Consumer, it is only available when the Consumer is consuming a media.\n   *\n   * @remarks\n   * There are two ways a Peer can Consume any media produced in the room.\n   * - Automatically consume the media streams of the remote peers by setting the `autoConsume` flag to `true` in the `Room`.\n   * - Using the `consume` function inside the `LocalPeer` instance. `localPeer.consume({ peerId, label: \"video\", appData: {} });`\n   */\n  get track() {\n    return this.#mediasoupConsumer?.track;\n  }\n  /**\n   * Get the kind of the Consumer, it is only available when the Consumer is consuming a media.\n   *\n   * @remarks\n   * There are two ways a Peer can Consume any media produced in the room.\n   * - Automatically consume the media streams of the remote peers by setting the `autoConsume` flag to `true` in the `Room`.\n   * - Using the `consume` function inside the `LocalPeer` instance. `localPeer.consume({ peerId, label: \"video\", appData: {} });`\n   */\n  get kind() {\n    return this.#mediasoupConsumer?.kind;\n  }\n  /**\n   * If the Consumer is paused, it is only available when the Consumer is consuming a media.\n   *\n   * if paused the user is not consuming any media for the given producerId.\n   */\n  get paused() {\n    return this.#mediasoupConsumer?.paused;\n  }\n  /**\n   * AppData of the Consumer, it is only available when the Consumer is consuming a media.\n   */\n  get appData() {\n    return this.#mediasoupConsumer?.appData;\n  }\n  /**\n   * State of a Consumer is defined by the following:\n   * - `playable` - The Consumer is ready to play the media.\n   * - `unavailable` - The Consumer is not available to play the media. This can happen when the Consumer is closed or paused.\n   * - `paused` - The Consumer is paused and is not playing the media.\n   * - `available` - The Consumer is available to play the media. Peer can consume the media by using `localPeer.consume({ peerId, label: \"video\", appData: {} });` after which the state will change to `playable`.\n   */\n  get state() {\n    if (this?.consuming) return \"playable\";\n    if (this?.paused) return \"paused\";\n    return \"available\";\n  }\n  /**\n   * Get the stats of the Consumer, it is only available when the Consumer is consuming a media.\n   * It generates the stats for the Consumer using the `getStats` method of the mediasoupConsumer.\n   * @returns - RTCStatsReport | null\n   */\n  getStats = async () => {\n    const stats = await this.#mediasoupConsumer?.getStats();\n    return stats;\n  };\n  /**\n   * Resume the consumer, if the state of the consumer is `paused`.\n   * @returns - Returns `true` if the consumer is resumed, `false` if the consumer is not resumed.\n   */\n  resume = () => {\n    this.#mediasoupConsumer?.resume();\n    this.__consuming = true;\n    return true;\n  };\n  /**\n   * Pause the consumer, if the state of the consumer is `playable`.\n   *\n   * @returns - Returns `true` if the consumer is paused, `false` if the consumer is not paused.\n   */\n  pause = () => {\n    this.#mediasoupConsumer?.pause();\n    this.__consuming = false;\n    return true;\n  };\n  /**\n   * Removes all the eventListeners attached to the Consumer.\n   */\n  removeListeners = () => {\n    this.removeAllListeners();\n  };\n  /**\n   * Creates a Consumer instance. This is a static method and should be called using `Consumer.create({ producerPeerId, producerId, label })`.\n   */\n  static create = (data) => {\n    try {\n      const consumer = new _Consumer(data);\n      return consumer;\n    } catch (error) {\n      logger.error(error);\n      throw new Error(\"\\u274C Error creating Consumer\");\n    }\n  };\n  close = () => {\n    try {\n      this.#mediasoupConsumer?.close();\n      this.__consuming = false;\n      this.emit(\"closed\");\n      this.removeAllListeners();\n    } catch (error) {\n      logger.error(\"\\u274C Error Closing Consumer\");\n      logger.error({\n        consumerId: this.consumerId,\n        producerId: this.producerId\n      });\n    }\n  };\n  constructor(data) {\n    super();\n    this.producerPeerId = data.producerPeerId;\n    this.producerId = data.producerId;\n    this.label = data.label;\n    this.__producerPaused = data.producerPaused ?? false;\n  }\n};\nvar Consumer_default = Consumer;\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvY2h1bmstWVJPWkdJSzUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlEO0FBQ1U7O0FBRTNEO0FBQ0EsYUFBYSwwREFBVTtBQUN2Qix1Q0FBdUMsb0VBQW9CO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwRkFBMEYscUNBQXFDLEVBQUU7QUFDakk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBGQUEwRixxQ0FBcUMsRUFBRTtBQUNqSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBGQUEwRixxQ0FBcUMsRUFBRTtBQUNqSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBGQUEwRixxQ0FBcUMsRUFBRTtBQUNqSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkhBQTJILHFDQUFxQyxFQUFFO0FBQ2xLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3R0FBd0csbUNBQW1DO0FBQzNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFNEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2tlbW9uLWdhbWUtZXRoaW5kaWEtMS8uL25vZGVfbW9kdWxlcy9AaHVkZGxlMDEvd2ViLWNvcmUvZGlzdC9jaHVuay1ZUk9aR0lLNS5qcz82ZDM4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1haW5Mb2dnZXIgfSBmcm9tICcuL2NodW5rLVRPQ0ZPR1RDLmpzJztcbmltcG9ydCB7IEVuaGFuY2VkRXZlbnRFbWl0dGVyIH0gZnJvbSAnLi9jaHVuay1CVzJER1A0RC5qcyc7XG5cbi8vIHNyYy9Db25zdW1lci50c1xudmFyIGxvZ2dlciA9IG1haW5Mb2dnZXIuY3JlYXRlU3ViTG9nZ2VyKFwiQ29uc3VtZXJcIik7XG52YXIgQ29uc3VtZXIgPSBjbGFzcyBfQ29uc3VtZXIgZXh0ZW5kcyBFbmhhbmNlZEV2ZW50RW1pdHRlciB7XG4gIC8qKlxuICAgKiBQcm9kdWNlcklkIG9mIHRoZSBDb25zdW1lciwgdGhpcyBpcyB0aGUgaWQgb2YgdGhlIE1lZGlhIEVudGl0eSB3aGljaCBpcyByZXNwb25zaWJsZSBmb3IgcHJvZHVjaW5nIHRoZSBtZWRpYSBpbiB0aGUgcm9vbS5cbiAgICovXG4gIHByb2R1Y2VySWQ7XG4gIC8qKlxuICAgKiBQZWVySWQgb2YgdGhlIFByb2R1Y2VyLCB0aGlzIGlzIHRoZSBwZWVySWQgb2YgdGhlIFBlZXIgd2hpY2ggaXMgcmVzcG9uc2libGUgZm9yIHByb2R1Y2luZyB0aGUgbWVkaWEgaW4gdGhlIHJvb20uXG4gICAqL1xuICBwcm9kdWNlclBlZXJJZDtcbiAgLyoqXG4gICAqIExhYmVsIG9mIHRoZSBDb25zdW1lciwgdGhpcyBpcyB0aGUgbGFiZWwgb2YgdGhlIE1lZGlhIEVudGl0eSB3aGljaCBpcyByZXNwb25zaWJsZSBmb3IgcHJvZHVjaW5nIHRoZSBtZWRpYSBpbiB0aGUgcm9vbS5cbiAgICovXG4gIGxhYmVsO1xuICAvKipcbiAgICogRmxhZyB0byBjaGVjayBpZiB0aGUgUHJvZHVjZXIgd2hpY2ggaXMgYmVpbmcgY29uc3VtZWQgYnkgdGhlIENvbnN1bWVyIGlzIHBhdXNlZC5cbiAgICogQHJlbWFya3MgSWYgdGhlIFByb2R1Y2VyIGlzIHBhdXNlZCwgdGhlIENvbnN1bWVyIHdpbGwgbm90IGJlIGFibGUgdG8gY29uc3VtZSB0aGUgbWVkaWEuXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICBfX3Byb2R1Y2VyUGF1c2VkID0gZmFsc2U7XG4gIC8qKlxuICAgKiBGbGFnIHRvIGNoZWNrIGlmIHRoZSBDb25zdW1lciBpcyBjb25zdW1pbmcgYSBtZWRpYSwgaWYgYHRydWVgIHRoZW4gdGhlIENvbnN1bWVyIGlzIGNvbnN1bWluZyBhIG1lZGlhLlxuICAgKiBDb25zdW1pbmcgTWVhbnMgdGhlIGluY29taW5nIG1lZGlhIHN0cmVhbSBpcyBiZWluZyBjb25zdW1lZCBieSB0aGUgUmVtb3RlIFBlZXIgaWYgdGhlIFJlbW90ZSBQZWVyIGlzIFByb2R1Y2luZyBhbnkgbWVkaWEuXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICBfX2NvbnN1bWluZyA9IGZhbHNlO1xuICAvKipcbiAgICogRmxhZyB0byBjaGVjayBpZiB0aGUgQ29uc3VtZXIgaXMgY29uc3VtaW5nIGEgbWVkaWEsIGlmIGB0cnVlYCB0aGVuIHRoZSBDb25zdW1lciBpcyBjb25zdW1pbmcgYSBtZWRpYS5cbiAgICpcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICpcbiAgICogQHJlbWFya3NcbiAgICogVGhlcmUgYXJlIHR3byB3YXlzIGEgUGVlciBjYW4gQ29uc3VtZSBhbnkgbWVkaWEgcHJvZHVjZWQgaW4gdGhlIHJvb20uXG4gICAqIC0gQXV0b21hdGljYWxseSBjb25zdW1lIHRoZSBtZWRpYSBzdHJlYW1zIG9mIHRoZSByZW1vdGUgcGVlcnMgYnkgc2V0dGluZyB0aGUgYGF1dG9Db25zdW1lYCBmbGFnIHRvIGB0cnVlYCBpbiB0aGUgYFJvb21gLlxuICAgKiAtIFVzaW5nIHRoZSBgY29uc3VtZWAgZnVuY3Rpb24gaW5zaWRlIHRoZSBgTG9jYWxQZWVyYCBpbnN0YW5jZS4gYGxvY2FsUGVlci5jb25zdW1lKHsgcGVlcklkLCBsYWJlbDogXCJ2aWRlb1wiLCBhcHBEYXRhOiB7fSB9KTtgXG4gICAqL1xuICBnZXQgY29uc3VtaW5nKCkge1xuICAgIHJldHVybiB0aGlzLl9fY29uc3VtaW5nO1xuICB9XG4gIC8qKlxuICAgKiBGbGFnIHRvIGNoZWNrIGlmIHRoZSBQcm9kdWNlciB3aGljaCBpcyBiZWluZyBjb25zdW1lZCBieSB0aGUgQ29uc3VtZXIgaXMgcGF1c2VkLlxuICAgKiBAcmVtYXJrcyBJZiB0aGUgUHJvZHVjZXIgaXMgcGF1c2VkLCB0aGUgQ29uc3VtZXIgd2lsbCBub3QgYmUgYWJsZSB0byBjb25zdW1lIHRoZSBtZWRpYS5cbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIGdldCBwcm9kdWNlclBhdXNlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fX3Byb2R1Y2VyUGF1c2VkO1xuICB9XG4gIC8qKlxuICAgKiBtZWRpYXNvdXBDb25zdW1lciBpbnN0YW5jZSwgdGhpcyBpcyB0aGUgaW5zdGFuY2Ugb2YgdGhlIG1lZGlhc291cENvbnN1bWVyIHdoaWNoIGlzIHJlc3BvbnNpYmxlIGZvciBjb25zdW1pbmcgdGhlIG1lZGlhIGluIHRoZSByb29tLlxuICAgKiBAcmVtYXJrcyBUaGlzIGlzIGEgcHJpdmF0ZSBwcm9wZXJ0eSBhbmQgc2hvdWxkIG5vdCBiZSBhY2Nlc3NlZCBkaXJlY3RseS5cbiAgICpcbiAgICogRXZlcnkgQ29uc3VtZXIgaXMgY3JlYXRlZCB3aXRob3V0IGEgbWVkaWFzb3VwQ29uc3VtZXIsIHdoZW4gdGhlIHBlZXIgc3RhcnRzIHRvIGNvbnN1bWUgdGhlIG1lZGlhLCB0aGUgbWVkaWFzb3VwQ29uc3VtZXIgaXMgc2V0LlxuICAgKi9cbiAgI21lZGlhc291cENvbnN1bWVyID0gbnVsbDtcbiAgLyoqXG4gICAqIEdldHRlciBmb3IgdGhlIGlkIGZvciB0aGUgbWVkaWFTb3VwQ29uc3VtZXIsIHdoaWNoIGlzIGFsc28gdGhlIGlkIG9mIHRoZSBDb25zdW1lciBmb3IgdGhlIFJlbW90ZVBlZXIuXG4gICAqL1xuICBnZXQgaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuI21lZGlhc291cENvbnN1bWVyPy5pZDtcbiAgfVxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIGNvbnN1bWVyIFNldHMgdGhlIG1lZGlhc291cENvbnN1bWVyIGZvciB0aGUgQ29uc3VtZXJcbiAgICovXG4gIHNldE1lZGlhU291cENvbnN1bWVyKGNvbnN1bWVyKSB7XG4gICAgaWYgKHRoaXMuY29uc3VtaW5nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb25zdW1lciBpcyBhbHJlYWR5IGNvbnN1bWluZ1wiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuI21lZGlhc291cENvbnN1bWVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb25zdW1lciBhbHJlYWR5IGhhcyBhIG1lZGlhc291cENvbnN1bWVyXCIpO1xuICAgIH1cbiAgICB0aGlzLiNtZWRpYXNvdXBDb25zdW1lciA9IGNvbnN1bWVyO1xuICB9XG4gIC8qKlxuICAgKiBHZXR0ZXIgZm9yIHRoZSBtZWRpYXNvdXBDb25zdW1lciBpZCwgd2hpY2ggaXMgYWxzbyB0aGUgaWQgb2YgdGhlIENvbnN1bWVyIGZvciB0aGUgUmVtb3RlUGVlci4gaXQgaXMgb25seSBhdmFpbGFibGUgd2hlbiB0aGUgQ29uc3VtZXIgaXMgY29uc3VtaW5nIGEgbWVkaWEuXG4gICAqXG4gICAqIEByZW1hcmtzXG4gICAqIFRoZXJlIGFyZSB0d28gd2F5cyBhIFBlZXIgY2FuIENvbnN1bWUgYW55IG1lZGlhIHByb2R1Y2VkIGluIHRoZSByb29tLlxuICAgKiAtIEF1dG9tYXRpY2FsbHkgY29uc3VtZSB0aGUgbWVkaWEgc3RyZWFtcyBvZiB0aGUgcmVtb3RlIHBlZXJzIGJ5IHNldHRpbmcgdGhlIGBhdXRvQ29uc3VtZWAgZmxhZyB0byBgdHJ1ZWAgaW4gdGhlIGBSb29tYC5cbiAgICogLSBVc2luZyB0aGUgYGNvbnN1bWVgIGZ1bmN0aW9uIGluc2lkZSB0aGUgYExvY2FsUGVlcmAgaW5zdGFuY2UuIGBsb2NhbFBlZXIuY29uc3VtZSh7IHBlZXJJZCwgbGFiZWw6IFwidmlkZW9cIiwgYXBwRGF0YToge30gfSk7YFxuICAgKi9cbiAgZ2V0IGNvbnN1bWVySWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuI21lZGlhc291cENvbnN1bWVyPy5pZDtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBUcmFjayBvZiB0aGUgQ29uc3VtZXIsIGl0IGlzIG9ubHkgYXZhaWxhYmxlIHdoZW4gdGhlIENvbnN1bWVyIGlzIGNvbnN1bWluZyBhIG1lZGlhLlxuICAgKlxuICAgKiBAcmVtYXJrc1xuICAgKiBUaGVyZSBhcmUgdHdvIHdheXMgYSBQZWVyIGNhbiBDb25zdW1lIGFueSBtZWRpYSBwcm9kdWNlZCBpbiB0aGUgcm9vbS5cbiAgICogLSBBdXRvbWF0aWNhbGx5IGNvbnN1bWUgdGhlIG1lZGlhIHN0cmVhbXMgb2YgdGhlIHJlbW90ZSBwZWVycyBieSBzZXR0aW5nIHRoZSBgYXV0b0NvbnN1bWVgIGZsYWcgdG8gYHRydWVgIGluIHRoZSBgUm9vbWAuXG4gICAqIC0gVXNpbmcgdGhlIGBjb25zdW1lYCBmdW5jdGlvbiBpbnNpZGUgdGhlIGBMb2NhbFBlZXJgIGluc3RhbmNlLiBgbG9jYWxQZWVyLmNvbnN1bWUoeyBwZWVySWQsIGxhYmVsOiBcInZpZGVvXCIsIGFwcERhdGE6IHt9IH0pO2BcbiAgICovXG4gIGdldCB0cmFjaygpIHtcbiAgICByZXR1cm4gdGhpcy4jbWVkaWFzb3VwQ29uc3VtZXI/LnRyYWNrO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGtpbmQgb2YgdGhlIENvbnN1bWVyLCBpdCBpcyBvbmx5IGF2YWlsYWJsZSB3aGVuIHRoZSBDb25zdW1lciBpcyBjb25zdW1pbmcgYSBtZWRpYS5cbiAgICpcbiAgICogQHJlbWFya3NcbiAgICogVGhlcmUgYXJlIHR3byB3YXlzIGEgUGVlciBjYW4gQ29uc3VtZSBhbnkgbWVkaWEgcHJvZHVjZWQgaW4gdGhlIHJvb20uXG4gICAqIC0gQXV0b21hdGljYWxseSBjb25zdW1lIHRoZSBtZWRpYSBzdHJlYW1zIG9mIHRoZSByZW1vdGUgcGVlcnMgYnkgc2V0dGluZyB0aGUgYGF1dG9Db25zdW1lYCBmbGFnIHRvIGB0cnVlYCBpbiB0aGUgYFJvb21gLlxuICAgKiAtIFVzaW5nIHRoZSBgY29uc3VtZWAgZnVuY3Rpb24gaW5zaWRlIHRoZSBgTG9jYWxQZWVyYCBpbnN0YW5jZS4gYGxvY2FsUGVlci5jb25zdW1lKHsgcGVlcklkLCBsYWJlbDogXCJ2aWRlb1wiLCBhcHBEYXRhOiB7fSB9KTtgXG4gICAqL1xuICBnZXQga2luZCgpIHtcbiAgICByZXR1cm4gdGhpcy4jbWVkaWFzb3VwQ29uc3VtZXI/LmtpbmQ7XG4gIH1cbiAgLyoqXG4gICAqIElmIHRoZSBDb25zdW1lciBpcyBwYXVzZWQsIGl0IGlzIG9ubHkgYXZhaWxhYmxlIHdoZW4gdGhlIENvbnN1bWVyIGlzIGNvbnN1bWluZyBhIG1lZGlhLlxuICAgKlxuICAgKiBpZiBwYXVzZWQgdGhlIHVzZXIgaXMgbm90IGNvbnN1bWluZyBhbnkgbWVkaWEgZm9yIHRoZSBnaXZlbiBwcm9kdWNlcklkLlxuICAgKi9cbiAgZ2V0IHBhdXNlZCgpIHtcbiAgICByZXR1cm4gdGhpcy4jbWVkaWFzb3VwQ29uc3VtZXI/LnBhdXNlZDtcbiAgfVxuICAvKipcbiAgICogQXBwRGF0YSBvZiB0aGUgQ29uc3VtZXIsIGl0IGlzIG9ubHkgYXZhaWxhYmxlIHdoZW4gdGhlIENvbnN1bWVyIGlzIGNvbnN1bWluZyBhIG1lZGlhLlxuICAgKi9cbiAgZ2V0IGFwcERhdGEoKSB7XG4gICAgcmV0dXJuIHRoaXMuI21lZGlhc291cENvbnN1bWVyPy5hcHBEYXRhO1xuICB9XG4gIC8qKlxuICAgKiBTdGF0ZSBvZiBhIENvbnN1bWVyIGlzIGRlZmluZWQgYnkgdGhlIGZvbGxvd2luZzpcbiAgICogLSBgcGxheWFibGVgIC0gVGhlIENvbnN1bWVyIGlzIHJlYWR5IHRvIHBsYXkgdGhlIG1lZGlhLlxuICAgKiAtIGB1bmF2YWlsYWJsZWAgLSBUaGUgQ29uc3VtZXIgaXMgbm90IGF2YWlsYWJsZSB0byBwbGF5IHRoZSBtZWRpYS4gVGhpcyBjYW4gaGFwcGVuIHdoZW4gdGhlIENvbnN1bWVyIGlzIGNsb3NlZCBvciBwYXVzZWQuXG4gICAqIC0gYHBhdXNlZGAgLSBUaGUgQ29uc3VtZXIgaXMgcGF1c2VkIGFuZCBpcyBub3QgcGxheWluZyB0aGUgbWVkaWEuXG4gICAqIC0gYGF2YWlsYWJsZWAgLSBUaGUgQ29uc3VtZXIgaXMgYXZhaWxhYmxlIHRvIHBsYXkgdGhlIG1lZGlhLiBQZWVyIGNhbiBjb25zdW1lIHRoZSBtZWRpYSBieSB1c2luZyBgbG9jYWxQZWVyLmNvbnN1bWUoeyBwZWVySWQsIGxhYmVsOiBcInZpZGVvXCIsIGFwcERhdGE6IHt9IH0pO2AgYWZ0ZXIgd2hpY2ggdGhlIHN0YXRlIHdpbGwgY2hhbmdlIHRvIGBwbGF5YWJsZWAuXG4gICAqL1xuICBnZXQgc3RhdGUoKSB7XG4gICAgaWYgKHRoaXM/LmNvbnN1bWluZykgcmV0dXJuIFwicGxheWFibGVcIjtcbiAgICBpZiAodGhpcz8ucGF1c2VkKSByZXR1cm4gXCJwYXVzZWRcIjtcbiAgICByZXR1cm4gXCJhdmFpbGFibGVcIjtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBzdGF0cyBvZiB0aGUgQ29uc3VtZXIsIGl0IGlzIG9ubHkgYXZhaWxhYmxlIHdoZW4gdGhlIENvbnN1bWVyIGlzIGNvbnN1bWluZyBhIG1lZGlhLlxuICAgKiBJdCBnZW5lcmF0ZXMgdGhlIHN0YXRzIGZvciB0aGUgQ29uc3VtZXIgdXNpbmcgdGhlIGBnZXRTdGF0c2AgbWV0aG9kIG9mIHRoZSBtZWRpYXNvdXBDb25zdW1lci5cbiAgICogQHJldHVybnMgLSBSVENTdGF0c1JlcG9ydCB8IG51bGxcbiAgICovXG4gIGdldFN0YXRzID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgdGhpcy4jbWVkaWFzb3VwQ29uc3VtZXI/LmdldFN0YXRzKCk7XG4gICAgcmV0dXJuIHN0YXRzO1xuICB9O1xuICAvKipcbiAgICogUmVzdW1lIHRoZSBjb25zdW1lciwgaWYgdGhlIHN0YXRlIG9mIHRoZSBjb25zdW1lciBpcyBgcGF1c2VkYC5cbiAgICogQHJldHVybnMgLSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgY29uc3VtZXIgaXMgcmVzdW1lZCwgYGZhbHNlYCBpZiB0aGUgY29uc3VtZXIgaXMgbm90IHJlc3VtZWQuXG4gICAqL1xuICByZXN1bWUgPSAoKSA9PiB7XG4gICAgdGhpcy4jbWVkaWFzb3VwQ29uc3VtZXI/LnJlc3VtZSgpO1xuICAgIHRoaXMuX19jb25zdW1pbmcgPSB0cnVlO1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuICAvKipcbiAgICogUGF1c2UgdGhlIGNvbnN1bWVyLCBpZiB0aGUgc3RhdGUgb2YgdGhlIGNvbnN1bWVyIGlzIGBwbGF5YWJsZWAuXG4gICAqXG4gICAqIEByZXR1cm5zIC0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGNvbnN1bWVyIGlzIHBhdXNlZCwgYGZhbHNlYCBpZiB0aGUgY29uc3VtZXIgaXMgbm90IHBhdXNlZC5cbiAgICovXG4gIHBhdXNlID0gKCkgPT4ge1xuICAgIHRoaXMuI21lZGlhc291cENvbnN1bWVyPy5wYXVzZSgpO1xuICAgIHRoaXMuX19jb25zdW1pbmcgPSBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcbiAgLyoqXG4gICAqIFJlbW92ZXMgYWxsIHRoZSBldmVudExpc3RlbmVycyBhdHRhY2hlZCB0byB0aGUgQ29uc3VtZXIuXG4gICAqL1xuICByZW1vdmVMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgfTtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBDb25zdW1lciBpbnN0YW5jZS4gVGhpcyBpcyBhIHN0YXRpYyBtZXRob2QgYW5kIHNob3VsZCBiZSBjYWxsZWQgdXNpbmcgYENvbnN1bWVyLmNyZWF0ZSh7IHByb2R1Y2VyUGVlcklkLCBwcm9kdWNlcklkLCBsYWJlbCB9KWAuXG4gICAqL1xuICBzdGF0aWMgY3JlYXRlID0gKGRhdGEpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29uc3VtZXIgPSBuZXcgX0NvbnN1bWVyKGRhdGEpO1xuICAgICAgcmV0dXJuIGNvbnN1bWVyO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiXFx1Mjc0QyBFcnJvciBjcmVhdGluZyBDb25zdW1lclwiKTtcbiAgICB9XG4gIH07XG4gIGNsb3NlID0gKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLiNtZWRpYXNvdXBDb25zdW1lcj8uY2xvc2UoKTtcbiAgICAgIHRoaXMuX19jb25zdW1pbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuZW1pdChcImNsb3NlZFwiKTtcbiAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIlxcdTI3NEMgRXJyb3IgQ2xvc2luZyBDb25zdW1lclwiKTtcbiAgICAgIGxvZ2dlci5lcnJvcih7XG4gICAgICAgIGNvbnN1bWVySWQ6IHRoaXMuY29uc3VtZXJJZCxcbiAgICAgICAgcHJvZHVjZXJJZDogdGhpcy5wcm9kdWNlcklkXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMucHJvZHVjZXJQZWVySWQgPSBkYXRhLnByb2R1Y2VyUGVlcklkO1xuICAgIHRoaXMucHJvZHVjZXJJZCA9IGRhdGEucHJvZHVjZXJJZDtcbiAgICB0aGlzLmxhYmVsID0gZGF0YS5sYWJlbDtcbiAgICB0aGlzLl9fcHJvZHVjZXJQYXVzZWQgPSBkYXRhLnByb2R1Y2VyUGF1c2VkID8/IGZhbHNlO1xuICB9XG59O1xudmFyIENvbnN1bWVyX2RlZmF1bHQgPSBDb25zdW1lcjtcblxuZXhwb3J0IHsgQ29uc3VtZXJfZGVmYXVsdCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/chunk-YROZGIK5.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@huddle01/web-core/dist/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/@huddle01/web-core/dist/index.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Consumer: () => (/* reexport safe */ _chunk_YROZGIK5_js__WEBPACK_IMPORTED_MODULE_14__.Consumer_default),\n/* harmony export */   DeviceHandler: () => (/* reexport safe */ _chunk_HDCV2PNW_js__WEBPACK_IMPORTED_MODULE_15__.DeviceHandler_default),\n/* harmony export */   HuddleClient: () => (/* reexport safe */ _chunk_M5LJTIV6_js__WEBPACK_IMPORTED_MODULE_0__.HuddleClient_default),\n/* harmony export */   LocalPeer: () => (/* reexport safe */ _chunk_QACHVS7A_js__WEBPACK_IMPORTED_MODULE_1__.LocalPeer_default),\n/* harmony export */   Permissions: () => (/* reexport safe */ _chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_19__.Permissions_default),\n/* harmony export */   RemotePeer: () => (/* reexport safe */ _chunk_QACHVS7A_js__WEBPACK_IMPORTED_MODULE_1__.RemotePeer_default),\n/* harmony export */   Room: () => (/* reexport safe */ _chunk_BQEIAMKZ_js__WEBPACK_IMPORTED_MODULE_6__.Room_default),\n/* harmony export */   Socket: () => (/* reexport safe */ _chunk_B7NPLGIE_js__WEBPACK_IMPORTED_MODULE_7__.Socket_default),\n/* harmony export */   Transport: () => (/* reexport safe */ _chunk_OR44Z542_js__WEBPACK_IMPORTED_MODULE_2__.Transport_default)\n/* harmony export */ });\n/* harmony import */ var _chunk_M5LJTIV6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-M5LJTIV6.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-M5LJTIV6.js\");\n/* harmony import */ var _chunk_QACHVS7A_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-QACHVS7A.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-QACHVS7A.js\");\n/* harmony import */ var _chunk_OR44Z542_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-OR44Z542.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-OR44Z542.js\");\n/* harmony import */ var _chunk_2OLUNNR5_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunk-2OLUNNR5.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-2OLUNNR5.js\");\n/* harmony import */ var _chunk_MVJZAXK3_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./chunk-MVJZAXK3.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-MVJZAXK3.js\");\n/* harmony import */ var _chunk_WBDUVCNE_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./chunk-WBDUVCNE.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-WBDUVCNE.js\");\n/* harmony import */ var _chunk_BQEIAMKZ_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./chunk-BQEIAMKZ.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-BQEIAMKZ.js\");\n/* harmony import */ var _chunk_B7NPLGIE_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./chunk-B7NPLGIE.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-B7NPLGIE.js\");\n/* harmony import */ var _chunk_P6ECWQ7C_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./chunk-P6ECWQ7C.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-P6ECWQ7C.js\");\n/* harmony import */ var _chunk_NTD5WULD_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./chunk-NTD5WULD.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-NTD5WULD.js\");\n/* harmony import */ var _chunk_UNAM3CMB_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./chunk-UNAM3CMB.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-UNAM3CMB.js\");\n/* harmony import */ var _chunk_SJ5FMYZU_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./chunk-SJ5FMYZU.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-SJ5FMYZU.js\");\n/* harmony import */ var _chunk_DFNYORIF_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./chunk-DFNYORIF.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-DFNYORIF.js\");\n/* harmony import */ var _chunk_6MHHX2FW_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./chunk-6MHHX2FW.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-6MHHX2FW.js\");\n/* harmony import */ var _chunk_YROZGIK5_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./chunk-YROZGIK5.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-YROZGIK5.js\");\n/* harmony import */ var _chunk_HDCV2PNW_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./chunk-HDCV2PNW.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-HDCV2PNW.js\");\n/* harmony import */ var _chunk_FIM2WZLS_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./chunk-FIM2WZLS.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-FIM2WZLS.js\");\n/* harmony import */ var _chunk_Q4PETRM3_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./chunk-Q4PETRM3.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-Q4PETRM3.js\");\n/* harmony import */ var _chunk_WA3QABYS_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./chunk-WA3QABYS.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-WA3QABYS.js\");\n/* harmony import */ var _chunk_E2DU7IIE_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./chunk-E2DU7IIE.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-E2DU7IIE.js\");\n/* harmony import */ var _chunk_TOCFOGTC_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./chunk-TOCFOGTC.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-TOCFOGTC.js\");\n/* harmony import */ var _chunk_BW2DGP4D_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./chunk-BW2DGP4D.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-BW2DGP4D.js\");\n/* harmony import */ var _chunk_JSBRDJBE_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./chunk-JSBRDJBE.js */ \"(ssr)/./node_modules/@huddle01/web-core/dist/chunk-JSBRDJBE.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGh1ZGRsZTAxL3dlYi1jb3JlL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMkU7QUFDNEI7QUFDbEM7QUFDeEM7QUFDQTtBQUNBO0FBQzhCO0FBQ0k7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3NDO0FBQ1U7QUFDaEQ7QUFDQTtBQUNBO0FBQzRDO0FBQzVDO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Bva2Vtb24tZ2FtZS1ldGhpbmRpYS0xLy4vbm9kZV9tb2R1bGVzL0BodWRkbGUwMS93ZWItY29yZS9kaXN0L2luZGV4LmpzPzU2ODciXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgSHVkZGxlQ2xpZW50X2RlZmF1bHQgYXMgSHVkZGxlQ2xpZW50IH0gZnJvbSAnLi9jaHVuay1NNUxKVElWNi5qcyc7XG5leHBvcnQgeyBMb2NhbFBlZXJfZGVmYXVsdCBhcyBMb2NhbFBlZXIsIFJlbW90ZVBlZXJfZGVmYXVsdCBhcyBSZW1vdGVQZWVyIH0gZnJvbSAnLi9jaHVuay1RQUNIVlM3QS5qcyc7XG5leHBvcnQgeyBUcmFuc3BvcnRfZGVmYXVsdCBhcyBUcmFuc3BvcnQgfSBmcm9tICcuL2NodW5rLU9SNDRaNTQyLmpzJztcbmltcG9ydCAnLi9jaHVuay0yT0xVTk5SNS5qcyc7XG5pbXBvcnQgJy4vY2h1bmstTVZKWkFYSzMuanMnO1xuaW1wb3J0ICcuL2NodW5rLVdCRFVWQ05FLmpzJztcbmV4cG9ydCB7IFJvb21fZGVmYXVsdCBhcyBSb29tIH0gZnJvbSAnLi9jaHVuay1CUUVJQU1LWi5qcyc7XG5leHBvcnQgeyBTb2NrZXRfZGVmYXVsdCBhcyBTb2NrZXQgfSBmcm9tICcuL2NodW5rLUI3TlBMR0lFLmpzJztcbmltcG9ydCAnLi9jaHVuay1QNkVDV1E3Qy5qcyc7XG5pbXBvcnQgJy4vY2h1bmstTlRENVdVTEQuanMnO1xuaW1wb3J0ICcuL2NodW5rLVVOQU0zQ01CLmpzJztcbmltcG9ydCAnLi9jaHVuay1TSjVGTVlaVS5qcyc7XG5pbXBvcnQgJy4vY2h1bmstREZOWU9SSUYuanMnO1xuaW1wb3J0ICcuL2NodW5rLTZNSEhYMkZXLmpzJztcbmV4cG9ydCB7IENvbnN1bWVyX2RlZmF1bHQgYXMgQ29uc3VtZXIgfSBmcm9tICcuL2NodW5rLVlST1pHSUs1LmpzJztcbmV4cG9ydCB7IERldmljZUhhbmRsZXJfZGVmYXVsdCBhcyBEZXZpY2VIYW5kbGVyIH0gZnJvbSAnLi9jaHVuay1IRENWMlBOVy5qcyc7XG5pbXBvcnQgJy4vY2h1bmstRklNMldaTFMuanMnO1xuaW1wb3J0ICcuL2NodW5rLVE0UEVUUk0zLmpzJztcbmltcG9ydCAnLi9jaHVuay1XQTNRQUJZUy5qcyc7XG5leHBvcnQgeyBQZXJtaXNzaW9uc19kZWZhdWx0IGFzIFBlcm1pc3Npb25zIH0gZnJvbSAnLi9jaHVuay1FMkRVN0lJRS5qcyc7XG5pbXBvcnQgJy4vY2h1bmstVE9DRk9HVEMuanMnO1xuaW1wb3J0ICcuL2NodW5rLUJXMkRHUDRELmpzJztcbmltcG9ydCAnLi9jaHVuay1KU0JSREpCRS5qcyc7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@huddle01/web-core/dist/index.js\n");

/***/ })

};
;